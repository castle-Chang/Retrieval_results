{"doc_id": "setup.py::find_version", "file_path": "setup.py", "class_name": null, "func_name": "find_version", "text": "文件路径: setup.py\ndef find_version(fname):\n    \"\"\"Attempts to find the version number in the file names fname.\n    Raises RuntimeError if not found.\n    \"\"\"\n    version = \"\"\n    with open(fname, \"r\") as fp:\n        reg = re.compile(r'__version__ = [\\'\"]([^\\'\"]*)[\\'\"]')\n        for line in fp:\n            m = reg.match(line)\n            if m:\n                version = m.group(1)\n                break\n    if not version:\n        raise RuntimeError(\"Cannot find version information\")\n    return version\n", "tokens": ["setup", "py", "def", "find_version", "fname", "attempts", "to", "find", "the", "version", "number", "in", "the", "file", "names", "fname", "raises", "runtimeerror", "if", "not", "found", "version", "with", "open", "fname", "r", "as", "fp", "reg", "re", "compile", "r", "__version__", "for", "line", "in", "fp", "m", "reg", "match", "line", "if", "m", "version", "m", "group", "1", "break", "if", "not", "version", "raise", "runtimeerror", "cannot", "find", "version", "information", "return", "version"], "doc_len": 59}
{"doc_id": "setup.py::read", "file_path": "setup.py", "class_name": null, "func_name": "read", "text": "文件路径: setup.py\ndef read(fname):\n    with open(fname) as fp:\n        content = fp.read()\n    return content\n", "tokens": ["setup", "py", "def", "read", "fname", "with", "open", "fname", "as", "fp", "content", "fp", "read", "return", "content"], "doc_len": 15}
{"doc_id": "docs/conf.py::setup", "file_path": "docs/conf.py", "class_name": null, "func_name": "setup", "text": "文件路径: docs/conf.py\ndef setup(app):\n    # https://docs.readthedocs.io/en/latest/guides/adding-custom-css.html\n    app.add_stylesheet(\"css/versionwarning.css\")\n", "tokens": ["docs", "conf", "py", "def", "setup", "app", "https", "docs", "readthedocs", "io", "en", "latest", "guides", "adding", "custom", "css", "html", "app", "add_stylesheet", "css", "versionwarning", "css"], "doc_len": 22}
{"doc_id": "examples/flask_example.py::AuthorSchema.format_name", "file_path": "examples/flask_example.py", "class_name": "AuthorSchema", "func_name": "format_name", "text": "文件路径: examples/flask_example.py, 类名: AuthorSchema\n    def format_name(self, author):\n        return \"{}, {}\".format(author.last, author.first)\n", "tokens": ["examples", "flask_example", "py", "authorschema", "def", "format_name", "self", "author", "return", "format", "author", "last", "author", "first"], "doc_len": 14}
{"doc_id": "examples/flask_example.py::must_not_be_blank", "file_path": "examples/flask_example.py", "class_name": null, "func_name": "must_not_be_blank", "text": "文件路径: examples/flask_example.py\ndef must_not_be_blank(data):\n    if not data:\n        raise ValidationError(\"Data not provided.\")\n", "tokens": ["examples", "flask_example", "py", "def", "must_not_be_blank", "data", "if", "not", "data", "raise", "validationerror", "data", "not", "provided"], "doc_len": 14}
{"doc_id": "examples/flask_example.py::QuoteSchema.process_author", "file_path": "examples/flask_example.py", "class_name": "QuoteSchema", "func_name": "process_author", "text": "文件路径: examples/flask_example.py, 类名: QuoteSchema\n    def process_author(self, data, **kwargs):\n        author_name = data.get(\"author\")\n        if author_name:\n            first, last = author_name.split(\" \")\n            author_dict = dict(first=first, last=last)\n        else:\n            author_dict = {}\n        data[\"author\"] = author_dict\n        return data\n", "tokens": ["examples", "flask_example", "py", "quoteschema", "def", "process_author", "self", "data", "kwargs", "author_name", "data", "get", "author", "if", "author_name", "first", "last", "author_name", "split", "author_dict", "dict", "first", "first", "last", "last", "else", "author_dict", "data", "author", "author_dict", "return", "data"], "doc_len": 32}
{"doc_id": "examples/flask_example.py::get_authors", "file_path": "examples/flask_example.py", "class_name": null, "func_name": "get_authors", "text": "文件路径: examples/flask_example.py\ndef get_authors():\n    authors = Author.query.all()\n    # Serialize the queryset\n    result = authors_schema.dump(authors)\n    return {\"authors\": result}\n", "tokens": ["examples", "flask_example", "py", "def", "get_authors", "authors", "author", "query", "all", "serialize", "the", "queryset", "result", "authors_schema", "dump", "authors", "return", "authors", "result"], "doc_len": 19}
{"doc_id": "examples/flask_example.py::get_author", "file_path": "examples/flask_example.py", "class_name": null, "func_name": "get_author", "text": "文件路径: examples/flask_example.py\ndef get_author(pk):\n    try:\n        author = Author.query.get(pk)\n    except IntegrityError:\n        return {\"message\": \"Author could not be found.\"}, 400\n    author_result = author_schema.dump(author)\n    quotes_result = quotes_schema.dump(author.quotes.all())\n    return {\"author\": author_result, \"quotes\": quotes_result}\n", "tokens": ["examples", "flask_example", "py", "def", "get_author", "pk", "try", "author", "author", "query", "get", "pk", "except", "integrityerror", "return", "message", "author", "could", "not", "be", "found", "400", "author_result", "author_schema", "dump", "author", "quotes_result", "quotes_schema", "dump", "author", "quotes", "all", "return", "author", "author_result", "quotes", "quotes_result"], "doc_len": 37}
{"doc_id": "examples/flask_example.py::get_quotes", "file_path": "examples/flask_example.py", "class_name": null, "func_name": "get_quotes", "text": "文件路径: examples/flask_example.py\ndef get_quotes():\n    quotes = Quote.query.all()\n    result = quotes_schema.dump(quotes, many=True)\n    return {\"quotes\": result}\n", "tokens": ["examples", "flask_example", "py", "def", "get_quotes", "quotes", "quote", "query", "all", "result", "quotes_schema", "dump", "quotes", "many", "true", "return", "quotes", "result"], "doc_len": 18}
{"doc_id": "examples/flask_example.py::get_quote", "file_path": "examples/flask_example.py", "class_name": null, "func_name": "get_quote", "text": "文件路径: examples/flask_example.py\ndef get_quote(pk):\n    try:\n        quote = Quote.query.get(pk)\n    except IntegrityError:\n        return {\"message\": \"Quote could not be found.\"}, 400\n    result = quote_schema.dump(quote)\n    return {\"quote\": result}\n", "tokens": ["examples", "flask_example", "py", "def", "get_quote", "pk", "try", "quote", "quote", "query", "get", "pk", "except", "integrityerror", "return", "message", "quote", "could", "not", "be", "found", "400", "result", "quote_schema", "dump", "quote", "return", "quote", "result"], "doc_len": 29}
{"doc_id": "examples/flask_example.py::new_quote", "file_path": "examples/flask_example.py", "class_name": null, "func_name": "new_quote", "text": "文件路径: examples/flask_example.py\ndef new_quote():\n    json_data = request.get_json()\n    if not json_data:\n        return {\"message\": \"No input data provided\"}, 400\n    # Validate and deserialize input\n    try:\n        data = quote_schema.load(json_data)\n    except ValidationError as err:\n        return err.messages, 422\n    first, last = data[\"author\"][\"first\"], data[\"author\"][\"last\"]\n    author = Author.query.filter_by(first=first, last=last).first()\n    if author is None:\n        # Create a new author\n        author = Author(first=first, last=last)\n        db.session.add(author)\n    # Create new quote\n    quote = Quote(\n        content=data[\"content\"], author=author, posted_at=datetime.datetime.utcnow()\n    )\n    db.session.add(quote)\n    db.session.commit()\n    result = quote_schema.dump(Quote.query.get(quote.id))\n    return {\"message\": \"Created new quote.\", \"quote\": result}\n", "tokens": ["examples", "flask_example", "py", "def", "new_quote", "json_data", "request", "get_json", "if", "not", "json_data", "return", "message", "no", "input", "data", "provided", "400", "validate", "and", "deserialize", "input", "try", "data", "quote_schema", "load", "json_data", "except", "validationerror", "as", "err", "return", "err", "messages", "422", "first", "last", "data", "author", "first", "data", "author", "last", "author", "author", "query", "filter_by", "first", "first", "last", "last", "first", "if", "author", "is", "none", "create", "a", "new", "author", "author", "author", "first", "first", "last", "last", "db", "session", "add", "author", "create", "new", "quote", "quote", "quote", "content", "data", "content", "author", "author", "posted_at", "datetime", "datetime", "utcnow", "db", "session", "add", "quote", "db", "session", "commit", "result", "quote_schema", "dump", "quote", "query", "get", "quote", "id", "return", "message", "created", "new", "quote", "quote", "result"], "doc_len": 106}
{"doc_id": "examples/inflection_example.py::camelcase", "file_path": "examples/inflection_example.py", "class_name": null, "func_name": "camelcase", "text": "文件路径: examples/inflection_example.py\ndef camelcase(s):\n    parts = iter(s.split(\"_\"))\n    return next(parts) + \"\".join(i.title() for i in parts)\n", "tokens": ["examples", "inflection_example", "py", "def", "camelcase", "s", "parts", "iter", "s", "split", "_", "return", "next", "parts", "join", "i", "title", "for", "i", "in", "parts"], "doc_len": 21}
{"doc_id": "examples/inflection_example.py::CamelCaseSchema.on_bind_field", "file_path": "examples/inflection_example.py", "class_name": "CamelCaseSchema", "func_name": "on_bind_field", "text": "文件路径: examples/inflection_example.py, 类名: CamelCaseSchema\n    def on_bind_field(self, field_name, field_obj):\n        field_obj.data_key = camelcase(field_obj.data_key or field_name)\n", "tokens": ["examples", "inflection_example", "py", "camelcaseschema", "def", "on_bind_field", "self", "field_name", "field_obj", "field_obj", "data_key", "camelcase", "field_obj", "data_key", "or", "field_name"], "doc_len": 16}
{"doc_id": "examples/package_json_example.py::Version._deserialize", "file_path": "examples/package_json_example.py", "class_name": "Version", "func_name": "_deserialize", "text": "文件路径: examples/package_json_example.py, 类名: Version\n    def _deserialize(self, value, *args, **kwargs):\n        try:\n            return version.Version(value)\n        except version.InvalidVersion:\n            raise ValidationError(\"Not a valid version.\")\n", "tokens": ["examples", "package_json_example", "py", "version", "def", "_deserialize", "self", "value", "args", "kwargs", "try", "return", "version", "version", "value", "except", "version", "invalidversion", "raise", "validationerror", "not", "a", "valid", "version"], "doc_len": 24}
{"doc_id": "examples/package_json_example.py::Version._serialize", "file_path": "examples/package_json_example.py", "class_name": "Version", "func_name": "_serialize", "text": "文件路径: examples/package_json_example.py, 类名: Version\n    def _serialize(self, value, *args, **kwargs):\n        return str(value)\n", "tokens": ["examples", "package_json_example", "py", "version", "def", "_serialize", "self", "value", "args", "kwargs", "return", "str", "value"], "doc_len": 13}
{"doc_id": "examples/peewee_example.py::create_tables", "file_path": "examples/peewee_example.py", "class_name": null, "func_name": "create_tables", "text": "文件路径: examples/peewee_example.py\ndef create_tables():\n    db.connect()\n    User.create_table(True)\n    Todo.create_table(True)\n", "tokens": ["examples", "peewee_example", "py", "def", "create_tables", "db", "connect", "user", "create_table", "true", "todo", "create_table", "true"], "doc_len": 13}
{"doc_id": "examples/peewee_example.py::UserSchema.process_input", "file_path": "examples/peewee_example.py", "class_name": "UserSchema", "func_name": "process_input", "text": "文件路径: examples/peewee_example.py, 类名: UserSchema\n    def process_input(self, data, **kwargs):\n        data[\"email\"] = data[\"email\"].lower().strip()\n        return data\n", "tokens": ["examples", "peewee_example", "py", "userschema", "def", "process_input", "self", "data", "kwargs", "data", "email", "data", "email", "lower", "strip", "return", "data"], "doc_len": 17}
{"doc_id": "examples/peewee_example.py::UserSchema.wrap", "file_path": "examples/peewee_example.py", "class_name": "UserSchema", "func_name": "wrap", "text": "文件路径: examples/peewee_example.py, 类名: UserSchema\n    def wrap(self, data, many, **kwargs):\n        key = \"users\" if many else \"user\"\n        return {key: data}\n", "tokens": ["examples", "peewee_example", "py", "userschema", "def", "wrap", "self", "data", "many", "kwargs", "key", "users", "if", "many", "else", "user", "return", "key", "data"], "doc_len": 19}
{"doc_id": "examples/peewee_example.py::TodoSchema.wrap", "file_path": "examples/peewee_example.py", "class_name": "TodoSchema", "func_name": "wrap", "text": "文件路径: examples/peewee_example.py, 类名: TodoSchema\n    def wrap(self, data, many, **kwargs):\n        key = \"todos\" if many else \"todo\"\n        return {key: data}\n", "tokens": ["examples", "peewee_example", "py", "todoschema", "def", "wrap", "self", "data", "many", "kwargs", "key", "todos", "if", "many", "else", "todo", "return", "key", "data"], "doc_len": 19}
{"doc_id": "examples/peewee_example.py::TodoSchema.make_object", "file_path": "examples/peewee_example.py", "class_name": "TodoSchema", "func_name": "make_object", "text": "文件路径: examples/peewee_example.py, 类名: TodoSchema\n    def make_object(self, data, **kwargs):\n        if not data:\n            return None\n        return Todo(\n            content=data[\"content\"],\n            is_done=data[\"is_done\"],\n            posted_on=dt.datetime.utcnow(),\n        )\n", "tokens": ["examples", "peewee_example", "py", "todoschema", "def", "make_object", "self", "data", "kwargs", "if", "not", "data", "return", "none", "return", "todo", "content", "data", "content", "is_done", "data", "is_done", "posted_on", "dt", "datetime", "utcnow"], "doc_len": 26}
{"doc_id": "examples/peewee_example.py::check_auth", "file_path": "examples/peewee_example.py", "class_name": null, "func_name": "check_auth", "text": "文件路径: examples/peewee_example.py\ndef check_auth(email, password):\n    \"\"\"Check if a username/password combination is valid.\n    \"\"\"\n    try:\n        user = User.get(User.email == email)\n    except User.DoesNotExist:\n        return False\n    return password == user.password\n", "tokens": ["examples", "peewee_example", "py", "def", "check_auth", "email", "password", "check", "if", "a", "username", "password", "combination", "is", "valid", "try", "user", "user", "get", "user", "email", "email", "except", "user", "doesnotexist", "return", "false", "return", "password", "user", "password"], "doc_len": 31}
{"doc_id": "examples/peewee_example.py::requires_auth", "file_path": "examples/peewee_example.py", "class_name": null, "func_name": "requires_auth", "text": "文件路径: examples/peewee_example.py\ndef requires_auth(f):\n    @wraps(f)\n    def decorated(*args, **kwargs):\n        auth = request.authorization\n        if not auth or not check_auth(auth.username, auth.password):\n            resp = jsonify({\"message\": \"Please authenticate.\"})\n            resp.status_code = 401\n            resp.headers[\"WWW-Authenticate\"] = 'Basic realm=\"Example\"'\n            return resp\n        kwargs[\"user\"] = User.get(User.email == auth.username)\n        return f(*args, **kwargs)\n\n    return decorated\n", "tokens": ["examples", "peewee_example", "py", "def", "requires_auth", "f", "wraps", "f", "def", "decorated", "args", "kwargs", "auth", "request", "authorization", "if", "not", "auth", "or", "not", "check_auth", "auth", "username", "auth", "password", "resp", "jsonify", "message", "please", "authenticate", "resp", "status_code", "401", "resp", "headers", "www", "authenticate", "basic", "realm", "example", "return", "resp", "kwargs", "user", "user", "get", "user", "email", "auth", "username", "return", "f", "args", "kwargs", "return", "decorated"], "doc_len": 56}
{"doc_id": "examples/peewee_example.py::before_request", "file_path": "examples/peewee_example.py", "class_name": null, "func_name": "before_request", "text": "文件路径: examples/peewee_example.py\ndef before_request():\n    g.db = db\n    g.db.connect()\n", "tokens": ["examples", "peewee_example", "py", "def", "before_request", "g", "db", "db", "g", "db", "connect"], "doc_len": 11}
{"doc_id": "examples/peewee_example.py::after_request", "file_path": "examples/peewee_example.py", "class_name": null, "func_name": "after_request", "text": "文件路径: examples/peewee_example.py\ndef after_request(response):\n    g.db.close()\n    return response\n", "tokens": ["examples", "peewee_example", "py", "def", "after_request", "response", "g", "db", "close", "return", "response"], "doc_len": 11}
{"doc_id": "examples/peewee_example.py::register", "file_path": "examples/peewee_example.py", "class_name": null, "func_name": "register", "text": "文件路径: examples/peewee_example.py\ndef register():\n    json_input = request.get_json()\n    try:\n        data = user_schema.load(json_input)\n    except ValidationError as err:\n        return {\"errors\": err.messages}, 422\n    try:  # Use get to see if user already exists\n        User.get(User.email == data[\"email\"])\n    except User.DoesNotExist:\n        user = User.create(\n            email=data[\"email\"], joined_on=dt.datetime.now(), password=data[\"password\"]\n        )\n        message = \"Successfully created user: {}\".format(user.email)\n    else:\n        return {\"errors\": \"That email address is already in the database\"}, 400\n\n    data = user_schema.dump(user)\n    data[\"message\"] = message\n    return data, 201\n", "tokens": ["examples", "peewee_example", "py", "def", "register", "json_input", "request", "get_json", "try", "data", "user_schema", "load", "json_input", "except", "validationerror", "as", "err", "return", "errors", "err", "messages", "422", "try", "use", "get", "to", "see", "if", "user", "already", "exists", "user", "get", "user", "email", "data", "email", "except", "user", "doesnotexist", "user", "user", "create", "email", "data", "email", "joined_on", "dt", "datetime", "now", "password", "data", "password", "message", "successfully", "created", "user", "format", "user", "email", "else", "return", "errors", "that", "email", "address", "is", "already", "in", "the", "database", "400", "data", "user_schema", "dump", "user", "data", "message", "message", "return", "data", "201"], "doc_len": 82}
{"doc_id": "examples/peewee_example.py::get_todos", "file_path": "examples/peewee_example.py", "class_name": null, "func_name": "get_todos", "text": "文件路径: examples/peewee_example.py\ndef get_todos():\n    todos = Todo.select().order_by(Todo.posted_on.asc())  # Get all todos\n    return todos_schema.dump(list(todos))\n", "tokens": ["examples", "peewee_example", "py", "def", "get_todos", "todos", "todo", "select", "order_by", "todo", "posted_on", "asc", "get", "all", "todos", "return", "todos_schema", "dump", "list", "todos"], "doc_len": 20}
{"doc_id": "examples/peewee_example.py::get_todo", "file_path": "examples/peewee_example.py", "class_name": null, "func_name": "get_todo", "text": "文件路径: examples/peewee_example.py\ndef get_todo(pk):\n    todo = Todo.get(Todo.id == pk)\n    if not todo:\n        return {\"errors\": \"Todo could not be find\"}, 404\n    return todo_schema.dump(todo)\n", "tokens": ["examples", "peewee_example", "py", "def", "get_todo", "pk", "todo", "todo", "get", "todo", "id", "pk", "if", "not", "todo", "return", "errors", "todo", "could", "not", "be", "find", "404", "return", "todo_schema", "dump", "todo"], "doc_len": 27}
{"doc_id": "examples/peewee_example.py::toggledone", "file_path": "examples/peewee_example.py", "class_name": null, "func_name": "toggledone", "text": "文件路径: examples/peewee_example.py\ndef toggledone(pk):\n    try:\n        todo = Todo.get(Todo.id == pk)\n    except Todo.DoesNotExist:\n        return {\"message\": \"Todo could not be found\"}, 404\n    status = not todo.is_done\n    update_query = todo.update(is_done=status)\n    update_query.execute()\n    return todo_schema.dump(todo)\n", "tokens": ["examples", "peewee_example", "py", "def", "toggledone", "pk", "try", "todo", "todo", "get", "todo", "id", "pk", "except", "todo", "doesnotexist", "return", "message", "todo", "could", "not", "be", "found", "404", "status", "not", "todo", "is_done", "update_query", "todo", "update", "is_done", "status", "update_query", "execute", "return", "todo_schema", "dump", "todo"], "doc_len": 39}
{"doc_id": "examples/peewee_example.py::new_todo", "file_path": "examples/peewee_example.py", "class_name": null, "func_name": "new_todo", "text": "文件路径: examples/peewee_example.py\ndef new_todo(user):\n    json_input = request.get_json()\n    try:\n        todo = todo_schema.load(json_input)\n    except ValidationError as err:\n        return {\"errors\": err.messages}, 422\n    todo.user = user\n    todo.save()\n    return todo_schema.dump(todo)\n", "tokens": ["examples", "peewee_example", "py", "def", "new_todo", "user", "json_input", "request", "get_json", "try", "todo", "todo_schema", "load", "json_input", "except", "validationerror", "as", "err", "return", "errors", "err", "messages", "422", "todo", "user", "user", "todo", "save", "return", "todo_schema", "dump", "todo"], "doc_len": 32}
{"doc_id": "examples/textblob_example.py::BlobSchema.get_discrete_sentiment", "file_path": "examples/textblob_example.py", "class_name": "BlobSchema", "func_name": "get_discrete_sentiment", "text": "文件路径: examples/textblob_example.py, 类名: BlobSchema\n    def get_discrete_sentiment(self, obj):\n        if obj.polarity > 0.1:\n            return \"positive\"\n        elif obj.polarity < -0.1:\n            return \"negative\"\n        else:\n            return \"neutral\"\n", "tokens": ["examples", "textblob_example", "py", "blobschema", "def", "get_discrete_sentiment", "self", "obj", "if", "obj", "polarity", "0", "1", "return", "positive", "elif", "obj", "polarity", "0", "1", "return", "negative", "else", "return", "neutral"], "doc_len": 25}
{"doc_id": "examples/textblob_example.py::analyze", "file_path": "examples/textblob_example.py", "class_name": null, "func_name": "analyze", "text": "文件路径: examples/textblob_example.py\ndef analyze():\n    blob = TextBlob(request.json[\"text\"])\n    return blob_schema.dump(blob)\n", "tokens": ["examples", "textblob_example", "py", "def", "analyze", "blob", "textblob", "request", "json", "text", "return", "blob_schema", "dump", "blob"], "doc_len": 14}
{"doc_id": "performance/benchmark.py::must_not_be_blank", "file_path": "performance/benchmark.py", "class_name": null, "func_name": "must_not_be_blank", "text": "文件路径: performance/benchmark.py\ndef must_not_be_blank(data):\n    if not data:\n        raise ValidationError(\"Data not provided.\")\n", "tokens": ["performance", "benchmark", "py", "def", "must_not_be_blank", "data", "if", "not", "data", "raise", "validationerror", "data", "not", "provided"], "doc_len": 14}
{"doc_id": "performance/benchmark.py::AuthorSchema.full_name", "file_path": "performance/benchmark.py", "class_name": "AuthorSchema", "func_name": "full_name", "text": "文件路径: performance/benchmark.py, 类名: AuthorSchema\n    def full_name(self, author):\n        return \"{}, {}\".format(author.last, author.first)\n", "tokens": ["performance", "benchmark", "py", "authorschema", "def", "full_name", "self", "author", "return", "format", "author", "last", "author", "first"], "doc_len": 14}
{"doc_id": "performance/benchmark.py::QuoteSchema.add_full_name", "file_path": "performance/benchmark.py", "class_name": "QuoteSchema", "func_name": "add_full_name", "text": "文件路径: performance/benchmark.py, 类名: QuoteSchema\n    def add_full_name(self, data, **kwargs):\n        data[\"author_full\"] = \"{}, {}\".format(\n            data[\"author\"][\"last\"], data[\"author\"][\"first\"]\n        )\n        return data\n", "tokens": ["performance", "benchmark", "py", "quoteschema", "def", "add_full_name", "self", "data", "kwargs", "data", "author_full", "format", "data", "author", "last", "data", "author", "first", "return", "data"], "doc_len": 20}
{"doc_id": "performance/benchmark.py::Author.__init__", "file_path": "performance/benchmark.py", "class_name": "Author", "func_name": "__init__", "text": "文件路径: performance/benchmark.py, 类名: Author\n    def __init__(self, id, first, last, book_count, age, address):\n        self.id = id\n        self.first = first\n        self.last = last\n        self.book_count = book_count\n        self.age = age\n        self.address = address\n", "tokens": ["performance", "benchmark", "py", "author", "def", "__init__", "self", "id", "first", "last", "book_count", "age", "address", "self", "id", "id", "self", "first", "first", "self", "last", "last", "self", "book_count", "book_count", "self", "age", "age", "self", "address", "address"], "doc_len": 31}
{"doc_id": "performance/benchmark.py::Quote.__init__", "file_path": "performance/benchmark.py", "class_name": "Quote", "func_name": "__init__", "text": "文件路径: performance/benchmark.py, 类名: Quote\n    def __init__(\n        self,\n        id,\n        author,\n        content,\n        posted_at,\n        book_name,\n        page_number,\n        line_number,\n        col_number,\n    ):\n        self.id = id\n        self.author = author\n        self.content = content\n        self.posted_at = posted_at\n        self.book_name = book_name\n        self.page_number = page_number\n        self.line_number = line_number\n        self.col_number = col_number\n", "tokens": ["performance", "benchmark", "py", "quote", "def", "__init__", "self", "id", "author", "content", "posted_at", "book_name", "page_number", "line_number", "col_number", "self", "id", "id", "self", "author", "author", "self", "content", "content", "self", "posted_at", "posted_at", "self", "book_name", "book_name", "self", "page_number", "page_number", "self", "line_number", "line_number", "self", "col_number", "col_number"], "doc_len": 39}
{"doc_id": "performance/benchmark.py::run_timeit", "file_path": "performance/benchmark.py", "class_name": null, "func_name": "run_timeit", "text": "文件路径: performance/benchmark.py\ndef run_timeit(quotes, iterations, repeat, profile=False):\n    quotes_schema = QuoteSchema(many=True)\n    if profile:\n        profile = cProfile.Profile()\n        profile.enable()\n\n    gc.collect()\n    best = min(\n        timeit.repeat(\n            lambda: quotes_schema.dump(quotes),\n            \"gc.enable()\",\n            number=iterations,\n            repeat=repeat,\n        )\n    )\n    if profile:\n        profile.disable()\n        profile.dump_stats(\"marshmallow.pprof\")\n\n    usec = best * 1e6 / iterations\n    return usec\n", "tokens": ["performance", "benchmark", "py", "def", "run_timeit", "quotes", "iterations", "repeat", "profile", "false", "quotes_schema", "quoteschema", "many", "true", "if", "profile", "profile", "cprofile", "profile", "profile", "enable", "gc", "collect", "best", "min", "timeit", "repeat", "lambda", "quotes_schema", "dump", "quotes", "gc", "enable", "number", "iterations", "repeat", "repeat", "if", "profile", "profile", "disable", "profile", "dump_stats", "marshmallow", "pprof", "usec", "best", "1e6", "iterations", "return", "usec"], "doc_len": 51}
{"doc_id": "performance/benchmark.py::main", "file_path": "performance/benchmark.py", "class_name": null, "func_name": "main", "text": "文件路径: performance/benchmark.py\ndef main():\n    parser = argparse.ArgumentParser(description=\"Runs a benchmark of Marshmallow.\")\n    parser.add_argument(\n        \"--iterations\",\n        type=int,\n        default=1000,\n        help=\"Number of iterations to run per test.\",\n    )\n    parser.add_argument(\n        \"--repeat\",\n        type=int,\n        default=5,\n        help=\"Number of times to repeat the performance test.  The minimum will \"\n        \"be used.\",\n    )\n    parser.add_argument(\n        \"--object-count\", type=int, default=20, help=\"Number of objects to dump.\"\n    )\n    parser.add_argument(\n        \"--profile\",\n        action=\"store_true\",\n        help=\"Whether or not to profile Marshmallow while running the benchmark.\",\n    )\n    args = parser.parse_args()\n\n    quotes = []\n\n    for i in range(args.object_count):\n        quotes.append(\n            Quote(\n                i,\n                Author(i, \"Foo\", \"Bar\", 42, 66, \"123 Fake St\"),\n                \"Hello World\",\n                datetime.datetime(2019, 7, 4, tzinfo=datetime.timezone.utc),\n                \"The World\",\n                34,\n                3,\n                70,\n            )\n        )\n\n    print(\n        \"Benchmark Result: {:.2f} usec/dump\".format(\n            run_timeit(quotes, args.iterations, args.repeat, profile=args.profile)\n        )\n    )\n", "tokens": ["performance", "benchmark", "py", "def", "main", "parser", "argparse", "argumentparser", "description", "runs", "a", "benchmark", "of", "marshmallow", "parser", "add_argument", "iterations", "type", "int", "default", "1000", "help", "number", "of", "iterations", "to", "run", "per", "test", "parser", "add_argument", "repeat", "type", "int", "default", "5", "help", "number", "of", "times", "to", "repeat", "the", "performance", "test", "the", "minimum", "will", "be", "used", "parser", "add_argument", "object", "count", "type", "int", "default", "20", "help", "number", "of", "objects", "to", "dump", "parser", "add_argument", "profile", "action", "store_true", "help", "whether", "or", "not", "to", "profile", "marshmallow", "while", "running", "the", "benchmark", "args", "parser", "parse_args", "quotes", "for", "i", "in", "range", "args", "object_count", "quotes", "append", "quote", "i", "author", "i", "foo", "bar", "42", "66", "123", "fake", "st", "hello", "world", "datetime", "datetime", "2019", "7", "4", "tzinfo", "datetime", "timezone", "utc", "the", "world", "34", "3", "70", "print", "benchmark", "result", "2f", "usec", "dump", "format", "run_timeit", "quotes", "args", "iterations", "args", "repeat", "profile", "args", "profile"], "doc_len": 135}
{"doc_id": "src/marshmallow/base.py::FieldABC.serialize", "file_path": "src/marshmallow/base.py", "class_name": "FieldABC", "func_name": "serialize", "text": "文件路径: src/marshmallow/base.py, 类名: FieldABC\n    def serialize(self, attr, obj, accessor=None):\n        raise NotImplementedError\n", "tokens": ["src", "marshmallow", "base", "py", "fieldabc", "def", "serialize", "self", "attr", "obj", "accessor", "none", "raise", "notimplementederror"], "doc_len": 14}
{"doc_id": "src/marshmallow/base.py::FieldABC.deserialize", "file_path": "src/marshmallow/base.py", "class_name": "FieldABC", "func_name": "deserialize", "text": "文件路径: src/marshmallow/base.py, 类名: FieldABC\n    def deserialize(self, value):\n        raise NotImplementedError\n", "tokens": ["src", "marshmallow", "base", "py", "fieldabc", "def", "deserialize", "self", "value", "raise", "notimplementederror"], "doc_len": 11}
{"doc_id": "src/marshmallow/base.py::FieldABC._serialize", "file_path": "src/marshmallow/base.py", "class_name": "FieldABC", "func_name": "_serialize", "text": "文件路径: src/marshmallow/base.py, 类名: FieldABC\n    def _serialize(self, value, attr, obj, **kwargs):\n        raise NotImplementedError\n", "tokens": ["src", "marshmallow", "base", "py", "fieldabc", "def", "_serialize", "self", "value", "attr", "obj", "kwargs", "raise", "notimplementederror"], "doc_len": 14}
{"doc_id": "src/marshmallow/base.py::FieldABC._deserialize", "file_path": "src/marshmallow/base.py", "class_name": "FieldABC", "func_name": "_deserialize", "text": "文件路径: src/marshmallow/base.py, 类名: FieldABC\n    def _deserialize(self, value, attr, data, **kwargs):\n        raise NotImplementedError\n", "tokens": ["src", "marshmallow", "base", "py", "fieldabc", "def", "_deserialize", "self", "value", "attr", "data", "kwargs", "raise", "notimplementederror"], "doc_len": 14}
{"doc_id": "src/marshmallow/base.py::SchemaABC.dump", "file_path": "src/marshmallow/base.py", "class_name": "SchemaABC", "func_name": "dump", "text": "文件路径: src/marshmallow/base.py, 类名: SchemaABC\n    def dump(self, obj, many=None):\n        raise NotImplementedError\n", "tokens": ["src", "marshmallow", "base", "py", "schemaabc", "def", "dump", "self", "obj", "many", "none", "raise", "notimplementederror"], "doc_len": 13}
{"doc_id": "src/marshmallow/base.py::SchemaABC.dumps", "file_path": "src/marshmallow/base.py", "class_name": "SchemaABC", "func_name": "dumps", "text": "文件路径: src/marshmallow/base.py, 类名: SchemaABC\n    def dumps(self, obj, many=None, *args, **kwargs):\n        raise NotImplementedError\n", "tokens": ["src", "marshmallow", "base", "py", "schemaabc", "def", "dumps", "self", "obj", "many", "none", "args", "kwargs", "raise", "notimplementederror"], "doc_len": 15}
{"doc_id": "src/marshmallow/base.py::SchemaABC.load", "file_path": "src/marshmallow/base.py", "class_name": "SchemaABC", "func_name": "load", "text": "文件路径: src/marshmallow/base.py, 类名: SchemaABC\n    def load(self, data, many=None, partial=None, unknown=None):\n        raise NotImplementedError\n", "tokens": ["src", "marshmallow", "base", "py", "schemaabc", "def", "load", "self", "data", "many", "none", "partial", "none", "unknown", "none", "raise", "notimplementederror"], "doc_len": 17}
{"doc_id": "src/marshmallow/base.py::SchemaABC.loads", "file_path": "src/marshmallow/base.py", "class_name": "SchemaABC", "func_name": "loads", "text": "文件路径: src/marshmallow/base.py, 类名: SchemaABC\n    def loads(self, json_data, many=None, partial=None, unknown=None, **kwargs):\n        raise NotImplementedError\n", "tokens": ["src", "marshmallow", "base", "py", "schemaabc", "def", "loads", "self", "json_data", "many", "none", "partial", "none", "unknown", "none", "kwargs", "raise", "notimplementederror"], "doc_len": 18}
{"doc_id": "src/marshmallow/class_registry.py::register", "file_path": "src/marshmallow/class_registry.py", "class_name": null, "func_name": "register", "text": "文件路径: src/marshmallow/class_registry.py\ndef register(classname, cls):\n    \"\"\"Add a class to the registry of serializer classes. When a class is\n    registered, an entry for both its classname and its full, module-qualified\n    path are added to the registry.\n\n    Example: ::\n\n        class MyClass:\n            pass\n\n        register('MyClass', MyClass)\n        # Registry:\n        # {\n        #   'MyClass': [path.to.MyClass],\n        #   'path.to.MyClass': [path.to.MyClass],\n        # }\n\n    \"\"\"\n    # Module where the class is located\n    module = cls.__module__\n    # Full module path to the class\n    # e.g. user.schemas.UserSchema\n    fullpath = \".\".join([module, classname])\n    # If the class is already registered; need to check if the entries are\n    # in the same module as cls to avoid having multiple instances of the same\n    # class in the registry\n    if classname in _registry and not any(\n        each.__module__ == module for each in _registry[classname]\n    ):\n        _registry[classname].append(cls)\n    elif classname not in _registry:\n        _registry[classname] = [cls]\n\n    # Also register the full path\n    if fullpath not in _registry:\n        _registry.setdefault(fullpath, []).append(cls)\n    else:\n        # If fullpath does exist, replace existing entry\n        _registry[fullpath] = [cls]\n    return None\n", "tokens": ["src", "marshmallow", "class_registry", "py", "def", "register", "classname", "cls", "add", "a", "class", "to", "the", "registry", "of", "serializer", "classes", "when", "a", "class", "is", "registered", "an", "entry", "for", "both", "its", "classname", "and", "its", "full", "module", "qualified", "path", "are", "added", "to", "the", "registry", "example", "class", "myclass", "pass", "register", "myclass", "myclass", "registry", "myclass", "path", "to", "myclass", "path", "to", "myclass", "path", "to", "myclass", "module", "where", "the", "class", "is", "located", "module", "cls", "__module__", "full", "module", "path", "to", "the", "class", "e", "g", "user", "schemas", "userschema", "fullpath", "join", "module", "classname", "if", "the", "class", "is", "already", "registered", "need", "to", "check", "if", "the", "entries", "are", "in", "the", "same", "module", "as", "cls", "to", "avoid", "having", "multiple", "instances", "of", "the", "same", "class", "in", "the", "registry", "if", "classname", "in", "_registry", "and", "not", "any", "each", "__module__", "module", "for", "each", "in", "_registry", "classname", "_registry", "classname", "append", "cls", "elif", "classname", "not", "in", "_registry", "_registry", "classname", "cls", "also", "register", "the", "full", "path", "if", "fullpath", "not", "in", "_registry", "_registry", "setdefault", "fullpath", "append", "cls", "else", "if", "fullpath", "does", "exist", "replace", "existing", "entry", "_registry", "fullpath", "cls", "return", "none"], "doc_len": 167}
{"doc_id": "src/marshmallow/class_registry.py::get_class", "file_path": "src/marshmallow/class_registry.py", "class_name": null, "func_name": "get_class", "text": "文件路径: src/marshmallow/class_registry.py\ndef get_class(classname, all=False):\n    \"\"\"Retrieve a class from the registry.\n\n    :raises: marshmallow.exceptions.RegistryError if the class cannot be found\n        or if there are multiple entries for the given class name.\n    \"\"\"\n    try:\n        classes = _registry[classname]\n    except KeyError as error:\n        raise RegistryError(\n            \"Class with name {!r} was not found. You may need \"\n            \"to import the class.\".format(classname)\n        ) from error\n    if len(classes) > 1:\n        if all:\n            return _registry[classname]\n        raise RegistryError(\n            \"Multiple classes with name {!r} \"\n            \"were found. Please use the full, \"\n            \"module-qualified path.\".format(classname)\n        )\n    else:\n        return _registry[classname][0]\n", "tokens": ["src", "marshmallow", "class_registry", "py", "def", "get_class", "classname", "all", "false", "retrieve", "a", "class", "from", "the", "registry", "raises", "marshmallow", "exceptions", "registryerror", "if", "the", "class", "cannot", "be", "found", "or", "if", "there", "are", "multiple", "entries", "for", "the", "given", "class", "name", "try", "classes", "_registry", "classname", "except", "keyerror", "as", "error", "raise", "registryerror", "class", "with", "name", "r", "was", "not", "found", "you", "may", "need", "to", "import", "the", "class", "format", "classname", "from", "error", "if", "len", "classes", "1", "if", "all", "return", "_registry", "classname", "raise", "registryerror", "multiple", "classes", "with", "name", "r", "were", "found", "please", "use", "the", "full", "module", "qualified", "path", "format", "classname", "else", "return", "_registry", "classname", "0"], "doc_len": 96}
{"doc_id": "src/marshmallow/decorators.py::validates", "file_path": "src/marshmallow/decorators.py", "class_name": null, "func_name": "validates", "text": "文件路径: src/marshmallow/decorators.py\ndef validates(field_name):\n    \"\"\"Register a field validator.\n\n    :param str field_name: Name of the field that the method validates.\n    \"\"\"\n    return set_hook(None, VALIDATES, field_name=field_name)\n", "tokens": ["src", "marshmallow", "decorators", "py", "def", "validates", "field_name", "register", "a", "field", "validator", "param", "str", "field_name", "name", "of", "the", "field", "that", "the", "method", "validates", "return", "set_hook", "none", "validates", "field_name", "field_name"], "doc_len": 28}
{"doc_id": "src/marshmallow/decorators.py::validates_schema", "file_path": "src/marshmallow/decorators.py", "class_name": null, "func_name": "validates_schema", "text": "文件路径: src/marshmallow/decorators.py\ndef validates_schema(\n    fn=None, pass_many=False, pass_original=False, skip_on_field_errors=True\n):\n    \"\"\"Register a schema-level validator.\n\n    By default, receives a single object at a time, regardless of whether ``many=True``\n    is passed to the `Schema`. If ``pass_many=True``, the raw data (which may be a collection)\n    and the value for ``many`` is passed.\n\n    If ``pass_original=True``, the original data (before unmarshalling) will be passed as\n    an additional argument to the method.\n\n    If ``skip_on_field_errors=True``, this validation method will be skipped whenever\n    validation errors have been detected when validating fields.\n\n    .. versionchanged:: 3.0.0b1\n        ``skip_on_field_errors`` defaults to `True`.\n\n    .. versionchanged:: 3.0.0\n        ``partial`` and ``many`` are always passed as keyword arguments to\n        the decorated method.\n    \"\"\"\n    return set_hook(\n        fn,\n        (VALIDATES_SCHEMA, pass_many),\n        pass_original=pass_original,\n        skip_on_field_errors=skip_on_field_errors,\n    )\n", "tokens": ["src", "marshmallow", "decorators", "py", "def", "validates_schema", "fn", "none", "pass_many", "false", "pass_original", "false", "skip_on_field_errors", "true", "register", "a", "schema", "level", "validator", "by", "default", "receives", "a", "single", "object", "at", "a", "time", "regardless", "of", "whether", "many", "true", "is", "passed", "to", "the", "schema", "if", "pass_many", "true", "the", "raw", "data", "which", "may", "be", "a", "collection", "and", "the", "value", "for", "many", "is", "passed", "if", "pass_original", "true", "the", "original", "data", "before", "unmarshalling", "will", "be", "passed", "as", "an", "additional", "argument", "to", "the", "method", "if", "skip_on_field_errors", "true", "this", "validation", "method", "will", "be", "skipped", "whenever", "validation", "errors", "have", "been", "detected", "when", "validating", "fields", "versionchanged", "3", "0", "0b1", "skip_on_field_errors", "defaults", "to", "true", "versionchanged", "3", "0", "0", "partial", "and", "many", "are", "always", "passed", "as", "keyword", "arguments", "to", "the", "decorated", "method", "return", "set_hook", "fn", "validates_schema", "pass_many", "pass_original", "pass_original", "skip_on_field_errors", "skip_on_field_errors"], "doc_len": 126}
{"doc_id": "src/marshmallow/decorators.py::pre_dump", "file_path": "src/marshmallow/decorators.py", "class_name": null, "func_name": "pre_dump", "text": "文件路径: src/marshmallow/decorators.py\ndef pre_dump(fn=None, pass_many=False):\n    \"\"\"Register a method to invoke before serializing an object. The method\n    receives the object to be serialized and returns the processed object.\n\n    By default, receives a single object at a time, regardless of whether ``many=True``\n    is passed to the `Schema`. If ``pass_many=True``, the raw data (which may be a collection)\n    and the value for ``many`` is passed.\n\n    .. versionchanged:: 3.0.0\n        ``many`` is always passed as a keyword arguments to the decorated method.\n    \"\"\"\n    return set_hook(fn, (PRE_DUMP, pass_many))\n", "tokens": ["src", "marshmallow", "decorators", "py", "def", "pre_dump", "fn", "none", "pass_many", "false", "register", "a", "method", "to", "invoke", "before", "serializing", "an", "object", "the", "method", "receives", "the", "object", "to", "be", "serialized", "and", "returns", "the", "processed", "object", "by", "default", "receives", "a", "single", "object", "at", "a", "time", "regardless", "of", "whether", "many", "true", "is", "passed", "to", "the", "schema", "if", "pass_many", "true", "the", "raw", "data", "which", "may", "be", "a", "collection", "and", "the", "value", "for", "many", "is", "passed", "versionchanged", "3", "0", "0", "many", "is", "always", "passed", "as", "a", "keyword", "arguments", "to", "the", "decorated", "method", "return", "set_hook", "fn", "pre_dump", "pass_many"], "doc_len": 90}
{"doc_id": "src/marshmallow/decorators.py::post_dump", "file_path": "src/marshmallow/decorators.py", "class_name": null, "func_name": "post_dump", "text": "文件路径: src/marshmallow/decorators.py\ndef post_dump(fn=None, pass_many=False, pass_original=False):\n    \"\"\"Register a method to invoke after serializing an object. The method\n    receives the serialized object and returns the processed object.\n\n    By default, receives a single object at a time, transparently handling the ``many``\n    argument passed to the Schema. If ``pass_many=True``, the raw data\n    (which may be a collection) and the value for ``many`` is passed.\n\n    If ``pass_original=True``, the original data (before serializing) will be passed as\n    an additional argument to the method.\n\n    .. versionchanged:: 3.0.0\n        ``many`` is always passed as a keyword arguments to the decorated method.\n    \"\"\"\n    return set_hook(fn, (POST_DUMP, pass_many), pass_original=pass_original)\n", "tokens": ["src", "marshmallow", "decorators", "py", "def", "post_dump", "fn", "none", "pass_many", "false", "pass_original", "false", "register", "a", "method", "to", "invoke", "after", "serializing", "an", "object", "the", "method", "receives", "the", "serialized", "object", "and", "returns", "the", "processed", "object", "by", "default", "receives", "a", "single", "object", "at", "a", "time", "transparently", "handling", "the", "many", "argument", "passed", "to", "the", "schema", "if", "pass_many", "true", "the", "raw", "data", "which", "may", "be", "a", "collection", "and", "the", "value", "for", "many", "is", "passed", "if", "pass_original", "true", "the", "original", "data", "before", "serializing", "will", "be", "passed", "as", "an", "additional", "argument", "to", "the", "method", "versionchanged", "3", "0", "0", "many", "is", "always", "passed", "as", "a", "keyword", "arguments", "to", "the", "decorated", "method", "return", "set_hook", "fn", "post_dump", "pass_many", "pass_original", "pass_original"], "doc_len": 109}
{"doc_id": "src/marshmallow/decorators.py::pre_load", "file_path": "src/marshmallow/decorators.py", "class_name": null, "func_name": "pre_load", "text": "文件路径: src/marshmallow/decorators.py\ndef pre_load(fn=None, pass_many=False):\n    \"\"\"Register a method to invoke before deserializing an object. The method\n    receives the data to be deserialized and returns the processed data.\n\n    By default, receives a single datum at a time, transparently handling the ``many``\n    argument passed to the Schema. If ``pass_many=True``, the raw data\n    (which may be a collection) and the value for ``many`` is passed.\n\n    .. versionchanged:: 3.0.0\n        ``partial`` and ``many`` are always passed as keyword arguments to\n        the decorated method.\n    \"\"\"\n    return set_hook(fn, (PRE_LOAD, pass_many))\n", "tokens": ["src", "marshmallow", "decorators", "py", "def", "pre_load", "fn", "none", "pass_many", "false", "register", "a", "method", "to", "invoke", "before", "deserializing", "an", "object", "the", "method", "receives", "the", "data", "to", "be", "deserialized", "and", "returns", "the", "processed", "data", "by", "default", "receives", "a", "single", "datum", "at", "a", "time", "transparently", "handling", "the", "many", "argument", "passed", "to", "the", "schema", "if", "pass_many", "true", "the", "raw", "data", "which", "may", "be", "a", "collection", "and", "the", "value", "for", "many", "is", "passed", "versionchanged", "3", "0", "0", "partial", "and", "many", "are", "always", "passed", "as", "keyword", "arguments", "to", "the", "decorated", "method", "return", "set_hook", "fn", "pre_load", "pass_many"], "doc_len": 90}
{"doc_id": "src/marshmallow/decorators.py::post_load", "file_path": "src/marshmallow/decorators.py", "class_name": null, "func_name": "post_load", "text": "文件路径: src/marshmallow/decorators.py\ndef post_load(fn=None, pass_many=False, pass_original=False):\n    \"\"\"Register a method to invoke after deserializing an object. The method\n    receives the deserialized data and returns the processed data.\n\n    By default, receives a single datum at a time, transparently handling the ``many``\n    argument passed to the Schema. If ``pass_many=True``, the raw data\n    (which may be a collection) and the value for ``many`` is passed.\n\n    If ``pass_original=True``, the original data (before deserializing) will be passed as\n    an additional argument to the method.\n\n    .. versionchanged:: 3.0.0\n        ``partial`` and ``many`` are always passed as keyword arguments to\n        the decorated method.\n    \"\"\"\n    return set_hook(fn, (POST_LOAD, pass_many), pass_original=pass_original)\n", "tokens": ["src", "marshmallow", "decorators", "py", "def", "post_load", "fn", "none", "pass_many", "false", "pass_original", "false", "register", "a", "method", "to", "invoke", "after", "deserializing", "an", "object", "the", "method", "receives", "the", "deserialized", "data", "and", "returns", "the", "processed", "data", "by", "default", "receives", "a", "single", "datum", "at", "a", "time", "transparently", "handling", "the", "many", "argument", "passed", "to", "the", "schema", "if", "pass_many", "true", "the", "raw", "data", "which", "may", "be", "a", "collection", "and", "the", "value", "for", "many", "is", "passed", "if", "pass_original", "true", "the", "original", "data", "before", "deserializing", "will", "be", "passed", "as", "an", "additional", "argument", "to", "the", "method", "versionchanged", "3", "0", "0", "partial", "and", "many", "are", "always", "passed", "as", "keyword", "arguments", "to", "the", "decorated", "method", "return", "set_hook", "fn", "post_load", "pass_many", "pass_original", "pass_original"], "doc_len": 110}
{"doc_id": "src/marshmallow/decorators.py::set_hook", "file_path": "src/marshmallow/decorators.py", "class_name": null, "func_name": "set_hook", "text": "文件路径: src/marshmallow/decorators.py\ndef set_hook(fn, key, **kwargs):\n    \"\"\"Mark decorated function as a hook to be picked up later.\n\n    .. note::\n        Currently only works with functions and instance methods. Class and\n        static methods are not supported.\n\n    :return: Decorated function if supplied, else this decorator with its args\n        bound.\n    \"\"\"\n    # Allow using this as either a decorator or a decorator factory.\n    if fn is None:\n        return functools.partial(set_hook, key=key, **kwargs)\n\n    # Set a __marshmallow_hook__ attribute instead of wrapping in some class,\n    # because I still want this to end up as a normal (unbound) method.\n    try:\n        hook_config = fn.__marshmallow_hook__\n    except AttributeError:\n        fn.__marshmallow_hook__ = hook_config = {}\n    # Also save the kwargs for the tagged function on\n    # __marshmallow_hook__, keyed by (<tag>, <pass_many>)\n    hook_config[key] = kwargs\n\n    return fn\n", "tokens": ["src", "marshmallow", "decorators", "py", "def", "set_hook", "fn", "key", "kwargs", "mark", "decorated", "function", "as", "a", "hook", "to", "be", "picked", "up", "later", "note", "currently", "only", "works", "with", "functions", "and", "instance", "methods", "class", "and", "static", "methods", "are", "not", "supported", "return", "decorated", "function", "if", "supplied", "else", "this", "decorator", "with", "its", "args", "bound", "allow", "using", "this", "as", "either", "a", "decorator", "or", "a", "decorator", "factory", "if", "fn", "is", "none", "return", "functools", "partial", "set_hook", "key", "key", "kwargs", "set", "a", "__marshmallow_hook__", "attribute", "instead", "of", "wrapping", "in", "some", "class", "because", "i", "still", "want", "this", "to", "end", "up", "as", "a", "normal", "unbound", "method", "try", "hook_config", "fn", "__marshmallow_hook__", "except", "attributeerror", "fn", "__marshmallow_hook__", "hook_config", "also", "save", "the", "kwargs", "for", "the", "tagged", "function", "on", "__marshmallow_hook__", "keyed", "by", "tag", "pass_many", "hook_config", "key", "kwargs", "return", "fn"], "doc_len": 121}
{"doc_id": "src/marshmallow/error_store.py::ErrorStore.__init__", "file_path": "src/marshmallow/error_store.py", "class_name": "ErrorStore", "func_name": "__init__", "text": "文件路径: src/marshmallow/error_store.py, 类名: ErrorStore\n    def __init__(self):\n        #: Dictionary of errors stored during serialization\n        self.errors = {}\n", "tokens": ["src", "marshmallow", "error_store", "py", "errorstore", "def", "__init__", "self", "dictionary", "of", "errors", "stored", "during", "serialization", "self", "errors"], "doc_len": 16}
{"doc_id": "src/marshmallow/error_store.py::ErrorStore.store_error", "file_path": "src/marshmallow/error_store.py", "class_name": "ErrorStore", "func_name": "store_error", "text": "文件路径: src/marshmallow/error_store.py, 类名: ErrorStore\n    def store_error(self, messages, field_name=SCHEMA, index=None):\n        # field error  -> store/merge error messages under field name key\n        # schema error -> if string or list, store/merge under _schema key\n        #              -> if dict, store/merge with other top-level keys\n        if field_name != SCHEMA or not isinstance(messages, dict):\n            messages = {field_name: messages}\n        if index is not None:\n            messages = {index: messages}\n        self.errors = merge_errors(self.errors, messages)\n", "tokens": ["src", "marshmallow", "error_store", "py", "errorstore", "def", "store_error", "self", "messages", "field_name", "schema", "index", "none", "field", "error", "store", "merge", "error", "messages", "under", "field", "name", "key", "schema", "error", "if", "string", "or", "list", "store", "merge", "under", "_schema", "key", "if", "dict", "store", "merge", "with", "other", "top", "level", "keys", "if", "field_name", "schema", "or", "not", "isinstance", "messages", "dict", "messages", "field_name", "messages", "if", "index", "is", "not", "none", "messages", "index", "messages", "self", "errors", "merge_errors", "self", "errors", "messages"], "doc_len": 68}
{"doc_id": "src/marshmallow/error_store.py::merge_errors", "file_path": "src/marshmallow/error_store.py", "class_name": null, "func_name": "merge_errors", "text": "文件路径: src/marshmallow/error_store.py\ndef merge_errors(errors1, errors2):\n    \"\"\"Deeply merge two error messages.\n\n    The format of ``errors1`` and ``errors2`` matches the ``message``\n    parameter of :exc:`marshmallow.exceptions.ValidationError`.\n    \"\"\"\n    if not errors1:\n        return errors2\n    if not errors2:\n        return errors1\n    if isinstance(errors1, list):\n        if isinstance(errors2, list):\n            return errors1 + errors2\n        if isinstance(errors2, dict):\n            return dict(errors2, **{SCHEMA: merge_errors(errors1, errors2.get(SCHEMA))})\n        return errors1 + [errors2]\n    if isinstance(errors1, dict):\n        if isinstance(errors2, list):\n            return dict(errors1, **{SCHEMA: merge_errors(errors1.get(SCHEMA), errors2)})\n        if isinstance(errors2, dict):\n            errors = dict(errors1)\n            for key, val in errors2.items():\n                if key in errors:\n                    errors[key] = merge_errors(errors[key], val)\n                else:\n                    errors[key] = val\n            return errors\n        return dict(errors1, **{SCHEMA: merge_errors(errors1.get(SCHEMA), errors2)})\n    if isinstance(errors2, list):\n        return [errors1] + errors2 if errors2 else errors1\n    if isinstance(errors2, dict):\n        return dict(errors2, **{SCHEMA: merge_errors(errors1, errors2.get(SCHEMA))})\n    return [errors1, errors2]\n", "tokens": ["src", "marshmallow", "error_store", "py", "def", "merge_errors", "errors1", "errors2", "deeply", "merge", "two", "error", "messages", "the", "format", "of", "errors1", "and", "errors2", "matches", "the", "message", "parameter", "of", "exc", "marshmallow", "exceptions", "validationerror", "if", "not", "errors1", "return", "errors2", "if", "not", "errors2", "return", "errors1", "if", "isinstance", "errors1", "list", "if", "isinstance", "errors2", "list", "return", "errors1", "errors2", "if", "isinstance", "errors2", "dict", "return", "dict", "errors2", "schema", "merge_errors", "errors1", "errors2", "get", "schema", "return", "errors1", "errors2", "if", "isinstance", "errors1", "dict", "if", "isinstance", "errors2", "list", "return", "dict", "errors1", "schema", "merge_errors", "errors1", "get", "schema", "errors2", "if", "isinstance", "errors2", "dict", "errors", "dict", "errors1", "for", "key", "val", "in", "errors2", "items", "if", "key", "in", "errors", "errors", "key", "merge_errors", "errors", "key", "val", "else", "errors", "key", "val", "return", "errors", "return", "dict", "errors1", "schema", "merge_errors", "errors1", "get", "schema", "errors2", "if", "isinstance", "errors2", "list", "return", "errors1", "errors2", "if", "errors2", "else", "errors1", "if", "isinstance", "errors2", "dict", "return", "dict", "errors2", "schema", "merge_errors", "errors1", "errors2", "get", "schema", "return", "errors1", "errors2"], "doc_len": 147}
{"doc_id": "src/marshmallow/exceptions.py::ValidationError.__init__", "file_path": "src/marshmallow/exceptions.py", "class_name": "ValidationError", "func_name": "__init__", "text": "文件路径: src/marshmallow/exceptions.py, 类名: ValidationError\n    def __init__(\n        self, message, field_name=SCHEMA, data=None, valid_data=None, **kwargs\n    ):\n        self.messages = [message] if isinstance(message, (str, bytes)) else message\n        self.field_name = field_name\n        self.data = data\n        self.valid_data = valid_data\n        self.kwargs = kwargs\n        super().__init__(message)\n", "tokens": ["src", "marshmallow", "exceptions", "py", "validationerror", "def", "__init__", "self", "message", "field_name", "schema", "data", "none", "valid_data", "none", "kwargs", "self", "messages", "message", "if", "isinstance", "message", "str", "bytes", "else", "message", "self", "field_name", "field_name", "self", "data", "data", "self", "valid_data", "valid_data", "self", "kwargs", "kwargs", "super", "__init__", "message"], "doc_len": 41}
{"doc_id": "src/marshmallow/exceptions.py::ValidationError.normalized_messages", "file_path": "src/marshmallow/exceptions.py", "class_name": "ValidationError", "func_name": "normalized_messages", "text": "文件路径: src/marshmallow/exceptions.py, 类名: ValidationError\n    def normalized_messages(self):\n        if self.field_name == SCHEMA and isinstance(self.messages, dict):\n            return self.messages\n        return {self.field_name: self.messages}\n", "tokens": ["src", "marshmallow", "exceptions", "py", "validationerror", "def", "normalized_messages", "self", "if", "self", "field_name", "schema", "and", "isinstance", "self", "messages", "dict", "return", "self", "messages", "return", "self", "field_name", "self", "messages"], "doc_len": 25}
{"doc_id": "src/marshmallow/fields.py::Field.__init__", "file_path": "src/marshmallow/fields.py", "class_name": "Field", "func_name": "__init__", "text": "文件路径: src/marshmallow/fields.py, 类名: Field\n    def __init__(\n        self,\n        *,\n        default=missing_,\n        missing=missing_,\n        data_key=None,\n        attribute=None,\n        validate=None,\n        required=False,\n        allow_none=None,\n        load_only=False,\n        dump_only=False,\n        error_messages=None,\n        **metadata\n    ):\n        self.default = default\n        self.attribute = attribute\n        self.data_key = data_key\n        self.validate = validate\n        if utils.is_iterable_but_not_string(validate):\n            if not utils.is_generator(validate):\n                self.validators = validate\n            else:\n                self.validators = list(validate)\n        elif callable(validate):\n            self.validators = [validate]\n        elif validate is None:\n            self.validators = []\n        else:\n            raise ValueError(\n                \"The 'validate' parameter must be a callable \"\n                \"or a collection of callables.\"\n            )\n\n        # If missing=None, None should be considered valid by default\n        if allow_none is None:\n            if missing is None:\n                self.allow_none = True\n            else:\n                self.allow_none = False\n        else:\n            self.allow_none = allow_none\n        self.load_only = load_only\n        self.dump_only = dump_only\n        if required is True and missing is not missing_:\n            raise ValueError(\"'missing' must not be set for required fields.\")\n        self.required = required\n        self.missing = missing\n        self.metadata = metadata\n        self._creation_index = Field._creation_index\n        Field._creation_index += 1\n\n        # Collect default error message from self and parent classes\n        messages = {}\n        for cls in reversed(self.__class__.__mro__):\n            messages.update(getattr(cls, \"default_error_messages\", {}))\n        messages.update(error_messages or {})\n        self.error_messages = messages\n", "tokens": ["src", "marshmallow", "fields", "py", "field", "def", "__init__", "self", "default", "missing_", "missing", "missing_", "data_key", "none", "attribute", "none", "validate", "none", "required", "false", "allow_none", "none", "load_only", "false", "dump_only", "false", "error_messages", "none", "metadata", "self", "default", "default", "self", "attribute", "attribute", "self", "data_key", "data_key", "self", "validate", "validate", "if", "utils", "is_iterable_but_not_string", "validate", "if", "not", "utils", "is_generator", "validate", "self", "validators", "validate", "else", "self", "validators", "list", "validate", "elif", "callable", "validate", "self", "validators", "validate", "elif", "validate", "is", "none", "self", "validators", "else", "raise", "valueerror", "the", "validate", "parameter", "must", "be", "a", "callable", "or", "a", "collection", "of", "callables", "if", "missing", "none", "none", "should", "be", "considered", "valid", "by", "default", "if", "allow_none", "is", "none", "if", "missing", "is", "none", "self", "allow_none", "true", "else", "self", "allow_none", "false", "else", "self", "allow_none", "allow_none", "self", "load_only", "load_only", "self", "dump_only", "dump_only", "if", "required", "is", "true", "and", "missing", "is", "not", "missing_", "raise", "valueerror", "missing", "must", "not", "be", "set", "for", "required", "fields", "self", "required", "required", "self", "missing", "missing", "self", "metadata", "metadata", "self", "_creation_index", "field", "_creation_index", "field", "_creation_index", "1", "collect", "default", "error", "message", "from", "self", "and", "parent", "classes", "messages", "for", "cls", "in", "reversed", "self", "__class__", "__mro__", "messages", "update", "getattr", "cls", "default_error_messages", "messages", "update", "error_messages", "or", "self", "error_messages", "messages"], "doc_len": 184}
{"doc_id": "src/marshmallow/fields.py::Field.__repr__", "file_path": "src/marshmallow/fields.py", "class_name": "Field", "func_name": "__repr__", "text": "文件路径: src/marshmallow/fields.py, 类名: Field\n    def __repr__(self):\n        return (\n            \"<fields.{ClassName}(default={self.default!r}, \"\n            \"attribute={self.attribute!r}, \"\n            \"validate={self.validate}, required={self.required}, \"\n            \"load_only={self.load_only}, dump_only={self.dump_only}, \"\n            \"missing={self.missing}, allow_none={self.allow_none}, \"\n            \"error_messages={self.error_messages})>\".format(\n                ClassName=self.__class__.__name__, self=self\n            )\n        )\n", "tokens": ["src", "marshmallow", "fields", "py", "field", "def", "__repr__", "self", "return", "fields", "classname", "default", "self", "default", "r", "attribute", "self", "attribute", "r", "validate", "self", "validate", "required", "self", "required", "load_only", "self", "load_only", "dump_only", "self", "dump_only", "missing", "self", "missing", "allow_none", "self", "allow_none", "error_messages", "self", "error_messages", "format", "classname", "self", "__class__", "__name__", "self", "self"], "doc_len": 47}
{"doc_id": "src/marshmallow/fields.py::Field.__deepcopy__", "file_path": "src/marshmallow/fields.py", "class_name": "Field", "func_name": "__deepcopy__", "text": "文件路径: src/marshmallow/fields.py, 类名: Field\n    def __deepcopy__(self, memo):\n        return copy.copy(self)\n", "tokens": ["src", "marshmallow", "fields", "py", "field", "def", "__deepcopy__", "self", "memo", "return", "copy", "copy", "self"], "doc_len": 13}
{"doc_id": "src/marshmallow/fields.py::Field.get_value", "file_path": "src/marshmallow/fields.py", "class_name": "Field", "func_name": "get_value", "text": "文件路径: src/marshmallow/fields.py, 类名: Field\n    def get_value(self, obj, attr, accessor=None, default=missing_):\n        \"\"\"Return the value for a given key from an object.\n\n        :param object obj: The object to get the value from.\n        :param str attr: The attribute/key in `obj` to get the value from.\n        :param callable accessor: A callable used to retrieve the value of `attr` from\n            the object `obj`. Defaults to `marshmallow.utils.get_value`.\n        \"\"\"\n        # NOTE: Use getattr instead of direct attribute access here so that\n        # subclasses aren't required to define `attribute` member\n        attribute = getattr(self, \"attribute\", None)\n        accessor_func = accessor or utils.get_value\n        check_key = attr if attribute is None else attribute\n        return accessor_func(obj, check_key, default)\n", "tokens": ["src", "marshmallow", "fields", "py", "field", "def", "get_value", "self", "obj", "attr", "accessor", "none", "default", "missing_", "return", "the", "value", "for", "a", "given", "key", "from", "an", "object", "param", "object", "obj", "the", "object", "to", "get", "the", "value", "from", "param", "str", "attr", "the", "attribute", "key", "in", "obj", "to", "get", "the", "value", "from", "param", "callable", "accessor", "a", "callable", "used", "to", "retrieve", "the", "value", "of", "attr", "from", "the", "object", "obj", "defaults", "to", "marshmallow", "utils", "get_value", "note", "use", "getattr", "instead", "of", "direct", "attribute", "access", "here", "so", "that", "subclasses", "aren", "t", "required", "to", "define", "attribute", "member", "attribute", "getattr", "self", "attribute", "none", "accessor_func", "accessor", "or", "utils", "get_value", "check_key", "attr", "if", "attribute", "is", "none", "else", "attribute", "return", "accessor_func", "obj", "check_key", "default"], "doc_len": 110}
{"doc_id": "src/marshmallow/fields.py::Field._validate", "file_path": "src/marshmallow/fields.py", "class_name": "Field", "func_name": "_validate", "text": "文件路径: src/marshmallow/fields.py, 类名: Field\n    def _validate(self, value):\n        \"\"\"Perform validation on ``value``. Raise a :exc:`ValidationError` if validation\n        does not succeed.\n        \"\"\"\n        errors = []\n        kwargs = {}\n        for validator in self.validators:\n            try:\n                r = validator(value)\n                if not isinstance(validator, Validator) and r is False:\n                    raise self.make_error(\"validator_failed\")\n            except ValidationError as err:\n                kwargs.update(err.kwargs)\n                if isinstance(err.messages, dict):\n                    errors.append(err.messages)\n                else:\n                    errors.extend(err.messages)\n        if errors:\n            raise ValidationError(errors, **kwargs)\n", "tokens": ["src", "marshmallow", "fields", "py", "field", "def", "_validate", "self", "value", "perform", "validation", "on", "value", "raise", "a", "exc", "validationerror", "if", "validation", "does", "not", "succeed", "errors", "kwargs", "for", "validator", "in", "self", "validators", "try", "r", "validator", "value", "if", "not", "isinstance", "validator", "validator", "and", "r", "is", "false", "raise", "self", "make_error", "validator_failed", "except", "validationerror", "as", "err", "kwargs", "update", "err", "kwargs", "if", "isinstance", "err", "messages", "dict", "errors", "append", "err", "messages", "else", "errors", "extend", "err", "messages", "if", "errors", "raise", "validationerror", "errors", "kwargs"], "doc_len": 74}
{"doc_id": "src/marshmallow/fields.py::Field.make_error", "file_path": "src/marshmallow/fields.py", "class_name": "Field", "func_name": "make_error", "text": "文件路径: src/marshmallow/fields.py, 类名: Field\n    def make_error(self, key: str, **kwargs) -> ValidationError:\n        \"\"\"Helper method to make a `ValidationError` with an error message\n        from ``self.error_messages``.\n        \"\"\"\n        try:\n            msg = self.error_messages[key]\n        except KeyError as error:\n            class_name = self.__class__.__name__\n            msg = MISSING_ERROR_MESSAGE.format(class_name=class_name, key=key)\n            raise AssertionError(msg) from error\n        if isinstance(msg, (str, bytes)):\n            msg = msg.format(**kwargs)\n        return ValidationError(msg)\n", "tokens": ["src", "marshmallow", "fields", "py", "field", "def", "make_error", "self", "key", "str", "kwargs", "validationerror", "helper", "method", "to", "make", "a", "validationerror", "with", "an", "error", "message", "from", "self", "error_messages", "try", "msg", "self", "error_messages", "key", "except", "keyerror", "as", "error", "class_name", "self", "__class__", "__name__", "msg", "missing_error_message", "format", "class_name", "class_name", "key", "key", "raise", "assertionerror", "msg", "from", "error", "if", "isinstance", "msg", "str", "bytes", "msg", "msg", "format", "kwargs", "return", "validationerror", "msg"], "doc_len": 62}
{"doc_id": "src/marshmallow/fields.py::Field.fail", "file_path": "src/marshmallow/fields.py", "class_name": "Field", "func_name": "fail", "text": "文件路径: src/marshmallow/fields.py, 类名: Field\n    def fail(self, key: str, **kwargs):\n        \"\"\"Helper method that raises a `ValidationError` with an error message\n        from ``self.error_messages``.\n\n        .. deprecated:: 3.0.0\n            Use `make_error <marshmallow.fields.Field.make_error>` instead.\n        \"\"\"\n        warnings.warn(\n            '`Field.fail` is deprecated. Use `raise self.make_error(\"{}\", ...)` instead.'.format(\n                key\n            ),\n            DeprecationWarning,\n        )\n        raise self.make_error(key=key, **kwargs)\n", "tokens": ["src", "marshmallow", "fields", "py", "field", "def", "fail", "self", "key", "str", "kwargs", "helper", "method", "that", "raises", "a", "validationerror", "with", "an", "error", "message", "from", "self", "error_messages", "deprecated", "3", "0", "0", "use", "make_error", "marshmallow", "fields", "field", "make_error", "instead", "warnings", "warn", "field", "fail", "is", "deprecated", "use", "raise", "self", "make_error", "instead", "format", "key", "deprecationwarning", "raise", "self", "make_error", "key", "key", "kwargs"], "doc_len": 55}
{"doc_id": "src/marshmallow/fields.py::Field._validate_missing", "file_path": "src/marshmallow/fields.py", "class_name": "Field", "func_name": "_validate_missing", "text": "文件路径: src/marshmallow/fields.py, 类名: Field\n    def _validate_missing(self, value):\n        \"\"\"Validate missing values. Raise a :exc:`ValidationError` if\n        `value` should be considered missing.\n        \"\"\"\n        if value is missing_:\n            if hasattr(self, \"required\") and self.required:\n                raise self.make_error(\"required\")\n        if value is None:\n            if hasattr(self, \"allow_none\") and self.allow_none is not True:\n                raise self.make_error(\"null\")\n", "tokens": ["src", "marshmallow", "fields", "py", "field", "def", "_validate_missing", "self", "value", "validate", "missing", "values", "raise", "a", "exc", "validationerror", "if", "value", "should", "be", "considered", "missing", "if", "value", "is", "missing_", "if", "hasattr", "self", "required", "and", "self", "required", "raise", "self", "make_error", "required", "if", "value", "is", "none", "if", "hasattr", "self", "allow_none", "and", "self", "allow_none", "is", "not", "true", "raise", "self", "make_error", "null"], "doc_len": 55}
{"doc_id": "src/marshmallow/fields.py::Field.serialize", "file_path": "src/marshmallow/fields.py", "class_name": "Field", "func_name": "serialize", "text": "文件路径: src/marshmallow/fields.py, 类名: Field\n    def serialize(self, attr, obj, accessor=None, **kwargs):\n        \"\"\"Pulls the value for the given key from the object, applies the\n        field's formatting and returns the result.\n\n        :param str attr: The attribute/key to get from the object.\n        :param str obj: The object to access the attribute/key from.\n        :param callable accessor: Function used to access values from ``obj``.\n        :param dict kwargs: Field-specific keyword arguments.\n        \"\"\"\n        if self._CHECK_ATTRIBUTE:\n            value = self.get_value(obj, attr, accessor=accessor)\n            if value is missing_ and hasattr(self, \"default\"):\n                default = self.default\n                value = default() if callable(default) else default\n            if value is missing_:\n                return value\n        else:\n            value = None\n        return self._serialize(value, attr, obj, **kwargs)\n", "tokens": ["src", "marshmallow", "fields", "py", "field", "def", "serialize", "self", "attr", "obj", "accessor", "none", "kwargs", "pulls", "the", "value", "for", "the", "given", "key", "from", "the", "object", "applies", "the", "field", "s", "formatting", "and", "returns", "the", "result", "param", "str", "attr", "the", "attribute", "key", "to", "get", "from", "the", "object", "param", "str", "obj", "the", "object", "to", "access", "the", "attribute", "key", "from", "param", "callable", "accessor", "function", "used", "to", "access", "values", "from", "obj", "param", "dict", "kwargs", "field", "specific", "keyword", "arguments", "if", "self", "_check_attribute", "value", "self", "get_value", "obj", "attr", "accessor", "accessor", "if", "value", "is", "missing_", "and", "hasattr", "self", "default", "default", "self", "default", "value", "default", "if", "callable", "default", "else", "default", "if", "value", "is", "missing_", "return", "value", "else", "value", "none", "return", "self", "_serialize", "value", "attr", "obj", "kwargs"], "doc_len": 115}
{"doc_id": "src/marshmallow/fields.py::Field.deserialize", "file_path": "src/marshmallow/fields.py", "class_name": "Field", "func_name": "deserialize", "text": "文件路径: src/marshmallow/fields.py, 类名: Field\n    def deserialize(self, value, attr=None, data=None, **kwargs):\n        \"\"\"Deserialize ``value``.\n\n        :param value: The value to deserialize.\n        :param str attr: The attribute/key in `data` to deserialize.\n        :param dict data: The raw input data passed to `Schema.load`.\n        :param dict kwargs: Field-specific keyword arguments.\n        :raise ValidationError: If an invalid value is passed or if a required value\n            is missing.\n        \"\"\"\n        # Validate required fields, deserialize, then validate\n        # deserialized value\n        self._validate_missing(value)\n        if value is missing_:\n            _miss = self.missing\n            return _miss() if callable(_miss) else _miss\n        if getattr(self, \"allow_none\", False) is True and value is None:\n            return None\n        output = self._deserialize(value, attr, data, **kwargs)\n        self._validate(output)\n        return output\n", "tokens": ["src", "marshmallow", "fields", "py", "field", "def", "deserialize", "self", "value", "attr", "none", "data", "none", "kwargs", "deserialize", "value", "param", "value", "the", "value", "to", "deserialize", "param", "str", "attr", "the", "attribute", "key", "in", "data", "to", "deserialize", "param", "dict", "data", "the", "raw", "input", "data", "passed", "to", "schema", "load", "param", "dict", "kwargs", "field", "specific", "keyword", "arguments", "raise", "validationerror", "if", "an", "invalid", "value", "is", "passed", "or", "if", "a", "required", "value", "is", "missing", "validate", "required", "fields", "deserialize", "then", "validate", "deserialized", "value", "self", "_validate_missing", "value", "if", "value", "is", "missing_", "_miss", "self", "missing", "return", "_miss", "if", "callable", "_miss", "else", "_miss", "if", "getattr", "self", "allow_none", "false", "is", "true", "and", "value", "is", "none", "return", "none", "output", "self", "_deserialize", "value", "attr", "data", "kwargs", "self", "_validate", "output", "return", "output"], "doc_len": 115}
{"doc_id": "src/marshmallow/fields.py::Field._bind_to_schema", "file_path": "src/marshmallow/fields.py", "class_name": "Field", "func_name": "_bind_to_schema", "text": "文件路径: src/marshmallow/fields.py, 类名: Field\n    def _bind_to_schema(self, field_name, schema):\n        \"\"\"Update field with values from its parent schema. Called by\n        :meth:`Schema._bind_field <marshmallow.Schema._bind_field>`.\n\n        :param str field_name: Field name set in schema.\n        :param Schema schema: Parent schema.\n        \"\"\"\n        self.parent = self.parent or schema\n        self.name = self.name or field_name\n", "tokens": ["src", "marshmallow", "fields", "py", "field", "def", "_bind_to_schema", "self", "field_name", "schema", "update", "field", "with", "values", "from", "its", "parent", "schema", "called", "by", "meth", "schema", "_bind_field", "marshmallow", "schema", "_bind_field", "param", "str", "field_name", "field", "name", "set", "in", "schema", "param", "schema", "schema", "parent", "schema", "self", "parent", "self", "parent", "or", "schema", "self", "name", "self", "name", "or", "field_name"], "doc_len": 51}
{"doc_id": "src/marshmallow/fields.py::Field._serialize", "file_path": "src/marshmallow/fields.py", "class_name": "Field", "func_name": "_serialize", "text": "文件路径: src/marshmallow/fields.py, 类名: Field\n    def _serialize(self, value, attr, obj, **kwargs):\n        \"\"\"Serializes ``value`` to a basic Python datatype. Noop by default.\n        Concrete :class:`Field` classes should implement this method.\n\n        Example: ::\n\n            class TitleCase(Field):\n                def _serialize(self, value, attr, obj, **kwargs):\n                    if not value:\n                        return ''\n                    return str(value).title()\n\n        :param value: The value to be serialized.\n        :param str attr: The attribute or key on the object to be serialized.\n        :param object obj: The object the value was pulled from.\n        :param dict kwargs: Field-specific keyword arguments.\n        :return: The serialized value\n        \"\"\"\n        return value\n", "tokens": ["src", "marshmallow", "fields", "py", "field", "def", "_serialize", "self", "value", "attr", "obj", "kwargs", "serializes", "value", "to", "a", "basic", "python", "datatype", "noop", "by", "default", "concrete", "class", "field", "classes", "should", "implement", "this", "method", "example", "class", "titlecase", "field", "def", "_serialize", "self", "value", "attr", "obj", "kwargs", "if", "not", "value", "return", "return", "str", "value", "title", "param", "value", "the", "value", "to", "be", "serialized", "param", "str", "attr", "the", "attribute", "or", "key", "on", "the", "object", "to", "be", "serialized", "param", "object", "obj", "the", "object", "the", "value", "was", "pulled", "from", "param", "dict", "kwargs", "field", "specific", "keyword", "arguments", "return", "the", "serialized", "value", "return", "value"], "doc_len": 92}
{"doc_id": "src/marshmallow/fields.py::Field._deserialize", "file_path": "src/marshmallow/fields.py", "class_name": "Field", "func_name": "_deserialize", "text": "文件路径: src/marshmallow/fields.py, 类名: Field\n    def _deserialize(self, value, attr, data, **kwargs):\n        \"\"\"Deserialize value. Concrete :class:`Field` classes should implement this method.\n\n        :param value: The value to be deserialized.\n        :param str attr: The attribute/key in `data` to be deserialized.\n        :param dict data: The raw input data passed to the `Schema.load`.\n        :param dict kwargs: Field-specific keyword arguments.\n        :raise ValidationError: In case of formatting or validation failure.\n        :return: The deserialized value.\n\n        .. versionchanged:: 2.0.0\n            Added ``attr`` and ``data`` parameters.\n\n        .. versionchanged:: 3.0.0\n            Added ``**kwargs`` to signature.\n        \"\"\"\n        return value\n", "tokens": ["src", "marshmallow", "fields", "py", "field", "def", "_deserialize", "self", "value", "attr", "data", "kwargs", "deserialize", "value", "concrete", "class", "field", "classes", "should", "implement", "this", "method", "param", "value", "the", "value", "to", "be", "deserialized", "param", "str", "attr", "the", "attribute", "key", "in", "data", "to", "be", "deserialized", "param", "dict", "data", "the", "raw", "input", "data", "passed", "to", "the", "schema", "load", "param", "dict", "kwargs", "field", "specific", "keyword", "arguments", "raise", "validationerror", "in", "case", "of", "formatting", "or", "validation", "failure", "return", "the", "deserialized", "value", "versionchanged", "2", "0", "0", "added", "attr", "and", "data", "parameters", "versionchanged", "3", "0", "0", "added", "kwargs", "to", "signature", "return", "value"], "doc_len": 91}
{"doc_id": "src/marshmallow/fields.py::Field.context", "file_path": "src/marshmallow/fields.py", "class_name": "Field", "func_name": "context", "text": "文件路径: src/marshmallow/fields.py, 类名: Field\n    def context(self):\n        \"\"\"The context dictionary for the parent :class:`Schema`.\"\"\"\n        return self.parent.context\n", "tokens": ["src", "marshmallow", "fields", "py", "field", "def", "context", "self", "the", "context", "dictionary", "for", "the", "parent", "class", "schema", "return", "self", "parent", "context"], "doc_len": 20}
{"doc_id": "src/marshmallow/fields.py::Field.root", "file_path": "src/marshmallow/fields.py", "class_name": "Field", "func_name": "root", "text": "文件路径: src/marshmallow/fields.py, 类名: Field\n    def root(self):\n        \"\"\"Reference to the `Schema` that this field belongs to even if it is buried in a\n        container field (e.g. `List`).\n        Return `None` for unbound fields.\n        \"\"\"\n        ret = self\n        while hasattr(ret, \"parent\"):\n            ret = ret.parent\n        return ret if isinstance(ret, SchemaABC) else None\n", "tokens": ["src", "marshmallow", "fields", "py", "field", "def", "root", "self", "reference", "to", "the", "schema", "that", "this", "field", "belongs", "to", "even", "if", "it", "is", "buried", "in", "a", "container", "field", "e", "g", "list", "return", "none", "for", "unbound", "fields", "ret", "self", "while", "hasattr", "ret", "parent", "ret", "ret", "parent", "return", "ret", "if", "isinstance", "ret", "schemaabc", "else", "none"], "doc_len": 51}
{"doc_id": "src/marshmallow/fields.py::Nested.__init__", "file_path": "src/marshmallow/fields.py", "class_name": "Nested", "func_name": "__init__", "text": "文件路径: src/marshmallow/fields.py, 类名: Nested\n    def __init__(\n        self, nested, *, default=missing_, exclude=tuple(), only=None, **kwargs\n    ):\n        # Raise error if only or exclude is passed as string, not list of strings\n        if only is not None and not is_collection(only):\n            raise StringNotCollectionError('\"only\" should be a collection of strings.')\n        if exclude is not None and not is_collection(exclude):\n            raise StringNotCollectionError(\n                '\"exclude\" should be a collection of strings.'\n            )\n        self.nested = nested\n        self.only = only\n        self.exclude = exclude\n        self.many = kwargs.get(\"many\", False)\n        self.unknown = kwargs.get(\"unknown\")\n        self._schema = None  # Cached Schema instance\n        super().__init__(default=default, **kwargs)\n", "tokens": ["src", "marshmallow", "fields", "py", "nested", "def", "__init__", "self", "nested", "default", "missing_", "exclude", "tuple", "only", "none", "kwargs", "raise", "error", "if", "only", "or", "exclude", "is", "passed", "as", "string", "not", "list", "of", "strings", "if", "only", "is", "not", "none", "and", "not", "is_collection", "only", "raise", "stringnotcollectionerror", "only", "should", "be", "a", "collection", "of", "strings", "if", "exclude", "is", "not", "none", "and", "not", "is_collection", "exclude", "raise", "stringnotcollectionerror", "exclude", "should", "be", "a", "collection", "of", "strings", "self", "nested", "nested", "self", "only", "only", "self", "exclude", "exclude", "self", "many", "kwargs", "get", "many", "false", "self", "unknown", "kwargs", "get", "unknown", "self", "_schema", "none", "cached", "schema", "instance", "super", "__init__", "default", "default", "kwargs"], "doc_len": 97}
{"doc_id": "src/marshmallow/fields.py::Nested.schema", "file_path": "src/marshmallow/fields.py", "class_name": "Nested", "func_name": "schema", "text": "文件路径: src/marshmallow/fields.py, 类名: Nested\n    def schema(self):\n        \"\"\"The nested Schema object.\n\n        .. versionchanged:: 1.0.0\n            Renamed from `serializer` to `schema`.\n        \"\"\"\n        if not self._schema:\n            # Inherit context from parent.\n            context = getattr(self.parent, \"context\", {})\n            if isinstance(self.nested, SchemaABC):\n                self._schema = self.nested\n                self._schema.context.update(context)\n            else:\n                if isinstance(self.nested, type) and issubclass(self.nested, SchemaABC):\n                    schema_class = self.nested\n                elif not isinstance(self.nested, (str, bytes)):\n                    raise ValueError(\n                        \"Nested fields must be passed a \"\n                        \"Schema, not {}.\".format(self.nested.__class__)\n                    )\n                elif self.nested == \"self\":\n                    ret = self\n                    while not isinstance(ret, SchemaABC):\n                        ret = ret.parent\n                    schema_class = ret.__class__\n                else:\n                    schema_class = class_registry.get_class(self.nested)\n                self._schema = schema_class(\n                    many=self.many,\n                    only=self.only,\n                    exclude=self.exclude,\n                    context=context,\n                    load_only=self._nested_normalized_option(\"load_only\"),\n                    dump_only=self._nested_normalized_option(\"dump_only\"),\n                )\n        return self._schema\n", "tokens": ["src", "marshmallow", "fields", "py", "nested", "def", "schema", "self", "the", "nested", "schema", "object", "versionchanged", "1", "0", "0", "renamed", "from", "serializer", "to", "schema", "if", "not", "self", "_schema", "inherit", "context", "from", "parent", "context", "getattr", "self", "parent", "context", "if", "isinstance", "self", "nested", "schemaabc", "self", "_schema", "self", "nested", "self", "_schema", "context", "update", "context", "else", "if", "isinstance", "self", "nested", "type", "and", "issubclass", "self", "nested", "schemaabc", "schema_class", "self", "nested", "elif", "not", "isinstance", "self", "nested", "str", "bytes", "raise", "valueerror", "nested", "fields", "must", "be", "passed", "a", "schema", "not", "format", "self", "nested", "__class__", "elif", "self", "nested", "self", "ret", "self", "while", "not", "isinstance", "ret", "schemaabc", "ret", "ret", "parent", "schema_class", "ret", "__class__", "else", "schema_class", "class_registry", "get_class", "self", "nested", "self", "_schema", "schema_class", "many", "self", "many", "only", "self", "only", "exclude", "self", "exclude", "context", "context", "load_only", "self", "_nested_normalized_option", "load_only", "dump_only", "self", "_nested_normalized_option", "dump_only", "return", "self", "_schema"], "doc_len": 131}
{"doc_id": "src/marshmallow/fields.py::Nested._nested_normalized_option", "file_path": "src/marshmallow/fields.py", "class_name": "Nested", "func_name": "_nested_normalized_option", "text": "文件路径: src/marshmallow/fields.py, 类名: Nested\n    def _nested_normalized_option(self, option_name):\n        nested_field = \"%s.\" % self.name\n        return [\n            field.split(nested_field, 1)[1]\n            for field in getattr(self.root, option_name, set())\n            if field.startswith(nested_field)\n        ]\n", "tokens": ["src", "marshmallow", "fields", "py", "nested", "def", "_nested_normalized_option", "self", "option_name", "nested_field", "s", "self", "name", "return", "field", "split", "nested_field", "1", "1", "for", "field", "in", "getattr", "self", "root", "option_name", "set", "if", "field", "startswith", "nested_field"], "doc_len": 31}
{"doc_id": "src/marshmallow/fields.py::Nested._serialize", "file_path": "src/marshmallow/fields.py", "class_name": "Nested", "func_name": "_serialize", "text": "文件路径: src/marshmallow/fields.py, 类名: Nested\n    def _serialize(self, nested_obj, attr, obj, many=False, **kwargs):\n        # Load up the schema first. This allows a RegistryError to be raised\n        # if an invalid schema name was passed\n        schema = self.schema\n        if nested_obj is None:\n            return None\n        return schema.dump(nested_obj, many=self.many or many)\n", "tokens": ["src", "marshmallow", "fields", "py", "nested", "def", "_serialize", "self", "nested_obj", "attr", "obj", "many", "false", "kwargs", "load", "up", "the", "schema", "first", "this", "allows", "a", "registryerror", "to", "be", "raised", "if", "an", "invalid", "schema", "name", "was", "passed", "schema", "self", "schema", "if", "nested_obj", "is", "none", "return", "none", "return", "schema", "dump", "nested_obj", "many", "self", "many", "or", "many"], "doc_len": 51}
{"doc_id": "src/marshmallow/fields.py::Nested._test_collection", "file_path": "src/marshmallow/fields.py", "class_name": "Nested", "func_name": "_test_collection", "text": "文件路径: src/marshmallow/fields.py, 类名: Nested\n    def _test_collection(self, value, many=False):\n        many = self.many or many\n        if many and not utils.is_collection(value):\n            raise self.make_error(\"type\", input=value, type=value.__class__.__name__)\n", "tokens": ["src", "marshmallow", "fields", "py", "nested", "def", "_test_collection", "self", "value", "many", "false", "many", "self", "many", "or", "many", "if", "many", "and", "not", "utils", "is_collection", "value", "raise", "self", "make_error", "type", "input", "value", "type", "value", "__class__", "__name__"], "doc_len": 33}
{"doc_id": "src/marshmallow/fields.py::Nested._load", "file_path": "src/marshmallow/fields.py", "class_name": "Nested", "func_name": "_load", "text": "文件路径: src/marshmallow/fields.py, 类名: Nested\n    def _load(self, value, data, partial=None, many=False):\n        try:\n            valid_data = self.schema.load(\n                value, unknown=self.unknown, partial=partial, many=self.many or many\n            )\n        except ValidationError as error:\n            raise ValidationError(\n                error.messages, valid_data=error.valid_data\n            ) from error\n        return valid_data\n", "tokens": ["src", "marshmallow", "fields", "py", "nested", "def", "_load", "self", "value", "data", "partial", "none", "many", "false", "try", "valid_data", "self", "schema", "load", "value", "unknown", "self", "unknown", "partial", "partial", "many", "self", "many", "or", "many", "except", "validationerror", "as", "error", "raise", "validationerror", "error", "messages", "valid_data", "error", "valid_data", "from", "error", "return", "valid_data"], "doc_len": 45}
{"doc_id": "src/marshmallow/fields.py::Nested._deserialize", "file_path": "src/marshmallow/fields.py", "class_name": "Nested", "func_name": "_deserialize", "text": "文件路径: src/marshmallow/fields.py, 类名: Nested\n    def _deserialize(self, value, attr, data, partial=None, many=False, **kwargs):\n        \"\"\"Same as :meth:`Field._deserialize` with additional ``partial`` argument.\n\n        :param bool|tuple partial: For nested schemas, the ``partial``\n            parameter passed to `Schema.load`.\n\n        .. versionchanged:: 3.0.0\n            Add ``partial`` parameter.\n        \"\"\"\n        self._test_collection(value, many=many)\n        return self._load(value, data, partial=partial, many=many)\n", "tokens": ["src", "marshmallow", "fields", "py", "nested", "def", "_deserialize", "self", "value", "attr", "data", "partial", "none", "many", "false", "kwargs", "same", "as", "meth", "field", "_deserialize", "with", "additional", "partial", "argument", "param", "bool", "tuple", "partial", "for", "nested", "schemas", "the", "partial", "parameter", "passed", "to", "schema", "load", "versionchanged", "3", "0", "0", "add", "partial", "parameter", "self", "_test_collection", "value", "many", "many", "return", "self", "_load", "value", "data", "partial", "partial", "many", "many"], "doc_len": 60}
{"doc_id": "src/marshmallow/fields.py::Pluck.__init__", "file_path": "src/marshmallow/fields.py", "class_name": "Pluck", "func_name": "__init__", "text": "文件路径: src/marshmallow/fields.py, 类名: Pluck\n    def __init__(self, nested, field_name, **kwargs):\n        super().__init__(nested, only=(field_name,), **kwargs)\n        self.field_name = field_name\n", "tokens": ["src", "marshmallow", "fields", "py", "pluck", "def", "__init__", "self", "nested", "field_name", "kwargs", "super", "__init__", "nested", "only", "field_name", "kwargs", "self", "field_name", "field_name"], "doc_len": 20}
{"doc_id": "src/marshmallow/fields.py::Pluck._field_data_key", "file_path": "src/marshmallow/fields.py", "class_name": "Pluck", "func_name": "_field_data_key", "text": "文件路径: src/marshmallow/fields.py, 类名: Pluck\n    def _field_data_key(self):\n        only_field = self.schema.fields[self.field_name]\n        return only_field.data_key or self.field_name\n", "tokens": ["src", "marshmallow", "fields", "py", "pluck", "def", "_field_data_key", "self", "only_field", "self", "schema", "fields", "self", "field_name", "return", "only_field", "data_key", "or", "self", "field_name"], "doc_len": 20}
{"doc_id": "src/marshmallow/fields.py::Pluck._serialize", "file_path": "src/marshmallow/fields.py", "class_name": "Pluck", "func_name": "_serialize", "text": "文件路径: src/marshmallow/fields.py, 类名: Pluck\n    def _serialize(self, nested_obj, attr, obj, **kwargs):\n        ret = super()._serialize(nested_obj, attr, obj, **kwargs)\n        if ret is None:\n            return None\n        if self.many:\n            return utils.pluck(ret, key=self._field_data_key)\n        return ret[self._field_data_key]\n", "tokens": ["src", "marshmallow", "fields", "py", "pluck", "def", "_serialize", "self", "nested_obj", "attr", "obj", "kwargs", "ret", "super", "_serialize", "nested_obj", "attr", "obj", "kwargs", "if", "ret", "is", "none", "return", "none", "if", "self", "many", "return", "utils", "pluck", "ret", "key", "self", "_field_data_key", "return", "ret", "self", "_field_data_key"], "doc_len": 39}
{"doc_id": "src/marshmallow/fields.py::Pluck._deserialize", "file_path": "src/marshmallow/fields.py", "class_name": "Pluck", "func_name": "_deserialize", "text": "文件路径: src/marshmallow/fields.py, 类名: Pluck\n    def _deserialize(self, value, attr, data, partial=None, **kwargs):\n        self._test_collection(value)\n        if self.many:\n            value = [{self._field_data_key: v} for v in value]\n        else:\n            value = {self._field_data_key: value}\n        return self._load(value, data, partial=partial)\n", "tokens": ["src", "marshmallow", "fields", "py", "pluck", "def", "_deserialize", "self", "value", "attr", "data", "partial", "none", "kwargs", "self", "_test_collection", "value", "if", "self", "many", "value", "self", "_field_data_key", "v", "for", "v", "in", "value", "else", "value", "self", "_field_data_key", "value", "return", "self", "_load", "value", "data", "partial", "partial"], "doc_len": 40}
{"doc_id": "src/marshmallow/fields.py::List.__init__", "file_path": "src/marshmallow/fields.py", "class_name": "List", "func_name": "__init__", "text": "文件路径: src/marshmallow/fields.py, 类名: List\n    def __init__(self, cls_or_instance, **kwargs):\n        super().__init__(**kwargs)\n        try:\n            self.inner = resolve_field_instance(cls_or_instance)\n        except FieldInstanceResolutionError as error:\n            raise ValueError(\n                \"The list elements must be a subclass or instance of \"\n                \"marshmallow.base.FieldABC.\"\n            ) from error\n        if isinstance(self.inner, Nested):\n            self.only = self.inner.only\n            self.exclude = self.inner.exclude\n", "tokens": ["src", "marshmallow", "fields", "py", "list", "def", "__init__", "self", "cls_or_instance", "kwargs", "super", "__init__", "kwargs", "try", "self", "inner", "resolve_field_instance", "cls_or_instance", "except", "fieldinstanceresolutionerror", "as", "error", "raise", "valueerror", "the", "list", "elements", "must", "be", "a", "subclass", "or", "instance", "of", "marshmallow", "base", "fieldabc", "from", "error", "if", "isinstance", "self", "inner", "nested", "self", "only", "self", "inner", "only", "self", "exclude", "self", "inner", "exclude"], "doc_len": 54}
{"doc_id": "src/marshmallow/fields.py::List._bind_to_schema", "file_path": "src/marshmallow/fields.py", "class_name": "List", "func_name": "_bind_to_schema", "text": "文件路径: src/marshmallow/fields.py, 类名: List\n    def _bind_to_schema(self, field_name, schema):\n        super()._bind_to_schema(field_name, schema)\n        self.inner = copy.deepcopy(self.inner)\n        self.inner._bind_to_schema(field_name, self)\n        if isinstance(self.inner, Nested):\n            self.inner.only = self.only\n            self.inner.exclude = self.exclude\n", "tokens": ["src", "marshmallow", "fields", "py", "list", "def", "_bind_to_schema", "self", "field_name", "schema", "super", "_bind_to_schema", "field_name", "schema", "self", "inner", "copy", "deepcopy", "self", "inner", "self", "inner", "_bind_to_schema", "field_name", "self", "if", "isinstance", "self", "inner", "nested", "self", "inner", "only", "self", "only", "self", "inner", "exclude", "self", "exclude"], "doc_len": 40}
{"doc_id": "src/marshmallow/fields.py::List._serialize", "file_path": "src/marshmallow/fields.py", "class_name": "List", "func_name": "_serialize", "text": "文件路径: src/marshmallow/fields.py, 类名: List\n    def _serialize(self, value, attr, obj, **kwargs):\n        if value is None:\n            return None\n        # Optimize dumping a list of Nested objects by calling dump(many=True)\n        if isinstance(self.inner, Nested) and not self.inner.many:\n            return self.inner._serialize(value, attr, obj, many=True, **kwargs)\n        return [self.inner._serialize(each, attr, obj, **kwargs) for each in value]\n", "tokens": ["src", "marshmallow", "fields", "py", "list", "def", "_serialize", "self", "value", "attr", "obj", "kwargs", "if", "value", "is", "none", "return", "none", "optimize", "dumping", "a", "list", "of", "nested", "objects", "by", "calling", "dump", "many", "true", "if", "isinstance", "self", "inner", "nested", "and", "not", "self", "inner", "many", "return", "self", "inner", "_serialize", "value", "attr", "obj", "many", "true", "kwargs", "return", "self", "inner", "_serialize", "each", "attr", "obj", "kwargs", "for", "each", "in", "value"], "doc_len": 62}
{"doc_id": "src/marshmallow/fields.py::List._deserialize", "file_path": "src/marshmallow/fields.py", "class_name": "List", "func_name": "_deserialize", "text": "文件路径: src/marshmallow/fields.py, 类名: List\n    def _deserialize(self, value, attr, data, **kwargs):\n        if not utils.is_collection(value):\n            raise self.make_error(\"invalid\")\n        # Optimize loading a list of Nested objects by calling load(many=True)\n        if isinstance(self.inner, Nested) and not self.inner.many:\n            return self.inner.deserialize(value, many=True, **kwargs)\n\n        result = []\n        errors = {}\n        for idx, each in enumerate(value):\n            try:\n                result.append(self.inner.deserialize(each, **kwargs))\n            except ValidationError as error:\n                if error.valid_data is not None:\n                    result.append(error.valid_data)\n                errors.update({idx: error.messages})\n        if errors:\n            raise ValidationError(errors, valid_data=result)\n        return result\n", "tokens": ["src", "marshmallow", "fields", "py", "list", "def", "_deserialize", "self", "value", "attr", "data", "kwargs", "if", "not", "utils", "is_collection", "value", "raise", "self", "make_error", "invalid", "optimize", "loading", "a", "list", "of", "nested", "objects", "by", "calling", "load", "many", "true", "if", "isinstance", "self", "inner", "nested", "and", "not", "self", "inner", "many", "return", "self", "inner", "deserialize", "value", "many", "true", "kwargs", "result", "errors", "for", "idx", "each", "in", "enumerate", "value", "try", "result", "append", "self", "inner", "deserialize", "each", "kwargs", "except", "validationerror", "as", "error", "if", "error", "valid_data", "is", "not", "none", "result", "append", "error", "valid_data", "errors", "update", "idx", "error", "messages", "if", "errors", "raise", "validationerror", "errors", "valid_data", "result", "return", "result"], "doc_len": 95}
{"doc_id": "src/marshmallow/fields.py::Tuple.__init__", "file_path": "src/marshmallow/fields.py", "class_name": "Tuple", "func_name": "__init__", "text": "文件路径: src/marshmallow/fields.py, 类名: Tuple\n    def __init__(self, tuple_fields, *args, **kwargs):\n        super().__init__(*args, **kwargs)\n        if not utils.is_collection(tuple_fields):\n            raise ValueError(\n                \"tuple_fields must be an iterable of Field classes or \" \"instances.\"\n            )\n\n        try:\n            self.tuple_fields = [\n                resolve_field_instance(cls_or_instance)\n                for cls_or_instance in tuple_fields\n            ]\n        except FieldInstanceResolutionError as error:\n            raise ValueError(\n                'Elements of \"tuple_fields\" must be subclasses or '\n                \"instances of marshmallow.base.FieldABC.\"\n            ) from error\n\n        self.validate_length = Length(equal=len(self.tuple_fields))\n", "tokens": ["src", "marshmallow", "fields", "py", "tuple", "def", "__init__", "self", "tuple_fields", "args", "kwargs", "super", "__init__", "args", "kwargs", "if", "not", "utils", "is_collection", "tuple_fields", "raise", "valueerror", "tuple_fields", "must", "be", "an", "iterable", "of", "field", "classes", "or", "instances", "try", "self", "tuple_fields", "resolve_field_instance", "cls_or_instance", "for", "cls_or_instance", "in", "tuple_fields", "except", "fieldinstanceresolutionerror", "as", "error", "raise", "valueerror", "elements", "of", "tuple_fields", "must", "be", "subclasses", "or", "instances", "of", "marshmallow", "base", "fieldabc", "from", "error", "self", "validate_length", "length", "equal", "len", "self", "tuple_fields"], "doc_len": 68}
{"doc_id": "src/marshmallow/fields.py::Tuple._bind_to_schema", "file_path": "src/marshmallow/fields.py", "class_name": "Tuple", "func_name": "_bind_to_schema", "text": "文件路径: src/marshmallow/fields.py, 类名: Tuple\n    def _bind_to_schema(self, field_name, schema):\n        super()._bind_to_schema(field_name, schema)\n        new_tuple_fields = []\n        for field in self.tuple_fields:\n            field = copy.deepcopy(field)\n            field._bind_to_schema(field_name, self)\n            new_tuple_fields.append(field)\n\n        self.tuple_fields = new_tuple_fields\n", "tokens": ["src", "marshmallow", "fields", "py", "tuple", "def", "_bind_to_schema", "self", "field_name", "schema", "super", "_bind_to_schema", "field_name", "schema", "new_tuple_fields", "for", "field", "in", "self", "tuple_fields", "field", "copy", "deepcopy", "field", "field", "_bind_to_schema", "field_name", "self", "new_tuple_fields", "append", "field", "self", "tuple_fields", "new_tuple_fields"], "doc_len": 34}
{"doc_id": "src/marshmallow/fields.py::Tuple._serialize", "file_path": "src/marshmallow/fields.py", "class_name": "Tuple", "func_name": "_serialize", "text": "文件路径: src/marshmallow/fields.py, 类名: Tuple\n    def _serialize(self, value, attr, obj, **kwargs):\n        if value is None:\n            return None\n\n        return tuple(\n            field._serialize(each, attr, obj, **kwargs)\n            for field, each in zip(self.tuple_fields, value)\n        )\n", "tokens": ["src", "marshmallow", "fields", "py", "tuple", "def", "_serialize", "self", "value", "attr", "obj", "kwargs", "if", "value", "is", "none", "return", "none", "return", "tuple", "field", "_serialize", "each", "attr", "obj", "kwargs", "for", "field", "each", "in", "zip", "self", "tuple_fields", "value"], "doc_len": 34}
{"doc_id": "src/marshmallow/fields.py::Tuple._deserialize", "file_path": "src/marshmallow/fields.py", "class_name": "Tuple", "func_name": "_deserialize", "text": "文件路径: src/marshmallow/fields.py, 类名: Tuple\n    def _deserialize(self, value, attr, data, **kwargs):\n        if not utils.is_collection(value):\n            raise self.make_error(\"invalid\")\n\n        self.validate_length(value)\n\n        result = []\n        errors = {}\n\n        for idx, (field, each) in enumerate(zip(self.tuple_fields, value)):\n            try:\n                result.append(field.deserialize(each, **kwargs))\n            except ValidationError as error:\n                if error.valid_data is not None:\n                    result.append(error.valid_data)\n                errors.update({idx: error.messages})\n        if errors:\n            raise ValidationError(errors, valid_data=result)\n\n        return tuple(result)\n", "tokens": ["src", "marshmallow", "fields", "py", "tuple", "def", "_deserialize", "self", "value", "attr", "data", "kwargs", "if", "not", "utils", "is_collection", "value", "raise", "self", "make_error", "invalid", "self", "validate_length", "value", "result", "errors", "for", "idx", "field", "each", "in", "enumerate", "zip", "self", "tuple_fields", "value", "try", "result", "append", "field", "deserialize", "each", "kwargs", "except", "validationerror", "as", "error", "if", "error", "valid_data", "is", "not", "none", "result", "append", "error", "valid_data", "errors", "update", "idx", "error", "messages", "if", "errors", "raise", "validationerror", "errors", "valid_data", "result", "return", "tuple", "result"], "doc_len": 72}
{"doc_id": "src/marshmallow/fields.py::String._serialize", "file_path": "src/marshmallow/fields.py", "class_name": "String", "func_name": "_serialize", "text": "文件路径: src/marshmallow/fields.py, 类名: String\n    def _serialize(self, value, attr, obj, **kwargs):\n        if value is None:\n            return None\n        return utils.ensure_text_type(value)\n", "tokens": ["src", "marshmallow", "fields", "py", "string", "def", "_serialize", "self", "value", "attr", "obj", "kwargs", "if", "value", "is", "none", "return", "none", "return", "utils", "ensure_text_type", "value"], "doc_len": 22}
{"doc_id": "src/marshmallow/fields.py::String._deserialize", "file_path": "src/marshmallow/fields.py", "class_name": "String", "func_name": "_deserialize", "text": "文件路径: src/marshmallow/fields.py, 类名: String\n    def _deserialize(self, value, attr, data, **kwargs):\n        if not isinstance(value, (str, bytes)):\n            raise self.make_error(\"invalid\")\n        try:\n            return utils.ensure_text_type(value)\n        except UnicodeDecodeError as error:\n            raise self.make_error(\"invalid_utf8\") from error\n", "tokens": ["src", "marshmallow", "fields", "py", "string", "def", "_deserialize", "self", "value", "attr", "data", "kwargs", "if", "not", "isinstance", "value", "str", "bytes", "raise", "self", "make_error", "invalid", "try", "return", "utils", "ensure_text_type", "value", "except", "unicodedecodeerror", "as", "error", "raise", "self", "make_error", "invalid_utf8", "from", "error"], "doc_len": 37}
{"doc_id": "src/marshmallow/fields.py::UUID._validated", "file_path": "src/marshmallow/fields.py", "class_name": "UUID", "func_name": "_validated", "text": "文件路径: src/marshmallow/fields.py, 类名: UUID\n    def _validated(self, value):\n        \"\"\"Format the value or raise a :exc:`ValidationError` if an error occurs.\"\"\"\n        if value is None:\n            return None\n        if isinstance(value, uuid.UUID):\n            return value\n        try:\n            if isinstance(value, bytes) and len(value) == 16:\n                return uuid.UUID(bytes=value)\n            else:\n                return uuid.UUID(value)\n        except (ValueError, AttributeError, TypeError) as error:\n            raise self.make_error(\"invalid_uuid\") from error\n", "tokens": ["src", "marshmallow", "fields", "py", "uuid", "def", "_validated", "self", "value", "format", "the", "value", "or", "raise", "a", "exc", "validationerror", "if", "an", "error", "occurs", "if", "value", "is", "none", "return", "none", "if", "isinstance", "value", "uuid", "uuid", "return", "value", "try", "if", "isinstance", "value", "bytes", "and", "len", "value", "16", "return", "uuid", "uuid", "bytes", "value", "else", "return", "uuid", "uuid", "value", "except", "valueerror", "attributeerror", "typeerror", "as", "error", "raise", "self", "make_error", "invalid_uuid", "from", "error"], "doc_len": 65}
{"doc_id": "src/marshmallow/fields.py::UUID._serialize", "file_path": "src/marshmallow/fields.py", "class_name": "UUID", "func_name": "_serialize", "text": "文件路径: src/marshmallow/fields.py, 类名: UUID\n    def _serialize(self, value, attr, obj, **kwargs):\n        val = str(value) if value is not None else None\n        return super()._serialize(val, attr, obj, **kwargs)\n", "tokens": ["src", "marshmallow", "fields", "py", "uuid", "def", "_serialize", "self", "value", "attr", "obj", "kwargs", "val", "str", "value", "if", "value", "is", "not", "none", "else", "none", "return", "super", "_serialize", "val", "attr", "obj", "kwargs"], "doc_len": 29}
{"doc_id": "src/marshmallow/fields.py::UUID._deserialize", "file_path": "src/marshmallow/fields.py", "class_name": "UUID", "func_name": "_deserialize", "text": "文件路径: src/marshmallow/fields.py, 类名: UUID\n    def _deserialize(self, value, attr, data, **kwargs):\n        return self._validated(value)\n", "tokens": ["src", "marshmallow", "fields", "py", "uuid", "def", "_deserialize", "self", "value", "attr", "data", "kwargs", "return", "self", "_validated", "value"], "doc_len": 16}
{"doc_id": "src/marshmallow/fields.py::Number.__init__", "file_path": "src/marshmallow/fields.py", "class_name": "Number", "func_name": "__init__", "text": "文件路径: src/marshmallow/fields.py, 类名: Number\n    def __init__(self, *, as_string=False, **kwargs):\n        self.as_string = as_string\n        super().__init__(**kwargs)\n", "tokens": ["src", "marshmallow", "fields", "py", "number", "def", "__init__", "self", "as_string", "false", "kwargs", "self", "as_string", "as_string", "super", "__init__", "kwargs"], "doc_len": 17}
{"doc_id": "src/marshmallow/fields.py::Number._format_num", "file_path": "src/marshmallow/fields.py", "class_name": "Number", "func_name": "_format_num", "text": "文件路径: src/marshmallow/fields.py, 类名: Number\n    def _format_num(self, value):\n        \"\"\"Return the number value for value, given this field's `num_type`.\"\"\"\n        return self.num_type(value)\n", "tokens": ["src", "marshmallow", "fields", "py", "number", "def", "_format_num", "self", "value", "return", "the", "number", "value", "for", "value", "given", "this", "field", "s", "num_type", "return", "self", "num_type", "value"], "doc_len": 24}
{"doc_id": "src/marshmallow/fields.py::Number._validated", "file_path": "src/marshmallow/fields.py", "class_name": "Number", "func_name": "_validated", "text": "文件路径: src/marshmallow/fields.py, 类名: Number\n    def _validated(self, value):\n        \"\"\"Format the value or raise a :exc:`ValidationError` if an error occurs.\"\"\"\n        if value is None:\n            return None\n        # (value is True or value is False) is ~5x faster than isinstance(value, bool)\n        if value is True or value is False:\n            raise self.make_error(\"invalid\", input=value)\n        try:\n            return self._format_num(value)\n        except (TypeError, ValueError) as error:\n            raise self.make_error(\"invalid\", input=value) from error\n        except OverflowError as error:\n            raise self.make_error(\"too_large\", input=value) from error\n", "tokens": ["src", "marshmallow", "fields", "py", "number", "def", "_validated", "self", "value", "format", "the", "value", "or", "raise", "a", "exc", "validationerror", "if", "an", "error", "occurs", "if", "value", "is", "none", "return", "none", "value", "is", "true", "or", "value", "is", "false", "is", "5x", "faster", "than", "isinstance", "value", "bool", "if", "value", "is", "true", "or", "value", "is", "false", "raise", "self", "make_error", "invalid", "input", "value", "try", "return", "self", "_format_num", "value", "except", "typeerror", "valueerror", "as", "error", "raise", "self", "make_error", "invalid", "input", "value", "from", "error", "except", "overflowerror", "as", "error", "raise", "self", "make_error", "too_large", "input", "value", "from", "error"], "doc_len": 85}
{"doc_id": "src/marshmallow/fields.py::Number._to_string", "file_path": "src/marshmallow/fields.py", "class_name": "Number", "func_name": "_to_string", "text": "文件路径: src/marshmallow/fields.py, 类名: Number\n    def _to_string(self, value):\n        return str(value)\n", "tokens": ["src", "marshmallow", "fields", "py", "number", "def", "_to_string", "self", "value", "return", "str", "value"], "doc_len": 12}
{"doc_id": "src/marshmallow/fields.py::Number._serialize", "file_path": "src/marshmallow/fields.py", "class_name": "Number", "func_name": "_serialize", "text": "文件路径: src/marshmallow/fields.py, 类名: Number\n    def _serialize(self, value, attr, obj, **kwargs):\n        \"\"\"Return a string if `self.as_string=True`, otherwise return this field's `num_type`.\"\"\"\n        if value is None:\n            return None\n        ret = self._format_num(value)\n        return self._to_string(ret) if self.as_string else ret\n", "tokens": ["src", "marshmallow", "fields", "py", "number", "def", "_serialize", "self", "value", "attr", "obj", "kwargs", "return", "a", "string", "if", "self", "as_string", "true", "otherwise", "return", "this", "field", "s", "num_type", "if", "value", "is", "none", "return", "none", "ret", "self", "_format_num", "value", "return", "self", "_to_string", "ret", "if", "self", "as_string", "else", "ret"], "doc_len": 44}
{"doc_id": "src/marshmallow/fields.py::Number._deserialize", "file_path": "src/marshmallow/fields.py", "class_name": "Number", "func_name": "_deserialize", "text": "文件路径: src/marshmallow/fields.py, 类名: Number\n    def _deserialize(self, value, attr, data, **kwargs):\n        return self._validated(value)\n", "tokens": ["src", "marshmallow", "fields", "py", "number", "def", "_deserialize", "self", "value", "attr", "data", "kwargs", "return", "self", "_validated", "value"], "doc_len": 16}
{"doc_id": "src/marshmallow/fields.py::Integer.__init__", "file_path": "src/marshmallow/fields.py", "class_name": "Integer", "func_name": "__init__", "text": "文件路径: src/marshmallow/fields.py, 类名: Integer\n    def __init__(self, *, strict=False, **kwargs):\n        self.strict = strict\n        super().__init__(**kwargs)\n", "tokens": ["src", "marshmallow", "fields", "py", "integer", "def", "__init__", "self", "strict", "false", "kwargs", "self", "strict", "strict", "super", "__init__", "kwargs"], "doc_len": 17}
{"doc_id": "src/marshmallow/fields.py::Integer._validated", "file_path": "src/marshmallow/fields.py", "class_name": "Integer", "func_name": "_validated", "text": "文件路径: src/marshmallow/fields.py, 类名: Integer\n    def _validated(self, value):\n        if self.strict:\n            if isinstance(value, numbers.Number) and isinstance(\n                value, numbers.Integral\n            ):\n                return super()._validated(value)\n            raise self.make_error(\"invalid\", input=value)\n        return super()._validated(value)\n", "tokens": ["src", "marshmallow", "fields", "py", "integer", "def", "_validated", "self", "value", "if", "self", "strict", "if", "isinstance", "value", "numbers", "number", "and", "isinstance", "value", "numbers", "integral", "return", "super", "_validated", "value", "raise", "self", "make_error", "invalid", "input", "value", "return", "super", "_validated", "value"], "doc_len": 36}
{"doc_id": "src/marshmallow/fields.py::Float.__init__", "file_path": "src/marshmallow/fields.py", "class_name": "Float", "func_name": "__init__", "text": "文件路径: src/marshmallow/fields.py, 类名: Float\n    def __init__(self, *, allow_nan=False, as_string=False, **kwargs):\n        self.allow_nan = allow_nan\n        super().__init__(as_string=as_string, **kwargs)\n", "tokens": ["src", "marshmallow", "fields", "py", "float", "def", "__init__", "self", "allow_nan", "false", "as_string", "false", "kwargs", "self", "allow_nan", "allow_nan", "super", "__init__", "as_string", "as_string", "kwargs"], "doc_len": 21}
{"doc_id": "src/marshmallow/fields.py::Float._validated", "file_path": "src/marshmallow/fields.py", "class_name": "Float", "func_name": "_validated", "text": "文件路径: src/marshmallow/fields.py, 类名: Float\n    def _validated(self, value):\n        num = super()._validated(value)\n        if self.allow_nan is False:\n            if math.isnan(num) or num == float(\"inf\") or num == float(\"-inf\"):\n                raise self.make_error(\"special\")\n        return num\n", "tokens": ["src", "marshmallow", "fields", "py", "float", "def", "_validated", "self", "value", "num", "super", "_validated", "value", "if", "self", "allow_nan", "is", "false", "if", "math", "isnan", "num", "or", "num", "float", "inf", "or", "num", "float", "inf", "raise", "self", "make_error", "special", "return", "num"], "doc_len": 36}
{"doc_id": "src/marshmallow/fields.py::Decimal.__init__", "file_path": "src/marshmallow/fields.py", "class_name": "Decimal", "func_name": "__init__", "text": "文件路径: src/marshmallow/fields.py, 类名: Decimal\n    def __init__(\n        self, places=None, rounding=None, *, allow_nan=False, as_string=False, **kwargs\n    ):\n        self.places = (\n            decimal.Decimal((0, (1,), -places)) if places is not None else None\n        )\n        self.rounding = rounding\n        self.allow_nan = allow_nan\n        super().__init__(as_string=as_string, **kwargs)\n", "tokens": ["src", "marshmallow", "fields", "py", "decimal", "def", "__init__", "self", "places", "none", "rounding", "none", "allow_nan", "false", "as_string", "false", "kwargs", "self", "places", "decimal", "decimal", "0", "1", "places", "if", "places", "is", "not", "none", "else", "none", "self", "rounding", "rounding", "self", "allow_nan", "allow_nan", "super", "__init__", "as_string", "as_string", "kwargs"], "doc_len": 42}
{"doc_id": "src/marshmallow/fields.py::Decimal._format_num", "file_path": "src/marshmallow/fields.py", "class_name": "Decimal", "func_name": "_format_num", "text": "文件路径: src/marshmallow/fields.py, 类名: Decimal\n    def _format_num(self, value):\n        num = decimal.Decimal(str(value))\n        if self.allow_nan:\n            if num.is_nan():\n                return decimal.Decimal(\"NaN\")  # avoid sNaN, -sNaN and -NaN\n        if self.places is not None and num.is_finite():\n            num = num.quantize(self.places, rounding=self.rounding)\n        return num\n", "tokens": ["src", "marshmallow", "fields", "py", "decimal", "def", "_format_num", "self", "value", "num", "decimal", "decimal", "str", "value", "if", "self", "allow_nan", "if", "num", "is_nan", "return", "decimal", "decimal", "nan", "avoid", "snan", "snan", "and", "nan", "if", "self", "places", "is", "not", "none", "and", "num", "is_finite", "num", "num", "quantize", "self", "places", "rounding", "self", "rounding", "return", "num"], "doc_len": 48}
{"doc_id": "src/marshmallow/fields.py::Decimal._validated", "file_path": "src/marshmallow/fields.py", "class_name": "Decimal", "func_name": "_validated", "text": "文件路径: src/marshmallow/fields.py, 类名: Decimal\n    def _validated(self, value):\n        try:\n            num = super()._validated(value)\n        except decimal.InvalidOperation as error:\n            raise self.make_error(\"invalid\") from error\n        if not self.allow_nan and (num.is_nan() or num.is_infinite()):\n            raise self.make_error(\"special\")\n        return num\n", "tokens": ["src", "marshmallow", "fields", "py", "decimal", "def", "_validated", "self", "value", "try", "num", "super", "_validated", "value", "except", "decimal", "invalidoperation", "as", "error", "raise", "self", "make_error", "invalid", "from", "error", "if", "not", "self", "allow_nan", "and", "num", "is_nan", "or", "num", "is_infinite", "raise", "self", "make_error", "special", "return", "num"], "doc_len": 41}
{"doc_id": "src/marshmallow/fields.py::Decimal._to_string", "file_path": "src/marshmallow/fields.py", "class_name": "Decimal", "func_name": "_to_string", "text": "文件路径: src/marshmallow/fields.py, 类名: Decimal\n    def _to_string(self, value):\n        return format(value, \"f\")\n", "tokens": ["src", "marshmallow", "fields", "py", "decimal", "def", "_to_string", "self", "value", "return", "format", "value", "f"], "doc_len": 13}
{"doc_id": "src/marshmallow/fields.py::Boolean.__init__", "file_path": "src/marshmallow/fields.py", "class_name": "Boolean", "func_name": "__init__", "text": "文件路径: src/marshmallow/fields.py, 类名: Boolean\n    def __init__(self, *, truthy=None, falsy=None, **kwargs):\n        super().__init__(**kwargs)\n\n        if truthy is not None:\n            self.truthy = set(truthy)\n        if falsy is not None:\n            self.falsy = set(falsy)\n", "tokens": ["src", "marshmallow", "fields", "py", "boolean", "def", "__init__", "self", "truthy", "none", "falsy", "none", "kwargs", "super", "__init__", "kwargs", "if", "truthy", "is", "not", "none", "self", "truthy", "set", "truthy", "if", "falsy", "is", "not", "none", "self", "falsy", "set", "falsy"], "doc_len": 34}
{"doc_id": "src/marshmallow/fields.py::Boolean._serialize", "file_path": "src/marshmallow/fields.py", "class_name": "Boolean", "func_name": "_serialize", "text": "文件路径: src/marshmallow/fields.py, 类名: Boolean\n    def _serialize(self, value, attr, obj, **kwargs):\n        if value is None:\n            return None\n        elif value in self.truthy:\n            return True\n        elif value in self.falsy:\n            return False\n\n        return bool(value)\n", "tokens": ["src", "marshmallow", "fields", "py", "boolean", "def", "_serialize", "self", "value", "attr", "obj", "kwargs", "if", "value", "is", "none", "return", "none", "elif", "value", "in", "self", "truthy", "return", "true", "elif", "value", "in", "self", "falsy", "return", "false", "return", "bool", "value"], "doc_len": 35}
{"doc_id": "src/marshmallow/fields.py::Boolean._deserialize", "file_path": "src/marshmallow/fields.py", "class_name": "Boolean", "func_name": "_deserialize", "text": "文件路径: src/marshmallow/fields.py, 类名: Boolean\n    def _deserialize(self, value, attr, data, **kwargs):\n        if not self.truthy:\n            return bool(value)\n        else:\n            try:\n                if value in self.truthy:\n                    return True\n                elif value in self.falsy:\n                    return False\n            except TypeError as error:\n                raise self.make_error(\"invalid\", input=value) from error\n        raise self.make_error(\"invalid\", input=value)\n", "tokens": ["src", "marshmallow", "fields", "py", "boolean", "def", "_deserialize", "self", "value", "attr", "data", "kwargs", "if", "not", "self", "truthy", "return", "bool", "value", "else", "try", "if", "value", "in", "self", "truthy", "return", "true", "elif", "value", "in", "self", "falsy", "return", "false", "except", "typeerror", "as", "error", "raise", "self", "make_error", "invalid", "input", "value", "from", "error", "raise", "self", "make_error", "invalid", "input", "value"], "doc_len": 53}
{"doc_id": "src/marshmallow/fields.py::DateTime.__init__", "file_path": "src/marshmallow/fields.py", "class_name": "DateTime", "func_name": "__init__", "text": "文件路径: src/marshmallow/fields.py, 类名: DateTime\n    def __init__(self, format=None, **kwargs):\n        super().__init__(**kwargs)\n        # Allow this to be None. It may be set later in the ``_serialize``\n        # or ``_deserialize`` methods. This allows a Schema to dynamically set the\n        # format, e.g. from a Meta option\n        self.format = format\n", "tokens": ["src", "marshmallow", "fields", "py", "datetime", "def", "__init__", "self", "format", "none", "kwargs", "super", "__init__", "kwargs", "allow", "this", "to", "be", "none", "it", "may", "be", "set", "later", "in", "the", "_serialize", "or", "_deserialize", "methods", "this", "allows", "a", "schema", "to", "dynamically", "set", "the", "format", "e", "g", "from", "a", "meta", "option", "self", "format", "format"], "doc_len": 48}
{"doc_id": "src/marshmallow/fields.py::DateTime._bind_to_schema", "file_path": "src/marshmallow/fields.py", "class_name": "DateTime", "func_name": "_bind_to_schema", "text": "文件路径: src/marshmallow/fields.py, 类名: DateTime\n    def _bind_to_schema(self, field_name, schema):\n        super()._bind_to_schema(field_name, schema)\n        self.format = (\n            self.format\n            or getattr(schema.opts, self.SCHEMA_OPTS_VAR_NAME)\n            or self.DEFAULT_FORMAT\n        )\n", "tokens": ["src", "marshmallow", "fields", "py", "datetime", "def", "_bind_to_schema", "self", "field_name", "schema", "super", "_bind_to_schema", "field_name", "schema", "self", "format", "self", "format", "or", "getattr", "schema", "opts", "self", "schema_opts_var_name", "or", "self", "default_format"], "doc_len": 27}
{"doc_id": "src/marshmallow/fields.py::DateTime._serialize", "file_path": "src/marshmallow/fields.py", "class_name": "DateTime", "func_name": "_serialize", "text": "文件路径: src/marshmallow/fields.py, 类名: DateTime\n    def _serialize(self, value, attr, obj, **kwargs):\n        if value is None:\n            return None\n        data_format = self.format or self.DEFAULT_FORMAT\n        format_func = self.SERIALIZATION_FUNCS.get(data_format)\n        if format_func:\n            return format_func(value)\n        else:\n            return value.strftime(data_format)\n", "tokens": ["src", "marshmallow", "fields", "py", "datetime", "def", "_serialize", "self", "value", "attr", "obj", "kwargs", "if", "value", "is", "none", "return", "none", "data_format", "self", "format", "or", "self", "default_format", "format_func", "self", "serialization_funcs", "get", "data_format", "if", "format_func", "return", "format_func", "value", "else", "return", "value", "strftime", "data_format"], "doc_len": 39}
{"doc_id": "src/marshmallow/fields.py::DateTime._deserialize", "file_path": "src/marshmallow/fields.py", "class_name": "DateTime", "func_name": "_deserialize", "text": "文件路径: src/marshmallow/fields.py, 类名: DateTime\n    def _deserialize(self, value, attr, data, **kwargs):\n        if not value:  # Falsy values, e.g. '', None, [] are not valid\n            raise self.make_error(\"invalid\", input=value, obj_type=self.OBJ_TYPE)\n        data_format = self.format or self.DEFAULT_FORMAT\n        func = self.DESERIALIZATION_FUNCS.get(data_format)\n        if func:\n            try:\n                return func(value)\n            except (TypeError, AttributeError, ValueError) as error:\n                raise self.make_error(\n                    \"invalid\", input=value, obj_type=self.OBJ_TYPE\n                ) from error\n        else:\n            try:\n                return self._make_object_from_format(value, data_format)\n            except (TypeError, AttributeError, ValueError) as error:\n                raise self.make_error(\n                    \"invalid\", input=value, obj_type=self.OBJ_TYPE\n                ) from error\n", "tokens": ["src", "marshmallow", "fields", "py", "datetime", "def", "_deserialize", "self", "value", "attr", "data", "kwargs", "if", "not", "value", "falsy", "values", "e", "g", "none", "are", "not", "valid", "raise", "self", "make_error", "invalid", "input", "value", "obj_type", "self", "obj_type", "data_format", "self", "format", "or", "self", "default_format", "func", "self", "deserialization_funcs", "get", "data_format", "if", "func", "try", "return", "func", "value", "except", "typeerror", "attributeerror", "valueerror", "as", "error", "raise", "self", "make_error", "invalid", "input", "value", "obj_type", "self", "obj_type", "from", "error", "else", "try", "return", "self", "_make_object_from_format", "value", "data_format", "except", "typeerror", "attributeerror", "valueerror", "as", "error", "raise", "self", "make_error", "invalid", "input", "value", "obj_type", "self", "obj_type", "from", "error"], "doc_len": 90}
{"doc_id": "src/marshmallow/fields.py::DateTime._make_object_from_format", "file_path": "src/marshmallow/fields.py", "class_name": "DateTime", "func_name": "_make_object_from_format", "text": "文件路径: src/marshmallow/fields.py, 类名: DateTime\n    def _make_object_from_format(value, data_format):\n        return dt.datetime.strptime(value, data_format)\n", "tokens": ["src", "marshmallow", "fields", "py", "datetime", "def", "_make_object_from_format", "value", "data_format", "return", "dt", "datetime", "strptime", "value", "data_format"], "doc_len": 15}
{"doc_id": "src/marshmallow/fields.py::NaiveDateTime.__init__", "file_path": "src/marshmallow/fields.py", "class_name": "NaiveDateTime", "func_name": "__init__", "text": "文件路径: src/marshmallow/fields.py, 类名: NaiveDateTime\n    def __init__(self, format=None, *, timezone=None, **kwargs):\n        super().__init__(format=format, **kwargs)\n        self.timezone = timezone\n", "tokens": ["src", "marshmallow", "fields", "py", "naivedatetime", "def", "__init__", "self", "format", "none", "timezone", "none", "kwargs", "super", "__init__", "format", "format", "kwargs", "self", "timezone", "timezone"], "doc_len": 21}
{"doc_id": "src/marshmallow/fields.py::NaiveDateTime._deserialize", "file_path": "src/marshmallow/fields.py", "class_name": "NaiveDateTime", "func_name": "_deserialize", "text": "文件路径: src/marshmallow/fields.py, 类名: NaiveDateTime\n    def _deserialize(self, value, attr, data, **kwargs):\n        ret = super()._deserialize(value, attr, data, **kwargs)\n        if is_aware(ret):\n            if self.timezone is None:\n                raise self.make_error(\n                    \"invalid_awareness\",\n                    awareness=self.AWARENESS,\n                    obj_type=self.OBJ_TYPE,\n                )\n            ret = ret.astimezone(self.timezone).replace(tzinfo=None)\n        return ret\n", "tokens": ["src", "marshmallow", "fields", "py", "naivedatetime", "def", "_deserialize", "self", "value", "attr", "data", "kwargs", "ret", "super", "_deserialize", "value", "attr", "data", "kwargs", "if", "is_aware", "ret", "if", "self", "timezone", "is", "none", "raise", "self", "make_error", "invalid_awareness", "awareness", "self", "awareness", "obj_type", "self", "obj_type", "ret", "ret", "astimezone", "self", "timezone", "replace", "tzinfo", "none", "return", "ret"], "doc_len": 47}
{"doc_id": "src/marshmallow/fields.py::AwareDateTime.__init__", "file_path": "src/marshmallow/fields.py", "class_name": "AwareDateTime", "func_name": "__init__", "text": "文件路径: src/marshmallow/fields.py, 类名: AwareDateTime\n    def __init__(self, format=None, *, default_timezone=None, **kwargs):\n        super().__init__(format=format, **kwargs)\n        self.default_timezone = default_timezone\n", "tokens": ["src", "marshmallow", "fields", "py", "awaredatetime", "def", "__init__", "self", "format", "none", "default_timezone", "none", "kwargs", "super", "__init__", "format", "format", "kwargs", "self", "default_timezone", "default_timezone"], "doc_len": 21}
{"doc_id": "src/marshmallow/fields.py::AwareDateTime._deserialize", "file_path": "src/marshmallow/fields.py", "class_name": "AwareDateTime", "func_name": "_deserialize", "text": "文件路径: src/marshmallow/fields.py, 类名: AwareDateTime\n    def _deserialize(self, value, attr, data, **kwargs):\n        ret = super()._deserialize(value, attr, data, **kwargs)\n        if not is_aware(ret):\n            if self.default_timezone is None:\n                raise self.make_error(\n                    \"invalid_awareness\",\n                    awareness=self.AWARENESS,\n                    obj_type=self.OBJ_TYPE,\n                )\n            ret = ret.replace(tzinfo=self.default_timezone)\n        return ret\n", "tokens": ["src", "marshmallow", "fields", "py", "awaredatetime", "def", "_deserialize", "self", "value", "attr", "data", "kwargs", "ret", "super", "_deserialize", "value", "attr", "data", "kwargs", "if", "not", "is_aware", "ret", "if", "self", "default_timezone", "is", "none", "raise", "self", "make_error", "invalid_awareness", "awareness", "self", "awareness", "obj_type", "self", "obj_type", "ret", "ret", "replace", "tzinfo", "self", "default_timezone", "return", "ret"], "doc_len": 46}
{"doc_id": "src/marshmallow/fields.py::Time._serialize", "file_path": "src/marshmallow/fields.py", "class_name": "Time", "func_name": "_serialize", "text": "文件路径: src/marshmallow/fields.py, 类名: Time\n    def _serialize(self, value, attr, obj, **kwargs):\n        if value is None:\n            return None\n        ret = value.isoformat()\n        if value.microsecond:\n            return ret[:15]\n        return ret\n", "tokens": ["src", "marshmallow", "fields", "py", "time", "def", "_serialize", "self", "value", "attr", "obj", "kwargs", "if", "value", "is", "none", "return", "none", "ret", "value", "isoformat", "if", "value", "microsecond", "return", "ret", "15", "return", "ret"], "doc_len": 29}
{"doc_id": "src/marshmallow/fields.py::Time._deserialize", "file_path": "src/marshmallow/fields.py", "class_name": "Time", "func_name": "_deserialize", "text": "文件路径: src/marshmallow/fields.py, 类名: Time\n    def _deserialize(self, value, attr, data, **kwargs):\n        \"\"\"Deserialize an ISO8601-formatted time to a :class:`datetime.time` object.\"\"\"\n        if not value:  # falsy values are invalid\n            raise self.make_error(\"invalid\")\n        try:\n            return utils.from_iso_time(value)\n        except (AttributeError, TypeError, ValueError) as error:\n            raise self.make_error(\"invalid\") from error\n", "tokens": ["src", "marshmallow", "fields", "py", "time", "def", "_deserialize", "self", "value", "attr", "data", "kwargs", "deserialize", "an", "iso8601", "formatted", "time", "to", "a", "class", "datetime", "time", "object", "if", "not", "value", "falsy", "values", "are", "invalid", "raise", "self", "make_error", "invalid", "try", "return", "utils", "from_iso_time", "value", "except", "attributeerror", "typeerror", "valueerror", "as", "error", "raise", "self", "make_error", "invalid", "from", "error"], "doc_len": 51}
{"doc_id": "src/marshmallow/fields.py::Date._make_object_from_format", "file_path": "src/marshmallow/fields.py", "class_name": "Date", "func_name": "_make_object_from_format", "text": "文件路径: src/marshmallow/fields.py, 类名: Date\n    def _make_object_from_format(value, data_format):\n        return dt.datetime.strptime(value, data_format).date()\n", "tokens": ["src", "marshmallow", "fields", "py", "date", "def", "_make_object_from_format", "value", "data_format", "return", "dt", "datetime", "strptime", "value", "data_format", "date"], "doc_len": 16}
{"doc_id": "src/marshmallow/fields.py::TimeDelta.__init__", "file_path": "src/marshmallow/fields.py", "class_name": "TimeDelta", "func_name": "__init__", "text": "文件路径: src/marshmallow/fields.py, 类名: TimeDelta\n    def __init__(self, precision=SECONDS, **kwargs):\n        precision = precision.lower()\n        units = (\n            self.DAYS,\n            self.SECONDS,\n            self.MICROSECONDS,\n            self.MILLISECONDS,\n            self.MINUTES,\n            self.HOURS,\n            self.WEEKS,\n        )\n\n        if precision not in units:\n            msg = 'The precision must be {} or \"{}\".'.format(\n                \", \".join(['\"{}\"'.format(each) for each in units[:-1]]), units[-1]\n            )\n            raise ValueError(msg)\n\n        self.precision = precision\n        super().__init__(**kwargs)\n", "tokens": ["src", "marshmallow", "fields", "py", "timedelta", "def", "__init__", "self", "precision", "seconds", "kwargs", "precision", "precision", "lower", "units", "self", "days", "self", "seconds", "self", "microseconds", "self", "milliseconds", "self", "minutes", "self", "hours", "self", "weeks", "if", "precision", "not", "in", "units", "msg", "the", "precision", "must", "be", "or", "format", "join", "format", "each", "for", "each", "in", "units", "1", "units", "1", "raise", "valueerror", "msg", "self", "precision", "precision", "super", "__init__", "kwargs"], "doc_len": 60}
{"doc_id": "src/marshmallow/fields.py::TimeDelta._serialize", "file_path": "src/marshmallow/fields.py", "class_name": "TimeDelta", "func_name": "_serialize", "text": "文件路径: src/marshmallow/fields.py, 类名: TimeDelta\n    def _serialize(self, value, attr, obj, **kwargs):\n        if value is None:\n            return None\n        base_unit = dt.timedelta(**{self.precision: 1})\n        return int(value.total_seconds() / base_unit.total_seconds())\n", "tokens": ["src", "marshmallow", "fields", "py", "timedelta", "def", "_serialize", "self", "value", "attr", "obj", "kwargs", "if", "value", "is", "none", "return", "none", "base_unit", "dt", "timedelta", "self", "precision", "1", "return", "int", "value", "total_seconds", "base_unit", "total_seconds"], "doc_len": 30}
{"doc_id": "src/marshmallow/fields.py::TimeDelta._deserialize", "file_path": "src/marshmallow/fields.py", "class_name": "TimeDelta", "func_name": "_deserialize", "text": "文件路径: src/marshmallow/fields.py, 类名: TimeDelta\n    def _deserialize(self, value, attr, data, **kwargs):\n        try:\n            value = int(value)\n        except (TypeError, ValueError) as error:\n            raise self.make_error(\"invalid\") from error\n\n        kwargs = {self.precision: value}\n\n        try:\n            return dt.timedelta(**kwargs)\n        except OverflowError as error:\n            raise self.make_error(\"invalid\") from error\n", "tokens": ["src", "marshmallow", "fields", "py", "timedelta", "def", "_deserialize", "self", "value", "attr", "data", "kwargs", "try", "value", "int", "value", "except", "typeerror", "valueerror", "as", "error", "raise", "self", "make_error", "invalid", "from", "error", "kwargs", "self", "precision", "value", "try", "return", "dt", "timedelta", "kwargs", "except", "overflowerror", "as", "error", "raise", "self", "make_error", "invalid", "from", "error"], "doc_len": 46}
{"doc_id": "src/marshmallow/fields.py::Mapping.__init__", "file_path": "src/marshmallow/fields.py", "class_name": "Mapping", "func_name": "__init__", "text": "文件路径: src/marshmallow/fields.py, 类名: Mapping\n    def __init__(self, keys=None, values=None, **kwargs):\n        super().__init__(**kwargs)\n        if keys is None:\n            self.key_field = None\n        else:\n            try:\n                self.key_field = resolve_field_instance(keys)\n            except FieldInstanceResolutionError as error:\n                raise ValueError(\n                    '\"keys\" must be a subclass or instance of '\n                    \"marshmallow.base.FieldABC.\"\n                ) from error\n\n        if values is None:\n            self.value_field = None\n        else:\n            try:\n                self.value_field = resolve_field_instance(values)\n            except FieldInstanceResolutionError as error:\n                raise ValueError(\n                    '\"values\" must be a subclass or instance of '\n                    \"marshmallow.base.FieldABC.\"\n                ) from error\n            if isinstance(self.value_field, Nested):\n                self.only = self.value_field.only\n                self.exclude = self.value_field.exclude\n", "tokens": ["src", "marshmallow", "fields", "py", "mapping", "def", "__init__", "self", "keys", "none", "values", "none", "kwargs", "super", "__init__", "kwargs", "if", "keys", "is", "none", "self", "key_field", "none", "else", "try", "self", "key_field", "resolve_field_instance", "keys", "except", "fieldinstanceresolutionerror", "as", "error", "raise", "valueerror", "keys", "must", "be", "a", "subclass", "or", "instance", "of", "marshmallow", "base", "fieldabc", "from", "error", "if", "values", "is", "none", "self", "value_field", "none", "else", "try", "self", "value_field", "resolve_field_instance", "values", "except", "fieldinstanceresolutionerror", "as", "error", "raise", "valueerror", "values", "must", "be", "a", "subclass", "or", "instance", "of", "marshmallow", "base", "fieldabc", "from", "error", "if", "isinstance", "self", "value_field", "nested", "self", "only", "self", "value_field", "only", "self", "exclude", "self", "value_field", "exclude"], "doc_len": 95}
{"doc_id": "src/marshmallow/fields.py::Mapping._bind_to_schema", "file_path": "src/marshmallow/fields.py", "class_name": "Mapping", "func_name": "_bind_to_schema", "text": "文件路径: src/marshmallow/fields.py, 类名: Mapping\n    def _bind_to_schema(self, field_name, schema):\n        super()._bind_to_schema(field_name, schema)\n        if self.value_field:\n            self.value_field = copy.deepcopy(self.value_field)\n            self.value_field._bind_to_schema(field_name, self)\n        if isinstance(self.value_field, Nested):\n            self.value_field.only = self.only\n            self.value_field.exclude = self.exclude\n        if self.key_field:\n            self.key_field = copy.deepcopy(self.key_field)\n            self.key_field._bind_to_schema(field_name, self)\n", "tokens": ["src", "marshmallow", "fields", "py", "mapping", "def", "_bind_to_schema", "self", "field_name", "schema", "super", "_bind_to_schema", "field_name", "schema", "if", "self", "value_field", "self", "value_field", "copy", "deepcopy", "self", "value_field", "self", "value_field", "_bind_to_schema", "field_name", "self", "if", "isinstance", "self", "value_field", "nested", "self", "value_field", "only", "self", "only", "self", "value_field", "exclude", "self", "exclude", "if", "self", "key_field", "self", "key_field", "copy", "deepcopy", "self", "key_field", "self", "key_field", "_bind_to_schema", "field_name", "self"], "doc_len": 57}
{"doc_id": "src/marshmallow/fields.py::Mapping._serialize", "file_path": "src/marshmallow/fields.py", "class_name": "Mapping", "func_name": "_serialize", "text": "文件路径: src/marshmallow/fields.py, 类名: Mapping\n    def _serialize(self, value, attr, obj, **kwargs):\n        if value is None:\n            return None\n        if not self.value_field and not self.key_field:\n            return value\n\n        #  Serialize keys\n        if self.key_field is None:\n            keys = {k: k for k in value.keys()}\n        else:\n            keys = {\n                k: self.key_field._serialize(k, None, None, **kwargs)\n                for k in value.keys()\n            }\n\n        #  Serialize values\n        result = self.mapping_type()\n        if self.value_field is None:\n            for k, v in value.items():\n                if k in keys:\n                    result[keys[k]] = v\n        else:\n            for k, v in value.items():\n                result[keys[k]] = self.value_field._serialize(v, None, None, **kwargs)\n\n        return result\n", "tokens": ["src", "marshmallow", "fields", "py", "mapping", "def", "_serialize", "self", "value", "attr", "obj", "kwargs", "if", "value", "is", "none", "return", "none", "if", "not", "self", "value_field", "and", "not", "self", "key_field", "return", "value", "serialize", "keys", "if", "self", "key_field", "is", "none", "keys", "k", "k", "for", "k", "in", "value", "keys", "else", "keys", "k", "self", "key_field", "_serialize", "k", "none", "none", "kwargs", "for", "k", "in", "value", "keys", "serialize", "values", "result", "self", "mapping_type", "if", "self", "value_field", "is", "none", "for", "k", "v", "in", "value", "items", "if", "k", "in", "keys", "result", "keys", "k", "v", "else", "for", "k", "v", "in", "value", "items", "result", "keys", "k", "self", "value_field", "_serialize", "v", "none", "none", "kwargs", "return", "result"], "doc_len": 101}
{"doc_id": "src/marshmallow/fields.py::Mapping._deserialize", "file_path": "src/marshmallow/fields.py", "class_name": "Mapping", "func_name": "_deserialize", "text": "文件路径: src/marshmallow/fields.py, 类名: Mapping\n    def _deserialize(self, value, attr, data, **kwargs):\n        if not isinstance(value, _Mapping):\n            raise self.make_error(\"invalid\")\n        if not self.value_field and not self.key_field:\n            return value\n\n        errors = collections.defaultdict(dict)\n\n        #  Deserialize keys\n        if self.key_field is None:\n            keys = {k: k for k in value.keys()}\n        else:\n            keys = {}\n            for key in value.keys():\n                try:\n                    keys[key] = self.key_field.deserialize(key, **kwargs)\n                except ValidationError as error:\n                    errors[key][\"key\"] = error.messages\n\n        #  Deserialize values\n        result = self.mapping_type()\n        if self.value_field is None:\n            for k, v in value.items():\n                if k in keys:\n                    result[keys[k]] = v\n        else:\n            for key, val in value.items():\n                try:\n                    deser_val = self.value_field.deserialize(val, **kwargs)\n                except ValidationError as error:\n                    errors[key][\"value\"] = error.messages\n                    if error.valid_data is not None and key in keys:\n                        result[keys[key]] = error.valid_data\n                else:\n                    if key in keys:\n                        result[keys[key]] = deser_val\n\n        if errors:\n            raise ValidationError(errors, valid_data=result)\n\n        return result\n", "tokens": ["src", "marshmallow", "fields", "py", "mapping", "def", "_deserialize", "self", "value", "attr", "data", "kwargs", "if", "not", "isinstance", "value", "_mapping", "raise", "self", "make_error", "invalid", "if", "not", "self", "value_field", "and", "not", "self", "key_field", "return", "value", "errors", "collections", "defaultdict", "dict", "deserialize", "keys", "if", "self", "key_field", "is", "none", "keys", "k", "k", "for", "k", "in", "value", "keys", "else", "keys", "for", "key", "in", "value", "keys", "try", "keys", "key", "self", "key_field", "deserialize", "key", "kwargs", "except", "validationerror", "as", "error", "errors", "key", "key", "error", "messages", "deserialize", "values", "result", "self", "mapping_type", "if", "self", "value_field", "is", "none", "for", "k", "v", "in", "value", "items", "if", "k", "in", "keys", "result", "keys", "k", "v", "else", "for", "key", "val", "in", "value", "items", "try", "deser_val", "self", "value_field", "deserialize", "val", "kwargs", "except", "validationerror", "as", "error", "errors", "key", "value", "error", "messages", "if", "error", "valid_data", "is", "not", "none", "and", "key", "in", "keys", "result", "keys", "key", "error", "valid_data", "else", "if", "key", "in", "keys", "result", "keys", "key", "deser_val", "if", "errors", "raise", "validationerror", "errors", "valid_data", "result", "return", "result"], "doc_len": 154}
{"doc_id": "src/marshmallow/fields.py::Url.__init__", "file_path": "src/marshmallow/fields.py", "class_name": "Url", "func_name": "__init__", "text": "文件路径: src/marshmallow/fields.py, 类名: Url\n    def __init__(self, *, relative=False, schemes=None, require_tld=True, **kwargs):\n        super().__init__(**kwargs)\n\n        self.relative = relative\n        self.require_tld = require_tld\n        # Insert validation into self.validators so that multiple errors can be\n        # stored.\n        self.validators.insert(\n            0,\n            validate.URL(\n                relative=self.relative,\n                schemes=schemes,\n                require_tld=self.require_tld,\n                error=self.error_messages[\"invalid\"],\n            ),\n        )\n", "tokens": ["src", "marshmallow", "fields", "py", "url", "def", "__init__", "self", "relative", "false", "schemes", "none", "require_tld", "true", "kwargs", "super", "__init__", "kwargs", "self", "relative", "relative", "self", "require_tld", "require_tld", "insert", "validation", "into", "self", "validators", "so", "that", "multiple", "errors", "can", "be", "stored", "self", "validators", "insert", "0", "validate", "url", "relative", "self", "relative", "schemes", "schemes", "require_tld", "self", "require_tld", "error", "self", "error_messages", "invalid"], "doc_len": 54}
{"doc_id": "src/marshmallow/fields.py::Email.__init__", "file_path": "src/marshmallow/fields.py", "class_name": "Email", "func_name": "__init__", "text": "文件路径: src/marshmallow/fields.py, 类名: Email\n    def __init__(self, *args, **kwargs):\n        super().__init__(*args, **kwargs)\n        # Insert validation into self.validators so that multiple errors can be\n        # stored.\n        self.validators.insert(0, validate.Email(error=self.error_messages[\"invalid\"]))\n", "tokens": ["src", "marshmallow", "fields", "py", "email", "def", "__init__", "self", "args", "kwargs", "super", "__init__", "args", "kwargs", "insert", "validation", "into", "self", "validators", "so", "that", "multiple", "errors", "can", "be", "stored", "self", "validators", "insert", "0", "validate", "email", "error", "self", "error_messages", "invalid"], "doc_len": 36}
{"doc_id": "src/marshmallow/fields.py::Method.__init__", "file_path": "src/marshmallow/fields.py", "class_name": "Method", "func_name": "__init__", "text": "文件路径: src/marshmallow/fields.py, 类名: Method\n    def __init__(self, serialize=None, deserialize=None, **kwargs):\n        # Set dump_only and load_only based on arguments\n        kwargs[\"dump_only\"] = bool(serialize) and not bool(deserialize)\n        kwargs[\"load_only\"] = bool(deserialize) and not bool(serialize)\n        super().__init__(**kwargs)\n        self.serialize_method_name = serialize\n        self.deserialize_method_name = deserialize\n", "tokens": ["src", "marshmallow", "fields", "py", "method", "def", "__init__", "self", "serialize", "none", "deserialize", "none", "kwargs", "set", "dump_only", "and", "load_only", "based", "on", "arguments", "kwargs", "dump_only", "bool", "serialize", "and", "not", "bool", "deserialize", "kwargs", "load_only", "bool", "deserialize", "and", "not", "bool", "serialize", "super", "__init__", "kwargs", "self", "serialize_method_name", "serialize", "self", "deserialize_method_name", "deserialize"], "doc_len": 45}
{"doc_id": "src/marshmallow/fields.py::Method._serialize", "file_path": "src/marshmallow/fields.py", "class_name": "Method", "func_name": "_serialize", "text": "文件路径: src/marshmallow/fields.py, 类名: Method\n    def _serialize(self, value, attr, obj, **kwargs):\n        if not self.serialize_method_name:\n            return missing_\n\n        method = utils.callable_or_raise(\n            getattr(self.parent, self.serialize_method_name, None)\n        )\n        return method(obj)\n", "tokens": ["src", "marshmallow", "fields", "py", "method", "def", "_serialize", "self", "value", "attr", "obj", "kwargs", "if", "not", "self", "serialize_method_name", "return", "missing_", "method", "utils", "callable_or_raise", "getattr", "self", "parent", "self", "serialize_method_name", "none", "return", "method", "obj"], "doc_len": 30}
{"doc_id": "src/marshmallow/fields.py::Method._deserialize", "file_path": "src/marshmallow/fields.py", "class_name": "Method", "func_name": "_deserialize", "text": "文件路径: src/marshmallow/fields.py, 类名: Method\n    def _deserialize(self, value, attr, data, **kwargs):\n        if self.deserialize_method_name:\n            method = utils.callable_or_raise(\n                getattr(self.parent, self.deserialize_method_name, None)\n            )\n            return method(value)\n        return value\n", "tokens": ["src", "marshmallow", "fields", "py", "method", "def", "_deserialize", "self", "value", "attr", "data", "kwargs", "if", "self", "deserialize_method_name", "method", "utils", "callable_or_raise", "getattr", "self", "parent", "self", "deserialize_method_name", "none", "return", "method", "value", "return", "value"], "doc_len": 29}
{"doc_id": "src/marshmallow/fields.py::Function.__init__", "file_path": "src/marshmallow/fields.py", "class_name": "Function", "func_name": "__init__", "text": "文件路径: src/marshmallow/fields.py, 类名: Function\n    def __init__(self, serialize=None, deserialize=None, **kwargs):\n        # Set dump_only and load_only based on arguments\n        kwargs[\"dump_only\"] = bool(serialize) and not bool(deserialize)\n        kwargs[\"load_only\"] = bool(deserialize) and not bool(serialize)\n        super().__init__(**kwargs)\n        self.serialize_func = serialize and utils.callable_or_raise(serialize)\n        self.deserialize_func = deserialize and utils.callable_or_raise(deserialize)\n", "tokens": ["src", "marshmallow", "fields", "py", "function", "def", "__init__", "self", "serialize", "none", "deserialize", "none", "kwargs", "set", "dump_only", "and", "load_only", "based", "on", "arguments", "kwargs", "dump_only", "bool", "serialize", "and", "not", "bool", "deserialize", "kwargs", "load_only", "bool", "deserialize", "and", "not", "bool", "serialize", "super", "__init__", "kwargs", "self", "serialize_func", "serialize", "and", "utils", "callable_or_raise", "serialize", "self", "deserialize_func", "deserialize", "and", "utils", "callable_or_raise", "deserialize"], "doc_len": 53}
{"doc_id": "src/marshmallow/fields.py::Function._serialize", "file_path": "src/marshmallow/fields.py", "class_name": "Function", "func_name": "_serialize", "text": "文件路径: src/marshmallow/fields.py, 类名: Function\n    def _serialize(self, value, attr, obj, **kwargs):\n        return self._call_or_raise(self.serialize_func, obj, attr)\n", "tokens": ["src", "marshmallow", "fields", "py", "function", "def", "_serialize", "self", "value", "attr", "obj", "kwargs", "return", "self", "_call_or_raise", "self", "serialize_func", "obj", "attr"], "doc_len": 19}
{"doc_id": "src/marshmallow/fields.py::Function._deserialize", "file_path": "src/marshmallow/fields.py", "class_name": "Function", "func_name": "_deserialize", "text": "文件路径: src/marshmallow/fields.py, 类名: Function\n    def _deserialize(self, value, attr, data, **kwargs):\n        if self.deserialize_func:\n            return self._call_or_raise(self.deserialize_func, value, attr)\n        return value\n", "tokens": ["src", "marshmallow", "fields", "py", "function", "def", "_deserialize", "self", "value", "attr", "data", "kwargs", "if", "self", "deserialize_func", "return", "self", "_call_or_raise", "self", "deserialize_func", "value", "attr", "return", "value"], "doc_len": 24}
{"doc_id": "src/marshmallow/fields.py::Function._call_or_raise", "file_path": "src/marshmallow/fields.py", "class_name": "Function", "func_name": "_call_or_raise", "text": "文件路径: src/marshmallow/fields.py, 类名: Function\n    def _call_or_raise(self, func, value, attr):\n        if len(utils.get_func_args(func)) > 1:\n            if self.parent.context is None:\n                msg = \"No context available for Function field {!r}\".format(attr)\n                raise ValidationError(msg)\n            return func(value, self.parent.context)\n        else:\n            return func(value)\n", "tokens": ["src", "marshmallow", "fields", "py", "function", "def", "_call_or_raise", "self", "func", "value", "attr", "if", "len", "utils", "get_func_args", "func", "1", "if", "self", "parent", "context", "is", "none", "msg", "no", "context", "available", "for", "function", "field", "r", "format", "attr", "raise", "validationerror", "msg", "return", "func", "value", "self", "parent", "context", "else", "return", "func", "value"], "doc_len": 46}
{"doc_id": "src/marshmallow/fields.py::Constant.__init__", "file_path": "src/marshmallow/fields.py", "class_name": "Constant", "func_name": "__init__", "text": "文件路径: src/marshmallow/fields.py, 类名: Constant\n    def __init__(self, constant, **kwargs):\n        super().__init__(**kwargs)\n        self.constant = constant\n        self.missing = constant\n        self.default = constant\n", "tokens": ["src", "marshmallow", "fields", "py", "constant", "def", "__init__", "self", "constant", "kwargs", "super", "__init__", "kwargs", "self", "constant", "constant", "self", "missing", "constant", "self", "default", "constant"], "doc_len": 22}
{"doc_id": "src/marshmallow/fields.py::Constant._serialize", "file_path": "src/marshmallow/fields.py", "class_name": "Constant", "func_name": "_serialize", "text": "文件路径: src/marshmallow/fields.py, 类名: Constant\n    def _serialize(self, value, *args, **kwargs):\n        return self.constant\n", "tokens": ["src", "marshmallow", "fields", "py", "constant", "def", "_serialize", "self", "value", "args", "kwargs", "return", "self", "constant"], "doc_len": 14}
{"doc_id": "src/marshmallow/fields.py::Constant._deserialize", "file_path": "src/marshmallow/fields.py", "class_name": "Constant", "func_name": "_deserialize", "text": "文件路径: src/marshmallow/fields.py, 类名: Constant\n    def _deserialize(self, value, *args, **kwargs):\n        return self.constant\n", "tokens": ["src", "marshmallow", "fields", "py", "constant", "def", "_deserialize", "self", "value", "args", "kwargs", "return", "self", "constant"], "doc_len": 14}
{"doc_id": "src/marshmallow/fields.py::Inferred.__init__", "file_path": "src/marshmallow/fields.py", "class_name": "Inferred", "func_name": "__init__", "text": "文件路径: src/marshmallow/fields.py, 类名: Inferred\n    def __init__(self):\n        super().__init__()\n        # We memoize the fields to avoid creating and binding new fields\n        # every time on serialization.\n        self._field_cache = {}\n", "tokens": ["src", "marshmallow", "fields", "py", "inferred", "def", "__init__", "self", "super", "__init__", "we", "memoize", "the", "fields", "to", "avoid", "creating", "and", "binding", "new", "fields", "every", "time", "on", "serialization", "self", "_field_cache"], "doc_len": 27}
{"doc_id": "src/marshmallow/fields.py::Inferred._serialize", "file_path": "src/marshmallow/fields.py", "class_name": "Inferred", "func_name": "_serialize", "text": "文件路径: src/marshmallow/fields.py, 类名: Inferred\n    def _serialize(self, value, attr, obj, **kwargs):\n        field_cls = self.root.TYPE_MAPPING.get(type(value))\n        if field_cls is None:\n            field = super()\n        else:\n            field = self._field_cache.get(field_cls)\n            if field is None:\n                field = field_cls()\n                field._bind_to_schema(self.name, self.parent)\n                self._field_cache[field_cls] = field\n        return field._serialize(value, attr, obj, **kwargs)\n", "tokens": ["src", "marshmallow", "fields", "py", "inferred", "def", "_serialize", "self", "value", "attr", "obj", "kwargs", "field_cls", "self", "root", "type_mapping", "get", "type", "value", "if", "field_cls", "is", "none", "field", "super", "else", "field", "self", "_field_cache", "get", "field_cls", "if", "field", "is", "none", "field", "field_cls", "field", "_bind_to_schema", "self", "name", "self", "parent", "self", "_field_cache", "field_cls", "field", "return", "field", "_serialize", "value", "attr", "obj", "kwargs"], "doc_len": 54}
{"doc_id": "src/marshmallow/orderedset.py::OrderedSet.__init__", "file_path": "src/marshmallow/orderedset.py", "class_name": "OrderedSet", "func_name": "__init__", "text": "文件路径: src/marshmallow/orderedset.py, 类名: OrderedSet\n    def __init__(self, iterable=None):\n        self.end = end = []\n        end += [None, end, end]  # sentinel node for doubly linked list\n        self.map = {}  # key --> [key, prev, next]\n        if iterable is not None:\n            self |= iterable\n", "tokens": ["src", "marshmallow", "orderedset", "py", "orderedset", "def", "__init__", "self", "iterable", "none", "self", "end", "end", "end", "none", "end", "end", "sentinel", "node", "for", "doubly", "linked", "list", "self", "map", "key", "key", "prev", "next", "if", "iterable", "is", "not", "none", "self", "iterable"], "doc_len": 36}
{"doc_id": "src/marshmallow/orderedset.py::OrderedSet.__len__", "file_path": "src/marshmallow/orderedset.py", "class_name": "OrderedSet", "func_name": "__len__", "text": "文件路径: src/marshmallow/orderedset.py, 类名: OrderedSet\n    def __len__(self):\n        return len(self.map)\n", "tokens": ["src", "marshmallow", "orderedset", "py", "orderedset", "def", "__len__", "self", "return", "len", "self", "map"], "doc_len": 12}
{"doc_id": "src/marshmallow/orderedset.py::OrderedSet.__contains__", "file_path": "src/marshmallow/orderedset.py", "class_name": "OrderedSet", "func_name": "__contains__", "text": "文件路径: src/marshmallow/orderedset.py, 类名: OrderedSet\n    def __contains__(self, key):\n        return key in self.map\n", "tokens": ["src", "marshmallow", "orderedset", "py", "orderedset", "def", "__contains__", "self", "key", "return", "key", "in", "self", "map"], "doc_len": 14}
{"doc_id": "src/marshmallow/orderedset.py::OrderedSet.add", "file_path": "src/marshmallow/orderedset.py", "class_name": "OrderedSet", "func_name": "add", "text": "文件路径: src/marshmallow/orderedset.py, 类名: OrderedSet\n    def add(self, key):\n        if key not in self.map:\n            end = self.end\n            curr = end[1]\n            curr[2] = end[1] = self.map[key] = [key, curr, end]\n", "tokens": ["src", "marshmallow", "orderedset", "py", "orderedset", "def", "add", "self", "key", "if", "key", "not", "in", "self", "map", "end", "self", "end", "curr", "end", "1", "curr", "2", "end", "1", "self", "map", "key", "key", "curr", "end"], "doc_len": 31}
{"doc_id": "src/marshmallow/orderedset.py::OrderedSet.discard", "file_path": "src/marshmallow/orderedset.py", "class_name": "OrderedSet", "func_name": "discard", "text": "文件路径: src/marshmallow/orderedset.py, 类名: OrderedSet\n    def discard(self, key):\n        if key in self.map:\n            key, prev, next = self.map.pop(key)\n            prev[2] = next\n            next[1] = prev\n", "tokens": ["src", "marshmallow", "orderedset", "py", "orderedset", "def", "discard", "self", "key", "if", "key", "in", "self", "map", "key", "prev", "next", "self", "map", "pop", "key", "prev", "2", "next", "next", "1", "prev"], "doc_len": 27}
{"doc_id": "src/marshmallow/orderedset.py::OrderedSet.__iter__", "file_path": "src/marshmallow/orderedset.py", "class_name": "OrderedSet", "func_name": "__iter__", "text": "文件路径: src/marshmallow/orderedset.py, 类名: OrderedSet\n    def __iter__(self):\n        end = self.end\n        curr = end[2]\n        while curr is not end:\n            yield curr[0]\n            curr = curr[2]\n", "tokens": ["src", "marshmallow", "orderedset", "py", "orderedset", "def", "__iter__", "self", "end", "self", "end", "curr", "end", "2", "while", "curr", "is", "not", "end", "yield", "curr", "0", "curr", "curr", "2"], "doc_len": 25}
{"doc_id": "src/marshmallow/orderedset.py::OrderedSet.__reversed__", "file_path": "src/marshmallow/orderedset.py", "class_name": "OrderedSet", "func_name": "__reversed__", "text": "文件路径: src/marshmallow/orderedset.py, 类名: OrderedSet\n    def __reversed__(self):\n        end = self.end\n        curr = end[1]\n        while curr is not end:\n            yield curr[0]\n            curr = curr[1]\n", "tokens": ["src", "marshmallow", "orderedset", "py", "orderedset", "def", "__reversed__", "self", "end", "self", "end", "curr", "end", "1", "while", "curr", "is", "not", "end", "yield", "curr", "0", "curr", "curr", "1"], "doc_len": 25}
{"doc_id": "src/marshmallow/orderedset.py::OrderedSet.pop", "file_path": "src/marshmallow/orderedset.py", "class_name": "OrderedSet", "func_name": "pop", "text": "文件路径: src/marshmallow/orderedset.py, 类名: OrderedSet\n    def pop(self, last=True):\n        if not self:\n            raise KeyError(\"set is empty\")\n        key = self.end[1][0] if last else self.end[2][0]\n        self.discard(key)\n        return key\n", "tokens": ["src", "marshmallow", "orderedset", "py", "orderedset", "def", "pop", "self", "last", "true", "if", "not", "self", "raise", "keyerror", "set", "is", "empty", "key", "self", "end", "1", "0", "if", "last", "else", "self", "end", "2", "0", "self", "discard", "key", "return", "key"], "doc_len": 35}
{"doc_id": "src/marshmallow/orderedset.py::OrderedSet.__repr__", "file_path": "src/marshmallow/orderedset.py", "class_name": "OrderedSet", "func_name": "__repr__", "text": "文件路径: src/marshmallow/orderedset.py, 类名: OrderedSet\n    def __repr__(self):\n        if not self:\n            return \"{}()\".format(self.__class__.__name__)\n        return \"{}({!r})\".format(self.__class__.__name__, list(self))\n", "tokens": ["src", "marshmallow", "orderedset", "py", "orderedset", "def", "__repr__", "self", "if", "not", "self", "return", "format", "self", "__class__", "__name__", "return", "r", "format", "self", "__class__", "__name__", "list", "self"], "doc_len": 24}
{"doc_id": "src/marshmallow/orderedset.py::OrderedSet.__eq__", "file_path": "src/marshmallow/orderedset.py", "class_name": "OrderedSet", "func_name": "__eq__", "text": "文件路径: src/marshmallow/orderedset.py, 类名: OrderedSet\n    def __eq__(self, other):\n        if isinstance(other, OrderedSet):\n            return len(self) == len(other) and list(self) == list(other)\n        return set(self) == set(other)\n", "tokens": ["src", "marshmallow", "orderedset", "py", "orderedset", "def", "__eq__", "self", "other", "if", "isinstance", "other", "orderedset", "return", "len", "self", "len", "other", "and", "list", "self", "list", "other", "return", "set", "self", "set", "other"], "doc_len": 28}
{"doc_id": "src/marshmallow/schema.py::_get_fields", "file_path": "src/marshmallow/schema.py", "class_name": null, "func_name": "_get_fields", "text": "文件路径: src/marshmallow/schema.py\ndef _get_fields(attrs, field_class, pop=False, ordered=False):\n    \"\"\"Get fields from a class. If ordered=True, fields will sorted by creation index.\n\n    :param attrs: Mapping of class attributes\n    :param type field_class: Base field class\n    :param bool pop: Remove matching fields\n    \"\"\"\n    fields = [\n        (field_name, field_value)\n        for field_name, field_value in attrs.items()\n        if is_instance_or_subclass(field_value, field_class)\n    ]\n    if pop:\n        for field_name, _ in fields:\n            del attrs[field_name]\n    if ordered:\n        fields.sort(key=lambda pair: pair[1]._creation_index)\n    return fields\n", "tokens": ["src", "marshmallow", "schema", "py", "def", "_get_fields", "attrs", "field_class", "pop", "false", "ordered", "false", "get", "fields", "from", "a", "class", "if", "ordered", "true", "fields", "will", "sorted", "by", "creation", "index", "param", "attrs", "mapping", "of", "class", "attributes", "param", "type", "field_class", "base", "field", "class", "param", "bool", "pop", "remove", "matching", "fields", "fields", "field_name", "field_value", "for", "field_name", "field_value", "in", "attrs", "items", "if", "is_instance_or_subclass", "field_value", "field_class", "if", "pop", "for", "field_name", "_", "in", "fields", "del", "attrs", "field_name", "if", "ordered", "fields", "sort", "key", "lambda", "pair", "pair", "1", "_creation_index", "return", "fields"], "doc_len": 79}
{"doc_id": "src/marshmallow/schema.py::_get_fields_by_mro", "file_path": "src/marshmallow/schema.py", "class_name": null, "func_name": "_get_fields_by_mro", "text": "文件路径: src/marshmallow/schema.py\ndef _get_fields_by_mro(klass, field_class, ordered=False):\n    \"\"\"Collect fields from a class, following its method resolution order. The\n    class itself is excluded from the search; only its parents are checked. Get\n    fields from ``_declared_fields`` if available, else use ``__dict__``.\n\n    :param type klass: Class whose fields to retrieve\n    :param type field_class: Base field class\n    \"\"\"\n    mro = inspect.getmro(klass)\n    # Loop over mro in reverse to maintain correct order of fields\n    return sum(\n        (\n            _get_fields(\n                getattr(base, \"_declared_fields\", base.__dict__),\n                field_class,\n                ordered=ordered,\n            )\n            for base in mro[:0:-1]\n        ),\n        [],\n    )\n", "tokens": ["src", "marshmallow", "schema", "py", "def", "_get_fields_by_mro", "klass", "field_class", "ordered", "false", "collect", "fields", "from", "a", "class", "following", "its", "method", "resolution", "order", "the", "class", "itself", "is", "excluded", "from", "the", "search", "only", "its", "parents", "are", "checked", "get", "fields", "from", "_declared_fields", "if", "available", "else", "use", "__dict__", "param", "type", "klass", "class", "whose", "fields", "to", "retrieve", "param", "type", "field_class", "base", "field", "class", "mro", "inspect", "getmro", "klass", "loop", "over", "mro", "in", "reverse", "to", "maintain", "correct", "order", "of", "fields", "return", "sum", "_get_fields", "getattr", "base", "_declared_fields", "base", "__dict__", "field_class", "ordered", "ordered", "for", "base", "in", "mro", "0", "1"], "doc_len": 88}
{"doc_id": "src/marshmallow/schema.py::SchemaMeta.__new__", "file_path": "src/marshmallow/schema.py", "class_name": "SchemaMeta", "func_name": "__new__", "text": "文件路径: src/marshmallow/schema.py, 类名: SchemaMeta\n    def __new__(mcs, name, bases, attrs):\n        meta = attrs.get(\"Meta\")\n        ordered = getattr(meta, \"ordered\", False)\n        if not ordered:\n            # Inherit 'ordered' option\n            # Warning: We loop through bases instead of MRO because we don't\n            # yet have access to the class object\n            # (i.e. can't call super before we have fields)\n            for base_ in bases:\n                if hasattr(base_, \"Meta\") and hasattr(base_.Meta, \"ordered\"):\n                    ordered = base_.Meta.ordered\n                    break\n            else:\n                ordered = False\n        cls_fields = _get_fields(attrs, base.FieldABC, pop=True, ordered=ordered)\n        klass = super().__new__(mcs, name, bases, attrs)\n        inherited_fields = _get_fields_by_mro(klass, base.FieldABC, ordered=ordered)\n\n        meta = klass.Meta\n        # Set klass.opts in __new__ rather than __init__ so that it is accessible in\n        # get_declared_fields\n        klass.opts = klass.OPTIONS_CLASS(meta, ordered=ordered)\n        # Add fields specified in the `include` class Meta option\n        cls_fields += list(klass.opts.include.items())\n\n        dict_cls = OrderedDict if ordered else dict\n        # Assign _declared_fields on class\n        klass._declared_fields = mcs.get_declared_fields(\n            klass=klass,\n            cls_fields=cls_fields,\n            inherited_fields=inherited_fields,\n            dict_cls=dict_cls,\n        )\n        return klass\n", "tokens": ["src", "marshmallow", "schema", "py", "schemameta", "def", "__new__", "mcs", "name", "bases", "attrs", "meta", "attrs", "get", "meta", "ordered", "getattr", "meta", "ordered", "false", "if", "not", "ordered", "inherit", "ordered", "option", "warning", "we", "loop", "through", "bases", "instead", "of", "mro", "because", "we", "don", "t", "yet", "have", "access", "to", "the", "class", "object", "i", "e", "can", "t", "call", "super", "before", "we", "have", "fields", "for", "base_", "in", "bases", "if", "hasattr", "base_", "meta", "and", "hasattr", "base_", "meta", "ordered", "ordered", "base_", "meta", "ordered", "break", "else", "ordered", "false", "cls_fields", "_get_fields", "attrs", "base", "fieldabc", "pop", "true", "ordered", "ordered", "klass", "super", "__new__", "mcs", "name", "bases", "attrs", "inherited_fields", "_get_fields_by_mro", "klass", "base", "fieldabc", "ordered", "ordered", "meta", "klass", "meta", "set", "klass", "opts", "in", "__new__", "rather", "than", "__init__", "so", "that", "it", "is", "accessible", "in", "get_declared_fields", "klass", "opts", "klass", "options_class", "meta", "ordered", "ordered", "add", "fields", "specified", "in", "the", "include", "class", "meta", "option", "cls_fields", "list", "klass", "opts", "include", "items", "dict_cls", "ordereddict", "if", "ordered", "else", "dict", "assign", "_declared_fields", "on", "class", "klass", "_declared_fields", "mcs", "get_declared_fields", "klass", "klass", "cls_fields", "cls_fields", "inherited_fields", "inherited_fields", "dict_cls", "dict_cls", "return", "klass"], "doc_len": 163}
{"doc_id": "src/marshmallow/schema.py::SchemaMeta.get_declared_fields", "file_path": "src/marshmallow/schema.py", "class_name": "SchemaMeta", "func_name": "get_declared_fields", "text": "文件路径: src/marshmallow/schema.py, 类名: SchemaMeta\n    def get_declared_fields(mcs, klass, cls_fields, inherited_fields, dict_cls):\n        \"\"\"Returns a dictionary of field_name => `Field` pairs declard on the class.\n        This is exposed mainly so that plugins can add additional fields, e.g. fields\n        computed from class Meta options.\n\n        :param type klass: The class object.\n        :param list cls_fields: The fields declared on the class, including those added\n            by the ``include`` class Meta option.\n        :param list inherited_fields: Inherited fields.\n        :param type dict_class: Either `dict` or `OrderedDict`, depending on the whether\n            the user specified `ordered=True`.\n        \"\"\"\n        return dict_cls(inherited_fields + cls_fields)\n", "tokens": ["src", "marshmallow", "schema", "py", "schemameta", "def", "get_declared_fields", "mcs", "klass", "cls_fields", "inherited_fields", "dict_cls", "returns", "a", "dictionary", "of", "field_name", "field", "pairs", "declard", "on", "the", "class", "this", "is", "exposed", "mainly", "so", "that", "plugins", "can", "add", "additional", "fields", "e", "g", "fields", "computed", "from", "class", "meta", "options", "param", "type", "klass", "the", "class", "object", "param", "list", "cls_fields", "the", "fields", "declared", "on", "the", "class", "including", "those", "added", "by", "the", "include", "class", "meta", "option", "param", "list", "inherited_fields", "inherited", "fields", "param", "type", "dict_class", "either", "dict", "or", "ordereddict", "depending", "on", "the", "whether", "the", "user", "specified", "ordered", "true", "return", "dict_cls", "inherited_fields", "cls_fields"], "doc_len": 91}
{"doc_id": "src/marshmallow/schema.py::SchemaMeta.__init__", "file_path": "src/marshmallow/schema.py", "class_name": "SchemaMeta", "func_name": "__init__", "text": "文件路径: src/marshmallow/schema.py, 类名: SchemaMeta\n    def __init__(cls, name, bases, attrs):\n        super().__init__(cls, bases, attrs)\n        if name and cls.opts.register:\n            class_registry.register(name, cls)\n        cls._hooks = cls.resolve_hooks()\n", "tokens": ["src", "marshmallow", "schema", "py", "schemameta", "def", "__init__", "cls", "name", "bases", "attrs", "super", "__init__", "cls", "bases", "attrs", "if", "name", "and", "cls", "opts", "register", "class_registry", "register", "name", "cls", "cls", "_hooks", "cls", "resolve_hooks"], "doc_len": 30}
{"doc_id": "src/marshmallow/schema.py::SchemaMeta.resolve_hooks", "file_path": "src/marshmallow/schema.py", "class_name": "SchemaMeta", "func_name": "resolve_hooks", "text": "文件路径: src/marshmallow/schema.py, 类名: SchemaMeta\n    def resolve_hooks(cls):\n        \"\"\"Add in the decorated processors\n\n        By doing this after constructing the class, we let standard inheritance\n        do all the hard work.\n        \"\"\"\n        mro = inspect.getmro(cls)\n\n        hooks = defaultdict(list)\n\n        for attr_name in dir(cls):\n            # Need to look up the actual descriptor, not whatever might be\n            # bound to the class. This needs to come from the __dict__ of the\n            # declaring class.\n            for parent in mro:\n                try:\n                    attr = parent.__dict__[attr_name]\n                except KeyError:\n                    continue\n                else:\n                    break\n            else:\n                # In case we didn't find the attribute and didn't break above.\n                # We should never hit this - it's just here for completeness\n                # to exclude the possibility of attr being undefined.\n                continue\n\n            try:\n                hook_config = attr.__marshmallow_hook__\n            except AttributeError:\n                pass\n            else:\n                for key in hook_config.keys():\n                    # Use name here so we can get the bound method later, in\n                    # case the processor was a descriptor or something.\n                    hooks[key].append(attr_name)\n\n        return hooks\n", "tokens": ["src", "marshmallow", "schema", "py", "schemameta", "def", "resolve_hooks", "cls", "add", "in", "the", "decorated", "processors", "by", "doing", "this", "after", "constructing", "the", "class", "we", "let", "standard", "inheritance", "do", "all", "the", "hard", "work", "mro", "inspect", "getmro", "cls", "hooks", "defaultdict", "list", "for", "attr_name", "in", "dir", "cls", "need", "to", "look", "up", "the", "actual", "descriptor", "not", "whatever", "might", "be", "bound", "to", "the", "class", "this", "needs", "to", "come", "from", "the", "__dict__", "of", "the", "declaring", "class", "for", "parent", "in", "mro", "try", "attr", "parent", "__dict__", "attr_name", "except", "keyerror", "continue", "else", "break", "else", "in", "case", "we", "didn", "t", "find", "the", "attribute", "and", "didn", "t", "break", "above", "we", "should", "never", "hit", "this", "it", "s", "just", "here", "for", "completeness", "to", "exclude", "the", "possibility", "of", "attr", "being", "undefined", "continue", "try", "hook_config", "attr", "__marshmallow_hook__", "except", "attributeerror", "pass", "else", "for", "key", "in", "hook_config", "keys", "use", "name", "here", "so", "we", "can", "get", "the", "bound", "method", "later", "in", "case", "the", "processor", "was", "a", "descriptor", "or", "something", "hooks", "key", "append", "attr_name", "return", "hooks"], "doc_len": 154}
{"doc_id": "src/marshmallow/schema.py::SchemaOpts.__init__", "file_path": "src/marshmallow/schema.py", "class_name": "SchemaOpts", "func_name": "__init__", "text": "文件路径: src/marshmallow/schema.py, 类名: SchemaOpts\n    def __init__(self, meta, ordered=False):\n        self.fields = getattr(meta, \"fields\", ())\n        if not isinstance(self.fields, (list, tuple)):\n            raise ValueError(\"`fields` option must be a list or tuple.\")\n        self.additional = getattr(meta, \"additional\", ())\n        if not isinstance(self.additional, (list, tuple)):\n            raise ValueError(\"`additional` option must be a list or tuple.\")\n        if self.fields and self.additional:\n            raise ValueError(\n                \"Cannot set both `fields` and `additional` options\"\n                \" for the same Schema.\"\n            )\n        self.exclude = getattr(meta, \"exclude\", ())\n        if not isinstance(self.exclude, (list, tuple)):\n            raise ValueError(\"`exclude` must be a list or tuple.\")\n        self.dateformat = getattr(meta, \"dateformat\", None)\n        self.datetimeformat = getattr(meta, \"datetimeformat\", None)\n        if hasattr(meta, \"json_module\"):\n            warnings.warn(\n                \"The json_module class Meta option is deprecated. Use render_module instead.\",\n                DeprecationWarning,\n            )\n            render_module = getattr(meta, \"json_module\", json)\n        else:\n            render_module = json\n        self.render_module = getattr(meta, \"render_module\", render_module)\n        self.ordered = getattr(meta, \"ordered\", ordered)\n        self.index_errors = getattr(meta, \"index_errors\", True)\n        self.include = getattr(meta, \"include\", {})\n        self.load_only = getattr(meta, \"load_only\", ())\n        self.dump_only = getattr(meta, \"dump_only\", ())\n        self.unknown = getattr(meta, \"unknown\", RAISE)\n        self.register = getattr(meta, \"register\", True)\n", "tokens": ["src", "marshmallow", "schema", "py", "schemaopts", "def", "__init__", "self", "meta", "ordered", "false", "self", "fields", "getattr", "meta", "fields", "if", "not", "isinstance", "self", "fields", "list", "tuple", "raise", "valueerror", "fields", "option", "must", "be", "a", "list", "or", "tuple", "self", "additional", "getattr", "meta", "additional", "if", "not", "isinstance", "self", "additional", "list", "tuple", "raise", "valueerror", "additional", "option", "must", "be", "a", "list", "or", "tuple", "if", "self", "fields", "and", "self", "additional", "raise", "valueerror", "cannot", "set", "both", "fields", "and", "additional", "options", "for", "the", "same", "schema", "self", "exclude", "getattr", "meta", "exclude", "if", "not", "isinstance", "self", "exclude", "list", "tuple", "raise", "valueerror", "exclude", "must", "be", "a", "list", "or", "tuple", "self", "dateformat", "getattr", "meta", "dateformat", "none", "self", "datetimeformat", "getattr", "meta", "datetimeformat", "none", "if", "hasattr", "meta", "json_module", "warnings", "warn", "the", "json_module", "class", "meta", "option", "is", "deprecated", "use", "render_module", "instead", "deprecationwarning", "render_module", "getattr", "meta", "json_module", "json", "else", "render_module", "json", "self", "render_module", "getattr", "meta", "render_module", "render_module", "self", "ordered", "getattr", "meta", "ordered", "ordered", "self", "index_errors", "getattr", "meta", "index_errors", "true", "self", "include", "getattr", "meta", "include", "self", "load_only", "getattr", "meta", "load_only", "self", "dump_only", "getattr", "meta", "dump_only", "self", "unknown", "getattr", "meta", "unknown", "raise", "self", "register", "getattr", "meta", "register", "true"], "doc_len": 177}
{"doc_id": "src/marshmallow/schema.py::BaseSchema.__init__", "file_path": "src/marshmallow/schema.py", "class_name": "BaseSchema", "func_name": "__init__", "text": "文件路径: src/marshmallow/schema.py, 类名: BaseSchema\n    def __init__(\n        self,\n        *,\n        only=None,\n        exclude=(),\n        many=False,\n        context=None,\n        load_only=(),\n        dump_only=(),\n        partial=False,\n        unknown=None\n    ):\n        # Raise error if only or exclude is passed as string, not list of strings\n        if only is not None and not is_collection(only):\n            raise StringNotCollectionError('\"only\" should be a list of strings')\n        if exclude is not None and not is_collection(exclude):\n            raise StringNotCollectionError('\"exclude\" should be a list of strings')\n        # copy declared fields from metaclass\n        self.declared_fields = copy.deepcopy(self._declared_fields)\n        self.many = many\n        self.only = only\n        self.exclude = set(self.opts.exclude) | set(exclude)\n        self.ordered = self.opts.ordered\n        self.load_only = set(load_only) or set(self.opts.load_only)\n        self.dump_only = set(dump_only) or set(self.opts.dump_only)\n        self.partial = partial\n        self.unknown = unknown or self.opts.unknown\n        self.context = context or {}\n        self._normalize_nested_options()\n        #: Dictionary mapping field_names -> :class:`Field` objects\n        self.fields = self._init_fields()\n        self.dump_fields, self.load_fields = self.dict_class(), self.dict_class()\n        for field_name, field_obj in self.fields.items():\n            if field_obj.load_only:\n                self.load_fields[field_name] = field_obj\n            elif field_obj.dump_only:\n                self.dump_fields[field_name] = field_obj\n            else:\n                self.load_fields[field_name] = field_obj\n                self.dump_fields[field_name] = field_obj\n        messages = {}\n        messages.update(self._default_error_messages)\n        for cls in reversed(self.__class__.__mro__):\n            messages.update(getattr(cls, \"error_messages\", {}))\n        messages.update(self.error_messages or {})\n        self.error_messages = messages\n", "tokens": ["src", "marshmallow", "schema", "py", "baseschema", "def", "__init__", "self", "only", "none", "exclude", "many", "false", "context", "none", "load_only", "dump_only", "partial", "false", "unknown", "none", "raise", "error", "if", "only", "or", "exclude", "is", "passed", "as", "string", "not", "list", "of", "strings", "if", "only", "is", "not", "none", "and", "not", "is_collection", "only", "raise", "stringnotcollectionerror", "only", "should", "be", "a", "list", "of", "strings", "if", "exclude", "is", "not", "none", "and", "not", "is_collection", "exclude", "raise", "stringnotcollectionerror", "exclude", "should", "be", "a", "list", "of", "strings", "copy", "declared", "fields", "from", "metaclass", "self", "declared_fields", "copy", "deepcopy", "self", "_declared_fields", "self", "many", "many", "self", "only", "only", "self", "exclude", "set", "self", "opts", "exclude", "set", "exclude", "self", "ordered", "self", "opts", "ordered", "self", "load_only", "set", "load_only", "or", "set", "self", "opts", "load_only", "self", "dump_only", "set", "dump_only", "or", "set", "self", "opts", "dump_only", "self", "partial", "partial", "self", "unknown", "unknown", "or", "self", "opts", "unknown", "self", "context", "context", "or", "self", "_normalize_nested_options", "dictionary", "mapping", "field_names", "class", "field", "objects", "self", "fields", "self", "_init_fields", "self", "dump_fields", "self", "load_fields", "self", "dict_class", "self", "dict_class", "for", "field_name", "field_obj", "in", "self", "fields", "items", "if", "field_obj", "load_only", "self", "load_fields", "field_name", "field_obj", "elif", "field_obj", "dump_only", "self", "dump_fields", "field_name", "field_obj", "else", "self", "load_fields", "field_name", "field_obj", "self", "dump_fields", "field_name", "field_obj", "messages", "messages", "update", "self", "_default_error_messages", "for", "cls", "in", "reversed", "self", "__class__", "__mro__", "messages", "update", "getattr", "cls", "error_messages", "messages", "update", "self", "error_messages", "or", "self", "error_messages", "messages"], "doc_len": 208}
{"doc_id": "src/marshmallow/schema.py::BaseSchema.__repr__", "file_path": "src/marshmallow/schema.py", "class_name": "BaseSchema", "func_name": "__repr__", "text": "文件路径: src/marshmallow/schema.py, 类名: BaseSchema\n    def __repr__(self):\n        return \"<{ClassName}(many={self.many})>\".format(\n            ClassName=self.__class__.__name__, self=self\n        )\n", "tokens": ["src", "marshmallow", "schema", "py", "baseschema", "def", "__repr__", "self", "return", "classname", "many", "self", "many", "format", "classname", "self", "__class__", "__name__", "self", "self"], "doc_len": 20}
{"doc_id": "src/marshmallow/schema.py::BaseSchema.dict_class", "file_path": "src/marshmallow/schema.py", "class_name": "BaseSchema", "func_name": "dict_class", "text": "文件路径: src/marshmallow/schema.py, 类名: BaseSchema\n    def dict_class(self):\n        return OrderedDict if self.ordered else dict\n", "tokens": ["src", "marshmallow", "schema", "py", "baseschema", "def", "dict_class", "self", "return", "ordereddict", "if", "self", "ordered", "else", "dict"], "doc_len": 15}
{"doc_id": "src/marshmallow/schema.py::BaseSchema.set_class", "file_path": "src/marshmallow/schema.py", "class_name": "BaseSchema", "func_name": "set_class", "text": "文件路径: src/marshmallow/schema.py, 类名: BaseSchema\n    def set_class(self):\n        return OrderedSet if self.ordered else set\n", "tokens": ["src", "marshmallow", "schema", "py", "baseschema", "def", "set_class", "self", "return", "orderedset", "if", "self", "ordered", "else", "set"], "doc_len": 15}
{"doc_id": "src/marshmallow/schema.py::BaseSchema.from_dict", "file_path": "src/marshmallow/schema.py", "class_name": "BaseSchema", "func_name": "from_dict", "text": "文件路径: src/marshmallow/schema.py, 类名: BaseSchema\n    def from_dict(\n        cls, fields: typing.Dict[str, ma_fields.Field], *, name: str = \"GeneratedSchema\"\n    ) -> typing.Type[\"Schema\"]:\n        \"\"\"Generate a `Schema` class given a dictionary of fields.\n\n        .. code-block:: python\n\n            from marshmallow import Schema, fields\n\n            PersonSchema = Schema.from_dict({\"name\": fields.Str()})\n            print(PersonSchema().load({\"name\": \"David\"}))  # => {'name': 'David'}\n\n        Generated schemas are not added to the class registry and therefore cannot\n        be referred to by name in `Nested` fields.\n\n        :param dict fields: Dictionary mapping field names to field instances.\n        :param str name: Optional name for the class, which will appear in\n            the ``repr`` for the class.\n\n        .. versionadded:: 3.0.0\n        \"\"\"\n        attrs = fields.copy()\n        attrs[\"Meta\"] = type(\n            \"GeneratedMeta\", (getattr(cls, \"Meta\", object),), {\"register\": False}\n        )\n        schema_cls = type(name, (cls,), attrs)\n        return schema_cls\n", "tokens": ["src", "marshmallow", "schema", "py", "baseschema", "def", "from_dict", "cls", "fields", "typing", "dict", "str", "ma_fields", "field", "name", "str", "generatedschema", "typing", "type", "schema", "generate", "a", "schema", "class", "given", "a", "dictionary", "of", "fields", "code", "block", "python", "from", "marshmallow", "import", "schema", "fields", "personschema", "schema", "from_dict", "name", "fields", "str", "print", "personschema", "load", "name", "david", "name", "david", "generated", "schemas", "are", "not", "added", "to", "the", "class", "registry", "and", "therefore", "cannot", "be", "referred", "to", "by", "name", "in", "nested", "fields", "param", "dict", "fields", "dictionary", "mapping", "field", "names", "to", "field", "instances", "param", "str", "name", "optional", "name", "for", "the", "class", "which", "will", "appear", "in", "the", "repr", "for", "the", "class", "versionadded", "3", "0", "0", "attrs", "fields", "copy", "attrs", "meta", "type", "generatedmeta", "getattr", "cls", "meta", "object", "register", "false", "schema_cls", "type", "name", "cls", "attrs", "return", "schema_cls"], "doc_len": 121}
{"doc_id": "src/marshmallow/schema.py::BaseSchema.handle_error", "file_path": "src/marshmallow/schema.py", "class_name": "BaseSchema", "func_name": "handle_error", "text": "文件路径: src/marshmallow/schema.py, 类名: BaseSchema\n    def handle_error(self, error, data, *, many, **kwargs):\n        \"\"\"Custom error handler function for the schema.\n\n        :param ValidationError error: The `ValidationError` raised during (de)serialization.\n        :param data: The original input data.\n        :param bool many: Value of ``many`` on dump or load.\n        :param bool partial: Value of ``partial`` on load.\n\n        .. versionadded:: 2.0.0\n\n        .. versionchanged:: 3.0.0rc9\n            Receives `many` and `partial` (on deserialization) as keyword arguments.\n        \"\"\"\n        pass\n", "tokens": ["src", "marshmallow", "schema", "py", "baseschema", "def", "handle_error", "self", "error", "data", "many", "kwargs", "custom", "error", "handler", "function", "for", "the", "schema", "param", "validationerror", "error", "the", "validationerror", "raised", "during", "de", "serialization", "param", "data", "the", "original", "input", "data", "param", "bool", "many", "value", "of", "many", "on", "dump", "or", "load", "param", "bool", "partial", "value", "of", "partial", "on", "load", "versionadded", "2", "0", "0", "versionchanged", "3", "0", "0rc9", "receives", "many", "and", "partial", "on", "deserialization", "as", "keyword", "arguments", "pass"], "doc_len": 70}
{"doc_id": "src/marshmallow/schema.py::BaseSchema.get_attribute", "file_path": "src/marshmallow/schema.py", "class_name": "BaseSchema", "func_name": "get_attribute", "text": "文件路径: src/marshmallow/schema.py, 类名: BaseSchema\n    def get_attribute(self, obj, attr, default):\n        \"\"\"Defines how to pull values from an object to serialize.\n\n        .. versionadded:: 2.0.0\n\n        .. versionchanged:: 3.0.0a1\n            Changed position of ``obj`` and ``attr``.\n        \"\"\"\n        return get_value(obj, attr, default)\n", "tokens": ["src", "marshmallow", "schema", "py", "baseschema", "def", "get_attribute", "self", "obj", "attr", "default", "defines", "how", "to", "pull", "values", "from", "an", "object", "to", "serialize", "versionadded", "2", "0", "0", "versionchanged", "3", "0", "0a1", "changed", "position", "of", "obj", "and", "attr", "return", "get_value", "obj", "attr", "default"], "doc_len": 40}
{"doc_id": "src/marshmallow/schema.py::BaseSchema._call_and_store", "file_path": "src/marshmallow/schema.py", "class_name": "BaseSchema", "func_name": "_call_and_store", "text": "文件路径: src/marshmallow/schema.py, 类名: BaseSchema\n    def _call_and_store(getter_func, data, *, field_name, error_store, index=None):\n        \"\"\"Call ``getter_func`` with ``data`` as its argument, and store any `ValidationErrors`.\n\n        :param callable getter_func: Function for getting the serialized/deserialized\n            value from ``data``.\n        :param data: The data passed to ``getter_func``.\n        :param str field_name: Field name.\n        :param int index: Index of the item being validated, if validating a collection,\n            otherwise `None`.\n        \"\"\"\n        try:\n            value = getter_func(data)\n        except ValidationError as error:\n            error_store.store_error(error.messages, field_name, index=index)\n            # When a Nested field fails validation, the marshalled data is stored\n            # on the ValidationError's valid_data attribute\n            return error.valid_data or missing\n        return value\n", "tokens": ["src", "marshmallow", "schema", "py", "baseschema", "def", "_call_and_store", "getter_func", "data", "field_name", "error_store", "index", "none", "call", "getter_func", "with", "data", "as", "its", "argument", "and", "store", "any", "validationerrors", "param", "callable", "getter_func", "function", "for", "getting", "the", "serialized", "deserialized", "value", "from", "data", "param", "data", "the", "data", "passed", "to", "getter_func", "param", "str", "field_name", "field", "name", "param", "int", "index", "index", "of", "the", "item", "being", "validated", "if", "validating", "a", "collection", "otherwise", "none", "try", "value", "getter_func", "data", "except", "validationerror", "as", "error", "error_store", "store_error", "error", "messages", "field_name", "index", "index", "when", "a", "nested", "field", "fails", "validation", "the", "marshalled", "data", "is", "stored", "on", "the", "validationerror", "s", "valid_data", "attribute", "return", "error", "valid_data", "or", "missing", "return", "value"], "doc_len": 102}
{"doc_id": "src/marshmallow/schema.py::BaseSchema._serialize", "file_path": "src/marshmallow/schema.py", "class_name": "BaseSchema", "func_name": "_serialize", "text": "文件路径: src/marshmallow/schema.py, 类名: BaseSchema\n    def _serialize(self, obj, *, many=False):\n        \"\"\"Serialize ``obj``.\n\n        :param obj: The object(s) to serialize.\n        :param bool many: `True` if ``data`` should be serialized as a collection.\n        :return: A dictionary of the serialized data\n\n        .. versionchanged:: 1.0.0\n            Renamed from ``marshal``.\n        \"\"\"\n        if many and obj is not None:\n            return [self._serialize(d, many=False) for d in obj]\n        ret = self.dict_class()\n        for attr_name, field_obj in self.dump_fields.items():\n            value = field_obj.serialize(attr_name, obj, accessor=self.get_attribute)\n            if value is missing:\n                continue\n            key = field_obj.data_key or attr_name\n            ret[key] = value\n        return ret\n", "tokens": ["src", "marshmallow", "schema", "py", "baseschema", "def", "_serialize", "self", "obj", "many", "false", "serialize", "obj", "param", "obj", "the", "object", "s", "to", "serialize", "param", "bool", "many", "true", "if", "data", "should", "be", "serialized", "as", "a", "collection", "return", "a", "dictionary", "of", "the", "serialized", "data", "versionchanged", "1", "0", "0", "renamed", "from", "marshal", "if", "many", "and", "obj", "is", "not", "none", "return", "self", "_serialize", "d", "many", "false", "for", "d", "in", "obj", "ret", "self", "dict_class", "for", "attr_name", "field_obj", "in", "self", "dump_fields", "items", "value", "field_obj", "serialize", "attr_name", "obj", "accessor", "self", "get_attribute", "if", "value", "is", "missing", "continue", "key", "field_obj", "data_key", "or", "attr_name", "ret", "key", "value", "return", "ret"], "doc_len": 96}
{"doc_id": "src/marshmallow/schema.py::BaseSchema.dump", "file_path": "src/marshmallow/schema.py", "class_name": "BaseSchema", "func_name": "dump", "text": "文件路径: src/marshmallow/schema.py, 类名: BaseSchema\n    def dump(self, obj, *, many=None):\n        \"\"\"Serialize an object to native Python data types according to this\n        Schema's fields.\n\n        :param obj: The object to serialize.\n        :param bool many: Whether to serialize `obj` as a collection. If `None`, the value\n            for `self.many` is used.\n        :return: A dict of serialized data\n        :rtype: dict\n\n        .. versionadded:: 1.0.0\n        .. versionchanged:: 3.0.0b7\n            This method returns the serialized data rather than a ``(data, errors)`` duple.\n            A :exc:`ValidationError <marshmallow.exceptions.ValidationError>` is raised\n            if ``obj`` is invalid.\n        .. versionchanged:: 3.0.0rc9\n            Validation no longer occurs upon serialization.\n        \"\"\"\n        many = self.many if many is None else bool(many)\n        if many and is_iterable_but_not_string(obj):\n            obj = list(obj)\n\n        if self._has_processors(PRE_DUMP):\n            processed_obj = self._invoke_dump_processors(\n                PRE_DUMP, obj, many=many, original_data=obj\n            )\n        else:\n            processed_obj = obj\n\n        result = self._serialize(processed_obj, many=many)\n\n        if self._has_processors(POST_DUMP):\n            result = self._invoke_dump_processors(\n                POST_DUMP, result, many=many, original_data=obj\n            )\n\n        return result\n", "tokens": ["src", "marshmallow", "schema", "py", "baseschema", "def", "dump", "self", "obj", "many", "none", "serialize", "an", "object", "to", "native", "python", "data", "types", "according", "to", "this", "schema", "s", "fields", "param", "obj", "the", "object", "to", "serialize", "param", "bool", "many", "whether", "to", "serialize", "obj", "as", "a", "collection", "if", "none", "the", "value", "for", "self", "many", "is", "used", "return", "a", "dict", "of", "serialized", "data", "rtype", "dict", "versionadded", "1", "0", "0", "versionchanged", "3", "0", "0b7", "this", "method", "returns", "the", "serialized", "data", "rather", "than", "a", "data", "errors", "duple", "a", "exc", "validationerror", "marshmallow", "exceptions", "validationerror", "is", "raised", "if", "obj", "is", "invalid", "versionchanged", "3", "0", "0rc9", "validation", "no", "longer", "occurs", "upon", "serialization", "many", "self", "many", "if", "many", "is", "none", "else", "bool", "many", "if", "many", "and", "is_iterable_but_not_string", "obj", "obj", "list", "obj", "if", "self", "_has_processors", "pre_dump", "processed_obj", "self", "_invoke_dump_processors", "pre_dump", "obj", "many", "many", "original_data", "obj", "else", "processed_obj", "obj", "result", "self", "_serialize", "processed_obj", "many", "many", "if", "self", "_has_processors", "post_dump", "result", "self", "_invoke_dump_processors", "post_dump", "result", "many", "many", "original_data", "obj", "return", "result"], "doc_len": 155}
{"doc_id": "src/marshmallow/schema.py::BaseSchema.dumps", "file_path": "src/marshmallow/schema.py", "class_name": "BaseSchema", "func_name": "dumps", "text": "文件路径: src/marshmallow/schema.py, 类名: BaseSchema\n    def dumps(self, obj, *args, many=None, **kwargs):\n        \"\"\"Same as :meth:`dump`, except return a JSON-encoded string.\n\n        :param obj: The object to serialize.\n        :param bool many: Whether to serialize `obj` as a collection. If `None`, the value\n            for `self.many` is used.\n        :return: A ``json`` string\n        :rtype: str\n\n        .. versionadded:: 1.0.0\n        .. versionchanged:: 3.0.0b7\n            This method returns the serialized data rather than a ``(data, errors)`` duple.\n            A :exc:`ValidationError <marshmallow.exceptions.ValidationError>` is raised\n            if ``obj`` is invalid.\n        \"\"\"\n        serialized = self.dump(obj, many=many)\n        return self.opts.render_module.dumps(serialized, *args, **kwargs)\n", "tokens": ["src", "marshmallow", "schema", "py", "baseschema", "def", "dumps", "self", "obj", "args", "many", "none", "kwargs", "same", "as", "meth", "dump", "except", "return", "a", "json", "encoded", "string", "param", "obj", "the", "object", "to", "serialize", "param", "bool", "many", "whether", "to", "serialize", "obj", "as", "a", "collection", "if", "none", "the", "value", "for", "self", "many", "is", "used", "return", "a", "json", "string", "rtype", "str", "versionadded", "1", "0", "0", "versionchanged", "3", "0", "0b7", "this", "method", "returns", "the", "serialized", "data", "rather", "than", "a", "data", "errors", "duple", "a", "exc", "validationerror", "marshmallow", "exceptions", "validationerror", "is", "raised", "if", "obj", "is", "invalid", "serialized", "self", "dump", "obj", "many", "many", "return", "self", "opts", "render_module", "dumps", "serialized", "args", "kwargs"], "doc_len": 100}
{"doc_id": "src/marshmallow/schema.py::BaseSchema._deserialize", "file_path": "src/marshmallow/schema.py", "class_name": "BaseSchema", "func_name": "_deserialize", "text": "文件路径: src/marshmallow/schema.py, 类名: BaseSchema\n    def _deserialize(\n        self, data, *, error_store, many=False, partial=False, unknown=RAISE, index=None\n    ):\n        \"\"\"Deserialize ``data``.\n\n        :param dict data: The data to deserialize.\n        :param ErrorStore error_store: Structure to store errors.\n        :param bool many: `True` if ``data`` should be deserialized as a collection.\n        :param bool|tuple partial: Whether to ignore missing fields and not require\n            any fields declared. Propagates down to ``Nested`` fields as well. If\n            its value is an iterable, only missing fields listed in that iterable\n            will be ignored. Use dot delimiters to specify nested fields.\n        :param unknown: Whether to exclude, include, or raise an error for unknown\n            fields in the data. Use `EXCLUDE`, `INCLUDE` or `RAISE`.\n        :param int index: Index of the item being serialized (for storing errors) if\n            serializing a collection, otherwise `None`.\n        :return: A dictionary of the deserialized data.\n        \"\"\"\n        index_errors = self.opts.index_errors\n        index = index if index_errors else None\n        if many:\n            if not is_collection(data):\n                error_store.store_error([self.error_messages[\"type\"]], index=index)\n                ret = []\n            else:\n                ret = [\n                    self._deserialize(\n                        d,\n                        error_store=error_store,\n                        many=False,\n                        partial=partial,\n                        unknown=unknown,\n                        index=idx,\n                    )\n                    for idx, d in enumerate(data)\n                ]\n            return ret\n        ret = self.dict_class()\n        # Check data is a dict\n        if not isinstance(data, Mapping):\n            error_store.store_error([self.error_messages[\"type\"]], index=index)\n        else:\n            partial_is_collection = is_collection(partial)\n            for attr_name, field_obj in self.load_fields.items():\n                field_name = field_obj.data_key or attr_name\n                raw_value = data.get(field_name, missing)\n                if raw_value is missing:\n                    # Ignore missing field if we're allowed to.\n                    if partial is True or (\n                        partial_is_collection and attr_name in partial\n                    ):\n                        continue\n                d_kwargs = {}\n                # Allow partial loading of nested schemas.\n                if partial_is_collection:\n                    prefix = field_name + \".\"\n                    len_prefix = len(prefix)\n                    sub_partial = [\n                        f[len_prefix:] for f in partial if f.startswith(prefix)\n                    ]\n                    d_kwargs[\"partial\"] = sub_partial\n                else:\n                    d_kwargs[\"partial\"] = partial\n                getter = lambda val: field_obj.deserialize(\n                    val, field_name, data, **d_kwargs\n                )\n                value = self._call_and_store(\n                    getter_func=getter,\n                    data=raw_value,\n                    field_name=field_name,\n                    error_store=error_store,\n                    index=index,\n                )\n                if value is not missing:\n                    key = field_obj.attribute or attr_name\n                    set_value(ret, key, value)\n            if unknown != EXCLUDE:\n                fields = {\n                    field_obj.data_key or field_name\n                    for field_name, field_obj in self.load_fields.items()\n                }\n                for key in set(data) - fields:\n                    value = data[key]\n                    if unknown == INCLUDE:\n                        set_value(ret, key, value)\n                    elif unknown == RAISE:\n                        error_store.store_error(\n                            [self.error_messages[\"unknown\"]],\n                            key,\n                            (index if index_errors else None),\n                        )\n        return ret\n", "tokens": ["src", "marshmallow", "schema", "py", "baseschema", "def", "_deserialize", "self", "data", "error_store", "many", "false", "partial", "false", "unknown", "raise", "index", "none", "deserialize", "data", "param", "dict", "data", "the", "data", "to", "deserialize", "param", "errorstore", "error_store", "structure", "to", "store", "errors", "param", "bool", "many", "true", "if", "data", "should", "be", "deserialized", "as", "a", "collection", "param", "bool", "tuple", "partial", "whether", "to", "ignore", "missing", "fields", "and", "not", "require", "any", "fields", "declared", "propagates", "down", "to", "nested", "fields", "as", "well", "if", "its", "value", "is", "an", "iterable", "only", "missing", "fields", "listed", "in", "that", "iterable", "will", "be", "ignored", "use", "dot", "delimiters", "to", "specify", "nested", "fields", "param", "unknown", "whether", "to", "exclude", "include", "or", "raise", "an", "error", "for", "unknown", "fields", "in", "the", "data", "use", "exclude", "include", "or", "raise", "param", "int", "index", "index", "of", "the", "item", "being", "serialized", "for", "storing", "errors", "if", "serializing", "a", "collection", "otherwise", "none", "return", "a", "dictionary", "of", "the", "deserialized", "data", "index_errors", "self", "opts", "index_errors", "index", "index", "if", "index_errors", "else", "none", "if", "many", "if", "not", "is_collection", "data", "error_store", "store_error", "self", "error_messages", "type", "index", "index", "ret", "else", "ret", "self", "_deserialize", "d", "error_store", "error_store", "many", "false", "partial", "partial", "unknown", "unknown", "index", "idx", "for", "idx", "d", "in", "enumerate", "data", "return", "ret", "ret", "self", "dict_class", "check", "data", "is", "a", "dict", "if", "not", "isinstance", "data", "mapping", "error_store", "store_error", "self", "error_messages", "type", "index", "index", "else", "partial_is_collection", "is_collection", "partial", "for", "attr_name", "field_obj", "in", "self", "load_fields", "items", "field_name", "field_obj", "data_key", "or", "attr_name", "raw_value", "data", "get", "field_name", "missing", "if", "raw_value", "is", "missing", "ignore", "missing", "field", "if", "we", "re", "allowed", "to", "if", "partial", "is", "true", "or", "partial_is_collection", "and", "attr_name", "in", "partial", "continue", "d_kwargs", "allow", "partial", "loading", "of", "nested", "schemas", "if", "partial_is_collection", "prefix", "field_name", "len_prefix", "len", "prefix", "sub_partial", "f", "len_prefix", "for", "f", "in", "partial", "if", "f", "startswith", "prefix", "d_kwargs", "partial", "sub_partial", "else", "d_kwargs", "partial", "partial", "getter", "lambda", "val", "field_obj", "deserialize", "val", "field_name", "data", "d_kwargs", "value", "self", "_call_and_store", "getter_func", "getter", "data", "raw_value", "field_name", "field_name", "error_store", "error_store", "index", "index", "if", "value", "is", "not", "missing", "key", "field_obj", "attribute", "or", "attr_name", "set_value", "ret", "key", "value", "if", "unknown", "exclude", "fields", "field_obj", "data_key", "or", "field_name", "for", "field_name", "field_obj", "in", "self", "load_fields", "items", "for", "key", "in", "set", "data", "fields", "value", "data", "key", "if", "unknown", "include", "set_value", "ret", "key", "value", "elif", "unknown", "raise", "error_store", "store_error", "self", "error_messages", "unknown", "key", "index", "if", "index_errors", "else", "none", "return", "ret"], "doc_len": 363}
{"doc_id": "src/marshmallow/schema.py::BaseSchema.load", "file_path": "src/marshmallow/schema.py", "class_name": "BaseSchema", "func_name": "load", "text": "文件路径: src/marshmallow/schema.py, 类名: BaseSchema\n    def load(self, data, *, many=None, partial=None, unknown=None):\n        \"\"\"Deserialize a data structure to an object defined by this Schema's fields.\n\n        :param dict data: The data to deserialize.\n        :param bool many: Whether to deserialize `data` as a collection. If `None`, the\n            value for `self.many` is used.\n        :param bool|tuple partial: Whether to ignore missing fields and not require\n            any fields declared. Propagates down to ``Nested`` fields as well. If\n            its value is an iterable, only missing fields listed in that iterable\n            will be ignored. Use dot delimiters to specify nested fields.\n        :param unknown: Whether to exclude, include, or raise an error for unknown\n            fields in the data. Use `EXCLUDE`, `INCLUDE` or `RAISE`.\n            If `None`, the value for `self.unknown` is used.\n        :return: A dict of deserialized data\n        :rtype: dict\n\n        .. versionadded:: 1.0.0\n        .. versionchanged:: 3.0.0b7\n            This method returns the deserialized data rather than a ``(data, errors)`` duple.\n            A :exc:`ValidationError <marshmallow.exceptions.ValidationError>` is raised\n            if invalid data are passed.\n        \"\"\"\n        return self._do_load(\n            data, many=many, partial=partial, unknown=unknown, postprocess=True\n        )\n", "tokens": ["src", "marshmallow", "schema", "py", "baseschema", "def", "load", "self", "data", "many", "none", "partial", "none", "unknown", "none", "deserialize", "a", "data", "structure", "to", "an", "object", "defined", "by", "this", "schema", "s", "fields", "param", "dict", "data", "the", "data", "to", "deserialize", "param", "bool", "many", "whether", "to", "deserialize", "data", "as", "a", "collection", "if", "none", "the", "value", "for", "self", "many", "is", "used", "param", "bool", "tuple", "partial", "whether", "to", "ignore", "missing", "fields", "and", "not", "require", "any", "fields", "declared", "propagates", "down", "to", "nested", "fields", "as", "well", "if", "its", "value", "is", "an", "iterable", "only", "missing", "fields", "listed", "in", "that", "iterable", "will", "be", "ignored", "use", "dot", "delimiters", "to", "specify", "nested", "fields", "param", "unknown", "whether", "to", "exclude", "include", "or", "raise", "an", "error", "for", "unknown", "fields", "in", "the", "data", "use", "exclude", "include", "or", "raise", "if", "none", "the", "value", "for", "self", "unknown", "is", "used", "return", "a", "dict", "of", "deserialized", "data", "rtype", "dict", "versionadded", "1", "0", "0", "versionchanged", "3", "0", "0b7", "this", "method", "returns", "the", "deserialized", "data", "rather", "than", "a", "data", "errors", "duple", "a", "exc", "validationerror", "marshmallow", "exceptions", "validationerror", "is", "raised", "if", "invalid", "data", "are", "passed", "return", "self", "_do_load", "data", "many", "many", "partial", "partial", "unknown", "unknown", "postprocess", "true"], "doc_len": 182}
{"doc_id": "src/marshmallow/schema.py::BaseSchema.loads", "file_path": "src/marshmallow/schema.py", "class_name": "BaseSchema", "func_name": "loads", "text": "文件路径: src/marshmallow/schema.py, 类名: BaseSchema\n    def loads(self, json_data, *, many=None, partial=None, unknown=None, **kwargs):\n        \"\"\"Same as :meth:`load`, except it takes a JSON string as input.\n\n        :param str json_data: A JSON string of the data to deserialize.\n        :param bool many: Whether to deserialize `obj` as a collection. If `None`, the\n            value for `self.many` is used.\n        :param bool|tuple partial: Whether to ignore missing fields and not require\n            any fields declared. Propagates down to ``Nested`` fields as well. If\n            its value is an iterable, only missing fields listed in that iterable\n            will be ignored. Use dot delimiters to specify nested fields.\n        :param unknown: Whether to exclude, include, or raise an error for unknown\n            fields in the data. Use `EXCLUDE`, `INCLUDE` or `RAISE`.\n            If `None`, the value for `self.unknown` is used.\n        :return: A dict of deserialized data\n        :rtype: dict\n\n        .. versionadded:: 1.0.0\n        .. versionchanged:: 3.0.0b7\n            This method returns the deserialized data rather than a ``(data, errors)`` duple.\n            A :exc:`ValidationError <marshmallow.exceptions.ValidationError>` is raised\n            if invalid data are passed.\n        \"\"\"\n        data = self.opts.render_module.loads(json_data, **kwargs)\n        return self.load(data, many=many, partial=partial, unknown=unknown)\n", "tokens": ["src", "marshmallow", "schema", "py", "baseschema", "def", "loads", "self", "json_data", "many", "none", "partial", "none", "unknown", "none", "kwargs", "same", "as", "meth", "load", "except", "it", "takes", "a", "json", "string", "as", "input", "param", "str", "json_data", "a", "json", "string", "of", "the", "data", "to", "deserialize", "param", "bool", "many", "whether", "to", "deserialize", "obj", "as", "a", "collection", "if", "none", "the", "value", "for", "self", "many", "is", "used", "param", "bool", "tuple", "partial", "whether", "to", "ignore", "missing", "fields", "and", "not", "require", "any", "fields", "declared", "propagates", "down", "to", "nested", "fields", "as", "well", "if", "its", "value", "is", "an", "iterable", "only", "missing", "fields", "listed", "in", "that", "iterable", "will", "be", "ignored", "use", "dot", "delimiters", "to", "specify", "nested", "fields", "param", "unknown", "whether", "to", "exclude", "include", "or", "raise", "an", "error", "for", "unknown", "fields", "in", "the", "data", "use", "exclude", "include", "or", "raise", "if", "none", "the", "value", "for", "self", "unknown", "is", "used", "return", "a", "dict", "of", "deserialized", "data", "rtype", "dict", "versionadded", "1", "0", "0", "versionchanged", "3", "0", "0b7", "this", "method", "returns", "the", "deserialized", "data", "rather", "than", "a", "data", "errors", "duple", "a", "exc", "validationerror", "marshmallow", "exceptions", "validationerror", "is", "raised", "if", "invalid", "data", "are", "passed", "data", "self", "opts", "render_module", "loads", "json_data", "kwargs", "return", "self", "load", "data", "many", "many", "partial", "partial", "unknown", "unknown"], "doc_len": 191}
{"doc_id": "src/marshmallow/schema.py::BaseSchema._run_validator", "file_path": "src/marshmallow/schema.py", "class_name": "BaseSchema", "func_name": "_run_validator", "text": "文件路径: src/marshmallow/schema.py, 类名: BaseSchema\n    def _run_validator(\n        self,\n        validator_func,\n        output,\n        *,\n        original_data,\n        error_store,\n        many,\n        partial,\n        pass_original,\n        index=None\n    ):\n        try:\n            if pass_original:  # Pass original, raw data (before unmarshalling)\n                validator_func(output, original_data, partial=partial, many=many)\n            else:\n                validator_func(output, partial=partial, many=many)\n        except ValidationError as err:\n            error_store.store_error(err.messages, err.field_name, index=index)\n", "tokens": ["src", "marshmallow", "schema", "py", "baseschema", "def", "_run_validator", "self", "validator_func", "output", "original_data", "error_store", "many", "partial", "pass_original", "index", "none", "try", "if", "pass_original", "pass", "original", "raw", "data", "before", "unmarshalling", "validator_func", "output", "original_data", "partial", "partial", "many", "many", "else", "validator_func", "output", "partial", "partial", "many", "many", "except", "validationerror", "as", "err", "error_store", "store_error", "err", "messages", "err", "field_name", "index", "index"], "doc_len": 52}
{"doc_id": "src/marshmallow/schema.py::BaseSchema.validate", "file_path": "src/marshmallow/schema.py", "class_name": "BaseSchema", "func_name": "validate", "text": "文件路径: src/marshmallow/schema.py, 类名: BaseSchema\n    def validate(self, data, *, many=None, partial=None):\n        \"\"\"Validate `data` against the schema, returning a dictionary of\n        validation errors.\n\n        :param dict data: The data to validate.\n        :param bool many: Whether to validate `data` as a collection. If `None`, the\n            value for `self.many` is used.\n        :param bool|tuple partial: Whether to ignore missing fields and not require\n            any fields declared. Propagates down to ``Nested`` fields as well. If\n            its value is an iterable, only missing fields listed in that iterable\n            will be ignored. Use dot delimiters to specify nested fields.\n        :return: A dictionary of validation errors.\n        :rtype: dict\n\n        .. versionadded:: 1.1.0\n        \"\"\"\n        try:\n            self._do_load(data, many=many, partial=partial, postprocess=False)\n        except ValidationError as exc:\n            return exc.messages\n        return {}\n", "tokens": ["src", "marshmallow", "schema", "py", "baseschema", "def", "validate", "self", "data", "many", "none", "partial", "none", "validate", "data", "against", "the", "schema", "returning", "a", "dictionary", "of", "validation", "errors", "param", "dict", "data", "the", "data", "to", "validate", "param", "bool", "many", "whether", "to", "validate", "data", "as", "a", "collection", "if", "none", "the", "value", "for", "self", "many", "is", "used", "param", "bool", "tuple", "partial", "whether", "to", "ignore", "missing", "fields", "and", "not", "require", "any", "fields", "declared", "propagates", "down", "to", "nested", "fields", "as", "well", "if", "its", "value", "is", "an", "iterable", "only", "missing", "fields", "listed", "in", "that", "iterable", "will", "be", "ignored", "use", "dot", "delimiters", "to", "specify", "nested", "fields", "return", "a", "dictionary", "of", "validation", "errors", "rtype", "dict", "versionadded", "1", "1", "0", "try", "self", "_do_load", "data", "many", "many", "partial", "partial", "postprocess", "false", "except", "validationerror", "as", "exc", "return", "exc", "messages", "return"], "doc_len": 125}
{"doc_id": "src/marshmallow/schema.py::BaseSchema._do_load", "file_path": "src/marshmallow/schema.py", "class_name": "BaseSchema", "func_name": "_do_load", "text": "文件路径: src/marshmallow/schema.py, 类名: BaseSchema\n    def _do_load(\n        self, data, *, many=None, partial=None, unknown=None, postprocess=True\n    ):\n        \"\"\"Deserialize `data`, returning the deserialized result.\n\n        :param data: The data to deserialize.\n        :param bool many: Whether to deserialize `data` as a collection. If `None`, the\n            value for `self.many` is used.\n        :param bool|tuple partial: Whether to validate required fields. If its\n            value is an iterable, only fields listed in that iterable will be\n            ignored will be allowed missing. If `True`, all fields will be allowed missing.\n            If `None`, the value for `self.partial` is used.\n        :param unknown: Whether to exclude, include, or raise an error for unknown\n            fields in the data. Use `EXCLUDE`, `INCLUDE` or `RAISE`.\n            If `None`, the value for `self.unknown` is used.\n        :param bool postprocess: Whether to run post_load methods..\n        :return: A dict of deserialized data\n        :rtype: dict\n        \"\"\"\n        error_store = ErrorStore()\n        errors = {}\n        many = self.many if many is None else bool(many)\n        unknown = unknown or self.unknown\n        if partial is None:\n            partial = self.partial\n        # Run preprocessors\n        if self._has_processors(PRE_LOAD):\n            try:\n                processed_data = self._invoke_load_processors(\n                    PRE_LOAD, data, many=many, original_data=data, partial=partial\n                )\n            except ValidationError as err:\n                errors = err.normalized_messages()\n                result = None\n        else:\n            processed_data = data\n        if not errors:\n            # Deserialize data\n            result = self._deserialize(\n                processed_data,\n                error_store=error_store,\n                many=many,\n                partial=partial,\n                unknown=unknown,\n            )\n            # Run field-level validation\n            self._invoke_field_validators(\n                error_store=error_store, data=result, many=many\n            )\n            # Run schema-level validation\n            if self._has_processors(VALIDATES_SCHEMA):\n                field_errors = bool(error_store.errors)\n                self._invoke_schema_validators(\n                    error_store=error_store,\n                    pass_many=True,\n                    data=result,\n                    original_data=data,\n                    many=many,\n                    partial=partial,\n                    field_errors=field_errors,\n                )\n                self._invoke_schema_validators(\n                    error_store=error_store,\n                    pass_many=False,\n                    data=result,\n                    original_data=data,\n                    many=many,\n                    partial=partial,\n                    field_errors=field_errors,\n                )\n            errors = error_store.errors\n            # Run post processors\n            if not errors and postprocess and self._has_processors(POST_LOAD):\n                try:\n                    result = self._invoke_load_processors(\n                        POST_LOAD,\n                        result,\n                        many=many,\n                        original_data=data,\n                        partial=partial,\n                    )\n                except ValidationError as err:\n                    errors = err.normalized_messages()\n        if errors:\n            exc = ValidationError(errors, data=data, valid_data=result)\n            self.handle_error(exc, data, many=many, partial=partial)\n            raise exc\n\n        return result\n", "tokens": ["src", "marshmallow", "schema", "py", "baseschema", "def", "_do_load", "self", "data", "many", "none", "partial", "none", "unknown", "none", "postprocess", "true", "deserialize", "data", "returning", "the", "deserialized", "result", "param", "data", "the", "data", "to", "deserialize", "param", "bool", "many", "whether", "to", "deserialize", "data", "as", "a", "collection", "if", "none", "the", "value", "for", "self", "many", "is", "used", "param", "bool", "tuple", "partial", "whether", "to", "validate", "required", "fields", "if", "its", "value", "is", "an", "iterable", "only", "fields", "listed", "in", "that", "iterable", "will", "be", "ignored", "will", "be", "allowed", "missing", "if", "true", "all", "fields", "will", "be", "allowed", "missing", "if", "none", "the", "value", "for", "self", "partial", "is", "used", "param", "unknown", "whether", "to", "exclude", "include", "or", "raise", "an", "error", "for", "unknown", "fields", "in", "the", "data", "use", "exclude", "include", "or", "raise", "if", "none", "the", "value", "for", "self", "unknown", "is", "used", "param", "bool", "postprocess", "whether", "to", "run", "post_load", "methods", "return", "a", "dict", "of", "deserialized", "data", "rtype", "dict", "error_store", "errorstore", "errors", "many", "self", "many", "if", "many", "is", "none", "else", "bool", "many", "unknown", "unknown", "or", "self", "unknown", "if", "partial", "is", "none", "partial", "self", "partial", "run", "preprocessors", "if", "self", "_has_processors", "pre_load", "try", "processed_data", "self", "_invoke_load_processors", "pre_load", "data", "many", "many", "original_data", "data", "partial", "partial", "except", "validationerror", "as", "err", "errors", "err", "normalized_messages", "result", "none", "else", "processed_data", "data", "if", "not", "errors", "deserialize", "data", "result", "self", "_deserialize", "processed_data", "error_store", "error_store", "many", "many", "partial", "partial", "unknown", "unknown", "run", "field", "level", "validation", "self", "_invoke_field_validators", "error_store", "error_store", "data", "result", "many", "many", "run", "schema", "level", "validation", "if", "self", "_has_processors", "validates_schema", "field_errors", "bool", "error_store", "errors", "self", "_invoke_schema_validators", "error_store", "error_store", "pass_many", "true", "data", "result", "original_data", "data", "many", "many", "partial", "partial", "field_errors", "field_errors", "self", "_invoke_schema_validators", "error_store", "error_store", "pass_many", "false", "data", "result", "original_data", "data", "many", "many", "partial", "partial", "field_errors", "field_errors", "errors", "error_store", "errors", "run", "post", "processors", "if", "not", "errors", "and", "postprocess", "and", "self", "_has_processors", "post_load", "try", "result", "self", "_invoke_load_processors", "post_load", "result", "many", "many", "original_data", "data", "partial", "partial", "except", "validationerror", "as", "err", "errors", "err", "normalized_messages", "if", "errors", "exc", "validationerror", "errors", "data", "data", "valid_data", "result", "self", "handle_error", "exc", "data", "many", "many", "partial", "partial", "raise", "exc", "return", "result"], "doc_len": 322}
{"doc_id": "src/marshmallow/schema.py::BaseSchema._normalize_nested_options", "file_path": "src/marshmallow/schema.py", "class_name": "BaseSchema", "func_name": "_normalize_nested_options", "text": "文件路径: src/marshmallow/schema.py, 类名: BaseSchema\n    def _normalize_nested_options(self):\n        \"\"\"Apply then flatten nested schema options\"\"\"\n        if self.only is not None:\n            # Apply the only option to nested fields.\n            self.__apply_nested_option(\"only\", self.only, \"intersection\")\n            # Remove the child field names from the only option.\n            self.only = self.set_class([field.split(\".\", 1)[0] for field in self.only])\n        if self.exclude:\n            # Apply the exclude option to nested fields.\n            self.__apply_nested_option(\"exclude\", self.exclude, \"union\")\n            # Remove the parent field names from the exclude option.\n            self.exclude = self.set_class(\n                [field for field in self.exclude if \".\" not in field]\n            )\n", "tokens": ["src", "marshmallow", "schema", "py", "baseschema", "def", "_normalize_nested_options", "self", "apply", "then", "flatten", "nested", "schema", "options", "if", "self", "only", "is", "not", "none", "apply", "the", "only", "option", "to", "nested", "fields", "self", "__apply_nested_option", "only", "self", "only", "intersection", "remove", "the", "child", "field", "names", "from", "the", "only", "option", "self", "only", "self", "set_class", "field", "split", "1", "0", "for", "field", "in", "self", "only", "if", "self", "exclude", "apply", "the", "exclude", "option", "to", "nested", "fields", "self", "__apply_nested_option", "exclude", "self", "exclude", "union", "remove", "the", "parent", "field", "names", "from", "the", "exclude", "option", "self", "exclude", "self", "set_class", "field", "for", "field", "in", "self", "exclude", "if", "not", "in", "field"], "doc_len": 94}
{"doc_id": "src/marshmallow/schema.py::BaseSchema.__apply_nested_option", "file_path": "src/marshmallow/schema.py", "class_name": "BaseSchema", "func_name": "__apply_nested_option", "text": "文件路径: src/marshmallow/schema.py, 类名: BaseSchema\n    def __apply_nested_option(self, option_name, field_names, set_operation):\n        \"\"\"Apply nested options to nested fields\"\"\"\n        # Split nested field names on the first dot.\n        nested_fields = [name.split(\".\", 1) for name in field_names if \".\" in name]\n        # Partition the nested field names by parent field.\n        nested_options = defaultdict(list)\n        for parent, nested_names in nested_fields:\n            nested_options[parent].append(nested_names)\n        # Apply the nested field options.\n        for key, options in iter(nested_options.items()):\n            new_options = self.set_class(options)\n            original_options = getattr(self.declared_fields[key], option_name, ())\n            if original_options:\n                if set_operation == \"union\":\n                    new_options |= self.set_class(original_options)\n                if set_operation == \"intersection\":\n                    new_options &= self.set_class(original_options)\n            setattr(self.declared_fields[key], option_name, new_options)\n", "tokens": ["src", "marshmallow", "schema", "py", "baseschema", "def", "__apply_nested_option", "self", "option_name", "field_names", "set_operation", "apply", "nested", "options", "to", "nested", "fields", "split", "nested", "field", "names", "on", "the", "first", "dot", "nested_fields", "name", "split", "1", "for", "name", "in", "field_names", "if", "in", "name", "partition", "the", "nested", "field", "names", "by", "parent", "field", "nested_options", "defaultdict", "list", "for", "parent", "nested_names", "in", "nested_fields", "nested_options", "parent", "append", "nested_names", "apply", "the", "nested", "field", "options", "for", "key", "options", "in", "iter", "nested_options", "items", "new_options", "self", "set_class", "options", "original_options", "getattr", "self", "declared_fields", "key", "option_name", "if", "original_options", "if", "set_operation", "union", "new_options", "self", "set_class", "original_options", "if", "set_operation", "intersection", "new_options", "self", "set_class", "original_options", "setattr", "self", "declared_fields", "key", "option_name", "new_options"], "doc_len": 100}
{"doc_id": "src/marshmallow/schema.py::BaseSchema._init_fields", "file_path": "src/marshmallow/schema.py", "class_name": "BaseSchema", "func_name": "_init_fields", "text": "文件路径: src/marshmallow/schema.py, 类名: BaseSchema\n    def _init_fields(self):\n        \"\"\"Update fields based on schema options.\"\"\"\n        if self.opts.fields:\n            available_field_names = self.set_class(self.opts.fields)\n        else:\n            available_field_names = self.set_class(self.declared_fields.keys())\n            if self.opts.additional:\n                available_field_names |= self.set_class(self.opts.additional)\n\n        invalid_fields = self.set_class()\n\n        if self.only is not None:\n            # Return only fields specified in only option\n            field_names = self.set_class(self.only)\n\n            invalid_fields |= field_names - available_field_names\n        else:\n            field_names = available_field_names\n\n        # If \"exclude\" option or param is specified, remove those fields.\n        if self.exclude:\n            # Note that this isn't available_field_names, since we want to\n            # apply \"only\" for the actual calculation.\n            field_names = field_names - self.exclude\n            invalid_fields |= self.exclude - available_field_names\n\n        if invalid_fields:\n            message = \"Invalid fields for {}: {}.\".format(self, invalid_fields)\n            raise ValueError(message)\n\n        fields_dict = self.dict_class()\n        for field_name in field_names:\n            field_obj = self.declared_fields.get(field_name, ma_fields.Inferred())\n            self._bind_field(field_name, field_obj)\n            fields_dict[field_name] = field_obj\n\n        dump_data_keys = [\n            obj.data_key or name\n            for name, obj in fields_dict.items()\n            if not obj.load_only\n        ]\n        if len(dump_data_keys) != len(set(dump_data_keys)):\n            data_keys_duplicates = {\n                x for x in dump_data_keys if dump_data_keys.count(x) > 1\n            }\n            raise ValueError(\n                \"The data_key argument for one or more fields collides \"\n                \"with another field's name or data_key argument. \"\n                \"Check the following field names and \"\n                \"data_key arguments: {}\".format(list(data_keys_duplicates))\n            )\n\n        load_attributes = [\n            obj.attribute or name\n            for name, obj in fields_dict.items()\n            if not obj.dump_only\n        ]\n        if len(load_attributes) != len(set(load_attributes)):\n            attributes_duplicates = {\n                x for x in load_attributes if load_attributes.count(x) > 1\n            }\n            raise ValueError(\n                \"The attribute argument for one or more fields collides \"\n                \"with another field's name or attribute argument. \"\n                \"Check the following field names and \"\n                \"attribute arguments: {}\".format(list(attributes_duplicates))\n            )\n\n        return fields_dict\n", "tokens": ["src", "marshmallow", "schema", "py", "baseschema", "def", "_init_fields", "self", "update", "fields", "based", "on", "schema", "options", "if", "self", "opts", "fields", "available_field_names", "self", "set_class", "self", "opts", "fields", "else", "available_field_names", "self", "set_class", "self", "declared_fields", "keys", "if", "self", "opts", "additional", "available_field_names", "self", "set_class", "self", "opts", "additional", "invalid_fields", "self", "set_class", "if", "self", "only", "is", "not", "none", "return", "only", "fields", "specified", "in", "only", "option", "field_names", "self", "set_class", "self", "only", "invalid_fields", "field_names", "available_field_names", "else", "field_names", "available_field_names", "if", "exclude", "option", "or", "param", "is", "specified", "remove", "those", "fields", "if", "self", "exclude", "note", "that", "this", "isn", "t", "available_field_names", "since", "we", "want", "to", "apply", "only", "for", "the", "actual", "calculation", "field_names", "field_names", "self", "exclude", "invalid_fields", "self", "exclude", "available_field_names", "if", "invalid_fields", "message", "invalid", "fields", "for", "format", "self", "invalid_fields", "raise", "valueerror", "message", "fields_dict", "self", "dict_class", "for", "field_name", "in", "field_names", "field_obj", "self", "declared_fields", "get", "field_name", "ma_fields", "inferred", "self", "_bind_field", "field_name", "field_obj", "fields_dict", "field_name", "field_obj", "dump_data_keys", "obj", "data_key", "or", "name", "for", "name", "obj", "in", "fields_dict", "items", "if", "not", "obj", "load_only", "if", "len", "dump_data_keys", "len", "set", "dump_data_keys", "data_keys_duplicates", "x", "for", "x", "in", "dump_data_keys", "if", "dump_data_keys", "count", "x", "1", "raise", "valueerror", "the", "data_key", "argument", "for", "one", "or", "more", "fields", "collides", "with", "another", "field", "s", "name", "or", "data_key", "argument", "check", "the", "following", "field", "names", "and", "data_key", "arguments", "format", "list", "data_keys_duplicates", "load_attributes", "obj", "attribute", "or", "name", "for", "name", "obj", "in", "fields_dict", "items", "if", "not", "obj", "dump_only", "if", "len", "load_attributes", "len", "set", "load_attributes", "attributes_duplicates", "x", "for", "x", "in", "load_attributes", "if", "load_attributes", "count", "x", "1", "raise", "valueerror", "the", "attribute", "argument", "for", "one", "or", "more", "fields", "collides", "with", "another", "field", "s", "name", "or", "attribute", "argument", "check", "the", "following", "field", "names", "and", "attribute", "arguments", "format", "list", "attributes_duplicates", "return", "fields_dict"], "doc_len": 264}
{"doc_id": "src/marshmallow/schema.py::BaseSchema.on_bind_field", "file_path": "src/marshmallow/schema.py", "class_name": "BaseSchema", "func_name": "on_bind_field", "text": "文件路径: src/marshmallow/schema.py, 类名: BaseSchema\n    def on_bind_field(self, field_name, field_obj):\n        \"\"\"Hook to modify a field when it is bound to the `Schema`.\n\n        No-op by default.\n        \"\"\"\n        return None\n", "tokens": ["src", "marshmallow", "schema", "py", "baseschema", "def", "on_bind_field", "self", "field_name", "field_obj", "hook", "to", "modify", "a", "field", "when", "it", "is", "bound", "to", "the", "schema", "no", "op", "by", "default", "return", "none"], "doc_len": 28}
{"doc_id": "src/marshmallow/schema.py::BaseSchema._bind_field", "file_path": "src/marshmallow/schema.py", "class_name": "BaseSchema", "func_name": "_bind_field", "text": "文件路径: src/marshmallow/schema.py, 类名: BaseSchema\n    def _bind_field(self, field_name, field_obj):\n        \"\"\"Bind field to the schema, setting any necessary attributes on the\n        field (e.g. parent and name).\n\n        Also set field load_only and dump_only values if field_name was\n        specified in ``class Meta``.\n        \"\"\"\n        try:\n            if field_name in self.load_only:\n                field_obj.load_only = True\n            if field_name in self.dump_only:\n                field_obj.dump_only = True\n            field_obj._bind_to_schema(field_name, self)\n            self.on_bind_field(field_name, field_obj)\n        except TypeError as error:\n            # field declared as a class, not an instance\n            if isinstance(field_obj, type) and issubclass(field_obj, base.FieldABC):\n                msg = (\n                    'Field for \"{}\" must be declared as a '\n                    \"Field instance, not a class. \"\n                    'Did you mean \"fields.{}()\"?'.format(field_name, field_obj.__name__)\n                )\n                raise TypeError(msg) from error\n", "tokens": ["src", "marshmallow", "schema", "py", "baseschema", "def", "_bind_field", "self", "field_name", "field_obj", "bind", "field", "to", "the", "schema", "setting", "any", "necessary", "attributes", "on", "the", "field", "e", "g", "parent", "and", "name", "also", "set", "field", "load_only", "and", "dump_only", "values", "if", "field_name", "was", "specified", "in", "class", "meta", "try", "if", "field_name", "in", "self", "load_only", "field_obj", "load_only", "true", "if", "field_name", "in", "self", "dump_only", "field_obj", "dump_only", "true", "field_obj", "_bind_to_schema", "field_name", "self", "self", "on_bind_field", "field_name", "field_obj", "except", "typeerror", "as", "error", "field", "declared", "as", "a", "class", "not", "an", "instance", "if", "isinstance", "field_obj", "type", "and", "issubclass", "field_obj", "base", "fieldabc", "msg", "field", "for", "must", "be", "declared", "as", "a", "field", "instance", "not", "a", "class", "did", "you", "mean", "fields", "format", "field_name", "field_obj", "__name__", "raise", "typeerror", "msg", "from", "error"], "doc_len": 113}
{"doc_id": "src/marshmallow/schema.py::BaseSchema._has_processors", "file_path": "src/marshmallow/schema.py", "class_name": "BaseSchema", "func_name": "_has_processors", "text": "文件路径: src/marshmallow/schema.py, 类名: BaseSchema\n    def _has_processors(self, tag):\n        return self._hooks[(tag, True)] or self._hooks[(tag, False)]\n", "tokens": ["src", "marshmallow", "schema", "py", "baseschema", "def", "_has_processors", "self", "tag", "return", "self", "_hooks", "tag", "true", "or", "self", "_hooks", "tag", "false"], "doc_len": 19}
{"doc_id": "src/marshmallow/schema.py::BaseSchema._invoke_dump_processors", "file_path": "src/marshmallow/schema.py", "class_name": "BaseSchema", "func_name": "_invoke_dump_processors", "text": "文件路径: src/marshmallow/schema.py, 类名: BaseSchema\n    def _invoke_dump_processors(self, tag, data, *, many, original_data=None):\n        # The pass_many post-dump processors may do things like add an envelope, so\n        # invoke those after invoking the non-pass_many processors which will expect\n        # to get a list of items.\n        data = self._invoke_processors(\n            tag, pass_many=False, data=data, many=many, original_data=original_data\n        )\n        data = self._invoke_processors(\n            tag, pass_many=True, data=data, many=many, original_data=original_data\n        )\n        return data\n", "tokens": ["src", "marshmallow", "schema", "py", "baseschema", "def", "_invoke_dump_processors", "self", "tag", "data", "many", "original_data", "none", "the", "pass_many", "post", "dump", "processors", "may", "do", "things", "like", "add", "an", "envelope", "so", "invoke", "those", "after", "invoking", "the", "non", "pass_many", "processors", "which", "will", "expect", "to", "get", "a", "list", "of", "items", "data", "self", "_invoke_processors", "tag", "pass_many", "false", "data", "data", "many", "many", "original_data", "original_data", "data", "self", "_invoke_processors", "tag", "pass_many", "true", "data", "data", "many", "many", "original_data", "original_data", "return", "data"], "doc_len": 69}
{"doc_id": "src/marshmallow/schema.py::BaseSchema._invoke_load_processors", "file_path": "src/marshmallow/schema.py", "class_name": "BaseSchema", "func_name": "_invoke_load_processors", "text": "文件路径: src/marshmallow/schema.py, 类名: BaseSchema\n    def _invoke_load_processors(self, tag, data, *, many, original_data, partial):\n        # This has to invert the order of the dump processors, so run the pass_many\n        # processors first.\n        data = self._invoke_processors(\n            tag,\n            pass_many=True,\n            data=data,\n            many=many,\n            original_data=original_data,\n            partial=partial,\n        )\n        data = self._invoke_processors(\n            tag,\n            pass_many=False,\n            data=data,\n            many=many,\n            original_data=original_data,\n            partial=partial,\n        )\n        return data\n", "tokens": ["src", "marshmallow", "schema", "py", "baseschema", "def", "_invoke_load_processors", "self", "tag", "data", "many", "original_data", "partial", "this", "has", "to", "invert", "the", "order", "of", "the", "dump", "processors", "so", "run", "the", "pass_many", "processors", "first", "data", "self", "_invoke_processors", "tag", "pass_many", "true", "data", "data", "many", "many", "original_data", "original_data", "partial", "partial", "data", "self", "_invoke_processors", "tag", "pass_many", "false", "data", "data", "many", "many", "original_data", "original_data", "partial", "partial", "return", "data"], "doc_len": 59}
{"doc_id": "src/marshmallow/schema.py::BaseSchema._invoke_field_validators", "file_path": "src/marshmallow/schema.py", "class_name": "BaseSchema", "func_name": "_invoke_field_validators", "text": "文件路径: src/marshmallow/schema.py, 类名: BaseSchema\n    def _invoke_field_validators(self, *, error_store, data, many):\n        for attr_name in self._hooks[VALIDATES]:\n            validator = getattr(self, attr_name)\n            validator_kwargs = validator.__marshmallow_hook__[VALIDATES]\n            field_name = validator_kwargs[\"field_name\"]\n\n            try:\n                field_obj = self.fields[field_name]\n            except KeyError as error:\n                if field_name in self.declared_fields:\n                    continue\n                raise ValueError(\n                    '\"{}\" field does not exist.'.format(field_name)\n                ) from error\n\n            if many:\n                for idx, item in enumerate(data):\n                    try:\n                        value = item[field_obj.attribute or field_name]\n                    except KeyError:\n                        pass\n                    else:\n                        validated_value = self._call_and_store(\n                            getter_func=validator,\n                            data=value,\n                            field_name=field_obj.data_key or field_name,\n                            error_store=error_store,\n                            index=(idx if self.opts.index_errors else None),\n                        )\n                        if validated_value is missing:\n                            data[idx].pop(field_name, None)\n            else:\n                try:\n                    value = data[field_obj.attribute or field_name]\n                except KeyError:\n                    pass\n                else:\n                    validated_value = self._call_and_store(\n                        getter_func=validator,\n                        data=value,\n                        field_name=field_obj.data_key or field_name,\n                        error_store=error_store,\n                    )\n                    if validated_value is missing:\n                        data.pop(field_name, None)\n", "tokens": ["src", "marshmallow", "schema", "py", "baseschema", "def", "_invoke_field_validators", "self", "error_store", "data", "many", "for", "attr_name", "in", "self", "_hooks", "validates", "validator", "getattr", "self", "attr_name", "validator_kwargs", "validator", "__marshmallow_hook__", "validates", "field_name", "validator_kwargs", "field_name", "try", "field_obj", "self", "fields", "field_name", "except", "keyerror", "as", "error", "if", "field_name", "in", "self", "declared_fields", "continue", "raise", "valueerror", "field", "does", "not", "exist", "format", "field_name", "from", "error", "if", "many", "for", "idx", "item", "in", "enumerate", "data", "try", "value", "item", "field_obj", "attribute", "or", "field_name", "except", "keyerror", "pass", "else", "validated_value", "self", "_call_and_store", "getter_func", "validator", "data", "value", "field_name", "field_obj", "data_key", "or", "field_name", "error_store", "error_store", "index", "idx", "if", "self", "opts", "index_errors", "else", "none", "if", "validated_value", "is", "missing", "data", "idx", "pop", "field_name", "none", "else", "try", "value", "data", "field_obj", "attribute", "or", "field_name", "except", "keyerror", "pass", "else", "validated_value", "self", "_call_and_store", "getter_func", "validator", "data", "value", "field_name", "field_obj", "data_key", "or", "field_name", "error_store", "error_store", "if", "validated_value", "is", "missing", "data", "pop", "field_name", "none"], "doc_len": 137}
{"doc_id": "src/marshmallow/schema.py::BaseSchema._invoke_schema_validators", "file_path": "src/marshmallow/schema.py", "class_name": "BaseSchema", "func_name": "_invoke_schema_validators", "text": "文件路径: src/marshmallow/schema.py, 类名: BaseSchema\n    def _invoke_schema_validators(\n        self,\n        *,\n        error_store,\n        pass_many,\n        data,\n        original_data,\n        many,\n        partial,\n        field_errors=False\n    ):\n        for attr_name in self._hooks[(VALIDATES_SCHEMA, pass_many)]:\n            validator = getattr(self, attr_name)\n            validator_kwargs = validator.__marshmallow_hook__[\n                (VALIDATES_SCHEMA, pass_many)\n            ]\n            if field_errors and validator_kwargs[\"skip_on_field_errors\"]:\n                continue\n            pass_original = validator_kwargs.get(\"pass_original\", False)\n\n            if many and not pass_many:\n                for idx, (item, orig) in enumerate(zip(data, original_data)):\n                    self._run_validator(\n                        validator,\n                        item,\n                        original_data=orig,\n                        error_store=error_store,\n                        many=many,\n                        partial=partial,\n                        index=idx,\n                        pass_original=pass_original,\n                    )\n            else:\n                self._run_validator(\n                    validator,\n                    data,\n                    original_data=original_data,\n                    error_store=error_store,\n                    many=many,\n                    pass_original=pass_original,\n                    partial=partial,\n                )\n", "tokens": ["src", "marshmallow", "schema", "py", "baseschema", "def", "_invoke_schema_validators", "self", "error_store", "pass_many", "data", "original_data", "many", "partial", "field_errors", "false", "for", "attr_name", "in", "self", "_hooks", "validates_schema", "pass_many", "validator", "getattr", "self", "attr_name", "validator_kwargs", "validator", "__marshmallow_hook__", "validates_schema", "pass_many", "if", "field_errors", "and", "validator_kwargs", "skip_on_field_errors", "continue", "pass_original", "validator_kwargs", "get", "pass_original", "false", "if", "many", "and", "not", "pass_many", "for", "idx", "item", "orig", "in", "enumerate", "zip", "data", "original_data", "self", "_run_validator", "validator", "item", "original_data", "orig", "error_store", "error_store", "many", "many", "partial", "partial", "index", "idx", "pass_original", "pass_original", "else", "self", "_run_validator", "validator", "data", "original_data", "original_data", "error_store", "error_store", "many", "many", "pass_original", "pass_original", "partial", "partial"], "doc_len": 88}
{"doc_id": "src/marshmallow/schema.py::BaseSchema._invoke_processors", "file_path": "src/marshmallow/schema.py", "class_name": "BaseSchema", "func_name": "_invoke_processors", "text": "文件路径: src/marshmallow/schema.py, 类名: BaseSchema\n    def _invoke_processors(\n        self, tag, *, pass_many, data, many, original_data=None, **kwargs\n    ):\n        key = (tag, pass_many)\n        for attr_name in self._hooks[key]:\n            # This will be a bound method.\n            processor = getattr(self, attr_name)\n\n            processor_kwargs = processor.__marshmallow_hook__[key]\n            pass_original = processor_kwargs.get(\"pass_original\", False)\n\n            if pass_many:\n                if pass_original:\n                    data = processor(data, original_data, many=many, **kwargs)\n                else:\n                    data = processor(data, many=many, **kwargs)\n            elif many:\n                if pass_original:\n                    data = [\n                        processor(item, original, many=many, **kwargs)\n                        for item, original in zip(data, original_data)\n                    ]\n                else:\n                    data = [processor(item, many=many, **kwargs) for item in data]\n            else:\n                if pass_original:\n                    data = processor(data, original_data, many=many, **kwargs)\n                else:\n                    data = processor(data, many=many, **kwargs)\n        return data\n", "tokens": ["src", "marshmallow", "schema", "py", "baseschema", "def", "_invoke_processors", "self", "tag", "pass_many", "data", "many", "original_data", "none", "kwargs", "key", "tag", "pass_many", "for", "attr_name", "in", "self", "_hooks", "key", "this", "will", "be", "a", "bound", "method", "processor", "getattr", "self", "attr_name", "processor_kwargs", "processor", "__marshmallow_hook__", "key", "pass_original", "processor_kwargs", "get", "pass_original", "false", "if", "pass_many", "if", "pass_original", "data", "processor", "data", "original_data", "many", "many", "kwargs", "else", "data", "processor", "data", "many", "many", "kwargs", "elif", "many", "if", "pass_original", "data", "processor", "item", "original", "many", "many", "kwargs", "for", "item", "original", "in", "zip", "data", "original_data", "else", "data", "processor", "item", "many", "many", "kwargs", "for", "item", "in", "data", "else", "if", "pass_original", "data", "processor", "data", "original_data", "many", "many", "kwargs", "else", "data", "processor", "data", "many", "many", "kwargs", "return", "data"], "doc_len": 109}
{"doc_id": "src/marshmallow/utils.py::_Missing.__bool__", "file_path": "src/marshmallow/utils.py", "class_name": "_Missing", "func_name": "__bool__", "text": "文件路径: src/marshmallow/utils.py, 类名: _Missing\n    def __bool__(self):\n        return False\n", "tokens": ["src", "marshmallow", "utils", "py", "_missing", "def", "__bool__", "self", "return", "false"], "doc_len": 10}
{"doc_id": "src/marshmallow/utils.py::_Missing.__copy__", "file_path": "src/marshmallow/utils.py", "class_name": "_Missing", "func_name": "__copy__", "text": "文件路径: src/marshmallow/utils.py, 类名: _Missing\n    def __copy__(self):\n        return self\n", "tokens": ["src", "marshmallow", "utils", "py", "_missing", "def", "__copy__", "self", "return", "self"], "doc_len": 10}
{"doc_id": "src/marshmallow/utils.py::_Missing.__deepcopy__", "file_path": "src/marshmallow/utils.py", "class_name": "_Missing", "func_name": "__deepcopy__", "text": "文件路径: src/marshmallow/utils.py, 类名: _Missing\n    def __deepcopy__(self, _):\n        return self\n", "tokens": ["src", "marshmallow", "utils", "py", "_missing", "def", "__deepcopy__", "self", "_", "return", "self"], "doc_len": 11}
{"doc_id": "src/marshmallow/utils.py::_Missing.__repr__", "file_path": "src/marshmallow/utils.py", "class_name": "_Missing", "func_name": "__repr__", "text": "文件路径: src/marshmallow/utils.py, 类名: _Missing\n    def __repr__(self):\n        return \"<marshmallow.missing>\"\n", "tokens": ["src", "marshmallow", "utils", "py", "_missing", "def", "__repr__", "self", "return", "marshmallow", "missing"], "doc_len": 11}
{"doc_id": "src/marshmallow/utils.py::is_generator", "file_path": "src/marshmallow/utils.py", "class_name": null, "func_name": "is_generator", "text": "文件路径: src/marshmallow/utils.py\ndef is_generator(obj):\n    \"\"\"Return True if ``obj`` is a generator\n    \"\"\"\n    return inspect.isgeneratorfunction(obj) or inspect.isgenerator(obj)\n", "tokens": ["src", "marshmallow", "utils", "py", "def", "is_generator", "obj", "return", "true", "if", "obj", "is", "a", "generator", "return", "inspect", "isgeneratorfunction", "obj", "or", "inspect", "isgenerator", "obj"], "doc_len": 22}
{"doc_id": "src/marshmallow/utils.py::is_iterable_but_not_string", "file_path": "src/marshmallow/utils.py", "class_name": null, "func_name": "is_iterable_but_not_string", "text": "文件路径: src/marshmallow/utils.py\ndef is_iterable_but_not_string(obj):\n    \"\"\"Return True if ``obj`` is an iterable object that isn't a string.\"\"\"\n    return (hasattr(obj, \"__iter__\") and not hasattr(obj, \"strip\")) or is_generator(obj)\n", "tokens": ["src", "marshmallow", "utils", "py", "def", "is_iterable_but_not_string", "obj", "return", "true", "if", "obj", "is", "an", "iterable", "object", "that", "isn", "t", "a", "string", "return", "hasattr", "obj", "__iter__", "and", "not", "hasattr", "obj", "strip", "or", "is_generator", "obj"], "doc_len": 32}
{"doc_id": "src/marshmallow/utils.py::is_collection", "file_path": "src/marshmallow/utils.py", "class_name": null, "func_name": "is_collection", "text": "文件路径: src/marshmallow/utils.py\ndef is_collection(obj):\n    \"\"\"Return True if ``obj`` is a collection type, e.g list, tuple, queryset.\"\"\"\n    return is_iterable_but_not_string(obj) and not isinstance(obj, Mapping)\n", "tokens": ["src", "marshmallow", "utils", "py", "def", "is_collection", "obj", "return", "true", "if", "obj", "is", "a", "collection", "type", "e", "g", "list", "tuple", "queryset", "return", "is_iterable_but_not_string", "obj", "and", "not", "isinstance", "obj", "mapping"], "doc_len": 28}
{"doc_id": "src/marshmallow/utils.py::is_instance_or_subclass", "file_path": "src/marshmallow/utils.py", "class_name": null, "func_name": "is_instance_or_subclass", "text": "文件路径: src/marshmallow/utils.py\ndef is_instance_or_subclass(val, class_):\n    \"\"\"Return True if ``val`` is either a subclass or instance of ``class_``.\"\"\"\n    try:\n        return issubclass(val, class_)\n    except TypeError:\n        return isinstance(val, class_)\n", "tokens": ["src", "marshmallow", "utils", "py", "def", "is_instance_or_subclass", "val", "class_", "return", "true", "if", "val", "is", "either", "a", "subclass", "or", "instance", "of", "class_", "try", "return", "issubclass", "val", "class_", "except", "typeerror", "return", "isinstance", "val", "class_"], "doc_len": 31}
{"doc_id": "src/marshmallow/utils.py::is_keyed_tuple", "file_path": "src/marshmallow/utils.py", "class_name": null, "func_name": "is_keyed_tuple", "text": "文件路径: src/marshmallow/utils.py\ndef is_keyed_tuple(obj):\n    \"\"\"Return True if ``obj`` has keyed tuple behavior, such as\n    namedtuples or SQLAlchemy's KeyedTuples.\n    \"\"\"\n    return isinstance(obj, tuple) and hasattr(obj, \"_fields\")\n", "tokens": ["src", "marshmallow", "utils", "py", "def", "is_keyed_tuple", "obj", "return", "true", "if", "obj", "has", "keyed", "tuple", "behavior", "such", "as", "namedtuples", "or", "sqlalchemy", "s", "keyedtuples", "return", "isinstance", "obj", "tuple", "and", "hasattr", "obj", "_fields"], "doc_len": 30}
{"doc_id": "src/marshmallow/utils.py::pprint", "file_path": "src/marshmallow/utils.py", "class_name": null, "func_name": "pprint", "text": "文件路径: src/marshmallow/utils.py\ndef pprint(obj, *args, **kwargs):\n    \"\"\"Pretty-printing function that can pretty-print OrderedDicts\n    like regular dictionaries. Useful for printing the output of\n    :meth:`marshmallow.Schema.dump`.\n    \"\"\"\n    if isinstance(obj, collections.OrderedDict):\n        print(json.dumps(obj, *args, **kwargs))\n    else:\n        py_pprint(obj, *args, **kwargs)\n", "tokens": ["src", "marshmallow", "utils", "py", "def", "pprint", "obj", "args", "kwargs", "pretty", "printing", "function", "that", "can", "pretty", "print", "ordereddicts", "like", "regular", "dictionaries", "useful", "for", "printing", "the", "output", "of", "meth", "marshmallow", "schema", "dump", "if", "isinstance", "obj", "collections", "ordereddict", "print", "json", "dumps", "obj", "args", "kwargs", "else", "py_pprint", "obj", "args", "kwargs"], "doc_len": 46}
{"doc_id": "src/marshmallow/utils.py::is_aware", "file_path": "src/marshmallow/utils.py", "class_name": null, "func_name": "is_aware", "text": "文件路径: src/marshmallow/utils.py\ndef is_aware(datetime):\n    return (\n        datetime.tzinfo is not None and datetime.tzinfo.utcoffset(datetime) is not None\n    )\n", "tokens": ["src", "marshmallow", "utils", "py", "def", "is_aware", "datetime", "return", "datetime", "tzinfo", "is", "not", "none", "and", "datetime", "tzinfo", "utcoffset", "datetime", "is", "not", "none"], "doc_len": 21}
{"doc_id": "src/marshmallow/utils.py::from_rfc", "file_path": "src/marshmallow/utils.py", "class_name": null, "func_name": "from_rfc", "text": "文件路径: src/marshmallow/utils.py\ndef from_rfc(datestring):\n    \"\"\"Parse a RFC822-formatted datetime string and return a datetime object.\n\n    https://stackoverflow.com/questions/885015/how-to-parse-a-rfc-2822-date-time-into-a-python-datetime  # noqa: B950\n    \"\"\"\n    return parsedate_to_datetime(datestring)\n", "tokens": ["src", "marshmallow", "utils", "py", "def", "from_rfc", "datestring", "parse", "a", "rfc822", "formatted", "datetime", "string", "and", "return", "a", "datetime", "object", "https", "stackoverflow", "com", "questions", "885015", "how", "to", "parse", "a", "rfc", "2822", "date", "time", "into", "a", "python", "datetime", "noqa", "b950", "return", "parsedate_to_datetime", "datestring"], "doc_len": 40}
{"doc_id": "src/marshmallow/utils.py::rfcformat", "file_path": "src/marshmallow/utils.py", "class_name": null, "func_name": "rfcformat", "text": "文件路径: src/marshmallow/utils.py\ndef rfcformat(datetime):\n    \"\"\"Return the RFC822-formatted representation of a datetime object.\n\n    :param datetime datetime: The datetime.\n    \"\"\"\n    return format_datetime(datetime)\n", "tokens": ["src", "marshmallow", "utils", "py", "def", "rfcformat", "datetime", "return", "the", "rfc822", "formatted", "representation", "of", "a", "datetime", "object", "param", "datetime", "datetime", "the", "datetime", "return", "format_datetime", "datetime"], "doc_len": 24}
{"doc_id": "src/marshmallow/utils.py::get_fixed_timezone", "file_path": "src/marshmallow/utils.py", "class_name": null, "func_name": "get_fixed_timezone", "text": "文件路径: src/marshmallow/utils.py\ndef get_fixed_timezone(offset):\n    \"\"\"Return a tzinfo instance with a fixed offset from UTC.\"\"\"\n    if isinstance(offset, dt.timedelta):\n        offset = offset.total_seconds() // 60\n    sign = \"-\" if offset < 0 else \"+\"\n    hhmm = \"%02d%02d\" % divmod(abs(offset), 60)\n    name = sign + hhmm\n    return dt.timezone(dt.timedelta(minutes=offset), name)\n", "tokens": ["src", "marshmallow", "utils", "py", "def", "get_fixed_timezone", "offset", "return", "a", "tzinfo", "instance", "with", "a", "fixed", "offset", "from", "utc", "if", "isinstance", "offset", "dt", "timedelta", "offset", "offset", "total_seconds", "60", "sign", "if", "offset", "0", "else", "hhmm", "02d", "02d", "divmod", "abs", "offset", "60", "name", "sign", "hhmm", "return", "dt", "timezone", "dt", "timedelta", "minutes", "offset", "name"], "doc_len": 49}
{"doc_id": "src/marshmallow/utils.py::from_iso_datetime", "file_path": "src/marshmallow/utils.py", "class_name": null, "func_name": "from_iso_datetime", "text": "文件路径: src/marshmallow/utils.py\ndef from_iso_datetime(value):\n    \"\"\"Parse a string and return a datetime.datetime.\n\n    This function supports time zone offsets. When the input contains one,\n    the output uses a timezone with a fixed offset from UTC.\n    \"\"\"\n    match = _iso8601_datetime_re.match(value)\n    if not match:\n        raise ValueError(\"Not a valid ISO8601-formatted datetime string\")\n    kw = match.groupdict()\n    kw[\"microsecond\"] = kw[\"microsecond\"] and kw[\"microsecond\"].ljust(6, \"0\")\n    tzinfo = kw.pop(\"tzinfo\")\n    if tzinfo == \"Z\":\n        tzinfo = dt.timezone.utc\n    elif tzinfo is not None:\n        offset_mins = int(tzinfo[-2:]) if len(tzinfo) > 3 else 0\n        offset = 60 * int(tzinfo[1:3]) + offset_mins\n        if tzinfo[0] == \"-\":\n            offset = -offset\n        tzinfo = get_fixed_timezone(offset)\n    kw = {k: int(v) for k, v in kw.items() if v is not None}\n    kw[\"tzinfo\"] = tzinfo\n    return dt.datetime(**kw)\n", "tokens": ["src", "marshmallow", "utils", "py", "def", "from_iso_datetime", "value", "parse", "a", "string", "and", "return", "a", "datetime", "datetime", "this", "function", "supports", "time", "zone", "offsets", "when", "the", "input", "contains", "one", "the", "output", "uses", "a", "timezone", "with", "a", "fixed", "offset", "from", "utc", "match", "_iso8601_datetime_re", "match", "value", "if", "not", "match", "raise", "valueerror", "not", "a", "valid", "iso8601", "formatted", "datetime", "string", "kw", "match", "groupdict", "kw", "microsecond", "kw", "microsecond", "and", "kw", "microsecond", "ljust", "6", "0", "tzinfo", "kw", "pop", "tzinfo", "if", "tzinfo", "z", "tzinfo", "dt", "timezone", "utc", "elif", "tzinfo", "is", "not", "none", "offset_mins", "int", "tzinfo", "2", "if", "len", "tzinfo", "3", "else", "0", "offset", "60", "int", "tzinfo", "1", "3", "offset_mins", "if", "tzinfo", "0", "offset", "offset", "tzinfo", "get_fixed_timezone", "offset", "kw", "k", "int", "v", "for", "k", "v", "in", "kw", "items", "if", "v", "is", "not", "none", "kw", "tzinfo", "tzinfo", "return", "dt", "datetime", "kw"], "doc_len": 129}
{"doc_id": "src/marshmallow/utils.py::from_iso_time", "file_path": "src/marshmallow/utils.py", "class_name": null, "func_name": "from_iso_time", "text": "文件路径: src/marshmallow/utils.py\ndef from_iso_time(value):\n    \"\"\"Parse a string and return a datetime.time.\n\n    This function doesn't support time zone offsets.\n    \"\"\"\n    match = _iso8601_time_re.match(value)\n    if not match:\n        raise ValueError(\"Not a valid ISO8601-formatted time string\")\n    kw = match.groupdict()\n    kw[\"microsecond\"] = kw[\"microsecond\"] and kw[\"microsecond\"].ljust(6, \"0\")\n    kw = {k: int(v) for k, v in kw.items() if v is not None}\n    return dt.time(**kw)\n", "tokens": ["src", "marshmallow", "utils", "py", "def", "from_iso_time", "value", "parse", "a", "string", "and", "return", "a", "datetime", "time", "this", "function", "doesn", "t", "support", "time", "zone", "offsets", "match", "_iso8601_time_re", "match", "value", "if", "not", "match", "raise", "valueerror", "not", "a", "valid", "iso8601", "formatted", "time", "string", "kw", "match", "groupdict", "kw", "microsecond", "kw", "microsecond", "and", "kw", "microsecond", "ljust", "6", "0", "kw", "k", "int", "v", "for", "k", "v", "in", "kw", "items", "if", "v", "is", "not", "none", "return", "dt", "time", "kw"], "doc_len": 71}
{"doc_id": "src/marshmallow/utils.py::from_iso_date", "file_path": "src/marshmallow/utils.py", "class_name": null, "func_name": "from_iso_date", "text": "文件路径: src/marshmallow/utils.py\ndef from_iso_date(value):\n    \"\"\"Parse a string and return a datetime.date.\"\"\"\n    match = _iso8601_date_re.match(value)\n    if not match:\n        raise ValueError(\"Not a valid ISO8601-formatted date string\")\n    kw = {k: int(v) for k, v in match.groupdict().items()}\n    return dt.date(**kw)\n", "tokens": ["src", "marshmallow", "utils", "py", "def", "from_iso_date", "value", "parse", "a", "string", "and", "return", "a", "datetime", "date", "match", "_iso8601_date_re", "match", "value", "if", "not", "match", "raise", "valueerror", "not", "a", "valid", "iso8601", "formatted", "date", "string", "kw", "k", "int", "v", "for", "k", "v", "in", "match", "groupdict", "items", "return", "dt", "date", "kw"], "doc_len": 46}
{"doc_id": "src/marshmallow/utils.py::isoformat", "file_path": "src/marshmallow/utils.py", "class_name": null, "func_name": "isoformat", "text": "文件路径: src/marshmallow/utils.py\ndef isoformat(datetime):\n    \"\"\"Return the ISO8601-formatted representation of a datetime object.\n\n    :param datetime datetime: The datetime.\n    \"\"\"\n    return datetime.isoformat()\n", "tokens": ["src", "marshmallow", "utils", "py", "def", "isoformat", "datetime", "return", "the", "iso8601", "formatted", "representation", "of", "a", "datetime", "object", "param", "datetime", "datetime", "the", "datetime", "return", "datetime", "isoformat"], "doc_len": 24}
{"doc_id": "src/marshmallow/utils.py::to_iso_date", "file_path": "src/marshmallow/utils.py", "class_name": null, "func_name": "to_iso_date", "text": "文件路径: src/marshmallow/utils.py\ndef to_iso_date(date):\n    return dt.date.isoformat(date)\n", "tokens": ["src", "marshmallow", "utils", "py", "def", "to_iso_date", "date", "return", "dt", "date", "isoformat", "date"], "doc_len": 12}
{"doc_id": "src/marshmallow/utils.py::ensure_text_type", "file_path": "src/marshmallow/utils.py", "class_name": null, "func_name": "ensure_text_type", "text": "文件路径: src/marshmallow/utils.py\ndef ensure_text_type(val):\n    if isinstance(val, bytes):\n        val = val.decode(\"utf-8\")\n    return str(val)\n", "tokens": ["src", "marshmallow", "utils", "py", "def", "ensure_text_type", "val", "if", "isinstance", "val", "bytes", "val", "val", "decode", "utf", "8", "return", "str", "val"], "doc_len": 19}
{"doc_id": "src/marshmallow/utils.py::pluck", "file_path": "src/marshmallow/utils.py", "class_name": null, "func_name": "pluck", "text": "文件路径: src/marshmallow/utils.py\ndef pluck(dictlist, key):\n    \"\"\"Extracts a list of dictionary values from a list of dictionaries.\n    ::\n\n        >>> dlist = [{'id': 1, 'name': 'foo'}, {'id': 2, 'name': 'bar'}]\n        >>> pluck(dlist, 'id')\n        [1, 2]\n    \"\"\"\n    return [d[key] for d in dictlist]\n", "tokens": ["src", "marshmallow", "utils", "py", "def", "pluck", "dictlist", "key", "extracts", "a", "list", "of", "dictionary", "values", "from", "a", "list", "of", "dictionaries", "dlist", "id", "1", "name", "foo", "id", "2", "name", "bar", "pluck", "dlist", "id", "1", "2", "return", "d", "key", "for", "d", "in", "dictlist"], "doc_len": 40}
{"doc_id": "src/marshmallow/utils.py::get_value", "file_path": "src/marshmallow/utils.py", "class_name": null, "func_name": "get_value", "text": "文件路径: src/marshmallow/utils.py\ndef get_value(obj, key, default=missing):\n    \"\"\"Helper for pulling a keyed value off various types of objects. Fields use\n    this method by default to access attributes of the source object. For object `x`\n    and attribute `i`, this method first tries to access `x[i]`, and then falls back to\n    `x.i` if an exception is raised.\n\n    .. warning::\n        If an object `x` does not raise an exception when `x[i]` does not exist,\n        `get_value` will never check the value `x.i`. Consider overriding\n        `marshmallow.fields.Field.get_value` in this case.\n    \"\"\"\n    if not isinstance(key, int) and \".\" in key:\n        return _get_value_for_keys(obj, key.split(\".\"), default)\n    else:\n        return _get_value_for_key(obj, key, default)\n", "tokens": ["src", "marshmallow", "utils", "py", "def", "get_value", "obj", "key", "default", "missing", "helper", "for", "pulling", "a", "keyed", "value", "off", "various", "types", "of", "objects", "fields", "use", "this", "method", "by", "default", "to", "access", "attributes", "of", "the", "source", "object", "for", "object", "x", "and", "attribute", "i", "this", "method", "first", "tries", "to", "access", "x", "i", "and", "then", "falls", "back", "to", "x", "i", "if", "an", "exception", "is", "raised", "warning", "if", "an", "object", "x", "does", "not", "raise", "an", "exception", "when", "x", "i", "does", "not", "exist", "get_value", "will", "never", "check", "the", "value", "x", "i", "consider", "overriding", "marshmallow", "fields", "field", "get_value", "in", "this", "case", "if", "not", "isinstance", "key", "int", "and", "in", "key", "return", "_get_value_for_keys", "obj", "key", "split", "default", "else", "return", "_get_value_for_key", "obj", "key", "default"], "doc_len": 113}
{"doc_id": "src/marshmallow/utils.py::_get_value_for_keys", "file_path": "src/marshmallow/utils.py", "class_name": null, "func_name": "_get_value_for_keys", "text": "文件路径: src/marshmallow/utils.py\ndef _get_value_for_keys(obj, keys, default):\n    if len(keys) == 1:\n        return _get_value_for_key(obj, keys[0], default)\n    else:\n        return _get_value_for_keys(\n            _get_value_for_key(obj, keys[0], default), keys[1:], default\n        )\n", "tokens": ["src", "marshmallow", "utils", "py", "def", "_get_value_for_keys", "obj", "keys", "default", "if", "len", "keys", "1", "return", "_get_value_for_key", "obj", "keys", "0", "default", "else", "return", "_get_value_for_keys", "_get_value_for_key", "obj", "keys", "0", "default", "keys", "1", "default"], "doc_len": 30}
{"doc_id": "src/marshmallow/utils.py::_get_value_for_key", "file_path": "src/marshmallow/utils.py", "class_name": null, "func_name": "_get_value_for_key", "text": "文件路径: src/marshmallow/utils.py\ndef _get_value_for_key(obj, key, default):\n    if not hasattr(obj, \"__getitem__\"):\n        return getattr(obj, key, default)\n\n    try:\n        return obj[key]\n    except (KeyError, IndexError, TypeError, AttributeError):\n        return getattr(obj, key, default)\n", "tokens": ["src", "marshmallow", "utils", "py", "def", "_get_value_for_key", "obj", "key", "default", "if", "not", "hasattr", "obj", "__getitem__", "return", "getattr", "obj", "key", "default", "try", "return", "obj", "key", "except", "keyerror", "indexerror", "typeerror", "attributeerror", "return", "getattr", "obj", "key", "default"], "doc_len": 33}
{"doc_id": "src/marshmallow/utils.py::set_value", "file_path": "src/marshmallow/utils.py", "class_name": null, "func_name": "set_value", "text": "文件路径: src/marshmallow/utils.py\ndef set_value(dct, key, value):\n    \"\"\"Set a value in a dict. If `key` contains a '.', it is assumed\n    be a path (i.e. dot-delimited string) to the value's location.\n\n    ::\n\n        >>> d = {}\n        >>> set_value(d, 'foo.bar', 42)\n        >>> d\n        {'foo': {'bar': 42}}\n    \"\"\"\n    if \".\" in key:\n        head, rest = key.split(\".\", 1)\n        target = dct.setdefault(head, {})\n        if not isinstance(target, dict):\n            raise ValueError(\n                \"Cannot set {key} in {head} \"\n                \"due to existing value: {target}\".format(\n                    key=key, head=head, target=target\n                )\n            )\n        set_value(target, rest, value)\n    else:\n        dct[key] = value\n", "tokens": ["src", "marshmallow", "utils", "py", "def", "set_value", "dct", "key", "value", "set", "a", "value", "in", "a", "dict", "if", "key", "contains", "a", "it", "is", "assumed", "be", "a", "path", "i", "e", "dot", "delimited", "string", "to", "the", "value", "s", "location", "d", "set_value", "d", "foo", "bar", "42", "d", "foo", "bar", "42", "if", "in", "key", "head", "rest", "key", "split", "1", "target", "dct", "setdefault", "head", "if", "not", "isinstance", "target", "dict", "raise", "valueerror", "cannot", "set", "key", "in", "head", "due", "to", "existing", "value", "target", "format", "key", "key", "head", "head", "target", "target", "set_value", "target", "rest", "value", "else", "dct", "key", "value"], "doc_len": 89}
{"doc_id": "src/marshmallow/utils.py::callable_or_raise", "file_path": "src/marshmallow/utils.py", "class_name": null, "func_name": "callable_or_raise", "text": "文件路径: src/marshmallow/utils.py\ndef callable_or_raise(obj):\n    \"\"\"Check that an object is callable, else raise a :exc:`ValueError`.\n    \"\"\"\n    if not callable(obj):\n        raise ValueError(\"Object {!r} is not callable.\".format(obj))\n    return obj\n", "tokens": ["src", "marshmallow", "utils", "py", "def", "callable_or_raise", "obj", "check", "that", "an", "object", "is", "callable", "else", "raise", "a", "exc", "valueerror", "if", "not", "callable", "obj", "raise", "valueerror", "object", "r", "is", "not", "callable", "format", "obj", "return", "obj"], "doc_len": 33}
{"doc_id": "src/marshmallow/utils.py::_signature", "file_path": "src/marshmallow/utils.py", "class_name": null, "func_name": "_signature", "text": "文件路径: src/marshmallow/utils.py\ndef _signature(func: typing.Callable) -> typing.List[str]:\n    return list(inspect.signature(func).parameters.keys())\n", "tokens": ["src", "marshmallow", "utils", "py", "def", "_signature", "func", "typing", "callable", "typing", "list", "str", "return", "list", "inspect", "signature", "func", "parameters", "keys"], "doc_len": 19}
{"doc_id": "src/marshmallow/utils.py::get_func_args", "file_path": "src/marshmallow/utils.py", "class_name": null, "func_name": "get_func_args", "text": "文件路径: src/marshmallow/utils.py\ndef get_func_args(func: typing.Callable) -> typing.List[str]:\n    \"\"\"Given a callable, return a list of argument names. Handles\n    `functools.partial` objects and class-based callables.\n\n    .. versionchanged:: 3.0.0a1\n        Do not return bound arguments, eg. ``self``.\n    \"\"\"\n    if inspect.isfunction(func) or inspect.ismethod(func):\n        return _signature(func)\n    if isinstance(func, functools.partial):\n        return _signature(func.func)\n    # Callable class\n    return _signature(func.__call__)\n", "tokens": ["src", "marshmallow", "utils", "py", "def", "get_func_args", "func", "typing", "callable", "typing", "list", "str", "given", "a", "callable", "return", "a", "list", "of", "argument", "names", "handles", "functools", "partial", "objects", "and", "class", "based", "callables", "versionchanged", "3", "0", "0a1", "do", "not", "return", "bound", "arguments", "eg", "self", "if", "inspect", "isfunction", "func", "or", "inspect", "ismethod", "func", "return", "_signature", "func", "if", "isinstance", "func", "functools", "partial", "return", "_signature", "func", "func", "callable", "class", "return", "_signature", "func", "__call__"], "doc_len": 66}
{"doc_id": "src/marshmallow/utils.py::resolve_field_instance", "file_path": "src/marshmallow/utils.py", "class_name": null, "func_name": "resolve_field_instance", "text": "文件路径: src/marshmallow/utils.py\ndef resolve_field_instance(cls_or_instance):\n    \"\"\"Return a Schema instance from a Schema class or instance.\n\n    :param type|Schema cls_or_instance: Marshmallow Schema class or instance.\n    \"\"\"\n    if isinstance(cls_or_instance, type):\n        if not issubclass(cls_or_instance, FieldABC):\n            raise FieldInstanceResolutionError\n        return cls_or_instance()\n    else:\n        if not isinstance(cls_or_instance, FieldABC):\n            raise FieldInstanceResolutionError\n        return cls_or_instance\n", "tokens": ["src", "marshmallow", "utils", "py", "def", "resolve_field_instance", "cls_or_instance", "return", "a", "schema", "instance", "from", "a", "schema", "class", "or", "instance", "param", "type", "schema", "cls_or_instance", "marshmallow", "schema", "class", "or", "instance", "if", "isinstance", "cls_or_instance", "type", "if", "not", "issubclass", "cls_or_instance", "fieldabc", "raise", "fieldinstanceresolutionerror", "return", "cls_or_instance", "else", "if", "not", "isinstance", "cls_or_instance", "fieldabc", "raise", "fieldinstanceresolutionerror", "return", "cls_or_instance"], "doc_len": 49}
{"doc_id": "src/marshmallow/validate.py::Validator.__repr__", "file_path": "src/marshmallow/validate.py", "class_name": "Validator", "func_name": "__repr__", "text": "文件路径: src/marshmallow/validate.py, 类名: Validator\n    def __repr__(self):\n        args = self._repr_args()\n        args = \"{}, \".format(args) if args else \"\"\n\n        return \"<{self.__class__.__name__}({args}error={self.error!r})>\".format(\n            self=self, args=args\n        )\n", "tokens": ["src", "marshmallow", "validate", "py", "validator", "def", "__repr__", "self", "args", "self", "_repr_args", "args", "format", "args", "if", "args", "else", "return", "self", "__class__", "__name__", "args", "error", "self", "error", "r", "format", "self", "self", "args", "args"], "doc_len": 31}
{"doc_id": "src/marshmallow/validate.py::Validator._repr_args", "file_path": "src/marshmallow/validate.py", "class_name": "Validator", "func_name": "_repr_args", "text": "文件路径: src/marshmallow/validate.py, 类名: Validator\n    def _repr_args(self):\n        \"\"\"A string representation of the args passed to this validator. Used by\n        `__repr__`.\n        \"\"\"\n        return \"\"\n", "tokens": ["src", "marshmallow", "validate", "py", "validator", "def", "_repr_args", "self", "a", "string", "representation", "of", "the", "args", "passed", "to", "this", "validator", "used", "by", "__repr__", "return"], "doc_len": 22}
{"doc_id": "src/marshmallow/validate.py::URL.__init__", "file_path": "src/marshmallow/validate.py", "class_name": "URL", "func_name": "__init__", "text": "文件路径: src/marshmallow/validate.py, 类名: URL\n    def __init__(self, *, relative=False, schemes=None, require_tld=True, error=None):\n        self.relative = relative\n        self.error = error or self.default_message\n        self.schemes = schemes or self.default_schemes\n        self.require_tld = require_tld\n", "tokens": ["src", "marshmallow", "validate", "py", "url", "def", "__init__", "self", "relative", "false", "schemes", "none", "require_tld", "true", "error", "none", "self", "relative", "relative", "self", "error", "error", "or", "self", "default_message", "self", "schemes", "schemes", "or", "self", "default_schemes", "self", "require_tld", "require_tld"], "doc_len": 34}
{"doc_id": "src/marshmallow/validate.py::URL._repr_args", "file_path": "src/marshmallow/validate.py", "class_name": "URL", "func_name": "_repr_args", "text": "文件路径: src/marshmallow/validate.py, 类名: URL\n    def _repr_args(self):\n        return \"relative={!r}\".format(self.relative)\n", "tokens": ["src", "marshmallow", "validate", "py", "url", "def", "_repr_args", "self", "return", "relative", "r", "format", "self", "relative"], "doc_len": 14}
{"doc_id": "src/marshmallow/validate.py::URL._format_error", "file_path": "src/marshmallow/validate.py", "class_name": "URL", "func_name": "_format_error", "text": "文件路径: src/marshmallow/validate.py, 类名: URL\n    def _format_error(self, value):\n        return self.error.format(input=value)\n", "tokens": ["src", "marshmallow", "validate", "py", "url", "def", "_format_error", "self", "value", "return", "self", "error", "format", "input", "value"], "doc_len": 15}
{"doc_id": "src/marshmallow/validate.py::URL.__call__", "file_path": "src/marshmallow/validate.py", "class_name": "URL", "func_name": "__call__", "text": "文件路径: src/marshmallow/validate.py, 类名: URL\n    def __call__(self, value):\n        message = self._format_error(value)\n        if not value:\n            raise ValidationError(message)\n\n        # Check first if the scheme is valid\n        if \"://\" in value:\n            scheme = value.split(\"://\")[0].lower()\n            if scheme not in self.schemes:\n                raise ValidationError(message)\n\n        regex = self._regex(self.relative, self.require_tld)\n\n        if not regex.search(value):\n            raise ValidationError(message)\n\n        return value\n", "tokens": ["src", "marshmallow", "validate", "py", "url", "def", "__call__", "self", "value", "message", "self", "_format_error", "value", "if", "not", "value", "raise", "validationerror", "message", "check", "first", "if", "the", "scheme", "is", "valid", "if", "in", "value", "scheme", "value", "split", "0", "lower", "if", "scheme", "not", "in", "self", "schemes", "raise", "validationerror", "message", "regex", "self", "_regex", "self", "relative", "self", "require_tld", "if", "not", "regex", "search", "value", "raise", "validationerror", "message", "return", "value"], "doc_len": 60}
{"doc_id": "src/marshmallow/validate.py::Email.__init__", "file_path": "src/marshmallow/validate.py", "class_name": "Email", "func_name": "__init__", "text": "文件路径: src/marshmallow/validate.py, 类名: Email\n    def __init__(self, *, error=None):\n        self.error = error or self.default_message\n", "tokens": ["src", "marshmallow", "validate", "py", "email", "def", "__init__", "self", "error", "none", "self", "error", "error", "or", "self", "default_message"], "doc_len": 16}
{"doc_id": "src/marshmallow/validate.py::Email._format_error", "file_path": "src/marshmallow/validate.py", "class_name": "Email", "func_name": "_format_error", "text": "文件路径: src/marshmallow/validate.py, 类名: Email\n    def _format_error(self, value):\n        return self.error.format(input=value)\n", "tokens": ["src", "marshmallow", "validate", "py", "email", "def", "_format_error", "self", "value", "return", "self", "error", "format", "input", "value"], "doc_len": 15}
{"doc_id": "src/marshmallow/validate.py::Email.__call__", "file_path": "src/marshmallow/validate.py", "class_name": "Email", "func_name": "__call__", "text": "文件路径: src/marshmallow/validate.py, 类名: Email\n    def __call__(self, value):\n        message = self._format_error(value)\n\n        if not value or \"@\" not in value:\n            raise ValidationError(message)\n\n        user_part, domain_part = value.rsplit(\"@\", 1)\n\n        if not self.USER_REGEX.match(user_part):\n            raise ValidationError(message)\n\n        if domain_part not in self.DOMAIN_WHITELIST:\n            if not self.DOMAIN_REGEX.match(domain_part):\n                try:\n                    domain_part = domain_part.encode(\"idna\").decode(\"ascii\")\n                except UnicodeError:\n                    pass\n                else:\n                    if self.DOMAIN_REGEX.match(domain_part):\n                        return value\n                raise ValidationError(message)\n\n        return value\n", "tokens": ["src", "marshmallow", "validate", "py", "email", "def", "__call__", "self", "value", "message", "self", "_format_error", "value", "if", "not", "value", "or", "not", "in", "value", "raise", "validationerror", "message", "user_part", "domain_part", "value", "rsplit", "1", "if", "not", "self", "user_regex", "match", "user_part", "raise", "validationerror", "message", "if", "domain_part", "not", "in", "self", "domain_whitelist", "if", "not", "self", "domain_regex", "match", "domain_part", "try", "domain_part", "domain_part", "encode", "idna", "decode", "ascii", "except", "unicodeerror", "pass", "else", "if", "self", "domain_regex", "match", "domain_part", "return", "value", "raise", "validationerror", "message", "return", "value"], "doc_len": 72}
{"doc_id": "src/marshmallow/validate.py::Range.__init__", "file_path": "src/marshmallow/validate.py", "class_name": "Range", "func_name": "__init__", "text": "文件路径: src/marshmallow/validate.py, 类名: Range\n    def __init__(\n        self, min=None, max=None, *, min_inclusive=True, max_inclusive=True, error=None\n    ):\n        self.min = min\n        self.max = max\n        self.error = error\n        self.min_inclusive = min_inclusive\n        self.max_inclusive = max_inclusive\n\n        # interpolate messages based on bound inclusivity\n        self.message_min = self.message_min.format(\n            min_op=self.message_gte if self.min_inclusive else self.message_gt\n        )\n        self.message_max = self.message_max.format(\n            max_op=self.message_lte if self.max_inclusive else self.message_lt\n        )\n        self.message_all = self.message_all.format(\n            min_op=self.message_gte if self.min_inclusive else self.message_gt,\n            max_op=self.message_lte if self.max_inclusive else self.message_lt,\n        )\n", "tokens": ["src", "marshmallow", "validate", "py", "range", "def", "__init__", "self", "min", "none", "max", "none", "min_inclusive", "true", "max_inclusive", "true", "error", "none", "self", "min", "min", "self", "max", "max", "self", "error", "error", "self", "min_inclusive", "min_inclusive", "self", "max_inclusive", "max_inclusive", "interpolate", "messages", "based", "on", "bound", "inclusivity", "self", "message_min", "self", "message_min", "format", "min_op", "self", "message_gte", "if", "self", "min_inclusive", "else", "self", "message_gt", "self", "message_max", "self", "message_max", "format", "max_op", "self", "message_lte", "if", "self", "max_inclusive", "else", "self", "message_lt", "self", "message_all", "self", "message_all", "format", "min_op", "self", "message_gte", "if", "self", "min_inclusive", "else", "self", "message_gt", "max_op", "self", "message_lte", "if", "self", "max_inclusive", "else", "self", "message_lt"], "doc_len": 90}
{"doc_id": "src/marshmallow/validate.py::Range._repr_args", "file_path": "src/marshmallow/validate.py", "class_name": "Range", "func_name": "_repr_args", "text": "文件路径: src/marshmallow/validate.py, 类名: Range\n    def _repr_args(self):\n        return \"min={!r}, max={!r}, min_inclusive={!r}, max_inclusive={!r}\".format(\n            self.min, self.max, self.min_inclusive, self.max_inclusive\n        )\n", "tokens": ["src", "marshmallow", "validate", "py", "range", "def", "_repr_args", "self", "return", "min", "r", "max", "r", "min_inclusive", "r", "max_inclusive", "r", "format", "self", "min", "self", "max", "self", "min_inclusive", "self", "max_inclusive"], "doc_len": 26}
{"doc_id": "src/marshmallow/validate.py::Range._format_error", "file_path": "src/marshmallow/validate.py", "class_name": "Range", "func_name": "_format_error", "text": "文件路径: src/marshmallow/validate.py, 类名: Range\n    def _format_error(self, value, message):\n        return (self.error or message).format(input=value, min=self.min, max=self.max)\n", "tokens": ["src", "marshmallow", "validate", "py", "range", "def", "_format_error", "self", "value", "message", "return", "self", "error", "or", "message", "format", "input", "value", "min", "self", "min", "max", "self", "max"], "doc_len": 24}
{"doc_id": "src/marshmallow/validate.py::Range.__call__", "file_path": "src/marshmallow/validate.py", "class_name": "Range", "func_name": "__call__", "text": "文件路径: src/marshmallow/validate.py, 类名: Range\n    def __call__(self, value):\n        if self.min is not None and (\n            value < self.min if self.min_inclusive else value <= self.min\n        ):\n            message = self.message_min if self.max is None else self.message_all\n            raise ValidationError(self._format_error(value, message))\n\n        if self.max is not None and (\n            value > self.max if self.max_inclusive else value >= self.max\n        ):\n            message = self.message_max if self.min is None else self.message_all\n            raise ValidationError(self._format_error(value, message))\n\n        return value\n", "tokens": ["src", "marshmallow", "validate", "py", "range", "def", "__call__", "self", "value", "if", "self", "min", "is", "not", "none", "and", "value", "self", "min", "if", "self", "min_inclusive", "else", "value", "self", "min", "message", "self", "message_min", "if", "self", "max", "is", "none", "else", "self", "message_all", "raise", "validationerror", "self", "_format_error", "value", "message", "if", "self", "max", "is", "not", "none", "and", "value", "self", "max", "if", "self", "max_inclusive", "else", "value", "self", "max", "message", "self", "message_max", "if", "self", "min", "is", "none", "else", "self", "message_all", "raise", "validationerror", "self", "_format_error", "value", "message", "return", "value"], "doc_len": 79}
{"doc_id": "src/marshmallow/validate.py::Length.__init__", "file_path": "src/marshmallow/validate.py", "class_name": "Length", "func_name": "__init__", "text": "文件路径: src/marshmallow/validate.py, 类名: Length\n    def __init__(self, min=None, max=None, *, error=None, equal=None):\n        if equal is not None and any([min, max]):\n            raise ValueError(\n                \"The `equal` parameter was provided, maximum or \"\n                \"minimum parameter must not be provided.\"\n            )\n\n        self.min = min\n        self.max = max\n        self.error = error\n        self.equal = equal\n", "tokens": ["src", "marshmallow", "validate", "py", "length", "def", "__init__", "self", "min", "none", "max", "none", "error", "none", "equal", "none", "if", "equal", "is", "not", "none", "and", "any", "min", "max", "raise", "valueerror", "the", "equal", "parameter", "was", "provided", "maximum", "or", "minimum", "parameter", "must", "not", "be", "provided", "self", "min", "min", "self", "max", "max", "self", "error", "error", "self", "equal", "equal"], "doc_len": 52}
{"doc_id": "src/marshmallow/validate.py::Length._repr_args", "file_path": "src/marshmallow/validate.py", "class_name": "Length", "func_name": "_repr_args", "text": "文件路径: src/marshmallow/validate.py, 类名: Length\n    def _repr_args(self):\n        return \"min={!r}, max={!r}, equal={!r}\".format(self.min, self.max, self.equal)\n", "tokens": ["src", "marshmallow", "validate", "py", "length", "def", "_repr_args", "self", "return", "min", "r", "max", "r", "equal", "r", "format", "self", "min", "self", "max", "self", "equal"], "doc_len": 22}
{"doc_id": "src/marshmallow/validate.py::Length._format_error", "file_path": "src/marshmallow/validate.py", "class_name": "Length", "func_name": "_format_error", "text": "文件路径: src/marshmallow/validate.py, 类名: Length\n    def _format_error(self, value, message):\n        return (self.error or message).format(\n            input=value, min=self.min, max=self.max, equal=self.equal\n        )\n", "tokens": ["src", "marshmallow", "validate", "py", "length", "def", "_format_error", "self", "value", "message", "return", "self", "error", "or", "message", "format", "input", "value", "min", "self", "min", "max", "self", "max", "equal", "self", "equal"], "doc_len": 27}
{"doc_id": "src/marshmallow/validate.py::Length.__call__", "file_path": "src/marshmallow/validate.py", "class_name": "Length", "func_name": "__call__", "text": "文件路径: src/marshmallow/validate.py, 类名: Length\n    def __call__(self, value):\n        length = len(value)\n\n        if self.equal is not None:\n            if length != self.equal:\n                raise ValidationError(self._format_error(value, self.message_equal))\n            return value\n\n        if self.min is not None and length < self.min:\n            message = self.message_min if self.max is None else self.message_all\n            raise ValidationError(self._format_error(value, message))\n\n        if self.max is not None and length > self.max:\n            message = self.message_max if self.min is None else self.message_all\n            raise ValidationError(self._format_error(value, message))\n\n        return value\n", "tokens": ["src", "marshmallow", "validate", "py", "length", "def", "__call__", "self", "value", "length", "len", "value", "if", "self", "equal", "is", "not", "none", "if", "length", "self", "equal", "raise", "validationerror", "self", "_format_error", "value", "self", "message_equal", "return", "value", "if", "self", "min", "is", "not", "none", "and", "length", "self", "min", "message", "self", "message_min", "if", "self", "max", "is", "none", "else", "self", "message_all", "raise", "validationerror", "self", "_format_error", "value", "message", "if", "self", "max", "is", "not", "none", "and", "length", "self", "max", "message", "self", "message_max", "if", "self", "min", "is", "none", "else", "self", "message_all", "raise", "validationerror", "self", "_format_error", "value", "message", "return", "value"], "doc_len": 87}
{"doc_id": "src/marshmallow/validate.py::Equal.__init__", "file_path": "src/marshmallow/validate.py", "class_name": "Equal", "func_name": "__init__", "text": "文件路径: src/marshmallow/validate.py, 类名: Equal\n    def __init__(self, comparable, *, error=None):\n        self.comparable = comparable\n        self.error = error or self.default_message\n", "tokens": ["src", "marshmallow", "validate", "py", "equal", "def", "__init__", "self", "comparable", "error", "none", "self", "comparable", "comparable", "self", "error", "error", "or", "self", "default_message"], "doc_len": 20}
{"doc_id": "src/marshmallow/validate.py::Equal._repr_args", "file_path": "src/marshmallow/validate.py", "class_name": "Equal", "func_name": "_repr_args", "text": "文件路径: src/marshmallow/validate.py, 类名: Equal\n    def _repr_args(self):\n        return \"comparable={!r}\".format(self.comparable)\n", "tokens": ["src", "marshmallow", "validate", "py", "equal", "def", "_repr_args", "self", "return", "comparable", "r", "format", "self", "comparable"], "doc_len": 14}
{"doc_id": "src/marshmallow/validate.py::Equal._format_error", "file_path": "src/marshmallow/validate.py", "class_name": "Equal", "func_name": "_format_error", "text": "文件路径: src/marshmallow/validate.py, 类名: Equal\n    def _format_error(self, value):\n        return self.error.format(input=value, other=self.comparable)\n", "tokens": ["src", "marshmallow", "validate", "py", "equal", "def", "_format_error", "self", "value", "return", "self", "error", "format", "input", "value", "other", "self", "comparable"], "doc_len": 18}
{"doc_id": "src/marshmallow/validate.py::Equal.__call__", "file_path": "src/marshmallow/validate.py", "class_name": "Equal", "func_name": "__call__", "text": "文件路径: src/marshmallow/validate.py, 类名: Equal\n    def __call__(self, value):\n        if value != self.comparable:\n            raise ValidationError(self._format_error(value))\n        return value\n", "tokens": ["src", "marshmallow", "validate", "py", "equal", "def", "__call__", "self", "value", "if", "value", "self", "comparable", "raise", "validationerror", "self", "_format_error", "value", "return", "value"], "doc_len": 20}
{"doc_id": "src/marshmallow/validate.py::Regexp.__init__", "file_path": "src/marshmallow/validate.py", "class_name": "Regexp", "func_name": "__init__", "text": "文件路径: src/marshmallow/validate.py, 类名: Regexp\n    def __init__(self, regex, flags=0, *, error=None):\n        self.regex = (\n            re.compile(regex, flags) if isinstance(regex, (str, bytes)) else regex\n        )\n        self.error = error or self.default_message\n", "tokens": ["src", "marshmallow", "validate", "py", "regexp", "def", "__init__", "self", "regex", "flags", "0", "error", "none", "self", "regex", "re", "compile", "regex", "flags", "if", "isinstance", "regex", "str", "bytes", "else", "regex", "self", "error", "error", "or", "self", "default_message"], "doc_len": 32}
{"doc_id": "src/marshmallow/validate.py::Regexp._repr_args", "file_path": "src/marshmallow/validate.py", "class_name": "Regexp", "func_name": "_repr_args", "text": "文件路径: src/marshmallow/validate.py, 类名: Regexp\n    def _repr_args(self):\n        return \"regex={!r}\".format(self.regex)\n", "tokens": ["src", "marshmallow", "validate", "py", "regexp", "def", "_repr_args", "self", "return", "regex", "r", "format", "self", "regex"], "doc_len": 14}
{"doc_id": "src/marshmallow/validate.py::Regexp._format_error", "file_path": "src/marshmallow/validate.py", "class_name": "Regexp", "func_name": "_format_error", "text": "文件路径: src/marshmallow/validate.py, 类名: Regexp\n    def _format_error(self, value):\n        return self.error.format(input=value, regex=self.regex.pattern)\n", "tokens": ["src", "marshmallow", "validate", "py", "regexp", "def", "_format_error", "self", "value", "return", "self", "error", "format", "input", "value", "regex", "self", "regex", "pattern"], "doc_len": 19}
{"doc_id": "src/marshmallow/validate.py::Regexp.__call__", "file_path": "src/marshmallow/validate.py", "class_name": "Regexp", "func_name": "__call__", "text": "文件路径: src/marshmallow/validate.py, 类名: Regexp\n    def __call__(self, value):\n        if self.regex.match(value) is None:\n            raise ValidationError(self._format_error(value))\n\n        return value\n", "tokens": ["src", "marshmallow", "validate", "py", "regexp", "def", "__call__", "self", "value", "if", "self", "regex", "match", "value", "is", "none", "raise", "validationerror", "self", "_format_error", "value", "return", "value"], "doc_len": 23}
{"doc_id": "src/marshmallow/validate.py::Predicate.__init__", "file_path": "src/marshmallow/validate.py", "class_name": "Predicate", "func_name": "__init__", "text": "文件路径: src/marshmallow/validate.py, 类名: Predicate\n    def __init__(self, method, *, error=None, **kwargs):\n        self.method = method\n        self.error = error or self.default_message\n        self.kwargs = kwargs\n", "tokens": ["src", "marshmallow", "validate", "py", "predicate", "def", "__init__", "self", "method", "error", "none", "kwargs", "self", "method", "method", "self", "error", "error", "or", "self", "default_message", "self", "kwargs", "kwargs"], "doc_len": 24}
{"doc_id": "src/marshmallow/validate.py::Predicate._repr_args", "file_path": "src/marshmallow/validate.py", "class_name": "Predicate", "func_name": "_repr_args", "text": "文件路径: src/marshmallow/validate.py, 类名: Predicate\n    def _repr_args(self):\n        return \"method={!r}, kwargs={!r}\".format(self.method, self.kwargs)\n", "tokens": ["src", "marshmallow", "validate", "py", "predicate", "def", "_repr_args", "self", "return", "method", "r", "kwargs", "r", "format", "self", "method", "self", "kwargs"], "doc_len": 18}
{"doc_id": "src/marshmallow/validate.py::Predicate._format_error", "file_path": "src/marshmallow/validate.py", "class_name": "Predicate", "func_name": "_format_error", "text": "文件路径: src/marshmallow/validate.py, 类名: Predicate\n    def _format_error(self, value):\n        return self.error.format(input=value, method=self.method)\n", "tokens": ["src", "marshmallow", "validate", "py", "predicate", "def", "_format_error", "self", "value", "return", "self", "error", "format", "input", "value", "method", "self", "method"], "doc_len": 18}
{"doc_id": "src/marshmallow/validate.py::Predicate.__call__", "file_path": "src/marshmallow/validate.py", "class_name": "Predicate", "func_name": "__call__", "text": "文件路径: src/marshmallow/validate.py, 类名: Predicate\n    def __call__(self, value):\n        method = getattr(value, self.method)\n\n        if not method(**self.kwargs):\n            raise ValidationError(self._format_error(value))\n\n        return value\n", "tokens": ["src", "marshmallow", "validate", "py", "predicate", "def", "__call__", "self", "value", "method", "getattr", "value", "self", "method", "if", "not", "method", "self", "kwargs", "raise", "validationerror", "self", "_format_error", "value", "return", "value"], "doc_len": 26}
{"doc_id": "src/marshmallow/validate.py::NoneOf.__init__", "file_path": "src/marshmallow/validate.py", "class_name": "NoneOf", "func_name": "__init__", "text": "文件路径: src/marshmallow/validate.py, 类名: NoneOf\n    def __init__(self, iterable, *, error=None):\n        self.iterable = iterable\n        self.values_text = \", \".join(str(each) for each in self.iterable)\n        self.error = error or self.default_message\n", "tokens": ["src", "marshmallow", "validate", "py", "noneof", "def", "__init__", "self", "iterable", "error", "none", "self", "iterable", "iterable", "self", "values_text", "join", "str", "each", "for", "each", "in", "self", "iterable", "self", "error", "error", "or", "self", "default_message"], "doc_len": 30}
{"doc_id": "src/marshmallow/validate.py::NoneOf._repr_args", "file_path": "src/marshmallow/validate.py", "class_name": "NoneOf", "func_name": "_repr_args", "text": "文件路径: src/marshmallow/validate.py, 类名: NoneOf\n    def _repr_args(self):\n        return \"iterable={!r}\".format(self.iterable)\n", "tokens": ["src", "marshmallow", "validate", "py", "noneof", "def", "_repr_args", "self", "return", "iterable", "r", "format", "self", "iterable"], "doc_len": 14}
{"doc_id": "src/marshmallow/validate.py::NoneOf._format_error", "file_path": "src/marshmallow/validate.py", "class_name": "NoneOf", "func_name": "_format_error", "text": "文件路径: src/marshmallow/validate.py, 类名: NoneOf\n    def _format_error(self, value):\n        return self.error.format(input=value, values=self.values_text)\n", "tokens": ["src", "marshmallow", "validate", "py", "noneof", "def", "_format_error", "self", "value", "return", "self", "error", "format", "input", "value", "values", "self", "values_text"], "doc_len": 18}
{"doc_id": "src/marshmallow/validate.py::NoneOf.__call__", "file_path": "src/marshmallow/validate.py", "class_name": "NoneOf", "func_name": "__call__", "text": "文件路径: src/marshmallow/validate.py, 类名: NoneOf\n    def __call__(self, value):\n        try:\n            if value in self.iterable:\n                raise ValidationError(self._format_error(value))\n        except TypeError:\n            pass\n\n        return value\n", "tokens": ["src", "marshmallow", "validate", "py", "noneof", "def", "__call__", "self", "value", "try", "if", "value", "in", "self", "iterable", "raise", "validationerror", "self", "_format_error", "value", "except", "typeerror", "pass", "return", "value"], "doc_len": 25}
{"doc_id": "src/marshmallow/validate.py::OneOf.__init__", "file_path": "src/marshmallow/validate.py", "class_name": "OneOf", "func_name": "__init__", "text": "文件路径: src/marshmallow/validate.py, 类名: OneOf\n    def __init__(self, choices, labels=None, *, error=None):\n        self.choices = choices\n        self.choices_text = \", \".join(str(choice) for choice in self.choices)\n        self.labels = labels if labels is not None else []\n        self.labels_text = \", \".join(str(label) for label in self.labels)\n        self.error = error or self.default_message\n", "tokens": ["src", "marshmallow", "validate", "py", "oneof", "def", "__init__", "self", "choices", "labels", "none", "error", "none", "self", "choices", "choices", "self", "choices_text", "join", "str", "choice", "for", "choice", "in", "self", "choices", "self", "labels", "labels", "if", "labels", "is", "not", "none", "else", "self", "labels_text", "join", "str", "label", "for", "label", "in", "self", "labels", "self", "error", "error", "or", "self", "default_message"], "doc_len": 51}
{"doc_id": "src/marshmallow/validate.py::OneOf._repr_args", "file_path": "src/marshmallow/validate.py", "class_name": "OneOf", "func_name": "_repr_args", "text": "文件路径: src/marshmallow/validate.py, 类名: OneOf\n    def _repr_args(self):\n        return \"choices={!r}, labels={!r}\".format(self.choices, self.labels)\n", "tokens": ["src", "marshmallow", "validate", "py", "oneof", "def", "_repr_args", "self", "return", "choices", "r", "labels", "r", "format", "self", "choices", "self", "labels"], "doc_len": 18}
{"doc_id": "src/marshmallow/validate.py::OneOf._format_error", "file_path": "src/marshmallow/validate.py", "class_name": "OneOf", "func_name": "_format_error", "text": "文件路径: src/marshmallow/validate.py, 类名: OneOf\n    def _format_error(self, value):\n        return self.error.format(\n            input=value, choices=self.choices_text, labels=self.labels_text\n        )\n", "tokens": ["src", "marshmallow", "validate", "py", "oneof", "def", "_format_error", "self", "value", "return", "self", "error", "format", "input", "value", "choices", "self", "choices_text", "labels", "self", "labels_text"], "doc_len": 21}
{"doc_id": "src/marshmallow/validate.py::OneOf.__call__", "file_path": "src/marshmallow/validate.py", "class_name": "OneOf", "func_name": "__call__", "text": "文件路径: src/marshmallow/validate.py, 类名: OneOf\n    def __call__(self, value):\n        try:\n            if value not in self.choices:\n                raise ValidationError(self._format_error(value))\n        except TypeError as error:\n            raise ValidationError(self._format_error(value)) from error\n\n        return value\n", "tokens": ["src", "marshmallow", "validate", "py", "oneof", "def", "__call__", "self", "value", "try", "if", "value", "not", "in", "self", "choices", "raise", "validationerror", "self", "_format_error", "value", "except", "typeerror", "as", "error", "raise", "validationerror", "self", "_format_error", "value", "from", "error", "return", "value"], "doc_len": 34}
{"doc_id": "src/marshmallow/validate.py::OneOf.options", "file_path": "src/marshmallow/validate.py", "class_name": "OneOf", "func_name": "options", "text": "文件路径: src/marshmallow/validate.py, 类名: OneOf\n    def options(self, valuegetter=str):\n        \"\"\"Return a generator over the (value, label) pairs, where value\n        is a string associated with each choice. This convenience method\n        is useful to populate, for instance, a form select field.\n\n        :param valuegetter: Can be a callable or a string. In the former case, it must\n            be a one-argument callable which returns the value of a\n            choice. In the latter case, the string specifies the name\n            of an attribute of the choice objects. Defaults to `str()`\n            or `str()`.\n        \"\"\"\n        valuegetter = valuegetter if callable(valuegetter) else attrgetter(valuegetter)\n        pairs = zip_longest(self.choices, self.labels, fillvalue=\"\")\n\n        return ((valuegetter(choice), label) for choice, label in pairs)\n", "tokens": ["src", "marshmallow", "validate", "py", "oneof", "def", "options", "self", "valuegetter", "str", "return", "a", "generator", "over", "the", "value", "label", "pairs", "where", "value", "is", "a", "string", "associated", "with", "each", "choice", "this", "convenience", "method", "is", "useful", "to", "populate", "for", "instance", "a", "form", "select", "field", "param", "valuegetter", "can", "be", "a", "callable", "or", "a", "string", "in", "the", "former", "case", "it", "must", "be", "a", "one", "argument", "callable", "which", "returns", "the", "value", "of", "a", "choice", "in", "the", "latter", "case", "the", "string", "specifies", "the", "name", "of", "an", "attribute", "of", "the", "choice", "objects", "defaults", "to", "str", "or", "str", "valuegetter", "valuegetter", "if", "callable", "valuegetter", "else", "attrgetter", "valuegetter", "pairs", "zip_longest", "self", "choices", "self", "labels", "fillvalue", "return", "valuegetter", "choice", "label", "for", "choice", "label", "in", "pairs"], "doc_len": 112}
{"doc_id": "src/marshmallow/validate.py::ContainsOnly._format_error", "file_path": "src/marshmallow/validate.py", "class_name": "ContainsOnly", "func_name": "_format_error", "text": "文件路径: src/marshmallow/validate.py, 类名: ContainsOnly\n    def _format_error(self, value):\n        value_text = \", \".join(str(val) for val in value)\n        return super()._format_error(value_text)\n", "tokens": ["src", "marshmallow", "validate", "py", "containsonly", "def", "_format_error", "self", "value", "value_text", "join", "str", "val", "for", "val", "in", "value", "return", "super", "_format_error", "value_text"], "doc_len": 21}
{"doc_id": "src/marshmallow/validate.py::ContainsOnly.__call__", "file_path": "src/marshmallow/validate.py", "class_name": "ContainsOnly", "func_name": "__call__", "text": "文件路径: src/marshmallow/validate.py, 类名: ContainsOnly\n    def __call__(self, value):\n        # We can't use set.issubset because does not handle unhashable types\n        for val in value:\n            if val not in self.choices:\n                raise ValidationError(self._format_error(value))\n        return value\n", "tokens": ["src", "marshmallow", "validate", "py", "containsonly", "def", "__call__", "self", "value", "we", "can", "t", "use", "set", "issubset", "because", "does", "not", "handle", "unhashable", "types", "for", "val", "in", "value", "if", "val", "not", "in", "self", "choices", "raise", "validationerror", "self", "_format_error", "value", "return", "value"], "doc_len": 38}
{"doc_id": "tests/base.py::assert_date_equal", "file_path": "tests/base.py", "class_name": null, "func_name": "assert_date_equal", "text": "文件路径: tests/base.py\ndef assert_date_equal(d1, d2):\n    assert d1.year == d2.year\n    assert d1.month == d2.month\n    assert d1.day == d2.day\n", "tokens": ["tests", "base", "py", "def", "assert_date_equal", "d1", "d2", "assert", "d1", "year", "d2", "year", "assert", "d1", "month", "d2", "month", "assert", "d1", "day", "d2", "day"], "doc_len": 22}
{"doc_id": "tests/base.py::assert_time_equal", "file_path": "tests/base.py", "class_name": null, "func_name": "assert_time_equal", "text": "文件路径: tests/base.py\ndef assert_time_equal(t1, t2):\n    assert t1.hour == t2.hour\n    assert t1.minute == t2.minute\n    assert t1.second == t2.second\n    assert t1.microsecond == t2.microsecond\n", "tokens": ["tests", "base", "py", "def", "assert_time_equal", "t1", "t2", "assert", "t1", "hour", "t2", "hour", "assert", "t1", "minute", "t2", "minute", "assert", "t1", "second", "t2", "second", "assert", "t1", "microsecond", "t2", "microsecond"], "doc_len": 27}
{"doc_id": "tests/base.py::User.__init__", "file_path": "tests/base.py", "class_name": "User", "func_name": "__init__", "text": "文件路径: tests/base.py, 类名: User\n    def __init__(\n        self,\n        name,\n        age=0,\n        id_=None,\n        homepage=None,\n        email=None,\n        registered=True,\n        time_registered=None,\n        birthdate=None,\n        balance=100,\n        sex=\"male\",\n        employer=None,\n        various_data=None,\n    ):\n        self.name = name\n        self.age = age\n        # A naive datetime\n        self.created = dt.datetime(2013, 11, 10, 14, 20, 58)\n        # A TZ-aware datetime\n        self.updated = central.localize(\n            dt.datetime(2013, 11, 10, 14, 20, 58), is_dst=False\n        )\n        self.id = id_\n        self.homepage = homepage\n        self.email = email\n        self.balance = balance\n        self.registered = True\n        self.hair_colors = [\"black\", \"brown\", \"blond\", \"redhead\"]\n        self.sex_choices = (\"male\", \"female\")\n        self.finger_count = 10\n        self.uid = uuid.uuid1()\n        self.time_registered = time_registered or dt.time(1, 23, 45, 6789)\n        self.birthdate = birthdate or dt.date(2013, 1, 23)\n        self.activation_date = dt.date(2013, 12, 11)\n        self.sex = sex\n        self.employer = employer\n        self.relatives = []\n        self.various_data = various_data or {\n            \"pets\": [\"cat\", \"dog\"],\n            \"address\": \"1600 Pennsylvania Ave\\n\" \"Washington, DC 20006\",\n        }\n", "tokens": ["tests", "base", "py", "user", "def", "__init__", "self", "name", "age", "0", "id_", "none", "homepage", "none", "email", "none", "registered", "true", "time_registered", "none", "birthdate", "none", "balance", "100", "sex", "male", "employer", "none", "various_data", "none", "self", "name", "name", "self", "age", "age", "a", "naive", "datetime", "self", "created", "dt", "datetime", "2013", "11", "10", "14", "20", "58", "a", "tz", "aware", "datetime", "self", "updated", "central", "localize", "dt", "datetime", "2013", "11", "10", "14", "20", "58", "is_dst", "false", "self", "id", "id_", "self", "homepage", "homepage", "self", "email", "email", "self", "balance", "balance", "self", "registered", "true", "self", "hair_colors", "black", "brown", "blond", "redhead", "self", "sex_choices", "male", "female", "self", "finger_count", "10", "self", "uid", "uuid", "uuid1", "self", "time_registered", "time_registered", "or", "dt", "time", "1", "23", "45", "6789", "self", "birthdate", "birthdate", "or", "dt", "date", "2013", "1", "23", "self", "activation_date", "dt", "date", "2013", "12", "11", "self", "sex", "sex", "self", "employer", "employer", "self", "relatives", "self", "various_data", "various_data", "or", "pets", "cat", "dog", "address", "1600", "pennsylvania", "ave", "n", "washington", "dc", "20006"], "doc_len": 148}
{"doc_id": "tests/base.py::User.since_created", "file_path": "tests/base.py", "class_name": "User", "func_name": "since_created", "text": "文件路径: tests/base.py, 类名: User\n    def since_created(self):\n        return dt.datetime(2013, 11, 24) - self.created\n", "tokens": ["tests", "base", "py", "user", "def", "since_created", "self", "return", "dt", "datetime", "2013", "11", "24", "self", "created"], "doc_len": 15}
{"doc_id": "tests/base.py::User.__repr__", "file_path": "tests/base.py", "class_name": "User", "func_name": "__repr__", "text": "文件路径: tests/base.py, 类名: User\n    def __repr__(self):\n        return \"<User {}>\".format(self.name)\n", "tokens": ["tests", "base", "py", "user", "def", "__repr__", "self", "return", "user", "format", "self", "name"], "doc_len": 12}
{"doc_id": "tests/base.py::Blog.__init__", "file_path": "tests/base.py", "class_name": "Blog", "func_name": "__init__", "text": "文件路径: tests/base.py, 类名: Blog\n    def __init__(self, title, user, collaborators=None, categories=None, id_=None):\n        self.title = title\n        self.user = user\n        self.collaborators = collaborators or []  # List/tuple of users\n        self.categories = categories\n        self.id = id_\n", "tokens": ["tests", "base", "py", "blog", "def", "__init__", "self", "title", "user", "collaborators", "none", "categories", "none", "id_", "none", "self", "title", "title", "self", "user", "user", "self", "collaborators", "collaborators", "or", "list", "tuple", "of", "users", "self", "categories", "categories", "self", "id", "id_"], "doc_len": 35}
{"doc_id": "tests/base.py::Blog.__contains__", "file_path": "tests/base.py", "class_name": "Blog", "func_name": "__contains__", "text": "文件路径: tests/base.py, 类名: Blog\n    def __contains__(self, item):\n        return item.name in [each.name for each in self.collaborators]\n", "tokens": ["tests", "base", "py", "blog", "def", "__contains__", "self", "item", "return", "item", "name", "in", "each", "name", "for", "each", "in", "self", "collaborators"], "doc_len": 19}
{"doc_id": "tests/base.py::DummyModel.__init__", "file_path": "tests/base.py", "class_name": "DummyModel", "func_name": "__init__", "text": "文件路径: tests/base.py, 类名: DummyModel\n    def __init__(self, foo):\n        self.foo = foo\n", "tokens": ["tests", "base", "py", "dummymodel", "def", "__init__", "self", "foo", "self", "foo", "foo"], "doc_len": 11}
{"doc_id": "tests/base.py::DummyModel.__eq__", "file_path": "tests/base.py", "class_name": "DummyModel", "func_name": "__eq__", "text": "文件路径: tests/base.py, 类名: DummyModel\n    def __eq__(self, other):\n        return self.foo == other.foo\n", "tokens": ["tests", "base", "py", "dummymodel", "def", "__eq__", "self", "other", "return", "self", "foo", "other", "foo"], "doc_len": 13}
{"doc_id": "tests/base.py::DummyModel.__str__", "file_path": "tests/base.py", "class_name": "DummyModel", "func_name": "__str__", "text": "文件路径: tests/base.py, 类名: DummyModel\n    def __str__(self):\n        return \"bar {}\".format(self.foo)\n", "tokens": ["tests", "base", "py", "dummymodel", "def", "__str__", "self", "return", "bar", "format", "self", "foo"], "doc_len": 12}
{"doc_id": "tests/base.py::Uppercased._serialize", "file_path": "tests/base.py", "class_name": "Uppercased", "func_name": "_serialize", "text": "文件路径: tests/base.py, 类名: Uppercased\n    def _serialize(self, value, attr, obj):\n        if value:\n            return value.upper()\n", "tokens": ["tests", "base", "py", "uppercased", "def", "_serialize", "self", "value", "attr", "obj", "if", "value", "return", "value", "upper"], "doc_len": 15}
{"doc_id": "tests/base.py::get_lowername", "file_path": "tests/base.py", "class_name": null, "func_name": "get_lowername", "text": "文件路径: tests/base.py\ndef get_lowername(obj):\n    if obj is None:\n        return missing\n    if isinstance(obj, dict):\n        return obj.get(\"name\").lower()\n    else:\n        return obj.name.lower()\n", "tokens": ["tests", "base", "py", "def", "get_lowername", "obj", "if", "obj", "is", "none", "return", "missing", "if", "isinstance", "obj", "dict", "return", "obj", "get", "name", "lower", "else", "return", "obj", "name", "lower"], "doc_len": 26}
{"doc_id": "tests/base.py::UserSchema.get_is_old", "file_path": "tests/base.py", "class_name": "UserSchema", "func_name": "get_is_old", "text": "文件路径: tests/base.py, 类名: UserSchema\n    def get_is_old(self, obj):\n        if obj is None:\n            return missing\n        if isinstance(obj, dict):\n            age = obj.get(\"age\")\n        else:\n            age = obj.age\n        try:\n            return age > 80\n        except TypeError as te:\n            raise ValidationError(str(te))\n", "tokens": ["tests", "base", "py", "userschema", "def", "get_is_old", "self", "obj", "if", "obj", "is", "none", "return", "missing", "if", "isinstance", "obj", "dict", "age", "obj", "get", "age", "else", "age", "obj", "age", "try", "return", "age", "80", "except", "typeerror", "as", "te", "raise", "validationerror", "str", "te"], "doc_len": 38}
{"doc_id": "tests/base.py::UserSchema.make_user", "file_path": "tests/base.py", "class_name": "UserSchema", "func_name": "make_user", "text": "文件路径: tests/base.py, 类名: UserSchema\n    def make_user(self, data, **kwargs):\n        return User(**data)\n", "tokens": ["tests", "base", "py", "userschema", "def", "make_user", "self", "data", "kwargs", "return", "user", "data"], "doc_len": 12}
{"doc_id": "tests/base.py::UserMetaSchema.get_is_old", "file_path": "tests/base.py", "class_name": "UserMetaSchema", "func_name": "get_is_old", "text": "文件路径: tests/base.py, 类名: UserMetaSchema\n    def get_is_old(self, obj):\n        if obj is None:\n            return missing\n        if isinstance(obj, dict):\n            age = obj.get(\"age\")\n        else:\n            age = obj.age\n        try:\n            return age > 80\n        except TypeError as te:\n            raise ValidationError(str(te))\n", "tokens": ["tests", "base", "py", "usermetaschema", "def", "get_is_old", "self", "obj", "if", "obj", "is", "none", "return", "missing", "if", "isinstance", "obj", "dict", "age", "obj", "get", "age", "else", "age", "obj", "age", "try", "return", "age", "80", "except", "typeerror", "as", "te", "raise", "validationerror", "str", "te"], "doc_len": 38}
{"doc_id": "tests/base.py::mockjson.dumps", "file_path": "tests/base.py", "class_name": "mockjson", "func_name": "dumps", "text": "文件路径: tests/base.py, 类名: mockjson\n    def dumps(val):\n        return b\"{'foo': 42}\"\n", "tokens": ["tests", "base", "py", "mockjson", "def", "dumps", "val", "return", "b", "foo", "42"], "doc_len": 11}
{"doc_id": "tests/base.py::mockjson.loads", "file_path": "tests/base.py", "class_name": "mockjson", "func_name": "loads", "text": "文件路径: tests/base.py, 类名: mockjson\n    def loads(val):\n        return {\"foo\": 42}\n", "tokens": ["tests", "base", "py", "mockjson", "def", "loads", "val", "return", "foo", "42"], "doc_len": 10}
{"doc_id": "tests/conftest.py::user", "file_path": "tests/conftest.py", "class_name": null, "func_name": "user", "text": "文件路径: tests/conftest.py\ndef user():\n    return User(name=\"Monty\", age=42.3, homepage=\"http://monty.python.org/\")\n", "tokens": ["tests", "conftest", "py", "def", "user", "return", "user", "name", "monty", "age", "42", "3", "homepage", "http", "monty", "python", "org"], "doc_len": 17}
{"doc_id": "tests/conftest.py::blog", "file_path": "tests/conftest.py", "class_name": null, "func_name": "blog", "text": "文件路径: tests/conftest.py\ndef blog(user):\n    col1 = User(name=\"Mick\", age=123)\n    col2 = User(name=\"Keith\", age=456)\n    return Blog(\n        \"Monty's blog\",\n        user=user,\n        categories=[\"humor\", \"violence\"],\n        collaborators=[col1, col2],\n    )\n", "tokens": ["tests", "conftest", "py", "def", "blog", "user", "col1", "user", "name", "mick", "age", "123", "col2", "user", "name", "keith", "age", "456", "return", "blog", "monty", "s", "blog", "user", "user", "categories", "humor", "violence", "collaborators", "col1", "col2"], "doc_len": 31}
{"doc_id": "tests/conftest.py::serialized_user", "file_path": "tests/conftest.py", "class_name": null, "func_name": "serialized_user", "text": "文件路径: tests/conftest.py\ndef serialized_user(user):\n    return UserSchema().dump(user)\n", "tokens": ["tests", "conftest", "py", "def", "serialized_user", "user", "return", "userschema", "dump", "user"], "doc_len": 10}
{"doc_id": "tests/test_decorators.py::test_decorated_processors", "file_path": "tests/test_decorators.py", "class_name": null, "func_name": "test_decorated_processors", "text": "文件路径: tests/test_decorators.py\ndef test_decorated_processors(partial_val):\n    class ExampleSchema(Schema):\n        \"\"\"Includes different ways to invoke decorators and set up methods\"\"\"\n\n        TAG = \"TAG\"\n\n        value = fields.Integer(as_string=True)\n\n        # Implicit default raw, pre dump, static method.\n        @pre_dump\n        def increment_value(self, item, **kwargs):\n            assert \"many\" in kwargs\n            item[\"value\"] += 1\n            return item\n\n        # Implicit default raw, post dump, class method.\n        @post_dump\n        def add_tag(self, item, **kwargs):\n            assert \"many\" in kwargs\n            item[\"value\"] = self.TAG + item[\"value\"]\n            return item\n\n        # Explicitly raw, post dump, instance method.\n        @post_dump(pass_many=True)\n        def add_envelope(self, data, many, **kwargs):\n            key = self.get_envelope_key(many)\n            return {key: data}\n\n        # Explicitly raw, pre load, instance method.\n        @pre_load(pass_many=True)\n        def remove_envelope(self, data, many, partial, **kwargs):\n            assert partial is partial_val\n            key = self.get_envelope_key(many)\n            return data[key]\n\n        @staticmethod\n        def get_envelope_key(many):\n            return \"data\" if many else \"datum\"\n\n        # Explicitly not raw, pre load, instance method.\n        @pre_load(pass_many=False)\n        def remove_tag(self, item, partial, **kwargs):\n            assert partial is partial_val\n            assert \"many\" in kwargs\n            item[\"value\"] = item[\"value\"][len(self.TAG) :]\n            return item\n\n        # Explicit default raw, post load, instance method.\n        @post_load()\n        def decrement_value(self, item, partial, **kwargs):\n            assert partial is partial_val\n            assert \"many\" in kwargs\n            item[\"value\"] -= 1\n            return item\n\n    schema = ExampleSchema(partial=partial_val)\n\n    # Need to re-create these because the processors will modify in place.\n    make_item = lambda: {\"value\": 3}\n    make_items = lambda: [make_item(), {\"value\": 5}]\n\n    item_dumped = schema.dump(make_item())\n    assert item_dumped == {\"datum\": {\"value\": \"TAG4\"}}\n    item_loaded = schema.load(item_dumped)\n    assert item_loaded == make_item()\n\n    items_dumped = schema.dump(make_items(), many=True)\n    assert items_dumped == {\"data\": [{\"value\": \"TAG4\"}, {\"value\": \"TAG6\"}]}\n    items_loaded = schema.load(items_dumped, many=True)\n    assert items_loaded == make_items()\n", "tokens": ["tests", "test_decorators", "py", "def", "test_decorated_processors", "partial_val", "class", "exampleschema", "schema", "includes", "different", "ways", "to", "invoke", "decorators", "and", "set", "up", "methods", "tag", "tag", "value", "fields", "integer", "as_string", "true", "implicit", "default", "raw", "pre", "dump", "static", "method", "pre_dump", "def", "increment_value", "self", "item", "kwargs", "assert", "many", "in", "kwargs", "item", "value", "1", "return", "item", "implicit", "default", "raw", "post", "dump", "class", "method", "post_dump", "def", "add_tag", "self", "item", "kwargs", "assert", "many", "in", "kwargs", "item", "value", "self", "tag", "item", "value", "return", "item", "explicitly", "raw", "post", "dump", "instance", "method", "post_dump", "pass_many", "true", "def", "add_envelope", "self", "data", "many", "kwargs", "key", "self", "get_envelope_key", "many", "return", "key", "data", "explicitly", "raw", "pre", "load", "instance", "method", "pre_load", "pass_many", "true", "def", "remove_envelope", "self", "data", "many", "partial", "kwargs", "assert", "partial", "is", "partial_val", "key", "self", "get_envelope_key", "many", "return", "data", "key", "staticmethod", "def", "get_envelope_key", "many", "return", "data", "if", "many", "else", "datum", "explicitly", "not", "raw", "pre", "load", "instance", "method", "pre_load", "pass_many", "false", "def", "remove_tag", "self", "item", "partial", "kwargs", "assert", "partial", "is", "partial_val", "assert", "many", "in", "kwargs", "item", "value", "item", "value", "len", "self", "tag", "return", "item", "explicit", "default", "raw", "post", "load", "instance", "method", "post_load", "def", "decrement_value", "self", "item", "partial", "kwargs", "assert", "partial", "is", "partial_val", "assert", "many", "in", "kwargs", "item", "value", "1", "return", "item", "schema", "exampleschema", "partial", "partial_val", "need", "to", "re", "create", "these", "because", "the", "processors", "will", "modify", "in", "place", "make_item", "lambda", "value", "3", "make_items", "lambda", "make_item", "value", "5", "item_dumped", "schema", "dump", "make_item", "assert", "item_dumped", "datum", "value", "tag4", "item_loaded", "schema", "load", "item_dumped", "assert", "item_loaded", "make_item", "items_dumped", "schema", "dump", "make_items", "many", "true", "assert", "items_dumped", "data", "value", "tag4", "value", "tag6", "items_loaded", "schema", "load", "items_dumped", "many", "true", "assert", "items_loaded", "make_items"], "doc_len": 255}
{"doc_id": "tests/test_decorators.py::test_decorated_processor_returning_none", "file_path": "tests/test_decorators.py", "class_name": null, "func_name": "test_decorated_processor_returning_none", "text": "文件路径: tests/test_decorators.py\ndef test_decorated_processor_returning_none(unknown):\n    class PostSchema(Schema):\n        value = fields.Integer()\n\n        @post_load\n        def load_none(self, item, **kwargs):\n            return None\n\n        @post_dump\n        def dump_none(self, item, **kwargs):\n            return None\n\n    class PreSchema(Schema):\n        value = fields.Integer()\n\n        @pre_load\n        def load_none(self, item, **kwargs):\n            return None\n\n        @pre_dump\n        def dump_none(self, item, **kwargs):\n            return None\n\n    schema = PostSchema(unknown=unknown)\n    assert schema.dump({\"value\": 3}) is None\n    assert schema.load({\"value\": 3}) is None\n    schema = PreSchema(unknown=unknown)\n    assert schema.dump({\"value\": 3}) == {}\n    with pytest.raises(ValidationError) as excinfo:\n        schema.load({\"value\": 3})\n    assert excinfo.value.messages == {\"_schema\": [\"Invalid input type.\"]}\n", "tokens": ["tests", "test_decorators", "py", "def", "test_decorated_processor_returning_none", "unknown", "class", "postschema", "schema", "value", "fields", "integer", "post_load", "def", "load_none", "self", "item", "kwargs", "return", "none", "post_dump", "def", "dump_none", "self", "item", "kwargs", "return", "none", "class", "preschema", "schema", "value", "fields", "integer", "pre_load", "def", "load_none", "self", "item", "kwargs", "return", "none", "pre_dump", "def", "dump_none", "self", "item", "kwargs", "return", "none", "schema", "postschema", "unknown", "unknown", "assert", "schema", "dump", "value", "3", "is", "none", "assert", "schema", "load", "value", "3", "is", "none", "schema", "preschema", "unknown", "unknown", "assert", "schema", "dump", "value", "3", "with", "pytest", "raises", "validationerror", "as", "excinfo", "schema", "load", "value", "3", "assert", "excinfo", "value", "messages", "_schema", "invalid", "input", "type"], "doc_len": 95}
{"doc_id": "tests/test_decorators.py::TestPassOriginal.test_pass_original_single", "file_path": "tests/test_decorators.py", "class_name": "TestPassOriginal", "func_name": "test_pass_original_single", "text": "文件路径: tests/test_decorators.py, 类名: TestPassOriginal\n    def test_pass_original_single(self):\n        class MySchema(Schema):\n            foo = fields.Field()\n\n            @post_load(pass_original=True)\n            def post_load(self, data, original_data, **kwargs):\n                ret = data.copy()\n                ret[\"_post_load\"] = original_data[\"sentinel\"]\n                return ret\n\n            @post_dump(pass_original=True)\n            def post_dump(self, data, obj, **kwargs):\n                ret = data.copy()\n                ret[\"_post_dump\"] = obj[\"sentinel\"]\n                return ret\n\n        schema = MySchema(unknown=EXCLUDE)\n        datum = {\"foo\": 42, \"sentinel\": 24}\n        item_loaded = schema.load(datum)\n        assert item_loaded[\"foo\"] == 42\n        assert item_loaded[\"_post_load\"] == 24\n\n        item_dumped = schema.dump(datum)\n\n        assert item_dumped[\"foo\"] == 42\n        assert item_dumped[\"_post_dump\"] == 24\n", "tokens": ["tests", "test_decorators", "py", "testpassoriginal", "def", "test_pass_original_single", "self", "class", "myschema", "schema", "foo", "fields", "field", "post_load", "pass_original", "true", "def", "post_load", "self", "data", "original_data", "kwargs", "ret", "data", "copy", "ret", "_post_load", "original_data", "sentinel", "return", "ret", "post_dump", "pass_original", "true", "def", "post_dump", "self", "data", "obj", "kwargs", "ret", "data", "copy", "ret", "_post_dump", "obj", "sentinel", "return", "ret", "schema", "myschema", "unknown", "exclude", "datum", "foo", "42", "sentinel", "24", "item_loaded", "schema", "load", "datum", "assert", "item_loaded", "foo", "42", "assert", "item_loaded", "_post_load", "24", "item_dumped", "schema", "dump", "datum", "assert", "item_dumped", "foo", "42", "assert", "item_dumped", "_post_dump", "24"], "doc_len": 82}
{"doc_id": "tests/test_decorators.py::TestPassOriginal.test_pass_original_many", "file_path": "tests/test_decorators.py", "class_name": "TestPassOriginal", "func_name": "test_pass_original_many", "text": "文件路径: tests/test_decorators.py, 类名: TestPassOriginal\n    def test_pass_original_many(self):\n        class MySchema(Schema):\n            foo = fields.Field()\n\n            @post_load(pass_many=True, pass_original=True)\n            def post_load(self, data, original, many, **kwargs):\n                if many:\n                    ret = []\n                    for item, orig_item in zip(data, original):\n                        item[\"_post_load\"] = orig_item[\"sentinel\"]\n                        ret.append(item)\n                else:\n                    ret = data.copy()\n                    ret[\"_post_load\"] = original[\"sentinel\"]\n                return ret\n\n            @post_dump(pass_many=True, pass_original=True)\n            def post_dump(self, data, original, many, **kwargs):\n                if many:\n                    ret = []\n                    for item, orig_item in zip(data, original):\n                        item[\"_post_dump\"] = orig_item[\"sentinel\"]\n                        ret.append(item)\n                else:\n                    ret = data.copy()\n                    ret[\"_post_dump\"] = original[\"sentinel\"]\n                return ret\n\n        schema = MySchema(unknown=EXCLUDE)\n        data = [{\"foo\": 42, \"sentinel\": 24}, {\"foo\": 424, \"sentinel\": 242}]\n        items_loaded = schema.load(data, many=True)\n        assert items_loaded == [\n            {\"foo\": 42, \"_post_load\": 24},\n            {\"foo\": 424, \"_post_load\": 242},\n        ]\n        test_values = [e[\"_post_load\"] for e in items_loaded]\n        assert test_values == [24, 242]\n\n        items_dumped = schema.dump(data, many=True)\n        assert items_dumped == [\n            {\"foo\": 42, \"_post_dump\": 24},\n            {\"foo\": 424, \"_post_dump\": 242},\n        ]\n\n        # Also check load/dump of single item\n\n        datum = {\"foo\": 42, \"sentinel\": 24}\n        item_loaded = schema.load(datum, many=False)\n        assert item_loaded == {\"foo\": 42, \"_post_load\": 24}\n\n        item_dumped = schema.dump(datum, many=False)\n        assert item_dumped == {\"foo\": 42, \"_post_dump\": 24}\n", "tokens": ["tests", "test_decorators", "py", "testpassoriginal", "def", "test_pass_original_many", "self", "class", "myschema", "schema", "foo", "fields", "field", "post_load", "pass_many", "true", "pass_original", "true", "def", "post_load", "self", "data", "original", "many", "kwargs", "if", "many", "ret", "for", "item", "orig_item", "in", "zip", "data", "original", "item", "_post_load", "orig_item", "sentinel", "ret", "append", "item", "else", "ret", "data", "copy", "ret", "_post_load", "original", "sentinel", "return", "ret", "post_dump", "pass_many", "true", "pass_original", "true", "def", "post_dump", "self", "data", "original", "many", "kwargs", "if", "many", "ret", "for", "item", "orig_item", "in", "zip", "data", "original", "item", "_post_dump", "orig_item", "sentinel", "ret", "append", "item", "else", "ret", "data", "copy", "ret", "_post_dump", "original", "sentinel", "return", "ret", "schema", "myschema", "unknown", "exclude", "data", "foo", "42", "sentinel", "24", "foo", "424", "sentinel", "242", "items_loaded", "schema", "load", "data", "many", "true", "assert", "items_loaded", "foo", "42", "_post_load", "24", "foo", "424", "_post_load", "242", "test_values", "e", "_post_load", "for", "e", "in", "items_loaded", "assert", "test_values", "24", "242", "items_dumped", "schema", "dump", "data", "many", "true", "assert", "items_dumped", "foo", "42", "_post_dump", "24", "foo", "424", "_post_dump", "242", "also", "check", "load", "dump", "of", "single", "item", "datum", "foo", "42", "sentinel", "24", "item_loaded", "schema", "load", "datum", "many", "false", "assert", "item_loaded", "foo", "42", "_post_load", "24", "item_dumped", "schema", "dump", "datum", "many", "false", "assert", "item_dumped", "foo", "42", "_post_dump", "24"], "doc_len": 183}
{"doc_id": "tests/test_decorators.py::test_decorated_processor_inheritance", "file_path": "tests/test_decorators.py", "class_name": null, "func_name": "test_decorated_processor_inheritance", "text": "文件路径: tests/test_decorators.py\ndef test_decorated_processor_inheritance():\n    class ParentSchema(Schema):\n        @post_dump\n        def inherited(self, item, **kwargs):\n            item[\"inherited\"] = \"inherited\"\n            return item\n\n        @post_dump\n        def overridden(self, item, **kwargs):\n            item[\"overridden\"] = \"base\"\n            return item\n\n        @post_dump\n        def deleted(self, item, **kwargs):\n            item[\"deleted\"] = \"retained\"\n            return item\n\n    class ChildSchema(ParentSchema):\n        @post_dump\n        def overridden(self, item, **kwargs):\n            item[\"overridden\"] = \"overridden\"\n            return item\n\n        deleted = None\n\n    parent_dumped = ParentSchema().dump({})\n    assert parent_dumped == {\n        \"inherited\": \"inherited\",\n        \"overridden\": \"base\",\n        \"deleted\": \"retained\",\n    }\n\n    child_dumped = ChildSchema().dump({})\n    assert child_dumped == {\"inherited\": \"inherited\", \"overridden\": \"overridden\"}\n", "tokens": ["tests", "test_decorators", "py", "def", "test_decorated_processor_inheritance", "class", "parentschema", "schema", "post_dump", "def", "inherited", "self", "item", "kwargs", "item", "inherited", "inherited", "return", "item", "post_dump", "def", "overridden", "self", "item", "kwargs", "item", "overridden", "base", "return", "item", "post_dump", "def", "deleted", "self", "item", "kwargs", "item", "deleted", "retained", "return", "item", "class", "childschema", "parentschema", "post_dump", "def", "overridden", "self", "item", "kwargs", "item", "overridden", "overridden", "return", "item", "deleted", "none", "parent_dumped", "parentschema", "dump", "assert", "parent_dumped", "inherited", "inherited", "overridden", "base", "deleted", "retained", "child_dumped", "childschema", "dump", "assert", "child_dumped", "inherited", "inherited", "overridden", "overridden"], "doc_len": 77}
{"doc_id": "tests/test_decorators.py::test_pre_dump_is_invoked_before_implicit_field_generation", "file_path": "tests/test_decorators.py", "class_name": null, "func_name": "test_pre_dump_is_invoked_before_implicit_field_generation", "text": "文件路径: tests/test_decorators.py\ndef test_pre_dump_is_invoked_before_implicit_field_generation():\n    class Foo(Schema):\n        field = fields.Integer()\n\n        @pre_dump\n        def hook(self, data, **kwargs):\n            data[\"generated_field\"] = 7\n            return data\n\n        class Meta:\n            # Removing generated_field from here drops it from the output\n            fields = (\"field\", \"generated_field\")\n\n    assert Foo().dump({\"field\": 5}) == {\"field\": 5, \"generated_field\": 7}\n", "tokens": ["tests", "test_decorators", "py", "def", "test_pre_dump_is_invoked_before_implicit_field_generation", "class", "foo", "schema", "field", "fields", "integer", "pre_dump", "def", "hook", "self", "data", "kwargs", "data", "generated_field", "7", "return", "data", "class", "meta", "removing", "generated_field", "from", "here", "drops", "it", "from", "the", "output", "fields", "field", "generated_field", "assert", "foo", "dump", "field", "5", "field", "5", "generated_field", "7"], "doc_len": 45}
{"doc_id": "tests/test_decorators.py::ValidatesSchema.validate_foo", "file_path": "tests/test_decorators.py", "class_name": "ValidatesSchema", "func_name": "validate_foo", "text": "文件路径: tests/test_decorators.py, 类名: ValidatesSchema\n    def validate_foo(self, value):\n        if value != 42:\n            raise ValidationError(\"The answer to life the universe and everything.\")\n", "tokens": ["tests", "test_decorators", "py", "validatesschema", "def", "validate_foo", "self", "value", "if", "value", "42", "raise", "validationerror", "the", "answer", "to", "life", "the", "universe", "and", "everything"], "doc_len": 21}
{"doc_id": "tests/test_decorators.py::TestValidatesDecorator.test_validates", "file_path": "tests/test_decorators.py", "class_name": "TestValidatesDecorator", "func_name": "test_validates", "text": "文件路径: tests/test_decorators.py, 类名: TestValidatesDecorator\n    def test_validates(self):\n        class VSchema(Schema):\n            s = fields.String()\n\n            @validates(\"s\")\n            def validate_string(self, data):\n                raise ValidationError(\"nope\")\n\n        with pytest.raises(ValidationError) as excinfo:\n            VSchema().load({\"s\": \"bar\"})\n\n        assert excinfo.value.messages == {\"s\": [\"nope\"]}\n", "tokens": ["tests", "test_decorators", "py", "testvalidatesdecorator", "def", "test_validates", "self", "class", "vschema", "schema", "s", "fields", "string", "validates", "s", "def", "validate_string", "self", "data", "raise", "validationerror", "nope", "with", "pytest", "raises", "validationerror", "as", "excinfo", "vschema", "load", "s", "bar", "assert", "excinfo", "value", "messages", "s", "nope"], "doc_len": 38}
{"doc_id": "tests/test_decorators.py::TestValidatesDecorator.test_validates_with_attribute", "file_path": "tests/test_decorators.py", "class_name": "TestValidatesDecorator", "func_name": "test_validates_with_attribute", "text": "文件路径: tests/test_decorators.py, 类名: TestValidatesDecorator\n    def test_validates_with_attribute(self):\n        class S1(Schema):\n            s = fields.String(attribute=\"string_name\")\n\n            @validates(\"s\")\n            def validate_string(self, data):\n                raise ValidationError(\"nope\")\n\n        with pytest.raises(ValidationError) as excinfo:\n            S1().load({\"s\": \"foo\"})\n        assert excinfo.value.messages == {\"s\": [\"nope\"]}\n\n        with pytest.raises(ValidationError):\n            S1(many=True).load([{\"s\": \"foo\"}])\n", "tokens": ["tests", "test_decorators", "py", "testvalidatesdecorator", "def", "test_validates_with_attribute", "self", "class", "s1", "schema", "s", "fields", "string", "attribute", "string_name", "validates", "s", "def", "validate_string", "self", "data", "raise", "validationerror", "nope", "with", "pytest", "raises", "validationerror", "as", "excinfo", "s1", "load", "s", "foo", "assert", "excinfo", "value", "messages", "s", "nope", "with", "pytest", "raises", "validationerror", "s1", "many", "true", "load", "s", "foo"], "doc_len": 50}
{"doc_id": "tests/test_decorators.py::TestValidatesDecorator.test_validates_decorator", "file_path": "tests/test_decorators.py", "class_name": "TestValidatesDecorator", "func_name": "test_validates_decorator", "text": "文件路径: tests/test_decorators.py, 类名: TestValidatesDecorator\n    def test_validates_decorator(self):\n        schema = ValidatesSchema()\n\n        errors = schema.validate({\"foo\": 41})\n        assert \"foo\" in errors\n        assert errors[\"foo\"][0] == \"The answer to life the universe and everything.\"\n\n        errors = schema.validate({\"foo\": 42})\n        assert errors == {}\n\n        errors = schema.validate([{\"foo\": 42}, {\"foo\": 43}], many=True)\n        assert \"foo\" in errors[1]\n        assert len(errors[1][\"foo\"]) == 1\n        assert errors[1][\"foo\"][0] == \"The answer to life the universe and everything.\"\n\n        errors = schema.validate([{\"foo\": 42}, {\"foo\": 42}], many=True)\n        assert errors == {}\n\n        errors = schema.validate({})\n        assert errors == {}\n\n        with pytest.raises(ValidationError) as excinfo:\n            schema.load({\"foo\": 41})\n        errors = excinfo.value.messages\n        result = excinfo.value.valid_data\n        assert errors\n        assert result == {}\n\n        with pytest.raises(ValidationError) as excinfo:\n            schema.load([{\"foo\": 42}, {\"foo\": 43}], many=True)\n        errors = excinfo.value.messages\n        result = excinfo.value.valid_data\n        assert len(result) == 2\n        assert result[0] == {\"foo\": 42}\n        assert result[1] == {}\n        assert 1 in errors\n        assert \"foo\" in errors[1]\n        assert errors[1][\"foo\"] == [\"The answer to life the universe and everything.\"]\n", "tokens": ["tests", "test_decorators", "py", "testvalidatesdecorator", "def", "test_validates_decorator", "self", "schema", "validatesschema", "errors", "schema", "validate", "foo", "41", "assert", "foo", "in", "errors", "assert", "errors", "foo", "0", "the", "answer", "to", "life", "the", "universe", "and", "everything", "errors", "schema", "validate", "foo", "42", "assert", "errors", "errors", "schema", "validate", "foo", "42", "foo", "43", "many", "true", "assert", "foo", "in", "errors", "1", "assert", "len", "errors", "1", "foo", "1", "assert", "errors", "1", "foo", "0", "the", "answer", "to", "life", "the", "universe", "and", "everything", "errors", "schema", "validate", "foo", "42", "foo", "42", "many", "true", "assert", "errors", "errors", "schema", "validate", "assert", "errors", "with", "pytest", "raises", "validationerror", "as", "excinfo", "schema", "load", "foo", "41", "errors", "excinfo", "value", "messages", "result", "excinfo", "value", "valid_data", "assert", "errors", "assert", "result", "with", "pytest", "raises", "validationerror", "as", "excinfo", "schema", "load", "foo", "42", "foo", "43", "many", "true", "errors", "excinfo", "value", "messages", "result", "excinfo", "value", "valid_data", "assert", "len", "result", "2", "assert", "result", "0", "foo", "42", "assert", "result", "1", "assert", "1", "in", "errors", "assert", "foo", "in", "errors", "1", "assert", "errors", "1", "foo", "the", "answer", "to", "life", "the", "universe", "and", "everything"], "doc_len": 163}
{"doc_id": "tests/test_decorators.py::TestValidatesDecorator.test_field_not_present", "file_path": "tests/test_decorators.py", "class_name": "TestValidatesDecorator", "func_name": "test_field_not_present", "text": "文件路径: tests/test_decorators.py, 类名: TestValidatesDecorator\n    def test_field_not_present(self):\n        class BadSchema(ValidatesSchema):\n            @validates(\"bar\")\n            def validate_bar(self, value):\n                raise ValidationError(\"Never raised.\")\n\n        schema = BadSchema()\n\n        with pytest.raises(ValueError, match='\"bar\" field does not exist.'):\n            schema.validate({\"foo\": 42})\n", "tokens": ["tests", "test_decorators", "py", "testvalidatesdecorator", "def", "test_field_not_present", "self", "class", "badschema", "validatesschema", "validates", "bar", "def", "validate_bar", "self", "value", "raise", "validationerror", "never", "raised", "schema", "badschema", "with", "pytest", "raises", "valueerror", "match", "bar", "field", "does", "not", "exist", "schema", "validate", "foo", "42"], "doc_len": 36}
{"doc_id": "tests/test_decorators.py::TestValidatesDecorator.test_precedence", "file_path": "tests/test_decorators.py", "class_name": "TestValidatesDecorator", "func_name": "test_precedence", "text": "文件路径: tests/test_decorators.py, 类名: TestValidatesDecorator\n    def test_precedence(self):\n        class Schema2(ValidatesSchema):\n            foo = fields.Int(validate=lambda n: n != 42)\n            bar = fields.Int(validate=lambda n: n == 1)\n\n            @validates(\"bar\")\n            def validate_bar(self, value):\n                if value != 2:\n                    raise ValidationError(\"Must be 2\")\n\n        schema = Schema2()\n\n        errors = schema.validate({\"foo\": 42})\n        assert \"foo\" in errors\n        assert len(errors[\"foo\"]) == 1\n        assert \"Invalid value.\" in errors[\"foo\"][0]\n\n        errors = schema.validate({\"bar\": 3})\n        assert \"bar\" in errors\n        assert len(errors[\"bar\"]) == 1\n        assert \"Invalid value.\" in errors[\"bar\"][0]\n\n        errors = schema.validate({\"bar\": 1})\n        assert \"bar\" in errors\n        assert len(errors[\"bar\"]) == 1\n        assert errors[\"bar\"][0] == \"Must be 2\"\n", "tokens": ["tests", "test_decorators", "py", "testvalidatesdecorator", "def", "test_precedence", "self", "class", "schema2", "validatesschema", "foo", "fields", "int", "validate", "lambda", "n", "n", "42", "bar", "fields", "int", "validate", "lambda", "n", "n", "1", "validates", "bar", "def", "validate_bar", "self", "value", "if", "value", "2", "raise", "validationerror", "must", "be", "2", "schema", "schema2", "errors", "schema", "validate", "foo", "42", "assert", "foo", "in", "errors", "assert", "len", "errors", "foo", "1", "assert", "invalid", "value", "in", "errors", "foo", "0", "errors", "schema", "validate", "bar", "3", "assert", "bar", "in", "errors", "assert", "len", "errors", "bar", "1", "assert", "invalid", "value", "in", "errors", "bar", "0", "errors", "schema", "validate", "bar", "1", "assert", "bar", "in", "errors", "assert", "len", "errors", "bar", "1", "assert", "errors", "bar", "0", "must", "be", "2"], "doc_len": 105}
{"doc_id": "tests/test_decorators.py::TestValidatesDecorator.test_validates_with_data_key", "file_path": "tests/test_decorators.py", "class_name": "TestValidatesDecorator", "func_name": "test_validates_with_data_key", "text": "文件路径: tests/test_decorators.py, 类名: TestValidatesDecorator\n    def test_validates_with_data_key(self):\n        class BadSchema(Schema):\n            foo = fields.String(data_key=\"foo-name\")\n\n            @validates(\"foo\")\n            def validate_string(self, data):\n                raise ValidationError(\"nope\")\n\n        schema = BadSchema()\n        errors = schema.validate({\"foo-name\": \"data\"})\n        assert \"foo-name\" in errors\n        assert errors[\"foo-name\"] == [\"nope\"]\n\n        schema = BadSchema()\n        errors = schema.validate(\n            [{\"foo-name\": \"data\"}, {\"foo-name\": \"data2\"}], many=True\n        )\n        assert errors == {0: {\"foo-name\": [\"nope\"]}, 1: {\"foo-name\": [\"nope\"]}}\n", "tokens": ["tests", "test_decorators", "py", "testvalidatesdecorator", "def", "test_validates_with_data_key", "self", "class", "badschema", "schema", "foo", "fields", "string", "data_key", "foo", "name", "validates", "foo", "def", "validate_string", "self", "data", "raise", "validationerror", "nope", "schema", "badschema", "errors", "schema", "validate", "foo", "name", "data", "assert", "foo", "name", "in", "errors", "assert", "errors", "foo", "name", "nope", "schema", "badschema", "errors", "schema", "validate", "foo", "name", "data", "foo", "name", "data2", "many", "true", "assert", "errors", "0", "foo", "name", "nope", "1", "foo", "name", "nope"], "doc_len": 66}
{"doc_id": "tests/test_decorators.py::TestValidatesSchemaDecorator.test_validator_nested_many_invalid_data", "file_path": "tests/test_decorators.py", "class_name": "TestValidatesSchemaDecorator", "func_name": "test_validator_nested_many_invalid_data", "text": "文件路径: tests/test_decorators.py, 类名: TestValidatesSchemaDecorator\n    def test_validator_nested_many_invalid_data(self):\n        class NestedSchema(Schema):\n            foo = fields.Int(required=True)\n\n        class MySchema(Schema):\n            nested = fields.Nested(NestedSchema, required=True, many=True)\n\n        schema = MySchema()\n        errors = schema.validate({\"nested\": [1]})\n        assert errors\n        assert \"nested\" in errors\n        assert 0 in errors[\"nested\"]\n        assert errors[\"nested\"][0] == {\"_schema\": [\"Invalid input type.\"]}\n", "tokens": ["tests", "test_decorators", "py", "testvalidatesschemadecorator", "def", "test_validator_nested_many_invalid_data", "self", "class", "nestedschema", "schema", "foo", "fields", "int", "required", "true", "class", "myschema", "schema", "nested", "fields", "nested", "nestedschema", "required", "true", "many", "true", "schema", "myschema", "errors", "schema", "validate", "nested", "1", "assert", "errors", "assert", "nested", "in", "errors", "assert", "0", "in", "errors", "nested", "assert", "errors", "nested", "0", "_schema", "invalid", "input", "type"], "doc_len": 52}
{"doc_id": "tests/test_decorators.py::TestValidatesSchemaDecorator.test_validator_nested_many_schema_error", "file_path": "tests/test_decorators.py", "class_name": "TestValidatesSchemaDecorator", "func_name": "test_validator_nested_many_schema_error", "text": "文件路径: tests/test_decorators.py, 类名: TestValidatesSchemaDecorator\n    def test_validator_nested_many_schema_error(self):\n        class NestedSchema(Schema):\n            foo = fields.Int(required=True)\n\n            @validates_schema\n            def validate_schema(self, data, **kwargs):\n                raise ValidationError(\"This will never work.\")\n\n        class MySchema(Schema):\n            nested = fields.Nested(NestedSchema, required=True, many=True)\n\n        schema = MySchema()\n        errors = schema.validate({\"nested\": [{\"foo\": 1}]})\n        assert errors\n        assert \"nested\" in errors\n        assert 0 in errors[\"nested\"]\n        assert errors[\"nested\"][0] == {\"_schema\": [\"This will never work.\"]}\n", "tokens": ["tests", "test_decorators", "py", "testvalidatesschemadecorator", "def", "test_validator_nested_many_schema_error", "self", "class", "nestedschema", "schema", "foo", "fields", "int", "required", "true", "validates_schema", "def", "validate_schema", "self", "data", "kwargs", "raise", "validationerror", "this", "will", "never", "work", "class", "myschema", "schema", "nested", "fields", "nested", "nestedschema", "required", "true", "many", "true", "schema", "myschema", "errors", "schema", "validate", "nested", "foo", "1", "assert", "errors", "assert", "nested", "in", "errors", "assert", "0", "in", "errors", "nested", "assert", "errors", "nested", "0", "_schema", "this", "will", "never", "work"], "doc_len": 66}
{"doc_id": "tests/test_decorators.py::TestValidatesSchemaDecorator.test_validator_nested_many_field_error", "file_path": "tests/test_decorators.py", "class_name": "TestValidatesSchemaDecorator", "func_name": "test_validator_nested_many_field_error", "text": "文件路径: tests/test_decorators.py, 类名: TestValidatesSchemaDecorator\n    def test_validator_nested_many_field_error(self):\n        class NestedSchema(Schema):\n            foo = fields.Int(required=True)\n\n            @validates_schema\n            def validate_schema(self, data, **kwargs):\n                raise ValidationError(\"This will never work.\", \"foo\")\n\n        class MySchema(Schema):\n            nested = fields.Nested(NestedSchema, required=True, many=True)\n\n        schema = MySchema()\n        errors = schema.validate({\"nested\": [{\"foo\": 1}]})\n        assert errors\n        assert \"nested\" in errors\n        assert 0 in errors[\"nested\"]\n        assert errors[\"nested\"][0] == {\"foo\": [\"This will never work.\"]}\n", "tokens": ["tests", "test_decorators", "py", "testvalidatesschemadecorator", "def", "test_validator_nested_many_field_error", "self", "class", "nestedschema", "schema", "foo", "fields", "int", "required", "true", "validates_schema", "def", "validate_schema", "self", "data", "kwargs", "raise", "validationerror", "this", "will", "never", "work", "foo", "class", "myschema", "schema", "nested", "fields", "nested", "nestedschema", "required", "true", "many", "true", "schema", "myschema", "errors", "schema", "validate", "nested", "foo", "1", "assert", "errors", "assert", "nested", "in", "errors", "assert", "0", "in", "errors", "nested", "assert", "errors", "nested", "0", "foo", "this", "will", "never", "work"], "doc_len": 67}
{"doc_id": "tests/test_decorators.py::TestValidatesSchemaDecorator.test_validator_nested_many_pass_original_and_pass_many", "file_path": "tests/test_decorators.py", "class_name": "TestValidatesSchemaDecorator", "func_name": "test_validator_nested_many_pass_original_and_pass_many", "text": "文件路径: tests/test_decorators.py, 类名: TestValidatesSchemaDecorator\n    def test_validator_nested_many_pass_original_and_pass_many(\n        self, pass_many, data, expected_data, expected_original_data\n    ):\n        class NestedSchema(Schema):\n            foo = fields.Int(required=True)\n\n            @validates_schema(pass_many=pass_many, pass_original=True)\n            def validate_schema(self, data, original_data, many, **kwargs):\n                assert data == expected_data\n                assert original_data == expected_original_data\n                assert many is True\n                raise ValidationError(\"Method called\")\n\n        class MySchema(Schema):\n            nested = fields.Nested(\n                NestedSchema, required=True, many=True, unknown=EXCLUDE\n            )\n\n        schema = MySchema()\n        errors = schema.validate({\"nested\": data})\n        error = errors[\"nested\"] if pass_many else errors[\"nested\"][0]\n        assert error[\"_schema\"][0] == \"Method called\"\n", "tokens": ["tests", "test_decorators", "py", "testvalidatesschemadecorator", "def", "test_validator_nested_many_pass_original_and_pass_many", "self", "pass_many", "data", "expected_data", "expected_original_data", "class", "nestedschema", "schema", "foo", "fields", "int", "required", "true", "validates_schema", "pass_many", "pass_many", "pass_original", "true", "def", "validate_schema", "self", "data", "original_data", "many", "kwargs", "assert", "data", "expected_data", "assert", "original_data", "expected_original_data", "assert", "many", "is", "true", "raise", "validationerror", "method", "called", "class", "myschema", "schema", "nested", "fields", "nested", "nestedschema", "required", "true", "many", "true", "unknown", "exclude", "schema", "myschema", "errors", "schema", "validate", "nested", "data", "error", "errors", "nested", "if", "pass_many", "else", "errors", "nested", "0", "assert", "error", "_schema", "0", "method", "called"], "doc_len": 80}
{"doc_id": "tests/test_decorators.py::TestValidatesSchemaDecorator.test_decorated_validators", "file_path": "tests/test_decorators.py", "class_name": "TestValidatesSchemaDecorator", "func_name": "test_decorated_validators", "text": "文件路径: tests/test_decorators.py, 类名: TestValidatesSchemaDecorator\n    def test_decorated_validators(self):\n        class MySchema(Schema):\n            foo = fields.Int()\n            bar = fields.Int()\n\n            @validates_schema\n            def validate_schema(self, data, **kwargs):\n                if data[\"foo\"] <= 3:\n                    raise ValidationError(\"Must be greater than 3\")\n\n            @validates_schema(pass_many=True)\n            def validate_raw(self, data, many, **kwargs):\n                if many:\n                    assert type(data) is list\n                    if len(data) < 2:\n                        raise ValidationError(\"Must provide at least 2 items\")\n\n            @validates_schema\n            def validate_bar(self, data, **kwargs):\n                if \"bar\" in data and data[\"bar\"] < 0:\n                    raise ValidationError(\"bar must not be negative\", \"bar\")\n\n        schema = MySchema()\n        errors = schema.validate({\"foo\": 3})\n        assert \"_schema\" in errors\n        assert errors[\"_schema\"][0] == \"Must be greater than 3\"\n\n        errors = schema.validate([{\"foo\": 4}], many=True)\n        assert \"_schema\" in errors\n        assert len(errors[\"_schema\"]) == 1\n        assert errors[\"_schema\"][0] == \"Must provide at least 2 items\"\n\n        errors = schema.validate({\"foo\": 4, \"bar\": -1})\n        assert \"bar\" in errors\n        assert len(errors[\"bar\"]) == 1\n        assert errors[\"bar\"][0] == \"bar must not be negative\"\n", "tokens": ["tests", "test_decorators", "py", "testvalidatesschemadecorator", "def", "test_decorated_validators", "self", "class", "myschema", "schema", "foo", "fields", "int", "bar", "fields", "int", "validates_schema", "def", "validate_schema", "self", "data", "kwargs", "if", "data", "foo", "3", "raise", "validationerror", "must", "be", "greater", "than", "3", "validates_schema", "pass_many", "true", "def", "validate_raw", "self", "data", "many", "kwargs", "if", "many", "assert", "type", "data", "is", "list", "if", "len", "data", "2", "raise", "validationerror", "must", "provide", "at", "least", "2", "items", "validates_schema", "def", "validate_bar", "self", "data", "kwargs", "if", "bar", "in", "data", "and", "data", "bar", "0", "raise", "validationerror", "bar", "must", "not", "be", "negative", "bar", "schema", "myschema", "errors", "schema", "validate", "foo", "3", "assert", "_schema", "in", "errors", "assert", "errors", "_schema", "0", "must", "be", "greater", "than", "3", "errors", "schema", "validate", "foo", "4", "many", "true", "assert", "_schema", "in", "errors", "assert", "len", "errors", "_schema", "1", "assert", "errors", "_schema", "0", "must", "provide", "at", "least", "2", "items", "errors", "schema", "validate", "foo", "4", "bar", "1", "assert", "bar", "in", "errors", "assert", "len", "errors", "bar", "1", "assert", "errors", "bar", "0", "bar", "must", "not", "be", "negative"], "doc_len": 154}
{"doc_id": "tests/test_decorators.py::TestValidatesSchemaDecorator.test_multiple_validators", "file_path": "tests/test_decorators.py", "class_name": "TestValidatesSchemaDecorator", "func_name": "test_multiple_validators", "text": "文件路径: tests/test_decorators.py, 类名: TestValidatesSchemaDecorator\n    def test_multiple_validators(self):\n        class MySchema(Schema):\n            foo = fields.Int()\n            bar = fields.Int()\n\n            @validates_schema\n            def validate_schema(self, data, **kwargs):\n                if data[\"foo\"] <= 3:\n                    raise ValidationError(\"Must be greater than 3\")\n\n            @validates_schema\n            def validate_bar(self, data, **kwargs):\n                if \"bar\" in data and data[\"bar\"] < 0:\n                    raise ValidationError(\"bar must not be negative\")\n\n        schema = MySchema()\n        errors = schema.validate({\"foo\": 3, \"bar\": -1})\n        assert type(errors) is dict\n        assert \"_schema\" in errors\n        assert len(errors[\"_schema\"]) == 2\n        assert \"Must be greater than 3\" in errors[\"_schema\"]\n        assert \"bar must not be negative\" in errors[\"_schema\"]\n\n        errors = schema.validate([{\"foo\": 3, \"bar\": -1}, {\"foo\": 3}], many=True)\n        assert type(errors) is dict\n        assert \"_schema\" in errors[0]\n        assert len(errors[0][\"_schema\"]) == 2\n        assert \"Must be greater than 3\" in errors[0][\"_schema\"]\n        assert \"bar must not be negative\" in errors[0][\"_schema\"]\n        assert len(errors[1][\"_schema\"]) == 1\n        assert \"Must be greater than 3\" in errors[0][\"_schema\"]\n", "tokens": ["tests", "test_decorators", "py", "testvalidatesschemadecorator", "def", "test_multiple_validators", "self", "class", "myschema", "schema", "foo", "fields", "int", "bar", "fields", "int", "validates_schema", "def", "validate_schema", "self", "data", "kwargs", "if", "data", "foo", "3", "raise", "validationerror", "must", "be", "greater", "than", "3", "validates_schema", "def", "validate_bar", "self", "data", "kwargs", "if", "bar", "in", "data", "and", "data", "bar", "0", "raise", "validationerror", "bar", "must", "not", "be", "negative", "schema", "myschema", "errors", "schema", "validate", "foo", "3", "bar", "1", "assert", "type", "errors", "is", "dict", "assert", "_schema", "in", "errors", "assert", "len", "errors", "_schema", "2", "assert", "must", "be", "greater", "than", "3", "in", "errors", "_schema", "assert", "bar", "must", "not", "be", "negative", "in", "errors", "_schema", "errors", "schema", "validate", "foo", "3", "bar", "1", "foo", "3", "many", "true", "assert", "type", "errors", "is", "dict", "assert", "_schema", "in", "errors", "0", "assert", "len", "errors", "0", "_schema", "2", "assert", "must", "be", "greater", "than", "3", "in", "errors", "0", "_schema", "assert", "bar", "must", "not", "be", "negative", "in", "errors", "0", "_schema", "assert", "len", "errors", "1", "_schema", "1", "assert", "must", "be", "greater", "than", "3", "in", "errors", "0", "_schema"], "doc_len": 158}
{"doc_id": "tests/test_decorators.py::TestValidatesSchemaDecorator.test_multiple_validators_merge_dict_errors", "file_path": "tests/test_decorators.py", "class_name": "TestValidatesSchemaDecorator", "func_name": "test_multiple_validators_merge_dict_errors", "text": "文件路径: tests/test_decorators.py, 类名: TestValidatesSchemaDecorator\n    def test_multiple_validators_merge_dict_errors(self):\n        class NestedSchema(Schema):\n            foo = fields.Int()\n            bar = fields.Int()\n\n        class MySchema(Schema):\n            nested = fields.Nested(NestedSchema)\n\n            @validates_schema\n            def validate_nested_foo(self, data, **kwargs):\n                raise ValidationError({\"nested\": {\"foo\": [\"Invalid foo\"]}})\n\n            @validates_schema\n            def validate_nested_bar_1(self, data, **kwargs):\n                raise ValidationError({\"nested\": {\"bar\": [\"Invalid bar 1\"]}})\n\n            @validates_schema\n            def validate_nested_bar_2(self, data, **kwargs):\n                raise ValidationError({\"nested\": {\"bar\": [\"Invalid bar 2\"]}})\n\n        with pytest.raises(ValidationError) as excinfo:\n            MySchema().load({\"nested\": {\"foo\": 1, \"bar\": 2}})\n\n        assert excinfo.value.messages == {\n            \"nested\": {\n                \"foo\": [\"Invalid foo\"],\n                \"bar\": [\"Invalid bar 1\", \"Invalid bar 2\"],\n            }\n        }\n", "tokens": ["tests", "test_decorators", "py", "testvalidatesschemadecorator", "def", "test_multiple_validators_merge_dict_errors", "self", "class", "nestedschema", "schema", "foo", "fields", "int", "bar", "fields", "int", "class", "myschema", "schema", "nested", "fields", "nested", "nestedschema", "validates_schema", "def", "validate_nested_foo", "self", "data", "kwargs", "raise", "validationerror", "nested", "foo", "invalid", "foo", "validates_schema", "def", "validate_nested_bar_1", "self", "data", "kwargs", "raise", "validationerror", "nested", "bar", "invalid", "bar", "1", "validates_schema", "def", "validate_nested_bar_2", "self", "data", "kwargs", "raise", "validationerror", "nested", "bar", "invalid", "bar", "2", "with", "pytest", "raises", "validationerror", "as", "excinfo", "myschema", "load", "nested", "foo", "1", "bar", "2", "assert", "excinfo", "value", "messages", "nested", "foo", "invalid", "foo", "bar", "invalid", "bar", "1", "invalid", "bar", "2"], "doc_len": 89}
{"doc_id": "tests/test_decorators.py::TestValidatesSchemaDecorator.test_passing_original_data", "file_path": "tests/test_decorators.py", "class_name": "TestValidatesSchemaDecorator", "func_name": "test_passing_original_data", "text": "文件路径: tests/test_decorators.py, 类名: TestValidatesSchemaDecorator\n    def test_passing_original_data(self):\n        class MySchema(Schema):\n            foo = fields.Int()\n            bar = fields.Int()\n\n            @validates_schema(pass_original=True)\n            def validate_original(self, data, original_data, partial, **kwargs):\n                if isinstance(original_data, dict) and isinstance(\n                    original_data[\"foo\"], str\n                ):\n                    raise ValidationError(\"foo cannot be a string\")\n\n            @validates_schema(pass_many=True, pass_original=True)\n            def validate_original_bar(self, data, original_data, many, **kwargs):\n                def check(datum):\n                    if isinstance(datum, dict) and isinstance(datum[\"bar\"], str):\n                        raise ValidationError(\"bar cannot be a string\")\n\n                if many:\n                    for each in original_data:\n                        check(each)\n                else:\n                    check(original_data)\n\n        schema = MySchema()\n\n        errors = schema.validate({\"foo\": \"4\", \"bar\": 12})\n        assert errors[\"_schema\"] == [\"foo cannot be a string\"]\n\n        errors = schema.validate({\"foo\": 4, \"bar\": \"42\"})\n        assert errors[\"_schema\"] == [\"bar cannot be a string\"]\n\n        errors = schema.validate([{\"foo\": 4, \"bar\": \"42\"}], many=True)\n        assert errors[\"_schema\"] == [\"bar cannot be a string\"]\n", "tokens": ["tests", "test_decorators", "py", "testvalidatesschemadecorator", "def", "test_passing_original_data", "self", "class", "myschema", "schema", "foo", "fields", "int", "bar", "fields", "int", "validates_schema", "pass_original", "true", "def", "validate_original", "self", "data", "original_data", "partial", "kwargs", "if", "isinstance", "original_data", "dict", "and", "isinstance", "original_data", "foo", "str", "raise", "validationerror", "foo", "cannot", "be", "a", "string", "validates_schema", "pass_many", "true", "pass_original", "true", "def", "validate_original_bar", "self", "data", "original_data", "many", "kwargs", "def", "check", "datum", "if", "isinstance", "datum", "dict", "and", "isinstance", "datum", "bar", "str", "raise", "validationerror", "bar", "cannot", "be", "a", "string", "if", "many", "for", "each", "in", "original_data", "check", "each", "else", "check", "original_data", "schema", "myschema", "errors", "schema", "validate", "foo", "4", "bar", "12", "assert", "errors", "_schema", "foo", "cannot", "be", "a", "string", "errors", "schema", "validate", "foo", "4", "bar", "42", "assert", "errors", "_schema", "bar", "cannot", "be", "a", "string", "errors", "schema", "validate", "foo", "4", "bar", "42", "many", "true", "assert", "errors", "_schema", "bar", "cannot", "be", "a", "string"], "doc_len": 133}
{"doc_id": "tests/test_decorators.py::TestValidatesSchemaDecorator.test_allow_reporting_field_errors_in_schema_validator", "file_path": "tests/test_decorators.py", "class_name": "TestValidatesSchemaDecorator", "func_name": "test_allow_reporting_field_errors_in_schema_validator", "text": "文件路径: tests/test_decorators.py, 类名: TestValidatesSchemaDecorator\n    def test_allow_reporting_field_errors_in_schema_validator(self):\n        class NestedSchema(Schema):\n            baz = fields.Int(required=True)\n\n        class MySchema(Schema):\n            foo = fields.Int(required=True)\n            bar = fields.Nested(NestedSchema, required=True)\n            bam = fields.Int(required=True)\n\n            @validates_schema(skip_on_field_errors=True)\n            def consistency_validation(self, data, **kwargs):\n                errors = {}\n                if data[\"bar\"][\"baz\"] != data[\"foo\"]:\n                    errors[\"bar\"] = {\"baz\": \"Non-matching value\"}\n                if data[\"bam\"] > data[\"foo\"]:\n                    errors[\"bam\"] = \"Value should be less than foo\"\n                if errors:\n                    raise ValidationError(errors)\n\n        schema = MySchema()\n        errors = schema.validate({\"foo\": 2, \"bar\": {\"baz\": 5}, \"bam\": 6})\n        assert errors[\"bar\"][\"baz\"] == \"Non-matching value\"\n        assert errors[\"bam\"] == \"Value should be less than foo\"\n", "tokens": ["tests", "test_decorators", "py", "testvalidatesschemadecorator", "def", "test_allow_reporting_field_errors_in_schema_validator", "self", "class", "nestedschema", "schema", "baz", "fields", "int", "required", "true", "class", "myschema", "schema", "foo", "fields", "int", "required", "true", "bar", "fields", "nested", "nestedschema", "required", "true", "bam", "fields", "int", "required", "true", "validates_schema", "skip_on_field_errors", "true", "def", "consistency_validation", "self", "data", "kwargs", "errors", "if", "data", "bar", "baz", "data", "foo", "errors", "bar", "baz", "non", "matching", "value", "if", "data", "bam", "data", "foo", "errors", "bam", "value", "should", "be", "less", "than", "foo", "if", "errors", "raise", "validationerror", "errors", "schema", "myschema", "errors", "schema", "validate", "foo", "2", "bar", "baz", "5", "bam", "6", "assert", "errors", "bar", "baz", "non", "matching", "value", "assert", "errors", "bam", "value", "should", "be", "less", "than", "foo"], "doc_len": 101}
{"doc_id": "tests/test_decorators.py::TestValidatesSchemaDecorator.test_allow_arbitrary_field_names_in_error", "file_path": "tests/test_decorators.py", "class_name": "TestValidatesSchemaDecorator", "func_name": "test_allow_arbitrary_field_names_in_error", "text": "文件路径: tests/test_decorators.py, 类名: TestValidatesSchemaDecorator\n    def test_allow_arbitrary_field_names_in_error(self):\n        class MySchema(Schema):\n            @validates_schema\n            def validator(self, data, **kwargs):\n                raise ValidationError(\"Error message\", \"arbitrary_key\")\n\n        errors = MySchema().validate({})\n        assert errors[\"arbitrary_key\"] == [\"Error message\"]\n", "tokens": ["tests", "test_decorators", "py", "testvalidatesschemadecorator", "def", "test_allow_arbitrary_field_names_in_error", "self", "class", "myschema", "schema", "validates_schema", "def", "validator", "self", "data", "kwargs", "raise", "validationerror", "error", "message", "arbitrary_key", "errors", "myschema", "validate", "assert", "errors", "arbitrary_key", "error", "message"], "doc_len": 29}
{"doc_id": "tests/test_decorators.py::TestValidatesSchemaDecorator.test_skip_on_field_errors", "file_path": "tests/test_decorators.py", "class_name": "TestValidatesSchemaDecorator", "func_name": "test_skip_on_field_errors", "text": "文件路径: tests/test_decorators.py, 类名: TestValidatesSchemaDecorator\n    def test_skip_on_field_errors(self):\n        class MySchema(Schema):\n            foo = fields.Int(required=True, validate=lambda n: n == 3)\n            bar = fields.Int(required=True)\n\n            @validates_schema(skip_on_field_errors=True)\n            def validate_schema(self, data, **kwargs):\n                if data[\"foo\"] != data[\"bar\"]:\n                    raise ValidationError(\"Foo and bar must be equal.\")\n\n            @validates_schema(skip_on_field_errors=True, pass_many=True)\n            def validate_many(self, data, many, **kwargs):\n                if many:\n                    assert type(data) is list\n                    if len(data) < 2:\n                        raise ValidationError(\"Must provide at least 2 items\")\n\n        schema = MySchema()\n        # check that schema errors still occur with no field errors\n        errors = schema.validate({\"foo\": 3, \"bar\": 4})\n        assert \"_schema\" in errors\n        assert errors[\"_schema\"][0] == \"Foo and bar must be equal.\"\n\n        errors = schema.validate([{\"foo\": 3, \"bar\": 3}], many=True)\n        assert \"_schema\" in errors\n        assert errors[\"_schema\"][0] == \"Must provide at least 2 items\"\n\n        # check that schema errors don't occur when field errors do\n        errors = schema.validate({\"foo\": 3, \"bar\": \"not an int\"})\n        assert \"bar\" in errors\n        assert \"_schema\" not in errors\n\n        errors = schema.validate({\"foo\": 2, \"bar\": 2})\n        assert \"foo\" in errors\n        assert \"_schema\" not in errors\n\n        errors = schema.validate([{\"foo\": 3, \"bar\": \"not an int\"}], many=True)\n        assert \"bar\" in errors[0]\n        assert \"_schema\" not in errors\n", "tokens": ["tests", "test_decorators", "py", "testvalidatesschemadecorator", "def", "test_skip_on_field_errors", "self", "class", "myschema", "schema", "foo", "fields", "int", "required", "true", "validate", "lambda", "n", "n", "3", "bar", "fields", "int", "required", "true", "validates_schema", "skip_on_field_errors", "true", "def", "validate_schema", "self", "data", "kwargs", "if", "data", "foo", "data", "bar", "raise", "validationerror", "foo", "and", "bar", "must", "be", "equal", "validates_schema", "skip_on_field_errors", "true", "pass_many", "true", "def", "validate_many", "self", "data", "many", "kwargs", "if", "many", "assert", "type", "data", "is", "list", "if", "len", "data", "2", "raise", "validationerror", "must", "provide", "at", "least", "2", "items", "schema", "myschema", "check", "that", "schema", "errors", "still", "occur", "with", "no", "field", "errors", "errors", "schema", "validate", "foo", "3", "bar", "4", "assert", "_schema", "in", "errors", "assert", "errors", "_schema", "0", "foo", "and", "bar", "must", "be", "equal", "errors", "schema", "validate", "foo", "3", "bar", "3", "many", "true", "assert", "_schema", "in", "errors", "assert", "errors", "_schema", "0", "must", "provide", "at", "least", "2", "items", "check", "that", "schema", "errors", "don", "t", "occur", "when", "field", "errors", "do", "errors", "schema", "validate", "foo", "3", "bar", "not", "an", "int", "assert", "bar", "in", "errors", "assert", "_schema", "not", "in", "errors", "errors", "schema", "validate", "foo", "2", "bar", "2", "assert", "foo", "in", "errors", "assert", "_schema", "not", "in", "errors", "errors", "schema", "validate", "foo", "3", "bar", "not", "an", "int", "many", "true", "assert", "bar", "in", "errors", "0", "assert", "_schema", "not", "in", "errors"], "doc_len": 198}
{"doc_id": "tests/test_decorators.py::test_decorator_error_handling", "file_path": "tests/test_decorators.py", "class_name": null, "func_name": "test_decorator_error_handling", "text": "文件路径: tests/test_decorators.py\ndef test_decorator_error_handling():  # noqa: C901\n    class ExampleSchema(Schema):\n        foo = fields.Int()\n        bar = fields.Int()\n\n        @pre_load()\n        def pre_load_error1(self, item, **kwargs):\n            if item[\"foo\"] != 0:\n                return item\n            errors = {\"foo\": [\"preloadmsg1\"], \"bar\": [\"preloadmsg2\", \"preloadmsg3\"]}\n            raise ValidationError(errors)\n\n        @pre_load()\n        def pre_load_error2(self, item, **kwargs):\n            if item[\"foo\"] != 4:\n                return item\n            raise ValidationError(\"preloadmsg1\", \"foo\")\n\n        @pre_load()\n        def pre_load_error3(self, item, **kwargs):\n            if item[\"foo\"] != 8:\n                return item\n            raise ValidationError(\"preloadmsg1\")\n\n        @post_load()\n        def post_load_error1(self, item, **kwargs):\n            if item[\"foo\"] != 1:\n                return item\n            errors = {\"foo\": [\"postloadmsg1\"], \"bar\": [\"postloadmsg2\", \"postloadmsg3\"]}\n            raise ValidationError(errors)\n\n        @post_load()\n        def post_load_error2(self, item, **kwargs):\n            if item[\"foo\"] != 5:\n                return item\n            raise ValidationError(\"postloadmsg1\", \"foo\")\n\n    def make_item(foo, bar):\n        data = schema.load({\"foo\": foo, \"bar\": bar})\n        assert data is not None\n        return data\n\n    schema = ExampleSchema()\n    with pytest.raises(ValidationError) as excinfo:\n        schema.load({\"foo\": 0, \"bar\": 1})\n    errors = excinfo.value.messages\n    assert \"foo\" in errors\n    assert len(errors[\"foo\"]) == 1\n    assert errors[\"foo\"][0] == \"preloadmsg1\"\n    assert \"bar\" in errors\n    assert len(errors[\"bar\"]) == 2\n    assert \"preloadmsg2\" in errors[\"bar\"]\n    assert \"preloadmsg3\" in errors[\"bar\"]\n    with pytest.raises(ValidationError) as excinfo:\n        schema.load({\"foo\": 1, \"bar\": 1})\n    errors = excinfo.value.messages\n    assert \"foo\" in errors\n    assert len(errors[\"foo\"]) == 1\n    assert errors[\"foo\"][0] == \"postloadmsg1\"\n    assert \"bar\" in errors\n    assert len(errors[\"bar\"]) == 2\n    assert \"postloadmsg2\" in errors[\"bar\"]\n    assert \"postloadmsg3\" in errors[\"bar\"]\n    with pytest.raises(ValidationError) as excinfo:\n        schema.load({\"foo\": 4, \"bar\": 1})\n    errors = excinfo.value.messages\n    assert len(errors) == 1\n    assert \"foo\" in errors\n    assert len(errors[\"foo\"]) == 1\n    assert errors[\"foo\"][0] == \"preloadmsg1\"\n    with pytest.raises(ValidationError) as excinfo:\n        schema.load({\"foo\": 5, \"bar\": 1})\n    errors = excinfo.value.messages\n    assert len(errors) == 1\n    assert \"foo\" in errors\n    assert len(errors[\"foo\"]) == 1\n    assert errors[\"foo\"][0] == \"postloadmsg1\"\n    with pytest.raises(ValidationError) as excinfo:\n        schema.load({\"foo\": 8, \"bar\": 1})\n    errors = excinfo.value.messages\n    assert len(errors) == 1\n    assert \"_schema\" in errors\n    assert len(errors[\"_schema\"]) == 1\n    assert errors[\"_schema\"][0] == \"preloadmsg1\"\n", "tokens": ["tests", "test_decorators", "py", "def", "test_decorator_error_handling", "noqa", "c901", "class", "exampleschema", "schema", "foo", "fields", "int", "bar", "fields", "int", "pre_load", "def", "pre_load_error1", "self", "item", "kwargs", "if", "item", "foo", "0", "return", "item", "errors", "foo", "preloadmsg1", "bar", "preloadmsg2", "preloadmsg3", "raise", "validationerror", "errors", "pre_load", "def", "pre_load_error2", "self", "item", "kwargs", "if", "item", "foo", "4", "return", "item", "raise", "validationerror", "preloadmsg1", "foo", "pre_load", "def", "pre_load_error3", "self", "item", "kwargs", "if", "item", "foo", "8", "return", "item", "raise", "validationerror", "preloadmsg1", "post_load", "def", "post_load_error1", "self", "item", "kwargs", "if", "item", "foo", "1", "return", "item", "errors", "foo", "postloadmsg1", "bar", "postloadmsg2", "postloadmsg3", "raise", "validationerror", "errors", "post_load", "def", "post_load_error2", "self", "item", "kwargs", "if", "item", "foo", "5", "return", "item", "raise", "validationerror", "postloadmsg1", "foo", "def", "make_item", "foo", "bar", "data", "schema", "load", "foo", "foo", "bar", "bar", "assert", "data", "is", "not", "none", "return", "data", "schema", "exampleschema", "with", "pytest", "raises", "validationerror", "as", "excinfo", "schema", "load", "foo", "0", "bar", "1", "errors", "excinfo", "value", "messages", "assert", "foo", "in", "errors", "assert", "len", "errors", "foo", "1", "assert", "errors", "foo", "0", "preloadmsg1", "assert", "bar", "in", "errors", "assert", "len", "errors", "bar", "2", "assert", "preloadmsg2", "in", "errors", "bar", "assert", "preloadmsg3", "in", "errors", "bar", "with", "pytest", "raises", "validationerror", "as", "excinfo", "schema", "load", "foo", "1", "bar", "1", "errors", "excinfo", "value", "messages", "assert", "foo", "in", "errors", "assert", "len", "errors", "foo", "1", "assert", "errors", "foo", "0", "postloadmsg1", "assert", "bar", "in", "errors", "assert", "len", "errors", "bar", "2", "assert", "postloadmsg2", "in", "errors", "bar", "assert", "postloadmsg3", "in", "errors", "bar", "with", "pytest", "raises", "validationerror", "as", "excinfo", "schema", "load", "foo", "4", "bar", "1", "errors", "excinfo", "value", "messages", "assert", "len", "errors", "1", "assert", "foo", "in", "errors", "assert", "len", "errors", "foo", "1", "assert", "errors", "foo", "0", "preloadmsg1", "with", "pytest", "raises", "validationerror", "as", "excinfo", "schema", "load", "foo", "5", "bar", "1", "errors", "excinfo", "value", "messages", "assert", "len", "errors", "1", "assert", "foo", "in", "errors", "assert", "len", "errors", "foo", "1", "assert", "errors", "foo", "0", "postloadmsg1", "with", "pytest", "raises", "validationerror", "as", "excinfo", "schema", "load", "foo", "8", "bar", "1", "errors", "excinfo", "value", "messages", "assert", "len", "errors", "1", "assert", "_schema", "in", "errors", "assert", "len", "errors", "_schema", "1", "assert", "errors", "_schema", "0", "preloadmsg1"], "doc_len": 325}
{"doc_id": "tests/test_decorators.py::test_decorator_error_handling_with_load", "file_path": "tests/test_decorators.py", "class_name": null, "func_name": "test_decorator_error_handling_with_load", "text": "文件路径: tests/test_decorators.py\ndef test_decorator_error_handling_with_load(decorator):\n    class ExampleSchema(Schema):\n        @decorator\n        def raise_value_error(self, item, **kwargs):\n            raise ValidationError({\"foo\": \"error\"})\n\n    schema = ExampleSchema()\n    with pytest.raises(ValidationError) as exc:\n        schema.load({})\n    assert exc.value.messages == {\"foo\": \"error\"}\n    schema.dump(object())\n", "tokens": ["tests", "test_decorators", "py", "def", "test_decorator_error_handling_with_load", "decorator", "class", "exampleschema", "schema", "decorator", "def", "raise_value_error", "self", "item", "kwargs", "raise", "validationerror", "foo", "error", "schema", "exampleschema", "with", "pytest", "raises", "validationerror", "as", "exc", "schema", "load", "assert", "exc", "value", "messages", "foo", "error", "schema", "dump", "object"], "doc_len": 38}
{"doc_id": "tests/test_decorators.py::test_decorator_error_handling_with_load_dict_error", "file_path": "tests/test_decorators.py", "class_name": null, "func_name": "test_decorator_error_handling_with_load_dict_error", "text": "文件路径: tests/test_decorators.py\ndef test_decorator_error_handling_with_load_dict_error(decorator):\n    class ExampleSchema(Schema):\n        @decorator\n        def raise_value_error(self, item, **kwargs):\n            raise ValidationError({\"foo\": \"error\"}, \"nested_field\")\n\n    schema = ExampleSchema()\n    with pytest.raises(ValidationError) as exc:\n        schema.load({})\n    assert exc.value.messages == {\"nested_field\": {\"foo\": \"error\"}}\n    schema.dump(object())\n", "tokens": ["tests", "test_decorators", "py", "def", "test_decorator_error_handling_with_load_dict_error", "decorator", "class", "exampleschema", "schema", "decorator", "def", "raise_value_error", "self", "item", "kwargs", "raise", "validationerror", "foo", "error", "nested_field", "schema", "exampleschema", "with", "pytest", "raises", "validationerror", "as", "exc", "schema", "load", "assert", "exc", "value", "messages", "nested_field", "foo", "error", "schema", "dump", "object"], "doc_len": 40}
{"doc_id": "tests/test_decorators.py::test_decorator_error_handling_with_dump", "file_path": "tests/test_decorators.py", "class_name": null, "func_name": "test_decorator_error_handling_with_dump", "text": "文件路径: tests/test_decorators.py\ndef test_decorator_error_handling_with_dump(decorator):\n    class ExampleSchema(Schema):\n        @decorator\n        def raise_value_error(self, item, **kwargs):\n            raise ValidationError({\"foo\": \"error\"})\n\n    schema = ExampleSchema()\n    with pytest.raises(ValidationError) as exc:\n        schema.dump(object())\n    assert exc.value.messages == {\"foo\": \"error\"}\n    schema.load({})\n", "tokens": ["tests", "test_decorators", "py", "def", "test_decorator_error_handling_with_dump", "decorator", "class", "exampleschema", "schema", "decorator", "def", "raise_value_error", "self", "item", "kwargs", "raise", "validationerror", "foo", "error", "schema", "exampleschema", "with", "pytest", "raises", "validationerror", "as", "exc", "schema", "dump", "object", "assert", "exc", "value", "messages", "foo", "error", "schema", "load"], "doc_len": 38}
{"doc_id": "tests/test_decorators.py::Nested.__init__", "file_path": "tests/test_decorators.py", "class_name": "Nested", "func_name": "__init__", "text": "文件路径: tests/test_decorators.py, 类名: Nested\n    def __init__(self, foo):\n        self.foo = foo\n", "tokens": ["tests", "test_decorators", "py", "nested", "def", "__init__", "self", "foo", "self", "foo", "foo"], "doc_len": 11}
{"doc_id": "tests/test_decorators.py::Example.__init__", "file_path": "tests/test_decorators.py", "class_name": "Example", "func_name": "__init__", "text": "文件路径: tests/test_decorators.py, 类名: Example\n    def __init__(self, nested):\n        self.nested = nested\n", "tokens": ["tests", "test_decorators", "py", "example", "def", "__init__", "self", "nested", "self", "nested", "nested"], "doc_len": 11}
{"doc_id": "tests/test_decorators.py::test_decorator_post_dump_with_nested_original_and_pass_many", "file_path": "tests/test_decorators.py", "class_name": null, "func_name": "test_decorator_post_dump_with_nested_original_and_pass_many", "text": "文件路径: tests/test_decorators.py\ndef test_decorator_post_dump_with_nested_original_and_pass_many(\n    data, expected_data, expected_original_data\n):\n    class NestedSchema(Schema):\n        foo = fields.Int(required=True)\n\n        @post_dump(pass_many=False, pass_original=True)\n        def check_pass_original_when_pass_many_false(\n            self, data, original_data, **kwargs\n        ):\n            assert data == expected_data\n            assert original_data == expected_original_data\n            return data\n\n        @post_dump(pass_many=True, pass_original=True)\n        def check_pass_original_when_pass_many_true(\n            self, data, original_data, many, **kwargs\n        ):\n            assert many is True\n            assert data == [expected_data]\n            assert original_data == [expected_original_data]\n            return data\n\n    class ExampleSchema(Schema):\n        nested = fields.Nested(NestedSchema, required=True, many=True)\n\n    schema = ExampleSchema()\n    assert schema.dump(data) == {\"nested\": [{\"foo\": 0}]}\n", "tokens": ["tests", "test_decorators", "py", "def", "test_decorator_post_dump_with_nested_original_and_pass_many", "data", "expected_data", "expected_original_data", "class", "nestedschema", "schema", "foo", "fields", "int", "required", "true", "post_dump", "pass_many", "false", "pass_original", "true", "def", "check_pass_original_when_pass_many_false", "self", "data", "original_data", "kwargs", "assert", "data", "expected_data", "assert", "original_data", "expected_original_data", "return", "data", "post_dump", "pass_many", "true", "pass_original", "true", "def", "check_pass_original_when_pass_many_true", "self", "data", "original_data", "many", "kwargs", "assert", "many", "is", "true", "assert", "data", "expected_data", "assert", "original_data", "expected_original_data", "return", "data", "class", "exampleschema", "schema", "nested", "fields", "nested", "nestedschema", "required", "true", "many", "true", "schema", "exampleschema", "assert", "schema", "dump", "data", "nested", "foo", "0"], "doc_len": 79}
{"doc_id": "tests/test_decorators.py::test_decorator_post_load_with_nested_original_and_pass_many", "file_path": "tests/test_decorators.py", "class_name": null, "func_name": "test_decorator_post_load_with_nested_original_and_pass_many", "text": "文件路径: tests/test_decorators.py\ndef test_decorator_post_load_with_nested_original_and_pass_many(\n    data, expected_data, expected_original_data\n):\n    class NestedSchema(Schema):\n        foo = fields.Int(required=True)\n\n        @post_load(pass_many=False, pass_original=True)\n        def check_pass_original_when_pass_many_false(\n            self, data, original_data, **kwargs\n        ):\n            assert data == expected_data\n            assert original_data == expected_original_data\n            return data\n\n        @post_load(pass_many=True, pass_original=True)\n        def check_pass_original_when_pass_many_true(\n            self, data, original_data, many, **kwargs\n        ):\n            assert many is True\n            assert data == [expected_data]\n            assert original_data == [expected_original_data]\n            return data\n\n    class ExampleSchema(Schema):\n        nested = fields.Nested(NestedSchema, required=True, many=True)\n\n    schema = ExampleSchema()\n    assert schema.load(data) == data\n", "tokens": ["tests", "test_decorators", "py", "def", "test_decorator_post_load_with_nested_original_and_pass_many", "data", "expected_data", "expected_original_data", "class", "nestedschema", "schema", "foo", "fields", "int", "required", "true", "post_load", "pass_many", "false", "pass_original", "true", "def", "check_pass_original_when_pass_many_false", "self", "data", "original_data", "kwargs", "assert", "data", "expected_data", "assert", "original_data", "expected_original_data", "return", "data", "post_load", "pass_many", "true", "pass_original", "true", "def", "check_pass_original_when_pass_many_true", "self", "data", "original_data", "many", "kwargs", "assert", "many", "is", "true", "assert", "data", "expected_data", "assert", "original_data", "expected_original_data", "return", "data", "class", "exampleschema", "schema", "nested", "fields", "nested", "nestedschema", "required", "true", "many", "true", "schema", "exampleschema", "assert", "schema", "load", "data", "data"], "doc_len": 77}
{"doc_id": "tests/test_deserialization.py::TestDeserializingNone.test_fields_allow_none_deserialize_to_none", "file_path": "tests/test_deserialization.py", "class_name": "TestDeserializingNone", "func_name": "test_fields_allow_none_deserialize_to_none", "text": "文件路径: tests/test_deserialization.py, 类名: TestDeserializingNone\n    def test_fields_allow_none_deserialize_to_none(self, FieldClass):\n        field = FieldClass(allow_none=True)\n        field.deserialize(None) is None\n", "tokens": ["tests", "test_deserialization", "py", "testdeserializingnone", "def", "test_fields_allow_none_deserialize_to_none", "self", "fieldclass", "field", "fieldclass", "allow_none", "true", "field", "deserialize", "none", "is", "none"], "doc_len": 17}
{"doc_id": "tests/test_deserialization.py::TestDeserializingNone.test_fields_dont_allow_none_by_default", "file_path": "tests/test_deserialization.py", "class_name": "TestDeserializingNone", "func_name": "test_fields_dont_allow_none_by_default", "text": "文件路径: tests/test_deserialization.py, 类名: TestDeserializingNone\n    def test_fields_dont_allow_none_by_default(self, FieldClass):\n        field = FieldClass()\n        with pytest.raises(ValidationError, match=\"Field may not be null.\"):\n            field.deserialize(None)\n", "tokens": ["tests", "test_deserialization", "py", "testdeserializingnone", "def", "test_fields_dont_allow_none_by_default", "self", "fieldclass", "field", "fieldclass", "with", "pytest", "raises", "validationerror", "match", "field", "may", "not", "be", "null", "field", "deserialize", "none"], "doc_len": 23}
{"doc_id": "tests/test_deserialization.py::TestDeserializingNone.test_allow_none_is_true_if_missing_is_true", "file_path": "tests/test_deserialization.py", "class_name": "TestDeserializingNone", "func_name": "test_allow_none_is_true_if_missing_is_true", "text": "文件路径: tests/test_deserialization.py, 类名: TestDeserializingNone\n    def test_allow_none_is_true_if_missing_is_true(self):\n        field = fields.Field(missing=None)\n        assert field.allow_none is True\n        field.deserialize(None) is None\n", "tokens": ["tests", "test_deserialization", "py", "testdeserializingnone", "def", "test_allow_none_is_true_if_missing_is_true", "self", "field", "fields", "field", "missing", "none", "assert", "field", "allow_none", "is", "true", "field", "deserialize", "none", "is", "none"], "doc_len": 22}
{"doc_id": "tests/test_deserialization.py::TestDeserializingNone.test_list_field_deserialize_none_to_none", "file_path": "tests/test_deserialization.py", "class_name": "TestDeserializingNone", "func_name": "test_list_field_deserialize_none_to_none", "text": "文件路径: tests/test_deserialization.py, 类名: TestDeserializingNone\n    def test_list_field_deserialize_none_to_none(self):\n        field = fields.List(fields.String(allow_none=True), allow_none=True)\n        assert field.deserialize(None) is None\n", "tokens": ["tests", "test_deserialization", "py", "testdeserializingnone", "def", "test_list_field_deserialize_none_to_none", "self", "field", "fields", "list", "fields", "string", "allow_none", "true", "allow_none", "true", "assert", "field", "deserialize", "none", "is", "none"], "doc_len": 22}
{"doc_id": "tests/test_deserialization.py::TestDeserializingNone.test_tuple_field_deserialize_none_to_none", "file_path": "tests/test_deserialization.py", "class_name": "TestDeserializingNone", "func_name": "test_tuple_field_deserialize_none_to_none", "text": "文件路径: tests/test_deserialization.py, 类名: TestDeserializingNone\n    def test_tuple_field_deserialize_none_to_none(self):\n        field = fields.Tuple([fields.String()], allow_none=True)\n        assert field.deserialize(None) is None\n", "tokens": ["tests", "test_deserialization", "py", "testdeserializingnone", "def", "test_tuple_field_deserialize_none_to_none", "self", "field", "fields", "tuple", "fields", "string", "allow_none", "true", "assert", "field", "deserialize", "none", "is", "none"], "doc_len": 20}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_float_field_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_float_field_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_float_field_deserialization(self):\n        field = fields.Float()\n        assert math.isclose(field.deserialize(\"12.3\"), 12.3)\n        assert math.isclose(field.deserialize(12.3), 12.3)\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_float_field_deserialization", "self", "field", "fields", "float", "assert", "math", "isclose", "field", "deserialize", "12", "3", "12", "3", "assert", "math", "isclose", "field", "deserialize", "12", "3", "12", "3"], "doc_len": 28}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_invalid_float_field_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_invalid_float_field_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_invalid_float_field_deserialization(self, in_val):\n        field = fields.Float()\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize(in_val)\n        assert excinfo.value.args[0] == \"Not a valid number.\"\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_invalid_float_field_deserialization", "self", "in_val", "field", "fields", "float", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "in_val", "assert", "excinfo", "value", "args", "0", "not", "a", "valid", "number"], "doc_len": 29}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_float_field_overflow", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_float_field_overflow", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_float_field_overflow(self):\n        field = fields.Float()\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize(2 ** 1024)\n        assert excinfo.value.args[0] == \"Number too large.\"\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_float_field_overflow", "self", "field", "fields", "float", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "2", "1024", "assert", "excinfo", "value", "args", "0", "number", "too", "large"], "doc_len": 28}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_integer_field_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_integer_field_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_integer_field_deserialization(self):\n        field = fields.Integer()\n        assert field.deserialize(\"42\") == 42\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize(\"42.0\")\n        assert excinfo.value.args[0] == \"Not a valid integer.\"\n        with pytest.raises(ValidationError):\n            field.deserialize(\"bad\")\n        assert excinfo.value.args[0] == \"Not a valid integer.\"\n        with pytest.raises(ValidationError):\n            field.deserialize({})\n        assert excinfo.value.args[0] == \"Not a valid integer.\"\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_integer_field_deserialization", "self", "field", "fields", "integer", "assert", "field", "deserialize", "42", "42", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "42", "0", "assert", "excinfo", "value", "args", "0", "not", "a", "valid", "integer", "with", "pytest", "raises", "validationerror", "field", "deserialize", "bad", "assert", "excinfo", "value", "args", "0", "not", "a", "valid", "integer", "with", "pytest", "raises", "validationerror", "field", "deserialize", "assert", "excinfo", "value", "args", "0", "not", "a", "valid", "integer"], "doc_len": 65}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_strict_integer_field_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_strict_integer_field_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_strict_integer_field_deserialization(self):\n        field = fields.Integer(strict=True)\n        assert field.deserialize(42) == 42\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize(42.0)\n        assert excinfo.value.args[0] == \"Not a valid integer.\"\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize(decimal.Decimal(\"42.0\"))\n        assert excinfo.value.args[0] == \"Not a valid integer.\"\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize(\"42\")\n        assert excinfo.value.args[0] == \"Not a valid integer.\"\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_strict_integer_field_deserialization", "self", "field", "fields", "integer", "strict", "true", "assert", "field", "deserialize", "42", "42", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "42", "0", "assert", "excinfo", "value", "args", "0", "not", "a", "valid", "integer", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "decimal", "decimal", "42", "0", "assert", "excinfo", "value", "args", "0", "not", "a", "valid", "integer", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "42", "assert", "excinfo", "value", "args", "0", "not", "a", "valid", "integer"], "doc_len": 75}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_decimal_field_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_decimal_field_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_decimal_field_deserialization(self):\n        m1 = 12\n        m2 = \"12.355\"\n        m3 = decimal.Decimal(1)\n        m4 = 3.14\n        m5 = \"abc\"\n        m6 = [1, 2]\n\n        field = fields.Decimal()\n        assert isinstance(field.deserialize(m1), decimal.Decimal)\n        assert field.deserialize(m1) == decimal.Decimal(12)\n        assert isinstance(field.deserialize(m2), decimal.Decimal)\n        assert field.deserialize(m2) == decimal.Decimal(\"12.355\")\n        assert isinstance(field.deserialize(m3), decimal.Decimal)\n        assert field.deserialize(m3) == decimal.Decimal(1)\n        assert isinstance(field.deserialize(m4), decimal.Decimal)\n        assert field.deserialize(m4).as_tuple() == (0, (3, 1, 4), -2)\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize(m5)\n        assert excinfo.value.args[0] == \"Not a valid number.\"\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize(m6)\n        assert excinfo.value.args[0] == \"Not a valid number.\"\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_decimal_field_deserialization", "self", "m1", "12", "m2", "12", "355", "m3", "decimal", "decimal", "1", "m4", "3", "14", "m5", "abc", "m6", "1", "2", "field", "fields", "decimal", "assert", "isinstance", "field", "deserialize", "m1", "decimal", "decimal", "assert", "field", "deserialize", "m1", "decimal", "decimal", "12", "assert", "isinstance", "field", "deserialize", "m2", "decimal", "decimal", "assert", "field", "deserialize", "m2", "decimal", "decimal", "12", "355", "assert", "isinstance", "field", "deserialize", "m3", "decimal", "decimal", "assert", "field", "deserialize", "m3", "decimal", "decimal", "1", "assert", "isinstance", "field", "deserialize", "m4", "decimal", "decimal", "assert", "field", "deserialize", "m4", "as_tuple", "0", "3", "1", "4", "2", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "m5", "assert", "excinfo", "value", "args", "0", "not", "a", "valid", "number", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "m6", "assert", "excinfo", "value", "args", "0", "not", "a", "valid", "number"], "doc_len": 123}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_decimal_field_with_places", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_decimal_field_with_places", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_decimal_field_with_places(self):\n        m1 = 12\n        m2 = \"12.355\"\n        m3 = decimal.Decimal(1)\n        m4 = \"abc\"\n        m5 = [1, 2]\n\n        field = fields.Decimal(1)\n        assert isinstance(field.deserialize(m1), decimal.Decimal)\n        assert field.deserialize(m1) == decimal.Decimal(12)\n        assert isinstance(field.deserialize(m2), decimal.Decimal)\n        assert field.deserialize(m2) == decimal.Decimal(\"12.4\")\n        assert isinstance(field.deserialize(m3), decimal.Decimal)\n        assert field.deserialize(m3) == decimal.Decimal(1)\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize(m4)\n        assert excinfo.value.args[0] == \"Not a valid number.\"\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize(m5)\n        assert excinfo.value.args[0] == \"Not a valid number.\"\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_decimal_field_with_places", "self", "m1", "12", "m2", "12", "355", "m3", "decimal", "decimal", "1", "m4", "abc", "m5", "1", "2", "field", "fields", "decimal", "1", "assert", "isinstance", "field", "deserialize", "m1", "decimal", "decimal", "assert", "field", "deserialize", "m1", "decimal", "decimal", "12", "assert", "isinstance", "field", "deserialize", "m2", "decimal", "decimal", "assert", "field", "deserialize", "m2", "decimal", "decimal", "12", "4", "assert", "isinstance", "field", "deserialize", "m3", "decimal", "decimal", "assert", "field", "deserialize", "m3", "decimal", "decimal", "1", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "m4", "assert", "excinfo", "value", "args", "0", "not", "a", "valid", "number", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "m5", "assert", "excinfo", "value", "args", "0", "not", "a", "valid", "number"], "doc_len": 104}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_decimal_field_with_places_and_rounding", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_decimal_field_with_places_and_rounding", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_decimal_field_with_places_and_rounding(self):\n        m1 = 12\n        m2 = \"12.355\"\n        m3 = decimal.Decimal(1)\n        m4 = \"abc\"\n        m5 = [1, 2]\n\n        field = fields.Decimal(1, decimal.ROUND_DOWN)\n        assert isinstance(field.deserialize(m1), decimal.Decimal)\n        assert field.deserialize(m1) == decimal.Decimal(12)\n        assert isinstance(field.deserialize(m2), decimal.Decimal)\n        assert field.deserialize(m2) == decimal.Decimal(\"12.3\")\n        assert isinstance(field.deserialize(m3), decimal.Decimal)\n        assert field.deserialize(m3) == decimal.Decimal(1)\n        with pytest.raises(ValidationError):\n            field.deserialize(m4)\n        with pytest.raises(ValidationError):\n            field.deserialize(m5)\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_decimal_field_with_places_and_rounding", "self", "m1", "12", "m2", "12", "355", "m3", "decimal", "decimal", "1", "m4", "abc", "m5", "1", "2", "field", "fields", "decimal", "1", "decimal", "round_down", "assert", "isinstance", "field", "deserialize", "m1", "decimal", "decimal", "assert", "field", "deserialize", "m1", "decimal", "decimal", "12", "assert", "isinstance", "field", "deserialize", "m2", "decimal", "decimal", "assert", "field", "deserialize", "m2", "decimal", "decimal", "12", "3", "assert", "isinstance", "field", "deserialize", "m3", "decimal", "decimal", "assert", "field", "deserialize", "m3", "decimal", "decimal", "1", "with", "pytest", "raises", "validationerror", "field", "deserialize", "m4", "with", "pytest", "raises", "validationerror", "field", "deserialize", "m5"], "doc_len": 84}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_decimal_field_deserialization_string", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_decimal_field_deserialization_string", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_decimal_field_deserialization_string(self):\n        m1 = 12\n        m2 = \"12.355\"\n        m3 = decimal.Decimal(1)\n        m4 = \"abc\"\n        m5 = [1, 2]\n\n        field = fields.Decimal(as_string=True)\n        assert isinstance(field.deserialize(m1), decimal.Decimal)\n        assert field.deserialize(m1) == decimal.Decimal(12)\n        assert isinstance(field.deserialize(m2), decimal.Decimal)\n        assert field.deserialize(m2) == decimal.Decimal(\"12.355\")\n        assert isinstance(field.deserialize(m3), decimal.Decimal)\n        assert field.deserialize(m3) == decimal.Decimal(1)\n        with pytest.raises(ValidationError):\n            field.deserialize(m4)\n        with pytest.raises(ValidationError):\n            field.deserialize(m5)\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_decimal_field_deserialization_string", "self", "m1", "12", "m2", "12", "355", "m3", "decimal", "decimal", "1", "m4", "abc", "m5", "1", "2", "field", "fields", "decimal", "as_string", "true", "assert", "isinstance", "field", "deserialize", "m1", "decimal", "decimal", "assert", "field", "deserialize", "m1", "decimal", "decimal", "12", "assert", "isinstance", "field", "deserialize", "m2", "decimal", "decimal", "assert", "field", "deserialize", "m2", "decimal", "decimal", "12", "355", "assert", "isinstance", "field", "deserialize", "m3", "decimal", "decimal", "assert", "field", "deserialize", "m3", "decimal", "decimal", "1", "with", "pytest", "raises", "validationerror", "field", "deserialize", "m4", "with", "pytest", "raises", "validationerror", "field", "deserialize", "m5"], "doc_len": 83}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_decimal_field_special_values", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_decimal_field_special_values", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_decimal_field_special_values(self):\n        m1 = \"-NaN\"\n        m2 = \"NaN\"\n        m3 = \"-sNaN\"\n        m4 = \"sNaN\"\n        m5 = \"-Infinity\"\n        m6 = \"Infinity\"\n        m7 = \"-0\"\n\n        field = fields.Decimal(places=2, allow_nan=True)\n\n        m1d = field.deserialize(m1)\n        assert isinstance(m1d, decimal.Decimal)\n        assert m1d.is_qnan() and not m1d.is_signed()\n\n        m2d = field.deserialize(m2)\n        assert isinstance(m2d, decimal.Decimal)\n        assert m2d.is_qnan() and not m2d.is_signed()\n\n        m3d = field.deserialize(m3)\n        assert isinstance(m3d, decimal.Decimal)\n        assert m3d.is_qnan() and not m3d.is_signed()\n\n        m4d = field.deserialize(m4)\n        assert isinstance(m4d, decimal.Decimal)\n        assert m4d.is_qnan() and not m4d.is_signed()\n\n        m5d = field.deserialize(m5)\n        assert isinstance(m5d, decimal.Decimal)\n        assert m5d.is_infinite() and m5d.is_signed()\n\n        m6d = field.deserialize(m6)\n        assert isinstance(m6d, decimal.Decimal)\n        assert m6d.is_infinite() and not m6d.is_signed()\n\n        m7d = field.deserialize(m7)\n        assert isinstance(m7d, decimal.Decimal)\n        assert m7d.is_zero() and m7d.is_signed()\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_decimal_field_special_values", "self", "m1", "nan", "m2", "nan", "m3", "snan", "m4", "snan", "m5", "infinity", "m6", "infinity", "m7", "0", "field", "fields", "decimal", "places", "2", "allow_nan", "true", "m1d", "field", "deserialize", "m1", "assert", "isinstance", "m1d", "decimal", "decimal", "assert", "m1d", "is_qnan", "and", "not", "m1d", "is_signed", "m2d", "field", "deserialize", "m2", "assert", "isinstance", "m2d", "decimal", "decimal", "assert", "m2d", "is_qnan", "and", "not", "m2d", "is_signed", "m3d", "field", "deserialize", "m3", "assert", "isinstance", "m3d", "decimal", "decimal", "assert", "m3d", "is_qnan", "and", "not", "m3d", "is_signed", "m4d", "field", "deserialize", "m4", "assert", "isinstance", "m4d", "decimal", "decimal", "assert", "m4d", "is_qnan", "and", "not", "m4d", "is_signed", "m5d", "field", "deserialize", "m5", "assert", "isinstance", "m5d", "decimal", "decimal", "assert", "m5d", "is_infinite", "and", "m5d", "is_signed", "m6d", "field", "deserialize", "m6", "assert", "isinstance", "m6d", "decimal", "decimal", "assert", "m6d", "is_infinite", "and", "not", "m6d", "is_signed", "m7d", "field", "deserialize", "m7", "assert", "isinstance", "m7d", "decimal", "decimal", "assert", "m7d", "is_zero", "and", "m7d", "is_signed"], "doc_len": 138}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_decimal_field_special_values_not_permitted", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_decimal_field_special_values_not_permitted", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_decimal_field_special_values_not_permitted(self):\n        m1 = \"-NaN\"\n        m2 = \"NaN\"\n        m3 = \"-sNaN\"\n        m4 = \"sNaN\"\n        m5 = \"-Infinity\"\n        m6 = \"Infinity\"\n        m7 = \"-0\"\n\n        field = fields.Decimal(places=2)\n\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize(m1)\n        assert str(excinfo.value.args[0]) == (\n            \"Special numeric values (nan or infinity) are not permitted.\"\n        )\n        with pytest.raises(ValidationError):\n            field.deserialize(m2)\n        with pytest.raises(ValidationError):\n            field.deserialize(m3)\n        with pytest.raises(ValidationError):\n            field.deserialize(m4)\n        with pytest.raises(ValidationError):\n            field.deserialize(m5)\n        with pytest.raises(ValidationError):\n            field.deserialize(m6)\n\n        m7d = field.deserialize(m7)\n        assert isinstance(m7d, decimal.Decimal)\n        assert m7d.is_zero() and m7d.is_signed()\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_decimal_field_special_values_not_permitted", "self", "m1", "nan", "m2", "nan", "m3", "snan", "m4", "snan", "m5", "infinity", "m6", "infinity", "m7", "0", "field", "fields", "decimal", "places", "2", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "m1", "assert", "str", "excinfo", "value", "args", "0", "special", "numeric", "values", "nan", "or", "infinity", "are", "not", "permitted", "with", "pytest", "raises", "validationerror", "field", "deserialize", "m2", "with", "pytest", "raises", "validationerror", "field", "deserialize", "m3", "with", "pytest", "raises", "validationerror", "field", "deserialize", "m4", "with", "pytest", "raises", "validationerror", "field", "deserialize", "m5", "with", "pytest", "raises", "validationerror", "field", "deserialize", "m6", "m7d", "field", "deserialize", "m7", "assert", "isinstance", "m7d", "decimal", "decimal", "assert", "m7d", "is_zero", "and", "m7d", "is_signed"], "doc_len": 100}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_float_field_allow_nan", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_float_field_allow_nan", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_float_field_allow_nan(self, value, allow_nan):\n\n        if allow_nan is None:\n            # Test default case is False\n            field = fields.Float()\n        else:\n            field = fields.Float(allow_nan=allow_nan)\n\n        if allow_nan is True:\n            res = field.deserialize(value)\n            assert isinstance(res, float)\n            if value.endswith(\"nan\"):\n                assert math.isnan(res)\n            else:\n                assert res == float(value)\n        else:\n            with pytest.raises(ValidationError) as excinfo:\n                field.deserialize(value)\n            assert str(excinfo.value.args[0]) == (\n                \"Special numeric values (nan or infinity) are not permitted.\"\n            )\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_float_field_allow_nan", "self", "value", "allow_nan", "if", "allow_nan", "is", "none", "test", "default", "case", "is", "false", "field", "fields", "float", "else", "field", "fields", "float", "allow_nan", "allow_nan", "if", "allow_nan", "is", "true", "res", "field", "deserialize", "value", "assert", "isinstance", "res", "float", "if", "value", "endswith", "nan", "assert", "math", "isnan", "res", "else", "assert", "res", "float", "value", "else", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "value", "assert", "str", "excinfo", "value", "args", "0", "special", "numeric", "values", "nan", "or", "infinity", "are", "not", "permitted"], "doc_len": 77}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_string_field_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_string_field_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_string_field_deserialization(self):\n        field = fields.String()\n        assert field.deserialize(\"foo\") == \"foo\"\n        assert field.deserialize(b\"foo\") == \"foo\"\n\n        # https://github.com/marshmallow-code/marshmallow/issues/231\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize(42)\n        assert excinfo.value.args[0] == \"Not a valid string.\"\n\n        with pytest.raises(ValidationError):\n            field.deserialize({})\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_string_field_deserialization", "self", "field", "fields", "string", "assert", "field", "deserialize", "foo", "foo", "assert", "field", "deserialize", "b", "foo", "foo", "https", "github", "com", "marshmallow", "code", "marshmallow", "issues", "231", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "42", "assert", "excinfo", "value", "args", "0", "not", "a", "valid", "string", "with", "pytest", "raises", "validationerror", "field", "deserialize"], "doc_len": 53}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_boolean_field_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_boolean_field_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_boolean_field_deserialization(self):\n        field = fields.Boolean()\n        assert field.deserialize(True) is True\n        assert field.deserialize(False) is False\n        assert field.deserialize(\"True\") is True\n        assert field.deserialize(\"False\") is False\n        assert field.deserialize(\"true\") is True\n        assert field.deserialize(\"false\") is False\n        assert field.deserialize(\"1\") is True\n        assert field.deserialize(\"0\") is False\n        assert field.deserialize(\"on\") is True\n        assert field.deserialize(\"ON\") is True\n        assert field.deserialize(\"On\") is True\n        assert field.deserialize(\"off\") is False\n        assert field.deserialize(\"OFF\") is False\n        assert field.deserialize(\"Off\") is False\n        assert field.deserialize(\"y\") is True\n        assert field.deserialize(\"Y\") is True\n        assert field.deserialize(\"yes\") is True\n        assert field.deserialize(\"YES\") is True\n        assert field.deserialize(\"Yes\") is True\n        assert field.deserialize(\"n\") is False\n        assert field.deserialize(\"N\") is False\n        assert field.deserialize(\"no\") is False\n        assert field.deserialize(\"NO\") is False\n        assert field.deserialize(\"No\") is False\n        assert field.deserialize(1) is True\n        assert field.deserialize(0) is False\n\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize({})\n        assert excinfo.value.args[0] == \"Not a valid boolean.\"\n\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize(42)\n\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize(\"invalid-string\")\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_boolean_field_deserialization", "self", "field", "fields", "boolean", "assert", "field", "deserialize", "true", "is", "true", "assert", "field", "deserialize", "false", "is", "false", "assert", "field", "deserialize", "true", "is", "true", "assert", "field", "deserialize", "false", "is", "false", "assert", "field", "deserialize", "true", "is", "true", "assert", "field", "deserialize", "false", "is", "false", "assert", "field", "deserialize", "1", "is", "true", "assert", "field", "deserialize", "0", "is", "false", "assert", "field", "deserialize", "on", "is", "true", "assert", "field", "deserialize", "on", "is", "true", "assert", "field", "deserialize", "on", "is", "true", "assert", "field", "deserialize", "off", "is", "false", "assert", "field", "deserialize", "off", "is", "false", "assert", "field", "deserialize", "off", "is", "false", "assert", "field", "deserialize", "y", "is", "true", "assert", "field", "deserialize", "y", "is", "true", "assert", "field", "deserialize", "yes", "is", "true", "assert", "field", "deserialize", "yes", "is", "true", "assert", "field", "deserialize", "yes", "is", "true", "assert", "field", "deserialize", "n", "is", "false", "assert", "field", "deserialize", "n", "is", "false", "assert", "field", "deserialize", "no", "is", "false", "assert", "field", "deserialize", "no", "is", "false", "assert", "field", "deserialize", "no", "is", "false", "assert", "field", "deserialize", "1", "is", "true", "assert", "field", "deserialize", "0", "is", "false", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "assert", "excinfo", "value", "args", "0", "not", "a", "valid", "boolean", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "42", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "invalid", "string"], "doc_len": 202}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_boolean_field_deserialization_with_custom_truthy_values", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_boolean_field_deserialization_with_custom_truthy_values", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_boolean_field_deserialization_with_custom_truthy_values(self):\n        class MyBoolean(fields.Boolean):\n            truthy = {\"yep\"}\n\n        field = MyBoolean()\n        assert field.deserialize(\"yep\") is True\n\n        field = fields.Boolean(truthy=(\"yep\",))\n        assert field.deserialize(\"yep\") is True\n        assert field.deserialize(False) is False\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_boolean_field_deserialization_with_custom_truthy_values", "self", "class", "myboolean", "fields", "boolean", "truthy", "yep", "field", "myboolean", "assert", "field", "deserialize", "yep", "is", "true", "field", "fields", "boolean", "truthy", "yep", "assert", "field", "deserialize", "yep", "is", "true", "assert", "field", "deserialize", "false", "is", "false"], "doc_len": 38}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_boolean_field_deserialization_with_custom_truthy_values_invalid", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_boolean_field_deserialization_with_custom_truthy_values_invalid", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_boolean_field_deserialization_with_custom_truthy_values_invalid(\n        self, in_val\n    ):\n        class MyBoolean(fields.Boolean):\n            truthy = {\"yep\"}\n\n        field = MyBoolean()\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize(in_val)\n        expected_msg = \"Not a valid boolean.\"\n        assert str(excinfo.value.args[0]) == expected_msg\n\n        field = fields.Boolean(truthy=(\"yep\",))\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize(in_val)\n        expected_msg = \"Not a valid boolean.\"\n        assert str(excinfo.value.args[0]) == expected_msg\n\n        field2 = MyBoolean(error_messages={\"invalid\": \"bad input\"})\n        with pytest.raises(ValidationError) as excinfo:\n            field2.deserialize(in_val)\n        assert str(excinfo.value.args[0]) == \"bad input\"\n\n        field2 = fields.Boolean(\n            truthy=(\"yep\",), error_messages={\"invalid\": \"bad input\"}\n        )\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_boolean_field_deserialization_with_custom_truthy_values_invalid", "self", "in_val", "class", "myboolean", "fields", "boolean", "truthy", "yep", "field", "myboolean", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "in_val", "expected_msg", "not", "a", "valid", "boolean", "assert", "str", "excinfo", "value", "args", "0", "expected_msg", "field", "fields", "boolean", "truthy", "yep", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "in_val", "expected_msg", "not", "a", "valid", "boolean", "assert", "str", "excinfo", "value", "args", "0", "expected_msg", "field2", "myboolean", "error_messages", "invalid", "bad", "input", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field2", "deserialize", "in_val", "assert", "str", "excinfo", "value", "args", "0", "bad", "input", "field2", "fields", "boolean", "truthy", "yep", "error_messages", "invalid", "bad", "input"], "doc_len": 95}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_boolean_field_deserialization_with_empty_truthy", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_boolean_field_deserialization_with_empty_truthy", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_boolean_field_deserialization_with_empty_truthy(self):\n        field = fields.Boolean(truthy=())\n        assert field.deserialize(\"yep\") is True\n        assert field.deserialize(True) is True\n        assert field.deserialize(False) is False\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_boolean_field_deserialization_with_empty_truthy", "self", "field", "fields", "boolean", "truthy", "assert", "field", "deserialize", "yep", "is", "true", "assert", "field", "deserialize", "true", "is", "true", "assert", "field", "deserialize", "false", "is", "false"], "doc_len": 29}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_boolean_field_deserialization_with_custom_falsy_values", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_boolean_field_deserialization_with_custom_falsy_values", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_boolean_field_deserialization_with_custom_falsy_values(self):\n        field = fields.Boolean(falsy=(\"nope\",))\n        assert field.deserialize(\"nope\") is False\n        assert field.deserialize(True) is True\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_boolean_field_deserialization_with_custom_falsy_values", "self", "field", "fields", "boolean", "falsy", "nope", "assert", "field", "deserialize", "nope", "is", "false", "assert", "field", "deserialize", "true", "is", "true"], "doc_len": 24}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_field_toggle_show_invalid_value_in_error_message", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_field_toggle_show_invalid_value_in_error_message", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_field_toggle_show_invalid_value_in_error_message(self):\n        error_messages = {\"invalid\": \"Not valid: {input}\"}\n        boolfield = fields.Boolean(error_messages=error_messages)\n        with pytest.raises(ValidationError) as excinfo:\n            boolfield.deserialize(\"notabool\")\n        assert str(excinfo.value.args[0]) == \"Not valid: notabool\"\n\n        numfield = fields.Number(error_messages=error_messages)\n        with pytest.raises(ValidationError) as excinfo:\n            numfield.deserialize(\"notanum\")\n        assert str(excinfo.value.args[0]) == \"Not valid: notanum\"\n\n        intfield = fields.Integer(error_messages=error_messages)\n        with pytest.raises(ValidationError) as excinfo:\n            intfield.deserialize(\"notanint\")\n        assert str(excinfo.value.args[0]) == \"Not valid: notanint\"\n\n        date_error_messages = {\"invalid\": \"Not a valid {obj_type}: {input}\"}\n        datefield = fields.DateTime(error_messages=date_error_messages)\n        with pytest.raises(ValidationError) as excinfo:\n            datefield.deserialize(\"notadate\")\n        assert str(excinfo.value.args[0]) == \"Not a valid datetime: notadate\"\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_field_toggle_show_invalid_value_in_error_message", "self", "error_messages", "invalid", "not", "valid", "input", "boolfield", "fields", "boolean", "error_messages", "error_messages", "with", "pytest", "raises", "validationerror", "as", "excinfo", "boolfield", "deserialize", "notabool", "assert", "str", "excinfo", "value", "args", "0", "not", "valid", "notabool", "numfield", "fields", "number", "error_messages", "error_messages", "with", "pytest", "raises", "validationerror", "as", "excinfo", "numfield", "deserialize", "notanum", "assert", "str", "excinfo", "value", "args", "0", "not", "valid", "notanum", "intfield", "fields", "integer", "error_messages", "error_messages", "with", "pytest", "raises", "validationerror", "as", "excinfo", "intfield", "deserialize", "notanint", "assert", "str", "excinfo", "value", "args", "0", "not", "valid", "notanint", "date_error_messages", "invalid", "not", "a", "valid", "obj_type", "input", "datefield", "fields", "datetime", "error_messages", "date_error_messages", "with", "pytest", "raises", "validationerror", "as", "excinfo", "datefield", "deserialize", "notadate", "assert", "str", "excinfo", "value", "args", "0", "not", "a", "valid", "datetime", "notadate"], "doc_len": 113}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_invalid_datetime_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_invalid_datetime_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_invalid_datetime_deserialization(self, in_value):\n        field = fields.DateTime()\n        with pytest.raises(ValidationError, match=\"Not a valid datetime.\"):\n            field.deserialize(in_value)\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_invalid_datetime_deserialization", "self", "in_value", "field", "fields", "datetime", "with", "pytest", "raises", "validationerror", "match", "not", "a", "valid", "datetime", "field", "deserialize", "in_value"], "doc_len": 23}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_custom_date_format_datetime_field_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_custom_date_format_datetime_field_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_custom_date_format_datetime_field_deserialization(self):\n        # Datetime string with format \"%H:%M:%S.%f %Y-%m-%d\"\n        datestring = \"10:11:12.123456 2019-01-02\"\n\n        # Deserialization should fail when datestring is not of same format\n        field = fields.DateTime(format=\"%d-%m-%Y %H:%M:%S\")\n        with pytest.raises(ValidationError, match=\"Not a valid datetime.\"):\n            field.deserialize(datestring)\n\n        field = fields.DateTime(format=\"%H:%M:%S.%f %Y-%m-%d\")\n        assert field.deserialize(datestring) == dt.datetime(\n            2019, 1, 2, 10, 11, 12, 123456\n        )\n\n        field = fields.NaiveDateTime(format=\"%H:%M:%S.%f %Y-%m-%d\")\n        assert field.deserialize(datestring) == dt.datetime(\n            2019, 1, 2, 10, 11, 12, 123456\n        )\n\n        field = fields.AwareDateTime(format=\"%H:%M:%S.%f %Y-%m-%d\")\n        with pytest.raises(ValidationError, match=\"Not a valid aware datetime.\"):\n            field.deserialize(datestring)\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_custom_date_format_datetime_field_deserialization", "self", "datetime", "string", "with", "format", "h", "m", "s", "f", "y", "m", "d", "datestring", "10", "11", "12", "123456", "2019", "01", "02", "deserialization", "should", "fail", "when", "datestring", "is", "not", "of", "same", "format", "field", "fields", "datetime", "format", "d", "m", "y", "h", "m", "s", "with", "pytest", "raises", "validationerror", "match", "not", "a", "valid", "datetime", "field", "deserialize", "datestring", "field", "fields", "datetime", "format", "h", "m", "s", "f", "y", "m", "d", "assert", "field", "deserialize", "datestring", "dt", "datetime", "2019", "1", "2", "10", "11", "12", "123456", "field", "fields", "naivedatetime", "format", "h", "m", "s", "f", "y", "m", "d", "assert", "field", "deserialize", "datestring", "dt", "datetime", "2019", "1", "2", "10", "11", "12", "123456", "field", "fields", "awaredatetime", "format", "h", "m", "s", "f", "y", "m", "d", "with", "pytest", "raises", "validationerror", "match", "not", "a", "valid", "aware", "datetime", "field", "deserialize", "datestring"], "doc_len": 130}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_rfc_datetime_field_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_rfc_datetime_field_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_rfc_datetime_field_deserialization(self, fmt, value, expected, aware):\n        field = fields.DateTime(format=fmt)\n        assert field.deserialize(value) == expected\n        field = fields.NaiveDateTime(format=fmt)\n        if aware:\n            with pytest.raises(ValidationError, match=\"Not a valid naive datetime.\"):\n                field.deserialize(value)\n        else:\n            assert field.deserialize(value) == expected\n        field = fields.AwareDateTime(format=fmt)\n        if not aware:\n            with pytest.raises(ValidationError, match=\"Not a valid aware datetime.\"):\n                field.deserialize(value)\n        else:\n            assert field.deserialize(value) == expected\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_rfc_datetime_field_deserialization", "self", "fmt", "value", "expected", "aware", "field", "fields", "datetime", "format", "fmt", "assert", "field", "deserialize", "value", "expected", "field", "fields", "naivedatetime", "format", "fmt", "if", "aware", "with", "pytest", "raises", "validationerror", "match", "not", "a", "valid", "naive", "datetime", "field", "deserialize", "value", "else", "assert", "field", "deserialize", "value", "expected", "field", "fields", "awaredatetime", "format", "fmt", "if", "not", "aware", "with", "pytest", "raises", "validationerror", "match", "not", "a", "valid", "aware", "datetime", "field", "deserialize", "value", "else", "assert", "field", "deserialize", "value", "expected"], "doc_len": 74}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_iso_datetime_field_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_iso_datetime_field_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_iso_datetime_field_deserialization(self, fmt, value, expected, aware):\n        field = fields.DateTime(format=fmt)\n        assert field.deserialize(value) == expected\n        field = fields.NaiveDateTime(format=fmt)\n        if aware:\n            with pytest.raises(ValidationError, match=\"Not a valid naive datetime.\"):\n                field.deserialize(value)\n        else:\n            assert field.deserialize(value) == expected\n        field = fields.AwareDateTime(format=fmt)\n        if not aware:\n            with pytest.raises(ValidationError, match=\"Not a valid aware datetime.\"):\n                field.deserialize(value)\n        else:\n            assert field.deserialize(value) == expected\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_iso_datetime_field_deserialization", "self", "fmt", "value", "expected", "aware", "field", "fields", "datetime", "format", "fmt", "assert", "field", "deserialize", "value", "expected", "field", "fields", "naivedatetime", "format", "fmt", "if", "aware", "with", "pytest", "raises", "validationerror", "match", "not", "a", "valid", "naive", "datetime", "field", "deserialize", "value", "else", "assert", "field", "deserialize", "value", "expected", "field", "fields", "awaredatetime", "format", "fmt", "if", "not", "aware", "with", "pytest", "raises", "validationerror", "match", "not", "a", "valid", "aware", "datetime", "field", "deserialize", "value", "else", "assert", "field", "deserialize", "value", "expected"], "doc_len": 74}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_naive_datetime_with_timezone", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_naive_datetime_with_timezone", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_naive_datetime_with_timezone(self, fmt, timezone, value, expected):\n        field = fields.NaiveDateTime(format=fmt, timezone=timezone)\n        assert field.deserialize(value) == expected\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_naive_datetime_with_timezone", "self", "fmt", "timezone", "value", "expected", "field", "fields", "naivedatetime", "format", "fmt", "timezone", "timezone", "assert", "field", "deserialize", "value", "expected"], "doc_len": 23}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_aware_datetime_default_timezone", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_aware_datetime_default_timezone", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_aware_datetime_default_timezone(self, fmt, timezone, value):\n        field = fields.AwareDateTime(format=fmt, default_timezone=timezone)\n        assert field.deserialize(value) == dt.datetime(\n            2013, 11, 10, 1, 23, 45, tzinfo=timezone\n        )\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_aware_datetime_default_timezone", "self", "fmt", "timezone", "value", "field", "fields", "awaredatetime", "format", "fmt", "default_timezone", "timezone", "assert", "field", "deserialize", "value", "dt", "datetime", "2013", "11", "10", "1", "23", "45", "tzinfo", "timezone"], "doc_len": 31}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_time_field_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_time_field_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_time_field_deserialization(self):\n        field = fields.Time()\n        t = dt.time(1, 23, 45)\n        t_formatted = t.isoformat()\n        result = field.deserialize(t_formatted)\n        assert isinstance(result, dt.time)\n        assert_time_equal(result, t)\n        # With microseconds\n        t2 = dt.time(1, 23, 45, 6789)\n        t2_formatted = t2.isoformat()\n        result2 = field.deserialize(t2_formatted)\n        assert_time_equal(result2, t2)\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_time_field_deserialization", "self", "field", "fields", "time", "t", "dt", "time", "1", "23", "45", "t_formatted", "t", "isoformat", "result", "field", "deserialize", "t_formatted", "assert", "isinstance", "result", "dt", "time", "assert_time_equal", "result", "t", "with", "microseconds", "t2", "dt", "time", "1", "23", "45", "6789", "t2_formatted", "t2", "isoformat", "result2", "field", "deserialize", "t2_formatted", "assert_time_equal", "result2", "t2"], "doc_len": 50}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_invalid_time_field_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_invalid_time_field_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_invalid_time_field_deserialization(self, in_data):\n        field = fields.Time()\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize(in_data)\n        assert excinfo.value.args[0] == \"Not a valid time.\"\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_invalid_time_field_deserialization", "self", "in_data", "field", "fields", "time", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "in_data", "assert", "excinfo", "value", "args", "0", "not", "a", "valid", "time"], "doc_len": 29}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_invalid_timedelta_precision", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_invalid_timedelta_precision", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_invalid_timedelta_precision(self):\n        with pytest.raises(ValueError, match='The precision must be \"days\",'):\n            fields.TimeDelta(\"invalid\")\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_invalid_timedelta_precision", "self", "with", "pytest", "raises", "valueerror", "match", "the", "precision", "must", "be", "days", "fields", "timedelta", "invalid"], "doc_len": 20}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_timedelta_field_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_timedelta_field_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_timedelta_field_deserialization(self):\n        field = fields.TimeDelta()\n        result = field.deserialize(\"42\")\n        assert isinstance(result, dt.timedelta)\n        assert result.days == 0\n        assert result.seconds == 42\n        assert result.microseconds == 0\n\n        field = fields.TimeDelta(fields.TimeDelta.SECONDS)\n        result = field.deserialize(100000)\n        assert result.days == 1\n        assert result.seconds == 13600\n        assert result.microseconds == 0\n\n        field = fields.TimeDelta(fields.TimeDelta.DAYS)\n        result = field.deserialize(\"-42\")\n        assert isinstance(result, dt.timedelta)\n        assert result.days == -42\n        assert result.seconds == 0\n        assert result.microseconds == 0\n\n        field = fields.TimeDelta(fields.TimeDelta.MICROSECONDS)\n        result = field.deserialize(10 ** 6 + 1)\n        assert isinstance(result, dt.timedelta)\n        assert result.days == 0\n        assert result.seconds == 1\n        assert result.microseconds == 1\n\n        field = fields.TimeDelta(fields.TimeDelta.MICROSECONDS)\n        result = field.deserialize(86400 * 10 ** 6 + 1)\n        assert isinstance(result, dt.timedelta)\n        assert result.days == 1\n        assert result.seconds == 0\n        assert result.microseconds == 1\n\n        field = fields.TimeDelta()\n        result = field.deserialize(12.9)\n        assert isinstance(result, dt.timedelta)\n        assert result.days == 0\n        assert result.seconds == 12\n        assert result.microseconds == 0\n\n        field = fields.TimeDelta(fields.TimeDelta.WEEKS)\n        result = field.deserialize(1)\n        assert isinstance(result, dt.timedelta)\n        assert result.days == 7\n        assert result.seconds == 0\n        assert result.microseconds == 0\n\n        field = fields.TimeDelta(fields.TimeDelta.HOURS)\n        result = field.deserialize(25)\n        assert isinstance(result, dt.timedelta)\n        assert result.days == 1\n        assert result.seconds == 3600\n        assert result.microseconds == 0\n\n        field = fields.TimeDelta(fields.TimeDelta.MINUTES)\n        result = field.deserialize(1441)\n        assert isinstance(result, dt.timedelta)\n        assert result.days == 1\n        assert result.seconds == 60\n        assert result.microseconds == 0\n\n        field = fields.TimeDelta(fields.TimeDelta.MILLISECONDS)\n        result = field.deserialize(123456)\n        assert isinstance(result, dt.timedelta)\n        assert result.days == 0\n        assert result.seconds == 123\n        assert result.microseconds == 456000\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_timedelta_field_deserialization", "self", "field", "fields", "timedelta", "result", "field", "deserialize", "42", "assert", "isinstance", "result", "dt", "timedelta", "assert", "result", "days", "0", "assert", "result", "seconds", "42", "assert", "result", "microseconds", "0", "field", "fields", "timedelta", "fields", "timedelta", "seconds", "result", "field", "deserialize", "100000", "assert", "result", "days", "1", "assert", "result", "seconds", "13600", "assert", "result", "microseconds", "0", "field", "fields", "timedelta", "fields", "timedelta", "days", "result", "field", "deserialize", "42", "assert", "isinstance", "result", "dt", "timedelta", "assert", "result", "days", "42", "assert", "result", "seconds", "0", "assert", "result", "microseconds", "0", "field", "fields", "timedelta", "fields", "timedelta", "microseconds", "result", "field", "deserialize", "10", "6", "1", "assert", "isinstance", "result", "dt", "timedelta", "assert", "result", "days", "0", "assert", "result", "seconds", "1", "assert", "result", "microseconds", "1", "field", "fields", "timedelta", "fields", "timedelta", "microseconds", "result", "field", "deserialize", "86400", "10", "6", "1", "assert", "isinstance", "result", "dt", "timedelta", "assert", "result", "days", "1", "assert", "result", "seconds", "0", "assert", "result", "microseconds", "1", "field", "fields", "timedelta", "result", "field", "deserialize", "12", "9", "assert", "isinstance", "result", "dt", "timedelta", "assert", "result", "days", "0", "assert", "result", "seconds", "12", "assert", "result", "microseconds", "0", "field", "fields", "timedelta", "fields", "timedelta", "weeks", "result", "field", "deserialize", "1", "assert", "isinstance", "result", "dt", "timedelta", "assert", "result", "days", "7", "assert", "result", "seconds", "0", "assert", "result", "microseconds", "0", "field", "fields", "timedelta", "fields", "timedelta", "hours", "result", "field", "deserialize", "25", "assert", "isinstance", "result", "dt", "timedelta", "assert", "result", "days", "1", "assert", "result", "seconds", "3600", "assert", "result", "microseconds", "0", "field", "fields", "timedelta", "fields", "timedelta", "minutes", "result", "field", "deserialize", "1441", "assert", "isinstance", "result", "dt", "timedelta", "assert", "result", "days", "1", "assert", "result", "seconds", "60", "assert", "result", "microseconds", "0", "field", "fields", "timedelta", "fields", "timedelta", "milliseconds", "result", "field", "deserialize", "123456", "assert", "isinstance", "result", "dt", "timedelta", "assert", "result", "days", "0", "assert", "result", "seconds", "123", "assert", "result", "microseconds", "456000"], "doc_len": 272}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_invalid_timedelta_field_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_invalid_timedelta_field_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_invalid_timedelta_field_deserialization(self, in_value):\n        field = fields.TimeDelta(fields.TimeDelta.DAYS)\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize(in_value)\n        assert excinfo.value.args[0] == \"Not a valid period of time.\"\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_invalid_timedelta_field_deserialization", "self", "in_value", "field", "fields", "timedelta", "fields", "timedelta", "days", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "in_value", "assert", "excinfo", "value", "args", "0", "not", "a", "valid", "period", "of", "time"], "doc_len": 34}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_date_field_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_date_field_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_date_field_deserialization(self, format):\n        field = fields.Date(format=format)\n        d = dt.date(2014, 8, 21)\n        iso_date = d.isoformat()\n        result = field.deserialize(iso_date)\n        assert type(result) == dt.date\n        assert_date_equal(result, d)\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_date_field_deserialization", "self", "format", "field", "fields", "date", "format", "format", "d", "dt", "date", "2014", "8", "21", "iso_date", "d", "isoformat", "result", "field", "deserialize", "iso_date", "assert", "type", "result", "dt", "date", "assert_date_equal", "result", "d"], "doc_len": 34}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_invalid_date_field_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_invalid_date_field_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_invalid_date_field_deserialization(self, in_value):\n        field = fields.Date()\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize(in_value)\n        msg = \"Not a valid date.\"\n        assert excinfo.value.args[0] == msg\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_invalid_date_field_deserialization", "self", "in_value", "field", "fields", "date", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "in_value", "msg", "not", "a", "valid", "date", "assert", "excinfo", "value", "args", "0", "msg"], "doc_len": 31}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_dict_field_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_dict_field_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_dict_field_deserialization(self):\n        field = fields.Dict()\n        assert field.deserialize({\"foo\": \"bar\"}) == {\"foo\": \"bar\"}\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize(\"baddict\")\n        assert excinfo.value.args[0] == \"Not a valid mapping type.\"\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_dict_field_deserialization", "self", "field", "fields", "dict", "assert", "field", "deserialize", "foo", "bar", "foo", "bar", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "baddict", "assert", "excinfo", "value", "args", "0", "not", "a", "valid", "mapping", "type"], "doc_len": 36}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_structured_dict_value_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_structured_dict_value_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_structured_dict_value_deserialization(self):\n        field = fields.Dict(values=fields.List(fields.Str))\n        assert field.deserialize({\"foo\": [\"bar\", \"baz\"]}) == {\"foo\": [\"bar\", \"baz\"]}\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize({\"foo\": [1, 2], \"bar\": \"baz\", \"ham\": [\"spam\"]})\n        assert excinfo.value.args[0] == {\n            \"foo\": {\"value\": {0: [\"Not a valid string.\"], 1: [\"Not a valid string.\"]}},\n            \"bar\": {\"value\": [\"Not a valid list.\"]},\n        }\n        assert excinfo.value.valid_data == {\"foo\": [], \"ham\": [\"spam\"]}\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_structured_dict_value_deserialization", "self", "field", "fields", "dict", "values", "fields", "list", "fields", "str", "assert", "field", "deserialize", "foo", "bar", "baz", "foo", "bar", "baz", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "foo", "1", "2", "bar", "baz", "ham", "spam", "assert", "excinfo", "value", "args", "0", "foo", "value", "0", "not", "a", "valid", "string", "1", "not", "a", "valid", "string", "bar", "value", "not", "a", "valid", "list", "assert", "excinfo", "value", "valid_data", "foo", "ham", "spam"], "doc_len": 69}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_structured_dict_key_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_structured_dict_key_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_structured_dict_key_deserialization(self):\n        field = fields.Dict(keys=fields.Str)\n        assert field.deserialize({\"foo\": \"bar\"}) == {\"foo\": \"bar\"}\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize({1: \"bar\", \"foo\": \"baz\"})\n        assert excinfo.value.args[0] == {1: {\"key\": [\"Not a valid string.\"]}}\n        assert excinfo.value.valid_data == {\"foo\": \"baz\"}\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_structured_dict_key_deserialization", "self", "field", "fields", "dict", "keys", "fields", "str", "assert", "field", "deserialize", "foo", "bar", "foo", "bar", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "1", "bar", "foo", "baz", "assert", "excinfo", "value", "args", "0", "1", "key", "not", "a", "valid", "string", "assert", "excinfo", "value", "valid_data", "foo", "baz"], "doc_len": 49}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_structured_dict_key_value_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_structured_dict_key_value_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_structured_dict_key_value_deserialization(self):\n        field = fields.Dict(\n            keys=fields.Str(\n                validate=[validate.Email(), validate.Regexp(r\".*@test\\.com$\")]\n            ),\n            values=fields.Decimal,\n        )\n        assert field.deserialize({\"foo@test.com\": 1}) == {\n            \"foo@test.com\": decimal.Decimal(1)\n        }\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize({1: \"bar\"})\n        assert excinfo.value.args[0] == {\n            1: {\"key\": [\"Not a valid string.\"], \"value\": [\"Not a valid number.\"]}\n        }\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize({\"foo@test.com\": \"bar\"})\n        assert excinfo.value.args[0] == {\n            \"foo@test.com\": {\"value\": [\"Not a valid number.\"]}\n        }\n        assert excinfo.value.valid_data == {}\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize({1: 1})\n        assert excinfo.value.args[0] == {1: {\"key\": [\"Not a valid string.\"]}}\n        assert excinfo.value.valid_data == {}\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize({\"foo\": \"bar\"})\n        assert excinfo.value.args[0] == {\n            \"foo\": {\n                \"key\": [\n                    \"Not a valid email address.\",\n                    \"String does not match expected pattern.\",\n                ],\n                \"value\": [\"Not a valid number.\"],\n            }\n        }\n        assert excinfo.value.valid_data == {}\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_structured_dict_key_value_deserialization", "self", "field", "fields", "dict", "keys", "fields", "str", "validate", "validate", "email", "validate", "regexp", "r", "test", "com", "values", "fields", "decimal", "assert", "field", "deserialize", "foo", "test", "com", "1", "foo", "test", "com", "decimal", "decimal", "1", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "1", "bar", "assert", "excinfo", "value", "args", "0", "1", "key", "not", "a", "valid", "string", "value", "not", "a", "valid", "number", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "foo", "test", "com", "bar", "assert", "excinfo", "value", "args", "0", "foo", "test", "com", "value", "not", "a", "valid", "number", "assert", "excinfo", "value", "valid_data", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "1", "1", "assert", "excinfo", "value", "args", "0", "1", "key", "not", "a", "valid", "string", "assert", "excinfo", "value", "valid_data", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "foo", "bar", "assert", "excinfo", "value", "args", "0", "foo", "key", "not", "a", "valid", "email", "address", "string", "does", "not", "match", "expected", "pattern", "value", "not", "a", "valid", "number", "assert", "excinfo", "value", "valid_data"], "doc_len": 154}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_url_field_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_url_field_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_url_field_deserialization(self):\n        field = fields.Url()\n        assert field.deserialize(\"https://duckduckgo.com\") == \"https://duckduckgo.com\"\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize(\"badurl\")\n        assert excinfo.value.args[0][0] == \"Not a valid URL.\"\n        # Relative URLS not allowed by default\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize(\"/foo/bar\")\n        assert excinfo.value.args[0][0] == \"Not a valid URL.\"\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_url_field_deserialization", "self", "field", "fields", "url", "assert", "field", "deserialize", "https", "duckduckgo", "com", "https", "duckduckgo", "com", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "badurl", "assert", "excinfo", "value", "args", "0", "0", "not", "a", "valid", "url", "relative", "urls", "not", "allowed", "by", "default", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "foo", "bar", "assert", "excinfo", "value", "args", "0", "0", "not", "a", "valid", "url"], "doc_len": 64}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_relative_url_field_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_relative_url_field_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_relative_url_field_deserialization(self):\n        field = fields.Url(relative=True)\n        assert field.deserialize(\"/foo/bar\") == \"/foo/bar\"\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_relative_url_field_deserialization", "self", "field", "fields", "url", "relative", "true", "assert", "field", "deserialize", "foo", "bar", "foo", "bar"], "doc_len": 19}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_url_field_schemes_argument", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_url_field_schemes_argument", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_url_field_schemes_argument(self):\n        field = fields.URL()\n        url = \"ws://test.test\"\n        with pytest.raises(ValidationError):\n            field.deserialize(url)\n        field2 = fields.URL(schemes={\"http\", \"https\", \"ws\"})\n        assert field2.deserialize(url) == url\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_url_field_schemes_argument", "self", "field", "fields", "url", "url", "ws", "test", "test", "with", "pytest", "raises", "validationerror", "field", "deserialize", "url", "field2", "fields", "url", "schemes", "http", "https", "ws", "assert", "field2", "deserialize", "url", "url"], "doc_len": 33}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_email_field_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_email_field_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_email_field_deserialization(self):\n        field = fields.Email()\n        assert field.deserialize(\"foo@bar.com\") == \"foo@bar.com\"\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize(\"invalidemail\")\n        assert excinfo.value.args[0][0] == \"Not a valid email address.\"\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_email_field_deserialization", "self", "field", "fields", "email", "assert", "field", "deserialize", "foo", "bar", "com", "foo", "bar", "com", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "invalidemail", "assert", "excinfo", "value", "args", "0", "0", "not", "a", "valid", "email", "address"], "doc_len": 39}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_function_field_deserialization_is_noop_by_default", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_function_field_deserialization_is_noop_by_default", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_function_field_deserialization_is_noop_by_default(self):\n        field = fields.Function(lambda x: None)\n        # Default is noop\n        assert field.deserialize(\"foo\") == \"foo\"\n        assert field.deserialize(42) == 42\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_function_field_deserialization_is_noop_by_default", "self", "field", "fields", "function", "lambda", "x", "none", "default", "is", "noop", "assert", "field", "deserialize", "foo", "foo", "assert", "field", "deserialize", "42", "42"], "doc_len": 26}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_function_field_deserialization_with_callable", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_function_field_deserialization_with_callable", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_function_field_deserialization_with_callable(self):\n        field = fields.Function(lambda x: None, deserialize=lambda val: val.upper())\n        assert field.deserialize(\"foo\") == \"FOO\"\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_function_field_deserialization_with_callable", "self", "field", "fields", "function", "lambda", "x", "none", "deserialize", "lambda", "val", "val", "upper", "assert", "field", "deserialize", "foo", "foo"], "doc_len": 23}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_function_field_deserialization_with_context", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_function_field_deserialization_with_context", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_function_field_deserialization_with_context(self):\n        class Parent(Schema):\n            pass\n\n        field = fields.Function(\n            lambda x: None,\n            deserialize=lambda val, context: val.upper() + context[\"key\"],\n        )\n        field.parent = Parent(context={\"key\": \"BAR\"})\n        assert field.deserialize(\"foo\") == \"FOOBAR\"\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_function_field_deserialization_with_context", "self", "class", "parent", "schema", "pass", "field", "fields", "function", "lambda", "x", "none", "deserialize", "lambda", "val", "context", "val", "upper", "context", "key", "field", "parent", "parent", "context", "key", "bar", "assert", "field", "deserialize", "foo", "foobar"], "doc_len": 36}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_function_field_passed_deserialize_only_is_load_only", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_function_field_passed_deserialize_only_is_load_only", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_function_field_passed_deserialize_only_is_load_only(self):\n        field = fields.Function(deserialize=lambda val: val.upper())\n        assert field.load_only is True\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_function_field_passed_deserialize_only_is_load_only", "self", "field", "fields", "function", "deserialize", "lambda", "val", "val", "upper", "assert", "field", "load_only", "is", "true"], "doc_len": 20}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_function_field_passed_deserialize_and_serialize_is_not_load_only", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_function_field_passed_deserialize_and_serialize_is_not_load_only", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_function_field_passed_deserialize_and_serialize_is_not_load_only(self):\n        field = fields.Function(\n            serialize=lambda val: val.lower(), deserialize=lambda val: val.upper()\n        )\n        assert field.load_only is False\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_function_field_passed_deserialize_and_serialize_is_not_load_only", "self", "field", "fields", "function", "serialize", "lambda", "val", "val", "lower", "deserialize", "lambda", "val", "val", "upper", "assert", "field", "load_only", "is", "false"], "doc_len": 25}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_uuid_field_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_uuid_field_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_uuid_field_deserialization(self):\n        field = fields.UUID()\n        uuid_str = str(uuid.uuid4())\n        result = field.deserialize(uuid_str)\n        assert isinstance(result, uuid.UUID)\n        assert str(result) == uuid_str\n\n        uuid4 = uuid.uuid4()\n        result = field.deserialize(uuid4)\n        assert isinstance(result, uuid.UUID)\n        assert result == uuid4\n\n        uuid_bytes = b\"]\\xc7wW\\x132O\\xf9\\xa5\\xbe\\x13\\x1f\\x02\\x18\\xda\\xbf\"\n        result = field.deserialize(uuid_bytes)\n        assert isinstance(result, uuid.UUID)\n        assert result.bytes == uuid_bytes\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_uuid_field_deserialization", "self", "field", "fields", "uuid", "uuid_str", "str", "uuid", "uuid4", "result", "field", "deserialize", "uuid_str", "assert", "isinstance", "result", "uuid", "uuid", "assert", "str", "result", "uuid_str", "uuid4", "uuid", "uuid4", "result", "field", "deserialize", "uuid4", "assert", "isinstance", "result", "uuid", "uuid", "assert", "result", "uuid4", "uuid_bytes", "b", "xc7ww", "x132o", "xf9", "xa5", "xbe", "x13", "x1f", "x02", "x18", "xda", "xbf", "result", "field", "deserialize", "uuid_bytes", "assert", "isinstance", "result", "uuid", "uuid", "assert", "result", "bytes", "uuid_bytes"], "doc_len": 68}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_invalid_uuid_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_invalid_uuid_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_invalid_uuid_deserialization(self, in_value):\n        field = fields.UUID()\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize(in_value)\n\n        assert excinfo.value.args[0] == \"Not a valid UUID.\"\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_invalid_uuid_deserialization", "self", "in_value", "field", "fields", "uuid", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "in_value", "assert", "excinfo", "value", "args", "0", "not", "a", "valid", "uuid"], "doc_len": 29}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_deserialization_function_must_be_callable", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_deserialization_function_must_be_callable", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_deserialization_function_must_be_callable(self):\n        with pytest.raises(ValueError):\n            fields.Function(lambda x: None, deserialize=\"notvalid\")\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_deserialization_function_must_be_callable", "self", "with", "pytest", "raises", "valueerror", "fields", "function", "lambda", "x", "none", "deserialize", "notvalid"], "doc_len": 18}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_method_field_deserialization_is_noop_by_default", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_method_field_deserialization_is_noop_by_default", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_method_field_deserialization_is_noop_by_default(self):\n        class MiniUserSchema(Schema):\n            uppername = fields.Method(\"uppercase_name\")\n\n            def uppercase_name(self, obj):\n                return obj.upper()\n\n        s = MiniUserSchema()\n        assert s.fields[\"uppername\"].deserialize(\"steve\") == \"steve\"\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_method_field_deserialization_is_noop_by_default", "self", "class", "miniuserschema", "schema", "uppername", "fields", "method", "uppercase_name", "def", "uppercase_name", "self", "obj", "return", "obj", "upper", "s", "miniuserschema", "assert", "s", "fields", "uppername", "deserialize", "steve", "steve"], "doc_len": 30}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_deserialization_method", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_deserialization_method", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_deserialization_method(self):\n        class MiniUserSchema(Schema):\n            uppername = fields.Method(\"uppercase_name\", deserialize=\"lowercase_name\")\n\n            def uppercase_name(self, obj):\n                return obj.name.upper()\n\n            def lowercase_name(self, value):\n                return value.lower()\n\n        s = MiniUserSchema()\n        assert s.fields[\"uppername\"].deserialize(\"STEVE\") == \"steve\"\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_deserialization_method", "self", "class", "miniuserschema", "schema", "uppername", "fields", "method", "uppercase_name", "deserialize", "lowercase_name", "def", "uppercase_name", "self", "obj", "return", "obj", "name", "upper", "def", "lowercase_name", "self", "value", "return", "value", "lower", "s", "miniuserschema", "assert", "s", "fields", "uppername", "deserialize", "steve", "steve"], "doc_len": 40}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_deserialization_method_must_be_a_method", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_deserialization_method_must_be_a_method", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_deserialization_method_must_be_a_method(self):\n        class BadSchema(Schema):\n            uppername = fields.Method(\"uppercase_name\", deserialize=\"lowercase_name\")\n\n        s = BadSchema()\n        with pytest.raises(ValueError):\n            s.fields[\"uppername\"].deserialize(\"STEVE\")\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_deserialization_method_must_be_a_method", "self", "class", "badschema", "schema", "uppername", "fields", "method", "uppercase_name", "deserialize", "lowercase_name", "s", "badschema", "with", "pytest", "raises", "valueerror", "s", "fields", "uppername", "deserialize", "steve"], "doc_len": 27}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_method_field_deserialize_only", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_method_field_deserialize_only", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_method_field_deserialize_only(self):\n        class MethodDeserializeOnly(Schema):\n            def lowercase_name(self, value):\n                return value.lower()\n\n        m = fields.Method(deserialize=\"lowercase_name\")\n        m.parent = MethodDeserializeOnly()\n\n        assert m.deserialize(\"ALEC\") == \"alec\"\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_method_field_deserialize_only", "self", "class", "methoddeserializeonly", "schema", "def", "lowercase_name", "self", "value", "return", "value", "lower", "m", "fields", "method", "deserialize", "lowercase_name", "m", "parent", "methoddeserializeonly", "assert", "m", "deserialize", "alec", "alec"], "doc_len": 30}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_datetime_list_field_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_datetime_list_field_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_datetime_list_field_deserialization(self):\n        dtimes = dt.datetime.now(), dt.datetime.now(), dt.datetime.utcnow()\n        dstrings = [each.isoformat() for each in dtimes]\n        field = fields.List(fields.DateTime())\n        result = field.deserialize(dstrings)\n        assert all([isinstance(each, dt.datetime) for each in result])\n        for actual, expected in zip(result, dtimes):\n            assert_date_equal(actual, expected)\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_datetime_list_field_deserialization", "self", "dtimes", "dt", "datetime", "now", "dt", "datetime", "now", "dt", "datetime", "utcnow", "dstrings", "each", "isoformat", "for", "each", "in", "dtimes", "field", "fields", "list", "fields", "datetime", "result", "field", "deserialize", "dstrings", "assert", "all", "isinstance", "each", "dt", "datetime", "for", "each", "in", "result", "for", "actual", "expected", "in", "zip", "result", "dtimes", "assert_date_equal", "actual", "expected"], "doc_len": 53}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_list_field_deserialize_invalid_item", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_list_field_deserialize_invalid_item", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_list_field_deserialize_invalid_item(self):\n        field = fields.List(fields.DateTime)\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize([\"badvalue\"])\n        assert excinfo.value.args[0] == {0: [\"Not a valid datetime.\"]}\n\n        field = fields.List(fields.Str())\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize([\"good\", 42])\n        assert excinfo.value.args[0] == {1: [\"Not a valid string.\"]}\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_list_field_deserialize_invalid_item", "self", "field", "fields", "list", "fields", "datetime", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "badvalue", "assert", "excinfo", "value", "args", "0", "0", "not", "a", "valid", "datetime", "field", "fields", "list", "fields", "str", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "good", "42", "assert", "excinfo", "value", "args", "0", "1", "not", "a", "valid", "string"], "doc_len": 56}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_list_field_deserialize_multiple_invalid_items", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_list_field_deserialize_multiple_invalid_items", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_list_field_deserialize_multiple_invalid_items(self):\n        field = fields.List(\n            fields.Int(\n                validate=validate.Range(10, 20, error=\"Value {input} not in range\")\n            )\n        )\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize([10, 5, 25])\n        assert len(excinfo.value.args[0]) == 2\n        assert excinfo.value.args[0][1] == [\"Value 5 not in range\"]\n        assert excinfo.value.args[0][2] == [\"Value 25 not in range\"]\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_list_field_deserialize_multiple_invalid_items", "self", "field", "fields", "list", "fields", "int", "validate", "validate", "range", "10", "20", "error", "value", "input", "not", "in", "range", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "10", "5", "25", "assert", "len", "excinfo", "value", "args", "0", "2", "assert", "excinfo", "value", "args", "0", "1", "value", "5", "not", "in", "range", "assert", "excinfo", "value", "args", "0", "2", "value", "25", "not", "in", "range"], "doc_len": 63}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_list_field_deserialize_value_that_is_not_a_list", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_list_field_deserialize_value_that_is_not_a_list", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_list_field_deserialize_value_that_is_not_a_list(self, value):\n        field = fields.List(fields.Str())\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize(value)\n        assert excinfo.value.args[0] == \"Not a valid list.\"\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_list_field_deserialize_value_that_is_not_a_list", "self", "value", "field", "fields", "list", "fields", "str", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "value", "assert", "excinfo", "value", "args", "0", "not", "a", "valid", "list"], "doc_len": 31}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_datetime_int_tuple_field_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_datetime_int_tuple_field_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_datetime_int_tuple_field_deserialization(self):\n        dtime = dt.datetime.now()\n        data = dtime.isoformat(), 42\n        field = fields.Tuple([fields.DateTime(), fields.Integer()])\n        result = field.deserialize(data)\n\n        assert isinstance(result, tuple)\n        assert len(result) == 2\n        for val, type_, true_val in zip(result, (dt.datetime, int), (dtime, 42)):\n            assert isinstance(val, type_)\n            assert val == true_val\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_datetime_int_tuple_field_deserialization", "self", "dtime", "dt", "datetime", "now", "data", "dtime", "isoformat", "42", "field", "fields", "tuple", "fields", "datetime", "fields", "integer", "result", "field", "deserialize", "data", "assert", "isinstance", "result", "tuple", "assert", "len", "result", "2", "for", "val", "type_", "true_val", "in", "zip", "result", "dt", "datetime", "int", "dtime", "42", "assert", "isinstance", "val", "type_", "assert", "val", "true_val"], "doc_len": 53}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_tuple_field_deserialize_invalid_item", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_tuple_field_deserialize_invalid_item", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_tuple_field_deserialize_invalid_item(self):\n        field = fields.Tuple([fields.DateTime])\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize([\"badvalue\"])\n        assert excinfo.value.args[0] == {0: [\"Not a valid datetime.\"]}\n\n        field = fields.Tuple([fields.Str(), fields.Integer()])\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize([\"good\", \"bad\"])\n        assert excinfo.value.args[0] == {1: [\"Not a valid integer.\"]}\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_tuple_field_deserialize_invalid_item", "self", "field", "fields", "tuple", "fields", "datetime", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "badvalue", "assert", "excinfo", "value", "args", "0", "0", "not", "a", "valid", "datetime", "field", "fields", "tuple", "fields", "str", "fields", "integer", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "good", "bad", "assert", "excinfo", "value", "args", "0", "1", "not", "a", "valid", "integer"], "doc_len": 58}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_tuple_field_deserialize_multiple_invalid_items", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_tuple_field_deserialize_multiple_invalid_items", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_tuple_field_deserialize_multiple_invalid_items(self):\n        validator = validate.Range(10, 20, error=\"Value {input} not in range\")\n        field = fields.Tuple(\n            [\n                fields.Int(validate=validator),\n                fields.Int(validate=validator),\n                fields.Int(validate=validator),\n            ]\n        )\n\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize([10, 5, 25])\n        assert len(excinfo.value.args[0]) == 2\n        assert excinfo.value.args[0][1] == [\"Value 5 not in range\"]\n        assert excinfo.value.args[0][2] == [\"Value 25 not in range\"]\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_tuple_field_deserialize_multiple_invalid_items", "self", "validator", "validate", "range", "10", "20", "error", "value", "input", "not", "in", "range", "field", "fields", "tuple", "fields", "int", "validate", "validator", "fields", "int", "validate", "validator", "fields", "int", "validate", "validator", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "10", "5", "25", "assert", "len", "excinfo", "value", "args", "0", "2", "assert", "excinfo", "value", "args", "0", "1", "value", "5", "not", "in", "range", "assert", "excinfo", "value", "args", "0", "2", "value", "25", "not", "in", "range"], "doc_len": 73}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_tuple_field_deserialize_value_that_is_not_a_collection", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_tuple_field_deserialize_value_that_is_not_a_collection", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_tuple_field_deserialize_value_that_is_not_a_collection(self, value):\n        field = fields.Tuple([fields.Str()])\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize(value)\n        assert excinfo.value.args[0] == \"Not a valid tuple.\"\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_tuple_field_deserialize_value_that_is_not_a_collection", "self", "value", "field", "fields", "tuple", "fields", "str", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "value", "assert", "excinfo", "value", "args", "0", "not", "a", "valid", "tuple"], "doc_len": 31}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_tuple_field_deserialize_invalid_length", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_tuple_field_deserialize_invalid_length", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_tuple_field_deserialize_invalid_length(self):\n        field = fields.Tuple([fields.Str(), fields.Str()])\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize([42])\n        assert excinfo.value.args[0] == \"Length must be 2.\"\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_tuple_field_deserialize_invalid_length", "self", "field", "fields", "tuple", "fields", "str", "fields", "str", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "42", "assert", "excinfo", "value", "args", "0", "length", "must", "be", "2"], "doc_len": 32}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_constant_field_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_constant_field_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_constant_field_deserialization(self):\n        field = fields.Constant(\"something\")\n        assert field.deserialize(\"whatever\") == \"something\"\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_constant_field_deserialization", "self", "field", "fields", "constant", "something", "assert", "field", "deserialize", "whatever", "something"], "doc_len": 16}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_constant_is_always_included_in_deserialized_data", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_constant_is_always_included_in_deserialized_data", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_constant_is_always_included_in_deserialized_data(self):\n        class MySchema(Schema):\n            foo = fields.Constant(42)\n\n        sch = MySchema()\n        assert sch.load({})[\"foo\"] == 42\n        assert sch.load({\"foo\": 24})[\"foo\"] == 42\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_constant_is_always_included_in_deserialized_data", "self", "class", "myschema", "schema", "foo", "fields", "constant", "42", "sch", "myschema", "assert", "sch", "load", "foo", "42", "assert", "sch", "load", "foo", "24", "foo", "42"], "doc_len": 28}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_field_deserialization_with_user_validator_function", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_field_deserialization_with_user_validator_function", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_field_deserialization_with_user_validator_function(self):\n        field = fields.String(validate=lambda s: s.lower() == \"valid\")\n        assert field.deserialize(\"Valid\") == \"Valid\"\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize(\"invalid\")\n        assert excinfo.value.args[0][0] == \"Invalid value.\"\n        assert type(excinfo.value) == ValidationError\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_field_deserialization_with_user_validator_function", "self", "field", "fields", "string", "validate", "lambda", "s", "s", "lower", "valid", "assert", "field", "deserialize", "valid", "valid", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "invalid", "assert", "excinfo", "value", "args", "0", "0", "invalid", "value", "assert", "type", "excinfo", "value", "validationerror"], "doc_len": 43}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_field_deserialization_with_user_validator_class_that_returns_bool", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_field_deserialization_with_user_validator_class_that_returns_bool", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_field_deserialization_with_user_validator_class_that_returns_bool(self):\n        class MyValidator:\n            def __call__(self, val):\n                if val == \"valid\":\n                    return True\n                return False\n\n        field = fields.Field(validate=MyValidator())\n        assert field.deserialize(\"valid\") == \"valid\"\n        with pytest.raises(ValidationError, match=\"Invalid value.\"):\n            field.deserialize(\"invalid\")\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_field_deserialization_with_user_validator_class_that_returns_bool", "self", "class", "myvalidator", "def", "__call__", "self", "val", "if", "val", "valid", "return", "true", "return", "false", "field", "fields", "field", "validate", "myvalidator", "assert", "field", "deserialize", "valid", "valid", "with", "pytest", "raises", "validationerror", "match", "invalid", "value", "field", "deserialize", "invalid"], "doc_len": 40}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_field_deserialization_with_user_validator_that_raises_error_with_list", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_field_deserialization_with_user_validator_that_raises_error_with_list", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_field_deserialization_with_user_validator_that_raises_error_with_list(\n        self\n    ):\n        def validator(val):\n            raise ValidationError([\"err1\", \"err2\"])\n\n        class MySchema(Schema):\n            foo = fields.Field(validate=validator)\n\n        errors = MySchema().validate({\"foo\": 42})\n        assert errors[\"foo\"] == [\"err1\", \"err2\"]\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_field_deserialization_with_user_validator_that_raises_error_with_list", "self", "def", "validator", "val", "raise", "validationerror", "err1", "err2", "class", "myschema", "schema", "foo", "fields", "field", "validate", "validator", "errors", "myschema", "validate", "foo", "42", "assert", "errors", "foo", "err1", "err2"], "doc_len": 32}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_validator_must_return_false_to_raise_error", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_validator_must_return_false_to_raise_error", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_validator_must_return_false_to_raise_error(self):\n        # validator returns None, so anything validates\n        field = fields.String(validate=lambda s: None)\n        assert field.deserialize(\"Valid\") == \"Valid\"\n        # validator returns False, so nothing validates\n        field2 = fields.String(validate=lambda s: False)\n        with pytest.raises(ValidationError):\n            field2.deserialize(\"invalid\")\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_validator_must_return_false_to_raise_error", "self", "validator", "returns", "none", "so", "anything", "validates", "field", "fields", "string", "validate", "lambda", "s", "none", "assert", "field", "deserialize", "valid", "valid", "validator", "returns", "false", "so", "nothing", "validates", "field2", "fields", "string", "validate", "lambda", "s", "false", "with", "pytest", "raises", "validationerror", "field2", "deserialize", "invalid"], "doc_len": 45}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_field_deserialization_with_validator_with_nonascii_input", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_field_deserialization_with_validator_with_nonascii_input", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_field_deserialization_with_validator_with_nonascii_input(self):\n        field = fields.String(validate=lambda s: False)\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize(\"привет\")\n        assert type(excinfo.value) == ValidationError\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_field_deserialization_with_validator_with_nonascii_input", "self", "field", "fields", "string", "validate", "lambda", "s", "false", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "assert", "type", "excinfo", "value", "validationerror"], "doc_len": 27}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_field_deserialization_with_user_validators", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_field_deserialization_with_user_validators", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_field_deserialization_with_user_validators(self):\n        validators_gen = (\n            func\n            for func in (\n                lambda s: s.lower() == \"valid\",\n                lambda s: s.lower()[::-1] == \"dilav\",\n            )\n        )\n\n        m_colletion_type = [\n            fields.String(\n                validate=[\n                    lambda s: s.lower() == \"valid\",\n                    lambda s: s.lower()[::-1] == \"dilav\",\n                ]\n            ),\n            fields.String(\n                validate=(\n                    lambda s: s.lower() == \"valid\",\n                    lambda s: s.lower()[::-1] == \"dilav\",\n                )\n            ),\n            fields.String(validate=validators_gen),\n        ]\n\n        for field in m_colletion_type:\n            assert field.deserialize(\"Valid\") == \"Valid\"\n            with pytest.raises(ValidationError, match=\"Invalid value.\"):\n                field.deserialize(\"invalid\")\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_field_deserialization_with_user_validators", "self", "validators_gen", "func", "for", "func", "in", "lambda", "s", "s", "lower", "valid", "lambda", "s", "s", "lower", "1", "dilav", "m_colletion_type", "fields", "string", "validate", "lambda", "s", "s", "lower", "valid", "lambda", "s", "s", "lower", "1", "dilav", "fields", "string", "validate", "lambda", "s", "s", "lower", "valid", "lambda", "s", "s", "lower", "1", "dilav", "fields", "string", "validate", "validators_gen", "for", "field", "in", "m_colletion_type", "assert", "field", "deserialize", "valid", "valid", "with", "pytest", "raises", "validationerror", "match", "invalid", "value", "field", "deserialize", "invalid"], "doc_len": 75}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_field_deserialization_with_custom_error_message", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_field_deserialization_with_custom_error_message", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_field_deserialization_with_custom_error_message(self):\n        field = fields.String(\n            validate=lambda s: s.lower() == \"valid\",\n            error_messages={\"validator_failed\": \"Bad value.\"},\n        )\n        with pytest.raises(ValidationError, match=\"Bad value.\"):\n            field.deserialize(\"invalid\")\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_field_deserialization_with_custom_error_message", "self", "field", "fields", "string", "validate", "lambda", "s", "s", "lower", "valid", "error_messages", "validator_failed", "bad", "value", "with", "pytest", "raises", "validationerror", "match", "bad", "value", "field", "deserialize", "invalid"], "doc_len": 30}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_deserialize_to_dict", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_deserialize_to_dict", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_deserialize_to_dict(self):\n        user_dict = {\"name\": \"Monty\", \"age\": \"42.3\"}\n        result = SimpleUserSchema().load(user_dict)\n        assert result[\"name\"] == \"Monty\"\n        assert math.isclose(result[\"age\"], 42.3)\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_deserialize_to_dict", "self", "user_dict", "name", "monty", "age", "42", "3", "result", "simpleuserschema", "load", "user_dict", "assert", "result", "name", "monty", "assert", "math", "isclose", "result", "age", "42", "3"], "doc_len": 28}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_deserialize_with_missing_values", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_deserialize_with_missing_values", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_deserialize_with_missing_values(self):\n        user_dict = {\"name\": \"Monty\"}\n        result = SimpleUserSchema().load(user_dict)\n        # 'age' is not included in result\n        assert result == {\"name\": \"Monty\"}\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_deserialize_with_missing_values", "self", "user_dict", "name", "monty", "result", "simpleuserschema", "load", "user_dict", "age", "is", "not", "included", "in", "result", "assert", "result", "name", "monty"], "doc_len": 24}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_deserialize_many", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_deserialize_many", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_deserialize_many(self):\n        users_data = [{\"name\": \"Mick\", \"age\": \"914\"}, {\"name\": \"Keith\", \"age\": \"8442\"}]\n        result = SimpleUserSchema(many=True).load(users_data)\n        assert isinstance(result, list)\n        user = result[0]\n        assert user[\"age\"] == int(users_data[0][\"age\"])\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_deserialize_many", "self", "users_data", "name", "mick", "age", "914", "name", "keith", "age", "8442", "result", "simpleuserschema", "many", "true", "load", "users_data", "assert", "isinstance", "result", "list", "user", "result", "0", "assert", "user", "age", "int", "users_data", "0", "age"], "doc_len": 36}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_exclude", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_exclude", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_exclude(self):\n        schema = SimpleUserSchema(exclude=(\"age\",), unknown=EXCLUDE)\n        result = schema.load({\"name\": \"Monty\", \"age\": 42})\n        assert \"name\" in result\n        assert \"age\" not in result\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_exclude", "self", "schema", "simpleuserschema", "exclude", "age", "unknown", "exclude", "result", "schema", "load", "name", "monty", "age", "42", "assert", "name", "in", "result", "assert", "age", "not", "in", "result"], "doc_len": 29}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_nested_single_deserialization_to_dict", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_nested_single_deserialization_to_dict", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_nested_single_deserialization_to_dict(self):\n        class SimpleBlogSerializer(Schema):\n            title = fields.String()\n            author = fields.Nested(SimpleUserSchema, unknown=EXCLUDE)\n\n        blog_dict = {\n            \"title\": \"Gimme Shelter\",\n            \"author\": {\"name\": \"Mick\", \"age\": \"914\", \"email\": \"mick@stones.com\"},\n        }\n        result = SimpleBlogSerializer().load(blog_dict)\n        author = result[\"author\"]\n        assert author[\"name\"] == \"Mick\"\n        assert author[\"age\"] == 914\n        assert \"email\" not in author\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_nested_single_deserialization_to_dict", "self", "class", "simpleblogserializer", "schema", "title", "fields", "string", "author", "fields", "nested", "simpleuserschema", "unknown", "exclude", "blog_dict", "title", "gimme", "shelter", "author", "name", "mick", "age", "914", "email", "mick", "stones", "com", "result", "simpleblogserializer", "load", "blog_dict", "author", "result", "author", "assert", "author", "name", "mick", "assert", "author", "age", "914", "assert", "email", "not", "in", "author"], "doc_len": 52}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_nested_list_deserialization_to_dict", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_nested_list_deserialization_to_dict", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_nested_list_deserialization_to_dict(self):\n        class SimpleBlogSerializer(Schema):\n            title = fields.String()\n            authors = fields.Nested(SimpleUserSchema, many=True)\n\n        blog_dict = {\n            \"title\": \"Gimme Shelter\",\n            \"authors\": [\n                {\"name\": \"Mick\", \"age\": \"914\"},\n                {\"name\": \"Keith\", \"age\": \"8442\"},\n            ],\n        }\n        result = SimpleBlogSerializer().load(blog_dict)\n        assert isinstance(result[\"authors\"], list)\n        author = result[\"authors\"][0]\n        assert author[\"name\"] == \"Mick\"\n        assert author[\"age\"] == 914\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_nested_list_deserialization_to_dict", "self", "class", "simpleblogserializer", "schema", "title", "fields", "string", "authors", "fields", "nested", "simpleuserschema", "many", "true", "blog_dict", "title", "gimme", "shelter", "authors", "name", "mick", "age", "914", "name", "keith", "age", "8442", "result", "simpleblogserializer", "load", "blog_dict", "assert", "isinstance", "result", "authors", "list", "author", "result", "authors", "0", "assert", "author", "name", "mick", "assert", "author", "age", "914"], "doc_len": 53}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_nested_single_none_not_allowed", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_nested_single_none_not_allowed", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_nested_single_none_not_allowed(self):\n        class PetSchema(Schema):\n            name = fields.Str()\n\n        class OwnerSchema(Schema):\n            pet = fields.Nested(PetSchema(), allow_none=False)\n\n        sch = OwnerSchema()\n        errors = sch.validate({\"pet\": None})\n        assert \"pet\" in errors\n        assert errors[\"pet\"] == [\"Field may not be null.\"]\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_nested_single_none_not_allowed", "self", "class", "petschema", "schema", "name", "fields", "str", "class", "ownerschema", "schema", "pet", "fields", "nested", "petschema", "allow_none", "false", "sch", "ownerschema", "errors", "sch", "validate", "pet", "none", "assert", "pet", "in", "errors", "assert", "errors", "pet", "field", "may", "not", "be", "null"], "doc_len": 41}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_nested_many_non_not_allowed", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_nested_many_non_not_allowed", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_nested_many_non_not_allowed(self):\n        class PetSchema(Schema):\n            name = fields.Str()\n\n        class StoreSchema(Schema):\n            pets = fields.Nested(PetSchema(), allow_none=False, many=True)\n\n        sch = StoreSchema()\n        errors = sch.validate({\"pets\": None})\n        assert \"pets\" in errors\n        assert errors[\"pets\"] == [\"Field may not be null.\"]\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_nested_many_non_not_allowed", "self", "class", "petschema", "schema", "name", "fields", "str", "class", "storeschema", "schema", "pets", "fields", "nested", "petschema", "allow_none", "false", "many", "true", "sch", "storeschema", "errors", "sch", "validate", "pets", "none", "assert", "pets", "in", "errors", "assert", "errors", "pets", "field", "may", "not", "be", "null"], "doc_len": 43}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_nested_single_required_missing", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_nested_single_required_missing", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_nested_single_required_missing(self):\n        class PetSchema(Schema):\n            name = fields.Str()\n\n        class OwnerSchema(Schema):\n            pet = fields.Nested(PetSchema(), required=True)\n\n        sch = OwnerSchema()\n        errors = sch.validate({})\n        assert \"pet\" in errors\n        assert errors[\"pet\"] == [\"Missing data for required field.\"]\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_nested_single_required_missing", "self", "class", "petschema", "schema", "name", "fields", "str", "class", "ownerschema", "schema", "pet", "fields", "nested", "petschema", "required", "true", "sch", "ownerschema", "errors", "sch", "validate", "assert", "pet", "in", "errors", "assert", "errors", "pet", "missing", "data", "for", "required", "field"], "doc_len": 39}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_nested_many_required_missing", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_nested_many_required_missing", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_nested_many_required_missing(self):\n        class PetSchema(Schema):\n            name = fields.Str()\n\n        class StoreSchema(Schema):\n            pets = fields.Nested(PetSchema(), required=True, many=True)\n\n        sch = StoreSchema()\n        errors = sch.validate({})\n        assert \"pets\" in errors\n        assert errors[\"pets\"] == [\"Missing data for required field.\"]\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_nested_many_required_missing", "self", "class", "petschema", "schema", "name", "fields", "str", "class", "storeschema", "schema", "pets", "fields", "nested", "petschema", "required", "true", "many", "true", "sch", "storeschema", "errors", "sch", "validate", "assert", "pets", "in", "errors", "assert", "errors", "pets", "missing", "data", "for", "required", "field"], "doc_len": 41}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_nested_only_basestring", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_nested_only_basestring", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_nested_only_basestring(self):\n        class ANestedSchema(Schema):\n            pk = fields.Str()\n\n        class MainSchema(Schema):\n            pk = fields.Str()\n            child = fields.Pluck(ANestedSchema, \"pk\")\n\n        sch = MainSchema()\n        result = sch.load({\"pk\": \"123\", \"child\": \"456\"})\n        assert result[\"child\"][\"pk\"] == \"456\"\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_nested_only_basestring", "self", "class", "anestedschema", "schema", "pk", "fields", "str", "class", "mainschema", "schema", "pk", "fields", "str", "child", "fields", "pluck", "anestedschema", "pk", "sch", "mainschema", "result", "sch", "load", "pk", "123", "child", "456", "assert", "result", "child", "pk", "456"], "doc_len": 38}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_nested_only_basestring_with_list_data", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_nested_only_basestring_with_list_data", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_nested_only_basestring_with_list_data(self):\n        class ANestedSchema(Schema):\n            pk = fields.Str()\n\n        class MainSchema(Schema):\n            pk = fields.Str()\n            children = fields.Pluck(ANestedSchema, \"pk\", many=True)\n\n        sch = MainSchema()\n        result = sch.load({\"pk\": \"123\", \"children\": [\"456\", \"789\"]})\n        assert result[\"children\"][0][\"pk\"] == \"456\"\n        assert result[\"children\"][1][\"pk\"] == \"789\"\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_nested_only_basestring_with_list_data", "self", "class", "anestedschema", "schema", "pk", "fields", "str", "class", "mainschema", "schema", "pk", "fields", "str", "children", "fields", "pluck", "anestedschema", "pk", "many", "true", "sch", "mainschema", "result", "sch", "load", "pk", "123", "children", "456", "789", "assert", "result", "children", "0", "pk", "456", "assert", "result", "children", "1", "pk", "789"], "doc_len": 48}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_nested_none_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_nested_none_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_nested_none_deserialization(self):\n        class SimpleBlogSerializer(Schema):\n            title = fields.String()\n            author = fields.Nested(SimpleUserSchema, allow_none=True)\n\n        blog_dict = {\"title\": \"Gimme Shelter\", \"author\": None}\n        result = SimpleBlogSerializer().load(blog_dict)\n        assert result[\"author\"] is None\n        assert result[\"title\"] == blog_dict[\"title\"]\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_nested_none_deserialization", "self", "class", "simpleblogserializer", "schema", "title", "fields", "string", "author", "fields", "nested", "simpleuserschema", "allow_none", "true", "blog_dict", "title", "gimme", "shelter", "author", "none", "result", "simpleblogserializer", "load", "blog_dict", "assert", "result", "author", "is", "none", "assert", "result", "title", "blog_dict", "title"], "doc_len": 39}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_deserialize_with_attribute_param", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_deserialize_with_attribute_param", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_deserialize_with_attribute_param(self):\n        class AliasingUserSerializer(Schema):\n            username = fields.Email(attribute=\"email\")\n            years = fields.Integer(attribute=\"age\")\n\n        data = {\"username\": \"foo@bar.com\", \"years\": \"42\"}\n        result = AliasingUserSerializer().load(data)\n        assert result[\"email\"] == \"foo@bar.com\"\n        assert result[\"age\"] == 42\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_deserialize_with_attribute_param", "self", "class", "aliasinguserserializer", "schema", "username", "fields", "email", "attribute", "email", "years", "fields", "integer", "attribute", "age", "data", "username", "foo", "bar", "com", "years", "42", "result", "aliasinguserserializer", "load", "data", "assert", "result", "email", "foo", "bar", "com", "assert", "result", "age", "42"], "doc_len": 41}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_deserialize_with_attribute_param_symmetry", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_deserialize_with_attribute_param_symmetry", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_deserialize_with_attribute_param_symmetry(self):\n        class MySchema(Schema):\n            foo = fields.Field(attribute=\"bar.baz\")\n\n        schema = MySchema()\n        dump_data = schema.dump({\"bar\": {\"baz\": 42}})\n        assert dump_data == {\"foo\": 42}\n\n        load_data = schema.load({\"foo\": 42})\n        assert load_data == {\"bar\": {\"baz\": 42}}\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_deserialize_with_attribute_param_symmetry", "self", "class", "myschema", "schema", "foo", "fields", "field", "attribute", "bar", "baz", "schema", "myschema", "dump_data", "schema", "dump", "bar", "baz", "42", "assert", "dump_data", "foo", "42", "load_data", "schema", "load", "foo", "42", "assert", "load_data", "bar", "baz", "42"], "doc_len": 38}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_deserialize_with_attribute_param_error_returns_field_name_not_attribute_name", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_deserialize_with_attribute_param_error_returns_field_name_not_attribute_name", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_deserialize_with_attribute_param_error_returns_field_name_not_attribute_name(\n        self\n    ):\n        class AliasingUserSerializer(Schema):\n            username = fields.Email(attribute=\"email\")\n            years = fields.Integer(attribute=\"age\")\n\n        data = {\"username\": \"foobar.com\", \"years\": \"42\"}\n        with pytest.raises(ValidationError) as excinfo:\n            AliasingUserSerializer().load(data)\n        errors = excinfo.value.messages\n        assert errors[\"username\"] == [\"Not a valid email address.\"]\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_deserialize_with_attribute_param_error_returns_field_name_not_attribute_name", "self", "class", "aliasinguserserializer", "schema", "username", "fields", "email", "attribute", "email", "years", "fields", "integer", "attribute", "age", "data", "username", "foobar", "com", "years", "42", "with", "pytest", "raises", "validationerror", "as", "excinfo", "aliasinguserserializer", "load", "data", "errors", "excinfo", "value", "messages", "assert", "errors", "username", "not", "a", "valid", "email", "address"], "doc_len": 47}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_deserialize_with_attribute_param_error_returns_data_key_not_attribute_name", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_deserialize_with_attribute_param_error_returns_data_key_not_attribute_name", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_deserialize_with_attribute_param_error_returns_data_key_not_attribute_name(\n        self\n    ):\n        class AliasingUserSerializer(Schema):\n            name = fields.String(data_key=\"Name\")\n            username = fields.Email(attribute=\"email\", data_key=\"UserName\")\n            years = fields.Integer(attribute=\"age\", data_key=\"Years\")\n\n        data = {\"Name\": \"Mick\", \"UserName\": \"foobar.com\", \"Years\": \"abc\"}\n        with pytest.raises(ValidationError) as excinfo:\n            AliasingUserSerializer().load(data)\n        errors = excinfo.value.messages\n        assert errors[\"UserName\"] == [\"Not a valid email address.\"]\n        assert errors[\"Years\"] == [\"Not a valid integer.\"]\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_deserialize_with_attribute_param_error_returns_data_key_not_attribute_name", "self", "class", "aliasinguserserializer", "schema", "name", "fields", "string", "data_key", "name", "username", "fields", "email", "attribute", "email", "data_key", "username", "years", "fields", "integer", "attribute", "age", "data_key", "years", "data", "name", "mick", "username", "foobar", "com", "years", "abc", "with", "pytest", "raises", "validationerror", "as", "excinfo", "aliasinguserserializer", "load", "data", "errors", "excinfo", "value", "messages", "assert", "errors", "username", "not", "a", "valid", "email", "address", "assert", "errors", "years", "not", "a", "valid", "integer"], "doc_len": 65}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_deserialize_with_data_key_param", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_deserialize_with_data_key_param", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_deserialize_with_data_key_param(self):\n        class AliasingUserSerializer(Schema):\n            name = fields.String(data_key=\"Name\")\n            username = fields.Email(attribute=\"email\", data_key=\"UserName\")\n            years = fields.Integer(data_key=\"Years\")\n\n        data = {\"Name\": \"Mick\", \"UserName\": \"foo@bar.com\", \"years\": \"42\"}\n        result = AliasingUserSerializer(unknown=EXCLUDE).load(data)\n        assert result[\"name\"] == \"Mick\"\n        assert result[\"email\"] == \"foo@bar.com\"\n        assert \"years\" not in result\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_deserialize_with_data_key_param", "self", "class", "aliasinguserserializer", "schema", "name", "fields", "string", "data_key", "name", "username", "fields", "email", "attribute", "email", "data_key", "username", "years", "fields", "integer", "data_key", "years", "data", "name", "mick", "username", "foo", "bar", "com", "years", "42", "result", "aliasinguserserializer", "unknown", "exclude", "load", "data", "assert", "result", "name", "mick", "assert", "result", "email", "foo", "bar", "com", "assert", "years", "not", "in", "result"], "doc_len": 57}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_deserialize_with_dump_only_param", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_deserialize_with_dump_only_param", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_deserialize_with_dump_only_param(self):\n        class AliasingUserSerializer(Schema):\n            name = fields.String()\n            years = fields.Integer(dump_only=True)\n            nicknames = fields.List(fields.Str(), dump_only=True)\n\n        data = {\"name\": \"Mick\", \"years\": \"42\", \"nicknames\": [\"Your Majesty\", \"Brenda\"]}\n        result = AliasingUserSerializer(unknown=EXCLUDE).load(data)\n        assert result[\"name\"] == \"Mick\"\n        assert \"years\" not in result\n        assert \"nicknames\" not in result\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_deserialize_with_dump_only_param", "self", "class", "aliasinguserserializer", "schema", "name", "fields", "string", "years", "fields", "integer", "dump_only", "true", "nicknames", "fields", "list", "fields", "str", "dump_only", "true", "data", "name", "mick", "years", "42", "nicknames", "your", "majesty", "brenda", "result", "aliasinguserserializer", "unknown", "exclude", "load", "data", "assert", "result", "name", "mick", "assert", "years", "not", "in", "result", "assert", "nicknames", "not", "in", "result"], "doc_len": 54}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_deserialize_with_missing_param_value", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_deserialize_with_missing_param_value", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_deserialize_with_missing_param_value(self):\n        bdate = dt.datetime(2017, 9, 29)\n\n        class AliasingUserSerializer(Schema):\n            name = fields.String()\n            birthdate = fields.DateTime(missing=bdate)\n\n        data = {\"name\": \"Mick\"}\n        result = AliasingUserSerializer().load(data)\n        assert result[\"name\"] == \"Mick\"\n        assert result[\"birthdate\"] == bdate\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_deserialize_with_missing_param_value", "self", "bdate", "dt", "datetime", "2017", "9", "29", "class", "aliasinguserserializer", "schema", "name", "fields", "string", "birthdate", "fields", "datetime", "missing", "bdate", "data", "name", "mick", "result", "aliasinguserserializer", "load", "data", "assert", "result", "name", "mick", "assert", "result", "birthdate", "bdate"], "doc_len": 39}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_deserialize_with_missing_param_callable", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_deserialize_with_missing_param_callable", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_deserialize_with_missing_param_callable(self):\n        bdate = dt.datetime(2017, 9, 29)\n\n        class AliasingUserSerializer(Schema):\n            name = fields.String()\n            birthdate = fields.DateTime(missing=lambda: bdate)\n\n        data = {\"name\": \"Mick\"}\n        result = AliasingUserSerializer().load(data)\n        assert result[\"name\"] == \"Mick\"\n        assert result[\"birthdate\"] == bdate\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_deserialize_with_missing_param_callable", "self", "bdate", "dt", "datetime", "2017", "9", "29", "class", "aliasinguserserializer", "schema", "name", "fields", "string", "birthdate", "fields", "datetime", "missing", "lambda", "bdate", "data", "name", "mick", "result", "aliasinguserserializer", "load", "data", "assert", "result", "name", "mick", "assert", "result", "birthdate", "bdate"], "doc_len": 40}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_deserialize_with_missing_param_none", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_deserialize_with_missing_param_none", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_deserialize_with_missing_param_none(self):\n        class AliasingUserSerializer(Schema):\n            name = fields.String()\n            years = fields.Integer(missing=None, allow_none=True)\n\n        data = {\"name\": \"Mick\"}\n        result = AliasingUserSerializer().load(data)\n        assert result[\"name\"] == \"Mick\"\n        assert result[\"years\"] is None\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_deserialize_with_missing_param_none", "self", "class", "aliasinguserserializer", "schema", "name", "fields", "string", "years", "fields", "integer", "missing", "none", "allow_none", "true", "data", "name", "mick", "result", "aliasinguserserializer", "load", "data", "assert", "result", "name", "mick", "assert", "result", "years", "is", "none"], "doc_len": 36}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_deserialization_raises_with_errors", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_deserialization_raises_with_errors", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_deserialization_raises_with_errors(self):\n        bad_data = {\"email\": \"invalid-email\", \"colors\": \"burger\", \"age\": -1}\n        v = Validator()\n        with pytest.raises(ValidationError) as excinfo:\n            v.load(bad_data)\n        errors = excinfo.value.messages\n        assert \"email\" in errors\n        assert \"colors\" in errors\n        assert \"age\" in errors\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_deserialization_raises_with_errors", "self", "bad_data", "email", "invalid", "email", "colors", "burger", "age", "1", "v", "validator", "with", "pytest", "raises", "validationerror", "as", "excinfo", "v", "load", "bad_data", "errors", "excinfo", "value", "messages", "assert", "email", "in", "errors", "assert", "colors", "in", "errors", "assert", "age", "in", "errors"], "doc_len": 42}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_deserialization_raises_with_errors_with_multiple_validators", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_deserialization_raises_with_errors_with_multiple_validators", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_deserialization_raises_with_errors_with_multiple_validators(self):\n        bad_data = {\"email\": \"invalid-email\", \"colors\": \"burger\", \"age\": -1}\n        v = Validators()\n        with pytest.raises(ValidationError) as excinfo:\n            v.load(bad_data)\n        errors = excinfo.value.messages\n        assert \"email\" in errors\n        assert \"colors\" in errors\n        assert \"age\" in errors\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_deserialization_raises_with_errors_with_multiple_validators", "self", "bad_data", "email", "invalid", "email", "colors", "burger", "age", "1", "v", "validators", "with", "pytest", "raises", "validationerror", "as", "excinfo", "v", "load", "bad_data", "errors", "excinfo", "value", "messages", "assert", "email", "in", "errors", "assert", "colors", "in", "errors", "assert", "age", "in", "errors"], "doc_len": 42}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_deserialization_many_raises_errors", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_deserialization_many_raises_errors", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_deserialization_many_raises_errors(self):\n        bad_data = [\n            {\"email\": \"foo@bar.com\", \"colors\": \"red\", \"age\": 18},\n            {\"email\": \"bad\", \"colors\": \"pizza\", \"age\": -1},\n        ]\n        v = Validator(many=True)\n        with pytest.raises(ValidationError):\n            v.load(bad_data)\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_deserialization_many_raises_errors", "self", "bad_data", "email", "foo", "bar", "com", "colors", "red", "age", "18", "email", "bad", "colors", "pizza", "age", "1", "v", "validator", "many", "true", "with", "pytest", "raises", "validationerror", "v", "load", "bad_data"], "doc_len": 33}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_validation_errors_are_stored", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_validation_errors_are_stored", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_validation_errors_are_stored(self):\n        def validate_field(val):\n            raise ValidationError(\"Something went wrong\")\n\n        class MySchema(Schema):\n            foo = fields.Field(validate=validate_field)\n\n        with pytest.raises(ValidationError) as excinfo:\n            MySchema().load({\"foo\": 42})\n        errors = excinfo.value.messages\n        assert \"Something went wrong\" in errors[\"foo\"]\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_validation_errors_are_stored", "self", "def", "validate_field", "val", "raise", "validationerror", "something", "went", "wrong", "class", "myschema", "schema", "foo", "fields", "field", "validate", "validate_field", "with", "pytest", "raises", "validationerror", "as", "excinfo", "myschema", "load", "foo", "42", "errors", "excinfo", "value", "messages", "assert", "something", "went", "wrong", "in", "errors", "foo"], "doc_len": 44}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_multiple_errors_can_be_stored_for_a_field", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_multiple_errors_can_be_stored_for_a_field", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_multiple_errors_can_be_stored_for_a_field(self):\n        def validate_with_bool(n):\n            return False\n\n        def validate_with_error(n):\n            raise ValidationError(\"foo is not valid\")\n\n        class MySchema(Schema):\n            foo = fields.Field(\n                required=True, validate=[validate_with_bool, validate_with_error]\n            )\n\n        with pytest.raises(ValidationError) as excinfo:\n            MySchema().load({\"foo\": \"bar\"})\n        errors = excinfo.value.messages\n\n        assert type(errors[\"foo\"]) == list\n        assert len(errors[\"foo\"]) == 2\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_multiple_errors_can_be_stored_for_a_field", "self", "def", "validate_with_bool", "n", "return", "false", "def", "validate_with_error", "n", "raise", "validationerror", "foo", "is", "not", "valid", "class", "myschema", "schema", "foo", "fields", "field", "required", "true", "validate", "validate_with_bool", "validate_with_error", "with", "pytest", "raises", "validationerror", "as", "excinfo", "myschema", "load", "foo", "bar", "errors", "excinfo", "value", "messages", "assert", "type", "errors", "foo", "list", "assert", "len", "errors", "foo", "2"], "doc_len": 56}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_multiple_errors_can_be_stored_for_an_email_field", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_multiple_errors_can_be_stored_for_an_email_field", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_multiple_errors_can_be_stored_for_an_email_field(self):\n        def validate_with_bool(val):\n            return False\n\n        class MySchema(Schema):\n            email = fields.Email(validate=[validate_with_bool])\n\n        with pytest.raises(ValidationError) as excinfo:\n            MySchema().load({\"email\": \"foo\"})\n        errors = excinfo.value.messages\n        assert len(errors[\"email\"]) == 2\n        assert \"Not a valid email address.\" in errors[\"email\"][0]\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_multiple_errors_can_be_stored_for_an_email_field", "self", "def", "validate_with_bool", "val", "return", "false", "class", "myschema", "schema", "email", "fields", "email", "validate", "validate_with_bool", "with", "pytest", "raises", "validationerror", "as", "excinfo", "myschema", "load", "email", "foo", "errors", "excinfo", "value", "messages", "assert", "len", "errors", "email", "2", "assert", "not", "a", "valid", "email", "address", "in", "errors", "email", "0"], "doc_len": 49}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_multiple_errors_can_be_stored_for_a_url_field", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_multiple_errors_can_be_stored_for_a_url_field", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_multiple_errors_can_be_stored_for_a_url_field(self):\n        def validate_with_bool(val):\n            return False\n\n        class MySchema(Schema):\n            url = fields.Url(validate=[validate_with_bool])\n\n        with pytest.raises(ValidationError) as excinfo:\n            MySchema().load({\"url\": \"foo\"})\n        errors = excinfo.value.messages\n        assert len(errors[\"url\"]) == 2\n        assert \"Not a valid URL.\" in errors[\"url\"][0]\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_multiple_errors_can_be_stored_for_a_url_field", "self", "def", "validate_with_bool", "val", "return", "false", "class", "myschema", "schema", "url", "fields", "url", "validate", "validate_with_bool", "with", "pytest", "raises", "validationerror", "as", "excinfo", "myschema", "load", "url", "foo", "errors", "excinfo", "value", "messages", "assert", "len", "errors", "url", "2", "assert", "not", "a", "valid", "url", "in", "errors", "url", "0"], "doc_len": 48}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_required_value_only_passed_to_validators_if_provided", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_required_value_only_passed_to_validators_if_provided", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_required_value_only_passed_to_validators_if_provided(self):\n        class MySchema(Schema):\n            foo = fields.Field(required=True, validate=lambda f: False)\n\n        with pytest.raises(ValidationError) as excinfo:\n            MySchema().load({})\n        errors = excinfo.value.messages\n        # required value missing\n        assert len(errors[\"foo\"]) == 1\n        assert \"Missing data for required field.\" in errors[\"foo\"]\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_required_value_only_passed_to_validators_if_provided", "self", "class", "myschema", "schema", "foo", "fields", "field", "required", "true", "validate", "lambda", "f", "false", "with", "pytest", "raises", "validationerror", "as", "excinfo", "myschema", "load", "errors", "excinfo", "value", "messages", "required", "value", "missing", "assert", "len", "errors", "foo", "1", "assert", "missing", "data", "for", "required", "field", "in", "errors", "foo"], "doc_len": 48}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_partial_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_partial_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_partial_deserialization(self, partial_schema):\n        class MySchema(Schema):\n            foo = fields.Field(required=True)\n            bar = fields.Field(required=True)\n\n        schema_args = {}\n        load_args = {}\n        if partial_schema:\n            schema_args[\"partial\"] = True\n        else:\n            load_args[\"partial\"] = True\n        data = MySchema(**schema_args).load({\"foo\": 3}, **load_args)\n\n        assert data[\"foo\"] == 3\n        assert \"bar\" not in data\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_partial_deserialization", "self", "partial_schema", "class", "myschema", "schema", "foo", "fields", "field", "required", "true", "bar", "fields", "field", "required", "true", "schema_args", "load_args", "if", "partial_schema", "schema_args", "partial", "true", "else", "load_args", "partial", "true", "data", "myschema", "schema_args", "load", "foo", "3", "load_args", "assert", "data", "foo", "3", "assert", "bar", "not", "in", "data"], "doc_len": 48}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_partial_fields_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_partial_fields_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_partial_fields_deserialization(self):\n        class MySchema(Schema):\n            foo = fields.Field(required=True)\n            bar = fields.Field(required=True)\n            baz = fields.Field(required=True)\n\n        with pytest.raises(ValidationError) as excinfo:\n            MySchema().load({\"foo\": 3}, partial=tuple())\n        data, errors = excinfo.value.valid_data, excinfo.value.messages\n        assert data[\"foo\"] == 3\n        assert \"bar\" in errors\n        assert \"baz\" in errors\n\n        data = MySchema().load({\"foo\": 3}, partial=(\"bar\", \"baz\"))\n        assert data[\"foo\"] == 3\n        assert \"bar\" not in data\n        assert \"baz\" not in data\n\n        data = MySchema(partial=True).load({\"foo\": 3}, partial=(\"bar\", \"baz\"))\n        assert data[\"foo\"] == 3\n        assert \"bar\" not in data\n        assert \"baz\" not in data\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_partial_fields_deserialization", "self", "class", "myschema", "schema", "foo", "fields", "field", "required", "true", "bar", "fields", "field", "required", "true", "baz", "fields", "field", "required", "true", "with", "pytest", "raises", "validationerror", "as", "excinfo", "myschema", "load", "foo", "3", "partial", "tuple", "data", "errors", "excinfo", "value", "valid_data", "excinfo", "value", "messages", "assert", "data", "foo", "3", "assert", "bar", "in", "errors", "assert", "baz", "in", "errors", "data", "myschema", "load", "foo", "3", "partial", "bar", "baz", "assert", "data", "foo", "3", "assert", "bar", "not", "in", "data", "assert", "baz", "not", "in", "data", "data", "myschema", "partial", "true", "load", "foo", "3", "partial", "bar", "baz", "assert", "data", "foo", "3", "assert", "bar", "not", "in", "data", "assert", "baz", "not", "in", "data"], "doc_len": 103}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_partial_fields_validation", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_partial_fields_validation", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_partial_fields_validation(self):\n        class MySchema(Schema):\n            foo = fields.Field(required=True)\n            bar = fields.Field(required=True)\n            baz = fields.Field(required=True)\n\n        errors = MySchema().validate({\"foo\": 3}, partial=tuple())\n        assert \"bar\" in errors\n        assert \"baz\" in errors\n\n        errors = MySchema().validate({\"foo\": 3}, partial=(\"bar\", \"baz\"))\n        assert errors == {}\n\n        errors = MySchema(partial=True).validate({\"foo\": 3}, partial=(\"bar\", \"baz\"))\n        assert errors == {}\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_partial_fields_validation", "self", "class", "myschema", "schema", "foo", "fields", "field", "required", "true", "bar", "fields", "field", "required", "true", "baz", "fields", "field", "required", "true", "errors", "myschema", "validate", "foo", "3", "partial", "tuple", "assert", "bar", "in", "errors", "assert", "baz", "in", "errors", "errors", "myschema", "validate", "foo", "3", "partial", "bar", "baz", "assert", "errors", "errors", "myschema", "partial", "true", "validate", "foo", "3", "partial", "bar", "baz", "assert", "errors"], "doc_len": 62}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_unknown_fields_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_unknown_fields_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_unknown_fields_deserialization(self):\n        class MySchema(Schema):\n            foo = fields.Integer()\n\n        data = MySchema(unknown=EXCLUDE).load({\"foo\": 3, \"bar\": 5})\n        assert data[\"foo\"] == 3\n        assert \"bar\" not in data\n\n        data = MySchema(unknown=INCLUDE).load({\"foo\": 3, \"bar\": 5}, unknown=EXCLUDE)\n        assert data[\"foo\"] == 3\n        assert \"bar\" not in data\n\n        data = MySchema(unknown=EXCLUDE).load({\"foo\": 3, \"bar\": 5}, unknown=INCLUDE)\n        assert data[\"foo\"] == 3\n        assert data[\"bar\"]\n\n        data = MySchema(unknown=INCLUDE).load({\"foo\": 3, \"bar\": 5})\n        assert data[\"foo\"] == 3\n        assert data[\"bar\"]\n\n        with pytest.raises(ValidationError, match=\"foo\"):\n            MySchema(unknown=INCLUDE).load({\"foo\": \"asd\", \"bar\": 5})\n\n        data = MySchema(unknown=INCLUDE, many=True).load(\n            [{\"foo\": 1}, {\"foo\": 3, \"bar\": 5}]\n        )\n        assert \"foo\" in data[1]\n        assert \"bar\" in data[1]\n\n        with pytest.raises(ValidationError) as excinfo:\n            MySchema().load({\"foo\": 3, \"bar\": 5})\n        err = excinfo.value\n        assert \"bar\" in err.messages\n        assert err.messages[\"bar\"] == [\"Unknown field.\"]\n\n        with pytest.raises(ValidationError) as excinfo:\n            MySchema(many=True).load([{\"foo\": \"abc\"}, {\"foo\": 3, \"bar\": 5}])\n        err = excinfo.value\n        assert 0 in err.messages\n        assert \"foo\" in err.messages[0]\n        assert err.messages[0][\"foo\"] == [\"Not a valid integer.\"]\n        assert 1 in err.messages\n        assert \"bar\" in err.messages[1]\n        assert err.messages[1][\"bar\"] == [\"Unknown field.\"]\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_unknown_fields_deserialization", "self", "class", "myschema", "schema", "foo", "fields", "integer", "data", "myschema", "unknown", "exclude", "load", "foo", "3", "bar", "5", "assert", "data", "foo", "3", "assert", "bar", "not", "in", "data", "data", "myschema", "unknown", "include", "load", "foo", "3", "bar", "5", "unknown", "exclude", "assert", "data", "foo", "3", "assert", "bar", "not", "in", "data", "data", "myschema", "unknown", "exclude", "load", "foo", "3", "bar", "5", "unknown", "include", "assert", "data", "foo", "3", "assert", "data", "bar", "data", "myschema", "unknown", "include", "load", "foo", "3", "bar", "5", "assert", "data", "foo", "3", "assert", "data", "bar", "with", "pytest", "raises", "validationerror", "match", "foo", "myschema", "unknown", "include", "load", "foo", "asd", "bar", "5", "data", "myschema", "unknown", "include", "many", "true", "load", "foo", "1", "foo", "3", "bar", "5", "assert", "foo", "in", "data", "1", "assert", "bar", "in", "data", "1", "with", "pytest", "raises", "validationerror", "as", "excinfo", "myschema", "load", "foo", "3", "bar", "5", "err", "excinfo", "value", "assert", "bar", "in", "err", "messages", "assert", "err", "messages", "bar", "unknown", "field", "with", "pytest", "raises", "validationerror", "as", "excinfo", "myschema", "many", "true", "load", "foo", "abc", "foo", "3", "bar", "5", "err", "excinfo", "value", "assert", "0", "in", "err", "messages", "assert", "foo", "in", "err", "messages", "0", "assert", "err", "messages", "0", "foo", "not", "a", "valid", "integer", "assert", "1", "in", "err", "messages", "assert", "bar", "in", "err", "messages", "1", "assert", "err", "messages", "1", "bar", "unknown", "field"], "doc_len": 205}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_unknown_fields_deserialization_precedence", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_unknown_fields_deserialization_precedence", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_unknown_fields_deserialization_precedence(self):\n        class MySchema(Schema):\n            class Meta:\n                unknown = INCLUDE\n\n            foo = fields.Integer()\n\n        data = MySchema().load({\"foo\": 3, \"bar\": 5})\n        assert data[\"foo\"] == 3\n        assert data[\"bar\"] == 5\n\n        data = MySchema(unknown=EXCLUDE).load({\"foo\": 3, \"bar\": 5})\n        assert data[\"foo\"] == 3\n        assert \"bar\" not in data\n\n        data = MySchema().load({\"foo\": 3, \"bar\": 5}, unknown=EXCLUDE)\n        assert data[\"foo\"] == 3\n        assert \"bar\" not in data\n\n        with pytest.raises(ValidationError):\n            MySchema(unknown=EXCLUDE).load({\"foo\": 3, \"bar\": 5}, unknown=RAISE)\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_unknown_fields_deserialization_precedence", "self", "class", "myschema", "schema", "class", "meta", "unknown", "include", "foo", "fields", "integer", "data", "myschema", "load", "foo", "3", "bar", "5", "assert", "data", "foo", "3", "assert", "data", "bar", "5", "data", "myschema", "unknown", "exclude", "load", "foo", "3", "bar", "5", "assert", "data", "foo", "3", "assert", "bar", "not", "in", "data", "data", "myschema", "load", "foo", "3", "bar", "5", "unknown", "exclude", "assert", "data", "foo", "3", "assert", "bar", "not", "in", "data", "with", "pytest", "raises", "validationerror", "myschema", "unknown", "exclude", "load", "foo", "3", "bar", "5", "unknown", "raise"], "doc_len": 82}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_unknown_fields_deserialization_with_data_key", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_unknown_fields_deserialization_with_data_key", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_unknown_fields_deserialization_with_data_key(self):\n        class MySchema(Schema):\n            foo = fields.Integer(data_key=\"Foo\")\n\n        data = MySchema().load({\"Foo\": 1})\n        assert data[\"foo\"] == 1\n        assert \"Foo\" not in data\n\n        data = MySchema(unknown=RAISE).load({\"Foo\": 1})\n        assert data[\"foo\"] == 1\n        assert \"Foo\" not in data\n\n        with pytest.raises(ValidationError):\n            MySchema(unknown=RAISE).load({\"foo\": 1})\n\n        data = MySchema(unknown=INCLUDE).load({\"Foo\": 1})\n        assert data[\"foo\"] == 1\n        assert \"Foo\" not in data\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_unknown_fields_deserialization_with_data_key", "self", "class", "myschema", "schema", "foo", "fields", "integer", "data_key", "foo", "data", "myschema", "load", "foo", "1", "assert", "data", "foo", "1", "assert", "foo", "not", "in", "data", "data", "myschema", "unknown", "raise", "load", "foo", "1", "assert", "data", "foo", "1", "assert", "foo", "not", "in", "data", "with", "pytest", "raises", "validationerror", "myschema", "unknown", "raise", "load", "foo", "1", "data", "myschema", "unknown", "include", "load", "foo", "1", "assert", "data", "foo", "1", "assert", "foo", "not", "in", "data"], "doc_len": 71}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_unknown_fields_deserialization_with_index_errors_false", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_unknown_fields_deserialization_with_index_errors_false", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_unknown_fields_deserialization_with_index_errors_false(self):\n        class MySchema(Schema):\n            foo = fields.Integer()\n\n            class Meta:\n                unknown = RAISE\n                index_errors = False\n\n        with pytest.raises(ValidationError) as excinfo:\n            MySchema(many=True).load([{\"foo\": \"invalid\"}, {\"foo\": 42, \"bar\": 24}])\n        err = excinfo.value\n        assert 1 not in err.messages\n        assert \"foo\" in err.messages\n        assert \"bar\" in err.messages\n        assert err.messages[\"foo\"] == [\"Not a valid integer.\"]\n        assert err.messages[\"bar\"] == [\"Unknown field.\"]\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_unknown_fields_deserialization_with_index_errors_false", "self", "class", "myschema", "schema", "foo", "fields", "integer", "class", "meta", "unknown", "raise", "index_errors", "false", "with", "pytest", "raises", "validationerror", "as", "excinfo", "myschema", "many", "true", "load", "foo", "invalid", "foo", "42", "bar", "24", "err", "excinfo", "value", "assert", "1", "not", "in", "err", "messages", "assert", "foo", "in", "err", "messages", "assert", "bar", "in", "err", "messages", "assert", "err", "messages", "foo", "not", "a", "valid", "integer", "assert", "err", "messages", "bar", "unknown", "field"], "doc_len": 68}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_dump_only_fields_considered_unknown", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_dump_only_fields_considered_unknown", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_dump_only_fields_considered_unknown(self):\n        class MySchema(Schema):\n            foo = fields.Int(dump_only=True)\n\n        with pytest.raises(ValidationError) as excinfo:\n            MySchema().load({\"foo\": 42})\n        err = excinfo.value\n        assert \"foo\" in err.messages\n        assert err.messages[\"foo\"] == [\"Unknown field.\"]\n\n        # When unknown = INCLUDE, dump-only fields are included as unknown\n        # without any validation.\n        data = MySchema(unknown=INCLUDE).load({\"foo\": \"LOL\"})\n        assert data[\"foo\"] == \"LOL\"\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_dump_only_fields_considered_unknown", "self", "class", "myschema", "schema", "foo", "fields", "int", "dump_only", "true", "with", "pytest", "raises", "validationerror", "as", "excinfo", "myschema", "load", "foo", "42", "err", "excinfo", "value", "assert", "foo", "in", "err", "messages", "assert", "err", "messages", "foo", "unknown", "field", "when", "unknown", "include", "dump", "only", "fields", "are", "included", "as", "unknown", "without", "any", "validation", "data", "myschema", "unknown", "include", "load", "foo", "lol", "assert", "data", "foo", "lol"], "doc_len": 63}
{"doc_id": "tests/test_deserialization.py::TestValidation.test_integer_with_validator", "file_path": "tests/test_deserialization.py", "class_name": "TestValidation", "func_name": "test_integer_with_validator", "text": "文件路径: tests/test_deserialization.py, 类名: TestValidation\n    def test_integer_with_validator(self):\n        field = fields.Integer(validate=lambda x: 18 <= x <= 24)\n        out = field.deserialize(\"20\")\n        assert out == 20\n        with pytest.raises(ValidationError):\n            field.deserialize(25)\n", "tokens": ["tests", "test_deserialization", "py", "testvalidation", "def", "test_integer_with_validator", "self", "field", "fields", "integer", "validate", "lambda", "x", "18", "x", "24", "out", "field", "deserialize", "20", "assert", "out", "20", "with", "pytest", "raises", "validationerror", "field", "deserialize", "25"], "doc_len": 30}
{"doc_id": "tests/test_deserialization.py::TestValidation.test_integer_with_validators", "file_path": "tests/test_deserialization.py", "class_name": "TestValidation", "func_name": "test_integer_with_validators", "text": "文件路径: tests/test_deserialization.py, 类名: TestValidation\n    def test_integer_with_validators(self, field):\n        out = field.deserialize(\"20\")\n        assert out == 20\n        with pytest.raises(ValidationError):\n            field.deserialize(25)\n", "tokens": ["tests", "test_deserialization", "py", "testvalidation", "def", "test_integer_with_validators", "self", "field", "out", "field", "deserialize", "20", "assert", "out", "20", "with", "pytest", "raises", "validationerror", "field", "deserialize", "25"], "doc_len": 22}
{"doc_id": "tests/test_deserialization.py::TestValidation.test_float_with_validators", "file_path": "tests/test_deserialization.py", "class_name": "TestValidation", "func_name": "test_float_with_validators", "text": "文件路径: tests/test_deserialization.py, 类名: TestValidation\n    def test_float_with_validators(self, field):\n        assert field.deserialize(3.14)\n        with pytest.raises(ValidationError):\n            field.deserialize(4.2)\n", "tokens": ["tests", "test_deserialization", "py", "testvalidation", "def", "test_float_with_validators", "self", "field", "assert", "field", "deserialize", "3", "14", "with", "pytest", "raises", "validationerror", "field", "deserialize", "4", "2"], "doc_len": 21}
{"doc_id": "tests/test_deserialization.py::TestValidation.test_string_validator", "file_path": "tests/test_deserialization.py", "class_name": "TestValidation", "func_name": "test_string_validator", "text": "文件路径: tests/test_deserialization.py, 类名: TestValidation\n    def test_string_validator(self):\n        field = fields.String(validate=lambda n: len(n) == 3)\n        assert field.deserialize(\"Joe\") == \"Joe\"\n        with pytest.raises(ValidationError):\n            field.deserialize(\"joseph\")\n", "tokens": ["tests", "test_deserialization", "py", "testvalidation", "def", "test_string_validator", "self", "field", "fields", "string", "validate", "lambda", "n", "len", "n", "3", "assert", "field", "deserialize", "joe", "joe", "with", "pytest", "raises", "validationerror", "field", "deserialize", "joseph"], "doc_len": 28}
{"doc_id": "tests/test_deserialization.py::TestValidation.test_function_validator", "file_path": "tests/test_deserialization.py", "class_name": "TestValidation", "func_name": "test_function_validator", "text": "文件路径: tests/test_deserialization.py, 类名: TestValidation\n    def test_function_validator(self):\n        field = fields.Function(\n            lambda d: d.name.upper(), validate=lambda n: len(n) == 3\n        )\n        assert field.deserialize(\"joe\")\n        with pytest.raises(ValidationError):\n            field.deserialize(\"joseph\")\n", "tokens": ["tests", "test_deserialization", "py", "testvalidation", "def", "test_function_validator", "self", "field", "fields", "function", "lambda", "d", "d", "name", "upper", "validate", "lambda", "n", "len", "n", "3", "assert", "field", "deserialize", "joe", "with", "pytest", "raises", "validationerror", "field", "deserialize", "joseph"], "doc_len": 32}
{"doc_id": "tests/test_deserialization.py::TestValidation.test_function_validators", "file_path": "tests/test_deserialization.py", "class_name": "TestValidation", "func_name": "test_function_validators", "text": "文件路径: tests/test_deserialization.py, 类名: TestValidation\n    def test_function_validators(self, field):\n        assert field.deserialize(\"joe\")\n        with pytest.raises(ValidationError):\n            field.deserialize(\"joseph\")\n", "tokens": ["tests", "test_deserialization", "py", "testvalidation", "def", "test_function_validators", "self", "field", "assert", "field", "deserialize", "joe", "with", "pytest", "raises", "validationerror", "field", "deserialize", "joseph"], "doc_len": 19}
{"doc_id": "tests/test_deserialization.py::TestValidation.test_method_validator", "file_path": "tests/test_deserialization.py", "class_name": "TestValidation", "func_name": "test_method_validator", "text": "文件路径: tests/test_deserialization.py, 类名: TestValidation\n    def test_method_validator(self):\n        class MethodSerializer(Schema):\n            name = fields.Method(\n                \"get_name\", deserialize=\"get_name\", validate=lambda n: len(n) == 3\n            )\n\n            def get_name(self, val):\n                return val.upper()\n\n        assert MethodSerializer().load({\"name\": \"joe\"})\n        with pytest.raises(ValidationError, match=\"Invalid value.\"):\n            MethodSerializer().load({\"name\": \"joseph\"})\n", "tokens": ["tests", "test_deserialization", "py", "testvalidation", "def", "test_method_validator", "self", "class", "methodserializer", "schema", "name", "fields", "method", "get_name", "deserialize", "get_name", "validate", "lambda", "n", "len", "n", "3", "def", "get_name", "self", "val", "return", "val", "upper", "assert", "methodserializer", "load", "name", "joe", "with", "pytest", "raises", "validationerror", "match", "invalid", "value", "methodserializer", "load", "name", "joseph"], "doc_len": 45}
{"doc_id": "tests/test_deserialization.py::TestValidation.test_nested_data_is_stored_when_validation_fails", "file_path": "tests/test_deserialization.py", "class_name": "TestValidation", "func_name": "test_nested_data_is_stored_when_validation_fails", "text": "文件路径: tests/test_deserialization.py, 类名: TestValidation\n    def test_nested_data_is_stored_when_validation_fails(self):\n        class SchemaA(Schema):\n            x = fields.Integer()\n            y = fields.Integer(validate=lambda n: n > 0)\n            z = fields.Integer()\n\n        class SchemaB(Schema):\n            w = fields.Integer()\n            n = fields.Nested(SchemaA)\n\n        sch = SchemaB()\n\n        with pytest.raises(ValidationError) as excinfo:\n            sch.load({\"w\": 90, \"n\": {\"x\": 90, \"y\": 89, \"z\": None}})\n        data, errors = excinfo.value.valid_data, excinfo.value.messages\n        assert \"z\" in errors[\"n\"]\n        assert data == {\"w\": 90, \"n\": {\"x\": 90, \"y\": 89}}\n\n        with pytest.raises(ValidationError) as excinfo:\n            sch.load({\"w\": 90, \"n\": {\"x\": 90, \"y\": -1, \"z\": 180}})\n        data, errors = excinfo.value.valid_data, excinfo.value.messages\n        assert \"y\" in errors[\"n\"]\n        assert data == {\"w\": 90, \"n\": {\"x\": 90, \"z\": 180}}\n", "tokens": ["tests", "test_deserialization", "py", "testvalidation", "def", "test_nested_data_is_stored_when_validation_fails", "self", "class", "schemaa", "schema", "x", "fields", "integer", "y", "fields", "integer", "validate", "lambda", "n", "n", "0", "z", "fields", "integer", "class", "schemab", "schema", "w", "fields", "integer", "n", "fields", "nested", "schemaa", "sch", "schemab", "with", "pytest", "raises", "validationerror", "as", "excinfo", "sch", "load", "w", "90", "n", "x", "90", "y", "89", "z", "none", "data", "errors", "excinfo", "value", "valid_data", "excinfo", "value", "messages", "assert", "z", "in", "errors", "n", "assert", "data", "w", "90", "n", "x", "90", "y", "89", "with", "pytest", "raises", "validationerror", "as", "excinfo", "sch", "load", "w", "90", "n", "x", "90", "y", "1", "z", "180", "data", "errors", "excinfo", "value", "valid_data", "excinfo", "value", "messages", "assert", "y", "in", "errors", "n", "assert", "data", "w", "90", "n", "x", "90", "z", "180"], "doc_len": 114}
{"doc_id": "tests/test_deserialization.py::TestValidation.test_false_value_validation", "file_path": "tests/test_deserialization.py", "class_name": "TestValidation", "func_name": "test_false_value_validation", "text": "文件路径: tests/test_deserialization.py, 类名: TestValidation\n    def test_false_value_validation(self):\n        class Sch(Schema):\n            lamb = fields.Raw(validate=lambda x: x is False)\n            equal = fields.Raw(validate=Equal(False))\n\n        errors = Sch().validate({\"lamb\": False, \"equal\": False})\n        assert not errors\n        errors = Sch().validate({\"lamb\": True, \"equal\": True})\n        assert \"lamb\" in errors\n        assert errors[\"lamb\"] == [\"Invalid value.\"]\n        assert \"equal\" in errors\n        assert errors[\"equal\"] == [\"Must be equal to False.\"]\n", "tokens": ["tests", "test_deserialization", "py", "testvalidation", "def", "test_false_value_validation", "self", "class", "sch", "schema", "lamb", "fields", "raw", "validate", "lambda", "x", "x", "is", "false", "equal", "fields", "raw", "validate", "equal", "false", "errors", "sch", "validate", "lamb", "false", "equal", "false", "assert", "not", "errors", "errors", "sch", "validate", "lamb", "true", "equal", "true", "assert", "lamb", "in", "errors", "assert", "errors", "lamb", "invalid", "value", "assert", "equal", "in", "errors", "assert", "errors", "equal", "must", "be", "equal", "to", "false"], "doc_len": 63}
{"doc_id": "tests/test_deserialization.py::TestValidation.test_nested_partial_load", "file_path": "tests/test_deserialization.py", "class_name": "TestValidation", "func_name": "test_nested_partial_load", "text": "文件路径: tests/test_deserialization.py, 类名: TestValidation\n    def test_nested_partial_load(self):\n        class SchemaA(Schema):\n            x = fields.Integer(required=True)\n            y = fields.Integer()\n\n        class SchemaB(Schema):\n            z = fields.Nested(SchemaA)\n\n        b_dict = {\"z\": {\"y\": 42}}\n        # Partial loading shouldn't generate any errors.\n        result = SchemaB().load(b_dict, partial=True)\n        assert result[\"z\"][\"y\"] == 42\n        # Non partial loading should complain about missing values.\n        with pytest.raises(ValidationError) as excinfo:\n            SchemaB().load(b_dict)\n        data, errors = excinfo.value.valid_data, excinfo.value.messages\n        assert data[\"z\"][\"y\"] == 42\n        assert \"z\" in errors\n        assert \"x\" in errors[\"z\"]\n", "tokens": ["tests", "test_deserialization", "py", "testvalidation", "def", "test_nested_partial_load", "self", "class", "schemaa", "schema", "x", "fields", "integer", "required", "true", "y", "fields", "integer", "class", "schemab", "schema", "z", "fields", "nested", "schemaa", "b_dict", "z", "y", "42", "partial", "loading", "shouldn", "t", "generate", "any", "errors", "result", "schemab", "load", "b_dict", "partial", "true", "assert", "result", "z", "y", "42", "non", "partial", "loading", "should", "complain", "about", "missing", "values", "with", "pytest", "raises", "validationerror", "as", "excinfo", "schemab", "load", "b_dict", "data", "errors", "excinfo", "value", "valid_data", "excinfo", "value", "messages", "assert", "data", "z", "y", "42", "assert", "z", "in", "errors", "assert", "x", "in", "errors", "z"], "doc_len": 86}
{"doc_id": "tests/test_deserialization.py::TestValidation.test_deeply_nested_partial_load", "file_path": "tests/test_deserialization.py", "class_name": "TestValidation", "func_name": "test_deeply_nested_partial_load", "text": "文件路径: tests/test_deserialization.py, 类名: TestValidation\n    def test_deeply_nested_partial_load(self):\n        class SchemaC(Schema):\n            x = fields.Integer(required=True)\n            y = fields.Integer()\n\n        class SchemaB(Schema):\n            c = fields.Nested(SchemaC)\n\n        class SchemaA(Schema):\n            b = fields.Nested(SchemaB)\n\n        a_dict = {\"b\": {\"c\": {\"y\": 42}}}\n        # Partial loading shouldn't generate any errors.\n        result = SchemaA().load(a_dict, partial=True)\n        assert result[\"b\"][\"c\"][\"y\"] == 42\n        # Non partial loading should complain about missing values.\n        with pytest.raises(ValidationError) as excinfo:\n            SchemaA().load(a_dict)\n        data, errors = excinfo.value.valid_data, excinfo.value.messages\n        assert data[\"b\"][\"c\"][\"y\"] == 42\n        assert \"b\" in errors\n        assert \"c\" in errors[\"b\"]\n        assert \"x\" in errors[\"b\"][\"c\"]\n", "tokens": ["tests", "test_deserialization", "py", "testvalidation", "def", "test_deeply_nested_partial_load", "self", "class", "schemac", "schema", "x", "fields", "integer", "required", "true", "y", "fields", "integer", "class", "schemab", "schema", "c", "fields", "nested", "schemac", "class", "schemaa", "schema", "b", "fields", "nested", "schemab", "a_dict", "b", "c", "y", "42", "partial", "loading", "shouldn", "t", "generate", "any", "errors", "result", "schemaa", "load", "a_dict", "partial", "true", "assert", "result", "b", "c", "y", "42", "non", "partial", "loading", "should", "complain", "about", "missing", "values", "with", "pytest", "raises", "validationerror", "as", "excinfo", "schemaa", "load", "a_dict", "data", "errors", "excinfo", "value", "valid_data", "excinfo", "value", "messages", "assert", "data", "b", "c", "y", "42", "assert", "b", "in", "errors", "assert", "c", "in", "errors", "b", "assert", "x", "in", "errors", "b", "c"], "doc_len": 102}
{"doc_id": "tests/test_deserialization.py::TestValidation.test_nested_partial_tuple", "file_path": "tests/test_deserialization.py", "class_name": "TestValidation", "func_name": "test_nested_partial_tuple", "text": "文件路径: tests/test_deserialization.py, 类名: TestValidation\n    def test_nested_partial_tuple(self):\n        class SchemaA(Schema):\n            x = fields.Integer(required=True)\n            y = fields.Integer(required=True)\n\n        class SchemaB(Schema):\n            z = fields.Nested(SchemaA)\n\n        b_dict = {\"z\": {\"y\": 42}}\n        # If we ignore the missing z.x, z.y should still load.\n        result = SchemaB().load(b_dict, partial=(\"z.x\",))\n        assert result[\"z\"][\"y\"] == 42\n        # If we ignore a missing z.y we should get a validation error.\n        with pytest.raises(ValidationError):\n            SchemaB().load(b_dict, partial=(\"z.y\",))\n", "tokens": ["tests", "test_deserialization", "py", "testvalidation", "def", "test_nested_partial_tuple", "self", "class", "schemaa", "schema", "x", "fields", "integer", "required", "true", "y", "fields", "integer", "required", "true", "class", "schemab", "schema", "z", "fields", "nested", "schemaa", "b_dict", "z", "y", "42", "if", "we", "ignore", "the", "missing", "z", "x", "z", "y", "should", "still", "load", "result", "schemab", "load", "b_dict", "partial", "z", "x", "assert", "result", "z", "y", "42", "if", "we", "ignore", "a", "missing", "z", "y", "we", "should", "get", "a", "validation", "error", "with", "pytest", "raises", "validationerror", "schemab", "load", "b_dict", "partial", "z", "y"], "doc_len": 78}
{"doc_id": "tests/test_deserialization.py::test_required_field_failure", "file_path": "tests/test_deserialization.py", "class_name": null, "func_name": "test_required_field_failure", "text": "文件路径: tests/test_deserialization.py\ndef test_required_field_failure(FieldClass):  # noqa\n    class RequireSchema(Schema):\n        age = FieldClass(required=True)\n\n    user_data = {\"name\": \"Phil\"}\n    with pytest.raises(ValidationError) as excinfo:\n        RequireSchema().load(user_data)\n    errors = excinfo.value.messages\n    assert \"Missing data for required field.\" in errors[\"age\"]\n", "tokens": ["tests", "test_deserialization", "py", "def", "test_required_field_failure", "fieldclass", "noqa", "class", "requireschema", "schema", "age", "fieldclass", "required", "true", "user_data", "name", "phil", "with", "pytest", "raises", "validationerror", "as", "excinfo", "requireschema", "load", "user_data", "errors", "excinfo", "value", "messages", "assert", "missing", "data", "for", "required", "field", "in", "errors", "age"], "doc_len": 39}
{"doc_id": "tests/test_deserialization.py::test_required_message_can_be_changed", "file_path": "tests/test_deserialization.py", "class_name": null, "func_name": "test_required_message_can_be_changed", "text": "文件路径: tests/test_deserialization.py\ndef test_required_message_can_be_changed(message):\n    class RequireSchema(Schema):\n        age = fields.Integer(required=True, error_messages={\"required\": message})\n\n    user_data = {\"name\": \"Phil\"}\n    with pytest.raises(ValidationError) as excinfo:\n        RequireSchema().load(user_data)\n    errors = excinfo.value.messages\n    expected = [message] if isinstance(message, str) else message\n    assert expected == errors[\"age\"]\n", "tokens": ["tests", "test_deserialization", "py", "def", "test_required_message_can_be_changed", "message", "class", "requireschema", "schema", "age", "fields", "integer", "required", "true", "error_messages", "required", "message", "user_data", "name", "phil", "with", "pytest", "raises", "validationerror", "as", "excinfo", "requireschema", "load", "user_data", "errors", "excinfo", "value", "messages", "expected", "message", "if", "isinstance", "message", "str", "else", "message", "assert", "expected", "errors", "age"], "doc_len": 45}
{"doc_id": "tests/test_deserialization.py::test_deserialize_raises_exception_if_input_type_is_incorrect", "file_path": "tests/test_deserialization.py", "class_name": null, "func_name": "test_deserialize_raises_exception_if_input_type_is_incorrect", "text": "文件路径: tests/test_deserialization.py\ndef test_deserialize_raises_exception_if_input_type_is_incorrect(data, unknown):\n    class MySchema(Schema):\n        foo = fields.Field()\n        bar = fields.Field()\n\n    with pytest.raises(ValidationError, match=\"Invalid input type.\") as excinfo:\n        MySchema(unknown=unknown).load(data)\n    exc = excinfo.value\n    assert list(exc.messages.keys()) == [\"_schema\"]\n", "tokens": ["tests", "test_deserialization", "py", "def", "test_deserialize_raises_exception_if_input_type_is_incorrect", "data", "unknown", "class", "myschema", "schema", "foo", "fields", "field", "bar", "fields", "field", "with", "pytest", "raises", "validationerror", "match", "invalid", "input", "type", "as", "excinfo", "myschema", "unknown", "unknown", "load", "data", "exc", "excinfo", "value", "assert", "list", "exc", "messages", "keys", "_schema"], "doc_len": 40}
{"doc_id": "tests/test_error_store.py::test_missing_is_falsy", "file_path": "tests/test_error_store.py", "class_name": null, "func_name": "test_missing_is_falsy", "text": "文件路径: tests/test_error_store.py\ndef test_missing_is_falsy():\n    assert bool(missing) is False\n", "tokens": ["tests", "test_error_store", "py", "def", "test_missing_is_falsy", "assert", "bool", "missing", "is", "false"], "doc_len": 10}
{"doc_id": "tests/test_error_store.py::TestMergeErrors.test_merging_none_and_string", "file_path": "tests/test_error_store.py", "class_name": "TestMergeErrors", "func_name": "test_merging_none_and_string", "text": "文件路径: tests/test_error_store.py, 类名: TestMergeErrors\n    def test_merging_none_and_string(self):\n        assert \"error1\" == merge_errors(None, \"error1\")\n", "tokens": ["tests", "test_error_store", "py", "testmergeerrors", "def", "test_merging_none_and_string", "self", "assert", "error1", "merge_errors", "none", "error1"], "doc_len": 12}
{"doc_id": "tests/test_error_store.py::TestMergeErrors.test_merging_none_and_custom_error", "file_path": "tests/test_error_store.py", "class_name": "TestMergeErrors", "func_name": "test_merging_none_and_custom_error", "text": "文件路径: tests/test_error_store.py, 类名: TestMergeErrors\n    def test_merging_none_and_custom_error(self):\n        assert CustomError(123, \"error1\") == merge_errors(\n            None, CustomError(123, \"error1\")\n        )\n", "tokens": ["tests", "test_error_store", "py", "testmergeerrors", "def", "test_merging_none_and_custom_error", "self", "assert", "customerror", "123", "error1", "merge_errors", "none", "customerror", "123", "error1"], "doc_len": 16}
{"doc_id": "tests/test_error_store.py::TestMergeErrors.test_merging_none_and_list", "file_path": "tests/test_error_store.py", "class_name": "TestMergeErrors", "func_name": "test_merging_none_and_list", "text": "文件路径: tests/test_error_store.py, 类名: TestMergeErrors\n    def test_merging_none_and_list(self):\n        assert [\"error1\", \"error2\"] == merge_errors(None, [\"error1\", \"error2\"])\n", "tokens": ["tests", "test_error_store", "py", "testmergeerrors", "def", "test_merging_none_and_list", "self", "assert", "error1", "error2", "merge_errors", "none", "error1", "error2"], "doc_len": 14}
{"doc_id": "tests/test_error_store.py::TestMergeErrors.test_merging_none_and_dict", "file_path": "tests/test_error_store.py", "class_name": "TestMergeErrors", "func_name": "test_merging_none_and_dict", "text": "文件路径: tests/test_error_store.py, 类名: TestMergeErrors\n    def test_merging_none_and_dict(self):\n        assert {\"field1\": \"error1\"} == merge_errors(None, {\"field1\": \"error1\"})\n", "tokens": ["tests", "test_error_store", "py", "testmergeerrors", "def", "test_merging_none_and_dict", "self", "assert", "field1", "error1", "merge_errors", "none", "field1", "error1"], "doc_len": 14}
{"doc_id": "tests/test_error_store.py::TestMergeErrors.test_merging_string_and_none", "file_path": "tests/test_error_store.py", "class_name": "TestMergeErrors", "func_name": "test_merging_string_and_none", "text": "文件路径: tests/test_error_store.py, 类名: TestMergeErrors\n    def test_merging_string_and_none(self):\n        assert \"error1\" == merge_errors(\"error1\", None)\n", "tokens": ["tests", "test_error_store", "py", "testmergeerrors", "def", "test_merging_string_and_none", "self", "assert", "error1", "merge_errors", "error1", "none"], "doc_len": 12}
{"doc_id": "tests/test_error_store.py::TestMergeErrors.test_merging_custom_error_and_none", "file_path": "tests/test_error_store.py", "class_name": "TestMergeErrors", "func_name": "test_merging_custom_error_and_none", "text": "文件路径: tests/test_error_store.py, 类名: TestMergeErrors\n    def test_merging_custom_error_and_none(self):\n        assert CustomError(123, \"error1\") == merge_errors(\n            CustomError(123, \"error1\"), None\n        )\n", "tokens": ["tests", "test_error_store", "py", "testmergeerrors", "def", "test_merging_custom_error_and_none", "self", "assert", "customerror", "123", "error1", "merge_errors", "customerror", "123", "error1", "none"], "doc_len": 16}
{"doc_id": "tests/test_error_store.py::TestMergeErrors.test_merging_list_and_none", "file_path": "tests/test_error_store.py", "class_name": "TestMergeErrors", "func_name": "test_merging_list_and_none", "text": "文件路径: tests/test_error_store.py, 类名: TestMergeErrors\n    def test_merging_list_and_none(self):\n        assert [\"error1\", \"error2\"] == merge_errors([\"error1\", \"error2\"], None)\n", "tokens": ["tests", "test_error_store", "py", "testmergeerrors", "def", "test_merging_list_and_none", "self", "assert", "error1", "error2", "merge_errors", "error1", "error2", "none"], "doc_len": 14}
{"doc_id": "tests/test_error_store.py::TestMergeErrors.test_merging_dict_and_none", "file_path": "tests/test_error_store.py", "class_name": "TestMergeErrors", "func_name": "test_merging_dict_and_none", "text": "文件路径: tests/test_error_store.py, 类名: TestMergeErrors\n    def test_merging_dict_and_none(self):\n        assert {\"field1\": \"error1\"} == merge_errors({\"field1\": \"error1\"}, None)\n", "tokens": ["tests", "test_error_store", "py", "testmergeerrors", "def", "test_merging_dict_and_none", "self", "assert", "field1", "error1", "merge_errors", "field1", "error1", "none"], "doc_len": 14}
{"doc_id": "tests/test_error_store.py::TestMergeErrors.test_merging_string_and_string", "file_path": "tests/test_error_store.py", "class_name": "TestMergeErrors", "func_name": "test_merging_string_and_string", "text": "文件路径: tests/test_error_store.py, 类名: TestMergeErrors\n    def test_merging_string_and_string(self):\n        assert [\"error1\", \"error2\"] == merge_errors(\"error1\", \"error2\")\n", "tokens": ["tests", "test_error_store", "py", "testmergeerrors", "def", "test_merging_string_and_string", "self", "assert", "error1", "error2", "merge_errors", "error1", "error2"], "doc_len": 13}
{"doc_id": "tests/test_error_store.py::TestMergeErrors.test_merging_custom_error_and_string", "file_path": "tests/test_error_store.py", "class_name": "TestMergeErrors", "func_name": "test_merging_custom_error_and_string", "text": "文件路径: tests/test_error_store.py, 类名: TestMergeErrors\n    def test_merging_custom_error_and_string(self):\n        assert [CustomError(123, \"error1\"), \"error2\"] == merge_errors(\n            CustomError(123, \"error1\"), \"error2\"\n        )\n", "tokens": ["tests", "test_error_store", "py", "testmergeerrors", "def", "test_merging_custom_error_and_string", "self", "assert", "customerror", "123", "error1", "error2", "merge_errors", "customerror", "123", "error1", "error2"], "doc_len": 17}
{"doc_id": "tests/test_error_store.py::TestMergeErrors.test_merging_string_and_custom_error", "file_path": "tests/test_error_store.py", "class_name": "TestMergeErrors", "func_name": "test_merging_string_and_custom_error", "text": "文件路径: tests/test_error_store.py, 类名: TestMergeErrors\n    def test_merging_string_and_custom_error(self):\n        assert [\"error1\", CustomError(123, \"error2\")] == merge_errors(\n            \"error1\", CustomError(123, \"error2\")\n        )\n", "tokens": ["tests", "test_error_store", "py", "testmergeerrors", "def", "test_merging_string_and_custom_error", "self", "assert", "error1", "customerror", "123", "error2", "merge_errors", "error1", "customerror", "123", "error2"], "doc_len": 17}
{"doc_id": "tests/test_error_store.py::TestMergeErrors.test_merging_custom_error_and_custom_error", "file_path": "tests/test_error_store.py", "class_name": "TestMergeErrors", "func_name": "test_merging_custom_error_and_custom_error", "text": "文件路径: tests/test_error_store.py, 类名: TestMergeErrors\n    def test_merging_custom_error_and_custom_error(self):\n        assert [CustomError(123, \"error1\"), CustomError(456, \"error2\")] == merge_errors(\n            CustomError(123, \"error1\"), CustomError(456, \"error2\")\n        )\n", "tokens": ["tests", "test_error_store", "py", "testmergeerrors", "def", "test_merging_custom_error_and_custom_error", "self", "assert", "customerror", "123", "error1", "customerror", "456", "error2", "merge_errors", "customerror", "123", "error1", "customerror", "456", "error2"], "doc_len": 21}
{"doc_id": "tests/test_error_store.py::TestMergeErrors.test_merging_string_and_list", "file_path": "tests/test_error_store.py", "class_name": "TestMergeErrors", "func_name": "test_merging_string_and_list", "text": "文件路径: tests/test_error_store.py, 类名: TestMergeErrors\n    def test_merging_string_and_list(self):\n        assert [\"error1\", \"error2\"] == merge_errors(\"error1\", [\"error2\"])\n", "tokens": ["tests", "test_error_store", "py", "testmergeerrors", "def", "test_merging_string_and_list", "self", "assert", "error1", "error2", "merge_errors", "error1", "error2"], "doc_len": 13}
{"doc_id": "tests/test_error_store.py::TestMergeErrors.test_merging_string_and_dict", "file_path": "tests/test_error_store.py", "class_name": "TestMergeErrors", "func_name": "test_merging_string_and_dict", "text": "文件路径: tests/test_error_store.py, 类名: TestMergeErrors\n    def test_merging_string_and_dict(self):\n        assert {\"_schema\": \"error1\", \"field1\": \"error2\"} == merge_errors(\n            \"error1\", {\"field1\": \"error2\"}\n        )\n", "tokens": ["tests", "test_error_store", "py", "testmergeerrors", "def", "test_merging_string_and_dict", "self", "assert", "_schema", "error1", "field1", "error2", "merge_errors", "error1", "field1", "error2"], "doc_len": 16}
{"doc_id": "tests/test_error_store.py::TestMergeErrors.test_merging_string_and_dict_with_schema_error", "file_path": "tests/test_error_store.py", "class_name": "TestMergeErrors", "func_name": "test_merging_string_and_dict_with_schema_error", "text": "文件路径: tests/test_error_store.py, 类名: TestMergeErrors\n    def test_merging_string_and_dict_with_schema_error(self):\n        assert {\"_schema\": [\"error1\", \"error2\"], \"field1\": \"error3\"} == merge_errors(\n            \"error1\", {\"_schema\": \"error2\", \"field1\": \"error3\"}\n        )\n", "tokens": ["tests", "test_error_store", "py", "testmergeerrors", "def", "test_merging_string_and_dict_with_schema_error", "self", "assert", "_schema", "error1", "error2", "field1", "error3", "merge_errors", "error1", "_schema", "error2", "field1", "error3"], "doc_len": 19}
{"doc_id": "tests/test_error_store.py::TestMergeErrors.test_merging_custom_error_and_list", "file_path": "tests/test_error_store.py", "class_name": "TestMergeErrors", "func_name": "test_merging_custom_error_and_list", "text": "文件路径: tests/test_error_store.py, 类名: TestMergeErrors\n    def test_merging_custom_error_and_list(self):\n        assert [CustomError(123, \"error1\"), \"error2\"] == merge_errors(\n            CustomError(123, \"error1\"), [\"error2\"]\n        )\n", "tokens": ["tests", "test_error_store", "py", "testmergeerrors", "def", "test_merging_custom_error_and_list", "self", "assert", "customerror", "123", "error1", "error2", "merge_errors", "customerror", "123", "error1", "error2"], "doc_len": 17}
{"doc_id": "tests/test_error_store.py::TestMergeErrors.test_merging_custom_error_and_dict", "file_path": "tests/test_error_store.py", "class_name": "TestMergeErrors", "func_name": "test_merging_custom_error_and_dict", "text": "文件路径: tests/test_error_store.py, 类名: TestMergeErrors\n    def test_merging_custom_error_and_dict(self):\n        assert {\n            \"_schema\": CustomError(123, \"error1\"),\n            \"field1\": \"error2\",\n        } == merge_errors(CustomError(123, \"error1\"), {\"field1\": \"error2\"})\n", "tokens": ["tests", "test_error_store", "py", "testmergeerrors", "def", "test_merging_custom_error_and_dict", "self", "assert", "_schema", "customerror", "123", "error1", "field1", "error2", "merge_errors", "customerror", "123", "error1", "field1", "error2"], "doc_len": 20}
{"doc_id": "tests/test_error_store.py::TestMergeErrors.test_merging_custom_error_and_dict_with_schema_error", "file_path": "tests/test_error_store.py", "class_name": "TestMergeErrors", "func_name": "test_merging_custom_error_and_dict_with_schema_error", "text": "文件路径: tests/test_error_store.py, 类名: TestMergeErrors\n    def test_merging_custom_error_and_dict_with_schema_error(self):\n        assert {\n            \"_schema\": [CustomError(123, \"error1\"), \"error2\"],\n            \"field1\": \"error3\",\n        } == merge_errors(\n            CustomError(123, \"error1\"), {\"_schema\": \"error2\", \"field1\": \"error3\"}\n        )\n", "tokens": ["tests", "test_error_store", "py", "testmergeerrors", "def", "test_merging_custom_error_and_dict_with_schema_error", "self", "assert", "_schema", "customerror", "123", "error1", "error2", "field1", "error3", "merge_errors", "customerror", "123", "error1", "_schema", "error2", "field1", "error3"], "doc_len": 23}
{"doc_id": "tests/test_error_store.py::TestMergeErrors.test_merging_list_and_string", "file_path": "tests/test_error_store.py", "class_name": "TestMergeErrors", "func_name": "test_merging_list_and_string", "text": "文件路径: tests/test_error_store.py, 类名: TestMergeErrors\n    def test_merging_list_and_string(self):\n        assert [\"error1\", \"error2\"] == merge_errors([\"error1\"], \"error2\")\n", "tokens": ["tests", "test_error_store", "py", "testmergeerrors", "def", "test_merging_list_and_string", "self", "assert", "error1", "error2", "merge_errors", "error1", "error2"], "doc_len": 13}
{"doc_id": "tests/test_error_store.py::TestMergeErrors.test_merging_list_and_custom_error", "file_path": "tests/test_error_store.py", "class_name": "TestMergeErrors", "func_name": "test_merging_list_and_custom_error", "text": "文件路径: tests/test_error_store.py, 类名: TestMergeErrors\n    def test_merging_list_and_custom_error(self):\n        assert [\"error1\", CustomError(123, \"error2\")] == merge_errors(\n            [\"error1\"], CustomError(123, \"error2\")\n        )\n", "tokens": ["tests", "test_error_store", "py", "testmergeerrors", "def", "test_merging_list_and_custom_error", "self", "assert", "error1", "customerror", "123", "error2", "merge_errors", "error1", "customerror", "123", "error2"], "doc_len": 17}
{"doc_id": "tests/test_error_store.py::TestMergeErrors.test_merging_list_and_list", "file_path": "tests/test_error_store.py", "class_name": "TestMergeErrors", "func_name": "test_merging_list_and_list", "text": "文件路径: tests/test_error_store.py, 类名: TestMergeErrors\n    def test_merging_list_and_list(self):\n        assert [\"error1\", \"error2\"] == merge_errors([\"error1\"], [\"error2\"])\n", "tokens": ["tests", "test_error_store", "py", "testmergeerrors", "def", "test_merging_list_and_list", "self", "assert", "error1", "error2", "merge_errors", "error1", "error2"], "doc_len": 13}
{"doc_id": "tests/test_error_store.py::TestMergeErrors.test_merging_list_and_dict", "file_path": "tests/test_error_store.py", "class_name": "TestMergeErrors", "func_name": "test_merging_list_and_dict", "text": "文件路径: tests/test_error_store.py, 类名: TestMergeErrors\n    def test_merging_list_and_dict(self):\n        assert {\"_schema\": [\"error1\"], \"field1\": \"error2\"} == merge_errors(\n            [\"error1\"], {\"field1\": \"error2\"}\n        )\n", "tokens": ["tests", "test_error_store", "py", "testmergeerrors", "def", "test_merging_list_and_dict", "self", "assert", "_schema", "error1", "field1", "error2", "merge_errors", "error1", "field1", "error2"], "doc_len": 16}
{"doc_id": "tests/test_error_store.py::TestMergeErrors.test_merging_list_and_dict_with_schema_error", "file_path": "tests/test_error_store.py", "class_name": "TestMergeErrors", "func_name": "test_merging_list_and_dict_with_schema_error", "text": "文件路径: tests/test_error_store.py, 类名: TestMergeErrors\n    def test_merging_list_and_dict_with_schema_error(self):\n        assert {\"_schema\": [\"error1\", \"error2\"], \"field1\": \"error3\"} == merge_errors(\n            [\"error1\"], {\"_schema\": \"error2\", \"field1\": \"error3\"}\n        )\n", "tokens": ["tests", "test_error_store", "py", "testmergeerrors", "def", "test_merging_list_and_dict_with_schema_error", "self", "assert", "_schema", "error1", "error2", "field1", "error3", "merge_errors", "error1", "_schema", "error2", "field1", "error3"], "doc_len": 19}
{"doc_id": "tests/test_error_store.py::TestMergeErrors.test_merging_dict_and_string", "file_path": "tests/test_error_store.py", "class_name": "TestMergeErrors", "func_name": "test_merging_dict_and_string", "text": "文件路径: tests/test_error_store.py, 类名: TestMergeErrors\n    def test_merging_dict_and_string(self):\n        assert {\"_schema\": \"error2\", \"field1\": \"error1\"} == merge_errors(\n            {\"field1\": \"error1\"}, \"error2\"\n        )\n", "tokens": ["tests", "test_error_store", "py", "testmergeerrors", "def", "test_merging_dict_and_string", "self", "assert", "_schema", "error2", "field1", "error1", "merge_errors", "field1", "error1", "error2"], "doc_len": 16}
{"doc_id": "tests/test_error_store.py::TestMergeErrors.test_merging_dict_and_custom_error", "file_path": "tests/test_error_store.py", "class_name": "TestMergeErrors", "func_name": "test_merging_dict_and_custom_error", "text": "文件路径: tests/test_error_store.py, 类名: TestMergeErrors\n    def test_merging_dict_and_custom_error(self):\n        assert {\n            \"_schema\": CustomError(123, \"error2\"),\n            \"field1\": \"error1\",\n        } == merge_errors({\"field1\": \"error1\"}, CustomError(123, \"error2\"))\n", "tokens": ["tests", "test_error_store", "py", "testmergeerrors", "def", "test_merging_dict_and_custom_error", "self", "assert", "_schema", "customerror", "123", "error2", "field1", "error1", "merge_errors", "field1", "error1", "customerror", "123", "error2"], "doc_len": 20}
{"doc_id": "tests/test_error_store.py::TestMergeErrors.test_merging_dict_and_list", "file_path": "tests/test_error_store.py", "class_name": "TestMergeErrors", "func_name": "test_merging_dict_and_list", "text": "文件路径: tests/test_error_store.py, 类名: TestMergeErrors\n    def test_merging_dict_and_list(self):\n        assert {\"_schema\": [\"error2\"], \"field1\": \"error1\"} == merge_errors(\n            {\"field1\": \"error1\"}, [\"error2\"]\n        )\n", "tokens": ["tests", "test_error_store", "py", "testmergeerrors", "def", "test_merging_dict_and_list", "self", "assert", "_schema", "error2", "field1", "error1", "merge_errors", "field1", "error1", "error2"], "doc_len": 16}
{"doc_id": "tests/test_error_store.py::TestMergeErrors.test_merging_dict_and_dict", "file_path": "tests/test_error_store.py", "class_name": "TestMergeErrors", "func_name": "test_merging_dict_and_dict", "text": "文件路径: tests/test_error_store.py, 类名: TestMergeErrors\n    def test_merging_dict_and_dict(self):\n        assert {\n            \"field1\": \"error1\",\n            \"field2\": [\"error2\", \"error3\"],\n            \"field3\": \"error4\",\n        } == merge_errors(\n            {\"field1\": \"error1\", \"field2\": \"error2\"},\n            {\"field2\": \"error3\", \"field3\": \"error4\"},\n        )\n", "tokens": ["tests", "test_error_store", "py", "testmergeerrors", "def", "test_merging_dict_and_dict", "self", "assert", "field1", "error1", "field2", "error2", "error3", "field3", "error4", "merge_errors", "field1", "error1", "field2", "error2", "field2", "error3", "field3", "error4"], "doc_len": 24}
{"doc_id": "tests/test_error_store.py::TestMergeErrors.test_deep_merging_dicts", "file_path": "tests/test_error_store.py", "class_name": "TestMergeErrors", "func_name": "test_deep_merging_dicts", "text": "文件路径: tests/test_error_store.py, 类名: TestMergeErrors\n    def test_deep_merging_dicts(self):\n        assert {\"field1\": {\"field2\": [\"error1\", \"error2\"]}} == merge_errors(\n            {\"field1\": {\"field2\": \"error1\"}}, {\"field1\": {\"field2\": \"error2\"}}\n        )\n", "tokens": ["tests", "test_error_store", "py", "testmergeerrors", "def", "test_deep_merging_dicts", "self", "assert", "field1", "field2", "error1", "error2", "merge_errors", "field1", "field2", "error1", "field1", "field2", "error2"], "doc_len": 19}
{"doc_id": "tests/test_exceptions.py::TestValidationError.test_stores_message_in_list", "file_path": "tests/test_exceptions.py", "class_name": "TestValidationError", "func_name": "test_stores_message_in_list", "text": "文件路径: tests/test_exceptions.py, 类名: TestValidationError\n    def test_stores_message_in_list(self):\n        err = ValidationError(\"foo\")\n        assert err.messages == [\"foo\"]\n", "tokens": ["tests", "test_exceptions", "py", "testvalidationerror", "def", "test_stores_message_in_list", "self", "err", "validationerror", "foo", "assert", "err", "messages", "foo"], "doc_len": 14}
{"doc_id": "tests/test_exceptions.py::TestValidationError.test_can_pass_list_of_messages", "file_path": "tests/test_exceptions.py", "class_name": "TestValidationError", "func_name": "test_can_pass_list_of_messages", "text": "文件路径: tests/test_exceptions.py, 类名: TestValidationError\n    def test_can_pass_list_of_messages(self):\n        err = ValidationError([\"foo\", \"bar\"])\n        assert err.messages == [\"foo\", \"bar\"]\n", "tokens": ["tests", "test_exceptions", "py", "testvalidationerror", "def", "test_can_pass_list_of_messages", "self", "err", "validationerror", "foo", "bar", "assert", "err", "messages", "foo", "bar"], "doc_len": 16}
{"doc_id": "tests/test_exceptions.py::TestValidationError.test_stores_dictionaries", "file_path": "tests/test_exceptions.py", "class_name": "TestValidationError", "func_name": "test_stores_dictionaries", "text": "文件路径: tests/test_exceptions.py, 类名: TestValidationError\n    def test_stores_dictionaries(self):\n        messages = {\"user\": {\"email\": [\"email is invalid\"]}}\n        err = ValidationError(messages)\n        assert err.messages == messages\n", "tokens": ["tests", "test_exceptions", "py", "testvalidationerror", "def", "test_stores_dictionaries", "self", "messages", "user", "email", "email", "is", "invalid", "err", "validationerror", "messages", "assert", "err", "messages", "messages"], "doc_len": 20}
{"doc_id": "tests/test_exceptions.py::TestValidationError.test_can_store_field_name", "file_path": "tests/test_exceptions.py", "class_name": "TestValidationError", "func_name": "test_can_store_field_name", "text": "文件路径: tests/test_exceptions.py, 类名: TestValidationError\n    def test_can_store_field_name(self):\n        err = ValidationError(\"invalid email\", field_name=\"email\")\n        assert err.field_name == \"email\"\n", "tokens": ["tests", "test_exceptions", "py", "testvalidationerror", "def", "test_can_store_field_name", "self", "err", "validationerror", "invalid", "email", "field_name", "email", "assert", "err", "field_name", "email"], "doc_len": 17}
{"doc_id": "tests/test_exceptions.py::TestValidationError.test_str", "file_path": "tests/test_exceptions.py", "class_name": "TestValidationError", "func_name": "test_str", "text": "文件路径: tests/test_exceptions.py, 类名: TestValidationError\n    def test_str(self):\n        err = ValidationError(\"invalid email\")\n        assert str(err) == \"invalid email\"\n\n        err2 = ValidationError(\"invalid email\", \"email\")\n        assert str(err2) == \"invalid email\"\n", "tokens": ["tests", "test_exceptions", "py", "testvalidationerror", "def", "test_str", "self", "err", "validationerror", "invalid", "email", "assert", "str", "err", "invalid", "email", "err2", "validationerror", "invalid", "email", "email", "assert", "str", "err2", "invalid", "email"], "doc_len": 26}
{"doc_id": "tests/test_fields.py::test_field_aliases", "file_path": "tests/test_fields.py", "class_name": null, "func_name": "test_field_aliases", "text": "文件路径: tests/test_fields.py\ndef test_field_aliases(alias, field):\n    assert alias is field\n", "tokens": ["tests", "test_fields", "py", "def", "test_field_aliases", "alias", "field", "assert", "alias", "is", "field"], "doc_len": 11}
{"doc_id": "tests/test_fields.py::TestField.test_repr", "file_path": "tests/test_fields.py", "class_name": "TestField", "func_name": "test_repr", "text": "文件路径: tests/test_fields.py, 类名: TestField\n    def test_repr(self):\n        default = \"œ∑´\"\n        field = fields.Field(default=default, attribute=None)\n        assert repr(field) == (\n            \"<fields.Field(default={0!r}, attribute=None, \"\n            \"validate=None, required=False, \"\n            \"load_only=False, dump_only=False, \"\n            \"missing={missing}, allow_none=False, \"\n            \"error_messages={error_messages})>\".format(\n                default, missing=missing, error_messages=field.error_messages\n            )\n        )\n        int_field = fields.Integer(validate=lambda x: True)\n        assert \"<fields.Integer\" in repr(int_field)\n", "tokens": ["tests", "test_fields", "py", "testfield", "def", "test_repr", "self", "default", "field", "fields", "field", "default", "default", "attribute", "none", "assert", "repr", "field", "fields", "field", "default", "0", "r", "attribute", "none", "validate", "none", "required", "false", "load_only", "false", "dump_only", "false", "missing", "missing", "allow_none", "false", "error_messages", "error_messages", "format", "default", "missing", "missing", "error_messages", "field", "error_messages", "int_field", "fields", "integer", "validate", "lambda", "x", "true", "assert", "fields", "integer", "in", "repr", "int_field"], "doc_len": 59}
{"doc_id": "tests/test_fields.py::TestField.test_error_raised_if_uncallable_validator_passed", "file_path": "tests/test_fields.py", "class_name": "TestField", "func_name": "test_error_raised_if_uncallable_validator_passed", "text": "文件路径: tests/test_fields.py, 类名: TestField\n    def test_error_raised_if_uncallable_validator_passed(self):\n        with pytest.raises(ValueError, match=\"must be a callable\"):\n            fields.Field(validate=\"notcallable\")\n", "tokens": ["tests", "test_fields", "py", "testfield", "def", "test_error_raised_if_uncallable_validator_passed", "self", "with", "pytest", "raises", "valueerror", "match", "must", "be", "a", "callable", "fields", "field", "validate", "notcallable"], "doc_len": 20}
{"doc_id": "tests/test_fields.py::TestField.test_error_raised_if_missing_is_set_on_required_field", "file_path": "tests/test_fields.py", "class_name": "TestField", "func_name": "test_error_raised_if_missing_is_set_on_required_field", "text": "文件路径: tests/test_fields.py, 类名: TestField\n    def test_error_raised_if_missing_is_set_on_required_field(self):\n        with pytest.raises(\n            ValueError, match=\"'missing' must not be set for required fields\"\n        ):\n            fields.Field(required=True, missing=42)\n", "tokens": ["tests", "test_fields", "py", "testfield", "def", "test_error_raised_if_missing_is_set_on_required_field", "self", "with", "pytest", "raises", "valueerror", "match", "missing", "must", "not", "be", "set", "for", "required", "fields", "fields", "field", "required", "true", "missing", "42"], "doc_len": 26}
{"doc_id": "tests/test_fields.py::TestField.test_custom_field_receives_attr_and_obj", "file_path": "tests/test_fields.py", "class_name": "TestField", "func_name": "test_custom_field_receives_attr_and_obj", "text": "文件路径: tests/test_fields.py, 类名: TestField\n    def test_custom_field_receives_attr_and_obj(self):\n        class MyField(fields.Field):\n            def _deserialize(self, val, attr, data, **kwargs):\n                assert attr == \"name\"\n                assert data[\"foo\"] == 42\n                return val\n\n        class MySchema(Schema):\n            name = MyField()\n\n        result = MySchema(unknown=EXCLUDE).load({\"name\": \"Monty\", \"foo\": 42})\n        assert result == {\"name\": \"Monty\"}\n", "tokens": ["tests", "test_fields", "py", "testfield", "def", "test_custom_field_receives_attr_and_obj", "self", "class", "myfield", "fields", "field", "def", "_deserialize", "self", "val", "attr", "data", "kwargs", "assert", "attr", "name", "assert", "data", "foo", "42", "return", "val", "class", "myschema", "schema", "name", "myfield", "result", "myschema", "unknown", "exclude", "load", "name", "monty", "foo", "42", "assert", "result", "name", "monty"], "doc_len": 45}
{"doc_id": "tests/test_fields.py::TestField.test_custom_field_receives_data_key_if_set", "file_path": "tests/test_fields.py", "class_name": "TestField", "func_name": "test_custom_field_receives_data_key_if_set", "text": "文件路径: tests/test_fields.py, 类名: TestField\n    def test_custom_field_receives_data_key_if_set(self):\n        class MyField(fields.Field):\n            def _deserialize(self, val, attr, data, **kwargs):\n                assert attr == \"name\"\n                assert data[\"foo\"] == 42\n                return val\n\n        class MySchema(Schema):\n            Name = MyField(data_key=\"name\")\n\n        result = MySchema(unknown=EXCLUDE).load({\"name\": \"Monty\", \"foo\": 42})\n        assert result == {\"Name\": \"Monty\"}\n", "tokens": ["tests", "test_fields", "py", "testfield", "def", "test_custom_field_receives_data_key_if_set", "self", "class", "myfield", "fields", "field", "def", "_deserialize", "self", "val", "attr", "data", "kwargs", "assert", "attr", "name", "assert", "data", "foo", "42", "return", "val", "class", "myschema", "schema", "name", "myfield", "data_key", "name", "result", "myschema", "unknown", "exclude", "load", "name", "monty", "foo", "42", "assert", "result", "name", "monty"], "doc_len": 47}
{"doc_id": "tests/test_fields.py::TestField.test_custom_field_follows_data_key_if_set", "file_path": "tests/test_fields.py", "class_name": "TestField", "func_name": "test_custom_field_follows_data_key_if_set", "text": "文件路径: tests/test_fields.py, 类名: TestField\n    def test_custom_field_follows_data_key_if_set(self):\n        class MyField(fields.Field):\n            def _serialize(self, val, attr, data):\n                assert attr == \"name\"\n                assert data[\"foo\"] == 42\n                return val\n\n        class MySchema(Schema):\n            name = MyField(data_key=\"_NaMe\")\n\n        result = MySchema().dump({\"name\": \"Monty\", \"foo\": 42})\n        assert result == {\"_NaMe\": \"Monty\"}\n", "tokens": ["tests", "test_fields", "py", "testfield", "def", "test_custom_field_follows_data_key_if_set", "self", "class", "myfield", "fields", "field", "def", "_serialize", "self", "val", "attr", "data", "assert", "attr", "name", "assert", "data", "foo", "42", "return", "val", "class", "myschema", "schema", "name", "myfield", "data_key", "_name", "result", "myschema", "dump", "name", "monty", "foo", "42", "assert", "result", "_name", "monty"], "doc_len": 44}
{"doc_id": "tests/test_fields.py::TestParentAndName.schema", "file_path": "tests/test_fields.py", "class_name": "TestParentAndName", "func_name": "schema", "text": "文件路径: tests/test_fields.py, 类名: TestParentAndName\n    def schema(self):\n        return self.MySchema()\n", "tokens": ["tests", "test_fields", "py", "testparentandname", "def", "schema", "self", "return", "self", "myschema"], "doc_len": 10}
{"doc_id": "tests/test_fields.py::TestParentAndName.test_simple_field_parent_and_name", "file_path": "tests/test_fields.py", "class_name": "TestParentAndName", "func_name": "test_simple_field_parent_and_name", "text": "文件路径: tests/test_fields.py, 类名: TestParentAndName\n    def test_simple_field_parent_and_name(self, schema):\n        assert schema.fields[\"foo\"].parent == schema\n        assert schema.fields[\"foo\"].name == \"foo\"\n        assert schema.fields[\"bar\"].parent == schema\n        assert schema.fields[\"bar\"].name == \"bar\"\n", "tokens": ["tests", "test_fields", "py", "testparentandname", "def", "test_simple_field_parent_and_name", "self", "schema", "assert", "schema", "fields", "foo", "parent", "schema", "assert", "schema", "fields", "foo", "name", "foo", "assert", "schema", "fields", "bar", "parent", "schema", "assert", "schema", "fields", "bar", "name", "bar"], "doc_len": 32}
{"doc_id": "tests/test_fields.py::TestParentAndName.test_unbound_field_root_returns_none", "file_path": "tests/test_fields.py", "class_name": "TestParentAndName", "func_name": "test_unbound_field_root_returns_none", "text": "文件路径: tests/test_fields.py, 类名: TestParentAndName\n    def test_unbound_field_root_returns_none(self):\n        field = fields.Str()\n        assert field.root is None\n\n        inner_field = fields.Nested(self.MySchema())\n        outer_field = fields.List(inner_field)\n\n        assert outer_field.root is None\n        assert inner_field.root is None\n", "tokens": ["tests", "test_fields", "py", "testparentandname", "def", "test_unbound_field_root_returns_none", "self", "field", "fields", "str", "assert", "field", "root", "is", "none", "inner_field", "fields", "nested", "self", "myschema", "outer_field", "fields", "list", "inner_field", "assert", "outer_field", "root", "is", "none", "assert", "inner_field", "root", "is", "none"], "doc_len": 34}
{"doc_id": "tests/test_fields.py::TestParentAndName.test_list_field_inner_parent_and_name", "file_path": "tests/test_fields.py", "class_name": "TestParentAndName", "func_name": "test_list_field_inner_parent_and_name", "text": "文件路径: tests/test_fields.py, 类名: TestParentAndName\n    def test_list_field_inner_parent_and_name(self, schema):\n        assert schema.fields[\"bar\"].inner.parent == schema.fields[\"bar\"]\n        assert schema.fields[\"bar\"].inner.name == \"bar\"\n", "tokens": ["tests", "test_fields", "py", "testparentandname", "def", "test_list_field_inner_parent_and_name", "self", "schema", "assert", "schema", "fields", "bar", "inner", "parent", "schema", "fields", "bar", "assert", "schema", "fields", "bar", "inner", "name", "bar"], "doc_len": 24}
{"doc_id": "tests/test_fields.py::TestParentAndName.test_tuple_field_inner_parent_and_name", "file_path": "tests/test_fields.py", "class_name": "TestParentAndName", "func_name": "test_tuple_field_inner_parent_and_name", "text": "文件路径: tests/test_fields.py, 类名: TestParentAndName\n    def test_tuple_field_inner_parent_and_name(self, schema):\n        for field in schema.fields[\"baz\"].tuple_fields:\n            assert field.parent == schema.fields[\"baz\"]\n            assert field.name == \"baz\"\n", "tokens": ["tests", "test_fields", "py", "testparentandname", "def", "test_tuple_field_inner_parent_and_name", "self", "schema", "for", "field", "in", "schema", "fields", "baz", "tuple_fields", "assert", "field", "parent", "schema", "fields", "baz", "assert", "field", "name", "baz"], "doc_len": 25}
{"doc_id": "tests/test_fields.py::TestParentAndName.test_mapping_field_inner_parent_and_name", "file_path": "tests/test_fields.py", "class_name": "TestParentAndName", "func_name": "test_mapping_field_inner_parent_and_name", "text": "文件路径: tests/test_fields.py, 类名: TestParentAndName\n    def test_mapping_field_inner_parent_and_name(self, schema):\n        assert schema.fields[\"bax\"].value_field.parent == schema.fields[\"bax\"]\n        assert schema.fields[\"bax\"].value_field.name == \"bax\"\n        assert schema.fields[\"bax\"].key_field.parent == schema.fields[\"bax\"]\n        assert schema.fields[\"bax\"].key_field.name == \"bax\"\n", "tokens": ["tests", "test_fields", "py", "testparentandname", "def", "test_mapping_field_inner_parent_and_name", "self", "schema", "assert", "schema", "fields", "bax", "value_field", "parent", "schema", "fields", "bax", "assert", "schema", "fields", "bax", "value_field", "name", "bax", "assert", "schema", "fields", "bax", "key_field", "parent", "schema", "fields", "bax", "assert", "schema", "fields", "bax", "key_field", "name", "bax"], "doc_len": 40}
{"doc_id": "tests/test_fields.py::TestParentAndName.test_simple_field_root", "file_path": "tests/test_fields.py", "class_name": "TestParentAndName", "func_name": "test_simple_field_root", "text": "文件路径: tests/test_fields.py, 类名: TestParentAndName\n    def test_simple_field_root(self, schema):\n        assert schema.fields[\"foo\"].root == schema\n        assert schema.fields[\"bar\"].root == schema\n", "tokens": ["tests", "test_fields", "py", "testparentandname", "def", "test_simple_field_root", "self", "schema", "assert", "schema", "fields", "foo", "root", "schema", "assert", "schema", "fields", "bar", "root", "schema"], "doc_len": 20}
{"doc_id": "tests/test_fields.py::TestParentAndName.test_list_field_inner_root", "file_path": "tests/test_fields.py", "class_name": "TestParentAndName", "func_name": "test_list_field_inner_root", "text": "文件路径: tests/test_fields.py, 类名: TestParentAndName\n    def test_list_field_inner_root(self, schema):\n        assert schema.fields[\"bar\"].inner.root == schema\n", "tokens": ["tests", "test_fields", "py", "testparentandname", "def", "test_list_field_inner_root", "self", "schema", "assert", "schema", "fields", "bar", "inner", "root", "schema"], "doc_len": 15}
{"doc_id": "tests/test_fields.py::TestParentAndName.test_tuple_field_inner_root", "file_path": "tests/test_fields.py", "class_name": "TestParentAndName", "func_name": "test_tuple_field_inner_root", "text": "文件路径: tests/test_fields.py, 类名: TestParentAndName\n    def test_tuple_field_inner_root(self, schema):\n        for field in schema.fields[\"baz\"].tuple_fields:\n            assert field.root == schema\n", "tokens": ["tests", "test_fields", "py", "testparentandname", "def", "test_tuple_field_inner_root", "self", "schema", "for", "field", "in", "schema", "fields", "baz", "tuple_fields", "assert", "field", "root", "schema"], "doc_len": 19}
{"doc_id": "tests/test_fields.py::TestParentAndName.test_list_root_inheritance", "file_path": "tests/test_fields.py", "class_name": "TestParentAndName", "func_name": "test_list_root_inheritance", "text": "文件路径: tests/test_fields.py, 类名: TestParentAndName\n    def test_list_root_inheritance(self, schema):\n        class OtherSchema(TestParentAndName.MySchema):\n            pass\n\n        schema2 = OtherSchema()\n        assert schema.fields[\"bar\"].inner.root == schema\n        assert schema2.fields[\"bar\"].inner.root == schema2\n", "tokens": ["tests", "test_fields", "py", "testparentandname", "def", "test_list_root_inheritance", "self", "schema", "class", "otherschema", "testparentandname", "myschema", "pass", "schema2", "otherschema", "assert", "schema", "fields", "bar", "inner", "root", "schema", "assert", "schema2", "fields", "bar", "inner", "root", "schema2"], "doc_len": 29}
{"doc_id": "tests/test_fields.py::TestParentAndName.test_dict_root_inheritance", "file_path": "tests/test_fields.py", "class_name": "TestParentAndName", "func_name": "test_dict_root_inheritance", "text": "文件路径: tests/test_fields.py, 类名: TestParentAndName\n    def test_dict_root_inheritance(self):\n        class MySchema(Schema):\n            foo = fields.Dict(keys=fields.Str(), values=fields.Int())\n\n        class OtherSchema(MySchema):\n            pass\n\n        schema = MySchema()\n        schema2 = OtherSchema()\n        assert schema.fields[\"foo\"].key_field.root == schema\n        assert schema.fields[\"foo\"].value_field.root == schema\n        assert schema2.fields[\"foo\"].key_field.root == schema2\n        assert schema2.fields[\"foo\"].value_field.root == schema2\n", "tokens": ["tests", "test_fields", "py", "testparentandname", "def", "test_dict_root_inheritance", "self", "class", "myschema", "schema", "foo", "fields", "dict", "keys", "fields", "str", "values", "fields", "int", "class", "otherschema", "myschema", "pass", "schema", "myschema", "schema2", "otherschema", "assert", "schema", "fields", "foo", "key_field", "root", "schema", "assert", "schema", "fields", "foo", "value_field", "root", "schema", "assert", "schema2", "fields", "foo", "key_field", "root", "schema2", "assert", "schema2", "fields", "foo", "value_field", "root", "schema2"], "doc_len": 55}
{"doc_id": "tests/test_fields.py::TestMetadata.test_extra_metadata_may_be_added_to_field", "file_path": "tests/test_fields.py", "class_name": "TestMetadata", "func_name": "test_extra_metadata_may_be_added_to_field", "text": "文件路径: tests/test_fields.py, 类名: TestMetadata\n    def test_extra_metadata_may_be_added_to_field(self, FieldClass):  # noqa\n        field = FieldClass(description=\"Just a normal field.\")\n        assert field.metadata[\"description\"] == \"Just a normal field.\"\n        field = FieldClass(\n            required=True,\n            default=None,\n            validate=lambda v: True,\n            description=\"foo\",\n            widget=\"select\",\n        )\n        assert field.metadata == {\"description\": \"foo\", \"widget\": \"select\"}\n", "tokens": ["tests", "test_fields", "py", "testmetadata", "def", "test_extra_metadata_may_be_added_to_field", "self", "fieldclass", "noqa", "field", "fieldclass", "description", "just", "a", "normal", "field", "assert", "field", "metadata", "description", "just", "a", "normal", "field", "field", "fieldclass", "required", "true", "default", "none", "validate", "lambda", "v", "true", "description", "foo", "widget", "select", "assert", "field", "metadata", "description", "foo", "widget", "select"], "doc_len": 45}
{"doc_id": "tests/test_fields.py::TestErrorMessages.test_default_error_messages_get_merged_with_parent_error_messages_cstm_msg", "file_path": "tests/test_fields.py", "class_name": "TestErrorMessages", "func_name": "test_default_error_messages_get_merged_with_parent_error_messages_cstm_msg", "text": "文件路径: tests/test_fields.py, 类名: TestErrorMessages\n    def test_default_error_messages_get_merged_with_parent_error_messages_cstm_msg(\n        self\n    ):\n        field = self.MyField()\n        assert field.error_messages[\"custom\"] == \"Custom error message.\"\n        assert \"required\" in field.error_messages\n", "tokens": ["tests", "test_fields", "py", "testerrormessages", "def", "test_default_error_messages_get_merged_with_parent_error_messages_cstm_msg", "self", "field", "self", "myfield", "assert", "field", "error_messages", "custom", "custom", "error", "message", "assert", "required", "in", "field", "error_messages"], "doc_len": 22}
{"doc_id": "tests/test_fields.py::TestErrorMessages.test_default_error_messages_get_merged_with_parent_error_messages", "file_path": "tests/test_fields.py", "class_name": "TestErrorMessages", "func_name": "test_default_error_messages_get_merged_with_parent_error_messages", "text": "文件路径: tests/test_fields.py, 类名: TestErrorMessages\n    def test_default_error_messages_get_merged_with_parent_error_messages(self):\n        field = self.MyField(error_messages={\"passed\": \"Passed error message\"})\n        assert field.error_messages[\"passed\"] == \"Passed error message\"\n", "tokens": ["tests", "test_fields", "py", "testerrormessages", "def", "test_default_error_messages_get_merged_with_parent_error_messages", "self", "field", "self", "myfield", "error_messages", "passed", "passed", "error", "message", "assert", "field", "error_messages", "passed", "passed", "error", "message"], "doc_len": 22}
{"doc_id": "tests/test_fields.py::TestErrorMessages.test_make_error", "file_path": "tests/test_fields.py", "class_name": "TestErrorMessages", "func_name": "test_make_error", "text": "文件路径: tests/test_fields.py, 类名: TestErrorMessages\n    def test_make_error(self, key, message):\n        field = self.MyField()\n\n        error = field.make_error(key)\n        assert error.args[0] == message\n", "tokens": ["tests", "test_fields", "py", "testerrormessages", "def", "test_make_error", "self", "key", "message", "field", "self", "myfield", "error", "field", "make_error", "key", "assert", "error", "args", "0", "message"], "doc_len": 21}
{"doc_id": "tests/test_fields.py::TestErrorMessages.test_fail", "file_path": "tests/test_fields.py", "class_name": "TestErrorMessages", "func_name": "test_fail", "text": "文件路径: tests/test_fields.py, 类名: TestErrorMessages\n    def test_fail(self, key, message):\n        field = self.MyField()\n\n        with pytest.warns(DeprecationWarning):\n            try:\n                field.fail(key)\n            except ValidationError as error:\n                assert error.args[0] == message\n", "tokens": ["tests", "test_fields", "py", "testerrormessages", "def", "test_fail", "self", "key", "message", "field", "self", "myfield", "with", "pytest", "warns", "deprecationwarning", "try", "field", "fail", "key", "except", "validationerror", "as", "error", "assert", "error", "args", "0", "message"], "doc_len": 29}
{"doc_id": "tests/test_fields.py::TestErrorMessages.test_make_error_key_doesnt_exist", "file_path": "tests/test_fields.py", "class_name": "TestErrorMessages", "func_name": "test_make_error_key_doesnt_exist", "text": "文件路径: tests/test_fields.py, 类名: TestErrorMessages\n    def test_make_error_key_doesnt_exist(self):\n        with pytest.raises(AssertionError) as excinfo:\n            self.MyField().make_error(\"doesntexist\")\n        assert \"doesntexist\" in excinfo.value.args[0]\n        assert \"MyField\" in excinfo.value.args[0]\n", "tokens": ["tests", "test_fields", "py", "testerrormessages", "def", "test_make_error_key_doesnt_exist", "self", "with", "pytest", "raises", "assertionerror", "as", "excinfo", "self", "myfield", "make_error", "doesntexist", "assert", "doesntexist", "in", "excinfo", "value", "args", "0", "assert", "myfield", "in", "excinfo", "value", "args", "0"], "doc_len": 31}
{"doc_id": "tests/test_fields.py::TestNestedField.test_nested_only_and_exclude_as_string", "file_path": "tests/test_fields.py", "class_name": "TestNestedField", "func_name": "test_nested_only_and_exclude_as_string", "text": "文件路径: tests/test_fields.py, 类名: TestNestedField\n    def test_nested_only_and_exclude_as_string(self, param):\n        with pytest.raises(StringNotCollectionError):\n            fields.Nested(Schema, **{param: \"foo\"})\n", "tokens": ["tests", "test_fields", "py", "testnestedfield", "def", "test_nested_only_and_exclude_as_string", "self", "param", "with", "pytest", "raises", "stringnotcollectionerror", "fields", "nested", "schema", "param", "foo"], "doc_len": 17}
{"doc_id": "tests/test_fields.py::TestNestedField.test_nested_unknown_override", "file_path": "tests/test_fields.py", "class_name": "TestNestedField", "func_name": "test_nested_unknown_override", "text": "文件路径: tests/test_fields.py, 类名: TestNestedField\n    def test_nested_unknown_override(self, schema_unknown, field_unknown):\n        class NestedSchema(Schema):\n            class Meta:\n                unknown = schema_unknown\n\n        class MySchema(Schema):\n            nested = fields.Nested(NestedSchema, unknown=field_unknown)\n\n        if field_unknown == EXCLUDE or (\n            schema_unknown == EXCLUDE and not field_unknown\n        ):\n            assert MySchema().load({\"nested\": {\"x\": 1}}) == {\"nested\": {}}\n        elif field_unknown == INCLUDE or (\n            schema_unknown == INCLUDE and not field_unknown\n        ):\n            assert MySchema().load({\"nested\": {\"x\": 1}}) == {\"nested\": {\"x\": 1}}\n        elif field_unknown == RAISE or (schema_unknown == RAISE and not field_unknown):\n            with pytest.raises(ValidationError):\n                MySchema().load({\"nested\": {\"x\": 1}})\n", "tokens": ["tests", "test_fields", "py", "testnestedfield", "def", "test_nested_unknown_override", "self", "schema_unknown", "field_unknown", "class", "nestedschema", "schema", "class", "meta", "unknown", "schema_unknown", "class", "myschema", "schema", "nested", "fields", "nested", "nestedschema", "unknown", "field_unknown", "if", "field_unknown", "exclude", "or", "schema_unknown", "exclude", "and", "not", "field_unknown", "assert", "myschema", "load", "nested", "x", "1", "nested", "elif", "field_unknown", "include", "or", "schema_unknown", "include", "and", "not", "field_unknown", "assert", "myschema", "load", "nested", "x", "1", "nested", "x", "1", "elif", "field_unknown", "raise", "or", "schema_unknown", "raise", "and", "not", "field_unknown", "with", "pytest", "raises", "validationerror", "myschema", "load", "nested", "x", "1"], "doc_len": 77}
{"doc_id": "tests/test_fields.py::TestListNested.test_list_nested_only_exclude_dump_only_load_only_propagated_to_nested", "file_path": "tests/test_fields.py", "class_name": "TestListNested", "func_name": "test_list_nested_only_exclude_dump_only_load_only_propagated_to_nested", "text": "文件路径: tests/test_fields.py, 类名: TestListNested\n    def test_list_nested_only_exclude_dump_only_load_only_propagated_to_nested(\n        self, param\n    ):\n        class Child(Schema):\n            name = fields.String()\n            age = fields.Integer()\n\n        class Family(Schema):\n            children = fields.List(fields.Nested(Child))\n\n        schema = Family(**{param: [\"children.name\"]})\n        assert getattr(schema.fields[\"children\"].inner.schema, param) == {\"name\"}\n", "tokens": ["tests", "test_fields", "py", "testlistnested", "def", "test_list_nested_only_exclude_dump_only_load_only_propagated_to_nested", "self", "param", "class", "child", "schema", "name", "fields", "string", "age", "fields", "integer", "class", "family", "schema", "children", "fields", "list", "fields", "nested", "child", "schema", "family", "param", "children", "name", "assert", "getattr", "schema", "fields", "children", "inner", "schema", "param", "name"], "doc_len": 40}
{"doc_id": "tests/test_fields.py::TestListNested.test_list_nested_only_and_exclude_merged_with_nested", "file_path": "tests/test_fields.py", "class_name": "TestListNested", "func_name": "test_list_nested_only_and_exclude_merged_with_nested", "text": "文件路径: tests/test_fields.py, 类名: TestListNested\n    def test_list_nested_only_and_exclude_merged_with_nested(self, param, expected):\n        class Child(Schema):\n            name = fields.String()\n            surname = fields.String()\n            age = fields.Integer()\n\n        class Family(Schema):\n            children = fields.List(fields.Nested(Child, **{param: (\"name\", \"surname\")}))\n\n        schema = Family(**{param: [\"children.name\", \"children.age\"]})\n        assert getattr(schema.fields[\"children\"].inner, param) == expected\n", "tokens": ["tests", "test_fields", "py", "testlistnested", "def", "test_list_nested_only_and_exclude_merged_with_nested", "self", "param", "expected", "class", "child", "schema", "name", "fields", "string", "surname", "fields", "string", "age", "fields", "integer", "class", "family", "schema", "children", "fields", "list", "fields", "nested", "child", "param", "name", "surname", "schema", "family", "param", "children", "name", "children", "age", "assert", "getattr", "schema", "fields", "children", "inner", "param", "expected"], "doc_len": 48}
{"doc_id": "tests/test_fields.py::TestListNested.test_list_nested_partial_propagated_to_nested", "file_path": "tests/test_fields.py", "class_name": "TestListNested", "func_name": "test_list_nested_partial_propagated_to_nested", "text": "文件路径: tests/test_fields.py, 类名: TestListNested\n    def test_list_nested_partial_propagated_to_nested(self):\n        class Child(Schema):\n            name = fields.String(required=True)\n            age = fields.Integer(required=True)\n\n        class Family(Schema):\n            children = fields.List(fields.Nested(Child))\n\n        payload = {\"children\": [{\"name\": \"Lucette\"}]}\n\n        for val in (True, (\"children.age\",)):\n            result = Family(partial=val).load(payload)\n            assert result[\"children\"][0][\"name\"] == \"Lucette\"\n            result = Family().load(payload, partial=val)\n            assert result[\"children\"][0][\"name\"] == \"Lucette\"\n\n        for val in (False, (\"children.name\",)):\n            with pytest.raises(ValidationError) as excinfo:\n                result = Family(partial=val).load(payload)\n            assert excinfo.value.args[0] == {\n                \"children\": {0: {\"age\": [\"Missing data for required field.\"]}}\n            }\n            with pytest.raises(ValidationError) as excinfo:\n                result = Family().load(payload, partial=val)\n            assert excinfo.value.args[0] == {\n                \"children\": {0: {\"age\": [\"Missing data for required field.\"]}}\n            }\n", "tokens": ["tests", "test_fields", "py", "testlistnested", "def", "test_list_nested_partial_propagated_to_nested", "self", "class", "child", "schema", "name", "fields", "string", "required", "true", "age", "fields", "integer", "required", "true", "class", "family", "schema", "children", "fields", "list", "fields", "nested", "child", "payload", "children", "name", "lucette", "for", "val", "in", "true", "children", "age", "result", "family", "partial", "val", "load", "payload", "assert", "result", "children", "0", "name", "lucette", "result", "family", "load", "payload", "partial", "val", "assert", "result", "children", "0", "name", "lucette", "for", "val", "in", "false", "children", "name", "with", "pytest", "raises", "validationerror", "as", "excinfo", "result", "family", "partial", "val", "load", "payload", "assert", "excinfo", "value", "args", "0", "children", "0", "age", "missing", "data", "for", "required", "field", "with", "pytest", "raises", "validationerror", "as", "excinfo", "result", "family", "load", "payload", "partial", "val", "assert", "excinfo", "value", "args", "0", "children", "0", "age", "missing", "data", "for", "required", "field"], "doc_len": 119}
{"doc_id": "tests/test_fields.py::TestTupleNested.test_tuple_nested_only_exclude_dump_only_load_only_propagated_to_nested", "file_path": "tests/test_fields.py", "class_name": "TestTupleNested", "func_name": "test_tuple_nested_only_exclude_dump_only_load_only_propagated_to_nested", "text": "文件路径: tests/test_fields.py, 类名: TestTupleNested\n    def test_tuple_nested_only_exclude_dump_only_load_only_propagated_to_nested(\n        self, param\n    ):\n        class Child(Schema):\n            name = fields.String()\n            age = fields.Integer()\n\n        class Family(Schema):\n            children = fields.Tuple((fields.Nested(Child), fields.Nested(Child)))\n\n        schema = Family(**{param: [\"children.name\"]})\n        assert getattr(schema.fields[\"children\"].tuple_fields[0].schema, param) == {\n            \"name\"\n        }\n        assert getattr(schema.fields[\"children\"].tuple_fields[1].schema, param) == {\n            \"name\"\n        }\n", "tokens": ["tests", "test_fields", "py", "testtuplenested", "def", "test_tuple_nested_only_exclude_dump_only_load_only_propagated_to_nested", "self", "param", "class", "child", "schema", "name", "fields", "string", "age", "fields", "integer", "class", "family", "schema", "children", "fields", "tuple", "fields", "nested", "child", "fields", "nested", "child", "schema", "family", "param", "children", "name", "assert", "getattr", "schema", "fields", "children", "tuple_fields", "0", "schema", "param", "name", "assert", "getattr", "schema", "fields", "children", "tuple_fields", "1", "schema", "param", "name"], "doc_len": 54}
{"doc_id": "tests/test_fields.py::TestTupleNested.test_tuple_nested_partial_propagated_to_nested", "file_path": "tests/test_fields.py", "class_name": "TestTupleNested", "func_name": "test_tuple_nested_partial_propagated_to_nested", "text": "文件路径: tests/test_fields.py, 类名: TestTupleNested\n    def test_tuple_nested_partial_propagated_to_nested(self):\n        class Child(Schema):\n            name = fields.String(required=True)\n            age = fields.Integer(required=True)\n\n        class Family(Schema):\n            children = fields.Tuple((fields.Nested(Child),))\n\n        payload = {\"children\": [{\"name\": \"Lucette\"}]}\n\n        for val in (True, (\"children.age\",)):\n            result = Family(partial=val).load(payload)\n            assert result[\"children\"][0][\"name\"] == \"Lucette\"\n            result = Family().load(payload, partial=val)\n            assert result[\"children\"][0][\"name\"] == \"Lucette\"\n\n        for val in (False, (\"children.name\",)):\n            with pytest.raises(ValidationError) as excinfo:\n                result = Family(partial=val).load(payload)\n            assert excinfo.value.args[0] == {\n                \"children\": {0: {\"age\": [\"Missing data for required field.\"]}}\n            }\n            with pytest.raises(ValidationError) as excinfo:\n                result = Family().load(payload, partial=val)\n            assert excinfo.value.args[0] == {\n                \"children\": {0: {\"age\": [\"Missing data for required field.\"]}}\n            }\n", "tokens": ["tests", "test_fields", "py", "testtuplenested", "def", "test_tuple_nested_partial_propagated_to_nested", "self", "class", "child", "schema", "name", "fields", "string", "required", "true", "age", "fields", "integer", "required", "true", "class", "family", "schema", "children", "fields", "tuple", "fields", "nested", "child", "payload", "children", "name", "lucette", "for", "val", "in", "true", "children", "age", "result", "family", "partial", "val", "load", "payload", "assert", "result", "children", "0", "name", "lucette", "result", "family", "load", "payload", "partial", "val", "assert", "result", "children", "0", "name", "lucette", "for", "val", "in", "false", "children", "name", "with", "pytest", "raises", "validationerror", "as", "excinfo", "result", "family", "partial", "val", "load", "payload", "assert", "excinfo", "value", "args", "0", "children", "0", "age", "missing", "data", "for", "required", "field", "with", "pytest", "raises", "validationerror", "as", "excinfo", "result", "family", "load", "payload", "partial", "val", "assert", "excinfo", "value", "args", "0", "children", "0", "age", "missing", "data", "for", "required", "field"], "doc_len": 119}
{"doc_id": "tests/test_fields.py::TestDictNested.test_dict_nested_only_exclude_dump_only_load_only_propagated_to_nested", "file_path": "tests/test_fields.py", "class_name": "TestDictNested", "func_name": "test_dict_nested_only_exclude_dump_only_load_only_propagated_to_nested", "text": "文件路径: tests/test_fields.py, 类名: TestDictNested\n    def test_dict_nested_only_exclude_dump_only_load_only_propagated_to_nested(\n        self, param\n    ):\n        class Child(Schema):\n            name = fields.String()\n            age = fields.Integer()\n\n        class Family(Schema):\n            children = fields.Dict(values=fields.Nested(Child))\n\n        schema = Family(**{param: [\"children.name\"]})\n        assert getattr(schema.fields[\"children\"].value_field.schema, param) == {\"name\"}\n", "tokens": ["tests", "test_fields", "py", "testdictnested", "def", "test_dict_nested_only_exclude_dump_only_load_only_propagated_to_nested", "self", "param", "class", "child", "schema", "name", "fields", "string", "age", "fields", "integer", "class", "family", "schema", "children", "fields", "dict", "values", "fields", "nested", "child", "schema", "family", "param", "children", "name", "assert", "getattr", "schema", "fields", "children", "value_field", "schema", "param", "name"], "doc_len": 41}
{"doc_id": "tests/test_fields.py::TestDictNested.test_dict_nested_only_and_exclude_merged_with_nested", "file_path": "tests/test_fields.py", "class_name": "TestDictNested", "func_name": "test_dict_nested_only_and_exclude_merged_with_nested", "text": "文件路径: tests/test_fields.py, 类名: TestDictNested\n    def test_dict_nested_only_and_exclude_merged_with_nested(self, param, expected):\n        class Child(Schema):\n            name = fields.String()\n            surname = fields.String()\n            age = fields.Integer()\n\n        class Family(Schema):\n            children = fields.Dict(\n                values=fields.Nested(Child, **{param: (\"name\", \"surname\")})\n            )\n\n        schema = Family(**{param: [\"children.name\", \"children.age\"]})\n        assert getattr(schema.fields[\"children\"].value_field, param) == expected\n", "tokens": ["tests", "test_fields", "py", "testdictnested", "def", "test_dict_nested_only_and_exclude_merged_with_nested", "self", "param", "expected", "class", "child", "schema", "name", "fields", "string", "surname", "fields", "string", "age", "fields", "integer", "class", "family", "schema", "children", "fields", "dict", "values", "fields", "nested", "child", "param", "name", "surname", "schema", "family", "param", "children", "name", "children", "age", "assert", "getattr", "schema", "fields", "children", "value_field", "param", "expected"], "doc_len": 49}
{"doc_id": "tests/test_fields.py::TestDictNested.test_dict_nested_partial_propagated_to_nested", "file_path": "tests/test_fields.py", "class_name": "TestDictNested", "func_name": "test_dict_nested_partial_propagated_to_nested", "text": "文件路径: tests/test_fields.py, 类名: TestDictNested\n    def test_dict_nested_partial_propagated_to_nested(self):\n        class Child(Schema):\n            name = fields.String(required=True)\n            age = fields.Integer(required=True)\n\n        class Family(Schema):\n            children = fields.Dict(values=fields.Nested(Child))\n\n        payload = {\"children\": {\"daughter\": {\"name\": \"Lucette\"}}}\n\n        for val in (True, (\"children.age\",)):\n            result = Family(partial=val).load(payload)\n            assert result[\"children\"][\"daughter\"][\"name\"] == \"Lucette\"\n            result = Family().load(payload, partial=val)\n            assert result[\"children\"][\"daughter\"][\"name\"] == \"Lucette\"\n\n        for val in (False, (\"children.name\",)):\n            with pytest.raises(ValidationError) as excinfo:\n                result = Family(partial=val).load(payload)\n            assert excinfo.value.args[0] == {\n                \"children\": {\n                    \"daughter\": {\"value\": {\"age\": [\"Missing data for required field.\"]}}\n                }\n            }\n            with pytest.raises(ValidationError) as excinfo:\n                result = Family().load(payload, partial=val)\n            assert excinfo.value.args[0] == {\n                \"children\": {\n                    \"daughter\": {\"value\": {\"age\": [\"Missing data for required field.\"]}}\n                }\n            }\n", "tokens": ["tests", "test_fields", "py", "testdictnested", "def", "test_dict_nested_partial_propagated_to_nested", "self", "class", "child", "schema", "name", "fields", "string", "required", "true", "age", "fields", "integer", "required", "true", "class", "family", "schema", "children", "fields", "dict", "values", "fields", "nested", "child", "payload", "children", "daughter", "name", "lucette", "for", "val", "in", "true", "children", "age", "result", "family", "partial", "val", "load", "payload", "assert", "result", "children", "daughter", "name", "lucette", "result", "family", "load", "payload", "partial", "val", "assert", "result", "children", "daughter", "name", "lucette", "for", "val", "in", "false", "children", "name", "with", "pytest", "raises", "validationerror", "as", "excinfo", "result", "family", "partial", "val", "load", "payload", "assert", "excinfo", "value", "args", "0", "children", "daughter", "value", "age", "missing", "data", "for", "required", "field", "with", "pytest", "raises", "validationerror", "as", "excinfo", "result", "family", "load", "payload", "partial", "val", "assert", "excinfo", "value", "args", "0", "children", "daughter", "value", "age", "missing", "data", "for", "required", "field"], "doc_len": 123}
{"doc_id": "tests/test_options.py::TestUnordered.test_unordered_dump_returns_dict", "file_path": "tests/test_options.py", "class_name": "TestUnordered", "func_name": "test_unordered_dump_returns_dict", "text": "文件路径: tests/test_options.py, 类名: TestUnordered\n    def test_unordered_dump_returns_dict(self):\n        schema = self.UnorderedSchema()\n        u = User(\"steve\", email=\"steve@steve.steve\")\n        result = schema.dump(u)\n        assert not isinstance(result, OrderedDict)\n        assert type(result) is dict\n", "tokens": ["tests", "test_options", "py", "testunordered", "def", "test_unordered_dump_returns_dict", "self", "schema", "self", "unorderedschema", "u", "user", "steve", "email", "steve", "steve", "steve", "result", "schema", "dump", "u", "assert", "not", "isinstance", "result", "ordereddict", "assert", "type", "result", "is", "dict"], "doc_len": 31}
{"doc_id": "tests/test_options.py::TestUnordered.test_unordered_load_returns_dict", "file_path": "tests/test_options.py", "class_name": "TestUnordered", "func_name": "test_unordered_load_returns_dict", "text": "文件路径: tests/test_options.py, 类名: TestUnordered\n    def test_unordered_load_returns_dict(self):\n        schema = self.UnorderedSchema()\n        result = schema.load({\"name\": \"steve\", \"email\": \"steve@steve.steve\"})\n        assert not isinstance(result, OrderedDict)\n        assert type(result) is dict\n", "tokens": ["tests", "test_options", "py", "testunordered", "def", "test_unordered_load_returns_dict", "self", "schema", "self", "unorderedschema", "result", "schema", "load", "name", "steve", "email", "steve", "steve", "steve", "assert", "not", "isinstance", "result", "ordereddict", "assert", "type", "result", "is", "dict"], "doc_len": 29}
{"doc_id": "tests/test_options.py::TestFieldOrdering.test_ordered_option_is_inherited", "file_path": "tests/test_options.py", "class_name": "TestFieldOrdering", "func_name": "test_ordered_option_is_inherited", "text": "文件路径: tests/test_options.py, 类名: TestFieldOrdering\n    def test_ordered_option_is_inherited(self, user, with_meta):\n        class ParentUnordered(Schema):\n            class Meta:\n                ordered = False\n\n        # KeepOrder is before ParentUnordered in MRO,\n        # so ChildOrderedSchema will be ordered\n        class ChildOrderedSchema(KeepOrder, ParentUnordered):\n            if with_meta:\n\n                class Meta:\n                    pass\n\n        schema = ChildOrderedSchema()\n        assert schema.opts.ordered is True\n        assert schema.dict_class == OrderedDict\n\n        data = schema.dump(user)\n        keys = list(data)\n        assert keys == [\n            \"name\",\n            \"email\",\n            \"age\",\n            \"created\",\n            \"id\",\n            \"homepage\",\n            \"birthdate\",\n        ]\n\n        # KeepOrder is before ParentUnordered in MRO,\n        # so ChildOrderedSchema will be ordered\n        class ChildUnorderedSchema(ParentUnordered, KeepOrder):\n            class Meta:\n                pass\n\n        schema = ChildUnorderedSchema()\n        assert schema.opts.ordered is False\n", "tokens": ["tests", "test_options", "py", "testfieldordering", "def", "test_ordered_option_is_inherited", "self", "user", "with_meta", "class", "parentunordered", "schema", "class", "meta", "ordered", "false", "keeporder", "is", "before", "parentunordered", "in", "mro", "so", "childorderedschema", "will", "be", "ordered", "class", "childorderedschema", "keeporder", "parentunordered", "if", "with_meta", "class", "meta", "pass", "schema", "childorderedschema", "assert", "schema", "opts", "ordered", "is", "true", "assert", "schema", "dict_class", "ordereddict", "data", "schema", "dump", "user", "keys", "list", "data", "assert", "keys", "name", "email", "age", "created", "id", "homepage", "birthdate", "keeporder", "is", "before", "parentunordered", "in", "mro", "so", "childorderedschema", "will", "be", "ordered", "class", "childunorderedschema", "parentunordered", "keeporder", "class", "meta", "pass", "schema", "childunorderedschema", "assert", "schema", "opts", "ordered", "is", "false"], "doc_len": 90}
{"doc_id": "tests/test_options.py::TestFieldOrdering.test_ordering_is_off_by_default", "file_path": "tests/test_options.py", "class_name": "TestFieldOrdering", "func_name": "test_ordering_is_off_by_default", "text": "文件路径: tests/test_options.py, 类名: TestFieldOrdering\n    def test_ordering_is_off_by_default(self):\n        class DummySchema(Schema):\n            pass\n\n        schema = DummySchema()\n        assert schema.ordered is False\n", "tokens": ["tests", "test_options", "py", "testfieldordering", "def", "test_ordering_is_off_by_default", "self", "class", "dummyschema", "schema", "pass", "schema", "dummyschema", "assert", "schema", "ordered", "is", "false"], "doc_len": 18}
{"doc_id": "tests/test_options.py::TestFieldOrdering.test_declared_field_order_is_maintained_on_dump", "file_path": "tests/test_options.py", "class_name": "TestFieldOrdering", "func_name": "test_declared_field_order_is_maintained_on_dump", "text": "文件路径: tests/test_options.py, 类名: TestFieldOrdering\n    def test_declared_field_order_is_maintained_on_dump(self, user):\n        ser = KeepOrder()\n        data = ser.dump(user)\n        keys = list(data)\n        assert keys == [\n            \"name\",\n            \"email\",\n            \"age\",\n            \"created\",\n            \"id\",\n            \"homepage\",\n            \"birthdate\",\n        ]\n", "tokens": ["tests", "test_options", "py", "testfieldordering", "def", "test_declared_field_order_is_maintained_on_dump", "self", "user", "ser", "keeporder", "data", "ser", "dump", "user", "keys", "list", "data", "assert", "keys", "name", "email", "age", "created", "id", "homepage", "birthdate"], "doc_len": 26}
{"doc_id": "tests/test_options.py::TestFieldOrdering.test_declared_field_order_is_maintained_on_load", "file_path": "tests/test_options.py", "class_name": "TestFieldOrdering", "func_name": "test_declared_field_order_is_maintained_on_load", "text": "文件路径: tests/test_options.py, 类名: TestFieldOrdering\n    def test_declared_field_order_is_maintained_on_load(self, serialized_user):\n        schema = KeepOrder(unknown=EXCLUDE)\n        data = schema.load(serialized_user)\n        keys = list(data)\n        assert keys == [\n            \"name\",\n            \"email\",\n            \"age\",\n            \"created\",\n            \"id\",\n            \"homepage\",\n            \"birthdate\",\n        ]\n", "tokens": ["tests", "test_options", "py", "testfieldordering", "def", "test_declared_field_order_is_maintained_on_load", "self", "serialized_user", "schema", "keeporder", "unknown", "exclude", "data", "schema", "load", "serialized_user", "keys", "list", "data", "assert", "keys", "name", "email", "age", "created", "id", "homepage", "birthdate"], "doc_len": 28}
{"doc_id": "tests/test_options.py::TestFieldOrdering.test_nested_field_order_with_only_arg_is_maintained_on_dump", "file_path": "tests/test_options.py", "class_name": "TestFieldOrdering", "func_name": "test_nested_field_order_with_only_arg_is_maintained_on_dump", "text": "文件路径: tests/test_options.py, 类名: TestFieldOrdering\n    def test_nested_field_order_with_only_arg_is_maintained_on_dump(self, user):\n        schema = OrderedNestedOnly()\n        data = schema.dump({\"user\": user})\n        user_data = data[\"user\"]\n        keys = list(user_data)\n        assert keys == [\n            \"name\",\n            \"email\",\n            \"age\",\n            \"created\",\n            \"id\",\n            \"homepage\",\n            \"birthdate\",\n        ]\n", "tokens": ["tests", "test_options", "py", "testfieldordering", "def", "test_nested_field_order_with_only_arg_is_maintained_on_dump", "self", "user", "schema", "orderednestedonly", "data", "schema", "dump", "user", "user", "user_data", "data", "user", "keys", "list", "user_data", "assert", "keys", "name", "email", "age", "created", "id", "homepage", "birthdate"], "doc_len": 30}
{"doc_id": "tests/test_options.py::TestFieldOrdering.test_nested_field_order_with_only_arg_is_maintained_on_load", "file_path": "tests/test_options.py", "class_name": "TestFieldOrdering", "func_name": "test_nested_field_order_with_only_arg_is_maintained_on_load", "text": "文件路径: tests/test_options.py, 类名: TestFieldOrdering\n    def test_nested_field_order_with_only_arg_is_maintained_on_load(self):\n        schema = OrderedNestedOnly()\n        data = schema.load(\n            {\n                \"user\": {\n                    \"name\": \"Foo\",\n                    \"email\": \"Foo@bar.com\",\n                    \"age\": 42,\n                    \"created\": dt.datetime.now().isoformat(),\n                    \"id\": 123,\n                    \"homepage\": \"http://foo.com\",\n                    \"birthdate\": dt.datetime.now().date().isoformat(),\n                }\n            }\n        )\n        user_data = data[\"user\"]\n        keys = list(user_data)\n        assert keys == [\n            \"name\",\n            \"email\",\n            \"age\",\n            \"created\",\n            \"id\",\n            \"homepage\",\n            \"birthdate\",\n        ]\n", "tokens": ["tests", "test_options", "py", "testfieldordering", "def", "test_nested_field_order_with_only_arg_is_maintained_on_load", "self", "schema", "orderednestedonly", "data", "schema", "load", "user", "name", "foo", "email", "foo", "bar", "com", "age", "42", "created", "dt", "datetime", "now", "isoformat", "id", "123", "homepage", "http", "foo", "com", "birthdate", "dt", "datetime", "now", "date", "isoformat", "user_data", "data", "user", "keys", "list", "user_data", "assert", "keys", "name", "email", "age", "created", "id", "homepage", "birthdate"], "doc_len": 53}
{"doc_id": "tests/test_options.py::TestFieldOrdering.test_nested_field_order_with_exclude_arg_is_maintained", "file_path": "tests/test_options.py", "class_name": "TestFieldOrdering", "func_name": "test_nested_field_order_with_exclude_arg_is_maintained", "text": "文件路径: tests/test_options.py, 类名: TestFieldOrdering\n    def test_nested_field_order_with_exclude_arg_is_maintained(self, user):\n        class HasNestedExclude(Schema):\n            class Meta:\n                ordered = True\n\n            user = fields.Nested(KeepOrder, exclude=(\"birthdate\",))\n\n        ser = HasNestedExclude()\n        data = ser.dump({\"user\": user})\n        user_data = data[\"user\"]\n        keys = list(user_data)\n        assert keys == [\"name\", \"email\", \"age\", \"created\", \"id\", \"homepage\"]\n", "tokens": ["tests", "test_options", "py", "testfieldordering", "def", "test_nested_field_order_with_exclude_arg_is_maintained", "self", "user", "class", "hasnestedexclude", "schema", "class", "meta", "ordered", "true", "user", "fields", "nested", "keeporder", "exclude", "birthdate", "ser", "hasnestedexclude", "data", "ser", "dump", "user", "user", "user_data", "data", "user", "keys", "list", "user_data", "assert", "keys", "name", "email", "age", "created", "id", "homepage"], "doc_len": 42}
{"doc_id": "tests/test_options.py::TestFieldOrdering.test_meta_fields_order_is_maintained_on_dump", "file_path": "tests/test_options.py", "class_name": "TestFieldOrdering", "func_name": "test_meta_fields_order_is_maintained_on_dump", "text": "文件路径: tests/test_options.py, 类名: TestFieldOrdering\n    def test_meta_fields_order_is_maintained_on_dump(self, user):\n        ser = OrderedMetaSchema()\n        data = ser.dump(user)\n        keys = list(data)\n        assert keys == [\n            \"name\",\n            \"email\",\n            \"age\",\n            \"created\",\n            \"id\",\n            \"homepage\",\n            \"birthdate\",\n        ]\n", "tokens": ["tests", "test_options", "py", "testfieldordering", "def", "test_meta_fields_order_is_maintained_on_dump", "self", "user", "ser", "orderedmetaschema", "data", "ser", "dump", "user", "keys", "list", "data", "assert", "keys", "name", "email", "age", "created", "id", "homepage", "birthdate"], "doc_len": 26}
{"doc_id": "tests/test_options.py::TestFieldOrdering.test_meta_fields_order_is_maintained_on_load", "file_path": "tests/test_options.py", "class_name": "TestFieldOrdering", "func_name": "test_meta_fields_order_is_maintained_on_load", "text": "文件路径: tests/test_options.py, 类名: TestFieldOrdering\n    def test_meta_fields_order_is_maintained_on_load(self, serialized_user):\n        schema = OrderedMetaSchema(unknown=EXCLUDE)\n        data = schema.load(serialized_user)\n        keys = list(data)\n        assert keys == [\n            \"name\",\n            \"email\",\n            \"age\",\n            \"created\",\n            \"id\",\n            \"homepage\",\n            \"birthdate\",\n        ]\n", "tokens": ["tests", "test_options", "py", "testfieldordering", "def", "test_meta_fields_order_is_maintained_on_load", "self", "serialized_user", "schema", "orderedmetaschema", "unknown", "exclude", "data", "schema", "load", "serialized_user", "keys", "list", "data", "assert", "keys", "name", "email", "age", "created", "id", "homepage", "birthdate"], "doc_len": 28}
{"doc_id": "tests/test_options.py::TestIncludeOption.test_fields_are_added", "file_path": "tests/test_options.py", "class_name": "TestIncludeOption", "func_name": "test_fields_are_added", "text": "文件路径: tests/test_options.py, 类名: TestIncludeOption\n    def test_fields_are_added(self):\n        s = self.AddFieldsSchema()\n        in_data = {\"name\": \"Steve\", \"from\": \"Oskosh\"}\n        result = s.load({\"name\": \"Steve\", \"from\": \"Oskosh\"})\n        assert result == in_data\n", "tokens": ["tests", "test_options", "py", "testincludeoption", "def", "test_fields_are_added", "self", "s", "self", "addfieldsschema", "in_data", "name", "steve", "from", "oskosh", "result", "s", "load", "name", "steve", "from", "oskosh", "assert", "result", "in_data"], "doc_len": 25}
{"doc_id": "tests/test_options.py::TestIncludeOption.test_ordered_included", "file_path": "tests/test_options.py", "class_name": "TestIncludeOption", "func_name": "test_ordered_included", "text": "文件路径: tests/test_options.py, 类名: TestIncludeOption\n    def test_ordered_included(self):\n        class AddFieldsOrdered(Schema):\n            name = fields.Str()\n            email = fields.Str()\n\n            class Meta:\n                include = OrderedDict(\n                    [\n                        (\"from\", fields.Str()),\n                        (\"in\", fields.Str()),\n                        (\"@at\", fields.Str()),\n                    ]\n                )\n                ordered = True\n\n        s = AddFieldsOrdered()\n        in_data = {\n            \"name\": \"Steve\",\n            \"from\": \"Oskosh\",\n            \"email\": \"steve@steve.steve\",\n            \"in\": \"VA\",\n            \"@at\": \"Charlottesville\",\n        }\n        # declared fields, then \"included\" fields\n        expected_fields = [\"name\", \"email\", \"from\", \"in\", \"@at\"]\n        assert list(AddFieldsOrdered._declared_fields.keys()) == expected_fields\n\n        result = s.load(in_data)\n        assert list(result.keys()) == expected_fields\n", "tokens": ["tests", "test_options", "py", "testincludeoption", "def", "test_ordered_included", "self", "class", "addfieldsordered", "schema", "name", "fields", "str", "email", "fields", "str", "class", "meta", "include", "ordereddict", "from", "fields", "str", "in", "fields", "str", "at", "fields", "str", "ordered", "true", "s", "addfieldsordered", "in_data", "name", "steve", "from", "oskosh", "email", "steve", "steve", "steve", "in", "va", "at", "charlottesville", "declared", "fields", "then", "included", "fields", "expected_fields", "name", "email", "from", "in", "at", "assert", "list", "addfieldsordered", "_declared_fields", "keys", "expected_fields", "result", "s", "load", "in_data", "assert", "list", "result", "keys", "expected_fields"], "doc_len": 72}
{"doc_id": "tests/test_options.py::TestIncludeOption.test_added_fields_are_inherited", "file_path": "tests/test_options.py", "class_name": "TestIncludeOption", "func_name": "test_added_fields_are_inherited", "text": "文件路径: tests/test_options.py, 类名: TestIncludeOption\n    def test_added_fields_are_inherited(self):\n        class AddFieldsChild(self.AddFieldsSchema):\n            email = fields.Str()\n\n        s = AddFieldsChild()\n        assert \"email\" in s._declared_fields.keys()\n        assert \"from\" in s._declared_fields.keys()\n        assert isinstance(s._declared_fields[\"from\"], fields.Str)\n", "tokens": ["tests", "test_options", "py", "testincludeoption", "def", "test_added_fields_are_inherited", "self", "class", "addfieldschild", "self", "addfieldsschema", "email", "fields", "str", "s", "addfieldschild", "assert", "email", "in", "s", "_declared_fields", "keys", "assert", "from", "in", "s", "_declared_fields", "keys", "assert", "isinstance", "s", "_declared_fields", "from", "fields", "str"], "doc_len": 35}
{"doc_id": "tests/test_registry.py::test_serializer_has_class_registry", "file_path": "tests/test_registry.py", "class_name": null, "func_name": "test_serializer_has_class_registry", "text": "文件路径: tests/test_registry.py\ndef test_serializer_has_class_registry():\n    class MySchema(Schema):\n        pass\n\n    class MySubSchema(Schema):\n        pass\n\n    assert \"MySchema\" in class_registry._registry\n    assert \"MySubSchema\" in class_registry._registry\n\n    #  by fullpath\n    assert \"tests.test_registry.MySchema\" in class_registry._registry\n    assert \"tests.test_registry.MySubSchema\" in class_registry._registry\n", "tokens": ["tests", "test_registry", "py", "def", "test_serializer_has_class_registry", "class", "myschema", "schema", "pass", "class", "mysubschema", "schema", "pass", "assert", "myschema", "in", "class_registry", "_registry", "assert", "mysubschema", "in", "class_registry", "_registry", "by", "fullpath", "assert", "tests", "test_registry", "myschema", "in", "class_registry", "_registry", "assert", "tests", "test_registry", "mysubschema", "in", "class_registry", "_registry"], "doc_len": 39}
{"doc_id": "tests/test_registry.py::test_register_class_meta_option", "file_path": "tests/test_registry.py", "class_name": null, "func_name": "test_register_class_meta_option", "text": "文件路径: tests/test_registry.py\ndef test_register_class_meta_option():\n    class UnregisteredSchema(Schema):\n        class Meta:\n            register = False\n\n    class RegisteredSchema(Schema):\n        class Meta:\n            register = True\n\n    class RegisteredOverrideSchema(UnregisteredSchema):\n        class Meta:\n            register = True\n\n    class UnregisteredOverrideSchema(RegisteredSchema):\n        class Meta:\n            register = False\n\n    assert \"UnregisteredSchema\" not in class_registry._registry\n    assert \"tests.test_registry.UnregisteredSchema\" not in class_registry._registry\n\n    assert \"RegisteredSchema\" in class_registry._registry\n    assert \"tests.test_registry.RegisteredSchema\" in class_registry._registry\n\n    assert \"RegisteredOverrideSchema\" in class_registry._registry\n    assert \"tests.test_registry.RegisteredOverrideSchema\" in class_registry._registry\n\n    assert \"UnregisteredOverrideSchema\" not in class_registry._registry\n    assert (\n        \"tests.test_registry.UnregisteredOverrideSchema\" not in class_registry._registry\n    )\n", "tokens": ["tests", "test_registry", "py", "def", "test_register_class_meta_option", "class", "unregisteredschema", "schema", "class", "meta", "register", "false", "class", "registeredschema", "schema", "class", "meta", "register", "true", "class", "registeredoverrideschema", "unregisteredschema", "class", "meta", "register", "true", "class", "unregisteredoverrideschema", "registeredschema", "class", "meta", "register", "false", "assert", "unregisteredschema", "not", "in", "class_registry", "_registry", "assert", "tests", "test_registry", "unregisteredschema", "not", "in", "class_registry", "_registry", "assert", "registeredschema", "in", "class_registry", "_registry", "assert", "tests", "test_registry", "registeredschema", "in", "class_registry", "_registry", "assert", "registeredoverrideschema", "in", "class_registry", "_registry", "assert", "tests", "test_registry", "registeredoverrideschema", "in", "class_registry", "_registry", "assert", "unregisteredoverrideschema", "not", "in", "class_registry", "_registry", "assert", "tests", "test_registry", "unregisteredoverrideschema", "not", "in", "class_registry", "_registry"], "doc_len": 85}
{"doc_id": "tests/test_registry.py::test_serializer_class_registry_register_same_classname_different_module", "file_path": "tests/test_registry.py", "class_name": null, "func_name": "test_serializer_class_registry_register_same_classname_different_module", "text": "文件路径: tests/test_registry.py\ndef test_serializer_class_registry_register_same_classname_different_module():\n\n    reglen = len(class_registry._registry)\n\n    type(\"MyTestRegSchema\", (Schema,), {\"__module__\": \"modA\"})\n\n    assert \"MyTestRegSchema\" in class_registry._registry\n    assert len(class_registry._registry.get(\"MyTestRegSchema\")) == 1\n    assert \"modA.MyTestRegSchema\" in class_registry._registry\n    #  storing for classname and fullpath\n    assert len(class_registry._registry) == reglen + 2\n\n    type(\"MyTestRegSchema\", (Schema,), {\"__module__\": \"modB\"})\n\n    assert \"MyTestRegSchema\" in class_registry._registry\n    #  aggregating classes with same name from different modules\n    assert len(class_registry._registry.get(\"MyTestRegSchema\")) == 2\n    assert \"modB.MyTestRegSchema\" in class_registry._registry\n    #  storing for same classname (+0) and different module (+1)\n    assert len(class_registry._registry) == reglen + 2 + 1\n\n    type(\"MyTestRegSchema\", (Schema,), {\"__module__\": \"modB\"})\n\n    assert \"MyTestRegSchema\" in class_registry._registry\n    #  only the class with matching module has been replaced\n    assert len(class_registry._registry.get(\"MyTestRegSchema\")) == 2\n    assert \"modB.MyTestRegSchema\" in class_registry._registry\n    #  only the class with matching module has been replaced (+0)\n    assert len(class_registry._registry) == reglen + 2 + 1\n", "tokens": ["tests", "test_registry", "py", "def", "test_serializer_class_registry_register_same_classname_different_module", "reglen", "len", "class_registry", "_registry", "type", "mytestregschema", "schema", "__module__", "moda", "assert", "mytestregschema", "in", "class_registry", "_registry", "assert", "len", "class_registry", "_registry", "get", "mytestregschema", "1", "assert", "moda", "mytestregschema", "in", "class_registry", "_registry", "storing", "for", "classname", "and", "fullpath", "assert", "len", "class_registry", "_registry", "reglen", "2", "type", "mytestregschema", "schema", "__module__", "modb", "assert", "mytestregschema", "in", "class_registry", "_registry", "aggregating", "classes", "with", "same", "name", "from", "different", "modules", "assert", "len", "class_registry", "_registry", "get", "mytestregschema", "2", "assert", "modb", "mytestregschema", "in", "class_registry", "_registry", "storing", "for", "same", "classname", "0", "and", "different", "module", "1", "assert", "len", "class_registry", "_registry", "reglen", "2", "1", "type", "mytestregschema", "schema", "__module__", "modb", "assert", "mytestregschema", "in", "class_registry", "_registry", "only", "the", "class", "with", "matching", "module", "has", "been", "replaced", "assert", "len", "class_registry", "_registry", "get", "mytestregschema", "2", "assert", "modb", "mytestregschema", "in", "class_registry", "_registry", "only", "the", "class", "with", "matching", "module", "has", "been", "replaced", "0", "assert", "len", "class_registry", "_registry", "reglen", "2", "1"], "doc_len": 139}
{"doc_id": "tests/test_registry.py::test_serializer_class_registry_override_if_same_classname_same_module", "file_path": "tests/test_registry.py", "class_name": null, "func_name": "test_serializer_class_registry_override_if_same_classname_same_module", "text": "文件路径: tests/test_registry.py\ndef test_serializer_class_registry_override_if_same_classname_same_module():\n\n    reglen = len(class_registry._registry)\n\n    type(\"MyTestReg2Schema\", (Schema,), {\"__module__\": \"SameModulePath\"})\n\n    assert \"MyTestReg2Schema\" in class_registry._registry\n    assert len(class_registry._registry.get(\"MyTestReg2Schema\")) == 1\n    assert \"SameModulePath.MyTestReg2Schema\" in class_registry._registry\n    assert len(class_registry._registry.get(\"SameModulePath.MyTestReg2Schema\")) == 1\n    #  storing for classname and fullpath\n    assert len(class_registry._registry) == reglen + 2\n\n    type(\"MyTestReg2Schema\", (Schema,), {\"__module__\": \"SameModulePath\"})\n\n    assert \"MyTestReg2Schema\" in class_registry._registry\n    #  overriding same class name and same module\n    assert len(class_registry._registry.get(\"MyTestReg2Schema\")) == 1\n    assert \"SameModulePath.MyTestReg2Schema\" in class_registry._registry\n    #  overriding same fullpath\n    assert len(class_registry._registry.get(\"SameModulePath.MyTestReg2Schema\")) == 1\n    #  overriding for same classname (+0) and different module (+0)\n    assert len(class_registry._registry) == reglen + 2\n", "tokens": ["tests", "test_registry", "py", "def", "test_serializer_class_registry_override_if_same_classname_same_module", "reglen", "len", "class_registry", "_registry", "type", "mytestreg2schema", "schema", "__module__", "samemodulepath", "assert", "mytestreg2schema", "in", "class_registry", "_registry", "assert", "len", "class_registry", "_registry", "get", "mytestreg2schema", "1", "assert", "samemodulepath", "mytestreg2schema", "in", "class_registry", "_registry", "assert", "len", "class_registry", "_registry", "get", "samemodulepath", "mytestreg2schema", "1", "storing", "for", "classname", "and", "fullpath", "assert", "len", "class_registry", "_registry", "reglen", "2", "type", "mytestreg2schema", "schema", "__module__", "samemodulepath", "assert", "mytestreg2schema", "in", "class_registry", "_registry", "overriding", "same", "class", "name", "and", "same", "module", "assert", "len", "class_registry", "_registry", "get", "mytestreg2schema", "1", "assert", "samemodulepath", "mytestreg2schema", "in", "class_registry", "_registry", "overriding", "same", "fullpath", "assert", "len", "class_registry", "_registry", "get", "samemodulepath", "mytestreg2schema", "1", "overriding", "for", "same", "classname", "0", "and", "different", "module", "0", "assert", "len", "class_registry", "_registry", "reglen", "2"], "doc_len": 107}
{"doc_id": "tests/test_registry.py::A.__init__", "file_path": "tests/test_registry.py", "class_name": "A", "func_name": "__init__", "text": "文件路径: tests/test_registry.py, 类名: A\n    def __init__(self, _id, b=None):\n        self.id = _id\n        self.b = b\n", "tokens": ["tests", "test_registry", "py", "a", "def", "__init__", "self", "_id", "b", "none", "self", "id", "_id", "self", "b", "b"], "doc_len": 16}
{"doc_id": "tests/test_registry.py::B.__init__", "file_path": "tests/test_registry.py", "class_name": "B", "func_name": "__init__", "text": "文件路径: tests/test_registry.py, 类名: B\n    def __init__(self, _id, a=None):\n        self.id = _id\n        self.a = a\n", "tokens": ["tests", "test_registry", "py", "b", "def", "__init__", "self", "_id", "a", "none", "self", "id", "_id", "self", "a", "a"], "doc_len": 16}
{"doc_id": "tests/test_registry.py::C.__init__", "file_path": "tests/test_registry.py", "class_name": "C", "func_name": "__init__", "text": "文件路径: tests/test_registry.py, 类名: C\n    def __init__(self, _id, bs=None):\n        self.id = _id\n        self.bs = bs or []\n", "tokens": ["tests", "test_registry", "py", "c", "def", "__init__", "self", "_id", "bs", "none", "self", "id", "_id", "self", "bs", "bs", "or"], "doc_len": 17}
{"doc_id": "tests/test_registry.py::test_two_way_nesting", "file_path": "tests/test_registry.py", "class_name": null, "func_name": "test_two_way_nesting", "text": "文件路径: tests/test_registry.py\ndef test_two_way_nesting():\n    a_obj = A(1)\n    b_obj = B(2, a=a_obj)\n    a_obj.b = b_obj\n\n    a_serialized = ASchema().dump(a_obj)\n    b_serialized = BSchema().dump(b_obj)\n    assert a_serialized[\"b\"][\"id\"] == b_obj.id\n    assert b_serialized[\"a\"][\"id\"] == a_obj.id\n", "tokens": ["tests", "test_registry", "py", "def", "test_two_way_nesting", "a_obj", "a", "1", "b_obj", "b", "2", "a", "a_obj", "a_obj", "b", "b_obj", "a_serialized", "aschema", "dump", "a_obj", "b_serialized", "bschema", "dump", "b_obj", "assert", "a_serialized", "b", "id", "b_obj", "id", "assert", "b_serialized", "a", "id", "a_obj", "id"], "doc_len": 36}
{"doc_id": "tests/test_registry.py::test_nesting_with_class_name_many", "file_path": "tests/test_registry.py", "class_name": null, "func_name": "test_nesting_with_class_name_many", "text": "文件路径: tests/test_registry.py\ndef test_nesting_with_class_name_many():\n    c_obj = C(1, bs=[B(2), B(3), B(4)])\n\n    c_serialized = CSchema().dump(c_obj)\n\n    assert len(c_serialized[\"bs\"]) == len(c_obj.bs)\n    assert c_serialized[\"bs\"][0][\"id\"] == c_obj.bs[0].id\n", "tokens": ["tests", "test_registry", "py", "def", "test_nesting_with_class_name_many", "c_obj", "c", "1", "bs", "b", "2", "b", "3", "b", "4", "c_serialized", "cschema", "dump", "c_obj", "assert", "len", "c_serialized", "bs", "len", "c_obj", "bs", "assert", "c_serialized", "bs", "0", "id", "c_obj", "bs", "0", "id"], "doc_len": 35}
{"doc_id": "tests/test_registry.py::test_invalid_class_name_in_nested_field_raises_error", "file_path": "tests/test_registry.py", "class_name": null, "func_name": "test_invalid_class_name_in_nested_field_raises_error", "text": "文件路径: tests/test_registry.py\ndef test_invalid_class_name_in_nested_field_raises_error(user):\n    class MySchema(Schema):\n        nf = fields.Nested(\"notfound\")\n\n    sch = MySchema()\n    msg = \"Class with name {!r} was not found\".format(\"notfound\")\n    with pytest.raises(RegistryError, match=msg):\n        sch.dump({\"nf\": None})\n", "tokens": ["tests", "test_registry", "py", "def", "test_invalid_class_name_in_nested_field_raises_error", "user", "class", "myschema", "schema", "nf", "fields", "nested", "notfound", "sch", "myschema", "msg", "class", "with", "name", "r", "was", "not", "found", "format", "notfound", "with", "pytest", "raises", "registryerror", "match", "msg", "sch", "dump", "nf", "none"], "doc_len": 35}
{"doc_id": "tests/test_registry.py::test_multiple_classes_with_same_name_raises_error", "file_path": "tests/test_registry.py", "class_name": null, "func_name": "test_multiple_classes_with_same_name_raises_error", "text": "文件路径: tests/test_registry.py\ndef test_multiple_classes_with_same_name_raises_error():\n    # Import a class with the same name\n    from .foo_serializer import FooSerializer as FooSerializer1  # noqa\n\n    class MySchema(Schema):\n        foo = fields.Nested(\"FooSerializer\")\n\n    # Using a nested field with the class name fails because there are\n    # two defined classes with the same name\n    sch = MySchema()\n    msg = \"Multiple classes with name {!r} were found.\".format(\"FooSerializer\")\n    with pytest.raises(RegistryError, match=msg):\n        sch.dump({\"foo\": {\"_id\": 1}})\n", "tokens": ["tests", "test_registry", "py", "def", "test_multiple_classes_with_same_name_raises_error", "import", "a", "class", "with", "the", "same", "name", "from", "foo_serializer", "import", "fooserializer", "as", "fooserializer1", "noqa", "class", "myschema", "schema", "foo", "fields", "nested", "fooserializer", "using", "a", "nested", "field", "with", "the", "class", "name", "fails", "because", "there", "are", "two", "defined", "classes", "with", "the", "same", "name", "sch", "myschema", "msg", "multiple", "classes", "with", "name", "r", "were", "found", "format", "fooserializer", "with", "pytest", "raises", "registryerror", "match", "msg", "sch", "dump", "foo", "_id", "1"], "doc_len": 68}
{"doc_id": "tests/test_registry.py::test_multiple_classes_with_all", "file_path": "tests/test_registry.py", "class_name": null, "func_name": "test_multiple_classes_with_all", "text": "文件路径: tests/test_registry.py\ndef test_multiple_classes_with_all():\n    # Import a class with the same name\n    from .foo_serializer import FooSerializer as FooSerializer1  # noqa\n\n    classes = class_registry.get_class(\"FooSerializer\", all=True)\n    assert len(classes) == 2\n", "tokens": ["tests", "test_registry", "py", "def", "test_multiple_classes_with_all", "import", "a", "class", "with", "the", "same", "name", "from", "foo_serializer", "import", "fooserializer", "as", "fooserializer1", "noqa", "classes", "class_registry", "get_class", "fooserializer", "all", "true", "assert", "len", "classes", "2"], "doc_len": 29}
{"doc_id": "tests/test_registry.py::test_can_use_full_module_path_to_class", "file_path": "tests/test_registry.py", "class_name": null, "func_name": "test_can_use_full_module_path_to_class", "text": "文件路径: tests/test_registry.py\ndef test_can_use_full_module_path_to_class():\n    from .foo_serializer import FooSerializer as FooSerializer1  # noqa\n\n    # Using full paths is ok\n\n    class Schema1(Schema):\n        foo = fields.Nested(\"tests.foo_serializer.FooSerializer\")\n\n    sch = Schema1()\n\n    # Note: The arguments here don't matter. What matters is that no\n    # error is raised\n    assert sch.dump({\"foo\": {\"_id\": 42}})\n\n    class Schema2(Schema):\n        foo = fields.Nested(\"tests.test_registry.FooSerializer\")\n\n    sch = Schema2()\n    assert sch.dump({\"foo\": {\"_id\": 42}})\n", "tokens": ["tests", "test_registry", "py", "def", "test_can_use_full_module_path_to_class", "from", "foo_serializer", "import", "fooserializer", "as", "fooserializer1", "noqa", "using", "full", "paths", "is", "ok", "class", "schema1", "schema", "foo", "fields", "nested", "tests", "foo_serializer", "fooserializer", "sch", "schema1", "note", "the", "arguments", "here", "don", "t", "matter", "what", "matters", "is", "that", "no", "error", "is", "raised", "assert", "sch", "dump", "foo", "_id", "42", "class", "schema2", "schema", "foo", "fields", "nested", "tests", "test_registry", "fooserializer", "sch", "schema2", "assert", "sch", "dump", "foo", "_id", "42"], "doc_len": 66}
{"doc_id": "tests/test_schema.py::test_serializing_basic_object", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_serializing_basic_object", "text": "文件路径: tests/test_schema.py\ndef test_serializing_basic_object(SchemaClass, user):\n    s = SchemaClass()\n    data = s.dump(user)\n    assert data[\"name\"] == user.name\n    assert math.isclose(data[\"age\"], 42.3)\n    assert data[\"registered\"]\n", "tokens": ["tests", "test_schema", "py", "def", "test_serializing_basic_object", "schemaclass", "user", "s", "schemaclass", "data", "s", "dump", "user", "assert", "data", "name", "user", "name", "assert", "math", "isclose", "data", "age", "42", "3", "assert", "data", "registered"], "doc_len": 28}
{"doc_id": "tests/test_schema.py::test_serializer_dump", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_serializer_dump", "text": "文件路径: tests/test_schema.py\ndef test_serializer_dump(user):\n    s = UserSchema()\n    result = s.dump(user)\n    assert result[\"name\"] == user.name\n", "tokens": ["tests", "test_schema", "py", "def", "test_serializer_dump", "user", "s", "userschema", "result", "s", "dump", "user", "assert", "result", "name", "user", "name"], "doc_len": 17}
{"doc_id": "tests/test_schema.py::test_load_resets_errors", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_load_resets_errors", "text": "文件路径: tests/test_schema.py\ndef test_load_resets_errors():\n    class MySchema(Schema):\n        email = fields.Email()\n\n    schema = MySchema()\n    with pytest.raises(ValidationError) as excinfo:\n        schema.load({\"name\": \"Joe\", \"email\": \"notvalid\"})\n    errors = excinfo.value.messages\n    assert len(errors[\"email\"]) == 1\n    assert \"Not a valid email address.\" in errors[\"email\"][0]\n    with pytest.raises(ValidationError) as excinfo:\n        schema.load({\"name\": \"Joe\", \"email\": \"__invalid\"})\n    errors = excinfo.value.messages\n    assert len(errors[\"email\"]) == 1\n    assert \"Not a valid email address.\" in errors[\"email\"][0]\n", "tokens": ["tests", "test_schema", "py", "def", "test_load_resets_errors", "class", "myschema", "schema", "email", "fields", "email", "schema", "myschema", "with", "pytest", "raises", "validationerror", "as", "excinfo", "schema", "load", "name", "joe", "email", "notvalid", "errors", "excinfo", "value", "messages", "assert", "len", "errors", "email", "1", "assert", "not", "a", "valid", "email", "address", "in", "errors", "email", "0", "with", "pytest", "raises", "validationerror", "as", "excinfo", "schema", "load", "name", "joe", "email", "__invalid", "errors", "excinfo", "value", "messages", "assert", "len", "errors", "email", "1", "assert", "not", "a", "valid", "email", "address", "in", "errors", "email", "0"], "doc_len": 75}
{"doc_id": "tests/test_schema.py::test_load_validation_error_stores_input_data_and_valid_data", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_load_validation_error_stores_input_data_and_valid_data", "text": "文件路径: tests/test_schema.py\ndef test_load_validation_error_stores_input_data_and_valid_data():\n    class MySchema(Schema):\n        always_valid = fields.DateTime()\n        always_invalid = fields.Field(validate=[lambda v: False])\n\n    schema = MySchema()\n    input_data = {\n        \"always_valid\": dt.datetime.utcnow().isoformat(),\n        \"always_invalid\": 24,\n    }\n    try:\n        schema.load(input_data)\n    except ValidationError as err:\n        # err.data is the raw input data\n        assert err.data == input_data\n        assert \"always_valid\" in err.valid_data\n        # err.valid_data contains valid, deserialized data\n        assert isinstance(err.valid_data[\"always_valid\"], dt.datetime)\n        # excludes invalid data\n        assert \"always_invalid\" not in err.valid_data\n    else:\n        pytest.fail(\"Data is invalid. Expected a ValidationError to be raised.\")\n", "tokens": ["tests", "test_schema", "py", "def", "test_load_validation_error_stores_input_data_and_valid_data", "class", "myschema", "schema", "always_valid", "fields", "datetime", "always_invalid", "fields", "field", "validate", "lambda", "v", "false", "schema", "myschema", "input_data", "always_valid", "dt", "datetime", "utcnow", "isoformat", "always_invalid", "24", "try", "schema", "load", "input_data", "except", "validationerror", "as", "err", "err", "data", "is", "the", "raw", "input", "data", "assert", "err", "data", "input_data", "assert", "always_valid", "in", "err", "valid_data", "err", "valid_data", "contains", "valid", "deserialized", "data", "assert", "isinstance", "err", "valid_data", "always_valid", "dt", "datetime", "excludes", "invalid", "data", "assert", "always_invalid", "not", "in", "err", "valid_data", "else", "pytest", "fail", "data", "is", "invalid", "expected", "a", "validationerror", "to", "be", "raised"], "doc_len": 86}
{"doc_id": "tests/test_schema.py::test_load_resets_error_fields", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_load_resets_error_fields", "text": "文件路径: tests/test_schema.py\ndef test_load_resets_error_fields():\n    class MySchema(Schema):\n        email = fields.Email()\n        name = fields.Str()\n\n    schema = MySchema()\n    with pytest.raises(ValidationError) as excinfo:\n        schema.load({\"name\": \"Joe\", \"email\": \"not-valid\"})\n    exc = excinfo.value\n    assert len(exc.messages.keys()) == 1\n\n    with pytest.raises(ValidationError) as excinfo:\n        schema.load({\"name\": 12, \"email\": \"mick@stones.com\"})\n    exc = excinfo.value\n", "tokens": ["tests", "test_schema", "py", "def", "test_load_resets_error_fields", "class", "myschema", "schema", "email", "fields", "email", "name", "fields", "str", "schema", "myschema", "with", "pytest", "raises", "validationerror", "as", "excinfo", "schema", "load", "name", "joe", "email", "not", "valid", "exc", "excinfo", "value", "assert", "len", "exc", "messages", "keys", "1", "with", "pytest", "raises", "validationerror", "as", "excinfo", "schema", "load", "name", "12", "email", "mick", "stones", "com", "exc", "excinfo", "value"], "doc_len": 55}
{"doc_id": "tests/test_schema.py::test_errored_fields_do_not_appear_in_output", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_errored_fields_do_not_appear_in_output", "text": "文件路径: tests/test_schema.py\ndef test_errored_fields_do_not_appear_in_output():\n    class MyField(fields.Field):\n        # Make sure validation fails during serialization\n        def _serialize(self, val, attr, obj):\n            raise ValidationError(\"oops\")\n\n    class MySchema(Schema):\n        foo = MyField(validate=lambda x: False)\n\n    sch = MySchema()\n    with pytest.raises(ValidationError) as excinfo:\n        sch.load({\"foo\": 2})\n    data, errors = excinfo.value.valid_data, excinfo.value.messages\n\n    assert \"foo\" in errors\n    assert \"foo\" not in data\n", "tokens": ["tests", "test_schema", "py", "def", "test_errored_fields_do_not_appear_in_output", "class", "myfield", "fields", "field", "make", "sure", "validation", "fails", "during", "serialization", "def", "_serialize", "self", "val", "attr", "obj", "raise", "validationerror", "oops", "class", "myschema", "schema", "foo", "myfield", "validate", "lambda", "x", "false", "sch", "myschema", "with", "pytest", "raises", "validationerror", "as", "excinfo", "sch", "load", "foo", "2", "data", "errors", "excinfo", "value", "valid_data", "excinfo", "value", "messages", "assert", "foo", "in", "errors", "assert", "foo", "not", "in", "data"], "doc_len": 62}
{"doc_id": "tests/test_schema.py::test_load_many_stores_error_indices", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_load_many_stores_error_indices", "text": "文件路径: tests/test_schema.py\ndef test_load_many_stores_error_indices():\n    s = UserSchema()\n    data = [\n        {\"name\": \"Mick\", \"email\": \"mick@stones.com\"},\n        {\"name\": \"Keith\", \"email\": \"invalid-email\", \"homepage\": \"invalid-homepage\"},\n    ]\n    with pytest.raises(ValidationError) as excinfo:\n        s.load(data, many=True)\n    errors = excinfo.value.messages\n    assert 0 not in errors\n    assert 1 in errors\n    assert \"email\" in errors[1]\n    assert \"homepage\" in errors[1]\n", "tokens": ["tests", "test_schema", "py", "def", "test_load_many_stores_error_indices", "s", "userschema", "data", "name", "mick", "email", "mick", "stones", "com", "name", "keith", "email", "invalid", "email", "homepage", "invalid", "homepage", "with", "pytest", "raises", "validationerror", "as", "excinfo", "s", "load", "data", "many", "true", "errors", "excinfo", "value", "messages", "assert", "0", "not", "in", "errors", "assert", "1", "in", "errors", "assert", "email", "in", "errors", "1", "assert", "homepage", "in", "errors", "1"], "doc_len": 56}
{"doc_id": "tests/test_schema.py::test_dump_many", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_dump_many", "text": "文件路径: tests/test_schema.py\ndef test_dump_many():\n    s = UserSchema()\n    u1, u2 = User(\"Mick\"), User(\"Keith\")\n    data = s.dump([u1, u2], many=True)\n    assert len(data) == 2\n    assert data[0] == s.dump(u1)\n", "tokens": ["tests", "test_schema", "py", "def", "test_dump_many", "s", "userschema", "u1", "u2", "user", "mick", "user", "keith", "data", "s", "dump", "u1", "u2", "many", "true", "assert", "len", "data", "2", "assert", "data", "0", "s", "dump", "u1"], "doc_len": 30}
{"doc_id": "tests/test_schema.py::test_multiple_errors_can_be_stored_for_a_given_index", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_multiple_errors_can_be_stored_for_a_given_index", "text": "文件路径: tests/test_schema.py\ndef test_multiple_errors_can_be_stored_for_a_given_index():\n    class MySchema(Schema):\n        foo = fields.Str(validate=lambda x: len(x) > 3)\n        bar = fields.Int(validate=lambda x: x > 3)\n\n    sch = MySchema()\n    valid = {\"foo\": \"loll\", \"bar\": 42}\n    invalid = {\"foo\": \"lol\", \"bar\": 3}\n    errors = sch.validate([valid, invalid], many=True)\n\n    assert 1 in errors\n    assert len(errors[1]) == 2\n    assert \"foo\" in errors[1]\n    assert \"bar\" in errors[1]\n", "tokens": ["tests", "test_schema", "py", "def", "test_multiple_errors_can_be_stored_for_a_given_index", "class", "myschema", "schema", "foo", "fields", "str", "validate", "lambda", "x", "len", "x", "3", "bar", "fields", "int", "validate", "lambda", "x", "x", "3", "sch", "myschema", "valid", "foo", "loll", "bar", "42", "invalid", "foo", "lol", "bar", "3", "errors", "sch", "validate", "valid", "invalid", "many", "true", "assert", "1", "in", "errors", "assert", "len", "errors", "1", "2", "assert", "foo", "in", "errors", "1", "assert", "bar", "in", "errors", "1"], "doc_len": 63}
{"doc_id": "tests/test_schema.py::test_dump_returns_a_dict", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_dump_returns_a_dict", "text": "文件路径: tests/test_schema.py\ndef test_dump_returns_a_dict(user):\n    s = UserSchema()\n    result = s.dump(user)\n    assert type(result) == dict\n", "tokens": ["tests", "test_schema", "py", "def", "test_dump_returns_a_dict", "user", "s", "userschema", "result", "s", "dump", "user", "assert", "type", "result", "dict"], "doc_len": 16}
{"doc_id": "tests/test_schema.py::test_dumps_returns_a_string", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_dumps_returns_a_string", "text": "文件路径: tests/test_schema.py\ndef test_dumps_returns_a_string(user):\n    s = UserSchema()\n    result = s.dumps(user)\n    assert type(result) == str\n", "tokens": ["tests", "test_schema", "py", "def", "test_dumps_returns_a_string", "user", "s", "userschema", "result", "s", "dumps", "user", "assert", "type", "result", "str"], "doc_len": 16}
{"doc_id": "tests/test_schema.py::test_dumping_single_object_with_collection_schema", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_dumping_single_object_with_collection_schema", "text": "文件路径: tests/test_schema.py\ndef test_dumping_single_object_with_collection_schema(user):\n    s = UserSchema(many=True)\n    result = s.dump(user, many=False)\n    assert type(result) == dict\n    assert result == UserSchema().dump(user)\n", "tokens": ["tests", "test_schema", "py", "def", "test_dumping_single_object_with_collection_schema", "user", "s", "userschema", "many", "true", "result", "s", "dump", "user", "many", "false", "assert", "type", "result", "dict", "assert", "result", "userschema", "dump", "user"], "doc_len": 25}
{"doc_id": "tests/test_schema.py::test_loading_single_object_with_collection_schema", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_loading_single_object_with_collection_schema", "text": "文件路径: tests/test_schema.py\ndef test_loading_single_object_with_collection_schema():\n    s = UserSchema(many=True)\n    in_data = {\"name\": \"Mick\", \"email\": \"mick@stones.com\"}\n    result = s.load(in_data, many=False)\n    assert type(result) == User\n    assert result.name == UserSchema().load(in_data).name\n", "tokens": ["tests", "test_schema", "py", "def", "test_loading_single_object_with_collection_schema", "s", "userschema", "many", "true", "in_data", "name", "mick", "email", "mick", "stones", "com", "result", "s", "load", "in_data", "many", "false", "assert", "type", "result", "user", "assert", "result", "name", "userschema", "load", "in_data", "name"], "doc_len": 33}
{"doc_id": "tests/test_schema.py::test_dumps_many", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_dumps_many", "text": "文件路径: tests/test_schema.py\ndef test_dumps_many():\n    s = UserSchema()\n    u1, u2 = User(\"Mick\"), User(\"Keith\")\n    json_result = s.dumps([u1, u2], many=True)\n    data = json.loads(json_result)\n    assert len(data) == 2\n    assert data[0] == s.dump(u1)\n", "tokens": ["tests", "test_schema", "py", "def", "test_dumps_many", "s", "userschema", "u1", "u2", "user", "mick", "user", "keith", "json_result", "s", "dumps", "u1", "u2", "many", "true", "data", "json", "loads", "json_result", "assert", "len", "data", "2", "assert", "data", "0", "s", "dump", "u1"], "doc_len": 34}
{"doc_id": "tests/test_schema.py::test_load_returns_an_object", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_load_returns_an_object", "text": "文件路径: tests/test_schema.py\ndef test_load_returns_an_object():\n    s = UserSchema()\n    result = s.load({\"name\": \"Monty\"})\n    assert type(result) == User\n", "tokens": ["tests", "test_schema", "py", "def", "test_load_returns_an_object", "s", "userschema", "result", "s", "load", "name", "monty", "assert", "type", "result", "user"], "doc_len": 16}
{"doc_id": "tests/test_schema.py::test_load_many", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_load_many", "text": "文件路径: tests/test_schema.py\ndef test_load_many():\n    s = UserSchema()\n    in_data = [{\"name\": \"Mick\"}, {\"name\": \"Keith\"}]\n    result = s.load(in_data, many=True)\n    assert type(result) == list\n    assert type(result[0]) == User\n    assert result[0].name == \"Mick\"\n", "tokens": ["tests", "test_schema", "py", "def", "test_load_many", "s", "userschema", "in_data", "name", "mick", "name", "keith", "result", "s", "load", "in_data", "many", "true", "assert", "type", "result", "list", "assert", "type", "result", "0", "user", "assert", "result", "0", "name", "mick"], "doc_len": 32}
{"doc_id": "tests/test_schema.py::test_load_invalid_input_type", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_load_invalid_input_type", "text": "文件路径: tests/test_schema.py\ndef test_load_invalid_input_type(val):\n    class Sch(Schema):\n        name = fields.Str()\n\n    with pytest.raises(ValidationError) as e:\n        Sch().load(val)\n    assert e.value.messages == {\"_schema\": [\"Invalid input type.\"]}\n    assert e.value.valid_data == {}\n", "tokens": ["tests", "test_schema", "py", "def", "test_load_invalid_input_type", "val", "class", "sch", "schema", "name", "fields", "str", "with", "pytest", "raises", "validationerror", "as", "e", "sch", "load", "val", "assert", "e", "value", "messages", "_schema", "invalid", "input", "type", "assert", "e", "value", "valid_data"], "doc_len": 33}
{"doc_id": "tests/test_schema.py::test_load_many_invalid_input_type", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_load_many_invalid_input_type", "text": "文件路径: tests/test_schema.py\ndef test_load_many_invalid_input_type(val):\n    class Sch(Schema):\n        name = fields.Str()\n\n    with pytest.raises(ValidationError) as e:\n        Sch(many=True).load(val)\n    assert e.value.messages == {\"_schema\": [\"Invalid input type.\"]}\n    assert e.value.valid_data == []\n", "tokens": ["tests", "test_schema", "py", "def", "test_load_many_invalid_input_type", "val", "class", "sch", "schema", "name", "fields", "str", "with", "pytest", "raises", "validationerror", "as", "e", "sch", "many", "true", "load", "val", "assert", "e", "value", "messages", "_schema", "invalid", "input", "type", "assert", "e", "value", "valid_data"], "doc_len": 35}
{"doc_id": "tests/test_schema.py::test_load_many_empty_collection", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_load_many_empty_collection", "text": "文件路径: tests/test_schema.py\ndef test_load_many_empty_collection(val):\n    class Sch(Schema):\n        name = fields.Str()\n\n    assert Sch(many=True).load(val) == []\n", "tokens": ["tests", "test_schema", "py", "def", "test_load_many_empty_collection", "val", "class", "sch", "schema", "name", "fields", "str", "assert", "sch", "many", "true", "load", "val"], "doc_len": 18}
{"doc_id": "tests/test_schema.py::test_load_many_in_nested_invalid_input_type", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_load_many_in_nested_invalid_input_type", "text": "文件路径: tests/test_schema.py\ndef test_load_many_in_nested_invalid_input_type(val):\n    class Inner(Schema):\n        name = fields.String()\n\n    class Outer(Schema):\n        list1 = fields.List(fields.Nested(Inner))\n        list2 = fields.Nested(Inner, many=True)\n\n    with pytest.raises(ValidationError) as e:\n        Outer().load({\"list1\": val, \"list2\": val})\n    # TODO: Error messages should be identical (#779)\n    assert e.value.messages == {\n        \"list1\": [\"Not a valid list.\"],\n        \"list2\": [\"Invalid type.\"],\n    }\n", "tokens": ["tests", "test_schema", "py", "def", "test_load_many_in_nested_invalid_input_type", "val", "class", "inner", "schema", "name", "fields", "string", "class", "outer", "schema", "list1", "fields", "list", "fields", "nested", "inner", "list2", "fields", "nested", "inner", "many", "true", "with", "pytest", "raises", "validationerror", "as", "e", "outer", "load", "list1", "val", "list2", "val", "todo", "error", "messages", "should", "be", "identical", "779", "assert", "e", "value", "messages", "list1", "not", "a", "valid", "list", "list2", "invalid", "type"], "doc_len": 58}
{"doc_id": "tests/test_schema.py::test_load_many_in_nested_empty_collection", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_load_many_in_nested_empty_collection", "text": "文件路径: tests/test_schema.py\ndef test_load_many_in_nested_empty_collection(val):\n    class Inner(Schema):\n        name = fields.String()\n\n    class Outer(Schema):\n        list1 = fields.List(fields.Nested(Inner))\n        list2 = fields.Nested(Inner, many=True)\n\n    assert Outer().load({\"list1\": val, \"list2\": val}) == {\"list1\": [], \"list2\": []}\n", "tokens": ["tests", "test_schema", "py", "def", "test_load_many_in_nested_empty_collection", "val", "class", "inner", "schema", "name", "fields", "string", "class", "outer", "schema", "list1", "fields", "list", "fields", "nested", "inner", "list2", "fields", "nested", "inner", "many", "true", "assert", "outer", "load", "list1", "val", "list2", "val", "list1", "list2"], "doc_len": 36}
{"doc_id": "tests/test_schema.py::test_loads_returns_a_user", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_loads_returns_a_user", "text": "文件路径: tests/test_schema.py\ndef test_loads_returns_a_user():\n    s = UserSchema()\n    result = s.loads(json.dumps({\"name\": \"Monty\"}))\n    assert type(result) == User\n", "tokens": ["tests", "test_schema", "py", "def", "test_loads_returns_a_user", "s", "userschema", "result", "s", "loads", "json", "dumps", "name", "monty", "assert", "type", "result", "user"], "doc_len": 18}
{"doc_id": "tests/test_schema.py::test_loads_many", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_loads_many", "text": "文件路径: tests/test_schema.py\ndef test_loads_many():\n    s = UserSchema()\n    in_data = [{\"name\": \"Mick\"}, {\"name\": \"Keith\"}]\n    in_json_data = json.dumps(in_data)\n    result = s.loads(in_json_data, many=True)\n    assert type(result) == list\n    assert result[0].name == \"Mick\"\n", "tokens": ["tests", "test_schema", "py", "def", "test_loads_many", "s", "userschema", "in_data", "name", "mick", "name", "keith", "in_json_data", "json", "dumps", "in_data", "result", "s", "loads", "in_json_data", "many", "true", "assert", "type", "result", "list", "assert", "result", "0", "name", "mick"], "doc_len": 31}
{"doc_id": "tests/test_schema.py::test_loads_deserializes_from_json", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_loads_deserializes_from_json", "text": "文件路径: tests/test_schema.py\ndef test_loads_deserializes_from_json():\n    user_dict = {\"name\": \"Monty\", \"age\": \"42.3\"}\n    user_json = json.dumps(user_dict)\n    result = UserSchema().loads(user_json)\n    assert isinstance(result, User)\n    assert result.name == \"Monty\"\n    assert math.isclose(result.age, 42.3)\n", "tokens": ["tests", "test_schema", "py", "def", "test_loads_deserializes_from_json", "user_dict", "name", "monty", "age", "42", "3", "user_json", "json", "dumps", "user_dict", "result", "userschema", "loads", "user_json", "assert", "isinstance", "result", "user", "assert", "result", "name", "monty", "assert", "math", "isclose", "result", "age", "42", "3"], "doc_len": 34}
{"doc_id": "tests/test_schema.py::test_serializing_none", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_serializing_none", "text": "文件路径: tests/test_schema.py\ndef test_serializing_none():\n    class MySchema(Schema):\n        id = fields.Str(default=\"no-id\")\n        num = fields.Int()\n        name = fields.Str()\n\n    data = UserSchema().dump(None)\n    assert data == {\"id\": \"no-id\"}\n", "tokens": ["tests", "test_schema", "py", "def", "test_serializing_none", "class", "myschema", "schema", "id", "fields", "str", "default", "no", "id", "num", "fields", "int", "name", "fields", "str", "data", "userschema", "dump", "none", "assert", "data", "id", "no", "id"], "doc_len": 29}
{"doc_id": "tests/test_schema.py::test_default_many_symmetry", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_default_many_symmetry", "text": "文件路径: tests/test_schema.py\ndef test_default_many_symmetry():\n    \"\"\"The dump/load(s) methods should all default to the many value of the schema.\"\"\"\n    s_many = UserSchema(many=True, only=(\"name\",))\n    s_single = UserSchema(only=(\"name\",))\n    u1, u2 = User(\"King Arthur\"), User(\"Sir Lancelot\")\n    s_single.load(s_single.dump(u1))\n    s_single.loads(s_single.dumps(u1))\n    s_many.load(s_many.dump([u1, u2]))\n    s_many.loads(s_many.dumps([u1, u2]))\n", "tokens": ["tests", "test_schema", "py", "def", "test_default_many_symmetry", "the", "dump", "load", "s", "methods", "should", "all", "default", "to", "the", "many", "value", "of", "the", "schema", "s_many", "userschema", "many", "true", "only", "name", "s_single", "userschema", "only", "name", "u1", "u2", "user", "king", "arthur", "user", "sir", "lancelot", "s_single", "load", "s_single", "dump", "u1", "s_single", "loads", "s_single", "dumps", "u1", "s_many", "load", "s_many", "dump", "u1", "u2", "s_many", "loads", "s_many", "dumps", "u1", "u2"], "doc_len": 60}
{"doc_id": "tests/test_schema.py::test_on_bind_field_hook", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_on_bind_field_hook", "text": "文件路径: tests/test_schema.py\ndef test_on_bind_field_hook():\n    class MySchema(Schema):\n        foo = fields.Str()\n\n        def on_bind_field(self, field_name, field_obj):\n            assert field_obj.parent is self\n            field_obj.metadata[\"fname\"] = field_name\n\n    schema = MySchema()\n    assert schema.fields[\"foo\"].metadata[\"fname\"] == \"foo\"\n", "tokens": ["tests", "test_schema", "py", "def", "test_on_bind_field_hook", "class", "myschema", "schema", "foo", "fields", "str", "def", "on_bind_field", "self", "field_name", "field_obj", "assert", "field_obj", "parent", "is", "self", "field_obj", "metadata", "fname", "field_name", "schema", "myschema", "assert", "schema", "fields", "foo", "metadata", "fname", "foo"], "doc_len": 34}
{"doc_id": "tests/test_schema.py::test_nested_on_bind_field_hook", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_nested_on_bind_field_hook", "text": "文件路径: tests/test_schema.py\ndef test_nested_on_bind_field_hook():\n    class MySchema(Schema):\n        class NestedSchema(Schema):\n            bar = fields.Str()\n\n            def on_bind_field(self, field_name, field_obj):\n                field_obj.metadata[\"fname\"] = self.context[\"fname\"]\n\n        foo = fields.Nested(NestedSchema)\n\n    schema1 = MySchema(context={\"fname\": \"foobar\"})\n    schema2 = MySchema(context={\"fname\": \"quxquux\"})\n\n    assert schema1.fields[\"foo\"].schema.fields[\"bar\"].metadata[\"fname\"] == \"foobar\"\n    assert schema2.fields[\"foo\"].schema.fields[\"bar\"].metadata[\"fname\"] == \"quxquux\"\n", "tokens": ["tests", "test_schema", "py", "def", "test_nested_on_bind_field_hook", "class", "myschema", "schema", "class", "nestedschema", "schema", "bar", "fields", "str", "def", "on_bind_field", "self", "field_name", "field_obj", "field_obj", "metadata", "fname", "self", "context", "fname", "foo", "fields", "nested", "nestedschema", "schema1", "myschema", "context", "fname", "foobar", "schema2", "myschema", "context", "fname", "quxquux", "assert", "schema1", "fields", "foo", "schema", "fields", "bar", "metadata", "fname", "foobar", "assert", "schema2", "fields", "foo", "schema", "fields", "bar", "metadata", "fname", "quxquux"], "doc_len": 59}
{"doc_id": "tests/test_schema.py::TestValidate.test_validate_raises_with_errors_dict", "file_path": "tests/test_schema.py", "class_name": "TestValidate", "func_name": "test_validate_raises_with_errors_dict", "text": "文件路径: tests/test_schema.py, 类名: TestValidate\n    def test_validate_raises_with_errors_dict(self):\n        s = UserSchema()\n        errors = s.validate({\"email\": \"bad-email\", \"name\": \"Valid Name\"})\n        assert type(errors) is dict\n        assert \"email\" in errors\n        assert \"name\" not in errors\n\n        valid_data = {\"name\": \"Valid Name\", \"email\": \"valid@email.com\"}\n        errors = s.validate(valid_data)\n        assert errors == {}\n", "tokens": ["tests", "test_schema", "py", "testvalidate", "def", "test_validate_raises_with_errors_dict", "self", "s", "userschema", "errors", "s", "validate", "email", "bad", "email", "name", "valid", "name", "assert", "type", "errors", "is", "dict", "assert", "email", "in", "errors", "assert", "name", "not", "in", "errors", "valid_data", "name", "valid", "name", "email", "valid", "email", "com", "errors", "s", "validate", "valid_data", "assert", "errors"], "doc_len": 46}
{"doc_id": "tests/test_schema.py::TestValidate.test_validate_many", "file_path": "tests/test_schema.py", "class_name": "TestValidate", "func_name": "test_validate_many", "text": "文件路径: tests/test_schema.py, 类名: TestValidate\n    def test_validate_many(self):\n        s = UserSchema(many=True)\n        in_data = [\n            {\"name\": \"Valid Name\", \"email\": \"validemail@hotmail.com\"},\n            {\"name\": \"Valid Name2\", \"email\": \"invalid\"},\n        ]\n        errors = s.validate(in_data, many=True)\n        assert 1 in errors\n        assert \"email\" in errors[1]\n", "tokens": ["tests", "test_schema", "py", "testvalidate", "def", "test_validate_many", "self", "s", "userschema", "many", "true", "in_data", "name", "valid", "name", "email", "validemail", "hotmail", "com", "name", "valid", "name2", "email", "invalid", "errors", "s", "validate", "in_data", "many", "true", "assert", "1", "in", "errors", "assert", "email", "in", "errors", "1"], "doc_len": 39}
{"doc_id": "tests/test_schema.py::TestValidate.test_validate_many_doesnt_store_index_if_index_errors_option_is_false", "file_path": "tests/test_schema.py", "class_name": "TestValidate", "func_name": "test_validate_many_doesnt_store_index_if_index_errors_option_is_false", "text": "文件路径: tests/test_schema.py, 类名: TestValidate\n    def test_validate_many_doesnt_store_index_if_index_errors_option_is_false(self):\n        class NoIndex(Schema):\n            email = fields.Email()\n\n            class Meta:\n                index_errors = False\n\n        s = NoIndex()\n        in_data = [\n            {\"name\": \"Valid Name\", \"email\": \"validemail@hotmail.com\"},\n            {\"name\": \"Valid Name2\", \"email\": \"invalid\"},\n        ]\n        errors = s.validate(in_data, many=True)\n        assert 1 not in errors\n        assert \"email\" in errors\n", "tokens": ["tests", "test_schema", "py", "testvalidate", "def", "test_validate_many_doesnt_store_index_if_index_errors_option_is_false", "self", "class", "noindex", "schema", "email", "fields", "email", "class", "meta", "index_errors", "false", "s", "noindex", "in_data", "name", "valid", "name", "email", "validemail", "hotmail", "com", "name", "valid", "name2", "email", "invalid", "errors", "s", "validate", "in_data", "many", "true", "assert", "1", "not", "in", "errors", "assert", "email", "in", "errors"], "doc_len": 47}
{"doc_id": "tests/test_schema.py::TestValidate.test_validate", "file_path": "tests/test_schema.py", "class_name": "TestValidate", "func_name": "test_validate", "text": "文件路径: tests/test_schema.py, 类名: TestValidate\n    def test_validate(self):\n        s = UserSchema()\n        errors = s.validate({\"email\": \"bad-email\"})\n        assert errors == {\"email\": [\"Not a valid email address.\"]}\n", "tokens": ["tests", "test_schema", "py", "testvalidate", "def", "test_validate", "self", "s", "userschema", "errors", "s", "validate", "email", "bad", "email", "assert", "errors", "email", "not", "a", "valid", "email", "address"], "doc_len": 23}
{"doc_id": "tests/test_schema.py::TestValidate.test_validate_required", "file_path": "tests/test_schema.py", "class_name": "TestValidate", "func_name": "test_validate_required", "text": "文件路径: tests/test_schema.py, 类名: TestValidate\n    def test_validate_required(self):\n        class MySchema(Schema):\n            foo = fields.Field(required=True)\n\n        s = MySchema()\n        errors = s.validate({\"bar\": 42})\n        assert \"foo\" in errors\n        assert \"required\" in errors[\"foo\"][0]\n", "tokens": ["tests", "test_schema", "py", "testvalidate", "def", "test_validate_required", "self", "class", "myschema", "schema", "foo", "fields", "field", "required", "true", "s", "myschema", "errors", "s", "validate", "bar", "42", "assert", "foo", "in", "errors", "assert", "required", "in", "errors", "foo", "0"], "doc_len": 32}
{"doc_id": "tests/test_schema.py::test_fields_are_not_copies", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_fields_are_not_copies", "text": "文件路径: tests/test_schema.py\ndef test_fields_are_not_copies(SchemaClass):\n    s = SchemaClass()\n    s2 = SchemaClass()\n    assert s.fields is not s2.fields\n", "tokens": ["tests", "test_schema", "py", "def", "test_fields_are_not_copies", "schemaclass", "s", "schemaclass", "s2", "schemaclass", "assert", "s", "fields", "is", "not", "s2", "fields"], "doc_len": 17}
{"doc_id": "tests/test_schema.py::test_dumps_returns_json", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_dumps_returns_json", "text": "文件路径: tests/test_schema.py\ndef test_dumps_returns_json(user):\n    ser = UserSchema()\n    serialized = ser.dump(user)\n    json_data = ser.dumps(user)\n    assert type(json_data) == str\n    expected = json.dumps(serialized)\n    assert json_data == expected\n", "tokens": ["tests", "test_schema", "py", "def", "test_dumps_returns_json", "user", "ser", "userschema", "serialized", "ser", "dump", "user", "json_data", "ser", "dumps", "user", "assert", "type", "json_data", "str", "expected", "json", "dumps", "serialized", "assert", "json_data", "expected"], "doc_len": 27}
{"doc_id": "tests/test_schema.py::test_naive_datetime_field", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_naive_datetime_field", "text": "文件路径: tests/test_schema.py\ndef test_naive_datetime_field(user, serialized_user):\n    expected = utils.isoformat(user.created)\n    assert serialized_user[\"created\"] == expected\n", "tokens": ["tests", "test_schema", "py", "def", "test_naive_datetime_field", "user", "serialized_user", "expected", "utils", "isoformat", "user", "created", "assert", "serialized_user", "created", "expected"], "doc_len": 16}
{"doc_id": "tests/test_schema.py::test_datetime_formatted_field", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_datetime_formatted_field", "text": "文件路径: tests/test_schema.py\ndef test_datetime_formatted_field(user, serialized_user):\n    result = serialized_user[\"created_formatted\"]\n    assert result == user.created.strftime(\"%Y-%m-%d\")\n", "tokens": ["tests", "test_schema", "py", "def", "test_datetime_formatted_field", "user", "serialized_user", "result", "serialized_user", "created_formatted", "assert", "result", "user", "created", "strftime", "y", "m", "d"], "doc_len": 18}
{"doc_id": "tests/test_schema.py::test_datetime_iso_field", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_datetime_iso_field", "text": "文件路径: tests/test_schema.py\ndef test_datetime_iso_field(user, serialized_user):\n    assert serialized_user[\"created_iso\"] == utils.isoformat(user.created)\n", "tokens": ["tests", "test_schema", "py", "def", "test_datetime_iso_field", "user", "serialized_user", "assert", "serialized_user", "created_iso", "utils", "isoformat", "user", "created"], "doc_len": 14}
{"doc_id": "tests/test_schema.py::test_tz_datetime_field", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_tz_datetime_field", "text": "文件路径: tests/test_schema.py\ndef test_tz_datetime_field(user, serialized_user):\n    # Datetime is corrected back to GMT\n    expected = utils.isoformat(user.updated)\n    assert serialized_user[\"updated\"] == expected\n", "tokens": ["tests", "test_schema", "py", "def", "test_tz_datetime_field", "user", "serialized_user", "datetime", "is", "corrected", "back", "to", "gmt", "expected", "utils", "isoformat", "user", "updated", "assert", "serialized_user", "updated", "expected"], "doc_len": 22}
{"doc_id": "tests/test_schema.py::test_class_variable", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_class_variable", "text": "文件路径: tests/test_schema.py\ndef test_class_variable(serialized_user):\n    assert serialized_user[\"species\"] == \"Homo sapiens\"\n", "tokens": ["tests", "test_schema", "py", "def", "test_class_variable", "serialized_user", "assert", "serialized_user", "species", "homo", "sapiens"], "doc_len": 11}
{"doc_id": "tests/test_schema.py::test_serialize_many", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_serialize_many", "text": "文件路径: tests/test_schema.py\ndef test_serialize_many(SchemaClass):\n    user1 = User(name=\"Mick\", age=123)\n    user2 = User(name=\"Keith\", age=456)\n    users = [user1, user2]\n    serialized = SchemaClass(many=True).dump(users)\n    assert len(serialized) == 2\n    assert serialized[0][\"name\"] == \"Mick\"\n    assert serialized[1][\"name\"] == \"Keith\"\n", "tokens": ["tests", "test_schema", "py", "def", "test_serialize_many", "schemaclass", "user1", "user", "name", "mick", "age", "123", "user2", "user", "name", "keith", "age", "456", "users", "user1", "user2", "serialized", "schemaclass", "many", "true", "dump", "users", "assert", "len", "serialized", "2", "assert", "serialized", "0", "name", "mick", "assert", "serialized", "1", "name", "keith"], "doc_len": 41}
{"doc_id": "tests/test_schema.py::test_inheriting_schema", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_inheriting_schema", "text": "文件路径: tests/test_schema.py\ndef test_inheriting_schema(user):\n    sch = ExtendedUserSchema()\n    result = sch.dump(user)\n    assert result[\"name\"] == user.name\n    user.is_old = True\n    result = sch.dump(user)\n    assert result[\"is_old\"] is True\n", "tokens": ["tests", "test_schema", "py", "def", "test_inheriting_schema", "user", "sch", "extendeduserschema", "result", "sch", "dump", "user", "assert", "result", "name", "user", "name", "user", "is_old", "true", "result", "sch", "dump", "user", "assert", "result", "is_old", "is", "true"], "doc_len": 29}
{"doc_id": "tests/test_schema.py::test_custom_field", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_custom_field", "text": "文件路径: tests/test_schema.py\ndef test_custom_field(serialized_user, user):\n    assert serialized_user[\"uppername\"] == user.name.upper()\n", "tokens": ["tests", "test_schema", "py", "def", "test_custom_field", "serialized_user", "user", "assert", "serialized_user", "uppername", "user", "name", "upper"], "doc_len": 13}
{"doc_id": "tests/test_schema.py::test_url_field", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_url_field", "text": "文件路径: tests/test_schema.py\ndef test_url_field(serialized_user, user):\n    assert serialized_user[\"homepage\"] == user.homepage\n", "tokens": ["tests", "test_schema", "py", "def", "test_url_field", "serialized_user", "user", "assert", "serialized_user", "homepage", "user", "homepage"], "doc_len": 12}
{"doc_id": "tests/test_schema.py::test_relative_url_field", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_relative_url_field", "text": "文件路径: tests/test_schema.py\ndef test_relative_url_field():\n    u = {\"name\": \"John\", \"homepage\": \"/foo\"}\n    UserRelativeUrlSchema().load(u)\n", "tokens": ["tests", "test_schema", "py", "def", "test_relative_url_field", "u", "name", "john", "homepage", "foo", "userrelativeurlschema", "load", "u"], "doc_len": 13}
{"doc_id": "tests/test_schema.py::test_stores_invalid_url_error", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_stores_invalid_url_error", "text": "文件路径: tests/test_schema.py\ndef test_stores_invalid_url_error(SchemaClass):\n    user = {\"name\": \"Steve\", \"homepage\": \"www.foo.com\"}\n    with pytest.raises(ValidationError) as excinfo:\n        SchemaClass().load(user)\n    errors = excinfo.value.messages\n    assert \"homepage\" in errors\n    expected = [\"Not a valid URL.\"]\n    assert errors[\"homepage\"] == expected\n", "tokens": ["tests", "test_schema", "py", "def", "test_stores_invalid_url_error", "schemaclass", "user", "name", "steve", "homepage", "www", "foo", "com", "with", "pytest", "raises", "validationerror", "as", "excinfo", "schemaclass", "load", "user", "errors", "excinfo", "value", "messages", "assert", "homepage", "in", "errors", "expected", "not", "a", "valid", "url", "assert", "errors", "homepage", "expected"], "doc_len": 39}
{"doc_id": "tests/test_schema.py::test_email_field", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_email_field", "text": "文件路径: tests/test_schema.py\ndef test_email_field(SchemaClass):\n    u = User(\"John\", email=\"john@example.com\")\n    s = SchemaClass().dump(u)\n    assert s[\"email\"] == \"john@example.com\"\n", "tokens": ["tests", "test_schema", "py", "def", "test_email_field", "schemaclass", "u", "user", "john", "email", "john", "example", "com", "s", "schemaclass", "dump", "u", "assert", "s", "email", "john", "example", "com"], "doc_len": 23}
{"doc_id": "tests/test_schema.py::test_stored_invalid_email", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_stored_invalid_email", "text": "文件路径: tests/test_schema.py\ndef test_stored_invalid_email():\n    u = {\"name\": \"John\", \"email\": \"johnexample.com\"}\n    with pytest.raises(ValidationError) as excinfo:\n        UserSchema().load(u)\n    errors = excinfo.value.messages\n    assert \"email\" in errors\n    assert errors[\"email\"][0] == \"Not a valid email address.\"\n", "tokens": ["tests", "test_schema", "py", "def", "test_stored_invalid_email", "u", "name", "john", "email", "johnexample", "com", "with", "pytest", "raises", "validationerror", "as", "excinfo", "userschema", "load", "u", "errors", "excinfo", "value", "messages", "assert", "email", "in", "errors", "assert", "errors", "email", "0", "not", "a", "valid", "email", "address"], "doc_len": 37}
{"doc_id": "tests/test_schema.py::test_integer_field", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_integer_field", "text": "文件路径: tests/test_schema.py\ndef test_integer_field():\n    u = User(\"John\", age=42.3)\n    serialized = UserIntSchema().dump(u)\n    assert type(serialized[\"age\"]) == int\n    assert serialized[\"age\"] == 42\n", "tokens": ["tests", "test_schema", "py", "def", "test_integer_field", "u", "user", "john", "age", "42", "3", "serialized", "userintschema", "dump", "u", "assert", "type", "serialized", "age", "int", "assert", "serialized", "age", "42"], "doc_len": 24}
{"doc_id": "tests/test_schema.py::test_as_string", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_as_string", "text": "文件路径: tests/test_schema.py\ndef test_as_string():\n    u = User(\"John\", age=42.3)\n    serialized = UserFloatStringSchema().dump(u)\n    assert type(serialized[\"age\"]) == str\n    assert math.isclose(float(serialized[\"age\"]), 42.3)\n", "tokens": ["tests", "test_schema", "py", "def", "test_as_string", "u", "user", "john", "age", "42", "3", "serialized", "userfloatstringschema", "dump", "u", "assert", "type", "serialized", "age", "str", "assert", "math", "isclose", "float", "serialized", "age", "42", "3"], "doc_len": 28}
{"doc_id": "tests/test_schema.py::test_method_field", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_method_field", "text": "文件路径: tests/test_schema.py\ndef test_method_field(SchemaClass, serialized_user):\n    assert serialized_user[\"is_old\"] is False\n    u = User(\"Joe\", age=81)\n    assert SchemaClass().dump(u)[\"is_old\"] is True\n", "tokens": ["tests", "test_schema", "py", "def", "test_method_field", "schemaclass", "serialized_user", "assert", "serialized_user", "is_old", "is", "false", "u", "user", "joe", "age", "81", "assert", "schemaclass", "dump", "u", "is_old", "is", "true"], "doc_len": 24}
{"doc_id": "tests/test_schema.py::test_function_field", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_function_field", "text": "文件路径: tests/test_schema.py\ndef test_function_field(serialized_user, user):\n    assert serialized_user[\"lowername\"] == user.name.lower()\n", "tokens": ["tests", "test_schema", "py", "def", "test_function_field", "serialized_user", "user", "assert", "serialized_user", "lowername", "user", "name", "lower"], "doc_len": 13}
{"doc_id": "tests/test_schema.py::test_fields_must_be_declared_as_instances", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_fields_must_be_declared_as_instances", "text": "文件路径: tests/test_schema.py\ndef test_fields_must_be_declared_as_instances(user):\n    class BadUserSchema(Schema):\n        name = fields.String\n\n    with pytest.raises(TypeError, match=\"must be declared as a Field instance\"):\n        BadUserSchema().dump(user)\n", "tokens": ["tests", "test_schema", "py", "def", "test_fields_must_be_declared_as_instances", "user", "class", "baduserschema", "schema", "name", "fields", "string", "with", "pytest", "raises", "typeerror", "match", "must", "be", "declared", "as", "a", "field", "instance", "baduserschema", "dump", "user"], "doc_len": 27}
{"doc_id": "tests/test_schema.py::test_serializing_generator", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_serializing_generator", "text": "文件路径: tests/test_schema.py\ndef test_serializing_generator(SchemaClass):\n    users = [User(\"Foo\"), User(\"Bar\")]\n    user_gen = (u for u in users)\n    s = SchemaClass(many=True).dump(user_gen)\n    assert len(s) == 2\n    assert s[0] == SchemaClass().dump(users[0])\n", "tokens": ["tests", "test_schema", "py", "def", "test_serializing_generator", "schemaclass", "users", "user", "foo", "user", "bar", "user_gen", "u", "for", "u", "in", "users", "s", "schemaclass", "many", "true", "dump", "user_gen", "assert", "len", "s", "2", "assert", "s", "0", "schemaclass", "dump", "users", "0"], "doc_len": 34}
{"doc_id": "tests/test_schema.py::test_serializing_empty_list_returns_empty_list", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_serializing_empty_list_returns_empty_list", "text": "文件路径: tests/test_schema.py\ndef test_serializing_empty_list_returns_empty_list():\n    assert UserSchema(many=True).dump([]) == []\n    assert UserMetaSchema(many=True).dump([]) == []\n", "tokens": ["tests", "test_schema", "py", "def", "test_serializing_empty_list_returns_empty_list", "assert", "userschema", "many", "true", "dump", "assert", "usermetaschema", "many", "true", "dump"], "doc_len": 15}
{"doc_id": "tests/test_schema.py::test_serializing_dict", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_serializing_dict", "text": "文件路径: tests/test_schema.py\ndef test_serializing_dict():\n    user = {\n        \"name\": \"foo\",\n        \"email\": \"foo@bar.com\",\n        \"age\": 42,\n        \"various_data\": {\"foo\": \"bar\"},\n    }\n    data = UserSchema().dump(user)\n    assert data[\"name\"] == \"foo\"\n    assert data[\"age\"] == 42\n    assert data[\"various_data\"] == {\"foo\": \"bar\"}\n", "tokens": ["tests", "test_schema", "py", "def", "test_serializing_dict", "user", "name", "foo", "email", "foo", "bar", "com", "age", "42", "various_data", "foo", "bar", "data", "userschema", "dump", "user", "assert", "data", "name", "foo", "assert", "data", "age", "42", "assert", "data", "various_data", "foo", "bar"], "doc_len": 34}
{"doc_id": "tests/test_schema.py::test_serializing_dict_with_meta_fields", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_serializing_dict_with_meta_fields", "text": "文件路径: tests/test_schema.py\ndef test_serializing_dict_with_meta_fields():\n    class MySchema(Schema):\n        class Meta:\n            fields = (\"foo\", \"bar\")\n\n    sch = MySchema()\n    data = sch.dump({\"foo\": 42, \"bar\": 24, \"baz\": 424})\n    assert data[\"foo\"] == 42\n    assert data[\"bar\"] == 24\n    assert \"baz\" not in data\n", "tokens": ["tests", "test_schema", "py", "def", "test_serializing_dict_with_meta_fields", "class", "myschema", "schema", "class", "meta", "fields", "foo", "bar", "sch", "myschema", "data", "sch", "dump", "foo", "42", "bar", "24", "baz", "424", "assert", "data", "foo", "42", "assert", "data", "bar", "24", "assert", "baz", "not", "in", "data"], "doc_len": 37}
{"doc_id": "tests/test_schema.py::test_exclude_in_init", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_exclude_in_init", "text": "文件路径: tests/test_schema.py\ndef test_exclude_in_init(SchemaClass, user):\n    s = SchemaClass(exclude=(\"age\", \"homepage\")).dump(user)\n    assert \"homepage\" not in s\n    assert \"age\" not in s\n    assert \"name\" in s\n", "tokens": ["tests", "test_schema", "py", "def", "test_exclude_in_init", "schemaclass", "user", "s", "schemaclass", "exclude", "age", "homepage", "dump", "user", "assert", "homepage", "not", "in", "s", "assert", "age", "not", "in", "s", "assert", "name", "in", "s"], "doc_len": 28}
{"doc_id": "tests/test_schema.py::test_only_in_init", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_only_in_init", "text": "文件路径: tests/test_schema.py\ndef test_only_in_init(SchemaClass, user):\n    s = SchemaClass(only=(\"name\", \"age\")).dump(user)\n    assert \"homepage\" not in s\n    assert \"name\" in s\n    assert \"age\" in s\n", "tokens": ["tests", "test_schema", "py", "def", "test_only_in_init", "schemaclass", "user", "s", "schemaclass", "only", "name", "age", "dump", "user", "assert", "homepage", "not", "in", "s", "assert", "name", "in", "s", "assert", "age", "in", "s"], "doc_len": 27}
{"doc_id": "tests/test_schema.py::test_invalid_only_param", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_invalid_only_param", "text": "文件路径: tests/test_schema.py\ndef test_invalid_only_param(user):\n    with pytest.raises(ValueError):\n        UserSchema(only=(\"_invalid\", \"name\")).dump(user)\n", "tokens": ["tests", "test_schema", "py", "def", "test_invalid_only_param", "user", "with", "pytest", "raises", "valueerror", "userschema", "only", "_invalid", "name", "dump", "user"], "doc_len": 16}
{"doc_id": "tests/test_schema.py::test_can_serialize_uuid", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_can_serialize_uuid", "text": "文件路径: tests/test_schema.py\ndef test_can_serialize_uuid(serialized_user, user):\n    assert serialized_user[\"uid\"] == str(user.uid)\n", "tokens": ["tests", "test_schema", "py", "def", "test_can_serialize_uuid", "serialized_user", "user", "assert", "serialized_user", "uid", "str", "user", "uid"], "doc_len": 13}
{"doc_id": "tests/test_schema.py::test_can_serialize_time", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_can_serialize_time", "text": "文件路径: tests/test_schema.py\ndef test_can_serialize_time(user, serialized_user):\n    expected = user.time_registered.isoformat()[:15]\n    assert serialized_user[\"time_registered\"] == expected\n", "tokens": ["tests", "test_schema", "py", "def", "test_can_serialize_time", "user", "serialized_user", "expected", "user", "time_registered", "isoformat", "15", "assert", "serialized_user", "time_registered", "expected"], "doc_len": 16}
{"doc_id": "tests/test_schema.py::test_invalid_dict_but_okay", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_invalid_dict_but_okay", "text": "文件路径: tests/test_schema.py\ndef test_invalid_dict_but_okay():\n    u = User(\"Joe\", various_data=\"baddict\")\n    UserSchema().dump(u)\n", "tokens": ["tests", "test_schema", "py", "def", "test_invalid_dict_but_okay", "u", "user", "joe", "various_data", "baddict", "userschema", "dump", "u"], "doc_len": 13}
{"doc_id": "tests/test_schema.py::test_json_module_is_deprecated", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_json_module_is_deprecated", "text": "文件路径: tests/test_schema.py\ndef test_json_module_is_deprecated():\n    with pytest.deprecated_call():\n\n        class UserJSONSchema(Schema):\n            name = fields.String()\n\n            class Meta:\n                json_module = mockjson\n\n    user = User(\"Joe\")\n    s = UserJSONSchema()\n    result = s.dumps(user)\n    assert result == mockjson.dumps(\"val\")\n", "tokens": ["tests", "test_schema", "py", "def", "test_json_module_is_deprecated", "with", "pytest", "deprecated_call", "class", "userjsonschema", "schema", "name", "fields", "string", "class", "meta", "json_module", "mockjson", "user", "user", "joe", "s", "userjsonschema", "result", "s", "dumps", "user", "assert", "result", "mockjson", "dumps", "val"], "doc_len": 32}
{"doc_id": "tests/test_schema.py::test_render_module", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_render_module", "text": "文件路径: tests/test_schema.py\ndef test_render_module():\n    class UserJSONSchema(Schema):\n        name = fields.String()\n\n        class Meta:\n            render_module = mockjson\n\n    user = User(\"Joe\")\n    s = UserJSONSchema()\n    result = s.dumps(user)\n    assert result == mockjson.dumps(\"val\")\n", "tokens": ["tests", "test_schema", "py", "def", "test_render_module", "class", "userjsonschema", "schema", "name", "fields", "string", "class", "meta", "render_module", "mockjson", "user", "user", "joe", "s", "userjsonschema", "result", "s", "dumps", "user", "assert", "result", "mockjson", "dumps", "val"], "doc_len": 29}
{"doc_id": "tests/test_schema.py::test_custom_error_message", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_custom_error_message", "text": "文件路径: tests/test_schema.py\ndef test_custom_error_message():\n    class ErrorSchema(Schema):\n        email = fields.Email(error_messages={\"invalid\": \"Invalid email\"})\n        homepage = fields.Url(error_messages={\"invalid\": \"Bad homepage.\"})\n        balance = fields.Decimal(error_messages={\"invalid\": \"Bad balance.\"})\n\n    u = {\"email\": \"joe.net\", \"homepage\": \"joe@example.com\", \"balance\": \"blah\"}\n    s = ErrorSchema()\n    with pytest.raises(ValidationError) as excinfo:\n        s.load(u)\n    errors = excinfo.value.messages\n    assert \"Bad balance.\" in errors[\"balance\"]\n    assert \"Bad homepage.\" in errors[\"homepage\"]\n    assert \"Invalid email\" in errors[\"email\"]\n", "tokens": ["tests", "test_schema", "py", "def", "test_custom_error_message", "class", "errorschema", "schema", "email", "fields", "email", "error_messages", "invalid", "invalid", "email", "homepage", "fields", "url", "error_messages", "invalid", "bad", "homepage", "balance", "fields", "decimal", "error_messages", "invalid", "bad", "balance", "u", "email", "joe", "net", "homepage", "joe", "example", "com", "balance", "blah", "s", "errorschema", "with", "pytest", "raises", "validationerror", "as", "excinfo", "s", "load", "u", "errors", "excinfo", "value", "messages", "assert", "bad", "balance", "in", "errors", "balance", "assert", "bad", "homepage", "in", "errors", "homepage", "assert", "invalid", "email", "in", "errors", "email"], "doc_len": 72}
{"doc_id": "tests/test_schema.py::test_custom_unknown_error_message", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_custom_unknown_error_message", "text": "文件路径: tests/test_schema.py\ndef test_custom_unknown_error_message():\n    custom_message = \"custom error message.\"\n\n    class ErrorSchema(Schema):\n        error_messages = {\"unknown\": custom_message}\n        name = fields.String()\n\n    s = ErrorSchema()\n    u = {\"name\": \"Joe\", \"age\": 13}\n    with pytest.raises(ValidationError) as excinfo:\n        s.load(u)\n    errors = excinfo.value.messages\n    assert custom_message in errors[\"age\"]\n", "tokens": ["tests", "test_schema", "py", "def", "test_custom_unknown_error_message", "custom_message", "custom", "error", "message", "class", "errorschema", "schema", "error_messages", "unknown", "custom_message", "name", "fields", "string", "s", "errorschema", "u", "name", "joe", "age", "13", "with", "pytest", "raises", "validationerror", "as", "excinfo", "s", "load", "u", "errors", "excinfo", "value", "messages", "assert", "custom_message", "in", "errors", "age"], "doc_len": 43}
{"doc_id": "tests/test_schema.py::test_custom_type_error_message", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_custom_type_error_message", "text": "文件路径: tests/test_schema.py\ndef test_custom_type_error_message():\n    custom_message = \"custom error message.\"\n\n    class ErrorSchema(Schema):\n        error_messages = {\"type\": custom_message}\n        name = fields.String()\n\n    s = ErrorSchema()\n    u = [\"Joe\"]\n    with pytest.raises(ValidationError) as excinfo:\n        s.load(u)\n    errors = excinfo.value.messages\n    assert custom_message in errors[\"_schema\"]\n", "tokens": ["tests", "test_schema", "py", "def", "test_custom_type_error_message", "custom_message", "custom", "error", "message", "class", "errorschema", "schema", "error_messages", "type", "custom_message", "name", "fields", "string", "s", "errorschema", "u", "joe", "with", "pytest", "raises", "validationerror", "as", "excinfo", "s", "load", "u", "errors", "excinfo", "value", "messages", "assert", "custom_message", "in", "errors", "_schema"], "doc_len": 40}
{"doc_id": "tests/test_schema.py::test_custom_type_error_message_with_many", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_custom_type_error_message_with_many", "text": "文件路径: tests/test_schema.py\ndef test_custom_type_error_message_with_many():\n    custom_message = \"custom error message.\"\n\n    class ErrorSchema(Schema):\n        error_messages = {\"type\": custom_message}\n        name = fields.String()\n\n    s = ErrorSchema(many=True)\n    u = {\"name\": \"Joe\"}\n    with pytest.raises(ValidationError) as excinfo:\n        s.load(u)\n    errors = excinfo.value.messages\n    assert custom_message in errors[\"_schema\"]\n", "tokens": ["tests", "test_schema", "py", "def", "test_custom_type_error_message_with_many", "custom_message", "custom", "error", "message", "class", "errorschema", "schema", "error_messages", "type", "custom_message", "name", "fields", "string", "s", "errorschema", "many", "true", "u", "name", "joe", "with", "pytest", "raises", "validationerror", "as", "excinfo", "s", "load", "u", "errors", "excinfo", "value", "messages", "assert", "custom_message", "in", "errors", "_schema"], "doc_len": 43}
{"doc_id": "tests/test_schema.py::test_custom_error_messages_with_inheritance", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_custom_error_messages_with_inheritance", "text": "文件路径: tests/test_schema.py\ndef test_custom_error_messages_with_inheritance():\n    parent_type_message = \"parent type error message.\"\n    parent_unknown_message = \"parent unknown error message.\"\n    child_type_message = \"child type error message.\"\n\n    class ParentSchema(Schema):\n        error_messages = {\n            \"type\": parent_type_message,\n            \"unknown\": parent_unknown_message,\n        }\n        name = fields.String()\n\n    class ChildSchema(ParentSchema):\n        error_messages = {\"type\": child_type_message}\n\n    unknown_user = {\"name\": \"Eleven\", \"age\": 12}\n    type_user = 11\n\n    parent_schema = ParentSchema()\n    with pytest.raises(ValidationError) as excinfo:\n        parent_schema.load(unknown_user)\n    assert parent_unknown_message in excinfo.value.messages[\"age\"]\n    with pytest.raises(ValidationError) as excinfo:\n        parent_schema.load(type_user)\n    assert parent_type_message in excinfo.value.messages[\"_schema\"]\n\n    child_schema = ChildSchema()\n    with pytest.raises(ValidationError) as excinfo:\n        child_schema.load(unknown_user)\n    assert parent_unknown_message in excinfo.value.messages[\"age\"]\n    with pytest.raises(ValidationError) as excinfo:\n        child_schema.load(type_user)\n    assert child_type_message in excinfo.value.messages[\"_schema\"]\n", "tokens": ["tests", "test_schema", "py", "def", "test_custom_error_messages_with_inheritance", "parent_type_message", "parent", "type", "error", "message", "parent_unknown_message", "parent", "unknown", "error", "message", "child_type_message", "child", "type", "error", "message", "class", "parentschema", "schema", "error_messages", "type", "parent_type_message", "unknown", "parent_unknown_message", "name", "fields", "string", "class", "childschema", "parentschema", "error_messages", "type", "child_type_message", "unknown_user", "name", "eleven", "age", "12", "type_user", "11", "parent_schema", "parentschema", "with", "pytest", "raises", "validationerror", "as", "excinfo", "parent_schema", "load", "unknown_user", "assert", "parent_unknown_message", "in", "excinfo", "value", "messages", "age", "with", "pytest", "raises", "validationerror", "as", "excinfo", "parent_schema", "load", "type_user", "assert", "parent_type_message", "in", "excinfo", "value", "messages", "_schema", "child_schema", "childschema", "with", "pytest", "raises", "validationerror", "as", "excinfo", "child_schema", "load", "unknown_user", "assert", "parent_unknown_message", "in", "excinfo", "value", "messages", "age", "with", "pytest", "raises", "validationerror", "as", "excinfo", "child_schema", "load", "type_user", "assert", "child_type_message", "in", "excinfo", "value", "messages", "_schema"], "doc_len": 112}
{"doc_id": "tests/test_schema.py::test_load_errors_with_many", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_load_errors_with_many", "text": "文件路径: tests/test_schema.py\ndef test_load_errors_with_many():\n    class ErrorSchema(Schema):\n        email = fields.Email()\n\n    data = [\n        {\"email\": \"bademail\"},\n        {\"email\": \"goo@email.com\"},\n        {\"email\": \"anotherbademail\"},\n    ]\n\n    with pytest.raises(ValidationError) as excinfo:\n        ErrorSchema(many=True).load(data)\n    errors = excinfo.value.messages\n    assert 0 in errors\n    assert 2 in errors\n    assert \"Not a valid email address.\" in errors[0][\"email\"][0]\n    assert \"Not a valid email address.\" in errors[2][\"email\"][0]\n", "tokens": ["tests", "test_schema", "py", "def", "test_load_errors_with_many", "class", "errorschema", "schema", "email", "fields", "email", "data", "email", "bademail", "email", "goo", "email", "com", "email", "anotherbademail", "with", "pytest", "raises", "validationerror", "as", "excinfo", "errorschema", "many", "true", "load", "data", "errors", "excinfo", "value", "messages", "assert", "0", "in", "errors", "assert", "2", "in", "errors", "assert", "not", "a", "valid", "email", "address", "in", "errors", "0", "email", "0", "assert", "not", "a", "valid", "email", "address", "in", "errors", "2", "email", "0"], "doc_len": 65}
{"doc_id": "tests/test_schema.py::test_error_raised_if_fields_option_is_not_list", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_error_raised_if_fields_option_is_not_list", "text": "文件路径: tests/test_schema.py\ndef test_error_raised_if_fields_option_is_not_list():\n    with pytest.raises(ValueError):\n\n        class BadSchema(Schema):\n            name = fields.String()\n\n            class Meta:\n                fields = \"name\"\n", "tokens": ["tests", "test_schema", "py", "def", "test_error_raised_if_fields_option_is_not_list", "with", "pytest", "raises", "valueerror", "class", "badschema", "schema", "name", "fields", "string", "class", "meta", "fields", "name"], "doc_len": 19}
{"doc_id": "tests/test_schema.py::test_error_raised_if_additional_option_is_not_list", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_error_raised_if_additional_option_is_not_list", "text": "文件路径: tests/test_schema.py\ndef test_error_raised_if_additional_option_is_not_list():\n    with pytest.raises(ValueError):\n\n        class BadSchema(Schema):\n            name = fields.String()\n\n            class Meta:\n                additional = \"email\"\n", "tokens": ["tests", "test_schema", "py", "def", "test_error_raised_if_additional_option_is_not_list", "with", "pytest", "raises", "valueerror", "class", "badschema", "schema", "name", "fields", "string", "class", "meta", "additional", "email"], "doc_len": 19}
{"doc_id": "tests/test_schema.py::test_nested_custom_set_in_exclude_reusing_schema", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_nested_custom_set_in_exclude_reusing_schema", "text": "文件路径: tests/test_schema.py\ndef test_nested_custom_set_in_exclude_reusing_schema():\n    class CustomSet:\n        # This custom set is to allow the obj check in BaseSchema.__filter_fields\n        # to pass, since it'll be a valid instance, and this class overrides\n        # getitem method to allow the hasattr check to pass too, which will try\n        # to access the first obj index and will simulate a IndexError throwing.\n        # e.g. SqlAlchemy.Query is a valid use case for this 'obj'.\n\n        def __getitem__(self, item):\n            return [][item]\n\n    class ChildSchema(Schema):\n        foo = fields.Field(required=True)\n        bar = fields.Field()\n\n        class Meta:\n            only = (\"bar\",)\n\n    class ParentSchema(Schema):\n        child = fields.Nested(ChildSchema, many=True, exclude=(\"foo\",))\n\n    sch = ParentSchema()\n    obj = dict(child=CustomSet())\n    sch.dumps(obj)\n    data = dict(child=[{\"bar\": 1}])\n    sch.load(data, partial=True)\n", "tokens": ["tests", "test_schema", "py", "def", "test_nested_custom_set_in_exclude_reusing_schema", "class", "customset", "this", "custom", "set", "is", "to", "allow", "the", "obj", "check", "in", "baseschema", "__filter_fields", "to", "pass", "since", "it", "ll", "be", "a", "valid", "instance", "and", "this", "class", "overrides", "getitem", "method", "to", "allow", "the", "hasattr", "check", "to", "pass", "too", "which", "will", "try", "to", "access", "the", "first", "obj", "index", "and", "will", "simulate", "a", "indexerror", "throwing", "e", "g", "sqlalchemy", "query", "is", "a", "valid", "use", "case", "for", "this", "obj", "def", "__getitem__", "self", "item", "return", "item", "class", "childschema", "schema", "foo", "fields", "field", "required", "true", "bar", "fields", "field", "class", "meta", "only", "bar", "class", "parentschema", "schema", "child", "fields", "nested", "childschema", "many", "true", "exclude", "foo", "sch", "parentschema", "obj", "dict", "child", "customset", "sch", "dumps", "obj", "data", "dict", "child", "bar", "1", "sch", "load", "data", "partial", "true"], "doc_len": 120}
{"doc_id": "tests/test_schema.py::test_nested_only", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_nested_only", "text": "文件路径: tests/test_schema.py\ndef test_nested_only():\n    class ChildSchema(Schema):\n        foo = fields.Field()\n        bar = fields.Field()\n        baz = fields.Field()\n\n    class ParentSchema(Schema):\n        bla = fields.Field()\n        bli = fields.Field()\n        blubb = fields.Nested(ChildSchema)\n\n    sch = ParentSchema(only=(\"bla\", \"blubb.foo\", \"blubb.bar\"))\n    data = dict(bla=1, bli=2, blubb=dict(foo=42, bar=24, baz=242))\n    result = sch.dump(data)\n    assert \"bla\" in result\n    assert \"blubb\" in result\n    assert \"bli\" not in result\n    child = result[\"blubb\"]\n    assert \"foo\" in child\n    assert \"bar\" in child\n    assert \"baz\" not in child\n", "tokens": ["tests", "test_schema", "py", "def", "test_nested_only", "class", "childschema", "schema", "foo", "fields", "field", "bar", "fields", "field", "baz", "fields", "field", "class", "parentschema", "schema", "bla", "fields", "field", "bli", "fields", "field", "blubb", "fields", "nested", "childschema", "sch", "parentschema", "only", "bla", "blubb", "foo", "blubb", "bar", "data", "dict", "bla", "1", "bli", "2", "blubb", "dict", "foo", "42", "bar", "24", "baz", "242", "result", "sch", "dump", "data", "assert", "bla", "in", "result", "assert", "blubb", "in", "result", "assert", "bli", "not", "in", "result", "child", "result", "blubb", "assert", "foo", "in", "child", "assert", "bar", "in", "child", "assert", "baz", "not", "in", "child"], "doc_len": 85}
{"doc_id": "tests/test_schema.py::test_nested_only_inheritance", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_nested_only_inheritance", "text": "文件路径: tests/test_schema.py\ndef test_nested_only_inheritance():\n    class ChildSchema(Schema):\n        foo = fields.Field()\n        bar = fields.Field()\n        baz = fields.Field()\n\n    class ParentSchema(Schema):\n        bla = fields.Field()\n        bli = fields.Field()\n        blubb = fields.Nested(ChildSchema, only=(\"foo\", \"bar\"))\n\n    sch = ParentSchema(only=(\"blubb.foo\", \"blubb.baz\"))\n    data = dict(bla=1, bli=2, blubb=dict(foo=42, bar=24, baz=242))\n    result = sch.dump(data)\n    assert \"bla\" not in result\n    assert \"blubb\" in result\n    assert \"bli\" not in result\n    child = result[\"blubb\"]\n    assert \"foo\" in child\n    assert \"bar\" not in child\n    assert \"baz\" not in child\n", "tokens": ["tests", "test_schema", "py", "def", "test_nested_only_inheritance", "class", "childschema", "schema", "foo", "fields", "field", "bar", "fields", "field", "baz", "fields", "field", "class", "parentschema", "schema", "bla", "fields", "field", "bli", "fields", "field", "blubb", "fields", "nested", "childschema", "only", "foo", "bar", "sch", "parentschema", "only", "blubb", "foo", "blubb", "baz", "data", "dict", "bla", "1", "bli", "2", "blubb", "dict", "foo", "42", "bar", "24", "baz", "242", "result", "sch", "dump", "data", "assert", "bla", "not", "in", "result", "assert", "blubb", "in", "result", "assert", "bli", "not", "in", "result", "child", "result", "blubb", "assert", "foo", "in", "child", "assert", "bar", "not", "in", "child", "assert", "baz", "not", "in", "child"], "doc_len": 89}
{"doc_id": "tests/test_schema.py::test_nested_only_empty_inheritance", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_nested_only_empty_inheritance", "text": "文件路径: tests/test_schema.py\ndef test_nested_only_empty_inheritance():\n    class ChildSchema(Schema):\n        foo = fields.Field()\n        bar = fields.Field()\n        baz = fields.Field()\n\n    class ParentSchema(Schema):\n        bla = fields.Field()\n        bli = fields.Field()\n        blubb = fields.Nested(ChildSchema, only=(\"bar\",))\n\n    sch = ParentSchema(only=(\"blubb.foo\",))\n    data = dict(bla=1, bli=2, blubb=dict(foo=42, bar=24, baz=242))\n    result = sch.dump(data)\n    assert \"bla\" not in result\n    assert \"blubb\" in result\n    assert \"bli\" not in result\n    child = result[\"blubb\"]\n    assert \"foo\" not in child\n    assert \"bar\" not in child\n    assert \"baz\" not in child\n", "tokens": ["tests", "test_schema", "py", "def", "test_nested_only_empty_inheritance", "class", "childschema", "schema", "foo", "fields", "field", "bar", "fields", "field", "baz", "fields", "field", "class", "parentschema", "schema", "bla", "fields", "field", "bli", "fields", "field", "blubb", "fields", "nested", "childschema", "only", "bar", "sch", "parentschema", "only", "blubb", "foo", "data", "dict", "bla", "1", "bli", "2", "blubb", "dict", "foo", "42", "bar", "24", "baz", "242", "result", "sch", "dump", "data", "assert", "bla", "not", "in", "result", "assert", "blubb", "in", "result", "assert", "bli", "not", "in", "result", "child", "result", "blubb", "assert", "foo", "not", "in", "child", "assert", "bar", "not", "in", "child", "assert", "baz", "not", "in", "child"], "doc_len": 87}
{"doc_id": "tests/test_schema.py::test_nested_exclude", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_nested_exclude", "text": "文件路径: tests/test_schema.py\ndef test_nested_exclude():\n    class ChildSchema(Schema):\n        foo = fields.Field()\n        bar = fields.Field()\n        baz = fields.Field()\n\n    class ParentSchema(Schema):\n        bla = fields.Field()\n        bli = fields.Field()\n        blubb = fields.Nested(ChildSchema)\n\n    sch = ParentSchema(exclude=(\"bli\", \"blubb.baz\"))\n    data = dict(bla=1, bli=2, blubb=dict(foo=42, bar=24, baz=242))\n    result = sch.dump(data)\n    assert \"bla\" in result\n    assert \"blubb\" in result\n    assert \"bli\" not in result\n    child = result[\"blubb\"]\n    assert \"foo\" in child\n    assert \"bar\" in child\n    assert \"baz\" not in child\n", "tokens": ["tests", "test_schema", "py", "def", "test_nested_exclude", "class", "childschema", "schema", "foo", "fields", "field", "bar", "fields", "field", "baz", "fields", "field", "class", "parentschema", "schema", "bla", "fields", "field", "bli", "fields", "field", "blubb", "fields", "nested", "childschema", "sch", "parentschema", "exclude", "bli", "blubb", "baz", "data", "dict", "bla", "1", "bli", "2", "blubb", "dict", "foo", "42", "bar", "24", "baz", "242", "result", "sch", "dump", "data", "assert", "bla", "in", "result", "assert", "blubb", "in", "result", "assert", "bli", "not", "in", "result", "child", "result", "blubb", "assert", "foo", "in", "child", "assert", "bar", "in", "child", "assert", "baz", "not", "in", "child"], "doc_len": 83}
{"doc_id": "tests/test_schema.py::test_nested_exclude_inheritance", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_nested_exclude_inheritance", "text": "文件路径: tests/test_schema.py\ndef test_nested_exclude_inheritance():\n    class ChildSchema(Schema):\n        foo = fields.Field()\n        bar = fields.Field()\n        baz = fields.Field()\n\n    class ParentSchema(Schema):\n        bla = fields.Field()\n        bli = fields.Field()\n        blubb = fields.Nested(ChildSchema, exclude=(\"baz\",))\n\n    sch = ParentSchema(exclude=(\"blubb.foo\",))\n    data = dict(bla=1, bli=2, blubb=dict(foo=42, bar=24, baz=242))\n    result = sch.dump(data)\n    assert \"bla\" in result\n    assert \"blubb\" in result\n    assert \"bli\" in result\n    child = result[\"blubb\"]\n    assert \"foo\" not in child\n    assert \"bar\" in child\n    assert \"baz\" not in child\n", "tokens": ["tests", "test_schema", "py", "def", "test_nested_exclude_inheritance", "class", "childschema", "schema", "foo", "fields", "field", "bar", "fields", "field", "baz", "fields", "field", "class", "parentschema", "schema", "bla", "fields", "field", "bli", "fields", "field", "blubb", "fields", "nested", "childschema", "exclude", "baz", "sch", "parentschema", "exclude", "blubb", "foo", "data", "dict", "bla", "1", "bli", "2", "blubb", "dict", "foo", "42", "bar", "24", "baz", "242", "result", "sch", "dump", "data", "assert", "bla", "in", "result", "assert", "blubb", "in", "result", "assert", "bli", "in", "result", "child", "result", "blubb", "assert", "foo", "not", "in", "child", "assert", "bar", "in", "child", "assert", "baz", "not", "in", "child"], "doc_len": 84}
{"doc_id": "tests/test_schema.py::test_nested_only_and_exclude", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_nested_only_and_exclude", "text": "文件路径: tests/test_schema.py\ndef test_nested_only_and_exclude():\n    class ChildSchema(Schema):\n        foo = fields.Field()\n        bar = fields.Field()\n        baz = fields.Field()\n\n    class ParentSchema(Schema):\n        bla = fields.Field()\n        bli = fields.Field()\n        blubb = fields.Nested(ChildSchema)\n\n    sch = ParentSchema(only=(\"bla\", \"blubb.foo\", \"blubb.bar\"), exclude=(\"blubb.foo\",))\n    data = dict(bla=1, bli=2, blubb=dict(foo=42, bar=24, baz=242))\n    result = sch.dump(data)\n    assert \"bla\" in result\n    assert \"blubb\" in result\n    assert \"bli\" not in result\n    child = result[\"blubb\"]\n    assert \"foo\" not in child\n    assert \"bar\" in child\n    assert \"baz\" not in child\n", "tokens": ["tests", "test_schema", "py", "def", "test_nested_only_and_exclude", "class", "childschema", "schema", "foo", "fields", "field", "bar", "fields", "field", "baz", "fields", "field", "class", "parentschema", "schema", "bla", "fields", "field", "bli", "fields", "field", "blubb", "fields", "nested", "childschema", "sch", "parentschema", "only", "bla", "blubb", "foo", "blubb", "bar", "exclude", "blubb", "foo", "data", "dict", "bla", "1", "bli", "2", "blubb", "dict", "foo", "42", "bar", "24", "baz", "242", "result", "sch", "dump", "data", "assert", "bla", "in", "result", "assert", "blubb", "in", "result", "assert", "bli", "not", "in", "result", "child", "result", "blubb", "assert", "foo", "not", "in", "child", "assert", "bar", "in", "child", "assert", "baz", "not", "in", "child"], "doc_len": 89}
{"doc_id": "tests/test_schema.py::test_nested_only_then_exclude_inheritance", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_nested_only_then_exclude_inheritance", "text": "文件路径: tests/test_schema.py\ndef test_nested_only_then_exclude_inheritance():\n    class ChildSchema(Schema):\n        foo = fields.Field()\n        bar = fields.Field()\n        baz = fields.Field()\n\n    class ParentSchema(Schema):\n        bla = fields.Field()\n        bli = fields.Field()\n        blubb = fields.Nested(ChildSchema, only=(\"foo\", \"bar\"))\n\n    sch = ParentSchema(exclude=(\"blubb.foo\",))\n    data = dict(bla=1, bli=2, blubb=dict(foo=42, bar=24, baz=242))\n    result = sch.dump(data)\n    assert \"bla\" in result\n    assert \"blubb\" in result\n    assert \"bli\" in result\n    child = result[\"blubb\"]\n    assert \"foo\" not in child\n    assert \"bar\" in child\n    assert \"baz\" not in child\n", "tokens": ["tests", "test_schema", "py", "def", "test_nested_only_then_exclude_inheritance", "class", "childschema", "schema", "foo", "fields", "field", "bar", "fields", "field", "baz", "fields", "field", "class", "parentschema", "schema", "bla", "fields", "field", "bli", "fields", "field", "blubb", "fields", "nested", "childschema", "only", "foo", "bar", "sch", "parentschema", "exclude", "blubb", "foo", "data", "dict", "bla", "1", "bli", "2", "blubb", "dict", "foo", "42", "bar", "24", "baz", "242", "result", "sch", "dump", "data", "assert", "bla", "in", "result", "assert", "blubb", "in", "result", "assert", "bli", "in", "result", "child", "result", "blubb", "assert", "foo", "not", "in", "child", "assert", "bar", "in", "child", "assert", "baz", "not", "in", "child"], "doc_len": 85}
{"doc_id": "tests/test_schema.py::test_nested_exclude_then_only_inheritance", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_nested_exclude_then_only_inheritance", "text": "文件路径: tests/test_schema.py\ndef test_nested_exclude_then_only_inheritance():\n    class ChildSchema(Schema):\n        foo = fields.Field()\n        bar = fields.Field()\n        baz = fields.Field()\n\n    class ParentSchema(Schema):\n        bla = fields.Field()\n        bli = fields.Field()\n        blubb = fields.Nested(ChildSchema, exclude=(\"foo\",))\n\n    sch = ParentSchema(only=(\"blubb.bar\",))\n    data = dict(bla=1, bli=2, blubb=dict(foo=42, bar=24, baz=242))\n    result = sch.dump(data)\n    assert \"bla\" not in result\n    assert \"blubb\" in result\n    assert \"bli\" not in result\n    child = result[\"blubb\"]\n    assert \"foo\" not in child\n    assert \"bar\" in child\n    assert \"baz\" not in child\n", "tokens": ["tests", "test_schema", "py", "def", "test_nested_exclude_then_only_inheritance", "class", "childschema", "schema", "foo", "fields", "field", "bar", "fields", "field", "baz", "fields", "field", "class", "parentschema", "schema", "bla", "fields", "field", "bli", "fields", "field", "blubb", "fields", "nested", "childschema", "exclude", "foo", "sch", "parentschema", "only", "blubb", "bar", "data", "dict", "bla", "1", "bli", "2", "blubb", "dict", "foo", "42", "bar", "24", "baz", "242", "result", "sch", "dump", "data", "assert", "bla", "not", "in", "result", "assert", "blubb", "in", "result", "assert", "bli", "not", "in", "result", "child", "result", "blubb", "assert", "foo", "not", "in", "child", "assert", "bar", "in", "child", "assert", "baz", "not", "in", "child"], "doc_len": 86}
{"doc_id": "tests/test_schema.py::test_nested_exclude_and_only_inheritance", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_nested_exclude_and_only_inheritance", "text": "文件路径: tests/test_schema.py\ndef test_nested_exclude_and_only_inheritance():\n    class ChildSchema(Schema):\n        foo = fields.Field()\n        bar = fields.Field()\n        baz = fields.Field()\n        ban = fields.Field()\n        fuu = fields.Field()\n\n    class ParentSchema(Schema):\n        bla = fields.Field()\n        bli = fields.Field()\n        blubb = fields.Nested(\n            ChildSchema, only=(\"foo\", \"bar\", \"baz\", \"ban\"), exclude=(\"foo\",)\n        )\n\n    sch = ParentSchema(\n        only=(\"blubb.foo\", \"blubb.bar\", \"blubb.baz\"), exclude=(\"blubb.baz\",)\n    )\n    data = dict(bla=1, bli=2, blubb=dict(foo=42, bar=24, baz=242))\n    result = sch.dump(data)\n    assert \"bla\" not in result\n    assert \"blubb\" in result\n    assert \"bli\" not in result\n    child = result[\"blubb\"]\n    assert \"foo\" not in child\n    assert \"bar\" in child\n    assert \"baz\" not in child\n    assert \"ban\" not in child\n    assert \"fuu\" not in child\n", "tokens": ["tests", "test_schema", "py", "def", "test_nested_exclude_and_only_inheritance", "class", "childschema", "schema", "foo", "fields", "field", "bar", "fields", "field", "baz", "fields", "field", "ban", "fields", "field", "fuu", "fields", "field", "class", "parentschema", "schema", "bla", "fields", "field", "bli", "fields", "field", "blubb", "fields", "nested", "childschema", "only", "foo", "bar", "baz", "ban", "exclude", "foo", "sch", "parentschema", "only", "blubb", "foo", "blubb", "bar", "blubb", "baz", "exclude", "blubb", "baz", "data", "dict", "bla", "1", "bli", "2", "blubb", "dict", "foo", "42", "bar", "24", "baz", "242", "result", "sch", "dump", "data", "assert", "bla", "not", "in", "result", "assert", "blubb", "in", "result", "assert", "bli", "not", "in", "result", "child", "result", "blubb", "assert", "foo", "not", "in", "child", "assert", "bar", "in", "child", "assert", "baz", "not", "in", "child", "assert", "ban", "not", "in", "child", "assert", "fuu", "not", "in", "child"], "doc_len": 114}
{"doc_id": "tests/test_schema.py::test_meta_nested_exclude", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_meta_nested_exclude", "text": "文件路径: tests/test_schema.py\ndef test_meta_nested_exclude():\n    class ChildSchema(Schema):\n        foo = fields.Field()\n        bar = fields.Field()\n        baz = fields.Field()\n\n    class ParentSchema(Schema):\n        bla = fields.Field()\n        bli = fields.Field()\n        blubb = fields.Nested(ChildSchema)\n\n        class Meta:\n            exclude = (\"blubb.foo\",)\n\n    data = dict(bla=1, bli=2, blubb=dict(foo=42, bar=24, baz=242))\n\n    sch = ParentSchema()\n    result = sch.dump(data)\n    assert \"bla\" in result\n    assert \"blubb\" in result\n    assert \"bli\" in result\n    child = result[\"blubb\"]\n    assert \"foo\" not in child\n    assert \"bar\" in child\n    assert \"baz\" in child\n\n    # Test fields with dot notations in Meta.exclude on multiple instantiations\n    # Regression test for https://github.com/marshmallow-code/marshmallow/issues/1212\n    sch = ParentSchema()\n    result = sch.dump(data)\n    assert \"bla\" in result\n    assert \"blubb\" in result\n    assert \"bli\" in result\n    child = result[\"blubb\"]\n    assert \"foo\" not in child\n    assert \"bar\" in child\n    assert \"baz\" in child\n", "tokens": ["tests", "test_schema", "py", "def", "test_meta_nested_exclude", "class", "childschema", "schema", "foo", "fields", "field", "bar", "fields", "field", "baz", "fields", "field", "class", "parentschema", "schema", "bla", "fields", "field", "bli", "fields", "field", "blubb", "fields", "nested", "childschema", "class", "meta", "exclude", "blubb", "foo", "data", "dict", "bla", "1", "bli", "2", "blubb", "dict", "foo", "42", "bar", "24", "baz", "242", "sch", "parentschema", "result", "sch", "dump", "data", "assert", "bla", "in", "result", "assert", "blubb", "in", "result", "assert", "bli", "in", "result", "child", "result", "blubb", "assert", "foo", "not", "in", "child", "assert", "bar", "in", "child", "assert", "baz", "in", "child", "test", "fields", "with", "dot", "notations", "in", "meta", "exclude", "on", "multiple", "instantiations", "regression", "test", "for", "https", "github", "com", "marshmallow", "code", "marshmallow", "issues", "1212", "sch", "parentschema", "result", "sch", "dump", "data", "assert", "bla", "in", "result", "assert", "blubb", "in", "result", "assert", "bli", "in", "result", "child", "result", "blubb", "assert", "foo", "not", "in", "child", "assert", "bar", "in", "child", "assert", "baz", "in", "child"], "doc_len": 139}
{"doc_id": "tests/test_schema.py::test_nested_custom_set_not_implementing_getitem", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_nested_custom_set_not_implementing_getitem", "text": "文件路径: tests/test_schema.py\ndef test_nested_custom_set_not_implementing_getitem():\n    \"\"\"\n    This test checks that Marshmallow can serialize implementations of\n    :mod:`collections.abc.MutableSequence`, with ``__getitem__`` arguments\n    that are not integers.\n    \"\"\"\n\n    class ListLikeParent:\n        \"\"\"\n        Implements a list-like object that can get children using a\n        non-integer key\n        \"\"\"\n\n        def __init__(self, required_key, child):\n            \"\"\"\n            :param required_key: The key to use in ``__getitem__`` in order\n                to successfully get the ``child``\n            :param child: The return value of the ``child`` if\n            ``__getitem__`` succeeds\n            \"\"\"\n            self.children = {required_key: child}\n\n    class Child:\n        \"\"\"\n        Implements an object with some attribute\n        \"\"\"\n\n        def __init__(self, attribute):\n            \"\"\"\n            :param str attribute: The attribute to initialize\n            \"\"\"\n            self.attribute = attribute\n\n    class ChildSchema(Schema):\n        \"\"\"\n        The marshmallow schema for the child\n        \"\"\"\n\n        attribute = fields.Str()\n\n    class ParentSchema(Schema):\n        \"\"\"\n        The schema for the parent\n        \"\"\"\n\n        children = fields.Nested(ChildSchema, many=True)\n\n    attribute = \"Foo\"\n    required_key = \"key\"\n    child = Child(attribute)\n\n    parent = ListLikeParent(required_key, child)\n\n    ParentSchema().dump(parent)\n", "tokens": ["tests", "test_schema", "py", "def", "test_nested_custom_set_not_implementing_getitem", "this", "test", "checks", "that", "marshmallow", "can", "serialize", "implementations", "of", "mod", "collections", "abc", "mutablesequence", "with", "__getitem__", "arguments", "that", "are", "not", "integers", "class", "listlikeparent", "implements", "a", "list", "like", "object", "that", "can", "get", "children", "using", "a", "non", "integer", "key", "def", "__init__", "self", "required_key", "child", "param", "required_key", "the", "key", "to", "use", "in", "__getitem__", "in", "order", "to", "successfully", "get", "the", "child", "param", "child", "the", "return", "value", "of", "the", "child", "if", "__getitem__", "succeeds", "self", "children", "required_key", "child", "class", "child", "implements", "an", "object", "with", "some", "attribute", "def", "__init__", "self", "attribute", "param", "str", "attribute", "the", "attribute", "to", "initialize", "self", "attribute", "attribute", "class", "childschema", "schema", "the", "marshmallow", "schema", "for", "the", "child", "attribute", "fields", "str", "class", "parentschema", "schema", "the", "schema", "for", "the", "parent", "children", "fields", "nested", "childschema", "many", "true", "attribute", "foo", "required_key", "key", "child", "child", "attribute", "parent", "listlikeparent", "required_key", "child", "parentschema", "dump", "parent"], "doc_len": 138}
{"doc_id": "tests/test_schema.py::test_deeply_nested_only_and_exclude", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_deeply_nested_only_and_exclude", "text": "文件路径: tests/test_schema.py\ndef test_deeply_nested_only_and_exclude():\n    class GrandChildSchema(Schema):\n        goo = fields.Field()\n        gah = fields.Field()\n        bah = fields.Field()\n\n    class ChildSchema(Schema):\n        foo = fields.Field()\n        bar = fields.Field()\n        flubb = fields.Nested(GrandChildSchema)\n\n    class ParentSchema(Schema):\n        bla = fields.Field()\n        bli = fields.Field()\n        blubb = fields.Nested(ChildSchema)\n\n    sch = ParentSchema(\n        only=(\"bla\", \"blubb.foo\", \"blubb.flubb.goo\", \"blubb.flubb.gah\"),\n        exclude=(\"blubb.flubb.goo\",),\n    )\n    data = dict(bla=1, bli=2, blubb=dict(foo=3, bar=4, flubb=dict(goo=5, gah=6, bah=7)))\n    result = sch.dump(data)\n    assert \"bla\" in result\n    assert \"blubb\" in result\n    assert \"bli\" not in result\n    child = result[\"blubb\"]\n    assert \"foo\" in child\n    assert \"flubb\" in child\n    assert \"bar\" not in child\n    grand_child = child[\"flubb\"]\n    assert \"gah\" in grand_child\n    assert \"goo\" not in grand_child\n    assert \"bah\" not in grand_child\n", "tokens": ["tests", "test_schema", "py", "def", "test_deeply_nested_only_and_exclude", "class", "grandchildschema", "schema", "goo", "fields", "field", "gah", "fields", "field", "bah", "fields", "field", "class", "childschema", "schema", "foo", "fields", "field", "bar", "fields", "field", "flubb", "fields", "nested", "grandchildschema", "class", "parentschema", "schema", "bla", "fields", "field", "bli", "fields", "field", "blubb", "fields", "nested", "childschema", "sch", "parentschema", "only", "bla", "blubb", "foo", "blubb", "flubb", "goo", "blubb", "flubb", "gah", "exclude", "blubb", "flubb", "goo", "data", "dict", "bla", "1", "bli", "2", "blubb", "dict", "foo", "3", "bar", "4", "flubb", "dict", "goo", "5", "gah", "6", "bah", "7", "result", "sch", "dump", "data", "assert", "bla", "in", "result", "assert", "blubb", "in", "result", "assert", "bli", "not", "in", "result", "child", "result", "blubb", "assert", "foo", "in", "child", "assert", "flubb", "in", "child", "assert", "bar", "not", "in", "child", "grand_child", "child", "flubb", "assert", "gah", "in", "grand_child", "assert", "goo", "not", "in", "grand_child", "assert", "bah", "not", "in", "grand_child"], "doc_len": 129}
{"doc_id": "tests/test_schema.py::test_data_key_collision", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_data_key_collision", "text": "文件路径: tests/test_schema.py\ndef test_data_key_collision(data_key):\n    class MySchema(Schema):\n        f1 = fields.Field()\n        f2 = fields.Field(data_key=data_key)\n        f3 = fields.Field(data_key=\"f5\")\n        f4 = fields.Field(data_key=\"f1\", load_only=True)\n\n    if data_key is None:\n        MySchema()\n    else:\n        with pytest.raises(ValueError, match=data_key):\n            MySchema()\n", "tokens": ["tests", "test_schema", "py", "def", "test_data_key_collision", "data_key", "class", "myschema", "schema", "f1", "fields", "field", "f2", "fields", "field", "data_key", "data_key", "f3", "fields", "field", "data_key", "f5", "f4", "fields", "field", "data_key", "f1", "load_only", "true", "if", "data_key", "is", "none", "myschema", "else", "with", "pytest", "raises", "valueerror", "match", "data_key", "myschema"], "doc_len": 42}
{"doc_id": "tests/test_schema.py::test_attribute_collision", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_attribute_collision", "text": "文件路径: tests/test_schema.py\ndef test_attribute_collision(attribute):\n    class MySchema(Schema):\n        f1 = fields.Field()\n        f2 = fields.Field(attribute=attribute)\n        f3 = fields.Field(attribute=\"f5\")\n        f4 = fields.Field(attribute=\"f1\", dump_only=True)\n\n    if attribute is None:\n        MySchema()\n    else:\n        with pytest.raises(ValueError, match=attribute):\n            MySchema()\n", "tokens": ["tests", "test_schema", "py", "def", "test_attribute_collision", "attribute", "class", "myschema", "schema", "f1", "fields", "field", "f2", "fields", "field", "attribute", "attribute", "f3", "fields", "field", "attribute", "f5", "f4", "fields", "field", "attribute", "f1", "dump_only", "true", "if", "attribute", "is", "none", "myschema", "else", "with", "pytest", "raises", "valueerror", "match", "attribute", "myschema"], "doc_len": 42}
{"doc_id": "tests/test_schema.py::TestDeeplyNestedLoadOnly.schema", "file_path": "tests/test_schema.py", "class_name": "TestDeeplyNestedLoadOnly", "func_name": "schema", "text": "文件路径: tests/test_schema.py, 类名: TestDeeplyNestedLoadOnly\n    def schema(self):\n        class GrandChildSchema(Schema):\n            str_dump_only = fields.String()\n            str_load_only = fields.String()\n            str_regular = fields.String()\n\n        class ChildSchema(Schema):\n            str_dump_only = fields.String()\n            str_load_only = fields.String()\n            str_regular = fields.String()\n            grand_child = fields.Nested(GrandChildSchema, unknown=EXCLUDE)\n\n        class ParentSchema(Schema):\n            str_dump_only = fields.String()\n            str_load_only = fields.String()\n            str_regular = fields.String()\n            child = fields.Nested(ChildSchema, unknown=EXCLUDE)\n\n        return ParentSchema(\n            dump_only=(\n                \"str_dump_only\",\n                \"child.str_dump_only\",\n                \"child.grand_child.str_dump_only\",\n            ),\n            load_only=(\n                \"str_load_only\",\n                \"child.str_load_only\",\n                \"child.grand_child.str_load_only\",\n            ),\n        )\n", "tokens": ["tests", "test_schema", "py", "testdeeplynestedloadonly", "def", "schema", "self", "class", "grandchildschema", "schema", "str_dump_only", "fields", "string", "str_load_only", "fields", "string", "str_regular", "fields", "string", "class", "childschema", "schema", "str_dump_only", "fields", "string", "str_load_only", "fields", "string", "str_regular", "fields", "string", "grand_child", "fields", "nested", "grandchildschema", "unknown", "exclude", "class", "parentschema", "schema", "str_dump_only", "fields", "string", "str_load_only", "fields", "string", "str_regular", "fields", "string", "child", "fields", "nested", "childschema", "unknown", "exclude", "return", "parentschema", "dump_only", "str_dump_only", "child", "str_dump_only", "child", "grand_child", "str_dump_only", "load_only", "str_load_only", "child", "str_load_only", "child", "grand_child", "str_load_only"], "doc_len": 71}
{"doc_id": "tests/test_schema.py::TestDeeplyNestedLoadOnly.data", "file_path": "tests/test_schema.py", "class_name": "TestDeeplyNestedLoadOnly", "func_name": "data", "text": "文件路径: tests/test_schema.py, 类名: TestDeeplyNestedLoadOnly\n    def data(self):\n        return dict(\n            str_dump_only=\"Dump Only\",\n            str_load_only=\"Load Only\",\n            str_regular=\"Regular String\",\n            child=dict(\n                str_dump_only=\"Dump Only\",\n                str_load_only=\"Load Only\",\n                str_regular=\"Regular String\",\n                grand_child=dict(\n                    str_dump_only=\"Dump Only\",\n                    str_load_only=\"Load Only\",\n                    str_regular=\"Regular String\",\n                ),\n            ),\n        )\n", "tokens": ["tests", "test_schema", "py", "testdeeplynestedloadonly", "def", "data", "self", "return", "dict", "str_dump_only", "dump", "only", "str_load_only", "load", "only", "str_regular", "regular", "string", "child", "dict", "str_dump_only", "dump", "only", "str_load_only", "load", "only", "str_regular", "regular", "string", "grand_child", "dict", "str_dump_only", "dump", "only", "str_load_only", "load", "only", "str_regular", "regular", "string"], "doc_len": 40}
{"doc_id": "tests/test_schema.py::TestDeeplyNestedLoadOnly.test_load_only", "file_path": "tests/test_schema.py", "class_name": "TestDeeplyNestedLoadOnly", "func_name": "test_load_only", "text": "文件路径: tests/test_schema.py, 类名: TestDeeplyNestedLoadOnly\n    def test_load_only(self, schema, data):\n        result = schema.dump(data)\n        assert \"str_load_only\" not in result\n        assert \"str_dump_only\" in result\n        assert \"str_regular\" in result\n        child = result[\"child\"]\n        assert \"str_load_only\" not in child\n        assert \"str_dump_only\" in child\n        assert \"str_regular\" in child\n        grand_child = child[\"grand_child\"]\n        assert \"str_load_only\" not in grand_child\n        assert \"str_dump_only\" in grand_child\n        assert \"str_regular\" in grand_child\n", "tokens": ["tests", "test_schema", "py", "testdeeplynestedloadonly", "def", "test_load_only", "self", "schema", "data", "result", "schema", "dump", "data", "assert", "str_load_only", "not", "in", "result", "assert", "str_dump_only", "in", "result", "assert", "str_regular", "in", "result", "child", "result", "child", "assert", "str_load_only", "not", "in", "child", "assert", "str_dump_only", "in", "child", "assert", "str_regular", "in", "child", "grand_child", "child", "grand_child", "assert", "str_load_only", "not", "in", "grand_child", "assert", "str_dump_only", "in", "grand_child", "assert", "str_regular", "in", "grand_child"], "doc_len": 58}
{"doc_id": "tests/test_schema.py::TestDeeplyNestedLoadOnly.test_dump_only", "file_path": "tests/test_schema.py", "class_name": "TestDeeplyNestedLoadOnly", "func_name": "test_dump_only", "text": "文件路径: tests/test_schema.py, 类名: TestDeeplyNestedLoadOnly\n    def test_dump_only(self, schema, data):\n        result = schema.load(data, unknown=EXCLUDE)\n        assert \"str_dump_only\" not in result\n        assert \"str_load_only\" in result\n        assert \"str_regular\" in result\n        child = result[\"child\"]\n        assert \"str_dump_only\" not in child\n        assert \"str_load_only\" in child\n        assert \"str_regular\" in child\n        grand_child = child[\"grand_child\"]\n        assert \"str_dump_only\" not in grand_child\n        assert \"str_load_only\" in grand_child\n        assert \"str_regular\" in grand_child\n", "tokens": ["tests", "test_schema", "py", "testdeeplynestedloadonly", "def", "test_dump_only", "self", "schema", "data", "result", "schema", "load", "data", "unknown", "exclude", "assert", "str_dump_only", "not", "in", "result", "assert", "str_load_only", "in", "result", "assert", "str_regular", "in", "result", "child", "result", "child", "assert", "str_dump_only", "not", "in", "child", "assert", "str_load_only", "in", "child", "assert", "str_regular", "in", "child", "grand_child", "child", "grand_child", "assert", "str_dump_only", "not", "in", "grand_child", "assert", "str_load_only", "in", "grand_child", "assert", "str_regular", "in", "grand_child"], "doc_len": 60}
{"doc_id": "tests/test_schema.py::TestDeeplyNestedListLoadOnly.schema", "file_path": "tests/test_schema.py", "class_name": "TestDeeplyNestedListLoadOnly", "func_name": "schema", "text": "文件路径: tests/test_schema.py, 类名: TestDeeplyNestedListLoadOnly\n    def schema(self):\n        class ChildSchema(Schema):\n            str_dump_only = fields.String()\n            str_load_only = fields.String()\n            str_regular = fields.String()\n\n        class ParentSchema(Schema):\n            str_dump_only = fields.String()\n            str_load_only = fields.String()\n            str_regular = fields.String()\n            child = fields.List(fields.Nested(ChildSchema, unknown=EXCLUDE))\n\n        return ParentSchema(\n            dump_only=(\"str_dump_only\", \"child.str_dump_only\"),\n            load_only=(\"str_load_only\", \"child.str_load_only\"),\n        )\n", "tokens": ["tests", "test_schema", "py", "testdeeplynestedlistloadonly", "def", "schema", "self", "class", "childschema", "schema", "str_dump_only", "fields", "string", "str_load_only", "fields", "string", "str_regular", "fields", "string", "class", "parentschema", "schema", "str_dump_only", "fields", "string", "str_load_only", "fields", "string", "str_regular", "fields", "string", "child", "fields", "list", "fields", "nested", "childschema", "unknown", "exclude", "return", "parentschema", "dump_only", "str_dump_only", "child", "str_dump_only", "load_only", "str_load_only", "child", "str_load_only"], "doc_len": 49}
{"doc_id": "tests/test_schema.py::TestDeeplyNestedListLoadOnly.data", "file_path": "tests/test_schema.py", "class_name": "TestDeeplyNestedListLoadOnly", "func_name": "data", "text": "文件路径: tests/test_schema.py, 类名: TestDeeplyNestedListLoadOnly\n    def data(self):\n        return dict(\n            str_dump_only=\"Dump Only\",\n            str_load_only=\"Load Only\",\n            str_regular=\"Regular String\",\n            child=[\n                dict(\n                    str_dump_only=\"Dump Only\",\n                    str_load_only=\"Load Only\",\n                    str_regular=\"Regular String\",\n                )\n            ],\n        )\n", "tokens": ["tests", "test_schema", "py", "testdeeplynestedlistloadonly", "def", "data", "self", "return", "dict", "str_dump_only", "dump", "only", "str_load_only", "load", "only", "str_regular", "regular", "string", "child", "dict", "str_dump_only", "dump", "only", "str_load_only", "load", "only", "str_regular", "regular", "string"], "doc_len": 29}
{"doc_id": "tests/test_schema.py::TestDeeplyNestedListLoadOnly.test_load_only", "file_path": "tests/test_schema.py", "class_name": "TestDeeplyNestedListLoadOnly", "func_name": "test_load_only", "text": "文件路径: tests/test_schema.py, 类名: TestDeeplyNestedListLoadOnly\n    def test_load_only(self, schema, data):\n        result = schema.dump(data)\n        assert \"str_load_only\" not in result\n        assert \"str_dump_only\" in result\n        assert \"str_regular\" in result\n        child = result[\"child\"][0]\n        assert \"str_load_only\" not in child\n        assert \"str_dump_only\" in child\n        assert \"str_regular\" in child\n", "tokens": ["tests", "test_schema", "py", "testdeeplynestedlistloadonly", "def", "test_load_only", "self", "schema", "data", "result", "schema", "dump", "data", "assert", "str_load_only", "not", "in", "result", "assert", "str_dump_only", "in", "result", "assert", "str_regular", "in", "result", "child", "result", "child", "0", "assert", "str_load_only", "not", "in", "child", "assert", "str_dump_only", "in", "child", "assert", "str_regular", "in", "child"], "doc_len": 43}
{"doc_id": "tests/test_schema.py::TestDeeplyNestedListLoadOnly.test_dump_only", "file_path": "tests/test_schema.py", "class_name": "TestDeeplyNestedListLoadOnly", "func_name": "test_dump_only", "text": "文件路径: tests/test_schema.py, 类名: TestDeeplyNestedListLoadOnly\n    def test_dump_only(self, schema, data):\n        result = schema.load(data, unknown=EXCLUDE)\n        assert \"str_dump_only\" not in result\n        assert \"str_load_only\" in result\n        assert \"str_regular\" in result\n        child = result[\"child\"][0]\n        assert \"str_dump_only\" not in child\n        assert \"str_load_only\" in child\n        assert \"str_regular\" in child\n", "tokens": ["tests", "test_schema", "py", "testdeeplynestedlistloadonly", "def", "test_dump_only", "self", "schema", "data", "result", "schema", "load", "data", "unknown", "exclude", "assert", "str_dump_only", "not", "in", "result", "assert", "str_load_only", "in", "result", "assert", "str_regular", "in", "result", "child", "result", "child", "0", "assert", "str_dump_only", "not", "in", "child", "assert", "str_load_only", "in", "child", "assert", "str_regular", "in", "child"], "doc_len": 45}
{"doc_id": "tests/test_schema.py::test_nested_constructor_only_and_exclude", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_nested_constructor_only_and_exclude", "text": "文件路径: tests/test_schema.py\ndef test_nested_constructor_only_and_exclude():\n    class GrandChildSchema(Schema):\n        goo = fields.Field()\n        gah = fields.Field()\n        bah = fields.Field()\n\n    class ChildSchema(Schema):\n        foo = fields.Field()\n        bar = fields.Field()\n        flubb = fields.Nested(GrandChildSchema)\n\n    class ParentSchema(Schema):\n        bla = fields.Field()\n        bli = fields.Field()\n        blubb = fields.Nested(\n            ChildSchema, only=(\"foo\", \"flubb.goo\", \"flubb.gah\"), exclude=(\"flubb.goo\",)\n        )\n\n    sch = ParentSchema(only=(\"bla\", \"blubb\"))\n    data = dict(bla=1, bli=2, blubb=dict(foo=3, bar=4, flubb=dict(goo=5, gah=6, bah=7)))\n    result = sch.dump(data)\n    assert \"bla\" in result\n    assert \"blubb\" in result\n    assert \"bli\" not in result\n    child = result[\"blubb\"]\n    assert \"foo\" in child\n    assert \"flubb\" in child\n    assert \"bar\" not in child\n    grand_child = child[\"flubb\"]\n    assert \"gah\" in grand_child\n    assert \"goo\" not in grand_child\n    assert \"bah\" not in grand_child\n", "tokens": ["tests", "test_schema", "py", "def", "test_nested_constructor_only_and_exclude", "class", "grandchildschema", "schema", "goo", "fields", "field", "gah", "fields", "field", "bah", "fields", "field", "class", "childschema", "schema", "foo", "fields", "field", "bar", "fields", "field", "flubb", "fields", "nested", "grandchildschema", "class", "parentschema", "schema", "bla", "fields", "field", "bli", "fields", "field", "blubb", "fields", "nested", "childschema", "only", "foo", "flubb", "goo", "flubb", "gah", "exclude", "flubb", "goo", "sch", "parentschema", "only", "bla", "blubb", "data", "dict", "bla", "1", "bli", "2", "blubb", "dict", "foo", "3", "bar", "4", "flubb", "dict", "goo", "5", "gah", "6", "bah", "7", "result", "sch", "dump", "data", "assert", "bla", "in", "result", "assert", "blubb", "in", "result", "assert", "bli", "not", "in", "result", "child", "result", "blubb", "assert", "foo", "in", "child", "assert", "flubb", "in", "child", "assert", "bar", "not", "in", "child", "grand_child", "child", "flubb", "assert", "gah", "in", "grand_child", "assert", "goo", "not", "in", "grand_child", "assert", "bah", "not", "in", "grand_child"], "doc_len": 127}
{"doc_id": "tests/test_schema.py::test_only_and_exclude", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_only_and_exclude", "text": "文件路径: tests/test_schema.py\ndef test_only_and_exclude():\n    class MySchema(Schema):\n        foo = fields.Field()\n        bar = fields.Field()\n        baz = fields.Field()\n\n    sch = MySchema(only=(\"foo\", \"bar\"), exclude=(\"bar\",))\n    data = dict(foo=42, bar=24, baz=242)\n    result = sch.dump(data)\n    assert \"foo\" in result\n    assert \"bar\" not in result\n", "tokens": ["tests", "test_schema", "py", "def", "test_only_and_exclude", "class", "myschema", "schema", "foo", "fields", "field", "bar", "fields", "field", "baz", "fields", "field", "sch", "myschema", "only", "foo", "bar", "exclude", "bar", "data", "dict", "foo", "42", "bar", "24", "baz", "242", "result", "sch", "dump", "data", "assert", "foo", "in", "result", "assert", "bar", "not", "in", "result"], "doc_len": 45}
{"doc_id": "tests/test_schema.py::test_only_and_exclude_with_fields", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_only_and_exclude_with_fields", "text": "文件路径: tests/test_schema.py\ndef test_only_and_exclude_with_fields():\n    class MySchema(Schema):\n        foo = fields.Field()\n\n        class Meta:\n            fields = (\"bar\", \"baz\")\n\n    sch = MySchema(only=(\"bar\", \"baz\"), exclude=(\"bar\",))\n    data = dict(foo=42, bar=24, baz=242)\n    result = sch.dump(data)\n    assert \"baz\" in result\n    assert \"bar\" not in result\n", "tokens": ["tests", "test_schema", "py", "def", "test_only_and_exclude_with_fields", "class", "myschema", "schema", "foo", "fields", "field", "class", "meta", "fields", "bar", "baz", "sch", "myschema", "only", "bar", "baz", "exclude", "bar", "data", "dict", "foo", "42", "bar", "24", "baz", "242", "result", "sch", "dump", "data", "assert", "baz", "in", "result", "assert", "bar", "not", "in", "result"], "doc_len": 44}
{"doc_id": "tests/test_schema.py::test_invalid_only_and_exclude_with_fields", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_invalid_only_and_exclude_with_fields", "text": "文件路径: tests/test_schema.py\ndef test_invalid_only_and_exclude_with_fields():\n    class MySchema(Schema):\n        foo = fields.Field()\n\n        class Meta:\n            fields = (\"bar\", \"baz\")\n\n    with pytest.raises(ValueError) as excinfo:\n        MySchema(only=(\"foo\", \"par\"), exclude=(\"ban\",))\n\n    assert \"foo\" in str(excinfo.value)\n    assert \"par\" in str(excinfo.value)\n    assert \"ban\" in str(excinfo.value)\n", "tokens": ["tests", "test_schema", "py", "def", "test_invalid_only_and_exclude_with_fields", "class", "myschema", "schema", "foo", "fields", "field", "class", "meta", "fields", "bar", "baz", "with", "pytest", "raises", "valueerror", "as", "excinfo", "myschema", "only", "foo", "par", "exclude", "ban", "assert", "foo", "in", "str", "excinfo", "value", "assert", "par", "in", "str", "excinfo", "value", "assert", "ban", "in", "str", "excinfo", "value"], "doc_len": 46}
{"doc_id": "tests/test_schema.py::test_only_and_exclude_with_additional", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_only_and_exclude_with_additional", "text": "文件路径: tests/test_schema.py\ndef test_only_and_exclude_with_additional():\n    class MySchema(Schema):\n        foo = fields.Field()\n\n        class Meta:\n            additional = (\"bar\", \"baz\")\n\n    sch = MySchema(only=(\"foo\", \"bar\"), exclude=(\"bar\",))\n    data = dict(foo=42, bar=24, baz=242)\n    result = sch.dump(data)\n    assert \"foo\" in result\n    assert \"bar\" not in result\n", "tokens": ["tests", "test_schema", "py", "def", "test_only_and_exclude_with_additional", "class", "myschema", "schema", "foo", "fields", "field", "class", "meta", "additional", "bar", "baz", "sch", "myschema", "only", "foo", "bar", "exclude", "bar", "data", "dict", "foo", "42", "bar", "24", "baz", "242", "result", "sch", "dump", "data", "assert", "foo", "in", "result", "assert", "bar", "not", "in", "result"], "doc_len": 44}
{"doc_id": "tests/test_schema.py::test_invalid_only_and_exclude_with_additional", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_invalid_only_and_exclude_with_additional", "text": "文件路径: tests/test_schema.py\ndef test_invalid_only_and_exclude_with_additional():\n    class MySchema(Schema):\n        foo = fields.Field()\n\n        class Meta:\n            additional = (\"bar\", \"baz\")\n\n    with pytest.raises(ValueError) as excinfo:\n        MySchema(only=(\"foop\", \"par\"), exclude=(\"ban\",))\n\n    assert \"foop\" in str(excinfo.value)\n    assert \"par\" in str(excinfo.value)\n    assert \"ban\" in str(excinfo.value)\n", "tokens": ["tests", "test_schema", "py", "def", "test_invalid_only_and_exclude_with_additional", "class", "myschema", "schema", "foo", "fields", "field", "class", "meta", "additional", "bar", "baz", "with", "pytest", "raises", "valueerror", "as", "excinfo", "myschema", "only", "foop", "par", "exclude", "ban", "assert", "foop", "in", "str", "excinfo", "value", "assert", "par", "in", "str", "excinfo", "value", "assert", "ban", "in", "str", "excinfo", "value"], "doc_len": 46}
{"doc_id": "tests/test_schema.py::test_exclude_invalid_attribute", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_exclude_invalid_attribute", "text": "文件路径: tests/test_schema.py\ndef test_exclude_invalid_attribute():\n    class MySchema(Schema):\n        foo = fields.Field()\n\n    with pytest.raises(ValueError, match=\"'bar'\"):\n        MySchema(exclude=(\"bar\",))\n", "tokens": ["tests", "test_schema", "py", "def", "test_exclude_invalid_attribute", "class", "myschema", "schema", "foo", "fields", "field", "with", "pytest", "raises", "valueerror", "match", "bar", "myschema", "exclude", "bar"], "doc_len": 20}
{"doc_id": "tests/test_schema.py::test_only_bounded_by_fields", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_only_bounded_by_fields", "text": "文件路径: tests/test_schema.py\ndef test_only_bounded_by_fields():\n    class MySchema(Schema):\n        class Meta:\n            fields = (\"foo\",)\n\n    with pytest.raises(ValueError, match=\"'baz'\"):\n        MySchema(only=(\"baz\",))\n", "tokens": ["tests", "test_schema", "py", "def", "test_only_bounded_by_fields", "class", "myschema", "schema", "class", "meta", "fields", "foo", "with", "pytest", "raises", "valueerror", "match", "baz", "myschema", "only", "baz"], "doc_len": 21}
{"doc_id": "tests/test_schema.py::test_only_bounded_by_additional", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_only_bounded_by_additional", "text": "文件路径: tests/test_schema.py\ndef test_only_bounded_by_additional():\n    class MySchema(Schema):\n        class Meta:\n            additional = (\"b\",)\n\n    with pytest.raises(ValueError):\n        MySchema(only=(\"c\",)).dump({\"c\": 3})\n", "tokens": ["tests", "test_schema", "py", "def", "test_only_bounded_by_additional", "class", "myschema", "schema", "class", "meta", "additional", "b", "with", "pytest", "raises", "valueerror", "myschema", "only", "c", "dump", "c", "3"], "doc_len": 22}
{"doc_id": "tests/test_schema.py::test_only_empty", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_only_empty", "text": "文件路径: tests/test_schema.py\ndef test_only_empty():\n    class MySchema(Schema):\n        foo = fields.Field()\n\n    sch = MySchema(only=())\n    assert \"foo\" not in sch.dump({\"foo\": \"bar\"})\n", "tokens": ["tests", "test_schema", "py", "def", "test_only_empty", "class", "myschema", "schema", "foo", "fields", "field", "sch", "myschema", "only", "assert", "foo", "not", "in", "sch", "dump", "foo", "bar"], "doc_len": 22}
{"doc_id": "tests/test_schema.py::test_only_and_exclude_as_string", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_only_and_exclude_as_string", "text": "文件路径: tests/test_schema.py\ndef test_only_and_exclude_as_string(param):\n    class MySchema(Schema):\n        foo = fields.Field()\n\n    with pytest.raises(StringNotCollectionError):\n        MySchema(**{param: \"foo\"})\n", "tokens": ["tests", "test_schema", "py", "def", "test_only_and_exclude_as_string", "param", "class", "myschema", "schema", "foo", "fields", "field", "with", "pytest", "raises", "stringnotcollectionerror", "myschema", "param", "foo"], "doc_len": 19}
{"doc_id": "tests/test_schema.py::test_nested_with_sets", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_nested_with_sets", "text": "文件路径: tests/test_schema.py\ndef test_nested_with_sets():\n    class Inner(Schema):\n        foo = fields.Field()\n\n    class Outer(Schema):\n        inners = fields.Nested(Inner, many=True)\n\n    sch = Outer()\n\n    DataClass = namedtuple(\"DataClass\", [\"foo\"])\n    data = dict(inners={DataClass(42), DataClass(2)})\n    result = sch.dump(data)\n    assert len(result[\"inners\"]) == 2\n", "tokens": ["tests", "test_schema", "py", "def", "test_nested_with_sets", "class", "inner", "schema", "foo", "fields", "field", "class", "outer", "schema", "inners", "fields", "nested", "inner", "many", "true", "sch", "outer", "dataclass", "namedtuple", "dataclass", "foo", "data", "dict", "inners", "dataclass", "42", "dataclass", "2", "result", "sch", "dump", "data", "assert", "len", "result", "inners", "2"], "doc_len": 42}
{"doc_id": "tests/test_schema.py::test_meta_serializer_fields", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_meta_serializer_fields", "text": "文件路径: tests/test_schema.py\ndef test_meta_serializer_fields():\n    u = User(\"John\", age=42.3, email=\"john@example.com\", homepage=\"http://john.com\")\n    result = UserMetaSchema().dump(u)\n    assert result[\"name\"] == u.name\n    assert result[\"balance\"] == decimal.Decimal(\"100.00\")\n    assert result[\"uppername\"] == \"JOHN\"\n    assert result[\"is_old\"] is False\n    assert result[\"created\"] == utils.isoformat(u.created)\n    assert result[\"finger_count\"] == 10\n    assert result[\"various_data\"] == dict(u.various_data)\n", "tokens": ["tests", "test_schema", "py", "def", "test_meta_serializer_fields", "u", "user", "john", "age", "42", "3", "email", "john", "example", "com", "homepage", "http", "john", "com", "result", "usermetaschema", "dump", "u", "assert", "result", "name", "u", "name", "assert", "result", "balance", "decimal", "decimal", "100", "00", "assert", "result", "uppername", "john", "assert", "result", "is_old", "is", "false", "assert", "result", "created", "utils", "isoformat", "u", "created", "assert", "result", "finger_count", "10", "assert", "result", "various_data", "dict", "u", "various_data"], "doc_len": 61}
{"doc_id": "tests/test_schema.py::test_meta_fields_mapping", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_meta_fields_mapping", "text": "文件路径: tests/test_schema.py\ndef test_meta_fields_mapping(user):\n    s = UserMetaSchema()\n    s.dump(user)  # need to call dump to update fields\n    assert type(s.fields[\"balance\"]) == fields.Decimal\n    # Inferred fields\n    assert type(s.fields[\"name\"]._field_cache[fields.String]) == fields.String\n    assert type(s.fields[\"created\"]._field_cache[fields.DateTime]) == fields.DateTime\n    assert type(s.fields[\"updated\"]._field_cache[fields.DateTime]) == fields.DateTime\n    assert type(s.fields[\"age\"]._field_cache[fields.Float]) == fields.Float\n    assert type(s.fields[\"registered\"]._field_cache[fields.Boolean]) == fields.Boolean\n    assert type(s.fields[\"sex_choices\"]._field_cache[fields.Raw]) == fields.Raw\n    assert type(s.fields[\"hair_colors\"]._field_cache[fields.Raw]) == fields.Raw\n    assert type(s.fields[\"finger_count\"]._field_cache[fields.Integer]) == fields.Integer\n    assert type(s.fields[\"uid\"]._field_cache[fields.UUID]) == fields.UUID\n    assert type(s.fields[\"time_registered\"]._field_cache[fields.Time]) == fields.Time\n    assert type(s.fields[\"birthdate\"]._field_cache[fields.Date]) == fields.Date\n    assert (\n        type(s.fields[\"since_created\"]._field_cache[fields.TimeDelta])\n        == fields.TimeDelta\n    )\n", "tokens": ["tests", "test_schema", "py", "def", "test_meta_fields_mapping", "user", "s", "usermetaschema", "s", "dump", "user", "need", "to", "call", "dump", "to", "update", "fields", "assert", "type", "s", "fields", "balance", "fields", "decimal", "inferred", "fields", "assert", "type", "s", "fields", "name", "_field_cache", "fields", "string", "fields", "string", "assert", "type", "s", "fields", "created", "_field_cache", "fields", "datetime", "fields", "datetime", "assert", "type", "s", "fields", "updated", "_field_cache", "fields", "datetime", "fields", "datetime", "assert", "type", "s", "fields", "age", "_field_cache", "fields", "float", "fields", "float", "assert", "type", "s", "fields", "registered", "_field_cache", "fields", "boolean", "fields", "boolean", "assert", "type", "s", "fields", "sex_choices", "_field_cache", "fields", "raw", "fields", "raw", "assert", "type", "s", "fields", "hair_colors", "_field_cache", "fields", "raw", "fields", "raw", "assert", "type", "s", "fields", "finger_count", "_field_cache", "fields", "integer", "fields", "integer", "assert", "type", "s", "fields", "uid", "_field_cache", "fields", "uuid", "fields", "uuid", "assert", "type", "s", "fields", "time_registered", "_field_cache", "fields", "time", "fields", "time", "assert", "type", "s", "fields", "birthdate", "_field_cache", "fields", "date", "fields", "date", "assert", "type", "s", "fields", "since_created", "_field_cache", "fields", "timedelta", "fields", "timedelta"], "doc_len": 147}
{"doc_id": "tests/test_schema.py::test_meta_field_not_on_obj_raises_attribute_error", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_meta_field_not_on_obj_raises_attribute_error", "text": "文件路径: tests/test_schema.py\ndef test_meta_field_not_on_obj_raises_attribute_error(user):\n    class BadUserSchema(Schema):\n        class Meta:\n            fields = (\"name\",)\n            exclude = (\"notfound\",)\n\n    with pytest.raises(ValueError, match=\"'notfound'\"):\n        BadUserSchema().dump(user)\n", "tokens": ["tests", "test_schema", "py", "def", "test_meta_field_not_on_obj_raises_attribute_error", "user", "class", "baduserschema", "schema", "class", "meta", "fields", "name", "exclude", "notfound", "with", "pytest", "raises", "valueerror", "match", "notfound", "baduserschema", "dump", "user"], "doc_len": 24}
{"doc_id": "tests/test_schema.py::test_exclude_fields", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_exclude_fields", "text": "文件路径: tests/test_schema.py\ndef test_exclude_fields(user):\n    s = UserExcludeSchema().dump(user)\n    assert \"created\" not in s\n    assert \"updated\" not in s\n    assert \"name\" in s\n", "tokens": ["tests", "test_schema", "py", "def", "test_exclude_fields", "user", "s", "userexcludeschema", "dump", "user", "assert", "created", "not", "in", "s", "assert", "updated", "not", "in", "s", "assert", "name", "in", "s"], "doc_len": 24}
{"doc_id": "tests/test_schema.py::test_fields_option_must_be_list_or_tuple", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_fields_option_must_be_list_or_tuple", "text": "文件路径: tests/test_schema.py\ndef test_fields_option_must_be_list_or_tuple():\n    with pytest.raises(ValueError):\n\n        class BadFields(Schema):\n            class Meta:\n                fields = \"name\"\n", "tokens": ["tests", "test_schema", "py", "def", "test_fields_option_must_be_list_or_tuple", "with", "pytest", "raises", "valueerror", "class", "badfields", "schema", "class", "meta", "fields", "name"], "doc_len": 16}
{"doc_id": "tests/test_schema.py::test_exclude_option_must_be_list_or_tuple", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_exclude_option_must_be_list_or_tuple", "text": "文件路径: tests/test_schema.py\ndef test_exclude_option_must_be_list_or_tuple():\n    with pytest.raises(ValueError):\n\n        class BadExclude(Schema):\n            class Meta:\n                exclude = \"name\"\n", "tokens": ["tests", "test_schema", "py", "def", "test_exclude_option_must_be_list_or_tuple", "with", "pytest", "raises", "valueerror", "class", "badexclude", "schema", "class", "meta", "exclude", "name"], "doc_len": 16}
{"doc_id": "tests/test_schema.py::test_datetimeformat_option", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_datetimeformat_option", "text": "文件路径: tests/test_schema.py\ndef test_datetimeformat_option(user):\n    meta_fmt = \"%Y-%m\"\n    field_fmt = \"%m-%d\"\n\n    class DateTimeFormatSchema(Schema):\n        updated = fields.DateTime(field_fmt)\n\n        class Meta:\n            fields = (\"created\", \"updated\")\n            datetimeformat = meta_fmt\n\n    serialized = DateTimeFormatSchema().dump(user)\n    assert serialized[\"created\"] == user.created.strftime(meta_fmt)\n    assert serialized[\"updated\"] == user.updated.strftime(field_fmt)\n", "tokens": ["tests", "test_schema", "py", "def", "test_datetimeformat_option", "user", "meta_fmt", "y", "m", "field_fmt", "m", "d", "class", "datetimeformatschema", "schema", "updated", "fields", "datetime", "field_fmt", "class", "meta", "fields", "created", "updated", "datetimeformat", "meta_fmt", "serialized", "datetimeformatschema", "dump", "user", "assert", "serialized", "created", "user", "created", "strftime", "meta_fmt", "assert", "serialized", "updated", "user", "updated", "strftime", "field_fmt"], "doc_len": 44}
{"doc_id": "tests/test_schema.py::test_dateformat_option", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_dateformat_option", "text": "文件路径: tests/test_schema.py\ndef test_dateformat_option(user):\n    fmt = \"%Y-%m\"\n    field_fmt = \"%m-%d\"\n\n    class DateFormatSchema(Schema):\n        birthdate = fields.Date(field_fmt)\n\n        class Meta:\n            fields = (\"birthdate\", \"activation_date\")\n            dateformat = fmt\n\n    serialized = DateFormatSchema().dump(user)\n    assert serialized[\"birthdate\"] == user.birthdate.strftime(field_fmt)\n    assert serialized[\"activation_date\"] == user.activation_date.strftime(fmt)\n", "tokens": ["tests", "test_schema", "py", "def", "test_dateformat_option", "user", "fmt", "y", "m", "field_fmt", "m", "d", "class", "dateformatschema", "schema", "birthdate", "fields", "date", "field_fmt", "class", "meta", "fields", "birthdate", "activation_date", "dateformat", "fmt", "serialized", "dateformatschema", "dump", "user", "assert", "serialized", "birthdate", "user", "birthdate", "strftime", "field_fmt", "assert", "serialized", "activation_date", "user", "activation_date", "strftime", "fmt"], "doc_len": 44}
{"doc_id": "tests/test_schema.py::test_default_dateformat", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_default_dateformat", "text": "文件路径: tests/test_schema.py\ndef test_default_dateformat(user):\n    class DateFormatSchema(Schema):\n        updated = fields.DateTime(format=\"%m-%d\")\n\n        class Meta:\n            fields = (\"created\", \"updated\")\n\n    serialized = DateFormatSchema().dump(user)\n    assert serialized[\"created\"] == utils.isoformat(user.created)\n    assert serialized[\"updated\"] == user.updated.strftime(\"%m-%d\")\n", "tokens": ["tests", "test_schema", "py", "def", "test_default_dateformat", "user", "class", "dateformatschema", "schema", "updated", "fields", "datetime", "format", "m", "d", "class", "meta", "fields", "created", "updated", "serialized", "dateformatschema", "dump", "user", "assert", "serialized", "created", "utils", "isoformat", "user", "created", "assert", "serialized", "updated", "user", "updated", "strftime", "m", "d"], "doc_len": 39}
{"doc_id": "tests/test_schema.py::test_inherit_meta", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_inherit_meta", "text": "文件路径: tests/test_schema.py\ndef test_inherit_meta(user):\n    class InheritedMetaSchema(UserMetaSchema):\n        pass\n\n    result = InheritedMetaSchema().dump(user)\n    expected = UserMetaSchema().dump(user)\n    assert result == expected\n", "tokens": ["tests", "test_schema", "py", "def", "test_inherit_meta", "user", "class", "inheritedmetaschema", "usermetaschema", "pass", "result", "inheritedmetaschema", "dump", "user", "expected", "usermetaschema", "dump", "user", "assert", "result", "expected"], "doc_len": 21}
{"doc_id": "tests/test_schema.py::test_inherit_meta_override", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_inherit_meta_override", "text": "文件路径: tests/test_schema.py\ndef test_inherit_meta_override():\n    class Parent(Schema):\n        class Meta:\n            fields = (\"name\", \"email\")\n            dump_only = (\"name\",)\n\n    class Child(Schema):\n        class Meta(Parent.Meta):\n            dump_only = (\"name\", \"email\")\n\n    child = Child()\n    assert child.opts.fields == (\"name\", \"email\")\n    assert child.opts.dump_only == (\"name\", \"email\")\n", "tokens": ["tests", "test_schema", "py", "def", "test_inherit_meta_override", "class", "parent", "schema", "class", "meta", "fields", "name", "email", "dump_only", "name", "class", "child", "schema", "class", "meta", "parent", "meta", "dump_only", "name", "email", "child", "child", "assert", "child", "opts", "fields", "name", "email", "assert", "child", "opts", "dump_only", "name", "email"], "doc_len": 39}
{"doc_id": "tests/test_schema.py::test_additional", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_additional", "text": "文件路径: tests/test_schema.py\ndef test_additional(user):\n    s = UserAdditionalSchema().dump(user)\n    assert s[\"lowername\"] == user.name.lower()\n    assert s[\"name\"] == user.name\n", "tokens": ["tests", "test_schema", "py", "def", "test_additional", "user", "s", "useradditionalschema", "dump", "user", "assert", "s", "lowername", "user", "name", "lower", "assert", "s", "name", "user", "name"], "doc_len": 21}
{"doc_id": "tests/test_schema.py::test_cant_set_both_additional_and_fields", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_cant_set_both_additional_and_fields", "text": "文件路径: tests/test_schema.py\ndef test_cant_set_both_additional_and_fields(user):\n    with pytest.raises(ValueError):\n\n        class BadSchema(Schema):\n            name = fields.String()\n\n            class Meta:\n                fields = (\"name\", \"email\")\n                additional = (\"email\", \"homepage\")\n", "tokens": ["tests", "test_schema", "py", "def", "test_cant_set_both_additional_and_fields", "user", "with", "pytest", "raises", "valueerror", "class", "badschema", "schema", "name", "fields", "string", "class", "meta", "fields", "name", "email", "additional", "email", "homepage"], "doc_len": 24}
{"doc_id": "tests/test_schema.py::test_serializing_none_meta", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_serializing_none_meta", "text": "文件路径: tests/test_schema.py\ndef test_serializing_none_meta():\n    s = UserMetaSchema().dump(None)\n    assert s == {}\n", "tokens": ["tests", "test_schema", "py", "def", "test_serializing_none_meta", "s", "usermetaschema", "dump", "none", "assert", "s"], "doc_len": 11}
{"doc_id": "tests/test_schema.py::MySchema.handle_error", "file_path": "tests/test_schema.py", "class_name": "MySchema", "func_name": "handle_error", "text": "文件路径: tests/test_schema.py, 类名: MySchema\n    def handle_error(self, errors, obj, **kwargs):\n        raise CustomError(\"Something bad happened\")\n", "tokens": ["tests", "test_schema", "py", "myschema", "def", "handle_error", "self", "errors", "obj", "kwargs", "raise", "customerror", "something", "bad", "happened"], "doc_len": 15}
{"doc_id": "tests/test_schema.py::MySchema.test_load_with_custom_error_handler", "file_path": "tests/test_schema.py", "class_name": "MySchema", "func_name": "test_load_with_custom_error_handler", "text": "文件路径: tests/test_schema.py, 类名: MySchema\n    def test_load_with_custom_error_handler(self):\n        in_data = {\"email\": \"invalid\"}\n\n        class MySchema3(Schema):\n            email = fields.Email()\n\n            def handle_error(self, error, data, **kwargs):\n                assert type(error) is ValidationError\n                assert \"email\" in error.messages\n                assert list(error.messages.keys()) == [\"email\"]\n                assert data == in_data\n                raise CustomError(\"Something bad happened\")\n\n        with pytest.raises(CustomError):\n            MySchema3().load(in_data)\n", "tokens": ["tests", "test_schema", "py", "myschema", "def", "test_load_with_custom_error_handler", "self", "in_data", "email", "invalid", "class", "myschema3", "schema", "email", "fields", "email", "def", "handle_error", "self", "error", "data", "kwargs", "assert", "type", "error", "is", "validationerror", "assert", "email", "in", "error", "messages", "assert", "list", "error", "messages", "keys", "email", "assert", "data", "in_data", "raise", "customerror", "something", "bad", "happened", "with", "pytest", "raises", "customerror", "myschema3", "load", "in_data"], "doc_len": 53}
{"doc_id": "tests/test_schema.py::MySchema.test_load_with_custom_error_handler_and_partially_valid_data", "file_path": "tests/test_schema.py", "class_name": "MySchema", "func_name": "test_load_with_custom_error_handler_and_partially_valid_data", "text": "文件路径: tests/test_schema.py, 类名: MySchema\n    def test_load_with_custom_error_handler_and_partially_valid_data(self):\n        in_data = {\"email\": \"invalid\", \"url\": \"http://valid.com\"}\n\n        class MySchema(Schema):\n            email = fields.Email()\n            url = fields.URL()\n\n            def handle_error(self, error, data, **kwargs):\n                assert type(error) is ValidationError\n                assert \"email\" in error.messages\n                assert list(error.messages.keys()) == [\"email\"]\n                assert data == in_data\n                raise CustomError(\"Something bad happened\")\n\n        with pytest.raises(CustomError):\n            MySchema().load(in_data)\n", "tokens": ["tests", "test_schema", "py", "myschema", "def", "test_load_with_custom_error_handler_and_partially_valid_data", "self", "in_data", "email", "invalid", "url", "http", "valid", "com", "class", "myschema", "schema", "email", "fields", "email", "url", "fields", "url", "def", "handle_error", "self", "error", "data", "kwargs", "assert", "type", "error", "is", "validationerror", "assert", "email", "in", "error", "messages", "assert", "list", "error", "messages", "keys", "email", "assert", "data", "in_data", "raise", "customerror", "something", "bad", "happened", "with", "pytest", "raises", "customerror", "myschema", "load", "in_data"], "doc_len": 60}
{"doc_id": "tests/test_schema.py::MySchema.test_custom_error_handler_with_validates_decorator", "file_path": "tests/test_schema.py", "class_name": "MySchema", "func_name": "test_custom_error_handler_with_validates_decorator", "text": "文件路径: tests/test_schema.py, 类名: MySchema\n    def test_custom_error_handler_with_validates_decorator(self):\n        in_data = {\"num\": -1}\n\n        class MySchema(Schema):\n            num = fields.Int()\n\n            @validates(\"num\")\n            def validate_num(self, value):\n                if value < 0:\n                    raise ValidationError(\"Must be greater than 0.\")\n\n            def handle_error(self, error, data, **kwargs):\n                assert type(error) is ValidationError\n                assert \"num\" in error.messages\n                assert list(error.messages.keys()) == [\"num\"]\n                assert data == in_data\n                raise CustomError(\"Something bad happened\")\n\n        with pytest.raises(CustomError):\n            MySchema().load(in_data)\n", "tokens": ["tests", "test_schema", "py", "myschema", "def", "test_custom_error_handler_with_validates_decorator", "self", "in_data", "num", "1", "class", "myschema", "schema", "num", "fields", "int", "validates", "num", "def", "validate_num", "self", "value", "if", "value", "0", "raise", "validationerror", "must", "be", "greater", "than", "0", "def", "handle_error", "self", "error", "data", "kwargs", "assert", "type", "error", "is", "validationerror", "assert", "num", "in", "error", "messages", "assert", "list", "error", "messages", "keys", "num", "assert", "data", "in_data", "raise", "customerror", "something", "bad", "happened", "with", "pytest", "raises", "customerror", "myschema", "load", "in_data"], "doc_len": 69}
{"doc_id": "tests/test_schema.py::MySchema.test_custom_error_handler_with_validates_schema_decorator", "file_path": "tests/test_schema.py", "class_name": "MySchema", "func_name": "test_custom_error_handler_with_validates_schema_decorator", "text": "文件路径: tests/test_schema.py, 类名: MySchema\n    def test_custom_error_handler_with_validates_schema_decorator(self):\n        in_data = {\"num\": -1}\n\n        class MySchema(Schema):\n            num = fields.Int()\n\n            @validates_schema\n            def validates_schema(self, data, **kwargs):\n                raise ValidationError(\"Invalid schema!\")\n\n            def handle_error(self, error, data, **kwargs):\n                assert type(error) is ValidationError\n                assert list(error.messages.keys()) == [\"_schema\"]\n                assert data == in_data\n                raise CustomError(\"Something bad happened\")\n\n        with pytest.raises(CustomError):\n            MySchema().load(in_data)\n", "tokens": ["tests", "test_schema", "py", "myschema", "def", "test_custom_error_handler_with_validates_schema_decorator", "self", "in_data", "num", "1", "class", "myschema", "schema", "num", "fields", "int", "validates_schema", "def", "validates_schema", "self", "data", "kwargs", "raise", "validationerror", "invalid", "schema", "def", "handle_error", "self", "error", "data", "kwargs", "assert", "type", "error", "is", "validationerror", "assert", "list", "error", "messages", "keys", "_schema", "assert", "data", "in_data", "raise", "customerror", "something", "bad", "happened", "with", "pytest", "raises", "customerror", "myschema", "load", "in_data"], "doc_len": 58}
{"doc_id": "tests/test_schema.py::MySchema.test_validate_with_custom_error_handler", "file_path": "tests/test_schema.py", "class_name": "MySchema", "func_name": "test_validate_with_custom_error_handler", "text": "文件路径: tests/test_schema.py, 类名: MySchema\n    def test_validate_with_custom_error_handler(self):\n        with pytest.raises(CustomError):\n            MySchema().validate({\"age\": \"notvalid\", \"email\": \"invalid\"})\n", "tokens": ["tests", "test_schema", "py", "myschema", "def", "test_validate_with_custom_error_handler", "self", "with", "pytest", "raises", "customerror", "myschema", "validate", "age", "notvalid", "email", "invalid"], "doc_len": 17}
{"doc_id": "tests/test_schema.py::TestFieldValidation.test_errors_are_cleared_after_loading_collection", "file_path": "tests/test_schema.py", "class_name": "TestFieldValidation", "func_name": "test_errors_are_cleared_after_loading_collection", "text": "文件路径: tests/test_schema.py, 类名: TestFieldValidation\n    def test_errors_are_cleared_after_loading_collection(self):\n        def always_fail(val):\n            raise ValidationError(\"lol\")\n\n        class MySchema(Schema):\n            foo = fields.Str(validate=always_fail)\n\n        schema = MySchema()\n        with pytest.raises(ValidationError) as excinfo:\n            schema.load([{\"foo\": \"bar\"}, {\"foo\": \"baz\"}], many=True)\n        errors = excinfo.value.messages\n        assert len(errors[0][\"foo\"]) == 1\n        assert len(errors[1][\"foo\"]) == 1\n        with pytest.raises(ValidationError) as excinfo:\n            schema.load({\"foo\": \"bar\"})\n        errors = excinfo.value.messages\n        assert len(errors[\"foo\"]) == 1\n", "tokens": ["tests", "test_schema", "py", "testfieldvalidation", "def", "test_errors_are_cleared_after_loading_collection", "self", "def", "always_fail", "val", "raise", "validationerror", "lol", "class", "myschema", "schema", "foo", "fields", "str", "validate", "always_fail", "schema", "myschema", "with", "pytest", "raises", "validationerror", "as", "excinfo", "schema", "load", "foo", "bar", "foo", "baz", "many", "true", "errors", "excinfo", "value", "messages", "assert", "len", "errors", "0", "foo", "1", "assert", "len", "errors", "1", "foo", "1", "with", "pytest", "raises", "validationerror", "as", "excinfo", "schema", "load", "foo", "bar", "errors", "excinfo", "value", "messages", "assert", "len", "errors", "foo", "1"], "doc_len": 72}
{"doc_id": "tests/test_schema.py::TestFieldValidation.test_raises_error_with_list", "file_path": "tests/test_schema.py", "class_name": "TestFieldValidation", "func_name": "test_raises_error_with_list", "text": "文件路径: tests/test_schema.py, 类名: TestFieldValidation\n    def test_raises_error_with_list(self):\n        def validator(val):\n            raise ValidationError([\"err1\", \"err2\"])\n\n        class MySchema(Schema):\n            foo = fields.Field(validate=validator)\n\n        s = MySchema()\n        errors = s.validate({\"foo\": 42})\n        assert errors[\"foo\"] == [\"err1\", \"err2\"]\n", "tokens": ["tests", "test_schema", "py", "testfieldvalidation", "def", "test_raises_error_with_list", "self", "def", "validator", "val", "raise", "validationerror", "err1", "err2", "class", "myschema", "schema", "foo", "fields", "field", "validate", "validator", "s", "myschema", "errors", "s", "validate", "foo", "42", "assert", "errors", "foo", "err1", "err2"], "doc_len": 34}
{"doc_id": "tests/test_schema.py::TestFieldValidation.test_raises_error_with_dict", "file_path": "tests/test_schema.py", "class_name": "TestFieldValidation", "func_name": "test_raises_error_with_dict", "text": "文件路径: tests/test_schema.py, 类名: TestFieldValidation\n    def test_raises_error_with_dict(self):\n        def validator(val):\n            raise ValidationError({\"code\": \"invalid_foo\"})\n\n        class MySchema(Schema):\n            foo = fields.Field(validate=validator)\n\n        s = MySchema()\n        errors = s.validate({\"foo\": 42})\n        assert errors[\"foo\"] == [{\"code\": \"invalid_foo\"}]\n", "tokens": ["tests", "test_schema", "py", "testfieldvalidation", "def", "test_raises_error_with_dict", "self", "def", "validator", "val", "raise", "validationerror", "code", "invalid_foo", "class", "myschema", "schema", "foo", "fields", "field", "validate", "validator", "s", "myschema", "errors", "s", "validate", "foo", "42", "assert", "errors", "foo", "code", "invalid_foo"], "doc_len": 34}
{"doc_id": "tests/test_schema.py::TestFieldValidation.test_ignored_if_not_in_only", "file_path": "tests/test_schema.py", "class_name": "TestFieldValidation", "func_name": "test_ignored_if_not_in_only", "text": "文件路径: tests/test_schema.py, 类名: TestFieldValidation\n    def test_ignored_if_not_in_only(self):\n        class MySchema(Schema):\n            a = fields.Field()\n            b = fields.Field()\n\n            @validates(\"a\")\n            def validate_a(self, val):\n                raise ValidationError({\"code\": \"invalid_a\"})\n\n            @validates(\"b\")\n            def validate_b(self, val):\n                raise ValidationError({\"code\": \"invalid_b\"})\n\n        s = MySchema(only=(\"b\",))\n        errors = s.validate({\"b\": \"data\"})\n        assert errors == {\"b\": {\"code\": \"invalid_b\"}}\n", "tokens": ["tests", "test_schema", "py", "testfieldvalidation", "def", "test_ignored_if_not_in_only", "self", "class", "myschema", "schema", "a", "fields", "field", "b", "fields", "field", "validates", "a", "def", "validate_a", "self", "val", "raise", "validationerror", "code", "invalid_a", "validates", "b", "def", "validate_b", "self", "val", "raise", "validationerror", "code", "invalid_b", "s", "myschema", "only", "b", "errors", "s", "validate", "b", "data", "assert", "errors", "b", "code", "invalid_b"], "doc_len": 50}
{"doc_id": "tests/test_schema.py::test_schema_repr", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_schema_repr", "text": "文件路径: tests/test_schema.py\ndef test_schema_repr():\n    class MySchema(Schema):\n        name = fields.String()\n\n    ser = MySchema(many=True)\n    rep = repr(ser)\n    assert \"MySchema\" in rep\n    assert \"many=True\" in rep\n", "tokens": ["tests", "test_schema", "py", "def", "test_schema_repr", "class", "myschema", "schema", "name", "fields", "string", "ser", "myschema", "many", "true", "rep", "repr", "ser", "assert", "myschema", "in", "rep", "assert", "many", "true", "in", "rep"], "doc_len": 27}
{"doc_id": "tests/test_schema.py::TestNestedSchema.user", "file_path": "tests/test_schema.py", "class_name": "TestNestedSchema", "func_name": "user", "text": "文件路径: tests/test_schema.py, 类名: TestNestedSchema\n    def user(self):\n        return User(name=\"Monty\", age=81)\n", "tokens": ["tests", "test_schema", "py", "testnestedschema", "def", "user", "self", "return", "user", "name", "monty", "age", "81"], "doc_len": 13}
{"doc_id": "tests/test_schema.py::TestNestedSchema.blog", "file_path": "tests/test_schema.py", "class_name": "TestNestedSchema", "func_name": "blog", "text": "文件路径: tests/test_schema.py, 类名: TestNestedSchema\n    def blog(self, user):\n        col1 = User(name=\"Mick\", age=123)\n        col2 = User(name=\"Keith\", age=456)\n        blog = Blog(\n            \"Monty's blog\",\n            user=user,\n            categories=[\"humor\", \"violence\"],\n            collaborators=[col1, col2],\n        )\n        return blog\n\n        class FlatBlogSchema(Schema):\n            name = fields.String()\n            user = fields.Nested(UserSchema, only=\"name\")\n            collaborators = fields.Nested(UserSchema, only=\"name\", many=True)\n\n        s = FlatBlogSchema()\n        data = s.dump(blog)\n        assert data[\"user\"] == blog.user.name\n        for i, name in enumerate(data[\"collaborators\"]):\n            assert name == blog.collaborators[i].name\n", "tokens": ["tests", "test_schema", "py", "testnestedschema", "def", "blog", "self", "user", "col1", "user", "name", "mick", "age", "123", "col2", "user", "name", "keith", "age", "456", "blog", "blog", "monty", "s", "blog", "user", "user", "categories", "humor", "violence", "collaborators", "col1", "col2", "return", "blog", "class", "flatblogschema", "schema", "name", "fields", "string", "user", "fields", "nested", "userschema", "only", "name", "collaborators", "fields", "nested", "userschema", "only", "name", "many", "true", "s", "flatblogschema", "data", "s", "dump", "blog", "assert", "data", "user", "blog", "user", "name", "for", "i", "name", "in", "enumerate", "data", "collaborators", "assert", "name", "blog", "collaborators", "i", "name"], "doc_len": 80}
{"doc_id": "tests/test_schema.py::TestNestedSchema.test_nested_many_with_missing_attribute", "file_path": "tests/test_schema.py", "class_name": "TestNestedSchema", "func_name": "test_nested_many_with_missing_attribute", "text": "文件路径: tests/test_schema.py, 类名: TestNestedSchema\n    def test_nested_many_with_missing_attribute(self, user):\n        class SimpleBlogSchema(Schema):\n            title = fields.Str()\n            wat = fields.Nested(UserSchema, many=True)\n\n        blog = Blog(\"Simple blog\", user=user, collaborators=None)\n        schema = SimpleBlogSchema()\n        result = schema.dump(blog)\n        assert \"wat\" not in result\n", "tokens": ["tests", "test_schema", "py", "testnestedschema", "def", "test_nested_many_with_missing_attribute", "self", "user", "class", "simpleblogschema", "schema", "title", "fields", "str", "wat", "fields", "nested", "userschema", "many", "true", "blog", "blog", "simple", "blog", "user", "user", "collaborators", "none", "schema", "simpleblogschema", "result", "schema", "dump", "blog", "assert", "wat", "not", "in", "result"], "doc_len": 39}
{"doc_id": "tests/test_schema.py::TestNestedSchema.test_nested_with_attribute_none", "file_path": "tests/test_schema.py", "class_name": "TestNestedSchema", "func_name": "test_nested_with_attribute_none", "text": "文件路径: tests/test_schema.py, 类名: TestNestedSchema\n    def test_nested_with_attribute_none(self):\n        class InnerSchema(Schema):\n            bar = fields.Field()\n\n        class MySchema(Schema):\n            foo = fields.Nested(InnerSchema)\n\n        class MySchema2(Schema):\n            foo = fields.Nested(InnerSchema)\n\n        s = MySchema()\n        result = s.dump({\"foo\": None})\n        assert result[\"foo\"] is None\n\n        s2 = MySchema2()\n        result2 = s2.dump({\"foo\": None})\n        assert result2[\"foo\"] is None\n", "tokens": ["tests", "test_schema", "py", "testnestedschema", "def", "test_nested_with_attribute_none", "self", "class", "innerschema", "schema", "bar", "fields", "field", "class", "myschema", "schema", "foo", "fields", "nested", "innerschema", "class", "myschema2", "schema", "foo", "fields", "nested", "innerschema", "s", "myschema", "result", "s", "dump", "foo", "none", "assert", "result", "foo", "is", "none", "s2", "myschema2", "result2", "s2", "dump", "foo", "none", "assert", "result2", "foo", "is", "none"], "doc_len": 51}
{"doc_id": "tests/test_schema.py::TestNestedSchema.test_nested_field_does_not_validate_required", "file_path": "tests/test_schema.py", "class_name": "TestNestedSchema", "func_name": "test_nested_field_does_not_validate_required", "text": "文件路径: tests/test_schema.py, 类名: TestNestedSchema\n    def test_nested_field_does_not_validate_required(self):\n        class BlogRequiredSchema(Schema):\n            user = fields.Nested(UserSchema, required=True)\n\n        b = Blog(\"Authorless blog\", user=None)\n        BlogRequiredSchema().dump(b)\n", "tokens": ["tests", "test_schema", "py", "testnestedschema", "def", "test_nested_field_does_not_validate_required", "self", "class", "blogrequiredschema", "schema", "user", "fields", "nested", "userschema", "required", "true", "b", "blog", "authorless", "blog", "user", "none", "blogrequiredschema", "dump", "b"], "doc_len": 25}
{"doc_id": "tests/test_schema.py::TestNestedSchema.test_nested_none", "file_path": "tests/test_schema.py", "class_name": "TestNestedSchema", "func_name": "test_nested_none", "text": "文件路径: tests/test_schema.py, 类名: TestNestedSchema\n    def test_nested_none(self):\n        class BlogDefaultSchema(Schema):\n            user = fields.Nested(UserSchema, default=0)\n\n        b = Blog(\"Just the default blog\", user=None)\n        data = BlogDefaultSchema().dump(b)\n        assert data[\"user\"] is None\n", "tokens": ["tests", "test_schema", "py", "testnestedschema", "def", "test_nested_none", "self", "class", "blogdefaultschema", "schema", "user", "fields", "nested", "userschema", "default", "0", "b", "blog", "just", "the", "default", "blog", "user", "none", "data", "blogdefaultschema", "dump", "b", "assert", "data", "user", "is", "none"], "doc_len": 33}
{"doc_id": "tests/test_schema.py::TestNestedSchema.test_nested", "file_path": "tests/test_schema.py", "class_name": "TestNestedSchema", "func_name": "test_nested", "text": "文件路径: tests/test_schema.py, 类名: TestNestedSchema\n    def test_nested(self, user, blog):\n        blog_serializer = BlogSchema()\n        serialized_blog = blog_serializer.dump(blog)\n        user_serializer = UserSchema()\n        serialized_user = user_serializer.dump(user)\n        assert serialized_blog[\"user\"] == serialized_user\n\n        with pytest.raises(ValidationError, match=\"email\"):\n            BlogSchema().load(\n                {\"title\": \"Monty's blog\", \"user\": {\"name\": \"Monty\", \"email\": \"foo\"}}\n            )\n", "tokens": ["tests", "test_schema", "py", "testnestedschema", "def", "test_nested", "self", "user", "blog", "blog_serializer", "blogschema", "serialized_blog", "blog_serializer", "dump", "blog", "user_serializer", "userschema", "serialized_user", "user_serializer", "dump", "user", "assert", "serialized_blog", "user", "serialized_user", "with", "pytest", "raises", "validationerror", "match", "email", "blogschema", "load", "title", "monty", "s", "blog", "user", "name", "monty", "email", "foo"], "doc_len": 42}
{"doc_id": "tests/test_schema.py::TestNestedSchema.test_nested_many_fields", "file_path": "tests/test_schema.py", "class_name": "TestNestedSchema", "func_name": "test_nested_many_fields", "text": "文件路径: tests/test_schema.py, 类名: TestNestedSchema\n    def test_nested_many_fields(self, blog):\n        serialized_blog = BlogSchema().dump(blog)\n        expected = [UserSchema().dump(col) for col in blog.collaborators]\n        assert serialized_blog[\"collaborators\"] == expected\n", "tokens": ["tests", "test_schema", "py", "testnestedschema", "def", "test_nested_many_fields", "self", "blog", "serialized_blog", "blogschema", "dump", "blog", "expected", "userschema", "dump", "col", "for", "col", "in", "blog", "collaborators", "assert", "serialized_blog", "collaborators", "expected"], "doc_len": 25}
{"doc_id": "tests/test_schema.py::TestNestedSchema.test_nested_meta_many", "file_path": "tests/test_schema.py", "class_name": "TestNestedSchema", "func_name": "test_nested_meta_many", "text": "文件路径: tests/test_schema.py, 类名: TestNestedSchema\n    def test_nested_meta_many(self, blog):\n        serialized_blog = BlogUserMetaSchema().dump(blog)\n        assert len(serialized_blog[\"collaborators\"]) == 2\n        expected = [UserMetaSchema().dump(col) for col in blog.collaborators]\n        assert serialized_blog[\"collaborators\"] == expected\n", "tokens": ["tests", "test_schema", "py", "testnestedschema", "def", "test_nested_meta_many", "self", "blog", "serialized_blog", "blogusermetaschema", "dump", "blog", "assert", "len", "serialized_blog", "collaborators", "2", "expected", "usermetaschema", "dump", "col", "for", "col", "in", "blog", "collaborators", "assert", "serialized_blog", "collaborators", "expected"], "doc_len": 30}
{"doc_id": "tests/test_schema.py::TestNestedSchema.test_nested_only", "file_path": "tests/test_schema.py", "class_name": "TestNestedSchema", "func_name": "test_nested_only", "text": "文件路径: tests/test_schema.py, 类名: TestNestedSchema\n    def test_nested_only(self, blog):\n        col1 = User(name=\"Mick\", age=123, id_=\"abc\")\n        col2 = User(name=\"Keith\", age=456, id_=\"def\")\n        blog.collaborators = [col1, col2]\n        serialized_blog = BlogOnlySchema().dump(blog)\n        assert serialized_blog[\"collaborators\"] == [{\"id\": col1.id}, {\"id\": col2.id}]\n", "tokens": ["tests", "test_schema", "py", "testnestedschema", "def", "test_nested_only", "self", "blog", "col1", "user", "name", "mick", "age", "123", "id_", "abc", "col2", "user", "name", "keith", "age", "456", "id_", "def", "blog", "collaborators", "col1", "col2", "serialized_blog", "blogonlyschema", "dump", "blog", "assert", "serialized_blog", "collaborators", "id", "col1", "id", "id", "col2", "id"], "doc_len": 41}
{"doc_id": "tests/test_schema.py::TestNestedSchema.test_exclude", "file_path": "tests/test_schema.py", "class_name": "TestNestedSchema", "func_name": "test_exclude", "text": "文件路径: tests/test_schema.py, 类名: TestNestedSchema\n    def test_exclude(self, blog):\n        serialized = BlogSchemaExclude().dump(blog)\n        assert \"uppername\" not in serialized[\"user\"].keys()\n", "tokens": ["tests", "test_schema", "py", "testnestedschema", "def", "test_exclude", "self", "blog", "serialized", "blogschemaexclude", "dump", "blog", "assert", "uppername", "not", "in", "serialized", "user", "keys"], "doc_len": 19}
{"doc_id": "tests/test_schema.py::TestNestedSchema.test_list_field", "file_path": "tests/test_schema.py", "class_name": "TestNestedSchema", "func_name": "test_list_field", "text": "文件路径: tests/test_schema.py, 类名: TestNestedSchema\n    def test_list_field(self, blog):\n        serialized = BlogSchema().dump(blog)\n        assert serialized[\"categories\"] == [\"humor\", \"violence\"]\n", "tokens": ["tests", "test_schema", "py", "testnestedschema", "def", "test_list_field", "self", "blog", "serialized", "blogschema", "dump", "blog", "assert", "serialized", "categories", "humor", "violence"], "doc_len": 17}
{"doc_id": "tests/test_schema.py::TestNestedSchema.test_nested_load_many", "file_path": "tests/test_schema.py", "class_name": "TestNestedSchema", "func_name": "test_nested_load_many", "text": "文件路径: tests/test_schema.py, 类名: TestNestedSchema\n    def test_nested_load_many(self):\n        in_data = {\n            \"title\": \"Shine A Light\",\n            \"collaborators\": [\n                {\"name\": \"Mick\", \"email\": \"mick@stones.com\"},\n                {\"name\": \"Keith\", \"email\": \"keith@stones.com\"},\n            ],\n        }\n        data = BlogSchema().load(in_data)\n        collabs = data[\"collaborators\"]\n        assert len(collabs) == 2\n        assert all(type(each) == User for each in collabs)\n        assert collabs[0].name == in_data[\"collaborators\"][0][\"name\"]\n", "tokens": ["tests", "test_schema", "py", "testnestedschema", "def", "test_nested_load_many", "self", "in_data", "title", "shine", "a", "light", "collaborators", "name", "mick", "email", "mick", "stones", "com", "name", "keith", "email", "keith", "stones", "com", "data", "blogschema", "load", "in_data", "collabs", "data", "collaborators", "assert", "len", "collabs", "2", "assert", "all", "type", "each", "user", "for", "each", "in", "collabs", "assert", "collabs", "0", "name", "in_data", "collaborators", "0", "name"], "doc_len": 53}
{"doc_id": "tests/test_schema.py::TestNestedSchema.test_nested_errors", "file_path": "tests/test_schema.py", "class_name": "TestNestedSchema", "func_name": "test_nested_errors", "text": "文件路径: tests/test_schema.py, 类名: TestNestedSchema\n    def test_nested_errors(self):\n        with pytest.raises(ValidationError) as excinfo:\n            BlogSchema().load(\n                {\"title\": \"Monty's blog\", \"user\": {\"name\": \"Monty\", \"email\": \"foo\"}}\n            )\n        errors = excinfo.value.messages\n        assert \"email\" in errors[\"user\"]\n        assert len(errors[\"user\"][\"email\"]) == 1\n        assert \"Not a valid email address.\" in errors[\"user\"][\"email\"][0]\n        # No problems with collaborators\n        assert \"collaborators\" not in errors\n", "tokens": ["tests", "test_schema", "py", "testnestedschema", "def", "test_nested_errors", "self", "with", "pytest", "raises", "validationerror", "as", "excinfo", "blogschema", "load", "title", "monty", "s", "blog", "user", "name", "monty", "email", "foo", "errors", "excinfo", "value", "messages", "assert", "email", "in", "errors", "user", "assert", "len", "errors", "user", "email", "1", "assert", "not", "a", "valid", "email", "address", "in", "errors", "user", "email", "0", "no", "problems", "with", "collaborators", "assert", "collaborators", "not", "in", "errors"], "doc_len": 59}
{"doc_id": "tests/test_schema.py::TestNestedSchema.test_nested_method_field", "file_path": "tests/test_schema.py", "class_name": "TestNestedSchema", "func_name": "test_nested_method_field", "text": "文件路径: tests/test_schema.py, 类名: TestNestedSchema\n    def test_nested_method_field(self, blog):\n        data = BlogSchema().dump(blog)\n        assert data[\"user\"][\"is_old\"]\n        assert data[\"collaborators\"][0][\"is_old\"]\n", "tokens": ["tests", "test_schema", "py", "testnestedschema", "def", "test_nested_method_field", "self", "blog", "data", "blogschema", "dump", "blog", "assert", "data", "user", "is_old", "assert", "data", "collaborators", "0", "is_old"], "doc_len": 21}
{"doc_id": "tests/test_schema.py::TestNestedSchema.test_nested_function_field", "file_path": "tests/test_schema.py", "class_name": "TestNestedSchema", "func_name": "test_nested_function_field", "text": "文件路径: tests/test_schema.py, 类名: TestNestedSchema\n    def test_nested_function_field(self, blog, user):\n        data = BlogSchema().dump(blog)\n        assert data[\"user\"][\"lowername\"] == user.name.lower()\n        expected = blog.collaborators[0].name.lower()\n        assert data[\"collaborators\"][0][\"lowername\"] == expected\n", "tokens": ["tests", "test_schema", "py", "testnestedschema", "def", "test_nested_function_field", "self", "blog", "user", "data", "blogschema", "dump", "blog", "assert", "data", "user", "lowername", "user", "name", "lower", "expected", "blog", "collaborators", "0", "name", "lower", "assert", "data", "collaborators", "0", "lowername", "expected"], "doc_len": 32}
{"doc_id": "tests/test_schema.py::TestNestedSchema.test_serializer_meta_with_nested_fields", "file_path": "tests/test_schema.py", "class_name": "TestNestedSchema", "func_name": "test_serializer_meta_with_nested_fields", "text": "文件路径: tests/test_schema.py, 类名: TestNestedSchema\n    def test_serializer_meta_with_nested_fields(self, blog, user):\n        data = BlogSchemaMeta().dump(blog)\n        assert data[\"title\"] == blog.title\n        assert data[\"user\"] == UserSchema().dump(user)\n        assert data[\"collaborators\"] == [\n            UserSchema().dump(c) for c in blog.collaborators\n        ]\n        assert data[\"categories\"] == blog.categories\n", "tokens": ["tests", "test_schema", "py", "testnestedschema", "def", "test_serializer_meta_with_nested_fields", "self", "blog", "user", "data", "blogschemameta", "dump", "blog", "assert", "data", "title", "blog", "title", "assert", "data", "user", "userschema", "dump", "user", "assert", "data", "collaborators", "userschema", "dump", "c", "for", "c", "in", "blog", "collaborators", "assert", "data", "categories", "blog", "categories"], "doc_len": 40}
{"doc_id": "tests/test_schema.py::TestNestedSchema.test_serializer_with_nested_meta_fields", "file_path": "tests/test_schema.py", "class_name": "TestNestedSchema", "func_name": "test_serializer_with_nested_meta_fields", "text": "文件路径: tests/test_schema.py, 类名: TestNestedSchema\n    def test_serializer_with_nested_meta_fields(self, blog):\n        # Schema has user = fields.Nested(UserMetaSerializer)\n        s = BlogUserMetaSchema().dump(blog)\n        assert s[\"user\"] == UserMetaSchema().dump(blog.user)\n", "tokens": ["tests", "test_schema", "py", "testnestedschema", "def", "test_serializer_with_nested_meta_fields", "self", "blog", "schema", "has", "user", "fields", "nested", "usermetaserializer", "s", "blogusermetaschema", "dump", "blog", "assert", "s", "user", "usermetaschema", "dump", "blog", "user"], "doc_len": 25}
{"doc_id": "tests/test_schema.py::TestNestedSchema.test_nested_fields_must_be_passed_a_serializer", "file_path": "tests/test_schema.py", "class_name": "TestNestedSchema", "func_name": "test_nested_fields_must_be_passed_a_serializer", "text": "文件路径: tests/test_schema.py, 类名: TestNestedSchema\n    def test_nested_fields_must_be_passed_a_serializer(self, blog):\n        class BadNestedFieldSchema(BlogSchema):\n            user = fields.Nested(fields.String)\n\n        with pytest.raises(ValueError):\n            BadNestedFieldSchema().dump(blog)\n", "tokens": ["tests", "test_schema", "py", "testnestedschema", "def", "test_nested_fields_must_be_passed_a_serializer", "self", "blog", "class", "badnestedfieldschema", "blogschema", "user", "fields", "nested", "fields", "string", "with", "pytest", "raises", "valueerror", "badnestedfieldschema", "dump", "blog"], "doc_len": 23}
{"doc_id": "tests/test_schema.py::TestNestedSchema.test_invalid_type_passed_to_nested_field", "file_path": "tests/test_schema.py", "class_name": "TestNestedSchema", "func_name": "test_invalid_type_passed_to_nested_field", "text": "文件路径: tests/test_schema.py, 类名: TestNestedSchema\n    def test_invalid_type_passed_to_nested_field(self):\n        class InnerSchema(Schema):\n            foo = fields.Field()\n\n        class MySchema(Schema):\n            inner = fields.Nested(InnerSchema, many=True)\n\n        sch = MySchema()\n\n        sch.load({\"inner\": [{\"foo\": 42}]})\n\n        with pytest.raises(ValidationError) as excinfo:\n            sch.load({\"inner\": \"invalid\"})\n        errors = excinfo.value.messages\n        assert \"inner\" in errors\n        assert errors[\"inner\"] == [\"Invalid type.\"]\n\n        class OuterSchema(Schema):\n            inner = fields.Nested(InnerSchema)\n\n        schema = OuterSchema()\n        with pytest.raises(ValidationError) as excinfo:\n            schema.load({\"inner\": 1})\n        errors = excinfo.value.messages\n        assert errors[\"inner\"][\"_schema\"] == [\"Invalid input type.\"]\n", "tokens": ["tests", "test_schema", "py", "testnestedschema", "def", "test_invalid_type_passed_to_nested_field", "self", "class", "innerschema", "schema", "foo", "fields", "field", "class", "myschema", "schema", "inner", "fields", "nested", "innerschema", "many", "true", "sch", "myschema", "sch", "load", "inner", "foo", "42", "with", "pytest", "raises", "validationerror", "as", "excinfo", "sch", "load", "inner", "invalid", "errors", "excinfo", "value", "messages", "assert", "inner", "in", "errors", "assert", "errors", "inner", "invalid", "type", "class", "outerschema", "schema", "inner", "fields", "nested", "innerschema", "schema", "outerschema", "with", "pytest", "raises", "validationerror", "as", "excinfo", "schema", "load", "inner", "1", "errors", "excinfo", "value", "messages", "assert", "errors", "inner", "_schema", "invalid", "input", "type"], "doc_len": 82}
{"doc_id": "tests/test_schema.py::TestNestedSchema.test_all_errors_on_many_nested_field_with_validates_decorator", "file_path": "tests/test_schema.py", "class_name": "TestNestedSchema", "func_name": "test_all_errors_on_many_nested_field_with_validates_decorator", "text": "文件路径: tests/test_schema.py, 类名: TestNestedSchema\n    def test_all_errors_on_many_nested_field_with_validates_decorator(self):\n        class Inner(Schema):\n            req = fields.Field(required=True)\n\n        class Outer(Schema):\n            inner = fields.Nested(Inner, many=True)\n\n            @validates(\"inner\")\n            def validates_inner(self, data):\n                raise ValidationError(\"not a chance\")\n\n        outer = Outer()\n        with pytest.raises(ValidationError) as excinfo:\n            outer.load({\"inner\": [{}]})\n        errors = excinfo.value.messages\n        assert \"inner\" in errors\n        assert \"_schema\" in errors[\"inner\"]\n", "tokens": ["tests", "test_schema", "py", "testnestedschema", "def", "test_all_errors_on_many_nested_field_with_validates_decorator", "self", "class", "inner", "schema", "req", "fields", "field", "required", "true", "class", "outer", "schema", "inner", "fields", "nested", "inner", "many", "true", "validates", "inner", "def", "validates_inner", "self", "data", "raise", "validationerror", "not", "a", "chance", "outer", "outer", "with", "pytest", "raises", "validationerror", "as", "excinfo", "outer", "load", "inner", "errors", "excinfo", "value", "messages", "assert", "inner", "in", "errors", "assert", "_schema", "in", "errors", "inner"], "doc_len": 59}
{"doc_id": "tests/test_schema.py::TestNestedSchema.test_nested_unknown_validation", "file_path": "tests/test_schema.py", "class_name": "TestNestedSchema", "func_name": "test_nested_unknown_validation", "text": "文件路径: tests/test_schema.py, 类名: TestNestedSchema\n    def test_nested_unknown_validation(self, unknown):\n        class ChildSchema(Schema):\n            num = fields.Int()\n\n        class ParentSchema(Schema):\n            child = fields.Nested(ChildSchema, unknown=unknown)\n\n        data = {\"child\": {\"num\": 1, \"extra\": 1}}\n        if unknown is None or unknown == RAISE:\n            with pytest.raises(ValidationError) as exc:\n                ParentSchema().load(data)\n                assert exc.messages == {\"child\": {\"extra\": [\"Unknown field.\"]}}\n        else:\n            output = {\n                INCLUDE: {\"child\": {\"num\": 1, \"extra\": 1}},\n                EXCLUDE: {\"child\": {\"num\": 1}},\n            }[unknown]\n            assert ParentSchema().load(data) == output\n", "tokens": ["tests", "test_schema", "py", "testnestedschema", "def", "test_nested_unknown_validation", "self", "unknown", "class", "childschema", "schema", "num", "fields", "int", "class", "parentschema", "schema", "child", "fields", "nested", "childschema", "unknown", "unknown", "data", "child", "num", "1", "extra", "1", "if", "unknown", "is", "none", "or", "unknown", "raise", "with", "pytest", "raises", "validationerror", "as", "exc", "parentschema", "load", "data", "assert", "exc", "messages", "child", "extra", "unknown", "field", "else", "output", "include", "child", "num", "1", "extra", "1", "exclude", "child", "num", "1", "unknown", "assert", "parentschema", "load", "data", "output"], "doc_len": 70}
{"doc_id": "tests/test_schema.py::TestPluckSchema.test_pluck", "file_path": "tests/test_schema.py", "class_name": "TestPluckSchema", "func_name": "test_pluck", "text": "文件路径: tests/test_schema.py, 类名: TestPluckSchema\n    def test_pluck(self, blog):\n        class FlatBlogSchema(Schema):\n            user = fields.Pluck(UserSchema, \"name\")\n            collaborators = fields.Pluck(UserSchema, \"name\", many=True)\n\n        s = FlatBlogSchema()\n        data = s.dump(blog)\n        assert data[\"user\"] == blog.user.name\n        for i, name in enumerate(data[\"collaborators\"]):\n            assert name == blog.collaborators[i].name\n", "tokens": ["tests", "test_schema", "py", "testpluckschema", "def", "test_pluck", "self", "blog", "class", "flatblogschema", "schema", "user", "fields", "pluck", "userschema", "name", "collaborators", "fields", "pluck", "userschema", "name", "many", "true", "s", "flatblogschema", "data", "s", "dump", "blog", "assert", "data", "user", "blog", "user", "name", "for", "i", "name", "in", "enumerate", "data", "collaborators", "assert", "name", "blog", "collaborators", "i", "name"], "doc_len": 48}
{"doc_id": "tests/test_schema.py::TestPluckSchema.test_pluck_none", "file_path": "tests/test_schema.py", "class_name": "TestPluckSchema", "func_name": "test_pluck_none", "text": "文件路径: tests/test_schema.py, 类名: TestPluckSchema\n    def test_pluck_none(self, blog):\n        class FlatBlogSchema(Schema):\n            user = fields.Pluck(UserSchema, \"name\")\n            collaborators = fields.Pluck(UserSchema, \"name\", many=True)\n\n        col1 = User(name=\"Mick\", age=123)\n        col2 = User(name=\"Keith\", age=456)\n        blog = Blog(title=\"Unowned Blog\", user=None, collaborators=[col1, col2])\n        s = FlatBlogSchema()\n        data = s.dump(blog)\n        assert data[\"user\"] == blog.user\n        for i, name in enumerate(data[\"collaborators\"]):\n            assert name == blog.collaborators[i].name\n", "tokens": ["tests", "test_schema", "py", "testpluckschema", "def", "test_pluck_none", "self", "blog", "class", "flatblogschema", "schema", "user", "fields", "pluck", "userschema", "name", "collaborators", "fields", "pluck", "userschema", "name", "many", "true", "col1", "user", "name", "mick", "age", "123", "col2", "user", "name", "keith", "age", "456", "blog", "blog", "title", "unowned", "blog", "user", "none", "collaborators", "col1", "col2", "s", "flatblogschema", "data", "s", "dump", "blog", "assert", "data", "user", "blog", "user", "for", "i", "name", "in", "enumerate", "data", "collaborators", "assert", "name", "blog", "collaborators", "i", "name"], "doc_len": 69}
{"doc_id": "tests/test_schema.py::TestPluckSchema.test_pluck_with_data_key", "file_path": "tests/test_schema.py", "class_name": "TestPluckSchema", "func_name": "test_pluck_with_data_key", "text": "文件路径: tests/test_schema.py, 类名: TestPluckSchema\n    def test_pluck_with_data_key(self, blog):\n        class UserSchema(Schema):\n            name = fields.String(data_key=\"username\")\n            age = fields.Int()\n\n        class FlatBlogSchema(Schema):\n            user = fields.Pluck(UserSchema, \"name\")\n            collaborators = fields.Pluck(UserSchema, \"name\", many=True)\n\n        s = FlatBlogSchema()\n        data = s.dump(blog)\n        assert data[\"user\"] == blog.user.name\n        for i, name in enumerate(data[\"collaborators\"]):\n            assert name == blog.collaborators[i].name\n        assert s.load(data) == {\n            \"user\": {\"name\": \"Monty\"},\n            \"collaborators\": [{\"name\": \"Mick\"}, {\"name\": \"Keith\"}],\n        }\n", "tokens": ["tests", "test_schema", "py", "testpluckschema", "def", "test_pluck_with_data_key", "self", "blog", "class", "userschema", "schema", "name", "fields", "string", "data_key", "username", "age", "fields", "int", "class", "flatblogschema", "schema", "user", "fields", "pluck", "userschema", "name", "collaborators", "fields", "pluck", "userschema", "name", "many", "true", "s", "flatblogschema", "data", "s", "dump", "blog", "assert", "data", "user", "blog", "user", "name", "for", "i", "name", "in", "enumerate", "data", "collaborators", "assert", "name", "blog", "collaborators", "i", "name", "assert", "s", "load", "data", "user", "name", "monty", "collaborators", "name", "mick", "name", "keith"], "doc_len": 71}
{"doc_id": "tests/test_schema.py::TestSelfReference.employer", "file_path": "tests/test_schema.py", "class_name": "TestSelfReference", "func_name": "employer", "text": "文件路径: tests/test_schema.py, 类名: TestSelfReference\n    def employer(self):\n        return User(name=\"Joe\", age=59)\n", "tokens": ["tests", "test_schema", "py", "testselfreference", "def", "employer", "self", "return", "user", "name", "joe", "age", "59"], "doc_len": 13}
{"doc_id": "tests/test_schema.py::TestSelfReference.user", "file_path": "tests/test_schema.py", "class_name": "TestSelfReference", "func_name": "user", "text": "文件路径: tests/test_schema.py, 类名: TestSelfReference\n    def user(self, employer):\n        return User(name=\"Tom\", employer=employer, age=28)\n", "tokens": ["tests", "test_schema", "py", "testselfreference", "def", "user", "self", "employer", "return", "user", "name", "tom", "employer", "employer", "age", "28"], "doc_len": 16}
{"doc_id": "tests/test_schema.py::TestSelfReference.test_nesting_schema_within_itself", "file_path": "tests/test_schema.py", "class_name": "TestSelfReference", "func_name": "test_nesting_schema_within_itself", "text": "文件路径: tests/test_schema.py, 类名: TestSelfReference\n    def test_nesting_schema_within_itself(self, user, employer):\n        class SelfSchema(Schema):\n            name = fields.String()\n            age = fields.Integer()\n            employer = fields.Nested(\"self\", exclude=(\"employer\",))\n\n        data = SelfSchema().dump(user)\n        assert data[\"name\"] == user.name\n        assert data[\"employer\"][\"name\"] == employer.name\n        assert data[\"employer\"][\"age\"] == employer.age\n", "tokens": ["tests", "test_schema", "py", "testselfreference", "def", "test_nesting_schema_within_itself", "self", "user", "employer", "class", "selfschema", "schema", "name", "fields", "string", "age", "fields", "integer", "employer", "fields", "nested", "self", "exclude", "employer", "data", "selfschema", "dump", "user", "assert", "data", "name", "user", "name", "assert", "data", "employer", "name", "employer", "name", "assert", "data", "employer", "age", "employer", "age"], "doc_len": 45}
{"doc_id": "tests/test_schema.py::TestSelfReference.test_nesting_schema_by_passing_class_name", "file_path": "tests/test_schema.py", "class_name": "TestSelfReference", "func_name": "test_nesting_schema_by_passing_class_name", "text": "文件路径: tests/test_schema.py, 类名: TestSelfReference\n    def test_nesting_schema_by_passing_class_name(self, user, employer):\n        class SelfReferencingSchema(Schema):\n            name = fields.Str()\n            age = fields.Int()\n            employer = fields.Nested(\"SelfReferencingSchema\", exclude=(\"employer\",))\n\n        data = SelfReferencingSchema().dump(user)\n        assert data[\"name\"] == user.name\n        assert data[\"employer\"][\"name\"] == employer.name\n        assert data[\"employer\"][\"age\"] == employer.age\n", "tokens": ["tests", "test_schema", "py", "testselfreference", "def", "test_nesting_schema_by_passing_class_name", "self", "user", "employer", "class", "selfreferencingschema", "schema", "name", "fields", "str", "age", "fields", "int", "employer", "fields", "nested", "selfreferencingschema", "exclude", "employer", "data", "selfreferencingschema", "dump", "user", "assert", "data", "name", "user", "name", "assert", "data", "employer", "name", "employer", "name", "assert", "data", "employer", "age", "employer", "age"], "doc_len": 45}
{"doc_id": "tests/test_schema.py::TestSelfReference.test_nesting_within_itself_meta", "file_path": "tests/test_schema.py", "class_name": "TestSelfReference", "func_name": "test_nesting_within_itself_meta", "text": "文件路径: tests/test_schema.py, 类名: TestSelfReference\n    def test_nesting_within_itself_meta(self, user, employer):\n        class SelfSchema(Schema):\n            employer = fields.Nested(\"self\", exclude=(\"employer\",))\n\n            class Meta:\n                additional = (\"name\", \"age\")\n\n        data = SelfSchema().dump(user)\n        assert data[\"name\"] == user.name\n        assert data[\"age\"] == user.age\n        assert data[\"employer\"][\"name\"] == employer.name\n        assert data[\"employer\"][\"age\"] == employer.age\n", "tokens": ["tests", "test_schema", "py", "testselfreference", "def", "test_nesting_within_itself_meta", "self", "user", "employer", "class", "selfschema", "schema", "employer", "fields", "nested", "self", "exclude", "employer", "class", "meta", "additional", "name", "age", "data", "selfschema", "dump", "user", "assert", "data", "name", "user", "name", "assert", "data", "age", "user", "age", "assert", "data", "employer", "name", "employer", "name", "assert", "data", "employer", "age", "employer", "age"], "doc_len": 49}
{"doc_id": "tests/test_schema.py::TestSelfReference.test_nested_self_with_only_param", "file_path": "tests/test_schema.py", "class_name": "TestSelfReference", "func_name": "test_nested_self_with_only_param", "text": "文件路径: tests/test_schema.py, 类名: TestSelfReference\n    def test_nested_self_with_only_param(self, user, employer):\n        class SelfSchema(Schema):\n            employer = fields.Nested(\"self\", only=(\"name\",))\n\n            class Meta:\n                fields = (\"name\", \"employer\")\n\n        data = SelfSchema().dump(user)\n        assert data[\"name\"] == user.name\n        assert data[\"employer\"][\"name\"] == employer.name\n        assert \"age\" not in data[\"employer\"]\n", "tokens": ["tests", "test_schema", "py", "testselfreference", "def", "test_nested_self_with_only_param", "self", "user", "employer", "class", "selfschema", "schema", "employer", "fields", "nested", "self", "only", "name", "class", "meta", "fields", "name", "employer", "data", "selfschema", "dump", "user", "assert", "data", "name", "user", "name", "assert", "data", "employer", "name", "employer", "name", "assert", "age", "not", "in", "data", "employer"], "doc_len": 44}
{"doc_id": "tests/test_schema.py::TestSelfReference.test_multiple_pluck_self_field", "file_path": "tests/test_schema.py", "class_name": "TestSelfReference", "func_name": "test_multiple_pluck_self_field", "text": "文件路径: tests/test_schema.py, 类名: TestSelfReference\n    def test_multiple_pluck_self_field(self, user):\n        class MultipleSelfSchema(Schema):\n            emp = fields.Pluck(\"self\", \"name\", attribute=\"employer\")\n            rels = fields.Pluck(\"self\", \"name\", many=True, attribute=\"relatives\")\n\n            class Meta:\n                fields = (\"name\", \"emp\", \"rels\")\n\n        schema = MultipleSelfSchema()\n        user.relatives = [User(name=\"Bar\", age=12), User(name=\"Baz\", age=34)]\n        data = schema.dump(user)\n        assert len(data[\"rels\"]) == len(user.relatives)\n        relative = data[\"rels\"][0]\n        assert relative == user.relatives[0].name\n", "tokens": ["tests", "test_schema", "py", "testselfreference", "def", "test_multiple_pluck_self_field", "self", "user", "class", "multipleselfschema", "schema", "emp", "fields", "pluck", "self", "name", "attribute", "employer", "rels", "fields", "pluck", "self", "name", "many", "true", "attribute", "relatives", "class", "meta", "fields", "name", "emp", "rels", "schema", "multipleselfschema", "user", "relatives", "user", "name", "bar", "age", "12", "user", "name", "baz", "age", "34", "data", "schema", "dump", "user", "assert", "len", "data", "rels", "len", "user", "relatives", "relative", "data", "rels", "0", "assert", "relative", "user", "relatives", "0", "name"], "doc_len": 68}
{"doc_id": "tests/test_schema.py::TestSelfReference.test_nested_self_many", "file_path": "tests/test_schema.py", "class_name": "TestSelfReference", "func_name": "test_nested_self_many", "text": "文件路径: tests/test_schema.py, 类名: TestSelfReference\n    def test_nested_self_many(self):\n        class SelfManySchema(Schema):\n            relatives = fields.Nested(\"self\", many=True)\n\n            class Meta:\n                additional = (\"name\", \"age\")\n\n        person = User(name=\"Foo\")\n        person.relatives = [User(name=\"Bar\", age=12), User(name=\"Baz\", age=34)]\n        data = SelfManySchema().dump(person)\n        assert data[\"name\"] == person.name\n        assert len(data[\"relatives\"]) == len(person.relatives)\n        assert data[\"relatives\"][0][\"name\"] == person.relatives[0].name\n        assert data[\"relatives\"][0][\"age\"] == person.relatives[0].age\n", "tokens": ["tests", "test_schema", "py", "testselfreference", "def", "test_nested_self_many", "self", "class", "selfmanyschema", "schema", "relatives", "fields", "nested", "self", "many", "true", "class", "meta", "additional", "name", "age", "person", "user", "name", "foo", "person", "relatives", "user", "name", "bar", "age", "12", "user", "name", "baz", "age", "34", "data", "selfmanyschema", "dump", "person", "assert", "data", "name", "person", "name", "assert", "len", "data", "relatives", "len", "person", "relatives", "assert", "data", "relatives", "0", "name", "person", "relatives", "0", "name", "assert", "data", "relatives", "0", "age", "person", "relatives", "0", "age"], "doc_len": 71}
{"doc_id": "tests/test_schema.py::TestSelfReference.test_nested_self_list", "file_path": "tests/test_schema.py", "class_name": "TestSelfReference", "func_name": "test_nested_self_list", "text": "文件路径: tests/test_schema.py, 类名: TestSelfReference\n    def test_nested_self_list(self):\n        class SelfListSchema(Schema):\n            relatives = fields.List(fields.Nested(\"self\"))\n\n            class Meta:\n                additional = (\"name\", \"age\")\n\n        person = User(name=\"Foo\")\n        person.relatives = [User(name=\"Bar\", age=12), User(name=\"Baz\", age=34)]\n        data = SelfListSchema().dump(person)\n        assert data[\"name\"] == person.name\n        assert len(data[\"relatives\"]) == len(person.relatives)\n        assert data[\"relatives\"][0][\"name\"] == person.relatives[0].name\n        assert data[\"relatives\"][0][\"age\"] == person.relatives[0].age\n", "tokens": ["tests", "test_schema", "py", "testselfreference", "def", "test_nested_self_list", "self", "class", "selflistschema", "schema", "relatives", "fields", "list", "fields", "nested", "self", "class", "meta", "additional", "name", "age", "person", "user", "name", "foo", "person", "relatives", "user", "name", "bar", "age", "12", "user", "name", "baz", "age", "34", "data", "selflistschema", "dump", "person", "assert", "data", "name", "person", "name", "assert", "len", "data", "relatives", "len", "person", "relatives", "assert", "data", "relatives", "0", "name", "person", "relatives", "0", "name", "assert", "data", "relatives", "0", "age", "person", "relatives", "0", "age"], "doc_len": 71}
{"doc_id": "tests/test_schema.py::test_serialization_with_required_field", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_serialization_with_required_field", "text": "文件路径: tests/test_schema.py\ndef test_serialization_with_required_field():\n    user = User(name=None)\n    RequiredUserSchema().dump(user)\n", "tokens": ["tests", "test_schema", "py", "def", "test_serialization_with_required_field", "user", "user", "name", "none", "requireduserschema", "dump", "user"], "doc_len": 12}
{"doc_id": "tests/test_schema.py::test_deserialization_with_required_field", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_deserialization_with_required_field", "text": "文件路径: tests/test_schema.py\ndef test_deserialization_with_required_field():\n    in_data = {}\n    with pytest.raises(ValidationError) as excinfo:\n        RequiredUserSchema().load(in_data)\n    data, errors = excinfo.value.valid_data, excinfo.value.messages\n    assert \"name\" in errors\n    assert \"Missing data for required field.\" in errors[\"name\"]\n    # field value should also not be in output data\n    assert \"name\" not in data\n", "tokens": ["tests", "test_schema", "py", "def", "test_deserialization_with_required_field", "in_data", "with", "pytest", "raises", "validationerror", "as", "excinfo", "requireduserschema", "load", "in_data", "data", "errors", "excinfo", "value", "valid_data", "excinfo", "value", "messages", "assert", "name", "in", "errors", "assert", "missing", "data", "for", "required", "field", "in", "errors", "name", "field", "value", "should", "also", "not", "be", "in", "output", "data", "assert", "name", "not", "in", "data"], "doc_len": 50}
{"doc_id": "tests/test_schema.py::test_deserialization_with_required_field_and_custom_validator", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_deserialization_with_required_field_and_custom_validator", "text": "文件路径: tests/test_schema.py\ndef test_deserialization_with_required_field_and_custom_validator():\n    class ValidatingSchema(Schema):\n        color = fields.String(\n            required=True,\n            validate=lambda x: x.lower() == \"red\" or x.lower() == \"blue\",\n            error_messages={\"validator_failed\": \"Color must be red or blue\"},\n        )\n\n    with pytest.raises(ValidationError) as excinfo:\n        ValidatingSchema().load({\"name\": \"foo\"})\n    errors = excinfo.value.messages\n    assert errors\n    assert \"color\" in errors\n    assert \"Missing data for required field.\" in errors[\"color\"]\n\n    with pytest.raises(ValidationError) as excinfo:\n        ValidatingSchema().load({\"color\": \"green\"})\n    errors = excinfo.value.messages\n    assert \"color\" in errors\n    assert \"Color must be red or blue\" in errors[\"color\"]\n", "tokens": ["tests", "test_schema", "py", "def", "test_deserialization_with_required_field_and_custom_validator", "class", "validatingschema", "schema", "color", "fields", "string", "required", "true", "validate", "lambda", "x", "x", "lower", "red", "or", "x", "lower", "blue", "error_messages", "validator_failed", "color", "must", "be", "red", "or", "blue", "with", "pytest", "raises", "validationerror", "as", "excinfo", "validatingschema", "load", "name", "foo", "errors", "excinfo", "value", "messages", "assert", "errors", "assert", "color", "in", "errors", "assert", "missing", "data", "for", "required", "field", "in", "errors", "color", "with", "pytest", "raises", "validationerror", "as", "excinfo", "validatingschema", "load", "color", "green", "errors", "excinfo", "value", "messages", "assert", "color", "in", "errors", "assert", "color", "must", "be", "red", "or", "blue", "in", "errors", "color"], "doc_len": 88}
{"doc_id": "tests/test_schema.py::UserContextSchema.get_is_owner", "file_path": "tests/test_schema.py", "class_name": "UserContextSchema", "func_name": "get_is_owner", "text": "文件路径: tests/test_schema.py, 类名: UserContextSchema\n    def get_is_owner(self, user):\n        return self.context[\"blog\"].user.name == user.name\n", "tokens": ["tests", "test_schema", "py", "usercontextschema", "def", "get_is_owner", "self", "user", "return", "self", "context", "blog", "user", "name", "user", "name"], "doc_len": 16}
{"doc_id": "tests/test_schema.py::TestContext.test_context_method", "file_path": "tests/test_schema.py", "class_name": "TestContext", "func_name": "test_context_method", "text": "文件路径: tests/test_schema.py, 类名: TestContext\n    def test_context_method(self):\n        owner = User(\"Joe\")\n        blog = Blog(title=\"Joe Blog\", user=owner)\n        context = {\"blog\": blog}\n        serializer = UserContextSchema()\n        serializer.context = context\n        data = serializer.dump(owner)\n        assert data[\"is_owner\"] is True\n        nonowner = User(\"Fred\")\n        data = serializer.dump(nonowner)\n        assert data[\"is_owner\"] is False\n", "tokens": ["tests", "test_schema", "py", "testcontext", "def", "test_context_method", "self", "owner", "user", "joe", "blog", "blog", "title", "joe", "blog", "user", "owner", "context", "blog", "blog", "serializer", "usercontextschema", "serializer", "context", "context", "data", "serializer", "dump", "owner", "assert", "data", "is_owner", "is", "true", "nonowner", "user", "fred", "data", "serializer", "dump", "nonowner", "assert", "data", "is_owner", "is", "false"], "doc_len": 46}
{"doc_id": "tests/test_schema.py::TestContext.test_context_method_function", "file_path": "tests/test_schema.py", "class_name": "TestContext", "func_name": "test_context_method_function", "text": "文件路径: tests/test_schema.py, 类名: TestContext\n    def test_context_method_function(self):\n        owner = User(\"Fred\")\n        blog = Blog(\"Killer Queen\", user=owner)\n        collab = User(\"Brian\")\n        blog.collaborators.append(collab)\n        context = {\"blog\": blog}\n        serializer = UserContextSchema()\n        serializer.context = context\n        data = serializer.dump(collab)\n        assert data[\"is_collab\"] is True\n        noncollab = User(\"Foo\")\n        data = serializer.dump(noncollab)\n        assert data[\"is_collab\"] is False\n", "tokens": ["tests", "test_schema", "py", "testcontext", "def", "test_context_method_function", "self", "owner", "user", "fred", "blog", "blog", "killer", "queen", "user", "owner", "collab", "user", "brian", "blog", "collaborators", "append", "collab", "context", "blog", "blog", "serializer", "usercontextschema", "serializer", "context", "context", "data", "serializer", "dump", "collab", "assert", "data", "is_collab", "is", "true", "noncollab", "user", "foo", "data", "serializer", "dump", "noncollab", "assert", "data", "is_collab", "is", "false"], "doc_len": 52}
{"doc_id": "tests/test_schema.py::TestContext.test_function_field_raises_error_when_context_not_available", "file_path": "tests/test_schema.py", "class_name": "TestContext", "func_name": "test_function_field_raises_error_when_context_not_available", "text": "文件路径: tests/test_schema.py, 类名: TestContext\n    def test_function_field_raises_error_when_context_not_available(self):\n        # only has a function field\n        class UserFunctionContextSchema(Schema):\n            is_collab = fields.Function(lambda user, ctx: user in ctx[\"blog\"])\n\n        owner = User(\"Joe\")\n        serializer = UserFunctionContextSchema()\n        # no context\n        serializer.context = None\n        msg = \"No context available for Function field {!r}\".format(\"is_collab\")\n        with pytest.raises(ValidationError, match=msg):\n            serializer.dump(owner)\n", "tokens": ["tests", "test_schema", "py", "testcontext", "def", "test_function_field_raises_error_when_context_not_available", "self", "only", "has", "a", "function", "field", "class", "userfunctioncontextschema", "schema", "is_collab", "fields", "function", "lambda", "user", "ctx", "user", "in", "ctx", "blog", "owner", "user", "joe", "serializer", "userfunctioncontextschema", "no", "context", "serializer", "context", "none", "msg", "no", "context", "available", "for", "function", "field", "r", "format", "is_collab", "with", "pytest", "raises", "validationerror", "match", "msg", "serializer", "dump", "owner"], "doc_len": 54}
{"doc_id": "tests/test_schema.py::TestContext.test_function_field_handles_bound_serializer", "file_path": "tests/test_schema.py", "class_name": "TestContext", "func_name": "test_function_field_handles_bound_serializer", "text": "文件路径: tests/test_schema.py, 类名: TestContext\n    def test_function_field_handles_bound_serializer(self):\n        class SerializeA:\n            def __call__(self, value):\n                return \"value\"\n\n        serialize = SerializeA()\n\n        # only has a function field\n        class UserFunctionContextSchema(Schema):\n            is_collab = fields.Function(serialize)\n\n        owner = User(\"Joe\")\n        serializer = UserFunctionContextSchema()\n        # no context\n        serializer.context = None\n        data = serializer.dump(owner)\n        assert data[\"is_collab\"] == \"value\"\n", "tokens": ["tests", "test_schema", "py", "testcontext", "def", "test_function_field_handles_bound_serializer", "self", "class", "serializea", "def", "__call__", "self", "value", "return", "value", "serialize", "serializea", "only", "has", "a", "function", "field", "class", "userfunctioncontextschema", "schema", "is_collab", "fields", "function", "serialize", "owner", "user", "joe", "serializer", "userfunctioncontextschema", "no", "context", "serializer", "context", "none", "data", "serializer", "dump", "owner", "assert", "data", "is_collab", "value"], "doc_len": 47}
{"doc_id": "tests/test_schema.py::TestContext.test_fields_context", "file_path": "tests/test_schema.py", "class_name": "TestContext", "func_name": "test_fields_context", "text": "文件路径: tests/test_schema.py, 类名: TestContext\n    def test_fields_context(self):\n        class CSchema(Schema):\n            name = fields.String()\n\n        ser = CSchema()\n        ser.context[\"foo\"] = 42\n\n        assert ser.fields[\"name\"].context == {\"foo\": 42}\n", "tokens": ["tests", "test_schema", "py", "testcontext", "def", "test_fields_context", "self", "class", "cschema", "schema", "name", "fields", "string", "ser", "cschema", "ser", "context", "foo", "42", "assert", "ser", "fields", "name", "context", "foo", "42"], "doc_len": 26}
{"doc_id": "tests/test_schema.py::TestContext.test_nested_fields_inherit_context", "file_path": "tests/test_schema.py", "class_name": "TestContext", "func_name": "test_nested_fields_inherit_context", "text": "文件路径: tests/test_schema.py, 类名: TestContext\n    def test_nested_fields_inherit_context(self):\n        class InnerSchema(Schema):\n            likes_bikes = fields.Function(lambda obj, ctx: \"bikes\" in ctx[\"info\"])\n\n        class CSchema(Schema):\n            inner = fields.Nested(InnerSchema)\n\n        ser = CSchema()\n        ser.context[\"info\"] = \"i like bikes\"\n        obj = {\"inner\": {}}\n        result = ser.dump(obj)\n        assert result[\"inner\"][\"likes_bikes\"] is True\n", "tokens": ["tests", "test_schema", "py", "testcontext", "def", "test_nested_fields_inherit_context", "self", "class", "innerschema", "schema", "likes_bikes", "fields", "function", "lambda", "obj", "ctx", "bikes", "in", "ctx", "info", "class", "cschema", "schema", "inner", "fields", "nested", "innerschema", "ser", "cschema", "ser", "context", "info", "i", "like", "bikes", "obj", "inner", "result", "ser", "dump", "obj", "assert", "result", "inner", "likes_bikes", "is", "true"], "doc_len": 47}
{"doc_id": "tests/test_schema.py::TestContext.test_nested_list_fields_inherit_context", "file_path": "tests/test_schema.py", "class_name": "TestContext", "func_name": "test_nested_list_fields_inherit_context", "text": "文件路径: tests/test_schema.py, 类名: TestContext\n    def test_nested_list_fields_inherit_context(self):\n        class InnerSchema(Schema):\n            foo = fields.Field()\n\n            @validates(\"foo\")\n            def validate_foo(self, value):\n                if \"foo_context\" not in self.context:\n                    raise ValidationError(\"Missing context\")\n\n        class OuterSchema(Schema):\n            bars = fields.List(fields.Nested(InnerSchema()))\n\n        inner = InnerSchema()\n        inner.context[\"foo_context\"] = \"foo\"\n        assert inner.load({\"foo\": 42})\n\n        outer = OuterSchema()\n        outer.context[\"foo_context\"] = \"foo\"\n        assert outer.load({\"bars\": [{\"foo\": 42}]})\n", "tokens": ["tests", "test_schema", "py", "testcontext", "def", "test_nested_list_fields_inherit_context", "self", "class", "innerschema", "schema", "foo", "fields", "field", "validates", "foo", "def", "validate_foo", "self", "value", "if", "foo_context", "not", "in", "self", "context", "raise", "validationerror", "missing", "context", "class", "outerschema", "schema", "bars", "fields", "list", "fields", "nested", "innerschema", "inner", "innerschema", "inner", "context", "foo_context", "foo", "assert", "inner", "load", "foo", "42", "outer", "outerschema", "outer", "context", "foo_context", "foo", "assert", "outer", "load", "bars", "foo", "42"], "doc_len": 61}
{"doc_id": "tests/test_schema.py::TestContext.test_nested_dict_fields_inherit_context", "file_path": "tests/test_schema.py", "class_name": "TestContext", "func_name": "test_nested_dict_fields_inherit_context", "text": "文件路径: tests/test_schema.py, 类名: TestContext\n    def test_nested_dict_fields_inherit_context(self):\n        class InnerSchema(Schema):\n            foo = fields.Field()\n\n            @validates(\"foo\")\n            def validate_foo(self, value):\n                if \"foo_context\" not in self.context:\n                    raise ValidationError(\"Missing context\")\n\n        class OuterSchema(Schema):\n            bars = fields.Dict(values=fields.Nested(InnerSchema()))\n\n        inner = InnerSchema()\n        inner.context[\"foo_context\"] = \"foo\"\n        assert inner.load({\"foo\": 42})\n\n        outer = OuterSchema()\n        outer.context[\"foo_context\"] = \"foo\"\n        assert outer.load({\"bars\": {\"test\": {\"foo\": 42}}})\n", "tokens": ["tests", "test_schema", "py", "testcontext", "def", "test_nested_dict_fields_inherit_context", "self", "class", "innerschema", "schema", "foo", "fields", "field", "validates", "foo", "def", "validate_foo", "self", "value", "if", "foo_context", "not", "in", "self", "context", "raise", "validationerror", "missing", "context", "class", "outerschema", "schema", "bars", "fields", "dict", "values", "fields", "nested", "innerschema", "inner", "innerschema", "inner", "context", "foo_context", "foo", "assert", "inner", "load", "foo", "42", "outer", "outerschema", "outer", "context", "foo_context", "foo", "assert", "outer", "load", "bars", "test", "foo", "42"], "doc_len": 63}
{"doc_id": "tests/test_schema.py::test_serializer_can_specify_nested_object_as_attribute", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_serializer_can_specify_nested_object_as_attribute", "text": "文件路径: tests/test_schema.py\ndef test_serializer_can_specify_nested_object_as_attribute(blog):\n    class BlogUsernameSchema(Schema):\n        author_name = fields.String(attribute=\"user.name\")\n\n    ser = BlogUsernameSchema()\n    result = ser.dump(blog)\n    assert result[\"author_name\"] == blog.user.name\n", "tokens": ["tests", "test_schema", "py", "def", "test_serializer_can_specify_nested_object_as_attribute", "blog", "class", "blogusernameschema", "schema", "author_name", "fields", "string", "attribute", "user", "name", "ser", "blogusernameschema", "result", "ser", "dump", "blog", "assert", "result", "author_name", "blog", "user", "name"], "doc_len": 27}
{"doc_id": "tests/test_schema.py::TestFieldInheritance.test_inherit_fields_from_schema_subclass", "file_path": "tests/test_schema.py", "class_name": "TestFieldInheritance", "func_name": "test_inherit_fields_from_schema_subclass", "text": "文件路径: tests/test_schema.py, 类名: TestFieldInheritance\n    def test_inherit_fields_from_schema_subclass(self):\n        expected = OrderedDict(\n            [(\"field_a\", fields.Number()), (\"field_b\", fields.Number())]\n        )\n\n        class SerializerA(Schema):\n            field_a = expected[\"field_a\"]\n\n        class SerializerB(SerializerA):\n            field_b = expected[\"field_b\"]\n\n        assert SerializerB._declared_fields == expected\n", "tokens": ["tests", "test_schema", "py", "testfieldinheritance", "def", "test_inherit_fields_from_schema_subclass", "self", "expected", "ordereddict", "field_a", "fields", "number", "field_b", "fields", "number", "class", "serializera", "schema", "field_a", "expected", "field_a", "class", "serializerb", "serializera", "field_b", "expected", "field_b", "assert", "serializerb", "_declared_fields", "expected"], "doc_len": 31}
{"doc_id": "tests/test_schema.py::TestFieldInheritance.test_inherit_fields_from_non_schema_subclass", "file_path": "tests/test_schema.py", "class_name": "TestFieldInheritance", "func_name": "test_inherit_fields_from_non_schema_subclass", "text": "文件路径: tests/test_schema.py, 类名: TestFieldInheritance\n    def test_inherit_fields_from_non_schema_subclass(self):\n        expected = OrderedDict(\n            [(\"field_a\", fields.Number()), (\"field_b\", fields.Number())]\n        )\n\n        class PlainBaseClass:\n            field_a = expected[\"field_a\"]\n\n        class SerializerB1(Schema, PlainBaseClass):\n            field_b = expected[\"field_b\"]\n\n        class SerializerB2(PlainBaseClass, Schema):\n            field_b = expected[\"field_b\"]\n\n        assert SerializerB1._declared_fields == expected\n        assert SerializerB2._declared_fields == expected\n", "tokens": ["tests", "test_schema", "py", "testfieldinheritance", "def", "test_inherit_fields_from_non_schema_subclass", "self", "expected", "ordereddict", "field_a", "fields", "number", "field_b", "fields", "number", "class", "plainbaseclass", "field_a", "expected", "field_a", "class", "serializerb1", "schema", "plainbaseclass", "field_b", "expected", "field_b", "class", "serializerb2", "plainbaseclass", "schema", "field_b", "expected", "field_b", "assert", "serializerb1", "_declared_fields", "expected", "assert", "serializerb2", "_declared_fields", "expected"], "doc_len": 42}
{"doc_id": "tests/test_schema.py::TestFieldInheritance.test_inheritance_follows_mro", "file_path": "tests/test_schema.py", "class_name": "TestFieldInheritance", "func_name": "test_inheritance_follows_mro", "text": "文件路径: tests/test_schema.py, 类名: TestFieldInheritance\n    def test_inheritance_follows_mro(self):\n        expected = OrderedDict(\n            [\n                (\"field_a\", fields.String()),\n                (\"field_c\", fields.String()),\n                (\"field_b\", fields.String()),\n                (\"field_d\", fields.String()),\n            ]\n        )\n        # Diamond inheritance graph\n        # MRO: D -> B -> C -> A\n\n        class SerializerA(Schema):\n            field_a = expected[\"field_a\"]\n\n        class SerializerB(SerializerA):\n            field_b = expected[\"field_b\"]\n\n        class SerializerC(SerializerA):\n            field_c = expected[\"field_c\"]\n\n        class SerializerD(SerializerB, SerializerC):\n            field_d = expected[\"field_d\"]\n\n        assert SerializerD._declared_fields == expected\n", "tokens": ["tests", "test_schema", "py", "testfieldinheritance", "def", "test_inheritance_follows_mro", "self", "expected", "ordereddict", "field_a", "fields", "string", "field_c", "fields", "string", "field_b", "fields", "string", "field_d", "fields", "string", "diamond", "inheritance", "graph", "mro", "d", "b", "c", "a", "class", "serializera", "schema", "field_a", "expected", "field_a", "class", "serializerb", "serializera", "field_b", "expected", "field_b", "class", "serializerc", "serializera", "field_c", "expected", "field_c", "class", "serializerd", "serializerb", "serializerc", "field_d", "expected", "field_d", "assert", "serializerd", "_declared_fields", "expected"], "doc_len": 58}
{"doc_id": "tests/test_schema.py::get_from_dict", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "get_from_dict", "text": "文件路径: tests/test_schema.py\ndef get_from_dict(schema, obj, key, default=None):\n    return obj.get(\"_\" + key, default)\n", "tokens": ["tests", "test_schema", "py", "def", "get_from_dict", "schema", "obj", "key", "default", "none", "return", "obj", "get", "_", "key", "default"], "doc_len": 16}
{"doc_id": "tests/test_schema.py::TestGetAttribute.test_get_attribute_is_used", "file_path": "tests/test_schema.py", "class_name": "TestGetAttribute", "func_name": "test_get_attribute_is_used", "text": "文件路径: tests/test_schema.py, 类名: TestGetAttribute\n    def test_get_attribute_is_used(self):\n        class UserDictSchema(Schema):\n            name = fields.Str()\n            email = fields.Email()\n\n            def get_attribute(self, obj, attr, default):\n                return get_from_dict(self, obj, attr, default)\n\n        user_dict = {\"_name\": \"joe\", \"_email\": \"joe@shmoe.com\"}\n        schema = UserDictSchema()\n        result = schema.dump(user_dict)\n        assert result[\"name\"] == user_dict[\"_name\"]\n        assert result[\"email\"] == user_dict[\"_email\"]\n        # can't serialize User object\n        user = User(name=\"joe\", email=\"joe@shmoe.com\")\n        with pytest.raises(AttributeError):\n            schema.dump(user)\n", "tokens": ["tests", "test_schema", "py", "testgetattribute", "def", "test_get_attribute_is_used", "self", "class", "userdictschema", "schema", "name", "fields", "str", "email", "fields", "email", "def", "get_attribute", "self", "obj", "attr", "default", "return", "get_from_dict", "self", "obj", "attr", "default", "user_dict", "_name", "joe", "_email", "joe", "shmoe", "com", "schema", "userdictschema", "result", "schema", "dump", "user_dict", "assert", "result", "name", "user_dict", "_name", "assert", "result", "email", "user_dict", "_email", "can", "t", "serialize", "user", "object", "user", "user", "name", "joe", "email", "joe", "shmoe", "com", "with", "pytest", "raises", "attributeerror", "schema", "dump", "user"], "doc_len": 71}
{"doc_id": "tests/test_schema.py::TestGetAttribute.test_get_attribute_with_many", "file_path": "tests/test_schema.py", "class_name": "TestGetAttribute", "func_name": "test_get_attribute_with_many", "text": "文件路径: tests/test_schema.py, 类名: TestGetAttribute\n    def test_get_attribute_with_many(self):\n        class UserDictSchema(Schema):\n            name = fields.Str()\n            email = fields.Email()\n\n            def get_attribute(self, obj, attr, default):\n                return get_from_dict(self, obj, attr, default)\n\n        user_dicts = [\n            {\"_name\": \"joe\", \"_email\": \"joe@shmoe.com\"},\n            {\"_name\": \"jane\", \"_email\": \"jane@shmane.com\"},\n        ]\n        schema = UserDictSchema(many=True)\n        results = schema.dump(user_dicts)\n        for result, user_dict in zip(results, user_dicts):\n            assert result[\"name\"] == user_dict[\"_name\"]\n            assert result[\"email\"] == user_dict[\"_email\"]\n        # can't serialize User object\n        users = [\n            User(name=\"joe\", email=\"joe@shmoe.com\"),\n            User(name=\"jane\", email=\"jane@shmane.com\"),\n        ]\n        with pytest.raises(AttributeError):\n            schema.dump(users)\n", "tokens": ["tests", "test_schema", "py", "testgetattribute", "def", "test_get_attribute_with_many", "self", "class", "userdictschema", "schema", "name", "fields", "str", "email", "fields", "email", "def", "get_attribute", "self", "obj", "attr", "default", "return", "get_from_dict", "self", "obj", "attr", "default", "user_dicts", "_name", "joe", "_email", "joe", "shmoe", "com", "_name", "jane", "_email", "jane", "shmane", "com", "schema", "userdictschema", "many", "true", "results", "schema", "dump", "user_dicts", "for", "result", "user_dict", "in", "zip", "results", "user_dicts", "assert", "result", "name", "user_dict", "_name", "assert", "result", "email", "user_dict", "_email", "can", "t", "serialize", "user", "object", "users", "user", "name", "joe", "email", "joe", "shmoe", "com", "user", "name", "jane", "email", "jane", "shmane", "com", "with", "pytest", "raises", "attributeerror", "schema", "dump", "users"], "doc_len": 93}
{"doc_id": "tests/test_schema.py::TestRequiredFields.string_schema", "file_path": "tests/test_schema.py", "class_name": "TestRequiredFields", "func_name": "string_schema", "text": "文件路径: tests/test_schema.py, 类名: TestRequiredFields\n    def string_schema(self):\n        return self.StringSchema()\n", "tokens": ["tests", "test_schema", "py", "testrequiredfields", "def", "string_schema", "self", "return", "self", "stringschema"], "doc_len": 10}
{"doc_id": "tests/test_schema.py::TestRequiredFields.data", "file_path": "tests/test_schema.py", "class_name": "TestRequiredFields", "func_name": "data", "text": "文件路径: tests/test_schema.py, 类名: TestRequiredFields\n    def data(self):\n        return dict(\n            required_field=\"foo\",\n            allow_none_field=\"bar\",\n            allow_none_required_field=\"one\",\n        )\n", "tokens": ["tests", "test_schema", "py", "testrequiredfields", "def", "data", "self", "return", "dict", "required_field", "foo", "allow_none_field", "bar", "allow_none_required_field", "one"], "doc_len": 15}
{"doc_id": "tests/test_schema.py::TestRequiredFields.test_required_string_field_missing", "file_path": "tests/test_schema.py", "class_name": "TestRequiredFields", "func_name": "test_required_string_field_missing", "text": "文件路径: tests/test_schema.py, 类名: TestRequiredFields\n    def test_required_string_field_missing(self, string_schema, data):\n        del data[\"required_field\"]\n        errors = string_schema.validate(data)\n        assert errors[\"required_field\"] == [\"Missing data for required field.\"]\n", "tokens": ["tests", "test_schema", "py", "testrequiredfields", "def", "test_required_string_field_missing", "self", "string_schema", "data", "del", "data", "required_field", "errors", "string_schema", "validate", "data", "assert", "errors", "required_field", "missing", "data", "for", "required", "field"], "doc_len": 24}
{"doc_id": "tests/test_schema.py::TestRequiredFields.test_required_string_field_failure", "file_path": "tests/test_schema.py", "class_name": "TestRequiredFields", "func_name": "test_required_string_field_failure", "text": "文件路径: tests/test_schema.py, 类名: TestRequiredFields\n    def test_required_string_field_failure(self, string_schema, data):\n        data[\"required_field\"] = None\n        errors = string_schema.validate(data)\n        assert errors[\"required_field\"] == [\"Field may not be null.\"]\n", "tokens": ["tests", "test_schema", "py", "testrequiredfields", "def", "test_required_string_field_failure", "self", "string_schema", "data", "data", "required_field", "none", "errors", "string_schema", "validate", "data", "assert", "errors", "required_field", "field", "may", "not", "be", "null"], "doc_len": 24}
{"doc_id": "tests/test_schema.py::TestRequiredFields.test_allow_none_param", "file_path": "tests/test_schema.py", "class_name": "TestRequiredFields", "func_name": "test_allow_none_param", "text": "文件路径: tests/test_schema.py, 类名: TestRequiredFields\n    def test_allow_none_param(self, string_schema, data):\n        data[\"allow_none_field\"] = None\n        errors = string_schema.validate(data)\n        assert errors == {}\n\n        data[\"allow_none_required_field\"] = None\n        string_schema.validate(data)\n\n        del data[\"allow_none_required_field\"]\n        errors = string_schema.validate(data)\n        assert \"allow_none_required_field\" in errors\n", "tokens": ["tests", "test_schema", "py", "testrequiredfields", "def", "test_allow_none_param", "self", "string_schema", "data", "data", "allow_none_field", "none", "errors", "string_schema", "validate", "data", "assert", "errors", "data", "allow_none_required_field", "none", "string_schema", "validate", "data", "del", "data", "allow_none_required_field", "errors", "string_schema", "validate", "data", "assert", "allow_none_required_field", "in", "errors"], "doc_len": 35}
{"doc_id": "tests/test_schema.py::TestRequiredFields.test_allow_none_custom_message", "file_path": "tests/test_schema.py", "class_name": "TestRequiredFields", "func_name": "test_allow_none_custom_message", "text": "文件路径: tests/test_schema.py, 类名: TestRequiredFields\n    def test_allow_none_custom_message(self, data):\n        class MySchema(Schema):\n            allow_none_field = fields.Field(\n                allow_none=False, error_messages={\"null\": \"<custom>\"}\n            )\n\n        schema = MySchema()\n        errors = schema.validate({\"allow_none_field\": None})\n        assert errors[\"allow_none_field\"][0] == \"<custom>\"\n", "tokens": ["tests", "test_schema", "py", "testrequiredfields", "def", "test_allow_none_custom_message", "self", "data", "class", "myschema", "schema", "allow_none_field", "fields", "field", "allow_none", "false", "error_messages", "null", "custom", "schema", "myschema", "errors", "schema", "validate", "allow_none_field", "none", "assert", "errors", "allow_none_field", "0", "custom"], "doc_len": 31}
{"doc_id": "tests/test_schema.py::TestDefaults.schema", "file_path": "tests/test_schema.py", "class_name": "TestDefaults", "func_name": "schema", "text": "文件路径: tests/test_schema.py, 类名: TestDefaults\n    def schema(self):\n        return self.MySchema()\n", "tokens": ["tests", "test_schema", "py", "testdefaults", "def", "schema", "self", "return", "self", "myschema"], "doc_len": 10}
{"doc_id": "tests/test_schema.py::TestDefaults.data", "file_path": "tests/test_schema.py", "class_name": "TestDefaults", "func_name": "data", "text": "文件路径: tests/test_schema.py, 类名: TestDefaults\n    def data(self):\n        return dict(\n            int_no_default=None,\n            str_no_default=None,\n            list_no_default=None,\n            nested_no_default=None,\n            int_with_default=None,\n            str_with_default=None,\n        )\n", "tokens": ["tests", "test_schema", "py", "testdefaults", "def", "data", "self", "return", "dict", "int_no_default", "none", "str_no_default", "none", "list_no_default", "none", "nested_no_default", "none", "int_with_default", "none", "str_with_default", "none"], "doc_len": 21}
{"doc_id": "tests/test_schema.py::TestDefaults.test_missing_inputs_are_excluded_from_dump_output", "file_path": "tests/test_schema.py", "class_name": "TestDefaults", "func_name": "test_missing_inputs_are_excluded_from_dump_output", "text": "文件路径: tests/test_schema.py, 类名: TestDefaults\n    def test_missing_inputs_are_excluded_from_dump_output(self, schema, data):\n        for key in [\n            \"int_no_default\",\n            \"str_no_default\",\n            \"list_no_default\",\n            \"nested_no_default\",\n        ]:\n            d = data.copy()\n            del d[key]\n            result = schema.dump(d)\n            # the missing key is not in the serialized result\n            assert key not in result\n            # the rest of the keys are in the result\n            assert all(k in result for k in d.keys())\n", "tokens": ["tests", "test_schema", "py", "testdefaults", "def", "test_missing_inputs_are_excluded_from_dump_output", "self", "schema", "data", "for", "key", "in", "int_no_default", "str_no_default", "list_no_default", "nested_no_default", "d", "data", "copy", "del", "d", "key", "result", "schema", "dump", "d", "the", "missing", "key", "is", "not", "in", "the", "serialized", "result", "assert", "key", "not", "in", "result", "the", "rest", "of", "the", "keys", "are", "in", "the", "result", "assert", "all", "k", "in", "result", "for", "k", "in", "d", "keys"], "doc_len": 59}
{"doc_id": "tests/test_schema.py::TestDefaults.test_none_is_serialized_to_none", "file_path": "tests/test_schema.py", "class_name": "TestDefaults", "func_name": "test_none_is_serialized_to_none", "text": "文件路径: tests/test_schema.py, 类名: TestDefaults\n    def test_none_is_serialized_to_none(self, schema, data):\n        errors = schema.validate(data)\n        assert errors == {}\n        result = schema.dump(data)\n        for key in data.keys():\n            msg = \"result[{!r}] should be None\".format(key)\n            assert result[key] is None, msg\n", "tokens": ["tests", "test_schema", "py", "testdefaults", "def", "test_none_is_serialized_to_none", "self", "schema", "data", "errors", "schema", "validate", "data", "assert", "errors", "result", "schema", "dump", "data", "for", "key", "in", "data", "keys", "msg", "result", "r", "should", "be", "none", "format", "key", "assert", "result", "key", "is", "none", "msg"], "doc_len": 38}
{"doc_id": "tests/test_schema.py::TestDefaults.test_default_and_value_missing", "file_path": "tests/test_schema.py", "class_name": "TestDefaults", "func_name": "test_default_and_value_missing", "text": "文件路径: tests/test_schema.py, 类名: TestDefaults\n    def test_default_and_value_missing(self, schema, data):\n        del data[\"int_with_default\"]\n        del data[\"str_with_default\"]\n        result = schema.dump(data)\n        assert result[\"int_with_default\"] == 42\n        assert result[\"str_with_default\"] == \"foo\"\n", "tokens": ["tests", "test_schema", "py", "testdefaults", "def", "test_default_and_value_missing", "self", "schema", "data", "del", "data", "int_with_default", "del", "data", "str_with_default", "result", "schema", "dump", "data", "assert", "result", "int_with_default", "42", "assert", "result", "str_with_default", "foo"], "doc_len": 27}
{"doc_id": "tests/test_schema.py::TestDefaults.test_loading_none", "file_path": "tests/test_schema.py", "class_name": "TestDefaults", "func_name": "test_loading_none", "text": "文件路径: tests/test_schema.py, 类名: TestDefaults\n    def test_loading_none(self, schema, data):\n        result = schema.load(data)\n        for key in data.keys():\n            result[key] is None\n", "tokens": ["tests", "test_schema", "py", "testdefaults", "def", "test_loading_none", "self", "schema", "data", "result", "schema", "load", "data", "for", "key", "in", "data", "keys", "result", "key", "is", "none"], "doc_len": 22}
{"doc_id": "tests/test_schema.py::TestDefaults.test_missing_inputs_are_excluded_from_load_output", "file_path": "tests/test_schema.py", "class_name": "TestDefaults", "func_name": "test_missing_inputs_are_excluded_from_load_output", "text": "文件路径: tests/test_schema.py, 类名: TestDefaults\n    def test_missing_inputs_are_excluded_from_load_output(self, schema, data):\n        for key in [\n            \"int_no_default\",\n            \"str_no_default\",\n            \"list_no_default\",\n            \"nested_no_default\",\n        ]:\n            d = data.copy()\n            del d[key]\n            result = schema.load(d)\n            # the missing key is not in the deserialized result\n            assert key not in result\n            # the rest of the keys are in the result\n            assert all(k in result for k in d.keys())\n", "tokens": ["tests", "test_schema", "py", "testdefaults", "def", "test_missing_inputs_are_excluded_from_load_output", "self", "schema", "data", "for", "key", "in", "int_no_default", "str_no_default", "list_no_default", "nested_no_default", "d", "data", "copy", "del", "d", "key", "result", "schema", "load", "d", "the", "missing", "key", "is", "not", "in", "the", "deserialized", "result", "assert", "key", "not", "in", "result", "the", "rest", "of", "the", "keys", "are", "in", "the", "result", "assert", "all", "k", "in", "result", "for", "k", "in", "d", "keys"], "doc_len": 59}
{"doc_id": "tests/test_schema.py::TestLoadOnly.schema", "file_path": "tests/test_schema.py", "class_name": "TestLoadOnly", "func_name": "schema", "text": "文件路径: tests/test_schema.py, 类名: TestLoadOnly\n    def schema(self):\n        return self.MySchema()\n", "tokens": ["tests", "test_schema", "py", "testloadonly", "def", "schema", "self", "return", "self", "myschema"], "doc_len": 10}
{"doc_id": "tests/test_schema.py::TestLoadOnly.data", "file_path": "tests/test_schema.py", "class_name": "TestLoadOnly", "func_name": "data", "text": "文件路径: tests/test_schema.py, 类名: TestLoadOnly\n    def data(self):\n        return dict(\n            str_dump_only=\"Dump Only\",\n            str_load_only=\"Load Only\",\n            str_regular=\"Regular String\",\n        )\n", "tokens": ["tests", "test_schema", "py", "testloadonly", "def", "data", "self", "return", "dict", "str_dump_only", "dump", "only", "str_load_only", "load", "only", "str_regular", "regular", "string"], "doc_len": 18}
{"doc_id": "tests/test_schema.py::TestLoadOnly.test_load_only", "file_path": "tests/test_schema.py", "class_name": "TestLoadOnly", "func_name": "test_load_only", "text": "文件路径: tests/test_schema.py, 类名: TestLoadOnly\n    def test_load_only(self, schema, data):\n        result = schema.dump(data)\n        assert \"str_load_only\" not in result\n        assert \"str_dump_only\" in result\n        assert \"str_regular\" in result\n", "tokens": ["tests", "test_schema", "py", "testloadonly", "def", "test_load_only", "self", "schema", "data", "result", "schema", "dump", "data", "assert", "str_load_only", "not", "in", "result", "assert", "str_dump_only", "in", "result", "assert", "str_regular", "in", "result"], "doc_len": 26}
{"doc_id": "tests/test_schema.py::TestLoadOnly.test_dump_only", "file_path": "tests/test_schema.py", "class_name": "TestLoadOnly", "func_name": "test_dump_only", "text": "文件路径: tests/test_schema.py, 类名: TestLoadOnly\n    def test_dump_only(self, schema, data):\n        result = schema.load(data, unknown=EXCLUDE)\n        assert \"str_dump_only\" not in result\n        assert \"str_load_only\" in result\n        assert \"str_regular\" in result\n", "tokens": ["tests", "test_schema", "py", "testloadonly", "def", "test_dump_only", "self", "schema", "data", "result", "schema", "load", "data", "unknown", "exclude", "assert", "str_dump_only", "not", "in", "result", "assert", "str_load_only", "in", "result", "assert", "str_regular", "in", "result"], "doc_len": 28}
{"doc_id": "tests/test_schema.py::TestLoadOnly.test_url_field_requre_tld_false", "file_path": "tests/test_schema.py", "class_name": "TestLoadOnly", "func_name": "test_url_field_requre_tld_false", "text": "文件路径: tests/test_schema.py, 类名: TestLoadOnly\n    def test_url_field_requre_tld_false(self):\n        class NoTldTestSchema(Schema):\n            url = fields.Url(require_tld=False, schemes=[\"marshmallow\"])\n\n        schema = NoTldTestSchema()\n        data_with_no_top_level_domain = {\"url\": \"marshmallow://app/discounts\"}\n        result = schema.load(data_with_no_top_level_domain)\n        assert result == data_with_no_top_level_domain\n", "tokens": ["tests", "test_schema", "py", "testloadonly", "def", "test_url_field_requre_tld_false", "self", "class", "notldtestschema", "schema", "url", "fields", "url", "require_tld", "false", "schemes", "marshmallow", "schema", "notldtestschema", "data_with_no_top_level_domain", "url", "marshmallow", "app", "discounts", "result", "schema", "load", "data_with_no_top_level_domain", "assert", "result", "data_with_no_top_level_domain"], "doc_len": 31}
{"doc_id": "tests/test_schema.py::TestFromDict.test_generates_schema", "file_path": "tests/test_schema.py", "class_name": "TestFromDict", "func_name": "test_generates_schema", "text": "文件路径: tests/test_schema.py, 类名: TestFromDict\n    def test_generates_schema(self):\n        MySchema = Schema.from_dict({\"foo\": fields.Str()})\n        assert issubclass(MySchema, Schema)\n", "tokens": ["tests", "test_schema", "py", "testfromdict", "def", "test_generates_schema", "self", "myschema", "schema", "from_dict", "foo", "fields", "str", "assert", "issubclass", "myschema", "schema"], "doc_len": 17}
{"doc_id": "tests/test_schema.py::TestFromDict.test_name", "file_path": "tests/test_schema.py", "class_name": "TestFromDict", "func_name": "test_name", "text": "文件路径: tests/test_schema.py, 类名: TestFromDict\n    def test_name(self):\n        MySchema = Schema.from_dict({\"foo\": fields.Str()})\n        assert \"GeneratedSchema\" in repr(MySchema)\n        SchemaWithName = Schema.from_dict(\n            {\"foo\": fields.Int()}, name=\"MyGeneratedSchema\"\n        )\n        assert \"MyGeneratedSchema\" in repr(SchemaWithName)\n", "tokens": ["tests", "test_schema", "py", "testfromdict", "def", "test_name", "self", "myschema", "schema", "from_dict", "foo", "fields", "str", "assert", "generatedschema", "in", "repr", "myschema", "schemawithname", "schema", "from_dict", "foo", "fields", "int", "name", "mygeneratedschema", "assert", "mygeneratedschema", "in", "repr", "schemawithname"], "doc_len": 31}
{"doc_id": "tests/test_schema.py::TestFromDict.test_generated_schemas_are_not_registered", "file_path": "tests/test_schema.py", "class_name": "TestFromDict", "func_name": "test_generated_schemas_are_not_registered", "text": "文件路径: tests/test_schema.py, 类名: TestFromDict\n    def test_generated_schemas_are_not_registered(self):\n        n_registry_entries = len(class_registry._registry)\n        Schema.from_dict({\"foo\": fields.Str()})\n        Schema.from_dict({\"bar\": fields.Str()}, name=\"MyGeneratedSchema\")\n        assert len(class_registry._registry) == n_registry_entries\n        with pytest.raises(RegistryError):\n            class_registry.get_class(\"GeneratedSchema\")\n        with pytest.raises(RegistryError):\n            class_registry.get_class(\"MyGeneratedSchema\")\n", "tokens": ["tests", "test_schema", "py", "testfromdict", "def", "test_generated_schemas_are_not_registered", "self", "n_registry_entries", "len", "class_registry", "_registry", "schema", "from_dict", "foo", "fields", "str", "schema", "from_dict", "bar", "fields", "str", "name", "mygeneratedschema", "assert", "len", "class_registry", "_registry", "n_registry_entries", "with", "pytest", "raises", "registryerror", "class_registry", "get_class", "generatedschema", "with", "pytest", "raises", "registryerror", "class_registry", "get_class", "mygeneratedschema"], "doc_len": 42}
{"doc_id": "tests/test_schema.py::TestFromDict.test_meta_options_are_applied", "file_path": "tests/test_schema.py", "class_name": "TestFromDict", "func_name": "test_meta_options_are_applied", "text": "文件路径: tests/test_schema.py, 类名: TestFromDict\n    def test_meta_options_are_applied(self):\n        class OrderedSchema(Schema):\n            class Meta:\n                ordered = True\n                load_only = (\"bar\",)\n\n        OSchema = OrderedSchema.from_dict({\"foo\": fields.Int(), \"bar\": fields.Int()})\n        dumped = OSchema().dump({\"foo\": 42, \"bar\": 24})\n        assert isinstance(dumped, OrderedDict)\n        assert \"bar\" not in dumped\n", "tokens": ["tests", "test_schema", "py", "testfromdict", "def", "test_meta_options_are_applied", "self", "class", "orderedschema", "schema", "class", "meta", "ordered", "true", "load_only", "bar", "oschema", "orderedschema", "from_dict", "foo", "fields", "int", "bar", "fields", "int", "dumped", "oschema", "dump", "foo", "42", "bar", "24", "assert", "isinstance", "dumped", "ordereddict", "assert", "bar", "not", "in", "dumped"], "doc_len": 41}
{"doc_id": "tests/test_serialization.py::DateTimeList.__init__", "file_path": "tests/test_serialization.py", "class_name": "DateTimeList", "func_name": "__init__", "text": "文件路径: tests/test_serialization.py, 类名: DateTimeList\n    def __init__(self, dtimes):\n        self.dtimes = dtimes\n", "tokens": ["tests", "test_serialization", "py", "datetimelist", "def", "__init__", "self", "dtimes", "self", "dtimes", "dtimes"], "doc_len": 11}
{"doc_id": "tests/test_serialization.py::IntegerList.__init__", "file_path": "tests/test_serialization.py", "class_name": "IntegerList", "func_name": "__init__", "text": "文件路径: tests/test_serialization.py, 类名: IntegerList\n    def __init__(self, ints):\n        self.ints = ints\n", "tokens": ["tests", "test_serialization", "py", "integerlist", "def", "__init__", "self", "ints", "self", "ints", "ints"], "doc_len": 11}
{"doc_id": "tests/test_serialization.py::DateTimeIntegerTuple.__init__", "file_path": "tests/test_serialization.py", "class_name": "DateTimeIntegerTuple", "func_name": "__init__", "text": "文件路径: tests/test_serialization.py, 类名: DateTimeIntegerTuple\n    def __init__(self, dtime_int):\n        self.dtime_int = dtime_int\n", "tokens": ["tests", "test_serialization", "py", "datetimeintegertuple", "def", "__init__", "self", "dtime_int", "self", "dtime_int", "dtime_int"], "doc_len": 11}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.user", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "user", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def user(self):\n        return User(\"Foo\", email=\"foo@bar.com\", age=42)\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "user", "self", "return", "user", "foo", "email", "foo", "bar", "com", "age", "42"], "doc_len": 16}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_number", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_number", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_number(self, value, expected, user):\n        field = fields.Number()\n        user.age = value\n        assert field.serialize(\"age\", user) == expected\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_number", "self", "value", "expected", "user", "field", "fields", "number", "user", "age", "value", "assert", "field", "serialize", "age", "user", "expected"], "doc_len": 22}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_number_as_string", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_number_as_string", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_number_as_string(self, user):\n        user.age = 42\n        field = fields.Number(as_string=True)\n        assert field.serialize(\"age\", user) == str(float(user.age))\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_number_as_string", "self", "user", "user", "age", "42", "field", "fields", "number", "as_string", "true", "assert", "field", "serialize", "age", "user", "str", "float", "user", "age"], "doc_len": 25}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_number_as_string_passed_none", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_number_as_string_passed_none", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_number_as_string_passed_none(self, user):\n        user.age = None\n        field = fields.Number(as_string=True, allow_none=True)\n        assert field.serialize(\"age\", user) is None\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_number_as_string_passed_none", "self", "user", "user", "age", "none", "field", "fields", "number", "as_string", "true", "allow_none", "true", "assert", "field", "serialize", "age", "user", "is", "none"], "doc_len": 25}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_function_field_passed_func", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_function_field_passed_func", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_function_field_passed_func(self, user):\n        field = fields.Function(lambda obj: obj.name.upper())\n        assert \"FOO\" == field.serialize(\"key\", user)\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_function_field_passed_func", "self", "user", "field", "fields", "function", "lambda", "obj", "obj", "name", "upper", "assert", "foo", "field", "serialize", "key", "user"], "doc_len": 22}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_function_field_passed_serialize_only_is_dump_only", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_function_field_passed_serialize_only_is_dump_only", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_function_field_passed_serialize_only_is_dump_only(self, user):\n        field = fields.Function(serialize=lambda obj: obj.name.upper())\n        assert field.dump_only is True\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_function_field_passed_serialize_only_is_dump_only", "self", "user", "field", "fields", "function", "serialize", "lambda", "obj", "obj", "name", "upper", "assert", "field", "dump_only", "is", "true"], "doc_len": 22}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_function_field_passed_deserialize_and_serialize_is_not_dump_only", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_function_field_passed_deserialize_and_serialize_is_not_dump_only", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_function_field_passed_deserialize_and_serialize_is_not_dump_only(self):\n        field = fields.Function(\n            serialize=lambda val: val.lower(), deserialize=lambda val: val.upper()\n        )\n        assert field.dump_only is False\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_function_field_passed_deserialize_and_serialize_is_not_dump_only", "self", "field", "fields", "function", "serialize", "lambda", "val", "val", "lower", "deserialize", "lambda", "val", "val", "upper", "assert", "field", "dump_only", "is", "false"], "doc_len": 25}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_function_field_passed_serialize", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_function_field_passed_serialize", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_function_field_passed_serialize(self, user):\n        field = fields.Function(serialize=lambda obj: obj.name.upper())\n        assert \"FOO\" == field.serialize(\"key\", user)\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_function_field_passed_serialize", "self", "user", "field", "fields", "function", "serialize", "lambda", "obj", "obj", "name", "upper", "assert", "foo", "field", "serialize", "key", "user"], "doc_len": 23}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_function_field_does_not_swallow_attribute_error", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_function_field_does_not_swallow_attribute_error", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_function_field_does_not_swallow_attribute_error(self, user):\n        def raise_error(obj):\n            raise AttributeError()\n\n        field = fields.Function(serialize=raise_error)\n        with pytest.raises(AttributeError):\n            field.serialize(\"key\", user)\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_function_field_does_not_swallow_attribute_error", "self", "user", "def", "raise_error", "obj", "raise", "attributeerror", "field", "fields", "function", "serialize", "raise_error", "with", "pytest", "raises", "attributeerror", "field", "serialize", "key", "user"], "doc_len": 26}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_function_field_load_only", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_function_field_load_only", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_function_field_load_only(self):\n        field = fields.Function(deserialize=lambda obj: None)\n        assert field.load_only\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_function_field_load_only", "self", "field", "fields", "function", "deserialize", "lambda", "obj", "none", "assert", "field", "load_only"], "doc_len": 17}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_function_field_passed_serialize_with_context", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_function_field_passed_serialize_with_context", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_function_field_passed_serialize_with_context(self, user, monkeypatch):\n        class Parent(Schema):\n            pass\n\n        field = fields.Function(\n            serialize=lambda obj, context: obj.name.upper() + context[\"key\"]\n        )\n        field.parent = Parent(context={\"key\": \"BAR\"})\n        assert \"FOOBAR\" == field.serialize(\"key\", user)\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_function_field_passed_serialize_with_context", "self", "user", "monkeypatch", "class", "parent", "schema", "pass", "field", "fields", "function", "serialize", "lambda", "obj", "context", "obj", "name", "upper", "context", "key", "field", "parent", "parent", "context", "key", "bar", "assert", "foobar", "field", "serialize", "key", "user"], "doc_len": 37}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_function_field_passed_uncallable_object", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_function_field_passed_uncallable_object", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_function_field_passed_uncallable_object(self):\n        with pytest.raises(ValueError):\n            fields.Function(\"uncallable\")\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_function_field_passed_uncallable_object", "self", "with", "pytest", "raises", "valueerror", "fields", "function", "uncallable"], "doc_len": 14}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_integer_field", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_integer_field", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_integer_field(self, user):\n        field = fields.Integer()\n        assert field.serialize(\"age\", user) == 42\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_integer_field", "self", "user", "field", "fields", "integer", "assert", "field", "serialize", "age", "user", "42"], "doc_len": 17}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_integer_as_string_field", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_integer_as_string_field", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_integer_as_string_field(self, user):\n        field = fields.Integer(as_string=True)\n        assert field.serialize(\"age\", user) == \"42\"\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_integer_as_string_field", "self", "user", "field", "fields", "integer", "as_string", "true", "assert", "field", "serialize", "age", "user", "42"], "doc_len": 19}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_integer_field_default", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_integer_field_default", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_integer_field_default(self, user):\n        user.age = None\n        field = fields.Integer(default=0)\n        assert field.serialize(\"age\", user) is None\n        # missing\n        assert field.serialize(\"age\", {}) == 0\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_integer_field_default", "self", "user", "user", "age", "none", "field", "fields", "integer", "default", "0", "assert", "field", "serialize", "age", "user", "is", "none", "missing", "assert", "field", "serialize", "age", "0"], "doc_len": 29}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_integer_field_default_set_to_none", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_integer_field_default_set_to_none", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_integer_field_default_set_to_none(self, user):\n        user.age = None\n        field = fields.Integer(default=None)\n        assert field.serialize(\"age\", user) is None\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_integer_field_default_set_to_none", "self", "user", "user", "age", "none", "field", "fields", "integer", "default", "none", "assert", "field", "serialize", "age", "user", "is", "none"], "doc_len": 23}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_uuid_field", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_uuid_field", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_uuid_field(self, user):\n        user.uuid1 = uuid.UUID(\"12345678123456781234567812345678\")\n        user.uuid2 = None\n\n        field = fields.UUID()\n        assert isinstance(field.serialize(\"uuid1\", user), str)\n        assert field.serialize(\"uuid1\", user) == \"12345678-1234-5678-1234-567812345678\"\n        assert field.serialize(\"uuid2\", user) is None\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_uuid_field", "self", "user", "user", "uuid1", "uuid", "uuid", "12345678123456781234567812345678", "user", "uuid2", "none", "field", "fields", "uuid", "assert", "isinstance", "field", "serialize", "uuid1", "user", "str", "assert", "field", "serialize", "uuid1", "user", "12345678", "1234", "5678", "1234", "567812345678", "assert", "field", "serialize", "uuid2", "user", "is", "none"], "doc_len": 43}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_decimal_field", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_decimal_field", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_decimal_field(self, user):\n        user.m1 = 12\n        user.m2 = \"12.355\"\n        user.m3 = decimal.Decimal(1)\n        user.m4 = None\n\n        field = fields.Decimal()\n        assert isinstance(field.serialize(\"m1\", user), decimal.Decimal)\n        assert field.serialize(\"m1\", user) == decimal.Decimal(12)\n        assert isinstance(field.serialize(\"m2\", user), decimal.Decimal)\n        assert field.serialize(\"m2\", user) == decimal.Decimal(\"12.355\")\n        assert isinstance(field.serialize(\"m3\", user), decimal.Decimal)\n        assert field.serialize(\"m3\", user) == decimal.Decimal(1)\n        assert field.serialize(\"m4\", user) is None\n\n        field = fields.Decimal(1)\n        assert isinstance(field.serialize(\"m1\", user), decimal.Decimal)\n        assert field.serialize(\"m1\", user) == decimal.Decimal(12)\n        assert isinstance(field.serialize(\"m2\", user), decimal.Decimal)\n        assert field.serialize(\"m2\", user) == decimal.Decimal(\"12.4\")\n        assert isinstance(field.serialize(\"m3\", user), decimal.Decimal)\n        assert field.serialize(\"m3\", user) == decimal.Decimal(1)\n        assert field.serialize(\"m4\", user) is None\n\n        field = fields.Decimal(1, decimal.ROUND_DOWN)\n        assert isinstance(field.serialize(\"m1\", user), decimal.Decimal)\n        assert field.serialize(\"m1\", user) == decimal.Decimal(12)\n        assert isinstance(field.serialize(\"m2\", user), decimal.Decimal)\n        assert field.serialize(\"m2\", user) == decimal.Decimal(\"12.3\")\n        assert isinstance(field.serialize(\"m3\", user), decimal.Decimal)\n        assert field.serialize(\"m3\", user) == decimal.Decimal(1)\n        assert field.serialize(\"m4\", user) is None\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_decimal_field", "self", "user", "user", "m1", "12", "user", "m2", "12", "355", "user", "m3", "decimal", "decimal", "1", "user", "m4", "none", "field", "fields", "decimal", "assert", "isinstance", "field", "serialize", "m1", "user", "decimal", "decimal", "assert", "field", "serialize", "m1", "user", "decimal", "decimal", "12", "assert", "isinstance", "field", "serialize", "m2", "user", "decimal", "decimal", "assert", "field", "serialize", "m2", "user", "decimal", "decimal", "12", "355", "assert", "isinstance", "field", "serialize", "m3", "user", "decimal", "decimal", "assert", "field", "serialize", "m3", "user", "decimal", "decimal", "1", "assert", "field", "serialize", "m4", "user", "is", "none", "field", "fields", "decimal", "1", "assert", "isinstance", "field", "serialize", "m1", "user", "decimal", "decimal", "assert", "field", "serialize", "m1", "user", "decimal", "decimal", "12", "assert", "isinstance", "field", "serialize", "m2", "user", "decimal", "decimal", "assert", "field", "serialize", "m2", "user", "decimal", "decimal", "12", "4", "assert", "isinstance", "field", "serialize", "m3", "user", "decimal", "decimal", "assert", "field", "serialize", "m3", "user", "decimal", "decimal", "1", "assert", "field", "serialize", "m4", "user", "is", "none", "field", "fields", "decimal", "1", "decimal", "round_down", "assert", "isinstance", "field", "serialize", "m1", "user", "decimal", "decimal", "assert", "field", "serialize", "m1", "user", "decimal", "decimal", "12", "assert", "isinstance", "field", "serialize", "m2", "user", "decimal", "decimal", "assert", "field", "serialize", "m2", "user", "decimal", "decimal", "12", "3", "assert", "isinstance", "field", "serialize", "m3", "user", "decimal", "decimal", "assert", "field", "serialize", "m3", "user", "decimal", "decimal", "1", "assert", "field", "serialize", "m4", "user", "is", "none"], "doc_len": 204}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_decimal_field_string", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_decimal_field_string", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_decimal_field_string(self, user):\n        user.m1 = 12\n        user.m2 = \"12.355\"\n        user.m3 = decimal.Decimal(1)\n        user.m4 = None\n\n        field = fields.Decimal(as_string=True)\n        assert isinstance(field.serialize(\"m1\", user), str)\n        assert field.serialize(\"m1\", user) == \"12\"\n        assert isinstance(field.serialize(\"m2\", user), str)\n        assert field.serialize(\"m2\", user) == \"12.355\"\n        assert isinstance(field.serialize(\"m3\", user), str)\n        assert field.serialize(\"m3\", user) == \"1\"\n        assert field.serialize(\"m4\", user) is None\n\n        field = fields.Decimal(1, as_string=True)\n        assert isinstance(field.serialize(\"m1\", user), str)\n        assert field.serialize(\"m1\", user) == \"12.0\"\n        assert isinstance(field.serialize(\"m2\", user), str)\n        assert field.serialize(\"m2\", user) == \"12.4\"\n        assert isinstance(field.serialize(\"m3\", user), str)\n        assert field.serialize(\"m3\", user) == \"1.0\"\n        assert field.serialize(\"m4\", user) is None\n\n        field = fields.Decimal(1, decimal.ROUND_DOWN, as_string=True)\n        assert isinstance(field.serialize(\"m1\", user), str)\n        assert field.serialize(\"m1\", user) == \"12.0\"\n        assert isinstance(field.serialize(\"m2\", user), str)\n        assert field.serialize(\"m2\", user) == \"12.3\"\n        assert isinstance(field.serialize(\"m3\", user), str)\n        assert field.serialize(\"m3\", user) == \"1.0\"\n        assert field.serialize(\"m4\", user) is None\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_decimal_field_string", "self", "user", "user", "m1", "12", "user", "m2", "12", "355", "user", "m3", "decimal", "decimal", "1", "user", "m4", "none", "field", "fields", "decimal", "as_string", "true", "assert", "isinstance", "field", "serialize", "m1", "user", "str", "assert", "field", "serialize", "m1", "user", "12", "assert", "isinstance", "field", "serialize", "m2", "user", "str", "assert", "field", "serialize", "m2", "user", "12", "355", "assert", "isinstance", "field", "serialize", "m3", "user", "str", "assert", "field", "serialize", "m3", "user", "1", "assert", "field", "serialize", "m4", "user", "is", "none", "field", "fields", "decimal", "1", "as_string", "true", "assert", "isinstance", "field", "serialize", "m1", "user", "str", "assert", "field", "serialize", "m1", "user", "12", "0", "assert", "isinstance", "field", "serialize", "m2", "user", "str", "assert", "field", "serialize", "m2", "user", "12", "4", "assert", "isinstance", "field", "serialize", "m3", "user", "str", "assert", "field", "serialize", "m3", "user", "1", "0", "assert", "field", "serialize", "m4", "user", "is", "none", "field", "fields", "decimal", "1", "decimal", "round_down", "as_string", "true", "assert", "isinstance", "field", "serialize", "m1", "user", "str", "assert", "field", "serialize", "m1", "user", "12", "0", "assert", "isinstance", "field", "serialize", "m2", "user", "str", "assert", "field", "serialize", "m2", "user", "12", "3", "assert", "isinstance", "field", "serialize", "m3", "user", "str", "assert", "field", "serialize", "m3", "user", "1", "0", "assert", "field", "serialize", "m4", "user", "is", "none"], "doc_len": 187}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_decimal_field_special_values", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_decimal_field_special_values", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_decimal_field_special_values(self, user):\n        user.m1 = \"-NaN\"\n        user.m2 = \"NaN\"\n        user.m3 = \"-sNaN\"\n        user.m4 = \"sNaN\"\n        user.m5 = \"-Infinity\"\n        user.m6 = \"Infinity\"\n        user.m7 = \"-0\"\n\n        field = fields.Decimal(places=2, allow_nan=True)\n\n        m1s = field.serialize(\"m1\", user)\n        assert isinstance(m1s, decimal.Decimal)\n        assert m1s.is_qnan() and not m1s.is_signed()\n\n        m2s = field.serialize(\"m2\", user)\n        assert isinstance(m2s, decimal.Decimal)\n        assert m2s.is_qnan() and not m2s.is_signed()\n\n        m3s = field.serialize(\"m3\", user)\n        assert isinstance(m3s, decimal.Decimal)\n        assert m3s.is_qnan() and not m3s.is_signed()\n\n        m4s = field.serialize(\"m4\", user)\n        assert isinstance(m4s, decimal.Decimal)\n        assert m4s.is_qnan() and not m4s.is_signed()\n\n        m5s = field.serialize(\"m5\", user)\n        assert isinstance(m5s, decimal.Decimal)\n        assert m5s.is_infinite() and m5s.is_signed()\n\n        m6s = field.serialize(\"m6\", user)\n        assert isinstance(m6s, decimal.Decimal)\n        assert m6s.is_infinite() and not m6s.is_signed()\n\n        m7s = field.serialize(\"m7\", user)\n        assert isinstance(m7s, decimal.Decimal)\n        assert m7s.is_zero() and m7s.is_signed()\n\n        field = fields.Decimal(as_string=True, allow_nan=True)\n\n        m2s = field.serialize(\"m2\", user)\n        assert isinstance(m2s, str)\n        assert m2s == user.m2\n\n        m5s = field.serialize(\"m5\", user)\n        assert isinstance(m5s, str)\n        assert m5s == user.m5\n\n        m6s = field.serialize(\"m6\", user)\n        assert isinstance(m6s, str)\n        assert m6s == user.m6\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_decimal_field_special_values", "self", "user", "user", "m1", "nan", "user", "m2", "nan", "user", "m3", "snan", "user", "m4", "snan", "user", "m5", "infinity", "user", "m6", "infinity", "user", "m7", "0", "field", "fields", "decimal", "places", "2", "allow_nan", "true", "m1s", "field", "serialize", "m1", "user", "assert", "isinstance", "m1s", "decimal", "decimal", "assert", "m1s", "is_qnan", "and", "not", "m1s", "is_signed", "m2s", "field", "serialize", "m2", "user", "assert", "isinstance", "m2s", "decimal", "decimal", "assert", "m2s", "is_qnan", "and", "not", "m2s", "is_signed", "m3s", "field", "serialize", "m3", "user", "assert", "isinstance", "m3s", "decimal", "decimal", "assert", "m3s", "is_qnan", "and", "not", "m3s", "is_signed", "m4s", "field", "serialize", "m4", "user", "assert", "isinstance", "m4s", "decimal", "decimal", "assert", "m4s", "is_qnan", "and", "not", "m4s", "is_signed", "m5s", "field", "serialize", "m5", "user", "assert", "isinstance", "m5s", "decimal", "decimal", "assert", "m5s", "is_infinite", "and", "m5s", "is_signed", "m6s", "field", "serialize", "m6", "user", "assert", "isinstance", "m6s", "decimal", "decimal", "assert", "m6s", "is_infinite", "and", "not", "m6s", "is_signed", "m7s", "field", "serialize", "m7", "user", "assert", "isinstance", "m7s", "decimal", "decimal", "assert", "m7s", "is_zero", "and", "m7s", "is_signed", "field", "fields", "decimal", "as_string", "true", "allow_nan", "true", "m2s", "field", "serialize", "m2", "user", "assert", "isinstance", "m2s", "str", "assert", "m2s", "user", "m2", "m5s", "field", "serialize", "m5", "user", "assert", "isinstance", "m5s", "str", "assert", "m5s", "user", "m5", "m6s", "field", "serialize", "m6", "user", "assert", "isinstance", "m6s", "str", "assert", "m6s", "user", "m6"], "doc_len": 199}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_decimal_field_special_values_not_permitted", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_decimal_field_special_values_not_permitted", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_decimal_field_special_values_not_permitted(self, user):\n        user.m7 = \"-0\"\n\n        field = fields.Decimal(places=2)\n\n        m7s = field.serialize(\"m7\", user)\n        assert isinstance(m7s, decimal.Decimal)\n        assert m7s.is_zero() and m7s.is_signed()\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_decimal_field_special_values_not_permitted", "self", "user", "user", "m7", "0", "field", "fields", "decimal", "places", "2", "m7s", "field", "serialize", "m7", "user", "assert", "isinstance", "m7s", "decimal", "decimal", "assert", "m7s", "is_zero", "and", "m7s", "is_signed"], "doc_len": 32}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_decimal_field_fixed_point_representation", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_decimal_field_fixed_point_representation", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_decimal_field_fixed_point_representation(self, user):\n        \"\"\"\n        Test we get fixed-point string representation for a Decimal number that would normally\n        output in engineering notation.\n        \"\"\"\n        user.m1 = \"0.00000000100000000\"\n\n        field = fields.Decimal()\n        s = field.serialize(\"m1\", user)\n        assert isinstance(s, decimal.Decimal)\n        assert s == decimal.Decimal(\"1.00000000E-9\")\n\n        field = fields.Decimal(as_string=True)\n        s = field.serialize(\"m1\", user)\n        assert isinstance(s, str)\n        assert s == user.m1\n\n        field = fields.Decimal(as_string=True, places=2)\n        s = field.serialize(\"m1\", user)\n        assert isinstance(s, str)\n        assert s == \"0.00\"\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_decimal_field_fixed_point_representation", "self", "user", "test", "we", "get", "fixed", "point", "string", "representation", "for", "a", "decimal", "number", "that", "would", "normally", "output", "in", "engineering", "notation", "user", "m1", "0", "00000000100000000", "field", "fields", "decimal", "s", "field", "serialize", "m1", "user", "assert", "isinstance", "s", "decimal", "decimal", "assert", "s", "decimal", "decimal", "1", "00000000e", "9", "field", "fields", "decimal", "as_string", "true", "s", "field", "serialize", "m1", "user", "assert", "isinstance", "s", "str", "assert", "s", "user", "m1", "field", "fields", "decimal", "as_string", "true", "places", "2", "s", "field", "serialize", "m1", "user", "assert", "isinstance", "s", "str", "assert", "s", "0", "00"], "doc_len": 88}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_boolean_field_serialization", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_boolean_field_serialization", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_boolean_field_serialization(self, user):\n        field = fields.Boolean()\n\n        user.truthy = \"non-falsy-ish\"\n        user.falsy = \"false\"\n        user.none = None\n\n        assert field.serialize(\"truthy\", user) is True\n        assert field.serialize(\"falsy\", user) is False\n        assert field.serialize(\"none\", user) is None\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_boolean_field_serialization", "self", "user", "field", "fields", "boolean", "user", "truthy", "non", "falsy", "ish", "user", "falsy", "false", "user", "none", "none", "assert", "field", "serialize", "truthy", "user", "is", "true", "assert", "field", "serialize", "falsy", "user", "is", "false", "assert", "field", "serialize", "none", "user", "is", "none"], "doc_len": 43}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_function_with_uncallable_param", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_function_with_uncallable_param", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_function_with_uncallable_param(self):\n        with pytest.raises(ValueError):\n            fields.Function(\"uncallable\")\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_function_with_uncallable_param", "self", "with", "pytest", "raises", "valueerror", "fields", "function", "uncallable"], "doc_len": 14}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_email_field_serialize_none", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_email_field_serialize_none", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_email_field_serialize_none(self, user):\n        user.email = None\n        field = fields.Email()\n        assert field.serialize(\"email\", user) is None\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_email_field_serialize_none", "self", "user", "user", "email", "none", "field", "fields", "email", "assert", "field", "serialize", "email", "user", "is", "none"], "doc_len": 21}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_dict_field_serialize_none", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_dict_field_serialize_none", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_dict_field_serialize_none(self, user):\n        user.various_data = None\n        field = fields.Dict()\n        assert field.serialize(\"various_data\", user) is None\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_dict_field_serialize_none", "self", "user", "user", "various_data", "none", "field", "fields", "dict", "assert", "field", "serialize", "various_data", "user", "is", "none"], "doc_len": 21}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_dict_field_invalid_dict_but_okay", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_dict_field_invalid_dict_but_okay", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_dict_field_invalid_dict_but_okay(self, user):\n        user.various_data = \"okaydict\"\n        field = fields.Dict()\n        field.serialize(\"various_data\", user)\n        assert field.serialize(\"various_data\", user) == \"okaydict\"\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_dict_field_invalid_dict_but_okay", "self", "user", "user", "various_data", "okaydict", "field", "fields", "dict", "field", "serialize", "various_data", "user", "assert", "field", "serialize", "various_data", "user", "okaydict"], "doc_len": 24}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_dict_field_serialize", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_dict_field_serialize", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_dict_field_serialize(self, user):\n        user.various_data = {\"foo\": \"bar\"}\n        field = fields.Dict()\n        assert field.serialize(\"various_data\", user) == {\"foo\": \"bar\"}\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_dict_field_serialize", "self", "user", "user", "various_data", "foo", "bar", "field", "fields", "dict", "assert", "field", "serialize", "various_data", "user", "foo", "bar"], "doc_len": 22}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_dict_field_serialize_ordereddict", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_dict_field_serialize_ordereddict", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_dict_field_serialize_ordereddict(self, user):\n        user.various_data = OrderedDict([(\"foo\", \"bar\"), (\"bar\", \"baz\")])\n        field = fields.Dict()\n        assert field.serialize(\"various_data\", user) == OrderedDict(\n            [(\"foo\", \"bar\"), (\"bar\", \"baz\")]\n        )\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_dict_field_serialize_ordereddict", "self", "user", "user", "various_data", "ordereddict", "foo", "bar", "bar", "baz", "field", "fields", "dict", "assert", "field", "serialize", "various_data", "user", "ordereddict", "foo", "bar", "bar", "baz"], "doc_len": 28}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_structured_dict_value_serialize", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_structured_dict_value_serialize", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_structured_dict_value_serialize(self, user):\n        user.various_data = {\"foo\": decimal.Decimal(\"1\")}\n        field = fields.Dict(values=fields.Decimal)\n        assert field.serialize(\"various_data\", user) == {\"foo\": 1}\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_structured_dict_value_serialize", "self", "user", "user", "various_data", "foo", "decimal", "decimal", "1", "field", "fields", "dict", "values", "fields", "decimal", "assert", "field", "serialize", "various_data", "user", "foo", "1"], "doc_len": 27}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_structured_dict_key_serialize", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_structured_dict_key_serialize", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_structured_dict_key_serialize(self, user):\n        user.various_data = {1: \"bar\"}\n        field = fields.Dict(keys=fields.Str)\n        assert field.serialize(\"various_data\", user) == {\"1\": \"bar\"}\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_structured_dict_key_serialize", "self", "user", "user", "various_data", "1", "bar", "field", "fields", "dict", "keys", "fields", "str", "assert", "field", "serialize", "various_data", "user", "1", "bar"], "doc_len": 25}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_structured_dict_key_value_serialize", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_structured_dict_key_value_serialize", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_structured_dict_key_value_serialize(self, user):\n        user.various_data = {1: decimal.Decimal(\"1\")}\n        field = fields.Dict(keys=fields.Str, values=fields.Decimal)\n        assert field.serialize(\"various_data\", user) == {\"1\": 1}\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_structured_dict_key_value_serialize", "self", "user", "user", "various_data", "1", "decimal", "decimal", "1", "field", "fields", "dict", "keys", "fields", "str", "values", "fields", "decimal", "assert", "field", "serialize", "various_data", "user", "1", "1"], "doc_len": 30}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_url_field_serialize_none", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_url_field_serialize_none", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_url_field_serialize_none(self, user):\n        user.homepage = None\n        field = fields.Url()\n        assert field.serialize(\"homepage\", user) is None\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_url_field_serialize_none", "self", "user", "user", "homepage", "none", "field", "fields", "url", "assert", "field", "serialize", "homepage", "user", "is", "none"], "doc_len": 21}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_method_field_with_method_missing", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_method_field_with_method_missing", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_method_field_with_method_missing(self):\n        class BadSerializer(Schema):\n            bad_field = fields.Method(\"invalid\")\n\n        u = User(\"Foo\")\n        with pytest.raises(ValueError):\n            BadSerializer().dump(u)\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_method_field_with_method_missing", "self", "class", "badserializer", "schema", "bad_field", "fields", "method", "invalid", "u", "user", "foo", "with", "pytest", "raises", "valueerror", "badserializer", "dump", "u"], "doc_len": 24}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_method_field_passed_serialize_only_is_dump_only", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_method_field_passed_serialize_only_is_dump_only", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_method_field_passed_serialize_only_is_dump_only(self, user):\n        field = fields.Method(serialize=\"method\")\n        assert field.dump_only is True\n        assert field.load_only is False\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_method_field_passed_serialize_only_is_dump_only", "self", "user", "field", "fields", "method", "serialize", "method", "assert", "field", "dump_only", "is", "true", "assert", "field", "load_only", "is", "false"], "doc_len": 23}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_method_field_passed_deserialize_only_is_load_only", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_method_field_passed_deserialize_only_is_load_only", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_method_field_passed_deserialize_only_is_load_only(self):\n        field = fields.Method(deserialize=\"somemethod\")\n        assert field.load_only is True\n        assert field.dump_only is False\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_method_field_passed_deserialize_only_is_load_only", "self", "field", "fields", "method", "deserialize", "somemethod", "assert", "field", "load_only", "is", "true", "assert", "field", "dump_only", "is", "false"], "doc_len": 22}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_method_field_with_uncallable_attribute", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_method_field_with_uncallable_attribute", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_method_field_with_uncallable_attribute(self):\n        class BadSerializer(Schema):\n            foo = \"not callable\"\n            bad_field = fields.Method(\"foo\")\n\n        u = User(\"Foo\")\n        with pytest.raises(ValueError):\n            BadSerializer().dump(u)\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_method_field_with_uncallable_attribute", "self", "class", "badserializer", "schema", "foo", "not", "callable", "bad_field", "fields", "method", "foo", "u", "user", "foo", "with", "pytest", "raises", "valueerror", "badserializer", "dump", "u"], "doc_len": 27}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_method_field_does_not_swallow_attribute_error", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_method_field_does_not_swallow_attribute_error", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_method_field_does_not_swallow_attribute_error(self):\n        class MySchema(Schema):\n            mfield = fields.Method(\"raise_error\")\n\n            def raise_error(self, obj):\n                raise AttributeError()\n\n        with pytest.raises(AttributeError):\n            MySchema().dump({})\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_method_field_does_not_swallow_attribute_error", "self", "class", "myschema", "schema", "mfield", "fields", "method", "raise_error", "def", "raise_error", "self", "obj", "raise", "attributeerror", "with", "pytest", "raises", "attributeerror", "myschema", "dump"], "doc_len": 26}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_method_with_no_serialize_is_missing", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_method_with_no_serialize_is_missing", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_method_with_no_serialize_is_missing(self):\n        m = fields.Method()\n        m.parent = Schema()\n\n        assert m.serialize(\"\", \"\", \"\") is missing_\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_method_with_no_serialize_is_missing", "self", "m", "fields", "method", "m", "parent", "schema", "assert", "m", "serialize", "is", "missing_"], "doc_len": 18}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_serialize_with_data_key_param", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_serialize_with_data_key_param", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_serialize_with_data_key_param(self):\n        class DumpToSchema(Schema):\n            name = fields.String(data_key=\"NamE\")\n            years = fields.Integer(data_key=\"YearS\")\n\n        data = {\"name\": \"Richard\", \"years\": 11}\n        result = DumpToSchema().dump(data)\n        assert result == {\"NamE\": \"Richard\", \"YearS\": 11}\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_serialize_with_data_key_param", "self", "class", "dumptoschema", "schema", "name", "fields", "string", "data_key", "name", "years", "fields", "integer", "data_key", "years", "data", "name", "richard", "years", "11", "result", "dumptoschema", "dump", "data", "assert", "result", "name", "richard", "years", "11"], "doc_len": 35}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_serialize_with_attribute_and_data_key_uses_data_key", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_serialize_with_attribute_and_data_key_uses_data_key", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_serialize_with_attribute_and_data_key_uses_data_key(self):\n        class ConfusedDumpToAndAttributeSerializer(Schema):\n            name = fields.String(data_key=\"FullName\")\n            username = fields.String(attribute=\"uname\", data_key=\"UserName\")\n            years = fields.Integer(attribute=\"le_wild_age\", data_key=\"Years\")\n\n        data = {\"name\": \"Mick\", \"uname\": \"mick_the_awesome\", \"le_wild_age\": 999}\n        result = ConfusedDumpToAndAttributeSerializer().dump(data)\n\n        assert result == {\n            \"FullName\": \"Mick\",\n            \"UserName\": \"mick_the_awesome\",\n            \"Years\": 999,\n        }\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_serialize_with_attribute_and_data_key_uses_data_key", "self", "class", "confuseddumptoandattributeserializer", "schema", "name", "fields", "string", "data_key", "fullname", "username", "fields", "string", "attribute", "uname", "data_key", "username", "years", "fields", "integer", "attribute", "le_wild_age", "data_key", "years", "data", "name", "mick", "uname", "mick_the_awesome", "le_wild_age", "999", "result", "confuseddumptoandattributeserializer", "dump", "data", "assert", "result", "fullname", "mick", "username", "mick_the_awesome", "years", "999"], "doc_len": 48}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_datetime_field_rfc822", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_datetime_field_rfc822", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_datetime_field_rfc822(self, fmt, value, expected):\n        field = fields.DateTime(format=fmt)\n        assert field.serialize(\"d\", {\"d\": value}) == expected\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_datetime_field_rfc822", "self", "fmt", "value", "expected", "field", "fields", "datetime", "format", "fmt", "assert", "field", "serialize", "d", "d", "value", "expected"], "doc_len": 22}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_datetime_field_iso8601", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_datetime_field_iso8601", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_datetime_field_iso8601(self, fmt, value, expected):\n        if fmt is None:\n            # Test default is ISO\n            field = fields.DateTime()\n        else:\n            field = fields.DateTime(format=fmt)\n        assert field.serialize(\"d\", {\"d\": value}) == expected\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_datetime_field_iso8601", "self", "fmt", "value", "expected", "if", "fmt", "is", "none", "test", "default", "is", "iso", "field", "fields", "datetime", "else", "field", "fields", "datetime", "format", "fmt", "assert", "field", "serialize", "d", "d", "value", "expected"], "doc_len": 34}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_datetime_field_format", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_datetime_field_format", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_datetime_field_format(self, user):\n        format = \"%Y-%m-%d\"\n        field = fields.DateTime(format=format)\n        assert field.serialize(\"created\", user) == user.created.strftime(format)\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_datetime_field_format", "self", "user", "format", "y", "m", "d", "field", "fields", "datetime", "format", "format", "assert", "field", "serialize", "created", "user", "user", "created", "strftime", "format"], "doc_len": 26}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_string_field", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_string_field", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_string_field(self):\n        field = fields.String()\n        user = User(name=b\"foo\")\n        assert field.serialize(\"name\", user) == \"foo\"\n        field = fields.String(allow_none=True)\n        user.name = None\n        assert field.serialize(\"name\", user) is None\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_string_field", "self", "field", "fields", "string", "user", "user", "name", "b", "foo", "assert", "field", "serialize", "name", "user", "foo", "field", "fields", "string", "allow_none", "true", "user", "name", "none", "assert", "field", "serialize", "name", "user", "is", "none"], "doc_len": 36}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_string_field_default_to_empty_string", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_string_field_default_to_empty_string", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_string_field_default_to_empty_string(self, user):\n        field = fields.String(default=\"\")\n        assert field.serialize(\"notfound\", {}) == \"\"\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_string_field_default_to_empty_string", "self", "user", "field", "fields", "string", "default", "assert", "field", "serialize", "notfound"], "doc_len": 16}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_time_field", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_time_field", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_time_field(self, user):\n        field = fields.Time()\n        expected = user.time_registered.isoformat()[:15]\n        assert field.serialize(\"time_registered\", user) == expected\n\n        user.time_registered = None\n        assert field.serialize(\"time_registered\", user) is None\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_time_field", "self", "user", "field", "fields", "time", "expected", "user", "time_registered", "isoformat", "15", "assert", "field", "serialize", "time_registered", "user", "expected", "user", "time_registered", "none", "assert", "field", "serialize", "time_registered", "user", "is", "none"], "doc_len": 32}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_date_field", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_date_field", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_date_field(self, user):\n        field = fields.Date()\n        assert field.serialize(\"birthdate\", user) == user.birthdate.isoformat()\n\n        user.birthdate = None\n        assert field.serialize(\"birthdate\", user) is None\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_date_field", "self", "user", "field", "fields", "date", "assert", "field", "serialize", "birthdate", "user", "user", "birthdate", "isoformat", "user", "birthdate", "none", "assert", "field", "serialize", "birthdate", "user", "is", "none"], "doc_len": 29}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_timedelta_field", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_timedelta_field", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_timedelta_field(self, user):\n        user.d1 = dt.timedelta(days=1, seconds=1, microseconds=1)\n        user.d2 = dt.timedelta(days=0, seconds=86401, microseconds=1)\n        user.d3 = dt.timedelta(days=0, seconds=0, microseconds=86401000001)\n        user.d4 = dt.timedelta(days=0, seconds=0, microseconds=0)\n        user.d5 = dt.timedelta(days=-1, seconds=0, microseconds=0)\n        user.d6 = dt.timedelta(\n            days=1,\n            seconds=1,\n            microseconds=1,\n            milliseconds=1,\n            minutes=1,\n            hours=1,\n            weeks=1,\n        )\n\n        field = fields.TimeDelta(fields.TimeDelta.DAYS)\n        assert field.serialize(\"d1\", user) == 1\n        field = fields.TimeDelta(fields.TimeDelta.SECONDS)\n        assert field.serialize(\"d1\", user) == 86401\n        field = fields.TimeDelta(fields.TimeDelta.MICROSECONDS)\n        assert field.serialize(\"d1\", user) == 86401000001\n        field = fields.TimeDelta(fields.TimeDelta.HOURS)\n        assert field.serialize(\"d1\", user) == 24\n\n        field = fields.TimeDelta(fields.TimeDelta.DAYS)\n        assert field.serialize(\"d2\", user) == 1\n        field = fields.TimeDelta(fields.TimeDelta.SECONDS)\n        assert field.serialize(\"d2\", user) == 86401\n        field = fields.TimeDelta(fields.TimeDelta.MICROSECONDS)\n        assert field.serialize(\"d2\", user) == 86401000001\n\n        field = fields.TimeDelta(fields.TimeDelta.DAYS)\n        assert field.serialize(\"d3\", user) == 1\n        field = fields.TimeDelta(fields.TimeDelta.SECONDS)\n        assert field.serialize(\"d3\", user) == 86401\n        field = fields.TimeDelta(fields.TimeDelta.MICROSECONDS)\n        assert field.serialize(\"d3\", user) == 86401000001\n\n        field = fields.TimeDelta(fields.TimeDelta.DAYS)\n        assert field.serialize(\"d4\", user) == 0\n        field = fields.TimeDelta(fields.TimeDelta.SECONDS)\n        assert field.serialize(\"d4\", user) == 0\n        field = fields.TimeDelta(fields.TimeDelta.MICROSECONDS)\n        assert field.serialize(\"d4\", user) == 0\n\n        field = fields.TimeDelta(fields.TimeDelta.DAYS)\n        assert field.serialize(\"d5\", user) == -1\n        field = fields.TimeDelta(fields.TimeDelta.SECONDS)\n        assert field.serialize(\"d5\", user) == -86400\n        field = fields.TimeDelta(fields.TimeDelta.MICROSECONDS)\n        assert field.serialize(\"d5\", user) == -86400000000\n\n        field = fields.TimeDelta(fields.TimeDelta.WEEKS)\n        assert field.serialize(\"d6\", user) == 1\n        field = fields.TimeDelta(fields.TimeDelta.DAYS)\n        assert field.serialize(\"d6\", user) == 7 + 1\n        field = fields.TimeDelta(fields.TimeDelta.HOURS)\n        assert field.serialize(\"d6\", user) == 7 * 24 + 24 + 1\n        field = fields.TimeDelta(fields.TimeDelta.MINUTES)\n        assert field.serialize(\"d6\", user) == 7 * 24 * 60 + 24 * 60 + 60 + 1\n        d6_seconds = (\n            7 * 24 * 60 * 60\n            + 24 * 60 * 60  # 1 week\n            + 60 * 60  # 1 day\n            + 60  # 1 hour\n            + 1  # 1 minute\n        )\n        field = fields.TimeDelta(fields.TimeDelta.SECONDS)\n        assert field.serialize(\"d6\", user) == d6_seconds\n        field = fields.TimeDelta(fields.TimeDelta.MILLISECONDS)\n        assert field.serialize(\"d6\", user) == d6_seconds * 1000 + 1\n        field = fields.TimeDelta(fields.TimeDelta.MICROSECONDS)\n        assert field.serialize(\"d6\", user) == d6_seconds * 10 ** 6 + 1000 + 1\n\n        user.d7 = None\n        assert field.serialize(\"d7\", user) is None\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_timedelta_field", "self", "user", "user", "d1", "dt", "timedelta", "days", "1", "seconds", "1", "microseconds", "1", "user", "d2", "dt", "timedelta", "days", "0", "seconds", "86401", "microseconds", "1", "user", "d3", "dt", "timedelta", "days", "0", "seconds", "0", "microseconds", "86401000001", "user", "d4", "dt", "timedelta", "days", "0", "seconds", "0", "microseconds", "0", "user", "d5", "dt", "timedelta", "days", "1", "seconds", "0", "microseconds", "0", "user", "d6", "dt", "timedelta", "days", "1", "seconds", "1", "microseconds", "1", "milliseconds", "1", "minutes", "1", "hours", "1", "weeks", "1", "field", "fields", "timedelta", "fields", "timedelta", "days", "assert", "field", "serialize", "d1", "user", "1", "field", "fields", "timedelta", "fields", "timedelta", "seconds", "assert", "field", "serialize", "d1", "user", "86401", "field", "fields", "timedelta", "fields", "timedelta", "microseconds", "assert", "field", "serialize", "d1", "user", "86401000001", "field", "fields", "timedelta", "fields", "timedelta", "hours", "assert", "field", "serialize", "d1", "user", "24", "field", "fields", "timedelta", "fields", "timedelta", "days", "assert", "field", "serialize", "d2", "user", "1", "field", "fields", "timedelta", "fields", "timedelta", "seconds", "assert", "field", "serialize", "d2", "user", "86401", "field", "fields", "timedelta", "fields", "timedelta", "microseconds", "assert", "field", "serialize", "d2", "user", "86401000001", "field", "fields", "timedelta", "fields", "timedelta", "days", "assert", "field", "serialize", "d3", "user", "1", "field", "fields", "timedelta", "fields", "timedelta", "seconds", "assert", "field", "serialize", "d3", "user", "86401", "field", "fields", "timedelta", "fields", "timedelta", "microseconds", "assert", "field", "serialize", "d3", "user", "86401000001", "field", "fields", "timedelta", "fields", "timedelta", "days", "assert", "field", "serialize", "d4", "user", "0", "field", "fields", "timedelta", "fields", "timedelta", "seconds", "assert", "field", "serialize", "d4", "user", "0", "field", "fields", "timedelta", "fields", "timedelta", "microseconds", "assert", "field", "serialize", "d4", "user", "0", "field", "fields", "timedelta", "fields", "timedelta", "days", "assert", "field", "serialize", "d5", "user", "1", "field", "fields", "timedelta", "fields", "timedelta", "seconds", "assert", "field", "serialize", "d5", "user", "86400", "field", "fields", "timedelta", "fields", "timedelta", "microseconds", "assert", "field", "serialize", "d5", "user", "86400000000", "field", "fields", "timedelta", "fields", "timedelta", "weeks", "assert", "field", "serialize", "d6", "user", "1", "field", "fields", "timedelta", "fields", "timedelta", "days", "assert", "field", "serialize", "d6", "user", "7", "1", "field", "fields", "timedelta", "fields", "timedelta", "hours", "assert", "field", "serialize", "d6", "user", "7", "24", "24", "1", "field", "fields", "timedelta", "fields", "timedelta", "minutes", "assert", "field", "serialize", "d6", "user", "7", "24", "60", "24", "60", "60", "1", "d6_seconds", "7", "24", "60", "60", "24", "60", "60", "1", "week", "60", "60", "1", "day", "60", "1", "hour", "1", "1", "minute", "field", "fields", "timedelta", "fields", "timedelta", "seconds", "assert", "field", "serialize", "d6", "user", "d6_seconds", "field", "fields", "timedelta", "fields", "timedelta", "milliseconds", "assert", "field", "serialize", "d6", "user", "d6_seconds", "1000", "1", "field", "fields", "timedelta", "fields", "timedelta", "microseconds", "assert", "field", "serialize", "d6", "user", "d6_seconds", "10", "6", "1000", "1", "user", "d7", "none", "assert", "field", "serialize", "d7", "user", "is", "none"], "doc_len": 398}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_datetime_list_field", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_datetime_list_field", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_datetime_list_field(self):\n        obj = DateTimeList([dt.datetime.utcnow(), dt.datetime.now()])\n        field = fields.List(fields.DateTime)\n        result = field.serialize(\"dtimes\", obj)\n        assert all([type(each) == str for each in result])\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_datetime_list_field", "self", "obj", "datetimelist", "dt", "datetime", "utcnow", "dt", "datetime", "now", "field", "fields", "list", "fields", "datetime", "result", "field", "serialize", "dtimes", "obj", "assert", "all", "type", "each", "str", "for", "each", "in", "result"], "doc_len": 34}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_list_field_serialize_none_returns_none", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_list_field_serialize_none_returns_none", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_list_field_serialize_none_returns_none(self):\n        obj = DateTimeList(None)\n        field = fields.List(fields.DateTime)\n        assert field.serialize(\"dtimes\", obj) is None\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_list_field_serialize_none_returns_none", "self", "obj", "datetimelist", "none", "field", "fields", "list", "fields", "datetime", "assert", "field", "serialize", "dtimes", "obj", "is", "none"], "doc_len": 22}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_list_field_work_with_generator_single_value", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_list_field_work_with_generator_single_value", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_list_field_work_with_generator_single_value(self):\n        def custom_generator():\n            yield dt.datetime.utcnow()\n\n        obj = DateTimeList(custom_generator())\n        field = fields.List(fields.DateTime)\n        result = field.serialize(\"dtimes\", obj)\n        assert len(result) == 1\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_list_field_work_with_generator_single_value", "self", "def", "custom_generator", "yield", "dt", "datetime", "utcnow", "obj", "datetimelist", "custom_generator", "field", "fields", "list", "fields", "datetime", "result", "field", "serialize", "dtimes", "obj", "assert", "len", "result", "1"], "doc_len": 30}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_list_field_work_with_generators_multiple_values", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_list_field_work_with_generators_multiple_values", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_list_field_work_with_generators_multiple_values(self):\n        def custom_generator():\n            yield from [dt.datetime.utcnow(), dt.datetime.now()]\n\n        obj = DateTimeList(custom_generator())\n        field = fields.List(fields.DateTime)\n        result = field.serialize(\"dtimes\", obj)\n        assert len(result) == 2\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_list_field_work_with_generators_multiple_values", "self", "def", "custom_generator", "yield", "from", "dt", "datetime", "utcnow", "dt", "datetime", "now", "obj", "datetimelist", "custom_generator", "field", "fields", "list", "fields", "datetime", "result", "field", "serialize", "dtimes", "obj", "assert", "len", "result", "2"], "doc_len": 34}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_list_field_work_with_generators_empty_generator_returns_none_for_every_non_returning_yield_statement", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_list_field_work_with_generators_empty_generator_returns_none_for_every_non_returning_yield_statement", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_list_field_work_with_generators_empty_generator_returns_none_for_every_non_returning_yield_statement(  # noqa: B950\n        self\n    ):\n        def custom_generator():\n            yield\n            yield\n\n        obj = DateTimeList(custom_generator())\n        field = fields.List(fields.DateTime, allow_none=True)\n        result = field.serialize(\"dtimes\", obj)\n        assert len(result) == 2\n        assert result[0] is None\n        assert result[1] is None\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_list_field_work_with_generators_empty_generator_returns_none_for_every_non_returning_yield_statement", "noqa", "b950", "self", "def", "custom_generator", "yield", "yield", "obj", "datetimelist", "custom_generator", "field", "fields", "list", "fields", "datetime", "allow_none", "true", "result", "field", "serialize", "dtimes", "obj", "assert", "len", "result", "2", "assert", "result", "0", "is", "none", "assert", "result", "1", "is", "none"], "doc_len": 42}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_list_field_work_with_set", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_list_field_work_with_set", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_list_field_work_with_set(self):\n        custom_set = {1, 2, 3}\n        obj = IntegerList(custom_set)\n        field = fields.List(fields.Int)\n        result = field.serialize(\"ints\", obj)\n        assert len(result) == 3\n        assert 1 in result\n        assert 2 in result\n        assert 3 in result\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_list_field_work_with_set", "self", "custom_set", "1", "2", "3", "obj", "integerlist", "custom_set", "field", "fields", "list", "fields", "int", "result", "field", "serialize", "ints", "obj", "assert", "len", "result", "3", "assert", "1", "in", "result", "assert", "2", "in", "result", "assert", "3", "in", "result"], "doc_len": 40}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_list_field_work_with_custom_class_with_iterator_protocol", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_list_field_work_with_custom_class_with_iterator_protocol", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_list_field_work_with_custom_class_with_iterator_protocol(self):\n        class IteratorSupportingClass:\n            def __init__(self, iterable):\n                self.iterable = iterable\n\n            def __iter__(self):\n                return iter(self.iterable)\n\n        ints = IteratorSupportingClass([1, 2, 3])\n        obj = IntegerList(ints)\n        field = fields.List(fields.Int)\n        result = field.serialize(\"ints\", obj)\n        assert len(result) == 3\n        assert result[0] == 1\n        assert result[1] == 2\n        assert result[2] == 3\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_list_field_work_with_custom_class_with_iterator_protocol", "self", "class", "iteratorsupportingclass", "def", "__init__", "self", "iterable", "self", "iterable", "iterable", "def", "__iter__", "self", "return", "iter", "self", "iterable", "ints", "iteratorsupportingclass", "1", "2", "3", "obj", "integerlist", "ints", "field", "fields", "list", "fields", "int", "result", "field", "serialize", "ints", "obj", "assert", "len", "result", "3", "assert", "result", "0", "1", "assert", "result", "1", "2", "assert", "result", "2", "3"], "doc_len": 57}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_bad_list_field", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_bad_list_field", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_bad_list_field(self):\n        class ASchema(Schema):\n            id = fields.Int()\n\n        with pytest.raises(ValueError):\n            fields.List(\"string\")\n        expected_msg = (\n            \"The list elements must be a subclass or instance of \"\n            \"marshmallow.base.FieldABC\"\n        )\n        with pytest.raises(ValueError, match=expected_msg):\n            fields.List(ASchema)\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_bad_list_field", "self", "class", "aschema", "schema", "id", "fields", "int", "with", "pytest", "raises", "valueerror", "fields", "list", "string", "expected_msg", "the", "list", "elements", "must", "be", "a", "subclass", "or", "instance", "of", "marshmallow", "base", "fieldabc", "with", "pytest", "raises", "valueerror", "match", "expected_msg", "fields", "list", "aschema"], "doc_len": 43}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_datetime_integer_tuple_field", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_datetime_integer_tuple_field", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_datetime_integer_tuple_field(self):\n        obj = DateTimeIntegerTuple((dt.datetime.utcnow(), 42))\n        field = fields.Tuple([fields.DateTime, fields.Integer])\n        result = field.serialize(\"dtime_int\", obj)\n        assert type(result[0]) == str\n        assert type(result[1]) == int\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_datetime_integer_tuple_field", "self", "obj", "datetimeintegertuple", "dt", "datetime", "utcnow", "42", "field", "fields", "tuple", "fields", "datetime", "fields", "integer", "result", "field", "serialize", "dtime_int", "obj", "assert", "type", "result", "0", "str", "assert", "type", "result", "1", "int"], "doc_len": 35}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_tuple_field_serialize_none_returns_none", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_tuple_field_serialize_none_returns_none", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_tuple_field_serialize_none_returns_none(self):\n        obj = DateTimeIntegerTuple(None)\n        field = fields.Tuple([fields.DateTime, fields.Integer])\n        assert field.serialize(\"dtime_int\", obj) is None\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_tuple_field_serialize_none_returns_none", "self", "obj", "datetimeintegertuple", "none", "field", "fields", "tuple", "fields", "datetime", "fields", "integer", "assert", "field", "serialize", "dtime_int", "obj", "is", "none"], "doc_len": 24}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_bad_tuple_field", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_bad_tuple_field", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_bad_tuple_field(self):\n        class ASchema(Schema):\n            id = fields.Int()\n\n        with pytest.raises(ValueError):\n            fields.Tuple([\"string\"])\n        with pytest.raises(ValueError):\n            fields.Tuple(fields.String)\n        expected_msg = (\n            'Elements of \"tuple_fields\" must be subclasses or '\n            \"instances of marshmallow.base.FieldABC.\"\n        )\n        with pytest.raises(ValueError, match=expected_msg):\n            fields.Tuple([ASchema])\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_bad_tuple_field", "self", "class", "aschema", "schema", "id", "fields", "int", "with", "pytest", "raises", "valueerror", "fields", "tuple", "string", "with", "pytest", "raises", "valueerror", "fields", "tuple", "fields", "string", "expected_msg", "elements", "of", "tuple_fields", "must", "be", "subclasses", "or", "instances", "of", "marshmallow", "base", "fieldabc", "with", "pytest", "raises", "valueerror", "match", "expected_msg", "fields", "tuple", "aschema"], "doc_len": 50}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_serialize_does_not_apply_validators", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_serialize_does_not_apply_validators", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_serialize_does_not_apply_validators(self, user):\n        field = fields.Field(validate=lambda x: False)\n        # No validation error raised\n        assert field.serialize(\"age\", user) == user.age\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_serialize_does_not_apply_validators", "self", "user", "field", "fields", "field", "validate", "lambda", "x", "false", "no", "validation", "error", "raised", "assert", "field", "serialize", "age", "user", "user", "age"], "doc_len": 26}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_constant_field_serialization", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_constant_field_serialization", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_constant_field_serialization(self, user):\n        field = fields.Constant(\"something\")\n        assert field.serialize(\"whatever\", user) == \"something\"\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_constant_field_serialization", "self", "user", "field", "fields", "constant", "something", "assert", "field", "serialize", "whatever", "user", "something"], "doc_len": 18}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_constant_is_always_included_in_serialized_data", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_constant_is_always_included_in_serialized_data", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_constant_is_always_included_in_serialized_data(self):\n        class MySchema(Schema):\n            foo = fields.Constant(42)\n\n        sch = MySchema()\n        assert sch.dump({\"bar\": 24})[\"foo\"] == 42\n        assert sch.dump({\"foo\": 24})[\"foo\"] == 42\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_constant_is_always_included_in_serialized_data", "self", "class", "myschema", "schema", "foo", "fields", "constant", "42", "sch", "myschema", "assert", "sch", "dump", "bar", "24", "foo", "42", "assert", "sch", "dump", "foo", "24", "foo", "42"], "doc_len": 30}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_constant_field_serialize_when_omitted", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_constant_field_serialize_when_omitted", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_constant_field_serialize_when_omitted(self):\n        class MiniUserSchema(Schema):\n            name = fields.Constant(\"bill\")\n\n        s = MiniUserSchema()\n        assert s.dump({})[\"name\"] == \"bill\"\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_constant_field_serialize_when_omitted", "self", "class", "miniuserschema", "schema", "name", "fields", "constant", "bill", "s", "miniuserschema", "assert", "s", "dump", "name", "bill"], "doc_len": 21}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_all_fields_serialize_none_to_none", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_all_fields_serialize_none_to_none", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_all_fields_serialize_none_to_none(self, FieldClass):\n        field = FieldClass(allow_none=True)\n        res = field.serialize(\"foo\", {\"foo\": None})\n        assert res is None\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_all_fields_serialize_none_to_none", "self", "fieldclass", "field", "fieldclass", "allow_none", "true", "res", "field", "serialize", "foo", "foo", "none", "assert", "res", "is", "none"], "doc_len": 22}
{"doc_id": "tests/test_serialization.py::TestSchemaSerialization.test_serialize_with_missing_param_value", "file_path": "tests/test_serialization.py", "class_name": "TestSchemaSerialization", "func_name": "test_serialize_with_missing_param_value", "text": "文件路径: tests/test_serialization.py, 类名: TestSchemaSerialization\n    def test_serialize_with_missing_param_value(self):\n        class AliasingUserSerializer(Schema):\n            name = fields.String()\n            birthdate = fields.DateTime(default=dt.datetime(2017, 9, 29))\n\n        data = {\"name\": \"Mick\"}\n        result = AliasingUserSerializer().dump(data)\n        assert result[\"name\"] == \"Mick\"\n        assert result[\"birthdate\"] == \"2017-09-29T00:00:00\"\n", "tokens": ["tests", "test_serialization", "py", "testschemaserialization", "def", "test_serialize_with_missing_param_value", "self", "class", "aliasinguserserializer", "schema", "name", "fields", "string", "birthdate", "fields", "datetime", "default", "dt", "datetime", "2017", "9", "29", "data", "name", "mick", "result", "aliasinguserserializer", "dump", "data", "assert", "result", "name", "mick", "assert", "result", "birthdate", "2017", "09", "29t00", "00", "00"], "doc_len": 41}
{"doc_id": "tests/test_serialization.py::TestSchemaSerialization.test_serialize_with_missing_param_callable", "file_path": "tests/test_serialization.py", "class_name": "TestSchemaSerialization", "func_name": "test_serialize_with_missing_param_callable", "text": "文件路径: tests/test_serialization.py, 类名: TestSchemaSerialization\n    def test_serialize_with_missing_param_callable(self):\n        class AliasingUserSerializer(Schema):\n            name = fields.String()\n            birthdate = fields.DateTime(default=lambda: dt.datetime(2017, 9, 29))\n\n        data = {\"name\": \"Mick\"}\n        result = AliasingUserSerializer().dump(data)\n        assert result[\"name\"] == \"Mick\"\n        assert result[\"birthdate\"] == \"2017-09-29T00:00:00\"\n", "tokens": ["tests", "test_serialization", "py", "testschemaserialization", "def", "test_serialize_with_missing_param_callable", "self", "class", "aliasinguserserializer", "schema", "name", "fields", "string", "birthdate", "fields", "datetime", "default", "lambda", "dt", "datetime", "2017", "9", "29", "data", "name", "mick", "result", "aliasinguserserializer", "dump", "data", "assert", "result", "name", "mick", "assert", "result", "birthdate", "2017", "09", "29t00", "00", "00"], "doc_len": 42}
{"doc_id": "tests/test_serialization.py::test_serializing_named_tuple", "file_path": "tests/test_serialization.py", "class_name": null, "func_name": "test_serializing_named_tuple", "text": "文件路径: tests/test_serialization.py\ndef test_serializing_named_tuple():\n    Point = namedtuple(\"Point\", [\"x\", \"y\"])\n\n    field = fields.Field()\n\n    p = Point(x=4, y=2)\n\n    assert field.serialize(\"x\", p) == 4\n", "tokens": ["tests", "test_serialization", "py", "def", "test_serializing_named_tuple", "point", "namedtuple", "point", "x", "y", "field", "fields", "field", "p", "point", "x", "4", "y", "2", "assert", "field", "serialize", "x", "p", "4"], "doc_len": 25}
{"doc_id": "tests/test_serialization.py::test_serializing_named_tuple_with_meta", "file_path": "tests/test_serialization.py", "class_name": null, "func_name": "test_serializing_named_tuple_with_meta", "text": "文件路径: tests/test_serialization.py\ndef test_serializing_named_tuple_with_meta():\n    Point = namedtuple(\"Point\", [\"x\", \"y\"])\n    p = Point(x=4, y=2)\n\n    class PointSerializer(Schema):\n        class Meta:\n            fields = (\"x\", \"y\")\n\n    serialized = PointSerializer().dump(p)\n    assert serialized[\"x\"] == 4\n    assert serialized[\"y\"] == 2\n", "tokens": ["tests", "test_serialization", "py", "def", "test_serializing_named_tuple_with_meta", "point", "namedtuple", "point", "x", "y", "p", "point", "x", "4", "y", "2", "class", "pointserializer", "schema", "class", "meta", "fields", "x", "y", "serialized", "pointserializer", "dump", "p", "assert", "serialized", "x", "4", "assert", "serialized", "y", "2"], "doc_len": 36}
{"doc_id": "tests/test_serialization.py::test_serializing_slice", "file_path": "tests/test_serialization.py", "class_name": null, "func_name": "test_serializing_slice", "text": "文件路径: tests/test_serialization.py\ndef test_serializing_slice():\n    values = [{\"value\": value} for value in range(5)]\n    slice = itertools.islice(values, None)\n\n    class ValueSchema(Schema):\n        value = fields.Int()\n\n    serialized = ValueSchema(many=True).dump(slice)\n    assert serialized == values\n", "tokens": ["tests", "test_serialization", "py", "def", "test_serializing_slice", "values", "value", "value", "for", "value", "in", "range", "5", "slice", "itertools", "islice", "values", "none", "class", "valueschema", "schema", "value", "fields", "int", "serialized", "valueschema", "many", "true", "dump", "slice", "assert", "serialized", "values"], "doc_len": 33}
{"doc_id": "tests/test_serialization.py::test_nested_field_many_serializing_generator", "file_path": "tests/test_serialization.py", "class_name": null, "func_name": "test_nested_field_many_serializing_generator", "text": "文件路径: tests/test_serialization.py\ndef test_nested_field_many_serializing_generator():\n    class MySchema(Schema):\n        name = fields.Str()\n\n    class OtherSchema(Schema):\n        objects = fields.Nested(MySchema, many=True)\n\n    def gen():\n        yield {\"name\": \"foo\"}\n        yield {\"name\": \"bar\"}\n\n    obj = {\"objects\": gen()}\n    data = OtherSchema().dump(obj)\n\n    assert data.get(\"objects\") == [{\"name\": \"foo\"}, {\"name\": \"bar\"}]\n", "tokens": ["tests", "test_serialization", "py", "def", "test_nested_field_many_serializing_generator", "class", "myschema", "schema", "name", "fields", "str", "class", "otherschema", "schema", "objects", "fields", "nested", "myschema", "many", "true", "def", "gen", "yield", "name", "foo", "yield", "name", "bar", "obj", "objects", "gen", "data", "otherschema", "dump", "obj", "assert", "data", "get", "objects", "name", "foo", "name", "bar"], "doc_len": 43}
{"doc_id": "tests/test_utils.py::test_missing_singleton_copy", "file_path": "tests/test_utils.py", "class_name": null, "func_name": "test_missing_singleton_copy", "text": "文件路径: tests/test_utils.py\ndef test_missing_singleton_copy():\n    assert copy(utils.missing) is utils.missing\n    assert deepcopy(utils.missing) is utils.missing\n", "tokens": ["tests", "test_utils", "py", "def", "test_missing_singleton_copy", "assert", "copy", "utils", "missing", "is", "utils", "missing", "assert", "deepcopy", "utils", "missing", "is", "utils", "missing"], "doc_len": 19}
{"doc_id": "tests/test_utils.py::PointClass.__init__", "file_path": "tests/test_utils.py", "class_name": "PointClass", "func_name": "__init__", "text": "文件路径: tests/test_utils.py, 类名: PointClass\n    def __init__(self, x, y):\n        self.x = x\n        self.y = y\n", "tokens": ["tests", "test_utils", "py", "pointclass", "def", "__init__", "self", "x", "y", "self", "x", "x", "self", "y", "y"], "doc_len": 15}
{"doc_id": "tests/test_utils.py::PointDict.__init__", "file_path": "tests/test_utils.py", "class_name": "PointDict", "func_name": "__init__", "text": "文件路径: tests/test_utils.py, 类名: PointDict\n    def __init__(self, x, y):\n        super().__init__({\"x\": x})\n        self.y = y\n", "tokens": ["tests", "test_utils", "py", "pointdict", "def", "__init__", "self", "x", "y", "super", "__init__", "x", "x", "self", "y", "y"], "doc_len": 16}
{"doc_id": "tests/test_utils.py::test_get_value_from_object", "file_path": "tests/test_utils.py", "class_name": null, "func_name": "test_get_value_from_object", "text": "文件路径: tests/test_utils.py\ndef test_get_value_from_object(obj):\n    assert utils.get_value(obj, \"x\") == 24\n    assert utils.get_value(obj, \"y\") == 42\n", "tokens": ["tests", "test_utils", "py", "def", "test_get_value_from_object", "obj", "assert", "utils", "get_value", "obj", "x", "24", "assert", "utils", "get_value", "obj", "y", "42"], "doc_len": 18}
{"doc_id": "tests/test_utils.py::test_get_value_from_namedtuple_with_default", "file_path": "tests/test_utils.py", "class_name": null, "func_name": "test_get_value_from_namedtuple_with_default", "text": "文件路径: tests/test_utils.py\ndef test_get_value_from_namedtuple_with_default():\n    p = PointNT(x=42, y=None)\n    # Default is only returned if key is not found\n    assert utils.get_value(p, \"z\", default=123) == 123\n    # since 'y' is an attribute, None is returned instead of the default\n    assert utils.get_value(p, \"y\", default=123) is None\n", "tokens": ["tests", "test_utils", "py", "def", "test_get_value_from_namedtuple_with_default", "p", "pointnt", "x", "42", "y", "none", "default", "is", "only", "returned", "if", "key", "is", "not", "found", "assert", "utils", "get_value", "p", "z", "default", "123", "123", "since", "y", "is", "an", "attribute", "none", "is", "returned", "instead", "of", "the", "default", "assert", "utils", "get_value", "p", "y", "default", "123", "is", "none"], "doc_len": 49}
{"doc_id": "tests/test_utils.py::Triangle.__init__", "file_path": "tests/test_utils.py", "class_name": "Triangle", "func_name": "__init__", "text": "文件路径: tests/test_utils.py, 类名: Triangle\n    def __init__(self, p1, p2, p3):\n        self.p1 = p1\n        self.p2 = p2\n        self.p3 = p3\n        self.points = [p1, p2, p3]\n", "tokens": ["tests", "test_utils", "py", "triangle", "def", "__init__", "self", "p1", "p2", "p3", "self", "p1", "p1", "self", "p2", "p2", "self", "p3", "p3", "self", "points", "p1", "p2", "p3"], "doc_len": 24}
{"doc_id": "tests/test_utils.py::test_get_value_for_nested_object", "file_path": "tests/test_utils.py", "class_name": null, "func_name": "test_get_value_for_nested_object", "text": "文件路径: tests/test_utils.py\ndef test_get_value_for_nested_object():\n    tri = Triangle(p1=PointClass(1, 2), p2=PointNT(3, 4), p3={\"x\": 5, \"y\": 6})\n    assert utils.get_value(tri, \"p1.x\") == 1\n    assert utils.get_value(tri, \"p2.x\") == 3\n    assert utils.get_value(tri, \"p3.x\") == 5\n", "tokens": ["tests", "test_utils", "py", "def", "test_get_value_for_nested_object", "tri", "triangle", "p1", "pointclass", "1", "2", "p2", "pointnt", "3", "4", "p3", "x", "5", "y", "6", "assert", "utils", "get_value", "tri", "p1", "x", "1", "assert", "utils", "get_value", "tri", "p2", "x", "3", "assert", "utils", "get_value", "tri", "p3", "x", "5"], "doc_len": 41}
{"doc_id": "tests/test_utils.py::test_get_value_from_dict", "file_path": "tests/test_utils.py", "class_name": null, "func_name": "test_get_value_from_dict", "text": "文件路径: tests/test_utils.py\ndef test_get_value_from_dict():\n    d = dict(items=[\"foo\", \"bar\"], keys=[\"baz\", \"quux\"])\n    assert utils.get_value(d, \"items\") == [\"foo\", \"bar\"]\n    assert utils.get_value(d, \"keys\") == [\"baz\", \"quux\"]\n", "tokens": ["tests", "test_utils", "py", "def", "test_get_value_from_dict", "d", "dict", "items", "foo", "bar", "keys", "baz", "quux", "assert", "utils", "get_value", "d", "items", "foo", "bar", "assert", "utils", "get_value", "d", "keys", "baz", "quux"], "doc_len": 27}
{"doc_id": "tests/test_utils.py::test_get_value", "file_path": "tests/test_utils.py", "class_name": null, "func_name": "test_get_value", "text": "文件路径: tests/test_utils.py\ndef test_get_value():\n    lst = [1, 2, 3]\n    assert utils.get_value(lst, 1) == 2\n\n    class MyInt(int):\n        pass\n\n    assert utils.get_value(lst, MyInt(1)) == 2\n", "tokens": ["tests", "test_utils", "py", "def", "test_get_value", "lst", "1", "2", "3", "assert", "utils", "get_value", "lst", "1", "2", "class", "myint", "int", "pass", "assert", "utils", "get_value", "lst", "myint", "1", "2"], "doc_len": 26}
{"doc_id": "tests/test_utils.py::test_set_value", "file_path": "tests/test_utils.py", "class_name": null, "func_name": "test_set_value", "text": "文件路径: tests/test_utils.py\ndef test_set_value():\n    d = {}\n    utils.set_value(d, \"foo\", 42)\n    assert d == {\"foo\": 42}\n\n    d = {}\n    utils.set_value(d, \"foo.bar\", 42)\n    assert d == {\"foo\": {\"bar\": 42}}\n\n    d = {\"foo\": {}}\n    utils.set_value(d, \"foo.bar\", 42)\n    assert d == {\"foo\": {\"bar\": 42}}\n\n    d = {\"foo\": 42}\n    with pytest.raises(ValueError):\n        utils.set_value(d, \"foo.bar\", 42)\n", "tokens": ["tests", "test_utils", "py", "def", "test_set_value", "d", "utils", "set_value", "d", "foo", "42", "assert", "d", "foo", "42", "d", "utils", "set_value", "d", "foo", "bar", "42", "assert", "d", "foo", "bar", "42", "d", "foo", "utils", "set_value", "d", "foo", "bar", "42", "assert", "d", "foo", "bar", "42", "d", "foo", "42", "with", "pytest", "raises", "valueerror", "utils", "set_value", "d", "foo", "bar", "42"], "doc_len": 53}
{"doc_id": "tests/test_utils.py::test_is_keyed_tuple", "file_path": "tests/test_utils.py", "class_name": null, "func_name": "test_is_keyed_tuple", "text": "文件路径: tests/test_utils.py\ndef test_is_keyed_tuple():\n    Point = namedtuple(\"Point\", [\"x\", \"y\"])\n    p = Point(24, 42)\n    assert utils.is_keyed_tuple(p) is True\n    t = (24, 42)\n    assert utils.is_keyed_tuple(t) is False\n    d = {\"x\": 42, \"y\": 24}\n    assert utils.is_keyed_tuple(d) is False\n    s = \"xy\"\n    assert utils.is_keyed_tuple(s) is False\n    lst = [24, 42]\n    assert utils.is_keyed_tuple(lst) is False\n", "tokens": ["tests", "test_utils", "py", "def", "test_is_keyed_tuple", "point", "namedtuple", "point", "x", "y", "p", "point", "24", "42", "assert", "utils", "is_keyed_tuple", "p", "is", "true", "t", "24", "42", "assert", "utils", "is_keyed_tuple", "t", "is", "false", "d", "x", "42", "y", "24", "assert", "utils", "is_keyed_tuple", "d", "is", "false", "s", "xy", "assert", "utils", "is_keyed_tuple", "s", "is", "false", "lst", "24", "42", "assert", "utils", "is_keyed_tuple", "lst", "is", "false"], "doc_len": 57}
{"doc_id": "tests/test_utils.py::test_is_collection", "file_path": "tests/test_utils.py", "class_name": null, "func_name": "test_is_collection", "text": "文件路径: tests/test_utils.py\ndef test_is_collection():\n    assert utils.is_collection([1, \"foo\", {}]) is True\n    assert utils.is_collection((\"foo\", 2.3)) is True\n    assert utils.is_collection({\"foo\": \"bar\"}) is False\n", "tokens": ["tests", "test_utils", "py", "def", "test_is_collection", "assert", "utils", "is_collection", "1", "foo", "is", "true", "assert", "utils", "is_collection", "foo", "2", "3", "is", "true", "assert", "utils", "is_collection", "foo", "bar", "is", "false"], "doc_len": 27}
{"doc_id": "tests/test_utils.py::test_rfc_format", "file_path": "tests/test_utils.py", "class_name": null, "func_name": "test_rfc_format", "text": "文件路径: tests/test_utils.py\ndef test_rfc_format(value, expected):\n    assert utils.rfcformat(value) == expected\n", "tokens": ["tests", "test_utils", "py", "def", "test_rfc_format", "value", "expected", "assert", "utils", "rfcformat", "value", "expected"], "doc_len": 12}
{"doc_id": "tests/test_utils.py::test_isoformat", "file_path": "tests/test_utils.py", "class_name": null, "func_name": "test_isoformat", "text": "文件路径: tests/test_utils.py\ndef test_isoformat(value, expected):\n    assert utils.isoformat(value) == expected\n", "tokens": ["tests", "test_utils", "py", "def", "test_isoformat", "value", "expected", "assert", "utils", "isoformat", "value", "expected"], "doc_len": 12}
{"doc_id": "tests/test_utils.py::test_from_rfc", "file_path": "tests/test_utils.py", "class_name": null, "func_name": "test_from_rfc", "text": "文件路径: tests/test_utils.py\ndef test_from_rfc(value, expected):\n    result = utils.from_rfc(value)\n    assert type(result) == dt.datetime\n    assert result == expected\n", "tokens": ["tests", "test_utils", "py", "def", "test_from_rfc", "value", "expected", "result", "utils", "from_rfc", "value", "assert", "type", "result", "dt", "datetime", "assert", "result", "expected"], "doc_len": 19}
{"doc_id": "tests/test_utils.py::test_from_iso_datetime", "file_path": "tests/test_utils.py", "class_name": null, "func_name": "test_from_iso_datetime", "text": "文件路径: tests/test_utils.py\ndef test_from_iso_datetime(value, expected):\n    result = utils.from_iso_datetime(value)\n    assert type(result) == dt.datetime\n    assert result == expected\n", "tokens": ["tests", "test_utils", "py", "def", "test_from_iso_datetime", "value", "expected", "result", "utils", "from_iso_datetime", "value", "assert", "type", "result", "dt", "datetime", "assert", "result", "expected"], "doc_len": 19}
{"doc_id": "tests/test_utils.py::test_from_iso_time_with_microseconds", "file_path": "tests/test_utils.py", "class_name": null, "func_name": "test_from_iso_time_with_microseconds", "text": "文件路径: tests/test_utils.py\ndef test_from_iso_time_with_microseconds():\n    t = dt.time(1, 23, 45, 6789)\n    formatted = t.isoformat()\n    result = utils.from_iso_time(formatted)\n    assert type(result) == dt.time\n    assert_time_equal(result, t)\n", "tokens": ["tests", "test_utils", "py", "def", "test_from_iso_time_with_microseconds", "t", "dt", "time", "1", "23", "45", "6789", "formatted", "t", "isoformat", "result", "utils", "from_iso_time", "formatted", "assert", "type", "result", "dt", "time", "assert_time_equal", "result", "t"], "doc_len": 27}
{"doc_id": "tests/test_utils.py::test_from_iso_time_without_microseconds", "file_path": "tests/test_utils.py", "class_name": null, "func_name": "test_from_iso_time_without_microseconds", "text": "文件路径: tests/test_utils.py\ndef test_from_iso_time_without_microseconds():\n    t = dt.time(1, 23, 45)\n    formatted = t.isoformat()\n    result = utils.from_iso_time(formatted)\n    assert type(result) == dt.time\n    assert_time_equal(result, t)\n", "tokens": ["tests", "test_utils", "py", "def", "test_from_iso_time_without_microseconds", "t", "dt", "time", "1", "23", "45", "formatted", "t", "isoformat", "result", "utils", "from_iso_time", "formatted", "assert", "type", "result", "dt", "time", "assert_time_equal", "result", "t"], "doc_len": 26}
{"doc_id": "tests/test_utils.py::test_from_iso_date", "file_path": "tests/test_utils.py", "class_name": null, "func_name": "test_from_iso_date", "text": "文件路径: tests/test_utils.py\ndef test_from_iso_date():\n    d = dt.date(2014, 8, 21)\n    iso_date = d.isoformat()\n    result = utils.from_iso_date(iso_date)\n    assert type(result) == dt.date\n    assert_date_equal(result, d)\n", "tokens": ["tests", "test_utils", "py", "def", "test_from_iso_date", "d", "dt", "date", "2014", "8", "21", "iso_date", "d", "isoformat", "result", "utils", "from_iso_date", "iso_date", "assert", "type", "result", "dt", "date", "assert_date_equal", "result", "d"], "doc_len": 26}
{"doc_id": "tests/test_utils.py::test_get_func_args", "file_path": "tests/test_utils.py", "class_name": null, "func_name": "test_get_func_args", "text": "文件路径: tests/test_utils.py\ndef test_get_func_args():\n    def f1(foo, bar):\n        pass\n\n    f2 = partial(f1, \"baz\")\n\n    class F3:\n        def __call__(self, foo, bar):\n            pass\n\n    f3 = F3()\n\n    for func in [f1, f2, f3]:\n        assert utils.get_func_args(func) == [\"foo\", \"bar\"]\n", "tokens": ["tests", "test_utils", "py", "def", "test_get_func_args", "def", "f1", "foo", "bar", "pass", "f2", "partial", "f1", "baz", "class", "f3", "def", "__call__", "self", "foo", "bar", "pass", "f3", "f3", "for", "func", "in", "f1", "f2", "f3", "assert", "utils", "get_func_args", "func", "foo", "bar"], "doc_len": 36}
{"doc_id": "tests/test_utils.py::test_function_field_using_type_annotation", "file_path": "tests/test_utils.py", "class_name": null, "func_name": "test_function_field_using_type_annotation", "text": "文件路径: tests/test_utils.py\ndef test_function_field_using_type_annotation():\n    def get_split_words(value: str):  # noqa\n        return value.split(\";\")\n\n    class MySchema(Schema):\n        friends = fields.Function(deserialize=get_split_words)\n\n    data = {\"friends\": \"Clark;Alfred;Robin\"}\n    result = MySchema().load(data)\n    assert result == {\"friends\": [\"Clark\", \"Alfred\", \"Robin\"]}\n", "tokens": ["tests", "test_utils", "py", "def", "test_function_field_using_type_annotation", "def", "get_split_words", "value", "str", "noqa", "return", "value", "split", "class", "myschema", "schema", "friends", "fields", "function", "deserialize", "get_split_words", "data", "friends", "clark", "alfred", "robin", "result", "myschema", "load", "data", "assert", "result", "friends", "clark", "alfred", "robin"], "doc_len": 36}
{"doc_id": "tests/test_validate.py::test_url_absolute_valid", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_url_absolute_valid", "text": "文件路径: tests/test_validate.py\ndef test_url_absolute_valid(valid_url):\n    validator = validate.URL(relative=False)\n    assert validator(valid_url) == valid_url\n", "tokens": ["tests", "test_validate", "py", "def", "test_url_absolute_valid", "valid_url", "validator", "validate", "url", "relative", "false", "assert", "validator", "valid_url", "valid_url"], "doc_len": 15}
{"doc_id": "tests/test_validate.py::test_url_absolute_invalid", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_url_absolute_invalid", "text": "文件路径: tests/test_validate.py\ndef test_url_absolute_invalid(invalid_url):\n    validator = validate.URL(relative=False)\n    with pytest.raises(ValidationError):\n        validator(invalid_url)\n", "tokens": ["tests", "test_validate", "py", "def", "test_url_absolute_invalid", "invalid_url", "validator", "validate", "url", "relative", "false", "with", "pytest", "raises", "validationerror", "validator", "invalid_url"], "doc_len": 17}
{"doc_id": "tests/test_validate.py::test_url_relative_valid", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_url_relative_valid", "text": "文件路径: tests/test_validate.py\ndef test_url_relative_valid(valid_url):\n    validator = validate.URL(relative=True)\n    assert validator(valid_url) == valid_url\n", "tokens": ["tests", "test_validate", "py", "def", "test_url_relative_valid", "valid_url", "validator", "validate", "url", "relative", "true", "assert", "validator", "valid_url", "valid_url"], "doc_len": 15}
{"doc_id": "tests/test_validate.py::test_url_relative_invalid", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_url_relative_invalid", "text": "文件路径: tests/test_validate.py\ndef test_url_relative_invalid(invalid_url):\n    validator = validate.URL(relative=True)\n    with pytest.raises(ValidationError):\n        validator(invalid_url)\n", "tokens": ["tests", "test_validate", "py", "def", "test_url_relative_invalid", "invalid_url", "validator", "validate", "url", "relative", "true", "with", "pytest", "raises", "validationerror", "validator", "invalid_url"], "doc_len": 17}
{"doc_id": "tests/test_validate.py::test_url_dont_require_tld_valid", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_url_dont_require_tld_valid", "text": "文件路径: tests/test_validate.py\ndef test_url_dont_require_tld_valid(valid_url):\n    validator = validate.URL(require_tld=False)\n    assert validator(valid_url) == valid_url\n", "tokens": ["tests", "test_validate", "py", "def", "test_url_dont_require_tld_valid", "valid_url", "validator", "validate", "url", "require_tld", "false", "assert", "validator", "valid_url", "valid_url"], "doc_len": 15}
{"doc_id": "tests/test_validate.py::test_url_dont_require_tld_invalid", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_url_dont_require_tld_invalid", "text": "文件路径: tests/test_validate.py\ndef test_url_dont_require_tld_invalid(invalid_url):\n    validator = validate.URL(require_tld=False)\n    with pytest.raises(ValidationError):\n        validator(invalid_url)\n", "tokens": ["tests", "test_validate", "py", "def", "test_url_dont_require_tld_invalid", "invalid_url", "validator", "validate", "url", "require_tld", "false", "with", "pytest", "raises", "validationerror", "validator", "invalid_url"], "doc_len": 17}
{"doc_id": "tests/test_validate.py::test_url_custom_scheme", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_url_custom_scheme", "text": "文件路径: tests/test_validate.py\ndef test_url_custom_scheme():\n    validator = validate.URL()\n    # By default, ws not allowed\n    url = \"ws://test.test\"\n    with pytest.raises(ValidationError):\n        validator(url)\n\n    validator = validate.URL(schemes={\"http\", \"https\", \"ws\"})\n    assert validator(url) == url\n", "tokens": ["tests", "test_validate", "py", "def", "test_url_custom_scheme", "validator", "validate", "url", "by", "default", "ws", "not", "allowed", "url", "ws", "test", "test", "with", "pytest", "raises", "validationerror", "validator", "url", "validator", "validate", "url", "schemes", "http", "https", "ws", "assert", "validator", "url", "url"], "doc_len": 34}
{"doc_id": "tests/test_validate.py::test_url_relative_and_custom_schemes", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_url_relative_and_custom_schemes", "text": "文件路径: tests/test_validate.py\ndef test_url_relative_and_custom_schemes():\n    validator = validate.URL(relative=True)\n    # By default, ws not allowed\n    url = \"ws://test.test\"\n    with pytest.raises(ValidationError):\n        validator(url)\n\n    validator = validate.URL(relative=True, schemes={\"http\", \"https\", \"ws\"})\n    assert validator(url) == url\n", "tokens": ["tests", "test_validate", "py", "def", "test_url_relative_and_custom_schemes", "validator", "validate", "url", "relative", "true", "by", "default", "ws", "not", "allowed", "url", "ws", "test", "test", "with", "pytest", "raises", "validationerror", "validator", "url", "validator", "validate", "url", "relative", "true", "schemes", "http", "https", "ws", "assert", "validator", "url", "url"], "doc_len": 38}
{"doc_id": "tests/test_validate.py::test_url_custom_message", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_url_custom_message", "text": "文件路径: tests/test_validate.py\ndef test_url_custom_message():\n    validator = validate.URL(error=\"{input} ain't an URL\")\n    with pytest.raises(ValidationError, match=\"invalid ain't an URL\"):\n        validator(\"invalid\")\n", "tokens": ["tests", "test_validate", "py", "def", "test_url_custom_message", "validator", "validate", "url", "error", "input", "ain", "t", "an", "url", "with", "pytest", "raises", "validationerror", "match", "invalid", "ain", "t", "an", "url", "validator", "invalid"], "doc_len": 26}
{"doc_id": "tests/test_validate.py::test_url_repr", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_url_repr", "text": "文件路径: tests/test_validate.py\ndef test_url_repr():\n    assert repr(\n        validate.URL(relative=False, error=None)\n    ) == \"<URL(relative=False, error={!r})>\".format(\"Not a valid URL.\")\n    assert repr(\n        validate.URL(relative=True, error=\"foo\")\n    ) == \"<URL(relative=True, error={!r})>\".format(\"foo\")\n", "tokens": ["tests", "test_validate", "py", "def", "test_url_repr", "assert", "repr", "validate", "url", "relative", "false", "error", "none", "url", "relative", "false", "error", "r", "format", "not", "a", "valid", "url", "assert", "repr", "validate", "url", "relative", "true", "error", "foo", "url", "relative", "true", "error", "r", "format", "foo"], "doc_len": 38}
{"doc_id": "tests/test_validate.py::test_email_valid", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_email_valid", "text": "文件路径: tests/test_validate.py\ndef test_email_valid(valid_email):\n    validator = validate.Email()\n    assert validator(valid_email) == valid_email\n", "tokens": ["tests", "test_validate", "py", "def", "test_email_valid", "valid_email", "validator", "validate", "email", "assert", "validator", "valid_email", "valid_email"], "doc_len": 13}
{"doc_id": "tests/test_validate.py::test_email_invalid", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_email_invalid", "text": "文件路径: tests/test_validate.py\ndef test_email_invalid(invalid_email):\n    validator = validate.Email()\n    with pytest.raises(ValidationError):\n        validator(invalid_email)\n", "tokens": ["tests", "test_validate", "py", "def", "test_email_invalid", "invalid_email", "validator", "validate", "email", "with", "pytest", "raises", "validationerror", "validator", "invalid_email"], "doc_len": 15}
{"doc_id": "tests/test_validate.py::test_email_custom_message", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_email_custom_message", "text": "文件路径: tests/test_validate.py\ndef test_email_custom_message():\n    validator = validate.Email(error=\"{input} is not an email addy.\")\n    with pytest.raises(ValidationError, match=\"invalid is not an email addy.\"):\n        validator(\"invalid\")\n", "tokens": ["tests", "test_validate", "py", "def", "test_email_custom_message", "validator", "validate", "email", "error", "input", "is", "not", "an", "email", "addy", "with", "pytest", "raises", "validationerror", "match", "invalid", "is", "not", "an", "email", "addy", "validator", "invalid"], "doc_len": 28}
{"doc_id": "tests/test_validate.py::test_email_repr", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_email_repr", "text": "文件路径: tests/test_validate.py\ndef test_email_repr():\n    assert repr(validate.Email(error=None)) == \"<Email(error={!r})>\".format(\n        \"Not a valid email address.\"\n    )\n    assert repr(validate.Email(error=\"foo\")) == \"<Email(error={!r})>\".format(\"foo\")\n", "tokens": ["tests", "test_validate", "py", "def", "test_email_repr", "assert", "repr", "validate", "email", "error", "none", "email", "error", "r", "format", "not", "a", "valid", "email", "address", "assert", "repr", "validate", "email", "error", "foo", "email", "error", "r", "format", "foo"], "doc_len": 31}
{"doc_id": "tests/test_validate.py::test_range_min", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_range_min", "text": "文件路径: tests/test_validate.py\ndef test_range_min():\n    assert validate.Range(1, 2)(1) == 1\n    assert validate.Range(0)(1) == 1\n    assert validate.Range()(1) == 1\n    assert validate.Range(min_inclusive=False, max_inclusive=False)(1) == 1\n    assert validate.Range(1, 1)(1) == 1\n\n    with pytest.raises(ValidationError, match=\"Must be greater than or equal to 2\"):\n        validate.Range(2, 3)(1)\n    with pytest.raises(ValidationError, match=\"Must be greater than or equal to 2\"):\n        validate.Range(2)(1)\n    with pytest.raises(ValidationError, match=\"Must be greater than 1\"):\n        validate.Range(1, 2, min_inclusive=False, max_inclusive=True, error=None)(1)\n    with pytest.raises(ValidationError, match=\"less than 1\"):\n        validate.Range(1, 1, min_inclusive=True, max_inclusive=False, error=None)(1)\n", "tokens": ["tests", "test_validate", "py", "def", "test_range_min", "assert", "validate", "range", "1", "2", "1", "1", "assert", "validate", "range", "0", "1", "1", "assert", "validate", "range", "1", "1", "assert", "validate", "range", "min_inclusive", "false", "max_inclusive", "false", "1", "1", "assert", "validate", "range", "1", "1", "1", "1", "with", "pytest", "raises", "validationerror", "match", "must", "be", "greater", "than", "or", "equal", "to", "2", "validate", "range", "2", "3", "1", "with", "pytest", "raises", "validationerror", "match", "must", "be", "greater", "than", "or", "equal", "to", "2", "validate", "range", "2", "1", "with", "pytest", "raises", "validationerror", "match", "must", "be", "greater", "than", "1", "validate", "range", "1", "2", "min_inclusive", "false", "max_inclusive", "true", "error", "none", "1", "with", "pytest", "raises", "validationerror", "match", "less", "than", "1", "validate", "range", "1", "1", "min_inclusive", "true", "max_inclusive", "false", "error", "none", "1"], "doc_len": 114}
{"doc_id": "tests/test_validate.py::test_range_max", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_range_max", "text": "文件路径: tests/test_validate.py\ndef test_range_max():\n    assert validate.Range(1, 2)(2) == 2\n    assert validate.Range(None, 2)(2) == 2\n    assert validate.Range()(2) == 2\n    assert validate.Range(min_inclusive=False, max_inclusive=False)(2) == 2\n    assert validate.Range(2, 2)(2) == 2\n\n    with pytest.raises(ValidationError, match=\"less than or equal to 1\"):\n        validate.Range(0, 1)(2)\n    with pytest.raises(ValidationError, match=\"less than or equal to 1\"):\n        validate.Range(None, 1)(2)\n    with pytest.raises(ValidationError, match=\"less than 2\"):\n        validate.Range(1, 2, min_inclusive=True, max_inclusive=False, error=None)(2)\n    with pytest.raises(ValidationError, match=\"greater than 2\"):\n        validate.Range(2, 2, min_inclusive=False, max_inclusive=True, error=None)(2)\n", "tokens": ["tests", "test_validate", "py", "def", "test_range_max", "assert", "validate", "range", "1", "2", "2", "2", "assert", "validate", "range", "none", "2", "2", "2", "assert", "validate", "range", "2", "2", "assert", "validate", "range", "min_inclusive", "false", "max_inclusive", "false", "2", "2", "assert", "validate", "range", "2", "2", "2", "2", "with", "pytest", "raises", "validationerror", "match", "less", "than", "or", "equal", "to", "1", "validate", "range", "0", "1", "2", "with", "pytest", "raises", "validationerror", "match", "less", "than", "or", "equal", "to", "1", "validate", "range", "none", "1", "2", "with", "pytest", "raises", "validationerror", "match", "less", "than", "2", "validate", "range", "1", "2", "min_inclusive", "true", "max_inclusive", "false", "error", "none", "2", "with", "pytest", "raises", "validationerror", "match", "greater", "than", "2", "validate", "range", "2", "2", "min_inclusive", "false", "max_inclusive", "true", "error", "none", "2"], "doc_len": 110}
{"doc_id": "tests/test_validate.py::test_range_custom_message", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_range_custom_message", "text": "文件路径: tests/test_validate.py\ndef test_range_custom_message():\n    v = validate.Range(2, 3, error=\"{input} is not between {min} and {max}\")\n    with pytest.raises(ValidationError, match=\"1 is not between 2 and 3\"):\n        v(1)\n\n    v = validate.Range(2, None, error=\"{input} is less than {min}\")\n    with pytest.raises(ValidationError, match=\"1 is less than 2\"):\n        v(1)\n\n    v = validate.Range(None, 3, error=\"{input} is greater than {max}\")\n    with pytest.raises(ValidationError, match=\"4 is greater than 3\"):\n        v(4)\n", "tokens": ["tests", "test_validate", "py", "def", "test_range_custom_message", "v", "validate", "range", "2", "3", "error", "input", "is", "not", "between", "min", "and", "max", "with", "pytest", "raises", "validationerror", "match", "1", "is", "not", "between", "2", "and", "3", "v", "1", "v", "validate", "range", "2", "none", "error", "input", "is", "less", "than", "min", "with", "pytest", "raises", "validationerror", "match", "1", "is", "less", "than", "2", "v", "1", "v", "validate", "range", "none", "3", "error", "input", "is", "greater", "than", "max", "with", "pytest", "raises", "validationerror", "match", "4", "is", "greater", "than", "3", "v", "4"], "doc_len": 78}
{"doc_id": "tests/test_validate.py::test_range_repr", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_range_repr", "text": "文件路径: tests/test_validate.py\ndef test_range_repr():\n    assert (\n        repr(\n            validate.Range(\n                min=None, max=None, error=None, min_inclusive=True, max_inclusive=True\n            )\n        )\n        == \"<Range(min=None, max=None, min_inclusive=True, max_inclusive=True, error=None)>\"  # noqa: B950\n    )\n    assert repr(\n        validate.Range(\n            min=1, max=3, error=\"foo\", min_inclusive=False, max_inclusive=False\n        )\n    ) == \"<Range(min=1, max=3, min_inclusive=False, max_inclusive=False, error={!r})>\".format(  # noqa: B950\n        \"foo\"\n    )\n", "tokens": ["tests", "test_validate", "py", "def", "test_range_repr", "assert", "repr", "validate", "range", "min", "none", "max", "none", "error", "none", "min_inclusive", "true", "max_inclusive", "true", "range", "min", "none", "max", "none", "min_inclusive", "true", "max_inclusive", "true", "error", "none", "noqa", "b950", "assert", "repr", "validate", "range", "min", "1", "max", "3", "error", "foo", "min_inclusive", "false", "max_inclusive", "false", "range", "min", "1", "max", "3", "min_inclusive", "false", "max_inclusive", "false", "error", "r", "format", "noqa", "b950", "foo"], "doc_len": 61}
{"doc_id": "tests/test_validate.py::test_length_min", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_length_min", "text": "文件路径: tests/test_validate.py\ndef test_length_min():\n    assert validate.Length(3, 5)(\"foo\") == \"foo\"\n    assert validate.Length(3, 5)([1, 2, 3]) == [1, 2, 3]\n    assert validate.Length(0)(\"a\") == \"a\"\n    assert validate.Length(0)([1]) == [1]\n    assert validate.Length()(\"\") == \"\"\n    assert validate.Length()([]) == []\n    assert validate.Length(1, 1)(\"a\") == \"a\"\n    assert validate.Length(1, 1)([1]) == [1]\n\n    with pytest.raises(ValidationError):\n        validate.Length(4, 5)(\"foo\")\n    with pytest.raises(ValidationError):\n        validate.Length(4, 5)([1, 2, 3])\n    with pytest.raises(ValidationError):\n        validate.Length(5)(\"foo\")\n    with pytest.raises(ValidationError):\n        validate.Length(5)([1, 2, 3])\n", "tokens": ["tests", "test_validate", "py", "def", "test_length_min", "assert", "validate", "length", "3", "5", "foo", "foo", "assert", "validate", "length", "3", "5", "1", "2", "3", "1", "2", "3", "assert", "validate", "length", "0", "a", "a", "assert", "validate", "length", "0", "1", "1", "assert", "validate", "length", "assert", "validate", "length", "assert", "validate", "length", "1", "1", "a", "a", "assert", "validate", "length", "1", "1", "1", "1", "with", "pytest", "raises", "validationerror", "validate", "length", "4", "5", "foo", "with", "pytest", "raises", "validationerror", "validate", "length", "4", "5", "1", "2", "3", "with", "pytest", "raises", "validationerror", "validate", "length", "5", "foo", "with", "pytest", "raises", "validationerror", "validate", "length", "5", "1", "2", "3"], "doc_len": 93}
{"doc_id": "tests/test_validate.py::test_length_max", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_length_max", "text": "文件路径: tests/test_validate.py\ndef test_length_max():\n    assert validate.Length(1, 3)(\"foo\") == \"foo\"\n    assert validate.Length(1, 3)([1, 2, 3]) == [1, 2, 3]\n    assert validate.Length(None, 1)(\"a\") == \"a\"\n    assert validate.Length(None, 1)([1]) == [1]\n    assert validate.Length()(\"\") == \"\"\n    assert validate.Length()([]) == []\n    assert validate.Length(2, 2)(\"ab\") == \"ab\"\n    assert validate.Length(2, 2)([1, 2]) == [1, 2]\n\n    with pytest.raises(ValidationError):\n        validate.Length(1, 2)(\"foo\")\n    with pytest.raises(ValidationError):\n        validate.Length(1, 2)([1, 2, 3])\n    with pytest.raises(ValidationError):\n        validate.Length(None, 2)(\"foo\")\n    with pytest.raises(ValidationError):\n        validate.Length(None, 2)([1, 2, 3])\n", "tokens": ["tests", "test_validate", "py", "def", "test_length_max", "assert", "validate", "length", "1", "3", "foo", "foo", "assert", "validate", "length", "1", "3", "1", "2", "3", "1", "2", "3", "assert", "validate", "length", "none", "1", "a", "a", "assert", "validate", "length", "none", "1", "1", "1", "assert", "validate", "length", "assert", "validate", "length", "assert", "validate", "length", "2", "2", "ab", "ab", "assert", "validate", "length", "2", "2", "1", "2", "1", "2", "with", "pytest", "raises", "validationerror", "validate", "length", "1", "2", "foo", "with", "pytest", "raises", "validationerror", "validate", "length", "1", "2", "1", "2", "3", "with", "pytest", "raises", "validationerror", "validate", "length", "none", "2", "foo", "with", "pytest", "raises", "validationerror", "validate", "length", "none", "2", "1", "2", "3"], "doc_len": 99}
{"doc_id": "tests/test_validate.py::test_length_equal", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_length_equal", "text": "文件路径: tests/test_validate.py\ndef test_length_equal():\n    assert validate.Length(equal=3)(\"foo\") == \"foo\"\n    assert validate.Length(equal=3)([1, 2, 3]) == [1, 2, 3]\n    assert validate.Length(equal=None)(\"\") == \"\"\n    assert validate.Length(equal=None)([]) == []\n\n    with pytest.raises(ValidationError):\n        validate.Length(equal=2)(\"foo\")\n    with pytest.raises(ValidationError):\n        validate.Length(equal=2)([1, 2, 3])\n\n    with pytest.raises(ValueError):\n        validate.Length(1, None, equal=3)(\"foo\")\n    with pytest.raises(ValueError):\n        validate.Length(None, 5, equal=3)(\"foo\")\n    with pytest.raises(ValueError):\n        validate.Length(1, 5, equal=3)(\"foo\")\n", "tokens": ["tests", "test_validate", "py", "def", "test_length_equal", "assert", "validate", "length", "equal", "3", "foo", "foo", "assert", "validate", "length", "equal", "3", "1", "2", "3", "1", "2", "3", "assert", "validate", "length", "equal", "none", "assert", "validate", "length", "equal", "none", "with", "pytest", "raises", "validationerror", "validate", "length", "equal", "2", "foo", "with", "pytest", "raises", "validationerror", "validate", "length", "equal", "2", "1", "2", "3", "with", "pytest", "raises", "valueerror", "validate", "length", "1", "none", "equal", "3", "foo", "with", "pytest", "raises", "valueerror", "validate", "length", "none", "5", "equal", "3", "foo", "with", "pytest", "raises", "valueerror", "validate", "length", "1", "5", "equal", "3", "foo"], "doc_len": 86}
{"doc_id": "tests/test_validate.py::test_length_custom_message", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_length_custom_message", "text": "文件路径: tests/test_validate.py\ndef test_length_custom_message():\n    v = validate.Length(5, 6, error=\"{input} is not between {min} and {max}\")\n    with pytest.raises(ValidationError, match=\"foo is not between 5 and 6\"):\n        v(\"foo\")\n\n    v = validate.Length(5, None, error=\"{input} is shorter than {min}\")\n    with pytest.raises(ValidationError, match=\"foo is shorter than 5\"):\n        v(\"foo\")\n\n    v = validate.Length(None, 2, error=\"{input} is longer than {max}\")\n    with pytest.raises(ValidationError, match=\"foo is longer than 2\"):\n        v(\"foo\")\n\n    v = validate.Length(None, None, equal=4, error=\"{input} does not have {equal}\")\n    with pytest.raises(ValidationError, match=\"foo does not have 4\"):\n        v(\"foo\")\n", "tokens": ["tests", "test_validate", "py", "def", "test_length_custom_message", "v", "validate", "length", "5", "6", "error", "input", "is", "not", "between", "min", "and", "max", "with", "pytest", "raises", "validationerror", "match", "foo", "is", "not", "between", "5", "and", "6", "v", "foo", "v", "validate", "length", "5", "none", "error", "input", "is", "shorter", "than", "min", "with", "pytest", "raises", "validationerror", "match", "foo", "is", "shorter", "than", "5", "v", "foo", "v", "validate", "length", "none", "2", "error", "input", "is", "longer", "than", "max", "with", "pytest", "raises", "validationerror", "match", "foo", "is", "longer", "than", "2", "v", "foo", "v", "validate", "length", "none", "none", "equal", "4", "error", "input", "does", "not", "have", "equal", "with", "pytest", "raises", "validationerror", "match", "foo", "does", "not", "have", "4", "v", "foo"], "doc_len": 103}
{"doc_id": "tests/test_validate.py::test_length_repr", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_length_repr", "text": "文件路径: tests/test_validate.py\ndef test_length_repr():\n    assert (\n        repr(validate.Length(min=None, max=None, error=None, equal=None))\n        == \"<Length(min=None, max=None, equal=None, error=None)>\"\n    )\n    assert repr(\n        validate.Length(min=1, max=3, error=\"foo\", equal=None)\n    ) == \"<Length(min=1, max=3, equal=None, error={!r})>\".format(\"foo\")\n    assert repr(\n        validate.Length(min=None, max=None, error=\"foo\", equal=5)\n    ) == \"<Length(min=None, max=None, equal=5, error={!r})>\".format(\"foo\")\n", "tokens": ["tests", "test_validate", "py", "def", "test_length_repr", "assert", "repr", "validate", "length", "min", "none", "max", "none", "error", "none", "equal", "none", "length", "min", "none", "max", "none", "equal", "none", "error", "none", "assert", "repr", "validate", "length", "min", "1", "max", "3", "error", "foo", "equal", "none", "length", "min", "1", "max", "3", "equal", "none", "error", "r", "format", "foo", "assert", "repr", "validate", "length", "min", "none", "max", "none", "error", "foo", "equal", "5", "length", "min", "none", "max", "none", "equal", "5", "error", "r", "format", "foo"], "doc_len": 72}
{"doc_id": "tests/test_validate.py::test_equal", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_equal", "text": "文件路径: tests/test_validate.py\ndef test_equal():\n    assert validate.Equal(\"a\")(\"a\") == \"a\"\n    assert validate.Equal(1)(1) == 1\n    assert validate.Equal([1])([1]) == [1]\n\n    with pytest.raises(ValidationError):\n        validate.Equal(\"b\")(\"a\")\n    with pytest.raises(ValidationError):\n        validate.Equal(2)(1)\n    with pytest.raises(ValidationError):\n        validate.Equal([2])([1])\n", "tokens": ["tests", "test_validate", "py", "def", "test_equal", "assert", "validate", "equal", "a", "a", "a", "assert", "validate", "equal", "1", "1", "1", "assert", "validate", "equal", "1", "1", "1", "with", "pytest", "raises", "validationerror", "validate", "equal", "b", "a", "with", "pytest", "raises", "validationerror", "validate", "equal", "2", "1", "with", "pytest", "raises", "validationerror", "validate", "equal", "2", "1"], "doc_len": 47}
{"doc_id": "tests/test_validate.py::test_equal_custom_message", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_equal_custom_message", "text": "文件路径: tests/test_validate.py\ndef test_equal_custom_message():\n    v = validate.Equal(\"a\", error=\"{input} is not equal to {other}.\")\n    with pytest.raises(ValidationError, match=\"b is not equal to a.\"):\n        v(\"b\")\n", "tokens": ["tests", "test_validate", "py", "def", "test_equal_custom_message", "v", "validate", "equal", "a", "error", "input", "is", "not", "equal", "to", "other", "with", "pytest", "raises", "validationerror", "match", "b", "is", "not", "equal", "to", "a", "v", "b"], "doc_len": 29}
{"doc_id": "tests/test_validate.py::test_equal_repr", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_equal_repr", "text": "文件路径: tests/test_validate.py\ndef test_equal_repr():\n    assert repr(\n        validate.Equal(comparable=123, error=None)\n    ) == \"<Equal(comparable=123, error={!r})>\".format(\"Must be equal to {other}.\")\n    assert repr(\n        validate.Equal(comparable=123, error=\"foo\")\n    ) == \"<Equal(comparable=123, error={!r})>\".format(\"foo\")\n", "tokens": ["tests", "test_validate", "py", "def", "test_equal_repr", "assert", "repr", "validate", "equal", "comparable", "123", "error", "none", "equal", "comparable", "123", "error", "r", "format", "must", "be", "equal", "to", "other", "assert", "repr", "validate", "equal", "comparable", "123", "error", "foo", "equal", "comparable", "123", "error", "r", "format", "foo"], "doc_len": 39}
{"doc_id": "tests/test_validate.py::test_regexp_str", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_regexp_str", "text": "文件路径: tests/test_validate.py\ndef test_regexp_str():\n    assert validate.Regexp(r\"a\")(\"a\") == \"a\"\n    assert validate.Regexp(r\"\\w\")(\"_\") == \"_\"\n    assert validate.Regexp(r\"\\s\")(\" \") == \" \"\n    assert validate.Regexp(r\"1\")(\"1\") == \"1\"\n    assert validate.Regexp(r\"[0-9]+\")(\"1\") == \"1\"\n    assert validate.Regexp(r\"a\", re.IGNORECASE)(\"A\") == \"A\"\n\n    with pytest.raises(ValidationError):\n        validate.Regexp(r\"[0-9]+\")(\"a\")\n    with pytest.raises(ValidationError):\n        validate.Regexp(r\"[a-z]+\")(\"1\")\n    with pytest.raises(ValidationError):\n        validate.Regexp(r\"a\")(\"A\")\n", "tokens": ["tests", "test_validate", "py", "def", "test_regexp_str", "assert", "validate", "regexp", "r", "a", "a", "a", "assert", "validate", "regexp", "r", "w", "_", "_", "assert", "validate", "regexp", "r", "s", "assert", "validate", "regexp", "r", "1", "1", "1", "assert", "validate", "regexp", "r", "0", "9", "1", "1", "assert", "validate", "regexp", "r", "a", "re", "ignorecase", "a", "a", "with", "pytest", "raises", "validationerror", "validate", "regexp", "r", "0", "9", "a", "with", "pytest", "raises", "validationerror", "validate", "regexp", "r", "a", "z", "1", "with", "pytest", "raises", "validationerror", "validate", "regexp", "r", "a", "a"], "doc_len": 77}
{"doc_id": "tests/test_validate.py::test_regexp_compile", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_regexp_compile", "text": "文件路径: tests/test_validate.py\ndef test_regexp_compile():\n    assert validate.Regexp(re.compile(r\"a\"))(\"a\") == \"a\"\n    assert validate.Regexp(re.compile(r\"\\w\"))(\"_\") == \"_\"\n    assert validate.Regexp(re.compile(r\"\\s\"))(\" \") == \" \"\n    assert validate.Regexp(re.compile(r\"1\"))(\"1\") == \"1\"\n    assert validate.Regexp(re.compile(r\"[0-9]+\"))(\"1\") == \"1\"\n    assert validate.Regexp(re.compile(r\"a\", re.IGNORECASE))(\"A\") == \"A\"\n    assert validate.Regexp(re.compile(r\"a\", re.IGNORECASE), re.IGNORECASE)(\"A\") == \"A\"\n\n    with pytest.raises(ValidationError):\n        validate.Regexp(re.compile(r\"[0-9]+\"))(\"a\")\n    with pytest.raises(ValidationError):\n        validate.Regexp(re.compile(r\"[a-z]+\"))(\"1\")\n    with pytest.raises(ValidationError):\n        validate.Regexp(re.compile(r\"a\"))(\"A\")\n    with pytest.raises(ValidationError):\n        validate.Regexp(re.compile(r\"a\"), re.IGNORECASE)(\"A\")\n", "tokens": ["tests", "test_validate", "py", "def", "test_regexp_compile", "assert", "validate", "regexp", "re", "compile", "r", "a", "a", "a", "assert", "validate", "regexp", "re", "compile", "r", "w", "_", "_", "assert", "validate", "regexp", "re", "compile", "r", "s", "assert", "validate", "regexp", "re", "compile", "r", "1", "1", "1", "assert", "validate", "regexp", "re", "compile", "r", "0", "9", "1", "1", "assert", "validate", "regexp", "re", "compile", "r", "a", "re", "ignorecase", "a", "a", "assert", "validate", "regexp", "re", "compile", "r", "a", "re", "ignorecase", "re", "ignorecase", "a", "a", "with", "pytest", "raises", "validationerror", "validate", "regexp", "re", "compile", "r", "0", "9", "a", "with", "pytest", "raises", "validationerror", "validate", "regexp", "re", "compile", "r", "a", "z", "1", "with", "pytest", "raises", "validationerror", "validate", "regexp", "re", "compile", "r", "a", "a", "with", "pytest", "raises", "validationerror", "validate", "regexp", "re", "compile", "r", "a", "re", "ignorecase", "a"], "doc_len": 121}
{"doc_id": "tests/test_validate.py::test_regexp_custom_message", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_regexp_custom_message", "text": "文件路径: tests/test_validate.py\ndef test_regexp_custom_message():\n    rex = r\"[0-9]+\"\n    v = validate.Regexp(rex, error=\"{input} does not match {regex}\")\n    with pytest.raises(ValidationError, match=\"a does not match\"):\n        v(\"a\")\n", "tokens": ["tests", "test_validate", "py", "def", "test_regexp_custom_message", "rex", "r", "0", "9", "v", "validate", "regexp", "rex", "error", "input", "does", "not", "match", "regex", "with", "pytest", "raises", "validationerror", "match", "a", "does", "not", "match", "v", "a"], "doc_len": 30}
{"doc_id": "tests/test_validate.py::test_regexp_repr", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_regexp_repr", "text": "文件路径: tests/test_validate.py\ndef test_regexp_repr():\n    assert repr(\n        validate.Regexp(regex=\"abc\", flags=0, error=None)\n    ) == \"<Regexp(regex={!r}, error={!r})>\".format(\n        re.compile(\"abc\"), \"String does not match expected pattern.\"\n    )\n    assert repr(\n        validate.Regexp(regex=\"abc\", flags=re.IGNORECASE, error=\"foo\")\n    ) == \"<Regexp(regex={!r}, error={!r})>\".format(\n        re.compile(\"abc\", re.IGNORECASE), \"foo\"\n    )\n", "tokens": ["tests", "test_validate", "py", "def", "test_regexp_repr", "assert", "repr", "validate", "regexp", "regex", "abc", "flags", "0", "error", "none", "regexp", "regex", "r", "error", "r", "format", "re", "compile", "abc", "string", "does", "not", "match", "expected", "pattern", "assert", "repr", "validate", "regexp", "regex", "abc", "flags", "re", "ignorecase", "error", "foo", "regexp", "regex", "r", "error", "r", "format", "re", "compile", "abc", "re", "ignorecase", "foo"], "doc_len": 53}
{"doc_id": "tests/test_validate.py::test_predicate", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_predicate", "text": "文件路径: tests/test_validate.py\ndef test_predicate():\n    class Dummy:\n        def _true(self):\n            return True\n\n        def _false(self):\n            return False\n\n        def _list(self):\n            return [1, 2, 3]\n\n        def _empty(self):\n            return []\n\n        def _identity(self, arg):\n            return arg\n\n    d = Dummy()\n\n    assert validate.Predicate(\"_true\")(d) == d\n    assert validate.Predicate(\"_list\")(d) == d\n    assert validate.Predicate(\"_identity\", arg=True)(d) == d\n    assert validate.Predicate(\"_identity\", arg=1)(d) == d\n    assert validate.Predicate(\"_identity\", arg=\"abc\")(d) == d\n\n    with pytest.raises(ValidationError, match=\"Invalid input.\"):\n        validate.Predicate(\"_false\")(d)\n    with pytest.raises(ValidationError):\n        validate.Predicate(\"_empty\")(d)\n    with pytest.raises(ValidationError):\n        validate.Predicate(\"_identity\", arg=False)(d)\n    with pytest.raises(ValidationError):\n        validate.Predicate(\"_identity\", arg=0)(d)\n    with pytest.raises(ValidationError):\n        validate.Predicate(\"_identity\", arg=\"\")(d)\n", "tokens": ["tests", "test_validate", "py", "def", "test_predicate", "class", "dummy", "def", "_true", "self", "return", "true", "def", "_false", "self", "return", "false", "def", "_list", "self", "return", "1", "2", "3", "def", "_empty", "self", "return", "def", "_identity", "self", "arg", "return", "arg", "d", "dummy", "assert", "validate", "predicate", "_true", "d", "d", "assert", "validate", "predicate", "_list", "d", "d", "assert", "validate", "predicate", "_identity", "arg", "true", "d", "d", "assert", "validate", "predicate", "_identity", "arg", "1", "d", "d", "assert", "validate", "predicate", "_identity", "arg", "abc", "d", "d", "with", "pytest", "raises", "validationerror", "match", "invalid", "input", "validate", "predicate", "_false", "d", "with", "pytest", "raises", "validationerror", "validate", "predicate", "_empty", "d", "with", "pytest", "raises", "validationerror", "validate", "predicate", "_identity", "arg", "false", "d", "with", "pytest", "raises", "validationerror", "validate", "predicate", "_identity", "arg", "0", "d", "with", "pytest", "raises", "validationerror", "validate", "predicate", "_identity", "arg", "d"], "doc_len": 120}
{"doc_id": "tests/test_validate.py::test_predicate_custom_message", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_predicate_custom_message", "text": "文件路径: tests/test_validate.py\ndef test_predicate_custom_message():\n    class Dummy:\n        def _false(self):\n            return False\n\n        def __str__(self):\n            return \"Dummy\"\n\n    d = Dummy()\n    with pytest.raises(ValidationError, match=\"Dummy._false is invalid!\"):\n        validate.Predicate(\"_false\", error=\"{input}.{method} is invalid!\")(d)\n", "tokens": ["tests", "test_validate", "py", "def", "test_predicate_custom_message", "class", "dummy", "def", "_false", "self", "return", "false", "def", "__str__", "self", "return", "dummy", "d", "dummy", "with", "pytest", "raises", "validationerror", "match", "dummy", "_false", "is", "invalid", "validate", "predicate", "_false", "error", "input", "method", "is", "invalid", "d"], "doc_len": 37}
{"doc_id": "tests/test_validate.py::test_predicate_repr", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_predicate_repr", "text": "文件路径: tests/test_validate.py\ndef test_predicate_repr():\n    assert repr(\n        validate.Predicate(method=\"foo\", error=None)\n    ) == \"<Predicate(method={!r}, kwargs={!r}, error={!r})>\".format(\n        \"foo\", {}, \"Invalid input.\"\n    )\n    assert repr(\n        validate.Predicate(method=\"foo\", error=\"bar\", zoo=1)\n    ) == \"<Predicate(method={!r}, kwargs={!r}, error={!r})>\".format(\n        \"foo\", {\"zoo\": 1}, \"bar\"\n    )\n", "tokens": ["tests", "test_validate", "py", "def", "test_predicate_repr", "assert", "repr", "validate", "predicate", "method", "foo", "error", "none", "predicate", "method", "r", "kwargs", "r", "error", "r", "format", "foo", "invalid", "input", "assert", "repr", "validate", "predicate", "method", "foo", "error", "bar", "zoo", "1", "predicate", "method", "r", "kwargs", "r", "error", "r", "format", "foo", "zoo", "1", "bar"], "doc_len": 46}
{"doc_id": "tests/test_validate.py::test_noneof", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_noneof", "text": "文件路径: tests/test_validate.py\ndef test_noneof():\n    assert validate.NoneOf([1, 2, 3])(4) == 4\n    assert validate.NoneOf(\"abc\")(\"d\") == \"d\"\n    assert validate.NoneOf(\"\")([]) == []\n    assert validate.NoneOf([])(\"\") == \"\"\n    assert validate.NoneOf([])([]) == []\n    assert validate.NoneOf([1, 2, 3])(None) is None\n\n    with pytest.raises(ValidationError, match=\"Invalid input.\"):\n        validate.NoneOf([1, 2, 3])(3)\n    with pytest.raises(ValidationError):\n        validate.NoneOf(\"abc\")(\"c\")\n    with pytest.raises(ValidationError):\n        validate.NoneOf([1, 2, None])(None)\n    with pytest.raises(ValidationError):\n        validate.NoneOf(\"\")(\"\")\n", "tokens": ["tests", "test_validate", "py", "def", "test_noneof", "assert", "validate", "noneof", "1", "2", "3", "4", "4", "assert", "validate", "noneof", "abc", "d", "d", "assert", "validate", "noneof", "assert", "validate", "noneof", "assert", "validate", "noneof", "assert", "validate", "noneof", "1", "2", "3", "none", "is", "none", "with", "pytest", "raises", "validationerror", "match", "invalid", "input", "validate", "noneof", "1", "2", "3", "3", "with", "pytest", "raises", "validationerror", "validate", "noneof", "abc", "c", "with", "pytest", "raises", "validationerror", "validate", "noneof", "1", "2", "none", "none", "with", "pytest", "raises", "validationerror", "validate", "noneof"], "doc_len": 74}
{"doc_id": "tests/test_validate.py::test_noneof_custom_message", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_noneof_custom_message", "text": "文件路径: tests/test_validate.py\ndef test_noneof_custom_message():\n    with pytest.raises(ValidationError, match=\"<not valid>\"):\n        validate.NoneOf([1, 2], error=\"<not valid>\")(1)\n\n    none_of = validate.NoneOf([1, 2], error=\"{input} cannot be one of {values}\")\n    with pytest.raises(ValidationError, match=\"1 cannot be one of 1, 2\"):\n        none_of(1)\n", "tokens": ["tests", "test_validate", "py", "def", "test_noneof_custom_message", "with", "pytest", "raises", "validationerror", "match", "not", "valid", "validate", "noneof", "1", "2", "error", "not", "valid", "1", "none_of", "validate", "noneof", "1", "2", "error", "input", "cannot", "be", "one", "of", "values", "with", "pytest", "raises", "validationerror", "match", "1", "cannot", "be", "one", "of", "1", "2", "none_of", "1"], "doc_len": 46}
{"doc_id": "tests/test_validate.py::test_noneof_repr", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_noneof_repr", "text": "文件路径: tests/test_validate.py\ndef test_noneof_repr():\n    assert repr(\n        validate.NoneOf(iterable=[1, 2, 3], error=None)\n    ) == \"<NoneOf(iterable=[1, 2, 3], error={!r})>\".format(\"Invalid input.\")\n    assert repr(\n        validate.NoneOf(iterable=[1, 2, 3], error=\"foo\")\n    ) == \"<NoneOf(iterable=[1, 2, 3], error={!r})>\".format(\"foo\")\n", "tokens": ["tests", "test_validate", "py", "def", "test_noneof_repr", "assert", "repr", "validate", "noneof", "iterable", "1", "2", "3", "error", "none", "noneof", "iterable", "1", "2", "3", "error", "r", "format", "invalid", "input", "assert", "repr", "validate", "noneof", "iterable", "1", "2", "3", "error", "foo", "noneof", "iterable", "1", "2", "3", "error", "r", "format", "foo"], "doc_len": 44}
{"doc_id": "tests/test_validate.py::test_oneof", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_oneof", "text": "文件路径: tests/test_validate.py\ndef test_oneof():\n    assert validate.OneOf([1, 2, 3])(2) == 2\n    assert validate.OneOf(\"abc\")(\"b\") == \"b\"\n    assert validate.OneOf(\"\")(\"\") == \"\"\n    assert validate.OneOf(dict(a=0, b=1))(\"a\") == \"a\"\n    assert validate.OneOf((1, 2, None))(None) is None\n\n    with pytest.raises(ValidationError, match=\"Must be one of: 1, 2, 3.\"):\n        validate.OneOf([1, 2, 3])(4)\n    with pytest.raises(ValidationError):\n        validate.OneOf(\"abc\")(\"d\")\n    with pytest.raises(ValidationError):\n        validate.OneOf((1, 2, 3))(None)\n    with pytest.raises(ValidationError):\n        validate.OneOf([])([])\n    with pytest.raises(ValidationError):\n        validate.OneOf(())(())\n    with pytest.raises(ValidationError):\n        validate.OneOf(dict(a=0, b=1))(0)\n    with pytest.raises(ValidationError):\n        validate.OneOf(\"123\")(1)\n", "tokens": ["tests", "test_validate", "py", "def", "test_oneof", "assert", "validate", "oneof", "1", "2", "3", "2", "2", "assert", "validate", "oneof", "abc", "b", "b", "assert", "validate", "oneof", "assert", "validate", "oneof", "dict", "a", "0", "b", "1", "a", "a", "assert", "validate", "oneof", "1", "2", "none", "none", "is", "none", "with", "pytest", "raises", "validationerror", "match", "must", "be", "one", "of", "1", "2", "3", "validate", "oneof", "1", "2", "3", "4", "with", "pytest", "raises", "validationerror", "validate", "oneof", "abc", "d", "with", "pytest", "raises", "validationerror", "validate", "oneof", "1", "2", "3", "none", "with", "pytest", "raises", "validationerror", "validate", "oneof", "with", "pytest", "raises", "validationerror", "validate", "oneof", "with", "pytest", "raises", "validationerror", "validate", "oneof", "dict", "a", "0", "b", "1", "0", "with", "pytest", "raises", "validationerror", "validate", "oneof", "123", "1"], "doc_len": 109}
{"doc_id": "tests/test_validate.py::test_oneof_options", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_oneof_options", "text": "文件路径: tests/test_validate.py\ndef test_oneof_options():\n    oneof = validate.OneOf([1, 2, 3], [\"one\", \"two\", \"three\"])\n    expected = [(\"1\", \"one\"), (\"2\", \"two\"), (\"3\", \"three\")]\n    assert list(oneof.options()) == expected\n\n    oneof = validate.OneOf([1, 2, 3], [\"one\", \"two\"])\n    expected = [(\"1\", \"one\"), (\"2\", \"two\"), (\"3\", \"\")]\n    assert list(oneof.options()) == expected\n\n    oneof = validate.OneOf([1, 2], [\"one\", \"two\", \"three\"])\n    expected = [(\"1\", \"one\"), (\"2\", \"two\"), (\"\", \"three\")]\n    assert list(oneof.options()) == expected\n\n    oneof = validate.OneOf([1, 2])\n    expected = [(\"1\", \"\"), (\"2\", \"\")]\n    assert list(oneof.options()) == expected\n", "tokens": ["tests", "test_validate", "py", "def", "test_oneof_options", "oneof", "validate", "oneof", "1", "2", "3", "one", "two", "three", "expected", "1", "one", "2", "two", "3", "three", "assert", "list", "oneof", "options", "expected", "oneof", "validate", "oneof", "1", "2", "3", "one", "two", "expected", "1", "one", "2", "two", "3", "assert", "list", "oneof", "options", "expected", "oneof", "validate", "oneof", "1", "2", "one", "two", "three", "expected", "1", "one", "2", "two", "three", "assert", "list", "oneof", "options", "expected", "oneof", "validate", "oneof", "1", "2", "expected", "1", "2", "assert", "list", "oneof", "options", "expected"], "doc_len": 77}
{"doc_id": "tests/test_validate.py::test_oneof_text", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_oneof_text", "text": "文件路径: tests/test_validate.py\ndef test_oneof_text():\n    oneof = validate.OneOf([1, 2, 3], [\"one\", \"two\", \"three\"])\n    assert oneof.choices_text == \"1, 2, 3\"\n    assert oneof.labels_text == \"one, two, three\"\n\n    oneof = validate.OneOf([1], [\"one\"])\n    assert oneof.choices_text == \"1\"\n    assert oneof.labels_text == \"one\"\n\n    oneof = validate.OneOf(dict(a=0, b=1))\n    assert \", \".join(sorted(oneof.choices_text.split(\", \"))) == \"a, b\"\n    assert oneof.labels_text == \"\"\n", "tokens": ["tests", "test_validate", "py", "def", "test_oneof_text", "oneof", "validate", "oneof", "1", "2", "3", "one", "two", "three", "assert", "oneof", "choices_text", "1", "2", "3", "assert", "oneof", "labels_text", "one", "two", "three", "oneof", "validate", "oneof", "1", "one", "assert", "oneof", "choices_text", "1", "assert", "oneof", "labels_text", "one", "oneof", "validate", "oneof", "dict", "a", "0", "b", "1", "assert", "join", "sorted", "oneof", "choices_text", "split", "a", "b", "assert", "oneof", "labels_text"], "doc_len": 58}
{"doc_id": "tests/test_validate.py::test_oneof_custom_message", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_oneof_custom_message", "text": "文件路径: tests/test_validate.py\ndef test_oneof_custom_message():\n    oneof = validate.OneOf([1, 2, 3], error=\"{input} is not one of {choices}\")\n    expected = \"4 is not one of 1, 2, 3\"\n    with pytest.raises(ValidationError):\n        oneof(4)\n    assert expected in str(expected)\n\n    oneof = validate.OneOf(\n        [1, 2, 3], [\"one\", \"two\", \"three\"], error=\"{input} is not one of {labels}\"\n    )\n    expected = \"4 is not one of one, two, three\"\n    with pytest.raises(ValidationError):\n        oneof(4)\n    assert expected in str(expected)\n", "tokens": ["tests", "test_validate", "py", "def", "test_oneof_custom_message", "oneof", "validate", "oneof", "1", "2", "3", "error", "input", "is", "not", "one", "of", "choices", "expected", "4", "is", "not", "one", "of", "1", "2", "3", "with", "pytest", "raises", "validationerror", "oneof", "4", "assert", "expected", "in", "str", "expected", "oneof", "validate", "oneof", "1", "2", "3", "one", "two", "three", "error", "input", "is", "not", "one", "of", "labels", "expected", "4", "is", "not", "one", "of", "one", "two", "three", "with", "pytest", "raises", "validationerror", "oneof", "4", "assert", "expected", "in", "str", "expected"], "doc_len": 74}
{"doc_id": "tests/test_validate.py::test_oneof_repr", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_oneof_repr", "text": "文件路径: tests/test_validate.py\ndef test_oneof_repr():\n    assert repr(\n        validate.OneOf(choices=[1, 2, 3], labels=None, error=None)\n    ) == \"<OneOf(choices=[1, 2, 3], labels=[], error={!r})>\".format(\n        \"Must be one of: {choices}.\"\n    )\n    assert repr(\n        validate.OneOf(choices=[1, 2, 3], labels=[\"a\", \"b\", \"c\"], error=\"foo\")\n    ) == \"<OneOf(choices=[1, 2, 3], labels={!r}, error={!r})>\".format(\n        [\"a\", \"b\", \"c\"], \"foo\"\n    )\n", "tokens": ["tests", "test_validate", "py", "def", "test_oneof_repr", "assert", "repr", "validate", "oneof", "choices", "1", "2", "3", "labels", "none", "error", "none", "oneof", "choices", "1", "2", "3", "labels", "error", "r", "format", "must", "be", "one", "of", "choices", "assert", "repr", "validate", "oneof", "choices", "1", "2", "3", "labels", "a", "b", "c", "error", "foo", "oneof", "choices", "1", "2", "3", "labels", "r", "error", "r", "format", "a", "b", "c", "foo"], "doc_len": 59}
{"doc_id": "tests/test_validate.py::test_containsonly_in_list", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_containsonly_in_list", "text": "文件路径: tests/test_validate.py\ndef test_containsonly_in_list():\n    assert validate.ContainsOnly([])([]) == []\n    assert validate.ContainsOnly([1, 2, 3])([1]) == [1]\n    assert validate.ContainsOnly([1, 1, 2])([1, 1]) == [1, 1]\n    assert validate.ContainsOnly([1, 2, 3])([1, 2]) == [1, 2]\n    assert validate.ContainsOnly([1, 2, 3])([2, 1]) == [2, 1]\n    assert validate.ContainsOnly([1, 2, 3])([1, 2, 3]) == [1, 2, 3]\n    assert validate.ContainsOnly([1, 2, 3])([3, 1, 2]) == [3, 1, 2]\n    assert validate.ContainsOnly([1, 2, 3])([2, 3, 1]) == [2, 3, 1]\n    assert validate.ContainsOnly([1, 2, 3])([1, 2, 3, 1]) == [1, 2, 3, 1]\n    assert validate.ContainsOnly([1, 2, 3])([]) == []\n\n    with pytest.raises(\n        ValidationError,\n        match=\"One or more of the choices you made was not in: 1, 2, 3.\",\n    ):\n        validate.ContainsOnly([1, 2, 3])([4])\n    with pytest.raises(ValidationError):\n        validate.ContainsOnly([])([1])\n", "tokens": ["tests", "test_validate", "py", "def", "test_containsonly_in_list", "assert", "validate", "containsonly", "assert", "validate", "containsonly", "1", "2", "3", "1", "1", "assert", "validate", "containsonly", "1", "1", "2", "1", "1", "1", "1", "assert", "validate", "containsonly", "1", "2", "3", "1", "2", "1", "2", "assert", "validate", "containsonly", "1", "2", "3", "2", "1", "2", "1", "assert", "validate", "containsonly", "1", "2", "3", "1", "2", "3", "1", "2", "3", "assert", "validate", "containsonly", "1", "2", "3", "3", "1", "2", "3", "1", "2", "assert", "validate", "containsonly", "1", "2", "3", "2", "3", "1", "2", "3", "1", "assert", "validate", "containsonly", "1", "2", "3", "1", "2", "3", "1", "1", "2", "3", "1", "assert", "validate", "containsonly", "1", "2", "3", "with", "pytest", "raises", "validationerror", "match", "one", "or", "more", "of", "the", "choices", "you", "made", "was", "not", "in", "1", "2", "3", "validate", "containsonly", "1", "2", "3", "4", "with", "pytest", "raises", "validationerror", "validate", "containsonly", "1"], "doc_len": 134}
{"doc_id": "tests/test_validate.py::test_contains_only_unhashable_types", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_contains_only_unhashable_types", "text": "文件路径: tests/test_validate.py\ndef test_contains_only_unhashable_types():\n    assert validate.ContainsOnly([[1], [2], [3]])([[1]]) == [[1]]\n    assert validate.ContainsOnly([[1], [1], [2]])([[1], [1]]) == [[1], [1]]\n    assert validate.ContainsOnly([[1], [2], [3]])([[1], [2]]) == [[1], [2]]\n    assert validate.ContainsOnly([[1], [2], [3]])([[2], [1]]) == [[2], [1]]\n    assert validate.ContainsOnly([[1], [2], [3]])([[1], [2], [3]]) == [[1], [2], [3]]\n    assert validate.ContainsOnly([[1], [2], [3]])([[3], [1], [2]]) == [[3], [1], [2]]\n    assert validate.ContainsOnly([[1], [2], [3]])([[2], [3], [1]]) == [[2], [3], [1]]\n    assert validate.ContainsOnly([[1], [2], [3]])([]) == []\n\n    with pytest.raises(ValidationError):\n        validate.ContainsOnly([[1], [2], [3]])([[4]])\n    with pytest.raises(ValidationError):\n        validate.ContainsOnly([])([1])\n", "tokens": ["tests", "test_validate", "py", "def", "test_contains_only_unhashable_types", "assert", "validate", "containsonly", "1", "2", "3", "1", "1", "assert", "validate", "containsonly", "1", "1", "2", "1", "1", "1", "1", "assert", "validate", "containsonly", "1", "2", "3", "1", "2", "1", "2", "assert", "validate", "containsonly", "1", "2", "3", "2", "1", "2", "1", "assert", "validate", "containsonly", "1", "2", "3", "1", "2", "3", "1", "2", "3", "assert", "validate", "containsonly", "1", "2", "3", "3", "1", "2", "3", "1", "2", "assert", "validate", "containsonly", "1", "2", "3", "2", "3", "1", "2", "3", "1", "assert", "validate", "containsonly", "1", "2", "3", "with", "pytest", "raises", "validationerror", "validate", "containsonly", "1", "2", "3", "4", "with", "pytest", "raises", "validationerror", "validate", "containsonly", "1"], "doc_len": 102}
{"doc_id": "tests/test_validate.py::test_containsonly_in_tuple", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_containsonly_in_tuple", "text": "文件路径: tests/test_validate.py\ndef test_containsonly_in_tuple():\n    assert validate.ContainsOnly(())(()) == ()\n    assert validate.ContainsOnly((1, 2, 3))((1,)) == (1,)\n    assert validate.ContainsOnly((1, 1, 2))((1, 1)) == (1, 1)\n    assert validate.ContainsOnly((1, 2, 3))((1, 2)) == (1, 2)\n    assert validate.ContainsOnly((1, 2, 3))((2, 1)) == (2, 1)\n    assert validate.ContainsOnly((1, 2, 3))((1, 2, 3)) == (1, 2, 3)\n    assert validate.ContainsOnly((1, 2, 3))((3, 1, 2)) == (3, 1, 2)\n    assert validate.ContainsOnly((1, 2, 3))((2, 3, 1)) == (2, 3, 1)\n    assert validate.ContainsOnly((1, 2, 3))(()) == tuple()\n    with pytest.raises(ValidationError):\n        validate.ContainsOnly((1, 2, 3))((4,))\n    with pytest.raises(ValidationError):\n        validate.ContainsOnly(())((1,))\n", "tokens": ["tests", "test_validate", "py", "def", "test_containsonly_in_tuple", "assert", "validate", "containsonly", "assert", "validate", "containsonly", "1", "2", "3", "1", "1", "assert", "validate", "containsonly", "1", "1", "2", "1", "1", "1", "1", "assert", "validate", "containsonly", "1", "2", "3", "1", "2", "1", "2", "assert", "validate", "containsonly", "1", "2", "3", "2", "1", "2", "1", "assert", "validate", "containsonly", "1", "2", "3", "1", "2", "3", "1", "2", "3", "assert", "validate", "containsonly", "1", "2", "3", "3", "1", "2", "3", "1", "2", "assert", "validate", "containsonly", "1", "2", "3", "2", "3", "1", "2", "3", "1", "assert", "validate", "containsonly", "1", "2", "3", "tuple", "with", "pytest", "raises", "validationerror", "validate", "containsonly", "1", "2", "3", "4", "with", "pytest", "raises", "validationerror", "validate", "containsonly", "1"], "doc_len": 106}
{"doc_id": "tests/test_validate.py::test_contains_only_in_string", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_contains_only_in_string", "text": "文件路径: tests/test_validate.py\ndef test_contains_only_in_string():\n    assert validate.ContainsOnly(\"\")(\"\") == \"\"\n    assert validate.ContainsOnly(\"abc\")(\"a\") == \"a\"\n    assert validate.ContainsOnly(\"aab\")(\"aa\") == \"aa\"\n    assert validate.ContainsOnly(\"abc\")(\"ab\") == \"ab\"\n    assert validate.ContainsOnly(\"abc\")(\"ba\") == \"ba\"\n    assert validate.ContainsOnly(\"abc\")(\"abc\") == \"abc\"\n    assert validate.ContainsOnly(\"abc\")(\"cab\") == \"cab\"\n    assert validate.ContainsOnly(\"abc\")(\"bca\") == \"bca\"\n    assert validate.ContainsOnly(\"abc\")(\"\") == \"\"\n\n    with pytest.raises(ValidationError):\n        validate.ContainsOnly(\"abc\")(\"d\")\n    with pytest.raises(ValidationError):\n        validate.ContainsOnly(\"\")(\"a\")\n", "tokens": ["tests", "test_validate", "py", "def", "test_contains_only_in_string", "assert", "validate", "containsonly", "assert", "validate", "containsonly", "abc", "a", "a", "assert", "validate", "containsonly", "aab", "aa", "aa", "assert", "validate", "containsonly", "abc", "ab", "ab", "assert", "validate", "containsonly", "abc", "ba", "ba", "assert", "validate", "containsonly", "abc", "abc", "abc", "assert", "validate", "containsonly", "abc", "cab", "cab", "assert", "validate", "containsonly", "abc", "bca", "bca", "assert", "validate", "containsonly", "abc", "with", "pytest", "raises", "validationerror", "validate", "containsonly", "abc", "d", "with", "pytest", "raises", "validationerror", "validate", "containsonly", "a"], "doc_len": 69}
{"doc_id": "tests/test_validate.py::test_containsonly_custom_message", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_containsonly_custom_message", "text": "文件路径: tests/test_validate.py\ndef test_containsonly_custom_message():\n    containsonly = validate.ContainsOnly(\n        [1, 2, 3], error=\"{input} is not one of {choices}\"\n    )\n    expected = \"4, 5 is not one of 1, 2, 3\"\n    with pytest.raises(ValidationError):\n        containsonly([4, 5])\n    assert expected in str(expected)\n\n    containsonly = validate.ContainsOnly(\n        [1, 2, 3], [\"one\", \"two\", \"three\"], error=\"{input} is not one of {labels}\"\n    )\n    expected = \"4, 5 is not one of one, two, three\"\n    with pytest.raises(ValidationError):\n        containsonly([4, 5])\n    assert expected in str(expected)\n", "tokens": ["tests", "test_validate", "py", "def", "test_containsonly_custom_message", "containsonly", "validate", "containsonly", "1", "2", "3", "error", "input", "is", "not", "one", "of", "choices", "expected", "4", "5", "is", "not", "one", "of", "1", "2", "3", "with", "pytest", "raises", "validationerror", "containsonly", "4", "5", "assert", "expected", "in", "str", "expected", "containsonly", "validate", "containsonly", "1", "2", "3", "one", "two", "three", "error", "input", "is", "not", "one", "of", "labels", "expected", "4", "5", "is", "not", "one", "of", "one", "two", "three", "with", "pytest", "raises", "validationerror", "containsonly", "4", "5", "assert", "expected", "in", "str", "expected"], "doc_len": 78}
{"doc_id": "tests/test_validate.py::test_containsonly_repr", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_containsonly_repr", "text": "文件路径: tests/test_validate.py\ndef test_containsonly_repr():\n    assert repr(\n        validate.ContainsOnly(choices=[1, 2, 3], labels=None, error=None)\n    ) == \"<ContainsOnly(choices=[1, 2, 3], labels=[], error={!r})>\".format(\n        \"One or more of the choices you made was not in: {choices}.\"\n    )\n    assert repr(\n        validate.ContainsOnly(choices=[1, 2, 3], labels=[\"a\", \"b\", \"c\"], error=\"foo\")\n    ) == \"<ContainsOnly(choices=[1, 2, 3], labels={!r}, error={!r})>\".format(\n        [\"a\", \"b\", \"c\"], \"foo\"\n    )\n", "tokens": ["tests", "test_validate", "py", "def", "test_containsonly_repr", "assert", "repr", "validate", "containsonly", "choices", "1", "2", "3", "labels", "none", "error", "none", "containsonly", "choices", "1", "2", "3", "labels", "error", "r", "format", "one", "or", "more", "of", "the", "choices", "you", "made", "was", "not", "in", "choices", "assert", "repr", "validate", "containsonly", "choices", "1", "2", "3", "labels", "a", "b", "c", "error", "foo", "containsonly", "choices", "1", "2", "3", "labels", "r", "error", "r", "format", "a", "b", "c", "foo"], "doc_len": 66}
