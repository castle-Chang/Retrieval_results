{"doc_id": "setup.py::find_version", "file_path": "setup.py", "class_name": null, "func_name": "find_version", "text": "文件路径: setup.py\ndef find_version(fname):\n    \"\"\"Attempts to find the version number in the file names fname.\n    Raises RuntimeError if not found.\n    \"\"\"\n    version = ''\n    with open(fname, 'r') as fp:\n        reg = re.compile(r'__version__ = [\\'\"]([^\\'\"]*)[\\'\"]')\n        for line in fp:\n            m = reg.match(line)\n            if m:\n                version = m.group(1)\n                break\n    if not version:\n        raise RuntimeError('Cannot find version information')\n    return version\n", "tokens": ["setup", "py", "def", "find_version", "fname", "attempts", "to", "find", "the", "version", "number", "in", "the", "file", "names", "fname", "raises", "runtimeerror", "if", "not", "found", "version", "with", "open", "fname", "r", "as", "fp", "reg", "re", "compile", "r", "__version__", "for", "line", "in", "fp", "m", "reg", "match", "line", "if", "m", "version", "m", "group", "1", "break", "if", "not", "version", "raise", "runtimeerror", "cannot", "find", "version", "information", "return", "version"], "doc_len": 59}
{"doc_id": "setup.py::read", "file_path": "setup.py", "class_name": null, "func_name": "read", "text": "文件路径: setup.py\ndef read(fname):\n    with open(fname) as fp:\n        content = fp.read()\n    return content\n", "tokens": ["setup", "py", "def", "read", "fname", "with", "open", "fname", "as", "fp", "content", "fp", "read", "return", "content"], "doc_len": 15}
{"doc_id": "docs/conf.py::setup", "file_path": "docs/conf.py", "class_name": null, "func_name": "setup", "text": "文件路径: docs/conf.py\ndef setup(app):\n    app.add_stylesheet('css/versionwarning.css')\n", "tokens": ["docs", "conf", "py", "def", "setup", "app", "app", "add_stylesheet", "css", "versionwarning", "css"], "doc_len": 11}
{"doc_id": "examples/flask_example.py::AuthorSchema.format_name", "file_path": "examples/flask_example.py", "class_name": "AuthorSchema", "func_name": "format_name", "text": "文件路径: examples/flask_example.py, 类名: AuthorSchema\n    def format_name(self, author):\n        return \"{}, {}\".format(author.last, author.first)\n", "tokens": ["examples", "flask_example", "py", "authorschema", "def", "format_name", "self", "author", "return", "format", "author", "last", "author", "first"], "doc_len": 14}
{"doc_id": "examples/flask_example.py::must_not_be_blank", "file_path": "examples/flask_example.py", "class_name": null, "func_name": "must_not_be_blank", "text": "文件路径: examples/flask_example.py\ndef must_not_be_blank(data):\n    if not data:\n        raise ValidationError('Data not provided.')\n", "tokens": ["examples", "flask_example", "py", "def", "must_not_be_blank", "data", "if", "not", "data", "raise", "validationerror", "data", "not", "provided"], "doc_len": 14}
{"doc_id": "examples/flask_example.py::QuoteSchema.process_author", "file_path": "examples/flask_example.py", "class_name": "QuoteSchema", "func_name": "process_author", "text": "文件路径: examples/flask_example.py, 类名: QuoteSchema\n    def process_author(self, data):\n        author_name = data.get('author')\n        if author_name:\n            first, last = author_name.split(' ')\n            author_dict = dict(first=first, last=last)\n        else:\n            author_dict = {}\n        data['author'] = author_dict\n        return data\n", "tokens": ["examples", "flask_example", "py", "quoteschema", "def", "process_author", "self", "data", "author_name", "data", "get", "author", "if", "author_name", "first", "last", "author_name", "split", "author_dict", "dict", "first", "first", "last", "last", "else", "author_dict", "data", "author", "author_dict", "return", "data"], "doc_len": 31}
{"doc_id": "examples/flask_example.py::get_authors", "file_path": "examples/flask_example.py", "class_name": null, "func_name": "get_authors", "text": "文件路径: examples/flask_example.py\ndef get_authors():\n    authors = Author.query.all()\n    # Serialize the queryset\n    result = authors_schema.dump(authors)\n    return jsonify({'authors': result.data})\n", "tokens": ["examples", "flask_example", "py", "def", "get_authors", "authors", "author", "query", "all", "serialize", "the", "queryset", "result", "authors_schema", "dump", "authors", "return", "jsonify", "authors", "result", "data"], "doc_len": 21}
{"doc_id": "examples/flask_example.py::get_author", "file_path": "examples/flask_example.py", "class_name": null, "func_name": "get_author", "text": "文件路径: examples/flask_example.py\ndef get_author(pk):\n    try:\n        author = Author.query.get(pk)\n    except IntegrityError:\n        return jsonify({\"message\": \"Author could not be found.\"}), 400\n    author_result = author_schema.dump(author)\n    quotes_result = quotes_schema.dump(author.quotes.all())\n    return jsonify({'author': author_result.data, 'quotes': quotes_result.data})\n", "tokens": ["examples", "flask_example", "py", "def", "get_author", "pk", "try", "author", "author", "query", "get", "pk", "except", "integrityerror", "return", "jsonify", "message", "author", "could", "not", "be", "found", "400", "author_result", "author_schema", "dump", "author", "quotes_result", "quotes_schema", "dump", "author", "quotes", "all", "return", "jsonify", "author", "author_result", "data", "quotes", "quotes_result", "data"], "doc_len": 41}
{"doc_id": "examples/flask_example.py::get_quotes", "file_path": "examples/flask_example.py", "class_name": null, "func_name": "get_quotes", "text": "文件路径: examples/flask_example.py\ndef get_quotes():\n    quotes = Quote.query.all()\n    result = quotes_schema.dump(quotes)\n    return jsonify({\"quotes\": result.data})\n", "tokens": ["examples", "flask_example", "py", "def", "get_quotes", "quotes", "quote", "query", "all", "result", "quotes_schema", "dump", "quotes", "return", "jsonify", "quotes", "result", "data"], "doc_len": 18}
{"doc_id": "examples/flask_example.py::get_quote", "file_path": "examples/flask_example.py", "class_name": null, "func_name": "get_quote", "text": "文件路径: examples/flask_example.py\ndef get_quote(pk):\n    try:\n        quote = Quote.query.get(pk)\n    except IntegrityError:\n        return jsonify({\"message\": \"Quote could not be found.\"}), 400\n    result = quote_schema.dump(quote)\n    return jsonify({\"quote\": result.data})\n", "tokens": ["examples", "flask_example", "py", "def", "get_quote", "pk", "try", "quote", "quote", "query", "get", "pk", "except", "integrityerror", "return", "jsonify", "message", "quote", "could", "not", "be", "found", "400", "result", "quote_schema", "dump", "quote", "return", "jsonify", "quote", "result", "data"], "doc_len": 32}
{"doc_id": "examples/flask_example.py::new_quote", "file_path": "examples/flask_example.py", "class_name": null, "func_name": "new_quote", "text": "文件路径: examples/flask_example.py\ndef new_quote():\n    json_data = request.get_json()\n    if not json_data:\n        return jsonify({'message': 'No input data provided'}), 400\n    # Validate and deserialize input\n    data, errors = quote_schema.load(json_data)\n    if errors:\n        return jsonify(errors), 422\n    first, last = data['author']['first'], data['author']['last']\n    author = Author.query.filter_by(first=first, last=last).first()\n    if author is None:\n        # Create a new author\n        author = Author(first=first, last=last)\n        db.session.add(author)\n    # Create new quote\n    quote = Quote(\n        content=data['content'],\n        author=author,\n        posted_at=datetime.datetime.utcnow()\n    )\n    db.session.add(quote)\n    db.session.commit()\n    result = quote_schema.dump(Quote.query.get(quote.id))\n    return jsonify({\"message\": \"Created new quote.\",\n                    \"quote\": result.data})\n", "tokens": ["examples", "flask_example", "py", "def", "new_quote", "json_data", "request", "get_json", "if", "not", "json_data", "return", "jsonify", "message", "no", "input", "data", "provided", "400", "validate", "and", "deserialize", "input", "data", "errors", "quote_schema", "load", "json_data", "if", "errors", "return", "jsonify", "errors", "422", "first", "last", "data", "author", "first", "data", "author", "last", "author", "author", "query", "filter_by", "first", "first", "last", "last", "first", "if", "author", "is", "none", "create", "a", "new", "author", "author", "author", "first", "first", "last", "last", "db", "session", "add", "author", "create", "new", "quote", "quote", "quote", "content", "data", "content", "author", "author", "posted_at", "datetime", "datetime", "utcnow", "db", "session", "add", "quote", "db", "session", "commit", "result", "quote_schema", "dump", "quote", "query", "get", "quote", "id", "return", "jsonify", "message", "created", "new", "quote", "quote", "result", "data"], "doc_len": 107}
{"doc_id": "examples/peewee_example.py::create_tables", "file_path": "examples/peewee_example.py", "class_name": null, "func_name": "create_tables", "text": "文件路径: examples/peewee_example.py\ndef create_tables():\n    db.connect()\n    User.create_table(True)\n    Todo.create_table(True)\n", "tokens": ["examples", "peewee_example", "py", "def", "create_tables", "db", "connect", "user", "create_table", "true", "todo", "create_table", "true"], "doc_len": 13}
{"doc_id": "examples/peewee_example.py::UserSchema.process_input", "file_path": "examples/peewee_example.py", "class_name": "UserSchema", "func_name": "process_input", "text": "文件路径: examples/peewee_example.py, 类名: UserSchema\n    def process_input(self, data):\n        data['email'] = data['email'].lower().strip()\n        return data\n", "tokens": ["examples", "peewee_example", "py", "userschema", "def", "process_input", "self", "data", "data", "email", "data", "email", "lower", "strip", "return", "data"], "doc_len": 16}
{"doc_id": "examples/peewee_example.py::UserSchema.wrap", "file_path": "examples/peewee_example.py", "class_name": "UserSchema", "func_name": "wrap", "text": "文件路径: examples/peewee_example.py, 类名: UserSchema\n    def wrap(self, data, many):\n        key = 'users' if many else 'user'\n        return {\n            key: data\n        }\n", "tokens": ["examples", "peewee_example", "py", "userschema", "def", "wrap", "self", "data", "many", "key", "users", "if", "many", "else", "user", "return", "key", "data"], "doc_len": 18}
{"doc_id": "examples/peewee_example.py::TodoSchema.wrap", "file_path": "examples/peewee_example.py", "class_name": "TodoSchema", "func_name": "wrap", "text": "文件路径: examples/peewee_example.py, 类名: TodoSchema\n    def wrap(self, data, many):\n        key = 'todos' if many else 'todo'\n        return {\n            key: data\n        }\n", "tokens": ["examples", "peewee_example", "py", "todoschema", "def", "wrap", "self", "data", "many", "key", "todos", "if", "many", "else", "todo", "return", "key", "data"], "doc_len": 18}
{"doc_id": "examples/peewee_example.py::TodoSchema.make_object", "file_path": "examples/peewee_example.py", "class_name": "TodoSchema", "func_name": "make_object", "text": "文件路径: examples/peewee_example.py, 类名: TodoSchema\n    def make_object(self, data):\n        if not data:\n            return None\n        return Todo(content=data['content'],\n                    is_done=data['is_done'],\n                    posted_on=dt.datetime.utcnow())\n", "tokens": ["examples", "peewee_example", "py", "todoschema", "def", "make_object", "self", "data", "if", "not", "data", "return", "none", "return", "todo", "content", "data", "content", "is_done", "data", "is_done", "posted_on", "dt", "datetime", "utcnow"], "doc_len": 25}
{"doc_id": "examples/peewee_example.py::check_auth", "file_path": "examples/peewee_example.py", "class_name": null, "func_name": "check_auth", "text": "文件路径: examples/peewee_example.py\ndef check_auth(email, password):\n    \"\"\"Check if a username/password combination is valid.\n    \"\"\"\n    try:\n        user = User.get(User.email == email)\n    except User.DoesNotExist:\n        return False\n    return password == user.password\n", "tokens": ["examples", "peewee_example", "py", "def", "check_auth", "email", "password", "check", "if", "a", "username", "password", "combination", "is", "valid", "try", "user", "user", "get", "user", "email", "email", "except", "user", "doesnotexist", "return", "false", "return", "password", "user", "password"], "doc_len": 31}
{"doc_id": "examples/peewee_example.py::requires_auth", "file_path": "examples/peewee_example.py", "class_name": null, "func_name": "requires_auth", "text": "文件路径: examples/peewee_example.py\ndef requires_auth(f):\n    @wraps(f)\n    def decorated(*args, **kwargs):\n        auth = request.authorization\n        if not auth or not check_auth(auth.username, auth.password):\n            resp = jsonify({\"message\": \"Please authenticate.\"})\n            resp.status_code = 401\n            resp.headers['WWW-Authenticate'] = 'Basic realm=\"Example\"'\n            return resp\n        kwargs['user'] = User.get(User.email == auth.username)\n        return f(*args, **kwargs)\n    return decorated\n", "tokens": ["examples", "peewee_example", "py", "def", "requires_auth", "f", "wraps", "f", "def", "decorated", "args", "kwargs", "auth", "request", "authorization", "if", "not", "auth", "or", "not", "check_auth", "auth", "username", "auth", "password", "resp", "jsonify", "message", "please", "authenticate", "resp", "status_code", "401", "resp", "headers", "www", "authenticate", "basic", "realm", "example", "return", "resp", "kwargs", "user", "user", "get", "user", "email", "auth", "username", "return", "f", "args", "kwargs", "return", "decorated"], "doc_len": 56}
{"doc_id": "examples/peewee_example.py::before_request", "file_path": "examples/peewee_example.py", "class_name": null, "func_name": "before_request", "text": "文件路径: examples/peewee_example.py\ndef before_request():\n    g.db = db\n    g.db.connect()\n", "tokens": ["examples", "peewee_example", "py", "def", "before_request", "g", "db", "db", "g", "db", "connect"], "doc_len": 11}
{"doc_id": "examples/peewee_example.py::after_request", "file_path": "examples/peewee_example.py", "class_name": null, "func_name": "after_request", "text": "文件路径: examples/peewee_example.py\ndef after_request(response):\n    g.db.close()\n    return response\n", "tokens": ["examples", "peewee_example", "py", "def", "after_request", "response", "g", "db", "close", "return", "response"], "doc_len": 11}
{"doc_id": "examples/peewee_example.py::register", "file_path": "examples/peewee_example.py", "class_name": null, "func_name": "register", "text": "文件路径: examples/peewee_example.py\ndef register():\n    json_input = request.get_json()\n    data, errors = user_schema.load(json_input)\n    if errors:\n        return jsonify({'errors': errors}), 422\n    try:  # Use get to see if user already to exists\n        User.get(User.email == data['email'])\n    except User.DoesNotExist:\n        user = User.create(email=data['email'], joined_on=dt.datetime.now(),\n                            password=data['password'])\n        message = \"Successfully created user: {0}\".format(user.email)\n    else:\n        return jsonify({'errors': 'That email address is already in the database'}), 400\n\n    data, _ = user_schema.dump(user)\n    data['message'] = message\n    return jsonify(data), 201\n", "tokens": ["examples", "peewee_example", "py", "def", "register", "json_input", "request", "get_json", "data", "errors", "user_schema", "load", "json_input", "if", "errors", "return", "jsonify", "errors", "errors", "422", "try", "use", "get", "to", "see", "if", "user", "already", "to", "exists", "user", "get", "user", "email", "data", "email", "except", "user", "doesnotexist", "user", "user", "create", "email", "data", "email", "joined_on", "dt", "datetime", "now", "password", "data", "password", "message", "successfully", "created", "user", "0", "format", "user", "email", "else", "return", "jsonify", "errors", "that", "email", "address", "is", "already", "in", "the", "database", "400", "data", "_", "user_schema", "dump", "user", "data", "message", "message", "return", "jsonify", "data", "201"], "doc_len": 85}
{"doc_id": "examples/peewee_example.py::get_todos", "file_path": "examples/peewee_example.py", "class_name": null, "func_name": "get_todos", "text": "文件路径: examples/peewee_example.py\ndef get_todos():\n    todos = Todo.select().order_by(Todo.posted_on.asc())  # Get all todos\n    result = todos_schema.dump(list(todos))\n    return jsonify(result.data)\n", "tokens": ["examples", "peewee_example", "py", "def", "get_todos", "todos", "todo", "select", "order_by", "todo", "posted_on", "asc", "get", "all", "todos", "result", "todos_schema", "dump", "list", "todos", "return", "jsonify", "result", "data"], "doc_len": 24}
{"doc_id": "examples/peewee_example.py::get_todo", "file_path": "examples/peewee_example.py", "class_name": null, "func_name": "get_todo", "text": "文件路径: examples/peewee_example.py\ndef get_todo(pk):\n    todo = Todo.get(Todo.id == pk)\n    if not todo:\n        return jsonify({'errors': 'Todo could not be find'}), 404\n    result = todo_schema.dump(todo)\n    return jsonify(result.data)\n", "tokens": ["examples", "peewee_example", "py", "def", "get_todo", "pk", "todo", "todo", "get", "todo", "id", "pk", "if", "not", "todo", "return", "jsonify", "errors", "todo", "could", "not", "be", "find", "404", "result", "todo_schema", "dump", "todo", "return", "jsonify", "result", "data"], "doc_len": 32}
{"doc_id": "examples/peewee_example.py::toggledone", "file_path": "examples/peewee_example.py", "class_name": null, "func_name": "toggledone", "text": "文件路径: examples/peewee_example.py\ndef toggledone(pk):\n    try:\n        todo = Todo.get(Todo.id == pk)\n    except Todo.DoesNotExist:\n        return jsonify({\"message\": \"Todo could not be found\"}), 404\n    status = not todo.is_done\n    update_query = todo.update(is_done=status)\n    update_query.execute()\n    result = todo_schema.dump(todo)\n    return jsonify(result.data)\n", "tokens": ["examples", "peewee_example", "py", "def", "toggledone", "pk", "try", "todo", "todo", "get", "todo", "id", "pk", "except", "todo", "doesnotexist", "return", "jsonify", "message", "todo", "could", "not", "be", "found", "404", "status", "not", "todo", "is_done", "update_query", "todo", "update", "is_done", "status", "update_query", "execute", "result", "todo_schema", "dump", "todo", "return", "jsonify", "result", "data"], "doc_len": 44}
{"doc_id": "examples/peewee_example.py::new_todo", "file_path": "examples/peewee_example.py", "class_name": null, "func_name": "new_todo", "text": "文件路径: examples/peewee_example.py\ndef new_todo(user):\n    json_input = request.get_json()\n    todo, errors = todo_schema.load(json_input)\n    if errors:\n        return jsonify({'errors': errors}), 422\n    todo.user = user\n    todo.save()\n    result = todo_schema.dump(todo)\n    return jsonify(result.data)\n", "tokens": ["examples", "peewee_example", "py", "def", "new_todo", "user", "json_input", "request", "get_json", "todo", "errors", "todo_schema", "load", "json_input", "if", "errors", "return", "jsonify", "errors", "errors", "422", "todo", "user", "user", "todo", "save", "result", "todo_schema", "dump", "todo", "return", "jsonify", "result", "data"], "doc_len": 34}
{"doc_id": "examples/textblob_example.py::BlobSchema.get_discrete_sentiment", "file_path": "examples/textblob_example.py", "class_name": "BlobSchema", "func_name": "get_discrete_sentiment", "text": "文件路径: examples/textblob_example.py, 类名: BlobSchema\n    def get_discrete_sentiment(self, obj):\n        if obj.polarity > 0.1:\n            return 'positive'\n        elif obj.polarity < -0.1:\n            return 'negative'\n        else:\n            return 'neutral'\n", "tokens": ["examples", "textblob_example", "py", "blobschema", "def", "get_discrete_sentiment", "self", "obj", "if", "obj", "polarity", "0", "1", "return", "positive", "elif", "obj", "polarity", "0", "1", "return", "negative", "else", "return", "neutral"], "doc_len": 25}
{"doc_id": "examples/textblob_example.py::analyze", "file_path": "examples/textblob_example.py", "class_name": null, "func_name": "analyze", "text": "文件路径: examples/textblob_example.py\ndef analyze():\n    blob = TextBlob(request.json['text'])\n    result = blob_schema.dump(blob)\n    return result.data\n", "tokens": ["examples", "textblob_example", "py", "def", "analyze", "blob", "textblob", "request", "json", "text", "result", "blob_schema", "dump", "blob", "return", "result", "data"], "doc_len": 17}
{"doc_id": "performance/benchmark.py::must_not_be_blank", "file_path": "performance/benchmark.py", "class_name": null, "func_name": "must_not_be_blank", "text": "文件路径: performance/benchmark.py\ndef must_not_be_blank(data):\n    if not data:\n        raise ValidationError(\"Data not provided.\")\n", "tokens": ["performance", "benchmark", "py", "def", "must_not_be_blank", "data", "if", "not", "data", "raise", "validationerror", "data", "not", "provided"], "doc_len": 14}
{"doc_id": "performance/benchmark.py::AuthorSchema.full_name", "file_path": "performance/benchmark.py", "class_name": "AuthorSchema", "func_name": "full_name", "text": "文件路径: performance/benchmark.py, 类名: AuthorSchema\n    def full_name(self, author):\n        return \"{}, {}\".format(author.last, author.first)\n", "tokens": ["performance", "benchmark", "py", "authorschema", "def", "full_name", "self", "author", "return", "format", "author", "last", "author", "first"], "doc_len": 14}
{"doc_id": "performance/benchmark.py::QuoteSchema.add_full_name", "file_path": "performance/benchmark.py", "class_name": "QuoteSchema", "func_name": "add_full_name", "text": "文件路径: performance/benchmark.py, 类名: QuoteSchema\n    def add_full_name(self, data, **kwargs):\n        data[\"author_full\"] = \"{}, {}\".format(\n            data[\"author\"][\"last\"], data[\"author\"][\"first\"]\n        )\n        return data\n", "tokens": ["performance", "benchmark", "py", "quoteschema", "def", "add_full_name", "self", "data", "kwargs", "data", "author_full", "format", "data", "author", "last", "data", "author", "first", "return", "data"], "doc_len": 20}
{"doc_id": "performance/benchmark.py::Author.__init__", "file_path": "performance/benchmark.py", "class_name": "Author", "func_name": "__init__", "text": "文件路径: performance/benchmark.py, 类名: Author\n    def __init__(self, id, first, last, book_count, age, address):\n        self.id = id\n        self.first = first\n        self.last = last\n        self.book_count = book_count\n        self.age = age\n        self.address = address\n", "tokens": ["performance", "benchmark", "py", "author", "def", "__init__", "self", "id", "first", "last", "book_count", "age", "address", "self", "id", "id", "self", "first", "first", "self", "last", "last", "self", "book_count", "book_count", "self", "age", "age", "self", "address", "address"], "doc_len": 31}
{"doc_id": "performance/benchmark.py::Quote.__init__", "file_path": "performance/benchmark.py", "class_name": "Quote", "func_name": "__init__", "text": "文件路径: performance/benchmark.py, 类名: Quote\n    def __init__(\n        self,\n        id,\n        author,\n        content,\n        posted_at,\n        book_name,\n        page_number,\n        line_number,\n        col_number,\n    ):\n        self.id = id\n        self.author = author\n        self.content = content\n        self.posted_at = posted_at\n        self.book_name = book_name\n        self.page_number = page_number\n        self.line_number = line_number\n        self.col_number = col_number\n", "tokens": ["performance", "benchmark", "py", "quote", "def", "__init__", "self", "id", "author", "content", "posted_at", "book_name", "page_number", "line_number", "col_number", "self", "id", "id", "self", "author", "author", "self", "content", "content", "self", "posted_at", "posted_at", "self", "book_name", "book_name", "self", "page_number", "page_number", "self", "line_number", "line_number", "self", "col_number", "col_number"], "doc_len": 39}
{"doc_id": "performance/benchmark.py::run_timeit", "file_path": "performance/benchmark.py", "class_name": null, "func_name": "run_timeit", "text": "文件路径: performance/benchmark.py\ndef run_timeit(quotes, iterations, repeat, profile=False):\n    quotes_schema = QuoteSchema(many=True)\n    if profile:\n        profile = cProfile.Profile()\n        profile.enable()\n\n    gc.collect()\n    best = min(\n        timeit.repeat(\n            lambda: quotes_schema.dump(quotes),\n            \"gc.enable()\",\n            number=iterations,\n            repeat=repeat,\n        )\n    )\n    if profile:\n        profile.disable()\n        profile.dump_stats(\"marshmallow.pprof\")\n\n    usec = best * 1e6 / iterations\n    return usec\n", "tokens": ["performance", "benchmark", "py", "def", "run_timeit", "quotes", "iterations", "repeat", "profile", "false", "quotes_schema", "quoteschema", "many", "true", "if", "profile", "profile", "cprofile", "profile", "profile", "enable", "gc", "collect", "best", "min", "timeit", "repeat", "lambda", "quotes_schema", "dump", "quotes", "gc", "enable", "number", "iterations", "repeat", "repeat", "if", "profile", "profile", "disable", "profile", "dump_stats", "marshmallow", "pprof", "usec", "best", "1e6", "iterations", "return", "usec"], "doc_len": 51}
{"doc_id": "performance/benchmark.py::main", "file_path": "performance/benchmark.py", "class_name": null, "func_name": "main", "text": "文件路径: performance/benchmark.py\ndef main():\n    parser = argparse.ArgumentParser(description=\"Runs a benchmark of Marshmallow.\")\n    parser.add_argument(\n        \"--iterations\",\n        type=int,\n        default=1000,\n        help=\"Number of iterations to run per test.\",\n    )\n    parser.add_argument(\n        \"--repeat\",\n        type=int,\n        default=5,\n        help=\"Number of times to repeat the performance test.  The minimum will \"\n        \"be used.\",\n    )\n    parser.add_argument(\n        \"--object-count\", type=int, default=20, help=\"Number of objects to dump.\"\n    )\n    parser.add_argument(\n        \"--profile\",\n        action=\"store_true\",\n        help=\"Whether or not to profile Marshmallow while running the benchmark.\",\n    )\n    args = parser.parse_args()\n\n    quotes = []\n\n    for i in range(args.object_count):\n        quotes.append(\n            Quote(\n                i,\n                Author(i, \"Foo\", \"Bar\", 42, 66, \"123 Fake St\"),\n                \"Hello World\",\n                datetime.datetime(2019, 7, 4, tzinfo=datetime.timezone.utc),\n                \"The World\",\n                34,\n                3,\n                70,\n            )\n        )\n\n    print(\n        \"Benchmark Result: {:.2f} usec/dump\".format(\n            run_timeit(quotes, args.iterations, args.repeat, profile=args.profile)\n        )\n    )\n", "tokens": ["performance", "benchmark", "py", "def", "main", "parser", "argparse", "argumentparser", "description", "runs", "a", "benchmark", "of", "marshmallow", "parser", "add_argument", "iterations", "type", "int", "default", "1000", "help", "number", "of", "iterations", "to", "run", "per", "test", "parser", "add_argument", "repeat", "type", "int", "default", "5", "help", "number", "of", "times", "to", "repeat", "the", "performance", "test", "the", "minimum", "will", "be", "used", "parser", "add_argument", "object", "count", "type", "int", "default", "20", "help", "number", "of", "objects", "to", "dump", "parser", "add_argument", "profile", "action", "store_true", "help", "whether", "or", "not", "to", "profile", "marshmallow", "while", "running", "the", "benchmark", "args", "parser", "parse_args", "quotes", "for", "i", "in", "range", "args", "object_count", "quotes", "append", "quote", "i", "author", "i", "foo", "bar", "42", "66", "123", "fake", "st", "hello", "world", "datetime", "datetime", "2019", "7", "4", "tzinfo", "datetime", "timezone", "utc", "the", "world", "34", "3", "70", "print", "benchmark", "result", "2f", "usec", "dump", "format", "run_timeit", "quotes", "args", "iterations", "args", "repeat", "profile", "args", "profile"], "doc_len": 135}
{"doc_id": "src/marshmallow/base.py::FieldABC.serialize", "file_path": "src/marshmallow/base.py", "class_name": "FieldABC", "func_name": "serialize", "text": "文件路径: src/marshmallow/base.py, 类名: FieldABC\n    def serialize(self, attr, obj, accessor=None):\n        raise NotImplementedError\n", "tokens": ["src", "marshmallow", "base", "py", "fieldabc", "def", "serialize", "self", "attr", "obj", "accessor", "none", "raise", "notimplementederror"], "doc_len": 14}
{"doc_id": "src/marshmallow/base.py::FieldABC.deserialize", "file_path": "src/marshmallow/base.py", "class_name": "FieldABC", "func_name": "deserialize", "text": "文件路径: src/marshmallow/base.py, 类名: FieldABC\n    def deserialize(self, value):\n        raise NotImplementedError\n", "tokens": ["src", "marshmallow", "base", "py", "fieldabc", "def", "deserialize", "self", "value", "raise", "notimplementederror"], "doc_len": 11}
{"doc_id": "src/marshmallow/base.py::FieldABC._serialize", "file_path": "src/marshmallow/base.py", "class_name": "FieldABC", "func_name": "_serialize", "text": "文件路径: src/marshmallow/base.py, 类名: FieldABC\n    def _serialize(self, value, attr, obj):\n        raise NotImplementedError\n", "tokens": ["src", "marshmallow", "base", "py", "fieldabc", "def", "_serialize", "self", "value", "attr", "obj", "raise", "notimplementederror"], "doc_len": 13}
{"doc_id": "src/marshmallow/base.py::FieldABC._deserialize", "file_path": "src/marshmallow/base.py", "class_name": "FieldABC", "func_name": "_deserialize", "text": "文件路径: src/marshmallow/base.py, 类名: FieldABC\n    def _deserialize(self, value, attr, ob):\n        raise NotImplementedError\n", "tokens": ["src", "marshmallow", "base", "py", "fieldabc", "def", "_deserialize", "self", "value", "attr", "ob", "raise", "notimplementederror"], "doc_len": 13}
{"doc_id": "src/marshmallow/base.py::FieldABC.__deepcopy__", "file_path": "src/marshmallow/base.py", "class_name": "FieldABC", "func_name": "__deepcopy__", "text": "文件路径: src/marshmallow/base.py, 类名: FieldABC\n    def __deepcopy__(self, memo):\n        ret = copy.copy(self)\n        return ret\n", "tokens": ["src", "marshmallow", "base", "py", "fieldabc", "def", "__deepcopy__", "self", "memo", "ret", "copy", "copy", "self", "return", "ret"], "doc_len": 15}
{"doc_id": "src/marshmallow/base.py::SchemaABC.dump", "file_path": "src/marshmallow/base.py", "class_name": "SchemaABC", "func_name": "dump", "text": "文件路径: src/marshmallow/base.py, 类名: SchemaABC\n    def dump(self, obj):\n        raise NotImplementedError\n", "tokens": ["src", "marshmallow", "base", "py", "schemaabc", "def", "dump", "self", "obj", "raise", "notimplementederror"], "doc_len": 11}
{"doc_id": "src/marshmallow/base.py::SchemaABC.dumps", "file_path": "src/marshmallow/base.py", "class_name": "SchemaABC", "func_name": "dumps", "text": "文件路径: src/marshmallow/base.py, 类名: SchemaABC\n    def dumps(self, obj, *args, **kwargs):\n        raise NotImplementedError\n", "tokens": ["src", "marshmallow", "base", "py", "schemaabc", "def", "dumps", "self", "obj", "args", "kwargs", "raise", "notimplementederror"], "doc_len": 13}
{"doc_id": "src/marshmallow/base.py::SchemaABC.load", "file_path": "src/marshmallow/base.py", "class_name": "SchemaABC", "func_name": "load", "text": "文件路径: src/marshmallow/base.py, 类名: SchemaABC\n    def load(self, data):\n        raise NotImplementedError\n", "tokens": ["src", "marshmallow", "base", "py", "schemaabc", "def", "load", "self", "data", "raise", "notimplementederror"], "doc_len": 11}
{"doc_id": "src/marshmallow/base.py::SchemaABC.loads", "file_path": "src/marshmallow/base.py", "class_name": "SchemaABC", "func_name": "loads", "text": "文件路径: src/marshmallow/base.py, 类名: SchemaABC\n    def loads(self, data):\n        raise NotImplementedError\n", "tokens": ["src", "marshmallow", "base", "py", "schemaabc", "def", "loads", "self", "data", "raise", "notimplementederror"], "doc_len": 11}
{"doc_id": "src/marshmallow/class_registry.py::register", "file_path": "src/marshmallow/class_registry.py", "class_name": null, "func_name": "register", "text": "文件路径: src/marshmallow/class_registry.py\ndef register(classname, cls):\n    \"\"\"Add a class to the registry of serializer classes. When a class is\n    registered, an entry for both its classname and its full, module-qualified\n    path are added to the registry.\n\n    Example: ::\n\n        class MyClass:\n            pass\n\n        register('MyClass', MyClass)\n        # Registry:\n        # {\n        #   'MyClass': [path.to.MyClass],\n        #   'path.to.MyClass': [path.to.MyClass],\n        # }\n\n    \"\"\"\n    # Module where the class is located\n    module = cls.__module__\n    # Full module path to the class\n    # e.g. user.schemas.UserSchema\n    fullpath = '.'.join([module, classname])\n    # If the class is already registered; need to check if the entries are\n    # in the same module as cls to avoid having multiple instances of the same\n    # class in the registry\n    if classname in _registry and not \\\n            any(each.__module__ == module for each in _registry[classname]):\n        _registry[classname].append(cls)\n    elif classname not in _registry:\n        _registry[classname] = [cls]\n\n    # Also register the full path\n    if fullpath not in _registry:\n        _registry.setdefault(fullpath, []).append(cls)\n    else:\n        # If fullpath does exist, replace existing entry\n        _registry[fullpath] = [cls]\n    return None\n", "tokens": ["src", "marshmallow", "class_registry", "py", "def", "register", "classname", "cls", "add", "a", "class", "to", "the", "registry", "of", "serializer", "classes", "when", "a", "class", "is", "registered", "an", "entry", "for", "both", "its", "classname", "and", "its", "full", "module", "qualified", "path", "are", "added", "to", "the", "registry", "example", "class", "myclass", "pass", "register", "myclass", "myclass", "registry", "myclass", "path", "to", "myclass", "path", "to", "myclass", "path", "to", "myclass", "module", "where", "the", "class", "is", "located", "module", "cls", "__module__", "full", "module", "path", "to", "the", "class", "e", "g", "user", "schemas", "userschema", "fullpath", "join", "module", "classname", "if", "the", "class", "is", "already", "registered", "need", "to", "check", "if", "the", "entries", "are", "in", "the", "same", "module", "as", "cls", "to", "avoid", "having", "multiple", "instances", "of", "the", "same", "class", "in", "the", "registry", "if", "classname", "in", "_registry", "and", "not", "any", "each", "__module__", "module", "for", "each", "in", "_registry", "classname", "_registry", "classname", "append", "cls", "elif", "classname", "not", "in", "_registry", "_registry", "classname", "cls", "also", "register", "the", "full", "path", "if", "fullpath", "not", "in", "_registry", "_registry", "setdefault", "fullpath", "append", "cls", "else", "if", "fullpath", "does", "exist", "replace", "existing", "entry", "_registry", "fullpath", "cls", "return", "none"], "doc_len": 167}
{"doc_id": "src/marshmallow/class_registry.py::get_class", "file_path": "src/marshmallow/class_registry.py", "class_name": null, "func_name": "get_class", "text": "文件路径: src/marshmallow/class_registry.py\ndef get_class(classname, all=False):\n    \"\"\"Retrieve a class from the registry.\n\n    :raises: marshmallow.exceptions.RegistryError if the class cannot be found\n        or if there are multiple entries for the given class name.\n    \"\"\"\n    try:\n        classes = _registry[classname]\n    except KeyError:\n        raise RegistryError('Class with name {0!r} was not found. You may need '\n            'to import the class.'.format(classname))\n    if len(classes) > 1:\n        if all:\n            return _registry[classname]\n        raise RegistryError('Multiple classes with name {0!r} '\n            'were found. Please use the full, '\n            'module-qualified path.'.format(classname))\n    else:\n        return _registry[classname][0]\n", "tokens": ["src", "marshmallow", "class_registry", "py", "def", "get_class", "classname", "all", "false", "retrieve", "a", "class", "from", "the", "registry", "raises", "marshmallow", "exceptions", "registryerror", "if", "the", "class", "cannot", "be", "found", "or", "if", "there", "are", "multiple", "entries", "for", "the", "given", "class", "name", "try", "classes", "_registry", "classname", "except", "keyerror", "raise", "registryerror", "class", "with", "name", "0", "r", "was", "not", "found", "you", "may", "need", "to", "import", "the", "class", "format", "classname", "if", "len", "classes", "1", "if", "all", "return", "_registry", "classname", "raise", "registryerror", "multiple", "classes", "with", "name", "0", "r", "were", "found", "please", "use", "the", "full", "module", "qualified", "path", "format", "classname", "else", "return", "_registry", "classname", "0"], "doc_len": 94}
{"doc_id": "src/marshmallow/compat.py::with_metaclass", "file_path": "src/marshmallow/compat.py", "class_name": null, "func_name": "with_metaclass", "text": "文件路径: src/marshmallow/compat.py\ndef with_metaclass(meta, *bases):\n    \"\"\"Create a base class with a metaclass.\"\"\"\n    # This requires a bit of explanation: the basic idea is to make a dummy\n    # metaclass for one level of class instantiation that replaces itself with\n    # the actual metaclass.\n    class metaclass(meta):  # noqa\n\n        def __new__(cls, name, this_bases, d):\n            return meta(name, bases, d)\n    return type.__new__(metaclass, 'temporary_class', (), {})\n", "tokens": ["src", "marshmallow", "compat", "py", "def", "with_metaclass", "meta", "bases", "create", "a", "base", "class", "with", "a", "metaclass", "this", "requires", "a", "bit", "of", "explanation", "the", "basic", "idea", "is", "to", "make", "a", "dummy", "metaclass", "for", "one", "level", "of", "class", "instantiation", "that", "replaces", "itself", "with", "the", "actual", "metaclass", "class", "metaclass", "meta", "noqa", "def", "__new__", "cls", "name", "this_bases", "d", "return", "meta", "name", "bases", "d", "return", "type", "__new__", "metaclass", "temporary_class"], "doc_len": 63}
{"doc_id": "src/marshmallow/decorators.py::validates", "file_path": "src/marshmallow/decorators.py", "class_name": null, "func_name": "validates", "text": "文件路径: src/marshmallow/decorators.py\ndef validates(field_name):\n    \"\"\"Register a field validator.\n\n    :param str field_name: Name of the field that the method validates.\n    \"\"\"\n    return tag_processor(VALIDATES, None, False, field_name=field_name)\n", "tokens": ["src", "marshmallow", "decorators", "py", "def", "validates", "field_name", "register", "a", "field", "validator", "param", "str", "field_name", "name", "of", "the", "field", "that", "the", "method", "validates", "return", "tag_processor", "validates", "none", "false", "field_name", "field_name"], "doc_len": 29}
{"doc_id": "src/marshmallow/decorators.py::validates_schema", "file_path": "src/marshmallow/decorators.py", "class_name": null, "func_name": "validates_schema", "text": "文件路径: src/marshmallow/decorators.py\ndef validates_schema(fn=None, pass_many=False, pass_original=False, skip_on_field_errors=False):\n    \"\"\"Register a schema-level validator.\n\n    By default, receives a single object at a time, regardless of whether ``many=True``\n    is passed to the `Schema`. If ``pass_many=True``, the raw data (which may be a collection)\n    and the value for ``many`` is passed.\n\n    If ``pass_original=True``, the original data (before unmarshalling) will be passed as\n    an additional argument to the method.\n\n    If ``skip_on_field_errors=True``, this validation method will be skipped whenever\n    validation errors have been detected when validating fields.\n    \"\"\"\n    return tag_processor(VALIDATES_SCHEMA, fn, pass_many, pass_original=pass_original,\n                         skip_on_field_errors=skip_on_field_errors)\n", "tokens": ["src", "marshmallow", "decorators", "py", "def", "validates_schema", "fn", "none", "pass_many", "false", "pass_original", "false", "skip_on_field_errors", "false", "register", "a", "schema", "level", "validator", "by", "default", "receives", "a", "single", "object", "at", "a", "time", "regardless", "of", "whether", "many", "true", "is", "passed", "to", "the", "schema", "if", "pass_many", "true", "the", "raw", "data", "which", "may", "be", "a", "collection", "and", "the", "value", "for", "many", "is", "passed", "if", "pass_original", "true", "the", "original", "data", "before", "unmarshalling", "will", "be", "passed", "as", "an", "additional", "argument", "to", "the", "method", "if", "skip_on_field_errors", "true", "this", "validation", "method", "will", "be", "skipped", "whenever", "validation", "errors", "have", "been", "detected", "when", "validating", "fields", "return", "tag_processor", "validates_schema", "fn", "pass_many", "pass_original", "pass_original", "skip_on_field_errors", "skip_on_field_errors"], "doc_len": 101}
{"doc_id": "src/marshmallow/decorators.py::pre_dump", "file_path": "src/marshmallow/decorators.py", "class_name": null, "func_name": "pre_dump", "text": "文件路径: src/marshmallow/decorators.py\ndef pre_dump(fn=None, pass_many=False):\n    \"\"\"Register a method to invoke before serializing an object. The method\n    receives the object to be serialized and returns the processed object.\n\n    By default, receives a single object at a time, regardless of whether ``many=True``\n    is passed to the `Schema`. If ``pass_many=True``, the raw data (which may be a collection)\n    and the value for ``many`` is passed.\n    \"\"\"\n    return tag_processor(PRE_DUMP, fn, pass_many)\n", "tokens": ["src", "marshmallow", "decorators", "py", "def", "pre_dump", "fn", "none", "pass_many", "false", "register", "a", "method", "to", "invoke", "before", "serializing", "an", "object", "the", "method", "receives", "the", "object", "to", "be", "serialized", "and", "returns", "the", "processed", "object", "by", "default", "receives", "a", "single", "object", "at", "a", "time", "regardless", "of", "whether", "many", "true", "is", "passed", "to", "the", "schema", "if", "pass_many", "true", "the", "raw", "data", "which", "may", "be", "a", "collection", "and", "the", "value", "for", "many", "is", "passed", "return", "tag_processor", "pre_dump", "fn", "pass_many"], "doc_len": 74}
{"doc_id": "src/marshmallow/decorators.py::post_dump", "file_path": "src/marshmallow/decorators.py", "class_name": null, "func_name": "post_dump", "text": "文件路径: src/marshmallow/decorators.py\ndef post_dump(fn=None, pass_many=False, pass_original=False):\n    \"\"\"Register a method to invoke after serializing an object. The method\n    receives the serialized object and returns the processed object.\n\n    By default, receives a single object at a time, transparently handling the ``many``\n    argument passed to the Schema. If ``pass_many=True``, the raw data\n    (which may be a collection) and the value for ``many`` is passed.\n    \"\"\"\n    return tag_processor(POST_DUMP, fn, pass_many, pass_original=pass_original)\n", "tokens": ["src", "marshmallow", "decorators", "py", "def", "post_dump", "fn", "none", "pass_many", "false", "pass_original", "false", "register", "a", "method", "to", "invoke", "after", "serializing", "an", "object", "the", "method", "receives", "the", "serialized", "object", "and", "returns", "the", "processed", "object", "by", "default", "receives", "a", "single", "object", "at", "a", "time", "transparently", "handling", "the", "many", "argument", "passed", "to", "the", "schema", "if", "pass_many", "true", "the", "raw", "data", "which", "may", "be", "a", "collection", "and", "the", "value", "for", "many", "is", "passed", "return", "tag_processor", "post_dump", "fn", "pass_many", "pass_original", "pass_original"], "doc_len": 75}
{"doc_id": "src/marshmallow/decorators.py::pre_load", "file_path": "src/marshmallow/decorators.py", "class_name": null, "func_name": "pre_load", "text": "文件路径: src/marshmallow/decorators.py\ndef pre_load(fn=None, pass_many=False):\n    \"\"\"Register a method to invoke before deserializing an object. The method\n    receives the data to be deserialized and returns the processed data.\n\n    By default, receives a single datum at a time, transparently handling the ``many``\n    argument passed to the Schema. If ``pass_many=True``, the raw data\n    (which may be a collection) and the value for ``many`` is passed.\n    \"\"\"\n    return tag_processor(PRE_LOAD, fn, pass_many)\n", "tokens": ["src", "marshmallow", "decorators", "py", "def", "pre_load", "fn", "none", "pass_many", "false", "register", "a", "method", "to", "invoke", "before", "deserializing", "an", "object", "the", "method", "receives", "the", "data", "to", "be", "deserialized", "and", "returns", "the", "processed", "data", "by", "default", "receives", "a", "single", "datum", "at", "a", "time", "transparently", "handling", "the", "many", "argument", "passed", "to", "the", "schema", "if", "pass_many", "true", "the", "raw", "data", "which", "may", "be", "a", "collection", "and", "the", "value", "for", "many", "is", "passed", "return", "tag_processor", "pre_load", "fn", "pass_many"], "doc_len": 73}
{"doc_id": "src/marshmallow/decorators.py::post_load", "file_path": "src/marshmallow/decorators.py", "class_name": null, "func_name": "post_load", "text": "文件路径: src/marshmallow/decorators.py\ndef post_load(fn=None, pass_many=False, pass_original=False):\n    \"\"\"Register a method to invoke after deserializing an object. The method\n    receives the deserialized data and returns the processed data.\n\n    By default, receives a single datum at a time, transparently handling the ``many``\n    argument passed to the Schema. If ``pass_many=True``, the raw data\n    (which may be a collection) and the value for ``many`` is passed.\n    \"\"\"\n    return tag_processor(POST_LOAD, fn, pass_many, pass_original=pass_original)\n", "tokens": ["src", "marshmallow", "decorators", "py", "def", "post_load", "fn", "none", "pass_many", "false", "pass_original", "false", "register", "a", "method", "to", "invoke", "after", "deserializing", "an", "object", "the", "method", "receives", "the", "deserialized", "data", "and", "returns", "the", "processed", "data", "by", "default", "receives", "a", "single", "datum", "at", "a", "time", "transparently", "handling", "the", "many", "argument", "passed", "to", "the", "schema", "if", "pass_many", "true", "the", "raw", "data", "which", "may", "be", "a", "collection", "and", "the", "value", "for", "many", "is", "passed", "return", "tag_processor", "post_load", "fn", "pass_many", "pass_original", "pass_original"], "doc_len": 75}
{"doc_id": "src/marshmallow/decorators.py::tag_processor", "file_path": "src/marshmallow/decorators.py", "class_name": null, "func_name": "tag_processor", "text": "文件路径: src/marshmallow/decorators.py\ndef tag_processor(tag_name, fn, pass_many, **kwargs):\n    \"\"\"Tags decorated processor function to be picked up later.\n\n    .. note::\n        Currently ony works with functions and instance methods. Class and\n        static methods are not supported.\n\n    :return: Decorated function if supplied, else this decorator with its args\n        bound.\n    \"\"\"\n    # Allow using this as either a decorator or a decorator factory.\n    if fn is None:\n        return functools.partial(\n            tag_processor, tag_name, pass_many=pass_many, **kwargs\n        )\n\n    # Set a marshmallow_tags attribute instead of wrapping in some class,\n    # because I still want this to end up as a normal (unbound) method.\n    try:\n        marshmallow_tags = fn.__marshmallow_tags__\n    except AttributeError:\n        fn.__marshmallow_tags__ = marshmallow_tags = set()\n    # Also save the kwargs for the tagged function on\n    # __marshmallow_kwargs__, keyed by (<tag_name>, <pass_many>)\n    try:\n        marshmallow_kwargs = fn.__marshmallow_kwargs__\n    except AttributeError:\n        fn.__marshmallow_kwargs__ = marshmallow_kwargs = {}\n    marshmallow_tags.add((tag_name, pass_many))\n    marshmallow_kwargs[(tag_name, pass_many)] = kwargs\n\n    return fn\n", "tokens": ["src", "marshmallow", "decorators", "py", "def", "tag_processor", "tag_name", "fn", "pass_many", "kwargs", "tags", "decorated", "processor", "function", "to", "be", "picked", "up", "later", "note", "currently", "ony", "works", "with", "functions", "and", "instance", "methods", "class", "and", "static", "methods", "are", "not", "supported", "return", "decorated", "function", "if", "supplied", "else", "this", "decorator", "with", "its", "args", "bound", "allow", "using", "this", "as", "either", "a", "decorator", "or", "a", "decorator", "factory", "if", "fn", "is", "none", "return", "functools", "partial", "tag_processor", "tag_name", "pass_many", "pass_many", "kwargs", "set", "a", "marshmallow_tags", "attribute", "instead", "of", "wrapping", "in", "some", "class", "because", "i", "still", "want", "this", "to", "end", "up", "as", "a", "normal", "unbound", "method", "try", "marshmallow_tags", "fn", "__marshmallow_tags__", "except", "attributeerror", "fn", "__marshmallow_tags__", "marshmallow_tags", "set", "also", "save", "the", "kwargs", "for", "the", "tagged", "function", "on", "__marshmallow_kwargs__", "keyed", "by", "tag_name", "pass_many", "try", "marshmallow_kwargs", "fn", "__marshmallow_kwargs__", "except", "attributeerror", "fn", "__marshmallow_kwargs__", "marshmallow_kwargs", "marshmallow_tags", "add", "tag_name", "pass_many", "marshmallow_kwargs", "tag_name", "pass_many", "kwargs", "return", "fn"], "doc_len": 136}
{"doc_id": "src/marshmallow/exceptions.py::ValidationError.__init__", "file_path": "src/marshmallow/exceptions.py", "class_name": "ValidationError", "func_name": "__init__", "text": "文件路径: src/marshmallow/exceptions.py, 类名: ValidationError\n    def __init__(self, message, field_names=None, fields=None, data=None, **kwargs):\n        if not isinstance(message, dict) and not isinstance(message, list):\n            messages = [message]\n        else:\n            messages = message\n        #: String, list, or dictionary of error messages.\n        #: If a `dict`, the keys will be field names and the values will be lists of\n        #: messages.\n        self.messages = messages\n        #: List of field objects which failed validation.\n        self.fields = fields\n        if isinstance(field_names, basestring):\n            #: List of field_names which failed validation.\n            self.field_names = [field_names]\n        else:  # fields is a list or None\n            self.field_names = field_names or []\n        # Store nested data\n        self.data = data\n        self.kwargs = kwargs\n        MarshmallowError.__init__(self, message)\n", "tokens": ["src", "marshmallow", "exceptions", "py", "validationerror", "def", "__init__", "self", "message", "field_names", "none", "fields", "none", "data", "none", "kwargs", "if", "not", "isinstance", "message", "dict", "and", "not", "isinstance", "message", "list", "messages", "message", "else", "messages", "message", "string", "list", "or", "dictionary", "of", "error", "messages", "if", "a", "dict", "the", "keys", "will", "be", "field", "names", "and", "the", "values", "will", "be", "lists", "of", "messages", "self", "messages", "messages", "list", "of", "field", "objects", "which", "failed", "validation", "self", "fields", "fields", "if", "isinstance", "field_names", "basestring", "list", "of", "field_names", "which", "failed", "validation", "self", "field_names", "field_names", "else", "fields", "is", "a", "list", "or", "none", "self", "field_names", "field_names", "or", "store", "nested", "data", "self", "data", "data", "self", "kwargs", "kwargs", "marshmallowerror", "__init__", "self", "message"], "doc_len": 105}
{"doc_id": "src/marshmallow/exceptions.py::ValidationError.normalized_messages", "file_path": "src/marshmallow/exceptions.py", "class_name": "ValidationError", "func_name": "normalized_messages", "text": "文件路径: src/marshmallow/exceptions.py, 类名: ValidationError\n    def normalized_messages(self, no_field_name=\"_schema\"):\n        if isinstance(self.messages, dict):\n            return self.messages\n        if len(self.field_names) == 0:\n            return {no_field_name: self.messages}\n        return dict((name, self.messages) for name in self.field_names)\n", "tokens": ["src", "marshmallow", "exceptions", "py", "validationerror", "def", "normalized_messages", "self", "no_field_name", "_schema", "if", "isinstance", "self", "messages", "dict", "return", "self", "messages", "if", "len", "self", "field_names", "0", "return", "no_field_name", "self", "messages", "return", "dict", "name", "self", "messages", "for", "name", "in", "self", "field_names"], "doc_len": 37}
{"doc_id": "src/marshmallow/fields.py::Field.__init__", "file_path": "src/marshmallow/fields.py", "class_name": "Field", "func_name": "__init__", "text": "文件路径: src/marshmallow/fields.py, 类名: Field\n    def __init__(self, default=missing_, attribute=None, load_from=None, dump_to=None,\n                 error=None, validate=None, required=False, allow_none=None, load_only=False,\n                 dump_only=False, missing=missing_, error_messages=None, **metadata):\n        self.default = default\n        self.attribute = attribute\n        self.load_from = load_from  # this flag is used by Unmarshaller\n        self.dump_to = dump_to  # this flag is used by Marshaller\n        self.validate = validate\n        if utils.is_iterable_but_not_string(validate):\n            if not utils.is_generator(validate):\n                self.validators = validate\n            else:\n                self.validators = list(validate)\n        elif callable(validate):\n            self.validators = [validate]\n        elif validate is None:\n            self.validators = []\n        else:\n            raise ValueError(\"The 'validate' parameter must be a callable \"\n                             \"or a collection of callables.\")\n\n        self.required = required\n        # If missing=None, None should be considered valid by default\n        if allow_none is None:\n            if missing is None:\n                self.allow_none = True\n            else:\n                self.allow_none = False\n        else:\n            self.allow_none = allow_none\n        self.load_only = load_only\n        self.dump_only = dump_only\n        self.missing = missing\n        self.metadata = metadata\n        self._creation_index = Field._creation_index\n        Field._creation_index += 1\n\n        # Collect default error message from self and parent classes\n        messages = {}\n        for cls in reversed(self.__class__.__mro__):\n            messages.update(getattr(cls, 'default_error_messages', {}))\n        messages.update(error_messages or {})\n        self.error_messages = messages\n", "tokens": ["src", "marshmallow", "fields", "py", "field", "def", "__init__", "self", "default", "missing_", "attribute", "none", "load_from", "none", "dump_to", "none", "error", "none", "validate", "none", "required", "false", "allow_none", "none", "load_only", "false", "dump_only", "false", "missing", "missing_", "error_messages", "none", "metadata", "self", "default", "default", "self", "attribute", "attribute", "self", "load_from", "load_from", "this", "flag", "is", "used", "by", "unmarshaller", "self", "dump_to", "dump_to", "this", "flag", "is", "used", "by", "marshaller", "self", "validate", "validate", "if", "utils", "is_iterable_but_not_string", "validate", "if", "not", "utils", "is_generator", "validate", "self", "validators", "validate", "else", "self", "validators", "list", "validate", "elif", "callable", "validate", "self", "validators", "validate", "elif", "validate", "is", "none", "self", "validators", "else", "raise", "valueerror", "the", "validate", "parameter", "must", "be", "a", "callable", "or", "a", "collection", "of", "callables", "self", "required", "required", "if", "missing", "none", "none", "should", "be", "considered", "valid", "by", "default", "if", "allow_none", "is", "none", "if", "missing", "is", "none", "self", "allow_none", "true", "else", "self", "allow_none", "false", "else", "self", "allow_none", "allow_none", "self", "load_only", "load_only", "self", "dump_only", "dump_only", "self", "missing", "missing", "self", "metadata", "metadata", "self", "_creation_index", "field", "_creation_index", "field", "_creation_index", "1", "collect", "default", "error", "message", "from", "self", "and", "parent", "classes", "messages", "for", "cls", "in", "reversed", "self", "__class__", "__mro__", "messages", "update", "getattr", "cls", "default_error_messages", "messages", "update", "error_messages", "or", "self", "error_messages", "messages"], "doc_len": 184}
{"doc_id": "src/marshmallow/fields.py::Field.__repr__", "file_path": "src/marshmallow/fields.py", "class_name": "Field", "func_name": "__repr__", "text": "文件路径: src/marshmallow/fields.py, 类名: Field\n    def __repr__(self):\n        return ('<fields.{ClassName}(default={self.default!r}, '\n                'attribute={self.attribute!r}, '\n                'validate={self.validate}, required={self.required}, '\n                'load_only={self.load_only}, dump_only={self.dump_only}, '\n                'missing={self.missing}, allow_none={self.allow_none}, '\n                'error_messages={self.error_messages})>'\n                .format(ClassName=self.__class__.__name__, self=self))\n", "tokens": ["src", "marshmallow", "fields", "py", "field", "def", "__repr__", "self", "return", "fields", "classname", "default", "self", "default", "r", "attribute", "self", "attribute", "r", "validate", "self", "validate", "required", "self", "required", "load_only", "self", "load_only", "dump_only", "self", "dump_only", "missing", "self", "missing", "allow_none", "self", "allow_none", "error_messages", "self", "error_messages", "format", "classname", "self", "__class__", "__name__", "self", "self"], "doc_len": 47}
{"doc_id": "src/marshmallow/fields.py::Field.get_value", "file_path": "src/marshmallow/fields.py", "class_name": "Field", "func_name": "get_value", "text": "文件路径: src/marshmallow/fields.py, 类名: Field\n    def get_value(self, attr, obj, accessor=None, default=missing_):\n        \"\"\"Return the value for a given key from an object.\"\"\"\n        # NOTE: Use getattr instead of direct attribute access here so that\n        # subclasses aren't required to define `attribute` member\n        attribute = getattr(self, 'attribute', None)\n        accessor_func = accessor or utils.get_value\n        check_key = attr if attribute is None else attribute\n        return accessor_func(check_key, obj, default)\n", "tokens": ["src", "marshmallow", "fields", "py", "field", "def", "get_value", "self", "attr", "obj", "accessor", "none", "default", "missing_", "return", "the", "value", "for", "a", "given", "key", "from", "an", "object", "note", "use", "getattr", "instead", "of", "direct", "attribute", "access", "here", "so", "that", "subclasses", "aren", "t", "required", "to", "define", "attribute", "member", "attribute", "getattr", "self", "attribute", "none", "accessor_func", "accessor", "or", "utils", "get_value", "check_key", "attr", "if", "attribute", "is", "none", "else", "attribute", "return", "accessor_func", "check_key", "obj", "default"], "doc_len": 66}
{"doc_id": "src/marshmallow/fields.py::Field._validate", "file_path": "src/marshmallow/fields.py", "class_name": "Field", "func_name": "_validate", "text": "文件路径: src/marshmallow/fields.py, 类名: Field\n    def _validate(self, value):\n        \"\"\"Perform validation on ``value``. Raise a :exc:`ValidationError` if validation\n        does not succeed.\n        \"\"\"\n        errors = []\n        kwargs = {}\n        for validator in self.validators:\n            try:\n                r = validator(value)\n                if not isinstance(validator, Validator) and r is False:\n                    self.fail('validator_failed')\n            except ValidationError as err:\n                kwargs.update(err.kwargs)\n                if isinstance(err.messages, dict):\n                    errors.append(err.messages)\n                else:\n                    errors.extend(err.messages)\n        if errors:\n            raise ValidationError(errors, **kwargs)\n", "tokens": ["src", "marshmallow", "fields", "py", "field", "def", "_validate", "self", "value", "perform", "validation", "on", "value", "raise", "a", "exc", "validationerror", "if", "validation", "does", "not", "succeed", "errors", "kwargs", "for", "validator", "in", "self", "validators", "try", "r", "validator", "value", "if", "not", "isinstance", "validator", "validator", "and", "r", "is", "false", "self", "fail", "validator_failed", "except", "validationerror", "as", "err", "kwargs", "update", "err", "kwargs", "if", "isinstance", "err", "messages", "dict", "errors", "append", "err", "messages", "else", "errors", "extend", "err", "messages", "if", "errors", "raise", "validationerror", "errors", "kwargs"], "doc_len": 73}
{"doc_id": "src/marshmallow/fields.py::Field.fail", "file_path": "src/marshmallow/fields.py", "class_name": "Field", "func_name": "fail", "text": "文件路径: src/marshmallow/fields.py, 类名: Field\n    def fail(self, key, **kwargs):\n        \"\"\"A helper method that simply raises a `ValidationError`.\n        \"\"\"\n        try:\n            msg = self.error_messages[key]\n        except KeyError:\n            class_name = self.__class__.__name__\n            msg = MISSING_ERROR_MESSAGE.format(class_name=class_name, key=key)\n            raise AssertionError(msg)\n        if isinstance(msg, basestring):\n            msg = msg.format(**kwargs)\n        raise ValidationError(msg)\n", "tokens": ["src", "marshmallow", "fields", "py", "field", "def", "fail", "self", "key", "kwargs", "a", "helper", "method", "that", "simply", "raises", "a", "validationerror", "try", "msg", "self", "error_messages", "key", "except", "keyerror", "class_name", "self", "__class__", "__name__", "msg", "missing_error_message", "format", "class_name", "class_name", "key", "key", "raise", "assertionerror", "msg", "if", "isinstance", "msg", "basestring", "msg", "msg", "format", "kwargs", "raise", "validationerror", "msg"], "doc_len": 50}
{"doc_id": "src/marshmallow/fields.py::Field._validate_missing", "file_path": "src/marshmallow/fields.py", "class_name": "Field", "func_name": "_validate_missing", "text": "文件路径: src/marshmallow/fields.py, 类名: Field\n    def _validate_missing(self, value):\n        \"\"\"Validate missing values. Raise a :exc:`ValidationError` if\n        `value` should be considered missing.\n        \"\"\"\n        if value is missing_:\n            if hasattr(self, 'required') and self.required:\n                self.fail('required')\n        if value is None:\n            if hasattr(self, 'allow_none') and self.allow_none is not True:\n                self.fail('null')\n", "tokens": ["src", "marshmallow", "fields", "py", "field", "def", "_validate_missing", "self", "value", "validate", "missing", "values", "raise", "a", "exc", "validationerror", "if", "value", "should", "be", "considered", "missing", "if", "value", "is", "missing_", "if", "hasattr", "self", "required", "and", "self", "required", "self", "fail", "required", "if", "value", "is", "none", "if", "hasattr", "self", "allow_none", "and", "self", "allow_none", "is", "not", "true", "self", "fail", "null"], "doc_len": 53}
{"doc_id": "src/marshmallow/fields.py::Field.serialize", "file_path": "src/marshmallow/fields.py", "class_name": "Field", "func_name": "serialize", "text": "文件路径: src/marshmallow/fields.py, 类名: Field\n    def serialize(self, attr, obj, accessor=None):\n        \"\"\"Pulls the value for the given key from the object, applies the\n        field's formatting and returns the result.\n\n        :param str attr: The attibute or key to get from the object.\n        :param str obj: The object to pull the key from.\n        :param callable accessor: Function used to pull values from ``obj``.\n        :raise ValidationError: In case of formatting problem\n        \"\"\"\n        if self._CHECK_ATTRIBUTE:\n            value = self.get_value(attr, obj, accessor=accessor)\n            if value is missing_:\n                if hasattr(self, 'default'):\n                    if callable(self.default):\n                        return self.default()\n                    else:\n                        return self.default\n        else:\n            value = None\n        return self._serialize(value, attr, obj)\n", "tokens": ["src", "marshmallow", "fields", "py", "field", "def", "serialize", "self", "attr", "obj", "accessor", "none", "pulls", "the", "value", "for", "the", "given", "key", "from", "the", "object", "applies", "the", "field", "s", "formatting", "and", "returns", "the", "result", "param", "str", "attr", "the", "attibute", "or", "key", "to", "get", "from", "the", "object", "param", "str", "obj", "the", "object", "to", "pull", "the", "key", "from", "param", "callable", "accessor", "function", "used", "to", "pull", "values", "from", "obj", "raise", "validationerror", "in", "case", "of", "formatting", "problem", "if", "self", "_check_attribute", "value", "self", "get_value", "attr", "obj", "accessor", "accessor", "if", "value", "is", "missing_", "if", "hasattr", "self", "default", "if", "callable", "self", "default", "return", "self", "default", "else", "return", "self", "default", "else", "value", "none", "return", "self", "_serialize", "value", "attr", "obj"], "doc_len": 108}
{"doc_id": "src/marshmallow/fields.py::Field.deserialize", "file_path": "src/marshmallow/fields.py", "class_name": "Field", "func_name": "deserialize", "text": "文件路径: src/marshmallow/fields.py, 类名: Field\n    def deserialize(self, value, attr=None, data=None):\n        \"\"\"Deserialize ``value``.\n\n        :raise ValidationError: If an invalid value is passed or if a required value\n            is missing.\n        \"\"\"\n        # Validate required fields, deserialize, then validate\n        # deserialized value\n        self._validate_missing(value)\n        if getattr(self, 'allow_none', False) is True and value is None:\n            return None\n        output = self._deserialize(value, attr, data)\n        self._validate(output)\n        return output\n", "tokens": ["src", "marshmallow", "fields", "py", "field", "def", "deserialize", "self", "value", "attr", "none", "data", "none", "deserialize", "value", "raise", "validationerror", "if", "an", "invalid", "value", "is", "passed", "or", "if", "a", "required", "value", "is", "missing", "validate", "required", "fields", "deserialize", "then", "validate", "deserialized", "value", "self", "_validate_missing", "value", "if", "getattr", "self", "allow_none", "false", "is", "true", "and", "value", "is", "none", "return", "none", "output", "self", "_deserialize", "value", "attr", "data", "self", "_validate", "output", "return", "output"], "doc_len": 65}
{"doc_id": "src/marshmallow/fields.py::Field._add_to_schema", "file_path": "src/marshmallow/fields.py", "class_name": "Field", "func_name": "_add_to_schema", "text": "文件路径: src/marshmallow/fields.py, 类名: Field\n    def _add_to_schema(self, field_name, schema):\n        \"\"\"Update field with values from its parent schema. Called by\n            :meth:`__set_field_attrs <marshmallow.Schema.__set_field_attrs>`.\n\n        :param str field_name: Field name set in schema.\n        :param Schema schema: Parent schema.\n        \"\"\"\n        self.parent = self.parent or schema\n        self.name = self.name or field_name\n", "tokens": ["src", "marshmallow", "fields", "py", "field", "def", "_add_to_schema", "self", "field_name", "schema", "update", "field", "with", "values", "from", "its", "parent", "schema", "called", "by", "meth", "__set_field_attrs", "marshmallow", "schema", "__set_field_attrs", "param", "str", "field_name", "field", "name", "set", "in", "schema", "param", "schema", "schema", "parent", "schema", "self", "parent", "self", "parent", "or", "schema", "self", "name", "self", "name", "or", "field_name"], "doc_len": 50}
{"doc_id": "src/marshmallow/fields.py::Field._serialize", "file_path": "src/marshmallow/fields.py", "class_name": "Field", "func_name": "_serialize", "text": "文件路径: src/marshmallow/fields.py, 类名: Field\n    def _serialize(self, value, attr, obj):\n        \"\"\"Serializes ``value`` to a basic Python datatype. Noop by default.\n        Concrete :class:`Field` classes should implement this method.\n\n        Example: ::\n\n            class TitleCase(Field):\n                def _serialize(self, value, attr, obj):\n                    if not value:\n                        return ''\n                    return unicode(value).title()\n\n        :param value: The value to be serialized.\n        :param str attr: The attribute or key on the object to be serialized.\n        :param object obj: The object the value was pulled from.\n        :raise ValidationError: In case of formatting or validation failure.\n        :return: The serialized value\n        \"\"\"\n        return value\n", "tokens": ["src", "marshmallow", "fields", "py", "field", "def", "_serialize", "self", "value", "attr", "obj", "serializes", "value", "to", "a", "basic", "python", "datatype", "noop", "by", "default", "concrete", "class", "field", "classes", "should", "implement", "this", "method", "example", "class", "titlecase", "field", "def", "_serialize", "self", "value", "attr", "obj", "if", "not", "value", "return", "return", "unicode", "value", "title", "param", "value", "the", "value", "to", "be", "serialized", "param", "str", "attr", "the", "attribute", "or", "key", "on", "the", "object", "to", "be", "serialized", "param", "object", "obj", "the", "object", "the", "value", "was", "pulled", "from", "raise", "validationerror", "in", "case", "of", "formatting", "or", "validation", "failure", "return", "the", "serialized", "value", "return", "value"], "doc_len": 92}
{"doc_id": "src/marshmallow/fields.py::Field._deserialize", "file_path": "src/marshmallow/fields.py", "class_name": "Field", "func_name": "_deserialize", "text": "文件路径: src/marshmallow/fields.py, 类名: Field\n    def _deserialize(self, value, attr, data):\n        \"\"\"Deserialize value. Concrete :class:`Field` classes should implement this method.\n\n        :param value: The value to be deserialized.\n        :param str attr: The attribute/key in `data` to be deserialized.\n        :param dict data: The raw input data passed to the `Schema.load`.\n        :raise ValidationError: In case of formatting or validation failure.\n        :return: The deserialized value.\n\n        .. versionchanged:: 2.0.0\n            Added ``attr`` and ``data`` parameters.\n        \"\"\"\n        return value\n", "tokens": ["src", "marshmallow", "fields", "py", "field", "def", "_deserialize", "self", "value", "attr", "data", "deserialize", "value", "concrete", "class", "field", "classes", "should", "implement", "this", "method", "param", "value", "the", "value", "to", "be", "deserialized", "param", "str", "attr", "the", "attribute", "key", "in", "data", "to", "be", "deserialized", "param", "dict", "data", "the", "raw", "input", "data", "passed", "to", "the", "schema", "load", "raise", "validationerror", "in", "case", "of", "formatting", "or", "validation", "failure", "return", "the", "deserialized", "value", "versionchanged", "2", "0", "0", "added", "attr", "and", "data", "parameters", "return", "value"], "doc_len": 75}
{"doc_id": "src/marshmallow/fields.py::Field.context", "file_path": "src/marshmallow/fields.py", "class_name": "Field", "func_name": "context", "text": "文件路径: src/marshmallow/fields.py, 类名: Field\n    def context(self):\n        \"\"\"The context dictionary for the parent :class:`Schema`.\"\"\"\n        return self.parent.context\n", "tokens": ["src", "marshmallow", "fields", "py", "field", "def", "context", "self", "the", "context", "dictionary", "for", "the", "parent", "class", "schema", "return", "self", "parent", "context"], "doc_len": 20}
{"doc_id": "src/marshmallow/fields.py::Field.root", "file_path": "src/marshmallow/fields.py", "class_name": "Field", "func_name": "root", "text": "文件路径: src/marshmallow/fields.py, 类名: Field\n    def root(self):\n        \"\"\"Reference to the `Schema` that this field belongs to even if it is buried in a `List`.\n        Return `None` for unbound fields.\n        \"\"\"\n        ret = self\n        while hasattr(ret, 'parent') and ret.parent:\n            ret = ret.parent\n        return ret if isinstance(ret, SchemaABC) else None\n", "tokens": ["src", "marshmallow", "fields", "py", "field", "def", "root", "self", "reference", "to", "the", "schema", "that", "this", "field", "belongs", "to", "even", "if", "it", "is", "buried", "in", "a", "list", "return", "none", "for", "unbound", "fields", "ret", "self", "while", "hasattr", "ret", "parent", "and", "ret", "parent", "ret", "ret", "parent", "return", "ret", "if", "isinstance", "ret", "schemaabc", "else", "none"], "doc_len": 50}
{"doc_id": "src/marshmallow/fields.py::Nested.__init__", "file_path": "src/marshmallow/fields.py", "class_name": "Nested", "func_name": "__init__", "text": "文件路径: src/marshmallow/fields.py, 类名: Nested\n    def __init__(self, nested, default=missing_, exclude=tuple(), only=None, **kwargs):\n        self.nested = nested\n        self.only = only\n        self.exclude = exclude\n        self.many = kwargs.get('many', False)\n        self.__schema = None  # Cached Schema instance\n        self.__updated_fields = False\n        super(Nested, self).__init__(default=default, **kwargs)\n", "tokens": ["src", "marshmallow", "fields", "py", "nested", "def", "__init__", "self", "nested", "default", "missing_", "exclude", "tuple", "only", "none", "kwargs", "self", "nested", "nested", "self", "only", "only", "self", "exclude", "exclude", "self", "many", "kwargs", "get", "many", "false", "self", "__schema", "none", "cached", "schema", "instance", "self", "__updated_fields", "false", "super", "nested", "self", "__init__", "default", "default", "kwargs"], "doc_len": 47}
{"doc_id": "src/marshmallow/fields.py::Nested.schema", "file_path": "src/marshmallow/fields.py", "class_name": "Nested", "func_name": "schema", "text": "文件路径: src/marshmallow/fields.py, 类名: Nested\n    def schema(self):\n        \"\"\"The nested Schema object.\n\n        .. versionchanged:: 1.0.0\n            Renamed from `serializer` to `schema`\n        \"\"\"\n        if not self.__schema:\n            # Ensure that only parameter is a tuple\n            if isinstance(self.only, basestring):\n                only = (self.only,)\n            else:\n                only = self.only\n\n            # Inherit context from parent.\n            context = getattr(self.parent, 'context', {})\n            if isinstance(self.nested, SchemaABC):\n                self.__schema = self.nested\n                self.__schema.context.update(context)\n            elif isinstance(self.nested, type) and \\\n                    issubclass(self.nested, SchemaABC):\n                self.__schema = self.nested(many=self.many,\n                        only=only, exclude=self.exclude, context=context,\n                        load_only=self._nested_normalized_option('load_only'),\n                        dump_only=self._nested_normalized_option('dump_only'))\n            elif isinstance(self.nested, basestring):\n                if self.nested == _RECURSIVE_NESTED:\n                    parent_class = self.parent.__class__\n                    self.__schema = parent_class(many=self.many, only=only,\n                            exclude=self.exclude, context=context,\n                            load_only=self._nested_normalized_option('load_only'),\n                            dump_only=self._nested_normalized_option('dump_only'))\n                else:\n                    schema_class = class_registry.get_class(self.nested)\n                    self.__schema = schema_class(many=self.many,\n                            only=only, exclude=self.exclude, context=context,\n                            load_only=self._nested_normalized_option('load_only'),\n                            dump_only=self._nested_normalized_option('dump_only'))\n            else:\n                raise ValueError('Nested fields must be passed a '\n                                 'Schema, not {0}.'.format(self.nested.__class__))\n            self.__schema.ordered = getattr(self.parent, 'ordered', False)\n        return self.__schema\n", "tokens": ["src", "marshmallow", "fields", "py", "nested", "def", "schema", "self", "the", "nested", "schema", "object", "versionchanged", "1", "0", "0", "renamed", "from", "serializer", "to", "schema", "if", "not", "self", "__schema", "ensure", "that", "only", "parameter", "is", "a", "tuple", "if", "isinstance", "self", "only", "basestring", "only", "self", "only", "else", "only", "self", "only", "inherit", "context", "from", "parent", "context", "getattr", "self", "parent", "context", "if", "isinstance", "self", "nested", "schemaabc", "self", "__schema", "self", "nested", "self", "__schema", "context", "update", "context", "elif", "isinstance", "self", "nested", "type", "and", "issubclass", "self", "nested", "schemaabc", "self", "__schema", "self", "nested", "many", "self", "many", "only", "only", "exclude", "self", "exclude", "context", "context", "load_only", "self", "_nested_normalized_option", "load_only", "dump_only", "self", "_nested_normalized_option", "dump_only", "elif", "isinstance", "self", "nested", "basestring", "if", "self", "nested", "_recursive_nested", "parent_class", "self", "parent", "__class__", "self", "__schema", "parent_class", "many", "self", "many", "only", "only", "exclude", "self", "exclude", "context", "context", "load_only", "self", "_nested_normalized_option", "load_only", "dump_only", "self", "_nested_normalized_option", "dump_only", "else", "schema_class", "class_registry", "get_class", "self", "nested", "self", "__schema", "schema_class", "many", "self", "many", "only", "only", "exclude", "self", "exclude", "context", "context", "load_only", "self", "_nested_normalized_option", "load_only", "dump_only", "self", "_nested_normalized_option", "dump_only", "else", "raise", "valueerror", "nested", "fields", "must", "be", "passed", "a", "schema", "not", "0", "format", "self", "nested", "__class__", "self", "__schema", "ordered", "getattr", "self", "parent", "ordered", "false", "return", "self", "__schema"], "doc_len": 187}
{"doc_id": "src/marshmallow/fields.py::Nested._nested_normalized_option", "file_path": "src/marshmallow/fields.py", "class_name": "Nested", "func_name": "_nested_normalized_option", "text": "文件路径: src/marshmallow/fields.py, 类名: Nested\n    def _nested_normalized_option(self, option_name):\n        nested_field = '%s.' % self.name\n        return [field.split(nested_field, 1)[1]\n                for field in getattr(self.root, option_name, set())\n                if field.startswith(nested_field)]\n", "tokens": ["src", "marshmallow", "fields", "py", "nested", "def", "_nested_normalized_option", "self", "option_name", "nested_field", "s", "self", "name", "return", "field", "split", "nested_field", "1", "1", "for", "field", "in", "getattr", "self", "root", "option_name", "set", "if", "field", "startswith", "nested_field"], "doc_len": 31}
{"doc_id": "src/marshmallow/fields.py::Nested._serialize", "file_path": "src/marshmallow/fields.py", "class_name": "Nested", "func_name": "_serialize", "text": "文件路径: src/marshmallow/fields.py, 类名: Nested\n    def _serialize(self, nested_obj, attr, obj):\n        # Load up the schema first. This allows a RegistryError to be raised\n        # if an invalid schema name was passed\n        schema = self.schema\n        if nested_obj is None:\n            return None\n        if self.many and utils.is_iterable_but_not_string(nested_obj):\n            nested_obj = list(nested_obj)\n        if not self.__updated_fields:\n            schema._update_fields(obj=nested_obj, many=self.many)\n            self.__updated_fields = True\n        ret, errors = schema.dump(nested_obj, many=self.many,\n                update_fields=not self.__updated_fields)\n        if isinstance(self.only, basestring):  # self.only is a field name\n            only_field = self.schema.fields[self.only]\n            key = ''.join([self.schema.prefix or '', only_field.dump_to or self.only])\n            if self.many:\n                return utils.pluck(ret, key=key)\n            else:\n                return ret[key]\n        if errors:\n            raise ValidationError(errors, data=ret)\n        return ret\n", "tokens": ["src", "marshmallow", "fields", "py", "nested", "def", "_serialize", "self", "nested_obj", "attr", "obj", "load", "up", "the", "schema", "first", "this", "allows", "a", "registryerror", "to", "be", "raised", "if", "an", "invalid", "schema", "name", "was", "passed", "schema", "self", "schema", "if", "nested_obj", "is", "none", "return", "none", "if", "self", "many", "and", "utils", "is_iterable_but_not_string", "nested_obj", "nested_obj", "list", "nested_obj", "if", "not", "self", "__updated_fields", "schema", "_update_fields", "obj", "nested_obj", "many", "self", "many", "self", "__updated_fields", "true", "ret", "errors", "schema", "dump", "nested_obj", "many", "self", "many", "update_fields", "not", "self", "__updated_fields", "if", "isinstance", "self", "only", "basestring", "self", "only", "is", "a", "field", "name", "only_field", "self", "schema", "fields", "self", "only", "key", "join", "self", "schema", "prefix", "or", "only_field", "dump_to", "or", "self", "only", "if", "self", "many", "return", "utils", "pluck", "ret", "key", "key", "else", "return", "ret", "key", "if", "errors", "raise", "validationerror", "errors", "data", "ret", "return", "ret"], "doc_len": 125}
{"doc_id": "src/marshmallow/fields.py::Nested._deserialize", "file_path": "src/marshmallow/fields.py", "class_name": "Nested", "func_name": "_deserialize", "text": "文件路径: src/marshmallow/fields.py, 类名: Nested\n    def _deserialize(self, value, attr, data):\n        if self.many and not utils.is_collection(value):\n            self.fail('type', input=value, type=value.__class__.__name__)\n\n        data, errors = self.schema.load(value)\n        if errors:\n            raise ValidationError(errors, data=data)\n        return data\n", "tokens": ["src", "marshmallow", "fields", "py", "nested", "def", "_deserialize", "self", "value", "attr", "data", "if", "self", "many", "and", "not", "utils", "is_collection", "value", "self", "fail", "type", "input", "value", "type", "value", "__class__", "__name__", "data", "errors", "self", "schema", "load", "value", "if", "errors", "raise", "validationerror", "errors", "data", "data", "return", "data"], "doc_len": 43}
{"doc_id": "src/marshmallow/fields.py::Nested._validate_missing", "file_path": "src/marshmallow/fields.py", "class_name": "Nested", "func_name": "_validate_missing", "text": "文件路径: src/marshmallow/fields.py, 类名: Nested\n    def _validate_missing(self, value):\n        \"\"\"Validate missing values. Raise a :exc:`ValidationError` if\n        `value` should be considered missing.\n        \"\"\"\n        if value is missing_ and hasattr(self, 'required'):\n            if self.nested == _RECURSIVE_NESTED:\n                self.fail('required')\n            errors = self._check_required()\n            if errors:\n                raise ValidationError(errors)\n        else:\n            super(Nested, self)._validate_missing(value)\n", "tokens": ["src", "marshmallow", "fields", "py", "nested", "def", "_validate_missing", "self", "value", "validate", "missing", "values", "raise", "a", "exc", "validationerror", "if", "value", "should", "be", "considered", "missing", "if", "value", "is", "missing_", "and", "hasattr", "self", "required", "if", "self", "nested", "_recursive_nested", "self", "fail", "required", "errors", "self", "_check_required", "if", "errors", "raise", "validationerror", "errors", "else", "super", "nested", "self", "_validate_missing", "value"], "doc_len": 51}
{"doc_id": "src/marshmallow/fields.py::Nested._check_required", "file_path": "src/marshmallow/fields.py", "class_name": "Nested", "func_name": "_check_required", "text": "文件路径: src/marshmallow/fields.py, 类名: Nested\n    def _check_required(self):\n        errors = {}\n        if self.required:\n            for field_name, field in self.schema.fields.items():\n                if not field.required:\n                    continue\n                error_field_name = field.load_from or field_name\n                if (\n                    isinstance(field, Nested) and\n                    self.nested != _RECURSIVE_NESTED and\n                    field.nested != _RECURSIVE_NESTED\n                ):\n                    errors[error_field_name] = field._check_required()\n                else:\n                    try:\n                        field._validate_missing(field.missing)\n                    except ValidationError as ve:\n                        errors[error_field_name] = ve.messages\n            if self.many and errors:\n                errors = {0: errors}\n            # No inner errors; just raise required error like normal\n            if not errors:\n                self.fail('required')\n        return errors\n", "tokens": ["src", "marshmallow", "fields", "py", "nested", "def", "_check_required", "self", "errors", "if", "self", "required", "for", "field_name", "field", "in", "self", "schema", "fields", "items", "if", "not", "field", "required", "continue", "error_field_name", "field", "load_from", "or", "field_name", "if", "isinstance", "field", "nested", "and", "self", "nested", "_recursive_nested", "and", "field", "nested", "_recursive_nested", "errors", "error_field_name", "field", "_check_required", "else", "try", "field", "_validate_missing", "field", "missing", "except", "validationerror", "as", "ve", "errors", "error_field_name", "ve", "messages", "if", "self", "many", "and", "errors", "errors", "0", "errors", "no", "inner", "errors", "just", "raise", "required", "error", "like", "normal", "if", "not", "errors", "self", "fail", "required", "return", "errors"], "doc_len": 85}
{"doc_id": "src/marshmallow/fields.py::List.__init__", "file_path": "src/marshmallow/fields.py", "class_name": "List", "func_name": "__init__", "text": "文件路径: src/marshmallow/fields.py, 类名: List\n    def __init__(self, cls_or_instance, **kwargs):\n        super(List, self).__init__(**kwargs)\n        if isinstance(cls_or_instance, type):\n            if not issubclass(cls_or_instance, FieldABC):\n                raise ValueError('The type of the list elements '\n                                           'must be a subclass of '\n                                           'marshmallow.base.FieldABC')\n            self.container = cls_or_instance()\n        else:\n            if not isinstance(cls_or_instance, FieldABC):\n                raise ValueError('The instances of the list '\n                                           'elements must be of type '\n                                           'marshmallow.base.FieldABC')\n            self.container = cls_or_instance\n", "tokens": ["src", "marshmallow", "fields", "py", "list", "def", "__init__", "self", "cls_or_instance", "kwargs", "super", "list", "self", "__init__", "kwargs", "if", "isinstance", "cls_or_instance", "type", "if", "not", "issubclass", "cls_or_instance", "fieldabc", "raise", "valueerror", "the", "type", "of", "the", "list", "elements", "must", "be", "a", "subclass", "of", "marshmallow", "base", "fieldabc", "self", "container", "cls_or_instance", "else", "if", "not", "isinstance", "cls_or_instance", "fieldabc", "raise", "valueerror", "the", "instances", "of", "the", "list", "elements", "must", "be", "of", "type", "marshmallow", "base", "fieldabc", "self", "container", "cls_or_instance"], "doc_len": 67}
{"doc_id": "src/marshmallow/fields.py::List.get_value", "file_path": "src/marshmallow/fields.py", "class_name": "List", "func_name": "get_value", "text": "文件路径: src/marshmallow/fields.py, 类名: List\n    def get_value(self, attr, obj, accessor=None):\n        \"\"\"Return the value for a given key from an object.\"\"\"\n        value = super(List, self).get_value(attr, obj, accessor=accessor)\n        if self.container.attribute:\n            if utils.is_collection(value):\n                return [\n                    self.container.get_value(self.container.attribute, each)\n                    for each in value\n                ]\n            return self.container.get_value(self.container.attribute, value)\n        return value\n", "tokens": ["src", "marshmallow", "fields", "py", "list", "def", "get_value", "self", "attr", "obj", "accessor", "none", "return", "the", "value", "for", "a", "given", "key", "from", "an", "object", "value", "super", "list", "self", "get_value", "attr", "obj", "accessor", "accessor", "if", "self", "container", "attribute", "if", "utils", "is_collection", "value", "return", "self", "container", "get_value", "self", "container", "attribute", "each", "for", "each", "in", "value", "return", "self", "container", "get_value", "self", "container", "attribute", "value", "return", "value"], "doc_len": 61}
{"doc_id": "src/marshmallow/fields.py::List._add_to_schema", "file_path": "src/marshmallow/fields.py", "class_name": "List", "func_name": "_add_to_schema", "text": "文件路径: src/marshmallow/fields.py, 类名: List\n    def _add_to_schema(self, field_name, schema):\n        super(List, self)._add_to_schema(field_name, schema)\n        self.container = copy.deepcopy(self.container)\n        self.container.parent = self\n        self.container.name = field_name\n", "tokens": ["src", "marshmallow", "fields", "py", "list", "def", "_add_to_schema", "self", "field_name", "schema", "super", "list", "self", "_add_to_schema", "field_name", "schema", "self", "container", "copy", "deepcopy", "self", "container", "self", "container", "parent", "self", "self", "container", "name", "field_name"], "doc_len": 30}
{"doc_id": "src/marshmallow/fields.py::List._serialize", "file_path": "src/marshmallow/fields.py", "class_name": "List", "func_name": "_serialize", "text": "文件路径: src/marshmallow/fields.py, 类名: List\n    def _serialize(self, value, attr, obj):\n        if value is None:\n            return None\n        if utils.is_collection(value):\n            return [self.container._serialize(each, attr, obj) for each in value]\n        return [self.container._serialize(value, attr, obj)]\n", "tokens": ["src", "marshmallow", "fields", "py", "list", "def", "_serialize", "self", "value", "attr", "obj", "if", "value", "is", "none", "return", "none", "if", "utils", "is_collection", "value", "return", "self", "container", "_serialize", "each", "attr", "obj", "for", "each", "in", "value", "return", "self", "container", "_serialize", "value", "attr", "obj"], "doc_len": 39}
{"doc_id": "src/marshmallow/fields.py::List._deserialize", "file_path": "src/marshmallow/fields.py", "class_name": "List", "func_name": "_deserialize", "text": "文件路径: src/marshmallow/fields.py, 类名: List\n    def _deserialize(self, value, attr, data):\n        if not utils.is_collection(value):\n            self.fail('invalid')\n\n        result = []\n        errors = {}\n        for idx, each in enumerate(value):\n            try:\n                result.append(self.container.deserialize(each))\n            except ValidationError as e:\n                result.append(e.data)\n                errors.update({idx: e.messages})\n\n        if errors:\n            raise ValidationError(errors, data=result)\n\n        return result\n", "tokens": ["src", "marshmallow", "fields", "py", "list", "def", "_deserialize", "self", "value", "attr", "data", "if", "not", "utils", "is_collection", "value", "self", "fail", "invalid", "result", "errors", "for", "idx", "each", "in", "enumerate", "value", "try", "result", "append", "self", "container", "deserialize", "each", "except", "validationerror", "as", "e", "result", "append", "e", "data", "errors", "update", "idx", "e", "messages", "if", "errors", "raise", "validationerror", "errors", "data", "result", "return", "result"], "doc_len": 56}
{"doc_id": "src/marshmallow/fields.py::String._serialize", "file_path": "src/marshmallow/fields.py", "class_name": "String", "func_name": "_serialize", "text": "文件路径: src/marshmallow/fields.py, 类名: String\n    def _serialize(self, value, attr, obj):\n        if value is None:\n            return None\n        return utils.ensure_text_type(value)\n", "tokens": ["src", "marshmallow", "fields", "py", "string", "def", "_serialize", "self", "value", "attr", "obj", "if", "value", "is", "none", "return", "none", "return", "utils", "ensure_text_type", "value"], "doc_len": 21}
{"doc_id": "src/marshmallow/fields.py::String._deserialize", "file_path": "src/marshmallow/fields.py", "class_name": "String", "func_name": "_deserialize", "text": "文件路径: src/marshmallow/fields.py, 类名: String\n    def _deserialize(self, value, attr, data):\n        if not isinstance(value, basestring):\n            self.fail('invalid')\n        try:\n            return utils.ensure_text_type(value)\n        except UnicodeDecodeError:\n            self.fail('invalid_utf8')\n", "tokens": ["src", "marshmallow", "fields", "py", "string", "def", "_deserialize", "self", "value", "attr", "data", "if", "not", "isinstance", "value", "basestring", "self", "fail", "invalid", "try", "return", "utils", "ensure_text_type", "value", "except", "unicodedecodeerror", "self", "fail", "invalid_utf8"], "doc_len": 29}
{"doc_id": "src/marshmallow/fields.py::UUID._validated", "file_path": "src/marshmallow/fields.py", "class_name": "UUID", "func_name": "_validated", "text": "文件路径: src/marshmallow/fields.py, 类名: UUID\n    def _validated(self, value):\n        \"\"\"Format the value or raise a :exc:`ValidationError` if an error occurs.\"\"\"\n        if value is None:\n            return None\n        if isinstance(value, uuid.UUID):\n            return value\n        try:\n            return uuid.UUID(value)\n        except (ValueError, AttributeError):\n            self.fail('invalid_uuid')\n", "tokens": ["src", "marshmallow", "fields", "py", "uuid", "def", "_validated", "self", "value", "format", "the", "value", "or", "raise", "a", "exc", "validationerror", "if", "an", "error", "occurs", "if", "value", "is", "none", "return", "none", "if", "isinstance", "value", "uuid", "uuid", "return", "value", "try", "return", "uuid", "uuid", "value", "except", "valueerror", "attributeerror", "self", "fail", "invalid_uuid"], "doc_len": 45}
{"doc_id": "src/marshmallow/fields.py::UUID._serialize", "file_path": "src/marshmallow/fields.py", "class_name": "UUID", "func_name": "_serialize", "text": "文件路径: src/marshmallow/fields.py, 类名: UUID\n    def _serialize(self, value, attr, obj):\n        validated = str(self._validated(value)) if value is not None else None\n        return super(String, self)._serialize(validated, attr, obj)\n", "tokens": ["src", "marshmallow", "fields", "py", "uuid", "def", "_serialize", "self", "value", "attr", "obj", "validated", "str", "self", "_validated", "value", "if", "value", "is", "not", "none", "else", "none", "return", "super", "string", "self", "_serialize", "validated", "attr", "obj"], "doc_len": 31}
{"doc_id": "src/marshmallow/fields.py::UUID._deserialize", "file_path": "src/marshmallow/fields.py", "class_name": "UUID", "func_name": "_deserialize", "text": "文件路径: src/marshmallow/fields.py, 类名: UUID\n    def _deserialize(self, value, attr, data):\n        return self._validated(value)\n", "tokens": ["src", "marshmallow", "fields", "py", "uuid", "def", "_deserialize", "self", "value", "attr", "data", "return", "self", "_validated", "value"], "doc_len": 15}
{"doc_id": "src/marshmallow/fields.py::Number.__init__", "file_path": "src/marshmallow/fields.py", "class_name": "Number", "func_name": "__init__", "text": "文件路径: src/marshmallow/fields.py, 类名: Number\n    def __init__(self, as_string=False, **kwargs):\n        self.as_string = as_string\n        super(Number, self).__init__(**kwargs)\n", "tokens": ["src", "marshmallow", "fields", "py", "number", "def", "__init__", "self", "as_string", "false", "kwargs", "self", "as_string", "as_string", "super", "number", "self", "__init__", "kwargs"], "doc_len": 19}
{"doc_id": "src/marshmallow/fields.py::Number._format_num", "file_path": "src/marshmallow/fields.py", "class_name": "Number", "func_name": "_format_num", "text": "文件路径: src/marshmallow/fields.py, 类名: Number\n    def _format_num(self, value):\n        \"\"\"Return the number value for value, given this field's `num_type`.\"\"\"\n        if value is None:\n            return None\n        return self.num_type(value)\n", "tokens": ["src", "marshmallow", "fields", "py", "number", "def", "_format_num", "self", "value", "return", "the", "number", "value", "for", "value", "given", "this", "field", "s", "num_type", "if", "value", "is", "none", "return", "none", "return", "self", "num_type", "value"], "doc_len": 30}
{"doc_id": "src/marshmallow/fields.py::Number._validated", "file_path": "src/marshmallow/fields.py", "class_name": "Number", "func_name": "_validated", "text": "文件路径: src/marshmallow/fields.py, 类名: Number\n    def _validated(self, value):\n        \"\"\"Format the value or raise a :exc:`ValidationError` if an error occurs.\"\"\"\n        try:\n            return self._format_num(value)\n        except (TypeError, ValueError):\n            self.fail('invalid')\n        except OverflowError:\n            self.fail('too_large')\n", "tokens": ["src", "marshmallow", "fields", "py", "number", "def", "_validated", "self", "value", "format", "the", "value", "or", "raise", "a", "exc", "validationerror", "if", "an", "error", "occurs", "try", "return", "self", "_format_num", "value", "except", "typeerror", "valueerror", "self", "fail", "invalid", "except", "overflowerror", "self", "fail", "too_large"], "doc_len": 37}
{"doc_id": "src/marshmallow/fields.py::Number._to_string", "file_path": "src/marshmallow/fields.py", "class_name": "Number", "func_name": "_to_string", "text": "文件路径: src/marshmallow/fields.py, 类名: Number\n    def _to_string(self, value):\n        return str(value)\n", "tokens": ["src", "marshmallow", "fields", "py", "number", "def", "_to_string", "self", "value", "return", "str", "value"], "doc_len": 12}
{"doc_id": "src/marshmallow/fields.py::Number._serialize", "file_path": "src/marshmallow/fields.py", "class_name": "Number", "func_name": "_serialize", "text": "文件路径: src/marshmallow/fields.py, 类名: Number\n    def _serialize(self, value, attr, obj):\n        \"\"\"Return a string if `self.as_string=True`, otherwise return this field's `num_type`.\"\"\"\n        ret = self._validated(value)\n        return self._to_string(ret) if (self.as_string and ret not in (None, missing_)) else ret\n", "tokens": ["src", "marshmallow", "fields", "py", "number", "def", "_serialize", "self", "value", "attr", "obj", "return", "a", "string", "if", "self", "as_string", "true", "otherwise", "return", "this", "field", "s", "num_type", "ret", "self", "_validated", "value", "return", "self", "_to_string", "ret", "if", "self", "as_string", "and", "ret", "not", "in", "none", "missing_", "else", "ret"], "doc_len": 43}
{"doc_id": "src/marshmallow/fields.py::Number._deserialize", "file_path": "src/marshmallow/fields.py", "class_name": "Number", "func_name": "_deserialize", "text": "文件路径: src/marshmallow/fields.py, 类名: Number\n    def _deserialize(self, value, attr, data):\n        return self._validated(value)\n", "tokens": ["src", "marshmallow", "fields", "py", "number", "def", "_deserialize", "self", "value", "attr", "data", "return", "self", "_validated", "value"], "doc_len": 15}
{"doc_id": "src/marshmallow/fields.py::Decimal.__init__", "file_path": "src/marshmallow/fields.py", "class_name": "Decimal", "func_name": "__init__", "text": "文件路径: src/marshmallow/fields.py, 类名: Decimal\n    def __init__(self, places=None, rounding=None, allow_nan=False, as_string=False, **kwargs):\n        self.places = decimal.Decimal((0, (1,), -places)) if places is not None else None\n        self.rounding = rounding\n        self.allow_nan = allow_nan\n        super(Decimal, self).__init__(as_string=as_string, **kwargs)\n", "tokens": ["src", "marshmallow", "fields", "py", "decimal", "def", "__init__", "self", "places", "none", "rounding", "none", "allow_nan", "false", "as_string", "false", "kwargs", "self", "places", "decimal", "decimal", "0", "1", "places", "if", "places", "is", "not", "none", "else", "none", "self", "rounding", "rounding", "self", "allow_nan", "allow_nan", "super", "decimal", "self", "__init__", "as_string", "as_string", "kwargs"], "doc_len": 44}
{"doc_id": "src/marshmallow/fields.py::Decimal._format_num", "file_path": "src/marshmallow/fields.py", "class_name": "Decimal", "func_name": "_format_num", "text": "文件路径: src/marshmallow/fields.py, 类名: Decimal\n    def _format_num(self, value):\n        if value is None:\n            return None\n\n        num = decimal.Decimal(str(value))\n\n        if self.allow_nan:\n            if num.is_nan():\n                return decimal.Decimal('NaN')  # avoid sNaN, -sNaN and -NaN\n        else:\n            if num.is_nan() or num.is_infinite():\n                self.fail('special')\n\n        if self.places is not None and num.is_finite():\n            num = num.quantize(self.places, rounding=self.rounding)\n\n        return num\n", "tokens": ["src", "marshmallow", "fields", "py", "decimal", "def", "_format_num", "self", "value", "if", "value", "is", "none", "return", "none", "num", "decimal", "decimal", "str", "value", "if", "self", "allow_nan", "if", "num", "is_nan", "return", "decimal", "decimal", "nan", "avoid", "snan", "snan", "and", "nan", "else", "if", "num", "is_nan", "or", "num", "is_infinite", "self", "fail", "special", "if", "self", "places", "is", "not", "none", "and", "num", "is_finite", "num", "num", "quantize", "self", "places", "rounding", "self", "rounding", "return", "num"], "doc_len": 64}
{"doc_id": "src/marshmallow/fields.py::Decimal._validated", "file_path": "src/marshmallow/fields.py", "class_name": "Decimal", "func_name": "_validated", "text": "文件路径: src/marshmallow/fields.py, 类名: Decimal\n    def _validated(self, value):\n        try:\n            return super(Decimal, self)._validated(value)\n        except decimal.InvalidOperation:\n            self.fail('invalid')\n", "tokens": ["src", "marshmallow", "fields", "py", "decimal", "def", "_validated", "self", "value", "try", "return", "super", "decimal", "self", "_validated", "value", "except", "decimal", "invalidoperation", "self", "fail", "invalid"], "doc_len": 22}
{"doc_id": "src/marshmallow/fields.py::Decimal._to_string", "file_path": "src/marshmallow/fields.py", "class_name": "Decimal", "func_name": "_to_string", "text": "文件路径: src/marshmallow/fields.py, 类名: Decimal\n    def _to_string(self, value):\n        return format(value, 'f')\n", "tokens": ["src", "marshmallow", "fields", "py", "decimal", "def", "_to_string", "self", "value", "return", "format", "value", "f"], "doc_len": 13}
{"doc_id": "src/marshmallow/fields.py::Boolean._serialize", "file_path": "src/marshmallow/fields.py", "class_name": "Boolean", "func_name": "_serialize", "text": "文件路径: src/marshmallow/fields.py, 类名: Boolean\n    def _serialize(self, value, attr, obj):\n        if value is None:\n            return None\n        elif value in self.truthy:\n            return True\n        elif value in self.falsy:\n            return False\n\n        return bool(value)\n", "tokens": ["src", "marshmallow", "fields", "py", "boolean", "def", "_serialize", "self", "value", "attr", "obj", "if", "value", "is", "none", "return", "none", "elif", "value", "in", "self", "truthy", "return", "true", "elif", "value", "in", "self", "falsy", "return", "false", "return", "bool", "value"], "doc_len": 34}
{"doc_id": "src/marshmallow/fields.py::Boolean._deserialize", "file_path": "src/marshmallow/fields.py", "class_name": "Boolean", "func_name": "_deserialize", "text": "文件路径: src/marshmallow/fields.py, 类名: Boolean\n    def _deserialize(self, value, attr, data):\n        if not self.truthy:\n            return bool(value)\n        else:\n            try:\n                if value in self.truthy:\n                    return True\n                elif value in self.falsy:\n                    return False\n            except TypeError:\n                pass\n        self.fail('invalid')\n", "tokens": ["src", "marshmallow", "fields", "py", "boolean", "def", "_deserialize", "self", "value", "attr", "data", "if", "not", "self", "truthy", "return", "bool", "value", "else", "try", "if", "value", "in", "self", "truthy", "return", "true", "elif", "value", "in", "self", "falsy", "return", "false", "except", "typeerror", "pass", "self", "fail", "invalid"], "doc_len": 40}
{"doc_id": "src/marshmallow/fields.py::FormattedString.__init__", "file_path": "src/marshmallow/fields.py", "class_name": "FormattedString", "func_name": "__init__", "text": "文件路径: src/marshmallow/fields.py, 类名: FormattedString\n    def __init__(self, src_str, *args, **kwargs):\n        warnings.warn('FormattedString is deprecated and will be removed in marshmallow 3. '\n                      'Use a Method or Function field instead.', RemovedInMarshmallow3Warning)\n        Field.__init__(self, *args, **kwargs)\n        self.src_str = text_type(src_str)\n", "tokens": ["src", "marshmallow", "fields", "py", "formattedstring", "def", "__init__", "self", "src_str", "args", "kwargs", "warnings", "warn", "formattedstring", "is", "deprecated", "and", "will", "be", "removed", "in", "marshmallow", "3", "use", "a", "method", "or", "function", "field", "instead", "removedinmarshmallow3warning", "field", "__init__", "self", "args", "kwargs", "self", "src_str", "text_type", "src_str"], "doc_len": 40}
{"doc_id": "src/marshmallow/fields.py::FormattedString._serialize", "file_path": "src/marshmallow/fields.py", "class_name": "FormattedString", "func_name": "_serialize", "text": "文件路径: src/marshmallow/fields.py, 类名: FormattedString\n    def _serialize(self, value, attr, obj):\n        try:\n            data = utils.to_marshallable_type(obj)\n            return self.src_str.format(**data)\n        except (TypeError, IndexError):\n            self.fail('format')\n", "tokens": ["src", "marshmallow", "fields", "py", "formattedstring", "def", "_serialize", "self", "value", "attr", "obj", "try", "data", "utils", "to_marshallable_type", "obj", "return", "self", "src_str", "format", "data", "except", "typeerror", "indexerror", "self", "fail", "format"], "doc_len": 27}
{"doc_id": "src/marshmallow/fields.py::DateTime.__init__", "file_path": "src/marshmallow/fields.py", "class_name": "DateTime", "func_name": "__init__", "text": "文件路径: src/marshmallow/fields.py, 类名: DateTime\n    def __init__(self, format=None, **kwargs):\n        super(DateTime, self).__init__(**kwargs)\n        # Allow this to be None. It may be set later in the ``_serialize``\n        # or ``_desrialize`` methods This allows a Schema to dynamically set the\n        # dateformat, e.g. from a Meta option\n        self.dateformat = format\n", "tokens": ["src", "marshmallow", "fields", "py", "datetime", "def", "__init__", "self", "format", "none", "kwargs", "super", "datetime", "self", "__init__", "kwargs", "allow", "this", "to", "be", "none", "it", "may", "be", "set", "later", "in", "the", "_serialize", "or", "_desrialize", "methods", "this", "allows", "a", "schema", "to", "dynamically", "set", "the", "dateformat", "e", "g", "from", "a", "meta", "option", "self", "dateformat", "format"], "doc_len": 50}
{"doc_id": "src/marshmallow/fields.py::DateTime._add_to_schema", "file_path": "src/marshmallow/fields.py", "class_name": "DateTime", "func_name": "_add_to_schema", "text": "文件路径: src/marshmallow/fields.py, 类名: DateTime\n    def _add_to_schema(self, field_name, schema):\n        super(DateTime, self)._add_to_schema(field_name, schema)\n        self.dateformat = self.dateformat or schema.opts.dateformat\n", "tokens": ["src", "marshmallow", "fields", "py", "datetime", "def", "_add_to_schema", "self", "field_name", "schema", "super", "datetime", "self", "_add_to_schema", "field_name", "schema", "self", "dateformat", "self", "dateformat", "or", "schema", "opts", "dateformat"], "doc_len": 24}
{"doc_id": "src/marshmallow/fields.py::DateTime._serialize", "file_path": "src/marshmallow/fields.py", "class_name": "DateTime", "func_name": "_serialize", "text": "文件路径: src/marshmallow/fields.py, 类名: DateTime\n    def _serialize(self, value, attr, obj):\n        if value is None:\n            return None\n        self.dateformat = self.dateformat or self.DEFAULT_FORMAT\n        format_func = self.DATEFORMAT_SERIALIZATION_FUNCS.get(self.dateformat, None)\n        if format_func:\n            try:\n                return format_func(value, localtime=self.localtime)\n            except (AttributeError, ValueError):\n                self.fail('format', input=value)\n        else:\n            return value.strftime(self.dateformat)\n", "tokens": ["src", "marshmallow", "fields", "py", "datetime", "def", "_serialize", "self", "value", "attr", "obj", "if", "value", "is", "none", "return", "none", "self", "dateformat", "self", "dateformat", "or", "self", "default_format", "format_func", "self", "dateformat_serialization_funcs", "get", "self", "dateformat", "none", "if", "format_func", "try", "return", "format_func", "value", "localtime", "self", "localtime", "except", "attributeerror", "valueerror", "self", "fail", "format", "input", "value", "else", "return", "value", "strftime", "self", "dateformat"], "doc_len": 54}
{"doc_id": "src/marshmallow/fields.py::DateTime._deserialize", "file_path": "src/marshmallow/fields.py", "class_name": "DateTime", "func_name": "_deserialize", "text": "文件路径: src/marshmallow/fields.py, 类名: DateTime\n    def _deserialize(self, value, attr, data):\n        if not value:  # Falsy values, e.g. '', None, [] are not valid\n            raise self.fail('invalid')\n        self.dateformat = self.dateformat or self.DEFAULT_FORMAT\n        func = self.DATEFORMAT_DESERIALIZATION_FUNCS.get(self.dateformat)\n        if func:\n            try:\n                return func(value)\n            except (TypeError, AttributeError, ValueError):\n                raise self.fail('invalid')\n        elif self.dateformat:\n            try:\n                return dt.datetime.strptime(value, self.dateformat)\n            except (TypeError, AttributeError, ValueError):\n                raise self.fail('invalid')\n        elif utils.dateutil_available:\n            try:\n                return utils.from_datestring(value)\n            except TypeError:\n                raise self.fail('invalid')\n        else:\n            warnings.warn('It is recommended that you install python-dateutil '\n                          'for improved datetime deserialization.')\n            raise self.fail('invalid')\n", "tokens": ["src", "marshmallow", "fields", "py", "datetime", "def", "_deserialize", "self", "value", "attr", "data", "if", "not", "value", "falsy", "values", "e", "g", "none", "are", "not", "valid", "raise", "self", "fail", "invalid", "self", "dateformat", "self", "dateformat", "or", "self", "default_format", "func", "self", "dateformat_deserialization_funcs", "get", "self", "dateformat", "if", "func", "try", "return", "func", "value", "except", "typeerror", "attributeerror", "valueerror", "raise", "self", "fail", "invalid", "elif", "self", "dateformat", "try", "return", "dt", "datetime", "strptime", "value", "self", "dateformat", "except", "typeerror", "attributeerror", "valueerror", "raise", "self", "fail", "invalid", "elif", "utils", "dateutil_available", "try", "return", "utils", "from_datestring", "value", "except", "typeerror", "raise", "self", "fail", "invalid", "else", "warnings", "warn", "it", "is", "recommended", "that", "you", "install", "python", "dateutil", "for", "improved", "datetime", "deserialization", "raise", "self", "fail", "invalid"], "doc_len": 105}
{"doc_id": "src/marshmallow/fields.py::Time._serialize", "file_path": "src/marshmallow/fields.py", "class_name": "Time", "func_name": "_serialize", "text": "文件路径: src/marshmallow/fields.py, 类名: Time\n    def _serialize(self, value, attr, obj):\n        if value is None:\n            return None\n        try:\n            ret = value.isoformat()\n        except AttributeError:\n            self.fail('format', input=value)\n        if value.microsecond:\n            return ret[:15]\n        return ret\n", "tokens": ["src", "marshmallow", "fields", "py", "time", "def", "_serialize", "self", "value", "attr", "obj", "if", "value", "is", "none", "return", "none", "try", "ret", "value", "isoformat", "except", "attributeerror", "self", "fail", "format", "input", "value", "if", "value", "microsecond", "return", "ret", "15", "return", "ret"], "doc_len": 36}
{"doc_id": "src/marshmallow/fields.py::Time._deserialize", "file_path": "src/marshmallow/fields.py", "class_name": "Time", "func_name": "_deserialize", "text": "文件路径: src/marshmallow/fields.py, 类名: Time\n    def _deserialize(self, value, attr, data):\n        \"\"\"Deserialize an ISO8601-formatted time to a :class:`datetime.time` object.\"\"\"\n        if not value:   # falsy values are invalid\n            self.fail('invalid')\n        try:\n            return utils.from_iso_time(value)\n        except (AttributeError, TypeError, ValueError):\n            self.fail('invalid')\n", "tokens": ["src", "marshmallow", "fields", "py", "time", "def", "_deserialize", "self", "value", "attr", "data", "deserialize", "an", "iso8601", "formatted", "time", "to", "a", "class", "datetime", "time", "object", "if", "not", "value", "falsy", "values", "are", "invalid", "self", "fail", "invalid", "try", "return", "utils", "from_iso_time", "value", "except", "attributeerror", "typeerror", "valueerror", "self", "fail", "invalid"], "doc_len": 44}
{"doc_id": "src/marshmallow/fields.py::Date._serialize", "file_path": "src/marshmallow/fields.py", "class_name": "Date", "func_name": "_serialize", "text": "文件路径: src/marshmallow/fields.py, 类名: Date\n    def _serialize(self, value, attr, obj):\n        if value is None:\n            return None\n        try:\n            return value.isoformat()\n        except AttributeError:\n            self.fail('format', input=value)\n        return value\n", "tokens": ["src", "marshmallow", "fields", "py", "date", "def", "_serialize", "self", "value", "attr", "obj", "if", "value", "is", "none", "return", "none", "try", "return", "value", "isoformat", "except", "attributeerror", "self", "fail", "format", "input", "value", "return", "value"], "doc_len": 30}
{"doc_id": "src/marshmallow/fields.py::Date._deserialize", "file_path": "src/marshmallow/fields.py", "class_name": "Date", "func_name": "_deserialize", "text": "文件路径: src/marshmallow/fields.py, 类名: Date\n    def _deserialize(self, value, attr, data):\n        \"\"\"Deserialize an ISO8601-formatted date string to a\n        :class:`datetime.date` object.\n        \"\"\"\n        if not value:  # falsy values are invalid\n            self.fail('invalid')\n        try:\n            return utils.from_iso_date(value)\n        except (AttributeError, TypeError, ValueError):\n            self.fail('invalid')\n", "tokens": ["src", "marshmallow", "fields", "py", "date", "def", "_deserialize", "self", "value", "attr", "data", "deserialize", "an", "iso8601", "formatted", "date", "string", "to", "a", "class", "datetime", "date", "object", "if", "not", "value", "falsy", "values", "are", "invalid", "self", "fail", "invalid", "try", "return", "utils", "from_iso_date", "value", "except", "attributeerror", "typeerror", "valueerror", "self", "fail", "invalid"], "doc_len": 45}
{"doc_id": "src/marshmallow/fields.py::TimeDelta.__init__", "file_path": "src/marshmallow/fields.py", "class_name": "TimeDelta", "func_name": "__init__", "text": "文件路径: src/marshmallow/fields.py, 类名: TimeDelta\n    def __init__(self, precision='seconds', error=None, **kwargs):\n        precision = precision.lower()\n        units = (self.DAYS, self.SECONDS, self.MICROSECONDS)\n\n        if precision not in units:\n            msg = 'The precision must be \"{0}\", \"{1}\" or \"{2}\".'.format(*units)\n            raise ValueError(msg)\n\n        self.precision = precision\n        super(TimeDelta, self).__init__(error=error, **kwargs)\n", "tokens": ["src", "marshmallow", "fields", "py", "timedelta", "def", "__init__", "self", "precision", "seconds", "error", "none", "kwargs", "precision", "precision", "lower", "units", "self", "days", "self", "seconds", "self", "microseconds", "if", "precision", "not", "in", "units", "msg", "the", "precision", "must", "be", "0", "1", "or", "2", "format", "units", "raise", "valueerror", "msg", "self", "precision", "precision", "super", "timedelta", "self", "__init__", "error", "error", "kwargs"], "doc_len": 52}
{"doc_id": "src/marshmallow/fields.py::TimeDelta._serialize", "file_path": "src/marshmallow/fields.py", "class_name": "TimeDelta", "func_name": "_serialize", "text": "文件路径: src/marshmallow/fields.py, 类名: TimeDelta\n    def _serialize(self, value, attr, obj):\n        if value is None:\n            return None\n        try:\n            days = value.days\n            if self.precision == self.DAYS:\n                return days\n            else:\n                seconds = days * 86400 + value.seconds\n                if self.precision == self.SECONDS:\n                    return seconds\n                else:  # microseconds\n                    return seconds * 10**6 + value.microseconds  # flake8: noqa\n        except AttributeError:\n            self.fail('format', input=value)\n", "tokens": ["src", "marshmallow", "fields", "py", "timedelta", "def", "_serialize", "self", "value", "attr", "obj", "if", "value", "is", "none", "return", "none", "try", "days", "value", "days", "if", "self", "precision", "self", "days", "return", "days", "else", "seconds", "days", "86400", "value", "seconds", "if", "self", "precision", "self", "seconds", "return", "seconds", "else", "microseconds", "return", "seconds", "10", "6", "value", "microseconds", "flake8", "noqa", "except", "attributeerror", "self", "fail", "format", "input", "value"], "doc_len": 58}
{"doc_id": "src/marshmallow/fields.py::TimeDelta._deserialize", "file_path": "src/marshmallow/fields.py", "class_name": "TimeDelta", "func_name": "_deserialize", "text": "文件路径: src/marshmallow/fields.py, 类名: TimeDelta\n    def _deserialize(self, value, attr, data):\n        try:\n            value = int(value)\n        except (TypeError, ValueError):\n            self.fail('invalid')\n\n        kwargs = {self.precision: value}\n\n        try:\n            return dt.timedelta(**kwargs)\n        except OverflowError:\n            self.fail('invalid')\n", "tokens": ["src", "marshmallow", "fields", "py", "timedelta", "def", "_deserialize", "self", "value", "attr", "data", "try", "value", "int", "value", "except", "typeerror", "valueerror", "self", "fail", "invalid", "kwargs", "self", "precision", "value", "try", "return", "dt", "timedelta", "kwargs", "except", "overflowerror", "self", "fail", "invalid"], "doc_len": 35}
{"doc_id": "src/marshmallow/fields.py::Dict._deserialize", "file_path": "src/marshmallow/fields.py", "class_name": "Dict", "func_name": "_deserialize", "text": "文件路径: src/marshmallow/fields.py, 类名: Dict\n    def _deserialize(self, value, attr, data):\n        if isinstance(value, Mapping):\n            return value\n        else:\n            self.fail('invalid')\n", "tokens": ["src", "marshmallow", "fields", "py", "dict", "def", "_deserialize", "self", "value", "attr", "data", "if", "isinstance", "value", "mapping", "return", "value", "else", "self", "fail", "invalid"], "doc_len": 21}
{"doc_id": "src/marshmallow/fields.py::ValidatedField._validated", "file_path": "src/marshmallow/fields.py", "class_name": "ValidatedField", "func_name": "_validated", "text": "文件路径: src/marshmallow/fields.py, 类名: ValidatedField\n    def _validated(self, value):\n        raise NotImplementedError('Must implement _validate method')\n", "tokens": ["src", "marshmallow", "fields", "py", "validatedfield", "def", "_validated", "self", "value", "raise", "notimplementederror", "must", "implement", "_validate", "method"], "doc_len": 15}
{"doc_id": "src/marshmallow/fields.py::ValidatedField._serialize", "file_path": "src/marshmallow/fields.py", "class_name": "ValidatedField", "func_name": "_serialize", "text": "文件路径: src/marshmallow/fields.py, 类名: ValidatedField\n    def _serialize(self, value, *args, **kwargs):\n        ret = super(ValidatedField, self)._serialize(value, *args, **kwargs)\n        return self._validated(ret)\n", "tokens": ["src", "marshmallow", "fields", "py", "validatedfield", "def", "_serialize", "self", "value", "args", "kwargs", "ret", "super", "validatedfield", "self", "_serialize", "value", "args", "kwargs", "return", "self", "_validated", "ret"], "doc_len": 23}
{"doc_id": "src/marshmallow/fields.py::Url.__init__", "file_path": "src/marshmallow/fields.py", "class_name": "Url", "func_name": "__init__", "text": "文件路径: src/marshmallow/fields.py, 类名: Url\n    def __init__(self, relative=False, schemes=None, **kwargs):\n        String.__init__(self, **kwargs)\n\n        self.relative = relative\n        # Insert validation into self.validators so that multiple errors can be\n        # stored.\n        self.validators.insert(0, validate.URL(\n            relative=self.relative,\n            schemes=schemes,\n            error=self.error_messages['invalid']\n        ))\n", "tokens": ["src", "marshmallow", "fields", "py", "url", "def", "__init__", "self", "relative", "false", "schemes", "none", "kwargs", "string", "__init__", "self", "kwargs", "self", "relative", "relative", "insert", "validation", "into", "self", "validators", "so", "that", "multiple", "errors", "can", "be", "stored", "self", "validators", "insert", "0", "validate", "url", "relative", "self", "relative", "schemes", "schemes", "error", "self", "error_messages", "invalid"], "doc_len": 47}
{"doc_id": "src/marshmallow/fields.py::Url._validated", "file_path": "src/marshmallow/fields.py", "class_name": "Url", "func_name": "_validated", "text": "文件路径: src/marshmallow/fields.py, 类名: Url\n    def _validated(self, value):\n        if value is None:\n            return None\n        return validate.URL(\n            relative=self.relative,\n            error=self.error_messages['invalid']\n        )(value)\n", "tokens": ["src", "marshmallow", "fields", "py", "url", "def", "_validated", "self", "value", "if", "value", "is", "none", "return", "none", "return", "validate", "url", "relative", "self", "relative", "error", "self", "error_messages", "invalid", "value"], "doc_len": 26}
{"doc_id": "src/marshmallow/fields.py::Email.__init__", "file_path": "src/marshmallow/fields.py", "class_name": "Email", "func_name": "__init__", "text": "文件路径: src/marshmallow/fields.py, 类名: Email\n    def __init__(self, *args, **kwargs):\n        String.__init__(self, *args, **kwargs)\n        # Insert validation into self.validators so that multiple errors can be\n        # stored.\n        self.validators.insert(0, validate.Email(error=self.error_messages['invalid']))\n", "tokens": ["src", "marshmallow", "fields", "py", "email", "def", "__init__", "self", "args", "kwargs", "string", "__init__", "self", "args", "kwargs", "insert", "validation", "into", "self", "validators", "so", "that", "multiple", "errors", "can", "be", "stored", "self", "validators", "insert", "0", "validate", "email", "error", "self", "error_messages", "invalid"], "doc_len": 37}
{"doc_id": "src/marshmallow/fields.py::Email._validated", "file_path": "src/marshmallow/fields.py", "class_name": "Email", "func_name": "_validated", "text": "文件路径: src/marshmallow/fields.py, 类名: Email\n    def _validated(self, value):\n        if value is None:\n            return None\n        return validate.Email(\n            error=self.error_messages['invalid']\n        )(value)\n", "tokens": ["src", "marshmallow", "fields", "py", "email", "def", "_validated", "self", "value", "if", "value", "is", "none", "return", "none", "return", "validate", "email", "error", "self", "error_messages", "invalid", "value"], "doc_len": 23}
{"doc_id": "src/marshmallow/fields.py::Method.__init__", "file_path": "src/marshmallow/fields.py", "class_name": "Method", "func_name": "__init__", "text": "文件路径: src/marshmallow/fields.py, 类名: Method\n    def __init__(self, serialize=None, deserialize=None, method_name=None, **kwargs):\n        if method_name is not None:\n            warnings.warn('\"method_name\" argument of fields.Method is deprecated. '\n                          'Use the \"serialize\" argument instead.', RemovedInMarshmallow3Warning)\n\n        self.serialize_method_name = self.method_name = serialize or method_name\n        self.deserialize_method_name = deserialize\n        super(Method, self).__init__(**kwargs)\n", "tokens": ["src", "marshmallow", "fields", "py", "method", "def", "__init__", "self", "serialize", "none", "deserialize", "none", "method_name", "none", "kwargs", "if", "method_name", "is", "not", "none", "warnings", "warn", "method_name", "argument", "of", "fields", "method", "is", "deprecated", "use", "the", "serialize", "argument", "instead", "removedinmarshmallow3warning", "self", "serialize_method_name", "self", "method_name", "serialize", "or", "method_name", "self", "deserialize_method_name", "deserialize", "super", "method", "self", "__init__", "kwargs"], "doc_len": 50}
{"doc_id": "src/marshmallow/fields.py::Method._serialize", "file_path": "src/marshmallow/fields.py", "class_name": "Method", "func_name": "_serialize", "text": "文件路径: src/marshmallow/fields.py, 类名: Method\n    def _serialize(self, value, attr, obj):\n        if not self.serialize_method_name:\n            return missing_\n\n        method = utils.callable_or_raise(\n            getattr(self.parent, self.serialize_method_name, None)\n        )\n        try:\n            return method(obj)\n        except AttributeError:\n            pass\n        return missing_\n", "tokens": ["src", "marshmallow", "fields", "py", "method", "def", "_serialize", "self", "value", "attr", "obj", "if", "not", "self", "serialize_method_name", "return", "missing_", "method", "utils", "callable_or_raise", "getattr", "self", "parent", "self", "serialize_method_name", "none", "try", "return", "method", "obj", "except", "attributeerror", "pass", "return", "missing_"], "doc_len": 35}
{"doc_id": "src/marshmallow/fields.py::Method._deserialize", "file_path": "src/marshmallow/fields.py", "class_name": "Method", "func_name": "_deserialize", "text": "文件路径: src/marshmallow/fields.py, 类名: Method\n    def _deserialize(self, value, attr, data):\n        if self.deserialize_method_name:\n            try:\n                method = utils.callable_or_raise(\n                    getattr(self.parent, self.deserialize_method_name, None)\n                )\n                return method(value)\n            except AttributeError:\n                pass\n        return value\n", "tokens": ["src", "marshmallow", "fields", "py", "method", "def", "_deserialize", "self", "value", "attr", "data", "if", "self", "deserialize_method_name", "try", "method", "utils", "callable_or_raise", "getattr", "self", "parent", "self", "deserialize_method_name", "none", "return", "method", "value", "except", "attributeerror", "pass", "return", "value"], "doc_len": 32}
{"doc_id": "src/marshmallow/fields.py::Function.__init__", "file_path": "src/marshmallow/fields.py", "class_name": "Function", "func_name": "__init__", "text": "文件路径: src/marshmallow/fields.py, 类名: Function\n    def __init__(self, serialize=None, deserialize=None, func=None, **kwargs):\n        if func:\n            warnings.warn('\"func\" argument of fields.Function is deprecated. '\n                          'Use the \"serialize\" argument instead.', RemovedInMarshmallow3Warning)\n            serialize = func\n        super(Function, self).__init__(**kwargs)\n        self.serialize_func = self.func = serialize and utils.callable_or_raise(serialize)\n        self.deserialize_func = deserialize and utils.callable_or_raise(deserialize)\n", "tokens": ["src", "marshmallow", "fields", "py", "function", "def", "__init__", "self", "serialize", "none", "deserialize", "none", "func", "none", "kwargs", "if", "func", "warnings", "warn", "func", "argument", "of", "fields", "function", "is", "deprecated", "use", "the", "serialize", "argument", "instead", "removedinmarshmallow3warning", "serialize", "func", "super", "function", "self", "__init__", "kwargs", "self", "serialize_func", "self", "func", "serialize", "and", "utils", "callable_or_raise", "serialize", "self", "deserialize_func", "deserialize", "and", "utils", "callable_or_raise", "deserialize"], "doc_len": 55}
{"doc_id": "src/marshmallow/fields.py::Function._serialize", "file_path": "src/marshmallow/fields.py", "class_name": "Function", "func_name": "_serialize", "text": "文件路径: src/marshmallow/fields.py, 类名: Function\n    def _serialize(self, value, attr, obj):\n        try:\n            return self._call_or_raise(self.serialize_func, obj, attr)\n        except AttributeError:  # the object is not expected to have the attribute\n            pass\n        return missing_\n", "tokens": ["src", "marshmallow", "fields", "py", "function", "def", "_serialize", "self", "value", "attr", "obj", "try", "return", "self", "_call_or_raise", "self", "serialize_func", "obj", "attr", "except", "attributeerror", "the", "object", "is", "not", "expected", "to", "have", "the", "attribute", "pass", "return", "missing_"], "doc_len": 33}
{"doc_id": "src/marshmallow/fields.py::Function._deserialize", "file_path": "src/marshmallow/fields.py", "class_name": "Function", "func_name": "_deserialize", "text": "文件路径: src/marshmallow/fields.py, 类名: Function\n    def _deserialize(self, value, attr, data):\n        if self.deserialize_func:\n            return self._call_or_raise(self.deserialize_func, value, attr)\n        return value\n", "tokens": ["src", "marshmallow", "fields", "py", "function", "def", "_deserialize", "self", "value", "attr", "data", "if", "self", "deserialize_func", "return", "self", "_call_or_raise", "self", "deserialize_func", "value", "attr", "return", "value"], "doc_len": 23}
{"doc_id": "src/marshmallow/fields.py::Function._call_or_raise", "file_path": "src/marshmallow/fields.py", "class_name": "Function", "func_name": "_call_or_raise", "text": "文件路径: src/marshmallow/fields.py, 类名: Function\n    def _call_or_raise(self, func, value, attr):\n        if len(utils.get_func_args(func)) > 1:\n            if self.parent.context is None:\n                msg = 'No context available for Function field {0!r}'.format(attr)\n                raise ValidationError(msg)\n            return func(value, self.parent.context)\n        else:\n            return func(value)\n", "tokens": ["src", "marshmallow", "fields", "py", "function", "def", "_call_or_raise", "self", "func", "value", "attr", "if", "len", "utils", "get_func_args", "func", "1", "if", "self", "parent", "context", "is", "none", "msg", "no", "context", "available", "for", "function", "field", "0", "r", "format", "attr", "raise", "validationerror", "msg", "return", "func", "value", "self", "parent", "context", "else", "return", "func", "value"], "doc_len": 47}
{"doc_id": "src/marshmallow/fields.py::Constant.__init__", "file_path": "src/marshmallow/fields.py", "class_name": "Constant", "func_name": "__init__", "text": "文件路径: src/marshmallow/fields.py, 类名: Constant\n    def __init__(self, constant, **kwargs):\n        super(Constant, self).__init__(**kwargs)\n        self.constant = constant\n        self.missing = constant\n        self.default = constant\n", "tokens": ["src", "marshmallow", "fields", "py", "constant", "def", "__init__", "self", "constant", "kwargs", "super", "constant", "self", "__init__", "kwargs", "self", "constant", "constant", "self", "missing", "constant", "self", "default", "constant"], "doc_len": 24}
{"doc_id": "src/marshmallow/fields.py::Constant._serialize", "file_path": "src/marshmallow/fields.py", "class_name": "Constant", "func_name": "_serialize", "text": "文件路径: src/marshmallow/fields.py, 类名: Constant\n    def _serialize(self, value, *args, **kwargs):\n        return self.constant\n", "tokens": ["src", "marshmallow", "fields", "py", "constant", "def", "_serialize", "self", "value", "args", "kwargs", "return", "self", "constant"], "doc_len": 14}
{"doc_id": "src/marshmallow/fields.py::Constant._deserialize", "file_path": "src/marshmallow/fields.py", "class_name": "Constant", "func_name": "_deserialize", "text": "文件路径: src/marshmallow/fields.py, 类名: Constant\n    def _deserialize(self, value, *args, **kwargs):\n        return self.constant\n", "tokens": ["src", "marshmallow", "fields", "py", "constant", "def", "_deserialize", "self", "value", "args", "kwargs", "return", "self", "constant"], "doc_len": 14}
{"doc_id": "src/marshmallow/marshalling.py::ErrorStore.__init__", "file_path": "src/marshmallow/marshalling.py", "class_name": "ErrorStore", "func_name": "__init__", "text": "文件路径: src/marshmallow/marshalling.py, 类名: ErrorStore\n    def __init__(self):\n        #: Dictionary of errors stored during serialization\n        self.errors = {}\n        #: List of `Field` objects which have validation errors\n        self.error_fields = []\n        #: List of field_names which have validation errors\n        self.error_field_names = []\n        #: True while (de)serializing a collection\n        self._pending = False\n        #: Dictionary of extra kwargs from user raised exception\n        self.error_kwargs = {}\n", "tokens": ["src", "marshmallow", "marshalling", "py", "errorstore", "def", "__init__", "self", "dictionary", "of", "errors", "stored", "during", "serialization", "self", "errors", "list", "of", "field", "objects", "which", "have", "validation", "errors", "self", "error_fields", "list", "of", "field_names", "which", "have", "validation", "errors", "self", "error_field_names", "true", "while", "de", "serializing", "a", "collection", "self", "_pending", "false", "dictionary", "of", "extra", "kwargs", "from", "user", "raised", "exception", "self", "error_kwargs"], "doc_len": 54}
{"doc_id": "src/marshmallow/marshalling.py::ErrorStore.get_errors", "file_path": "src/marshmallow/marshalling.py", "class_name": "ErrorStore", "func_name": "get_errors", "text": "文件路径: src/marshmallow/marshalling.py, 类名: ErrorStore\n    def get_errors(self, index=None):\n        if index is not None:\n            errors = self.errors.get(index, {})\n            self.errors[index] = errors\n        else:\n            errors = self.errors\n        return errors\n", "tokens": ["src", "marshmallow", "marshalling", "py", "errorstore", "def", "get_errors", "self", "index", "none", "if", "index", "is", "not", "none", "errors", "self", "errors", "get", "index", "self", "errors", "index", "errors", "else", "errors", "self", "errors", "return", "errors"], "doc_len": 30}
{"doc_id": "src/marshmallow/marshalling.py::ErrorStore.call_and_store", "file_path": "src/marshmallow/marshalling.py", "class_name": "ErrorStore", "func_name": "call_and_store", "text": "文件路径: src/marshmallow/marshalling.py, 类名: ErrorStore\n    def call_and_store(self, getter_func, data, field_name, field_obj, index=None):\n        \"\"\"Call ``getter_func`` with ``data`` as its argument, and store any `ValidationErrors`.\n\n        :param callable getter_func: Function for getting the serialized/deserialized\n            value from ``data``.\n        :param data: The data passed to ``getter_func``.\n        :param str field_name: Field name.\n        :param FieldABC field_obj: Field object that performs the\n            serialization/deserialization behavior.\n        :param int index: Index of the item being validated, if validating a collection,\n            otherwise `None`.\n        \"\"\"\n        try:\n            value = getter_func(data)\n        except ValidationError as err:  # Store validation errors\n            self.error_kwargs.update(err.kwargs)\n            self.error_fields.append(field_obj)\n            self.error_field_names.append(field_name)\n            errors = self.get_errors(index=index)\n            # Warning: Mutation!\n            if isinstance(err.messages, dict):\n                errors[field_name] = err.messages\n            elif isinstance(errors.get(field_name), dict):\n                errors[field_name].setdefault(FIELD, []).extend(err.messages)\n            else:\n                errors.setdefault(field_name, []).extend(err.messages)\n            # When a Nested field fails validation, the marshalled data is stored\n            # on the ValidationError's data attribute\n            value = err.data or missing\n        return value\n", "tokens": ["src", "marshmallow", "marshalling", "py", "errorstore", "def", "call_and_store", "self", "getter_func", "data", "field_name", "field_obj", "index", "none", "call", "getter_func", "with", "data", "as", "its", "argument", "and", "store", "any", "validationerrors", "param", "callable", "getter_func", "function", "for", "getting", "the", "serialized", "deserialized", "value", "from", "data", "param", "data", "the", "data", "passed", "to", "getter_func", "param", "str", "field_name", "field", "name", "param", "fieldabc", "field_obj", "field", "object", "that", "performs", "the", "serialization", "deserialization", "behavior", "param", "int", "index", "index", "of", "the", "item", "being", "validated", "if", "validating", "a", "collection", "otherwise", "none", "try", "value", "getter_func", "data", "except", "validationerror", "as", "err", "store", "validation", "errors", "self", "error_kwargs", "update", "err", "kwargs", "self", "error_fields", "append", "field_obj", "self", "error_field_names", "append", "field_name", "errors", "self", "get_errors", "index", "index", "warning", "mutation", "if", "isinstance", "err", "messages", "dict", "errors", "field_name", "err", "messages", "elif", "isinstance", "errors", "get", "field_name", "dict", "errors", "field_name", "setdefault", "field", "extend", "err", "messages", "else", "errors", "setdefault", "field_name", "extend", "err", "messages", "when", "a", "nested", "field", "fails", "validation", "the", "marshalled", "data", "is", "stored", "on", "the", "validationerror", "s", "data", "attribute", "value", "err", "data", "or", "missing", "return", "value"], "doc_len": 159}
{"doc_id": "src/marshmallow/marshalling.py::Marshaller.__init__", "file_path": "src/marshmallow/marshalling.py", "class_name": "Marshaller", "func_name": "__init__", "text": "文件路径: src/marshmallow/marshalling.py, 类名: Marshaller\n    def __init__(self, prefix=''):\n        self.prefix = prefix\n        ErrorStore.__init__(self)\n", "tokens": ["src", "marshmallow", "marshalling", "py", "marshaller", "def", "__init__", "self", "prefix", "self", "prefix", "prefix", "errorstore", "__init__", "self"], "doc_len": 15}
{"doc_id": "src/marshmallow/marshalling.py::Marshaller.serialize", "file_path": "src/marshmallow/marshalling.py", "class_name": "Marshaller", "func_name": "serialize", "text": "文件路径: src/marshmallow/marshalling.py, 类名: Marshaller\n    def serialize(self, obj, fields_dict, many=False,\n                  accessor=None, dict_class=dict, index_errors=True, index=None):\n        \"\"\"Takes raw data (a dict, list, or other object) and a dict of\n        fields to output and serializes the data based on those fields.\n\n        :param obj: The actual object(s) from which the fields are taken from\n        :param dict fields_dict: Mapping of field names to :class:`Field` objects.\n        :param bool many: Set to `True` if ``data`` should be serialized as\n            a collection.\n        :param callable accessor: Function to use for getting values from ``obj``.\n        :param type dict_class: Dictionary class used to construct the output.\n        :param bool index_errors: Whether to store the index of invalid items in\n            ``self.errors`` when ``many=True``.\n        :param int index: Index of the item being serialized (for storing errors) if\n            serializing a collection, otherwise `None`.\n        :return: A dictionary of the marshalled data\n\n        .. versionchanged:: 1.0.0\n            Renamed from ``marshal``.\n        \"\"\"\n        if many and obj is not None:\n            self._pending = True\n            ret = [self.serialize(d, fields_dict, many=False,\n                                    dict_class=dict_class, accessor=accessor,\n                                    index=idx, index_errors=index_errors)\n                    for idx, d in enumerate(obj)]\n            self._pending = False\n            if self.errors:\n                raise ValidationError(\n                    self.errors,\n                    field_names=self.error_field_names,\n                    fields=self.error_fields,\n                    data=ret,\n                )\n            return ret\n        items = []\n        for attr_name, field_obj in iteritems(fields_dict):\n            if getattr(field_obj, 'load_only', False):\n                continue\n\n            key = ''.join([self.prefix or '', field_obj.dump_to or attr_name])\n\n            getter = lambda d: field_obj.serialize(attr_name, d, accessor=accessor)\n            value = self.call_and_store(\n                getter_func=getter,\n                data=obj,\n                field_name=key,\n                field_obj=field_obj,\n                index=(index if index_errors else None)\n            )\n            if value is missing:\n                continue\n            items.append((key, value))\n        ret = dict_class(items)\n        if self.errors and not self._pending:\n            raise ValidationError(\n                self.errors,\n                field_names=self.error_field_names,\n                fields=self.error_fields,\n                data=ret\n            )\n        return ret\n", "tokens": ["src", "marshmallow", "marshalling", "py", "marshaller", "def", "serialize", "self", "obj", "fields_dict", "many", "false", "accessor", "none", "dict_class", "dict", "index_errors", "true", "index", "none", "takes", "raw", "data", "a", "dict", "list", "or", "other", "object", "and", "a", "dict", "of", "fields", "to", "output", "and", "serializes", "the", "data", "based", "on", "those", "fields", "param", "obj", "the", "actual", "object", "s", "from", "which", "the", "fields", "are", "taken", "from", "param", "dict", "fields_dict", "mapping", "of", "field", "names", "to", "class", "field", "objects", "param", "bool", "many", "set", "to", "true", "if", "data", "should", "be", "serialized", "as", "a", "collection", "param", "callable", "accessor", "function", "to", "use", "for", "getting", "values", "from", "obj", "param", "type", "dict_class", "dictionary", "class", "used", "to", "construct", "the", "output", "param", "bool", "index_errors", "whether", "to", "store", "the", "index", "of", "invalid", "items", "in", "self", "errors", "when", "many", "true", "param", "int", "index", "index", "of", "the", "item", "being", "serialized", "for", "storing", "errors", "if", "serializing", "a", "collection", "otherwise", "none", "return", "a", "dictionary", "of", "the", "marshalled", "data", "versionchanged", "1", "0", "0", "renamed", "from", "marshal", "if", "many", "and", "obj", "is", "not", "none", "self", "_pending", "true", "ret", "self", "serialize", "d", "fields_dict", "many", "false", "dict_class", "dict_class", "accessor", "accessor", "index", "idx", "index_errors", "index_errors", "for", "idx", "d", "in", "enumerate", "obj", "self", "_pending", "false", "if", "self", "errors", "raise", "validationerror", "self", "errors", "field_names", "self", "error_field_names", "fields", "self", "error_fields", "data", "ret", "return", "ret", "items", "for", "attr_name", "field_obj", "in", "iteritems", "fields_dict", "if", "getattr", "field_obj", "load_only", "false", "continue", "key", "join", "self", "prefix", "or", "field_obj", "dump_to", "or", "attr_name", "getter", "lambda", "d", "field_obj", "serialize", "attr_name", "d", "accessor", "accessor", "value", "self", "call_and_store", "getter_func", "getter", "data", "obj", "field_name", "key", "field_obj", "field_obj", "index", "index", "if", "index_errors", "else", "none", "if", "value", "is", "missing", "continue", "items", "append", "key", "value", "ret", "dict_class", "items", "if", "self", "errors", "and", "not", "self", "_pending", "raise", "validationerror", "self", "errors", "field_names", "self", "error_field_names", "fields", "self", "error_fields", "data", "ret", "return", "ret"], "doc_len": 284}
{"doc_id": "src/marshmallow/marshalling.py::Unmarshaller.run_validator", "file_path": "src/marshmallow/marshalling.py", "class_name": "Unmarshaller", "func_name": "run_validator", "text": "文件路径: src/marshmallow/marshalling.py, 类名: Unmarshaller\n    def run_validator(self, validator_func, output,\n            original_data, fields_dict, index=None,\n            many=False, pass_original=False):\n        try:\n            if pass_original:  # Pass original, raw data (before unmarshalling)\n                res = validator_func(output, original_data)\n            else:\n                res = validator_func(output)\n            if res is False:\n                raise ValidationError(self.default_schema_validation_error)\n        except ValidationError as err:\n            errors = self.get_errors(index=index)\n            self.error_kwargs.update(err.kwargs)\n            # Store or reraise errors\n            if err.field_names:\n                field_names = err.field_names\n                field_objs = [fields_dict[each] if each in fields_dict else None\n                              for each in field_names]\n            else:\n                field_names = [SCHEMA]\n                field_objs = []\n            self.error_field_names = field_names\n            self.error_fields = field_objs\n            for field_name in field_names:\n                if isinstance(err.messages, (list, tuple)):\n                    # self.errors[field_name] may be a dict if schemas are nested\n                    if isinstance(errors.get(field_name), dict):\n                        errors[field_name].setdefault(\n                            SCHEMA, []\n                        ).extend(err.messages)\n                    else:\n                        errors.setdefault(field_name, []).extend(err.messages)\n                elif isinstance(err.messages, dict):\n                    errors.setdefault(field_name, []).append(err.messages)\n                else:\n                    errors.setdefault(field_name, []).append(text_type(err))\n", "tokens": ["src", "marshmallow", "marshalling", "py", "unmarshaller", "def", "run_validator", "self", "validator_func", "output", "original_data", "fields_dict", "index", "none", "many", "false", "pass_original", "false", "try", "if", "pass_original", "pass", "original", "raw", "data", "before", "unmarshalling", "res", "validator_func", "output", "original_data", "else", "res", "validator_func", "output", "if", "res", "is", "false", "raise", "validationerror", "self", "default_schema_validation_error", "except", "validationerror", "as", "err", "errors", "self", "get_errors", "index", "index", "self", "error_kwargs", "update", "err", "kwargs", "store", "or", "reraise", "errors", "if", "err", "field_names", "field_names", "err", "field_names", "field_objs", "fields_dict", "each", "if", "each", "in", "fields_dict", "else", "none", "for", "each", "in", "field_names", "else", "field_names", "schema", "field_objs", "self", "error_field_names", "field_names", "self", "error_fields", "field_objs", "for", "field_name", "in", "field_names", "if", "isinstance", "err", "messages", "list", "tuple", "self", "errors", "field_name", "may", "be", "a", "dict", "if", "schemas", "are", "nested", "if", "isinstance", "errors", "get", "field_name", "dict", "errors", "field_name", "setdefault", "schema", "extend", "err", "messages", "else", "errors", "setdefault", "field_name", "extend", "err", "messages", "elif", "isinstance", "err", "messages", "dict", "errors", "setdefault", "field_name", "append", "err", "messages", "else", "errors", "setdefault", "field_name", "append", "text_type", "err"], "doc_len": 149}
{"doc_id": "src/marshmallow/marshalling.py::Unmarshaller.deserialize", "file_path": "src/marshmallow/marshalling.py", "class_name": "Unmarshaller", "func_name": "deserialize", "text": "文件路径: src/marshmallow/marshalling.py, 类名: Unmarshaller\n    def deserialize(self, data, fields_dict, many=False, partial=False,\n            dict_class=dict, index_errors=True, index=None):\n        \"\"\"Deserialize ``data`` based on the schema defined by ``fields_dict``.\n\n        :param dict data: The data to deserialize.\n        :param dict fields_dict: Mapping of field names to :class:`Field` objects.\n        :param bool many: Set to `True` if ``data`` should be deserialized as\n            a collection.\n        :param bool|tuple partial: Whether to ignore missing fields. If its\n            value is an iterable, only missing fields listed in that iterable\n            will be ignored.\n        :param type dict_class: Dictionary class used to construct the output.\n        :param bool index_errors: Whether to store the index of invalid items in\n            ``self.errors`` when ``many=True``.\n        :param int index: Index of the item being serialized (for storing errors) if\n            serializing a collection, otherwise `None`.\n        :return: A dictionary of the deserialized data.\n        \"\"\"\n        if many and data is not None:\n            if not is_collection(data):\n                errors = self.get_errors(index=index)\n                self.error_field_names.append(SCHEMA)\n                errors[SCHEMA] = ['Invalid input type.']\n                ret = []\n            else:\n                self._pending = True\n                ret = [self.deserialize(d, fields_dict, many=False,\n                            partial=partial, dict_class=dict_class,\n                            index=idx, index_errors=index_errors)\n                        for idx, d in enumerate(data)]\n\n                self._pending = False\n                if self.errors:\n                    raise ValidationError(\n                        self.errors,\n                        field_names=self.error_field_names,\n                        fields=self.error_fields,\n                        data=ret,\n                    )\n            return ret\n\n        ret = dict_class()\n\n        if not isinstance(data, collections.Mapping):\n            errors = self.get_errors(index=index)\n            msg = 'Invalid input type.'\n            self.error_field_names = [SCHEMA]\n            errors = self.get_errors()\n            errors.setdefault(SCHEMA, []).append(msg)\n            return None\n        else:\n            partial_is_collection = is_collection(partial)\n            for attr_name, field_obj in iteritems(fields_dict):\n                if field_obj.dump_only:\n                    continue\n                raw_value = data.get(attr_name, missing)\n                field_name = attr_name\n                if raw_value is missing and field_obj.load_from:\n                    field_name = field_obj.load_from\n                    raw_value = data.get(field_obj.load_from, missing)\n                if raw_value is missing:\n                    # Ignore missing field if we're allowed to.\n                    if (\n                        partial is True or\n                        (partial_is_collection and attr_name in partial)\n                    ):\n                        continue\n                    _miss = field_obj.missing\n                    raw_value = _miss() if callable(_miss) else _miss\n                if raw_value is missing and not field_obj.required:\n                    continue\n\n                getter = lambda val: field_obj.deserialize(\n                    val,\n                    field_obj.load_from or attr_name,\n                    data\n                )\n                value = self.call_and_store(\n                    getter_func=getter,\n                    data=raw_value,\n                    field_name=field_name,\n                    field_obj=field_obj,\n                    index=(index if index_errors else None)\n                )\n                if value is not missing:\n                    key = fields_dict[attr_name].attribute or attr_name\n                    set_value(ret, key, value)\n\n        if self.errors and not self._pending:\n            raise ValidationError(\n                self.errors,\n                field_names=self.error_field_names,\n                fields=self.error_fields,\n                data=ret,\n            )\n        return ret\n", "tokens": ["src", "marshmallow", "marshalling", "py", "unmarshaller", "def", "deserialize", "self", "data", "fields_dict", "many", "false", "partial", "false", "dict_class", "dict", "index_errors", "true", "index", "none", "deserialize", "data", "based", "on", "the", "schema", "defined", "by", "fields_dict", "param", "dict", "data", "the", "data", "to", "deserialize", "param", "dict", "fields_dict", "mapping", "of", "field", "names", "to", "class", "field", "objects", "param", "bool", "many", "set", "to", "true", "if", "data", "should", "be", "deserialized", "as", "a", "collection", "param", "bool", "tuple", "partial", "whether", "to", "ignore", "missing", "fields", "if", "its", "value", "is", "an", "iterable", "only", "missing", "fields", "listed", "in", "that", "iterable", "will", "be", "ignored", "param", "type", "dict_class", "dictionary", "class", "used", "to", "construct", "the", "output", "param", "bool", "index_errors", "whether", "to", "store", "the", "index", "of", "invalid", "items", "in", "self", "errors", "when", "many", "true", "param", "int", "index", "index", "of", "the", "item", "being", "serialized", "for", "storing", "errors", "if", "serializing", "a", "collection", "otherwise", "none", "return", "a", "dictionary", "of", "the", "deserialized", "data", "if", "many", "and", "data", "is", "not", "none", "if", "not", "is_collection", "data", "errors", "self", "get_errors", "index", "index", "self", "error_field_names", "append", "schema", "errors", "schema", "invalid", "input", "type", "ret", "else", "self", "_pending", "true", "ret", "self", "deserialize", "d", "fields_dict", "many", "false", "partial", "partial", "dict_class", "dict_class", "index", "idx", "index_errors", "index_errors", "for", "idx", "d", "in", "enumerate", "data", "self", "_pending", "false", "if", "self", "errors", "raise", "validationerror", "self", "errors", "field_names", "self", "error_field_names", "fields", "self", "error_fields", "data", "ret", "return", "ret", "ret", "dict_class", "if", "not", "isinstance", "data", "collections", "mapping", "errors", "self", "get_errors", "index", "index", "msg", "invalid", "input", "type", "self", "error_field_names", "schema", "errors", "self", "get_errors", "errors", "setdefault", "schema", "append", "msg", "return", "none", "else", "partial_is_collection", "is_collection", "partial", "for", "attr_name", "field_obj", "in", "iteritems", "fields_dict", "if", "field_obj", "dump_only", "continue", "raw_value", "data", "get", "attr_name", "missing", "field_name", "attr_name", "if", "raw_value", "is", "missing", "and", "field_obj", "load_from", "field_name", "field_obj", "load_from", "raw_value", "data", "get", "field_obj", "load_from", "missing", "if", "raw_value", "is", "missing", "ignore", "missing", "field", "if", "we", "re", "allowed", "to", "if", "partial", "is", "true", "or", "partial_is_collection", "and", "attr_name", "in", "partial", "continue", "_miss", "field_obj", "missing", "raw_value", "_miss", "if", "callable", "_miss", "else", "_miss", "if", "raw_value", "is", "missing", "and", "not", "field_obj", "required", "continue", "getter", "lambda", "val", "field_obj", "deserialize", "val", "field_obj", "load_from", "or", "attr_name", "data", "value", "self", "call_and_store", "getter_func", "getter", "data", "raw_value", "field_name", "field_name", "field_obj", "field_obj", "index", "index", "if", "index_errors", "else", "none", "if", "value", "is", "not", "missing", "key", "fields_dict", "attr_name", "attribute", "or", "attr_name", "set_value", "ret", "key", "value", "if", "self", "errors", "and", "not", "self", "_pending", "raise", "validationerror", "self", "errors", "field_names", "self", "error_field_names", "fields", "self", "error_fields", "data", "ret", "return", "ret"], "doc_len": 382}
{"doc_id": "src/marshmallow/ordereddict.py::OrderedDict.__init__", "file_path": "src/marshmallow/ordereddict.py", "class_name": "OrderedDict", "func_name": "__init__", "text": "文件路径: src/marshmallow/ordereddict.py, 类名: OrderedDict\n    def __init__(self, *args, **kwds):\n        if len(args) > 1:\n            raise TypeError('expected at most 1 arguments, got %d' % len(args))\n        try:\n            self.__end\n        except AttributeError:\n            self.clear()\n        self.update(*args, **kwds)\n", "tokens": ["src", "marshmallow", "ordereddict", "py", "ordereddict", "def", "__init__", "self", "args", "kwds", "if", "len", "args", "1", "raise", "typeerror", "expected", "at", "most", "1", "arguments", "got", "d", "len", "args", "try", "self", "__end", "except", "attributeerror", "self", "clear", "self", "update", "args", "kwds"], "doc_len": 36}
{"doc_id": "src/marshmallow/ordereddict.py::OrderedDict.clear", "file_path": "src/marshmallow/ordereddict.py", "class_name": "OrderedDict", "func_name": "clear", "text": "文件路径: src/marshmallow/ordereddict.py, 类名: OrderedDict\n    def clear(self):\n        self.__end = end = []\n        end += [None, end, end]         # sentinel node for doubly linked list\n        self.__map = {}                 # key --> [key, prev, next]\n        dict.clear(self)\n", "tokens": ["src", "marshmallow", "ordereddict", "py", "ordereddict", "def", "clear", "self", "self", "__end", "end", "end", "none", "end", "end", "sentinel", "node", "for", "doubly", "linked", "list", "self", "__map", "key", "key", "prev", "next", "dict", "clear", "self"], "doc_len": 30}
{"doc_id": "src/marshmallow/ordereddict.py::OrderedDict.__setitem__", "file_path": "src/marshmallow/ordereddict.py", "class_name": "OrderedDict", "func_name": "__setitem__", "text": "文件路径: src/marshmallow/ordereddict.py, 类名: OrderedDict\n    def __setitem__(self, key, value):\n        if key not in self:\n            end = self.__end\n            curr = end[1]\n            curr[2] = end[1] = self.__map[key] = [key, curr, end]\n        dict.__setitem__(self, key, value)\n", "tokens": ["src", "marshmallow", "ordereddict", "py", "ordereddict", "def", "__setitem__", "self", "key", "value", "if", "key", "not", "in", "self", "end", "self", "__end", "curr", "end", "1", "curr", "2", "end", "1", "self", "__map", "key", "key", "curr", "end", "dict", "__setitem__", "self", "key", "value"], "doc_len": 36}
{"doc_id": "src/marshmallow/ordereddict.py::OrderedDict.__delitem__", "file_path": "src/marshmallow/ordereddict.py", "class_name": "OrderedDict", "func_name": "__delitem__", "text": "文件路径: src/marshmallow/ordereddict.py, 类名: OrderedDict\n    def __delitem__(self, key):\n        dict.__delitem__(self, key)\n        key, prev, next = self.__map.pop(key)\n        prev[2] = next\n        next[1] = prev\n", "tokens": ["src", "marshmallow", "ordereddict", "py", "ordereddict", "def", "__delitem__", "self", "key", "dict", "__delitem__", "self", "key", "key", "prev", "next", "self", "__map", "pop", "key", "prev", "2", "next", "next", "1", "prev"], "doc_len": 26}
{"doc_id": "src/marshmallow/ordereddict.py::OrderedDict.__iter__", "file_path": "src/marshmallow/ordereddict.py", "class_name": "OrderedDict", "func_name": "__iter__", "text": "文件路径: src/marshmallow/ordereddict.py, 类名: OrderedDict\n    def __iter__(self):\n        end = self.__end\n        curr = end[2]\n        while curr is not end:\n            yield curr[0]\n            curr = curr[2]\n", "tokens": ["src", "marshmallow", "ordereddict", "py", "ordereddict", "def", "__iter__", "self", "end", "self", "__end", "curr", "end", "2", "while", "curr", "is", "not", "end", "yield", "curr", "0", "curr", "curr", "2"], "doc_len": 25}
{"doc_id": "src/marshmallow/ordereddict.py::OrderedDict.__reversed__", "file_path": "src/marshmallow/ordereddict.py", "class_name": "OrderedDict", "func_name": "__reversed__", "text": "文件路径: src/marshmallow/ordereddict.py, 类名: OrderedDict\n    def __reversed__(self):\n        end = self.__end\n        curr = end[1]\n        while curr is not end:\n            yield curr[0]\n            curr = curr[1]\n", "tokens": ["src", "marshmallow", "ordereddict", "py", "ordereddict", "def", "__reversed__", "self", "end", "self", "__end", "curr", "end", "1", "while", "curr", "is", "not", "end", "yield", "curr", "0", "curr", "curr", "1"], "doc_len": 25}
{"doc_id": "src/marshmallow/ordereddict.py::OrderedDict.popitem", "file_path": "src/marshmallow/ordereddict.py", "class_name": "OrderedDict", "func_name": "popitem", "text": "文件路径: src/marshmallow/ordereddict.py, 类名: OrderedDict\n    def popitem(self, last=True):\n        if not self:\n            raise KeyError('dictionary is empty')\n        if last:\n            key = reversed(self).next()\n        else:\n            key = iter(self).next()\n        value = self.pop(key)\n        return key, value\n", "tokens": ["src", "marshmallow", "ordereddict", "py", "ordereddict", "def", "popitem", "self", "last", "true", "if", "not", "self", "raise", "keyerror", "dictionary", "is", "empty", "if", "last", "key", "reversed", "self", "next", "else", "key", "iter", "self", "next", "value", "self", "pop", "key", "return", "key", "value"], "doc_len": 36}
{"doc_id": "src/marshmallow/ordereddict.py::OrderedDict.__reduce__", "file_path": "src/marshmallow/ordereddict.py", "class_name": "OrderedDict", "func_name": "__reduce__", "text": "文件路径: src/marshmallow/ordereddict.py, 类名: OrderedDict\n    def __reduce__(self):\n        items = [[k, self[k]] for k in self]\n        tmp = self.__map, self.__end\n        del self.__map, self.__end\n        inst_dict = vars(self).copy()\n        self.__map, self.__end = tmp\n        if inst_dict:\n            return (self.__class__, (items,), inst_dict)\n        return self.__class__, (items,)\n", "tokens": ["src", "marshmallow", "ordereddict", "py", "ordereddict", "def", "__reduce__", "self", "items", "k", "self", "k", "for", "k", "in", "self", "tmp", "self", "__map", "self", "__end", "del", "self", "__map", "self", "__end", "inst_dict", "vars", "self", "copy", "self", "__map", "self", "__end", "tmp", "if", "inst_dict", "return", "self", "__class__", "items", "inst_dict", "return", "self", "__class__", "items"], "doc_len": 46}
{"doc_id": "src/marshmallow/ordereddict.py::OrderedDict.keys", "file_path": "src/marshmallow/ordereddict.py", "class_name": "OrderedDict", "func_name": "keys", "text": "文件路径: src/marshmallow/ordereddict.py, 类名: OrderedDict\n    def keys(self):\n        return list(self)\n", "tokens": ["src", "marshmallow", "ordereddict", "py", "ordereddict", "def", "keys", "self", "return", "list", "self"], "doc_len": 11}
{"doc_id": "src/marshmallow/ordereddict.py::OrderedDict.__repr__", "file_path": "src/marshmallow/ordereddict.py", "class_name": "OrderedDict", "func_name": "__repr__", "text": "文件路径: src/marshmallow/ordereddict.py, 类名: OrderedDict\n    def __repr__(self):\n        if not self:\n            return '%s()' % (self.__class__.__name__,)\n        return '%s(%r)' % (self.__class__.__name__, self.items())\n", "tokens": ["src", "marshmallow", "ordereddict", "py", "ordereddict", "def", "__repr__", "self", "if", "not", "self", "return", "s", "self", "__class__", "__name__", "return", "s", "r", "self", "__class__", "__name__", "self", "items"], "doc_len": 24}
{"doc_id": "src/marshmallow/ordereddict.py::OrderedDict.copy", "file_path": "src/marshmallow/ordereddict.py", "class_name": "OrderedDict", "func_name": "copy", "text": "文件路径: src/marshmallow/ordereddict.py, 类名: OrderedDict\n    def copy(self):\n        return self.__class__(self)\n", "tokens": ["src", "marshmallow", "ordereddict", "py", "ordereddict", "def", "copy", "self", "return", "self", "__class__", "self"], "doc_len": 12}
{"doc_id": "src/marshmallow/ordereddict.py::OrderedDict.fromkeys", "file_path": "src/marshmallow/ordereddict.py", "class_name": "OrderedDict", "func_name": "fromkeys", "text": "文件路径: src/marshmallow/ordereddict.py, 类名: OrderedDict\n    def fromkeys(cls, iterable, value=None):\n        d = cls()\n        for key in iterable:\n            d[key] = value\n        return d\n", "tokens": ["src", "marshmallow", "ordereddict", "py", "ordereddict", "def", "fromkeys", "cls", "iterable", "value", "none", "d", "cls", "for", "key", "in", "iterable", "d", "key", "value", "return", "d"], "doc_len": 22}
{"doc_id": "src/marshmallow/ordereddict.py::OrderedDict.__eq__", "file_path": "src/marshmallow/ordereddict.py", "class_name": "OrderedDict", "func_name": "__eq__", "text": "文件路径: src/marshmallow/ordereddict.py, 类名: OrderedDict\n    def __eq__(self, other):\n        if isinstance(other, OrderedDict):\n            if len(self) != len(other):\n                return False\n            for p, q in  zip(self.items(), other.items()):\n                if p != q:\n                    return False\n            return True\n        return dict.__eq__(self, other)\n", "tokens": ["src", "marshmallow", "ordereddict", "py", "ordereddict", "def", "__eq__", "self", "other", "if", "isinstance", "other", "ordereddict", "if", "len", "self", "len", "other", "return", "false", "for", "p", "q", "in", "zip", "self", "items", "other", "items", "if", "p", "q", "return", "false", "return", "true", "return", "dict", "__eq__", "self", "other"], "doc_len": 41}
{"doc_id": "src/marshmallow/ordereddict.py::OrderedDict.__ne__", "file_path": "src/marshmallow/ordereddict.py", "class_name": "OrderedDict", "func_name": "__ne__", "text": "文件路径: src/marshmallow/ordereddict.py, 类名: OrderedDict\n    def __ne__(self, other):\n        return not self == other\n", "tokens": ["src", "marshmallow", "ordereddict", "py", "ordereddict", "def", "__ne__", "self", "other", "return", "not", "self", "other"], "doc_len": 13}
{"doc_id": "src/marshmallow/orderedset.py::OrderedSet.__init__", "file_path": "src/marshmallow/orderedset.py", "class_name": "OrderedSet", "func_name": "__init__", "text": "文件路径: src/marshmallow/orderedset.py, 类名: OrderedSet\n    def __init__(self, iterable=None):\n        self.end = end = []\n        end += [None, end, end]         # sentinel node for doubly linked list\n        self.map = {}                   # key --> [key, prev, next]\n        if iterable is not None:\n            self |= iterable\n", "tokens": ["src", "marshmallow", "orderedset", "py", "orderedset", "def", "__init__", "self", "iterable", "none", "self", "end", "end", "end", "none", "end", "end", "sentinel", "node", "for", "doubly", "linked", "list", "self", "map", "key", "key", "prev", "next", "if", "iterable", "is", "not", "none", "self", "iterable"], "doc_len": 36}
{"doc_id": "src/marshmallow/orderedset.py::OrderedSet.__len__", "file_path": "src/marshmallow/orderedset.py", "class_name": "OrderedSet", "func_name": "__len__", "text": "文件路径: src/marshmallow/orderedset.py, 类名: OrderedSet\n    def __len__(self):\n        return len(self.map)\n", "tokens": ["src", "marshmallow", "orderedset", "py", "orderedset", "def", "__len__", "self", "return", "len", "self", "map"], "doc_len": 12}
{"doc_id": "src/marshmallow/orderedset.py::OrderedSet.__contains__", "file_path": "src/marshmallow/orderedset.py", "class_name": "OrderedSet", "func_name": "__contains__", "text": "文件路径: src/marshmallow/orderedset.py, 类名: OrderedSet\n    def __contains__(self, key):\n        return key in self.map\n", "tokens": ["src", "marshmallow", "orderedset", "py", "orderedset", "def", "__contains__", "self", "key", "return", "key", "in", "self", "map"], "doc_len": 14}
{"doc_id": "src/marshmallow/orderedset.py::OrderedSet.add", "file_path": "src/marshmallow/orderedset.py", "class_name": "OrderedSet", "func_name": "add", "text": "文件路径: src/marshmallow/orderedset.py, 类名: OrderedSet\n    def add(self, key):\n        if key not in self.map:\n            end = self.end\n            curr = end[1]\n            curr[2] = end[1] = self.map[key] = [key, curr, end]\n", "tokens": ["src", "marshmallow", "orderedset", "py", "orderedset", "def", "add", "self", "key", "if", "key", "not", "in", "self", "map", "end", "self", "end", "curr", "end", "1", "curr", "2", "end", "1", "self", "map", "key", "key", "curr", "end"], "doc_len": 31}
{"doc_id": "src/marshmallow/orderedset.py::OrderedSet.discard", "file_path": "src/marshmallow/orderedset.py", "class_name": "OrderedSet", "func_name": "discard", "text": "文件路径: src/marshmallow/orderedset.py, 类名: OrderedSet\n    def discard(self, key):\n        if key in self.map:\n            key, prev, next = self.map.pop(key)\n            prev[2] = next\n            next[1] = prev\n", "tokens": ["src", "marshmallow", "orderedset", "py", "orderedset", "def", "discard", "self", "key", "if", "key", "in", "self", "map", "key", "prev", "next", "self", "map", "pop", "key", "prev", "2", "next", "next", "1", "prev"], "doc_len": 27}
{"doc_id": "src/marshmallow/orderedset.py::OrderedSet.__iter__", "file_path": "src/marshmallow/orderedset.py", "class_name": "OrderedSet", "func_name": "__iter__", "text": "文件路径: src/marshmallow/orderedset.py, 类名: OrderedSet\n    def __iter__(self):\n        end = self.end\n        curr = end[2]\n        while curr is not end:\n            yield curr[0]\n            curr = curr[2]\n", "tokens": ["src", "marshmallow", "orderedset", "py", "orderedset", "def", "__iter__", "self", "end", "self", "end", "curr", "end", "2", "while", "curr", "is", "not", "end", "yield", "curr", "0", "curr", "curr", "2"], "doc_len": 25}
{"doc_id": "src/marshmallow/orderedset.py::OrderedSet.__reversed__", "file_path": "src/marshmallow/orderedset.py", "class_name": "OrderedSet", "func_name": "__reversed__", "text": "文件路径: src/marshmallow/orderedset.py, 类名: OrderedSet\n    def __reversed__(self):\n        end = self.end\n        curr = end[1]\n        while curr is not end:\n            yield curr[0]\n            curr = curr[1]\n", "tokens": ["src", "marshmallow", "orderedset", "py", "orderedset", "def", "__reversed__", "self", "end", "self", "end", "curr", "end", "1", "while", "curr", "is", "not", "end", "yield", "curr", "0", "curr", "curr", "1"], "doc_len": 25}
{"doc_id": "src/marshmallow/orderedset.py::OrderedSet.pop", "file_path": "src/marshmallow/orderedset.py", "class_name": "OrderedSet", "func_name": "pop", "text": "文件路径: src/marshmallow/orderedset.py, 类名: OrderedSet\n    def pop(self, last=True):\n        if not self:\n            raise KeyError('set is empty')\n        key = self.end[1][0] if last else self.end[2][0]\n        self.discard(key)\n        return key\n", "tokens": ["src", "marshmallow", "orderedset", "py", "orderedset", "def", "pop", "self", "last", "true", "if", "not", "self", "raise", "keyerror", "set", "is", "empty", "key", "self", "end", "1", "0", "if", "last", "else", "self", "end", "2", "0", "self", "discard", "key", "return", "key"], "doc_len": 35}
{"doc_id": "src/marshmallow/orderedset.py::OrderedSet.__repr__", "file_path": "src/marshmallow/orderedset.py", "class_name": "OrderedSet", "func_name": "__repr__", "text": "文件路径: src/marshmallow/orderedset.py, 类名: OrderedSet\n    def __repr__(self):\n        if not self:\n            return '%s()' % (self.__class__.__name__,)\n        return '%s(%r)' % (self.__class__.__name__, list(self))\n", "tokens": ["src", "marshmallow", "orderedset", "py", "orderedset", "def", "__repr__", "self", "if", "not", "self", "return", "s", "self", "__class__", "__name__", "return", "s", "r", "self", "__class__", "__name__", "list", "self"], "doc_len": 24}
{"doc_id": "src/marshmallow/orderedset.py::OrderedSet.__eq__", "file_path": "src/marshmallow/orderedset.py", "class_name": "OrderedSet", "func_name": "__eq__", "text": "文件路径: src/marshmallow/orderedset.py, 类名: OrderedSet\n    def __eq__(self, other):\n        if isinstance(other, OrderedSet):\n            return len(self) == len(other) and list(self) == list(other)\n        return set(self) == set(other)\n", "tokens": ["src", "marshmallow", "orderedset", "py", "orderedset", "def", "__eq__", "self", "other", "if", "isinstance", "other", "orderedset", "return", "len", "self", "len", "other", "and", "list", "self", "list", "other", "return", "set", "self", "set", "other"], "doc_len": 28}
{"doc_id": "src/marshmallow/schema.py::_get_fields", "file_path": "src/marshmallow/schema.py", "class_name": null, "func_name": "_get_fields", "text": "文件路径: src/marshmallow/schema.py\ndef _get_fields(attrs, field_class, pop=False, ordered=False):\n    \"\"\"Get fields from a class. If ordered=True, fields will sorted by creation index.\n\n    :param attrs: Mapping of class attributes\n    :param type field_class: Base field class\n    :param bool pop: Remove matching fields\n    \"\"\"\n    getter = getattr(attrs, 'pop' if pop else 'get')\n    fields = [\n        (field_name, getter(field_name))\n        for field_name, field_value in list(iteritems(attrs))\n        if utils.is_instance_or_subclass(field_value, field_class)\n    ]\n    if ordered:\n        return sorted(\n            fields,\n            key=lambda pair: pair[1]._creation_index,\n        )\n    else:\n        return fields\n", "tokens": ["src", "marshmallow", "schema", "py", "def", "_get_fields", "attrs", "field_class", "pop", "false", "ordered", "false", "get", "fields", "from", "a", "class", "if", "ordered", "true", "fields", "will", "sorted", "by", "creation", "index", "param", "attrs", "mapping", "of", "class", "attributes", "param", "type", "field_class", "base", "field", "class", "param", "bool", "pop", "remove", "matching", "fields", "getter", "getattr", "attrs", "pop", "if", "pop", "else", "get", "fields", "field_name", "getter", "field_name", "for", "field_name", "field_value", "in", "list", "iteritems", "attrs", "if", "utils", "is_instance_or_subclass", "field_value", "field_class", "if", "ordered", "return", "sorted", "fields", "key", "lambda", "pair", "pair", "1", "_creation_index", "else", "return", "fields"], "doc_len": 82}
{"doc_id": "src/marshmallow/schema.py::_get_fields_by_mro", "file_path": "src/marshmallow/schema.py", "class_name": null, "func_name": "_get_fields_by_mro", "text": "文件路径: src/marshmallow/schema.py\ndef _get_fields_by_mro(klass, field_class, ordered=False):\n    \"\"\"Collect fields from a class, following its method resolution order. The\n    class itself is excluded from the search; only its parents are checked. Get\n    fields from ``_declared_fields`` if available, else use ``__dict__``.\n\n    :param type klass: Class whose fields to retrieve\n    :param type field_class: Base field class\n    \"\"\"\n    mro = inspect.getmro(klass)\n    # Loop over mro in reverse to maintain correct order of fields\n    return sum(\n        (\n            _get_fields(\n                getattr(base, '_declared_fields', base.__dict__),\n                field_class,\n                ordered=ordered\n            )\n            for base in mro[:0:-1]\n        ),\n        [],\n    )\n", "tokens": ["src", "marshmallow", "schema", "py", "def", "_get_fields_by_mro", "klass", "field_class", "ordered", "false", "collect", "fields", "from", "a", "class", "following", "its", "method", "resolution", "order", "the", "class", "itself", "is", "excluded", "from", "the", "search", "only", "its", "parents", "are", "checked", "get", "fields", "from", "_declared_fields", "if", "available", "else", "use", "__dict__", "param", "type", "klass", "class", "whose", "fields", "to", "retrieve", "param", "type", "field_class", "base", "field", "class", "mro", "inspect", "getmro", "klass", "loop", "over", "mro", "in", "reverse", "to", "maintain", "correct", "order", "of", "fields", "return", "sum", "_get_fields", "getattr", "base", "_declared_fields", "base", "__dict__", "field_class", "ordered", "ordered", "for", "base", "in", "mro", "0", "1"], "doc_len": 88}
{"doc_id": "src/marshmallow/schema.py::SchemaMeta.__new__", "file_path": "src/marshmallow/schema.py", "class_name": "SchemaMeta", "func_name": "__new__", "text": "文件路径: src/marshmallow/schema.py, 类名: SchemaMeta\n    def __new__(mcs, name, bases, attrs):\n        meta = attrs.get('Meta')\n        ordered = getattr(meta, 'ordered', False)\n        if not ordered:\n            # Inherit 'ordered' option\n            # Warning: We loop through bases instead of MRO because we don't\n            # yet have access to the class object\n            # (i.e. can't call super before we have fields)\n            for base_ in bases:\n                if hasattr(base_, 'Meta') and hasattr(base_.Meta, 'ordered'):\n                    ordered = base_.Meta.ordered\n                    break\n            else:\n                ordered = False\n        cls_fields = _get_fields(attrs, base.FieldABC, pop=True, ordered=ordered)\n        klass = super(SchemaMeta, mcs).__new__(mcs, name, bases, attrs)\n        inherited_fields = _get_fields_by_mro(klass, base.FieldABC, ordered=ordered)\n\n        # Use getattr rather than attrs['Meta'] so that we get inheritance for free\n        meta = getattr(klass, 'Meta')\n        # Set klass.opts in __new__ rather than __init__ so that it is accessible in\n        # get_declared_fields\n        klass.opts = klass.OPTIONS_CLASS(meta)\n        # Pass the inherited `ordered` into opts\n        klass.opts.ordered = ordered\n        # Add fields specifid in the `include` class Meta option\n        cls_fields += list(klass.opts.include.items())\n\n        dict_cls = OrderedDict if ordered else dict\n        # Assign _declared_fields on class\n        klass._declared_fields = mcs.get_declared_fields(\n            klass=klass,\n            cls_fields=cls_fields,\n            inherited_fields=inherited_fields,\n            dict_cls=dict_cls\n        )\n        return klass\n", "tokens": ["src", "marshmallow", "schema", "py", "schemameta", "def", "__new__", "mcs", "name", "bases", "attrs", "meta", "attrs", "get", "meta", "ordered", "getattr", "meta", "ordered", "false", "if", "not", "ordered", "inherit", "ordered", "option", "warning", "we", "loop", "through", "bases", "instead", "of", "mro", "because", "we", "don", "t", "yet", "have", "access", "to", "the", "class", "object", "i", "e", "can", "t", "call", "super", "before", "we", "have", "fields", "for", "base_", "in", "bases", "if", "hasattr", "base_", "meta", "and", "hasattr", "base_", "meta", "ordered", "ordered", "base_", "meta", "ordered", "break", "else", "ordered", "false", "cls_fields", "_get_fields", "attrs", "base", "fieldabc", "pop", "true", "ordered", "ordered", "klass", "super", "schemameta", "mcs", "__new__", "mcs", "name", "bases", "attrs", "inherited_fields", "_get_fields_by_mro", "klass", "base", "fieldabc", "ordered", "ordered", "use", "getattr", "rather", "than", "attrs", "meta", "so", "that", "we", "get", "inheritance", "for", "free", "meta", "getattr", "klass", "meta", "set", "klass", "opts", "in", "__new__", "rather", "than", "__init__", "so", "that", "it", "is", "accessible", "in", "get_declared_fields", "klass", "opts", "klass", "options_class", "meta", "pass", "the", "inherited", "ordered", "into", "opts", "klass", "opts", "ordered", "ordered", "add", "fields", "specifid", "in", "the", "include", "class", "meta", "option", "cls_fields", "list", "klass", "opts", "include", "items", "dict_cls", "ordereddict", "if", "ordered", "else", "dict", "assign", "_declared_fields", "on", "class", "klass", "_declared_fields", "mcs", "get_declared_fields", "klass", "klass", "cls_fields", "cls_fields", "inherited_fields", "inherited_fields", "dict_cls", "dict_cls", "return", "klass"], "doc_len": 187}
{"doc_id": "src/marshmallow/schema.py::SchemaMeta.get_declared_fields", "file_path": "src/marshmallow/schema.py", "class_name": "SchemaMeta", "func_name": "get_declared_fields", "text": "文件路径: src/marshmallow/schema.py, 类名: SchemaMeta\n    def get_declared_fields(mcs, klass, cls_fields, inherited_fields, dict_cls):\n        \"\"\"Returns a dictionary of field_name => `Field` pairs declard on the class.\n        This is exposed mainly so that plugins can add additional fields, e.g. fields\n        computed from class Meta options.\n\n        :param type klass: The class object.\n        :param dict cls_fields: The fields declared on the class, including those added\n            by the ``include`` class Meta option.\n        :param dict inherited_fileds: Inherited fields.\n        :param type dict_class: Either `dict` or `OrderedDict`, depending on the whether\n            the user specified `ordered=True`.\n        \"\"\"\n        return dict_cls(inherited_fields + cls_fields)\n", "tokens": ["src", "marshmallow", "schema", "py", "schemameta", "def", "get_declared_fields", "mcs", "klass", "cls_fields", "inherited_fields", "dict_cls", "returns", "a", "dictionary", "of", "field_name", "field", "pairs", "declard", "on", "the", "class", "this", "is", "exposed", "mainly", "so", "that", "plugins", "can", "add", "additional", "fields", "e", "g", "fields", "computed", "from", "class", "meta", "options", "param", "type", "klass", "the", "class", "object", "param", "dict", "cls_fields", "the", "fields", "declared", "on", "the", "class", "including", "those", "added", "by", "the", "include", "class", "meta", "option", "param", "dict", "inherited_fileds", "inherited", "fields", "param", "type", "dict_class", "either", "dict", "or", "ordereddict", "depending", "on", "the", "whether", "the", "user", "specified", "ordered", "true", "return", "dict_cls", "inherited_fields", "cls_fields"], "doc_len": 91}
{"doc_id": "src/marshmallow/schema.py::SchemaMeta.__init__", "file_path": "src/marshmallow/schema.py", "class_name": "SchemaMeta", "func_name": "__init__", "text": "文件路径: src/marshmallow/schema.py, 类名: SchemaMeta\n    def __init__(self, name, bases, attrs):\n        super(SchemaMeta, self).__init__(name, bases, attrs)\n        if name:\n            class_registry.register(name, self)\n        self._resolve_processors()\n", "tokens": ["src", "marshmallow", "schema", "py", "schemameta", "def", "__init__", "self", "name", "bases", "attrs", "super", "schemameta", "self", "__init__", "name", "bases", "attrs", "if", "name", "class_registry", "register", "name", "self", "self", "_resolve_processors"], "doc_len": 26}
{"doc_id": "src/marshmallow/schema.py::SchemaMeta._resolve_processors", "file_path": "src/marshmallow/schema.py", "class_name": "SchemaMeta", "func_name": "_resolve_processors", "text": "文件路径: src/marshmallow/schema.py, 类名: SchemaMeta\n    def _resolve_processors(self):\n        \"\"\"Add in the decorated processors\n\n        By doing this after constructing the class, we let standard inheritance\n        do all the hard work.\n        \"\"\"\n        mro = inspect.getmro(self)\n        self._has_processors = False\n        self.__processors__ = defaultdict(list)\n        for attr_name in dir(self):\n            # Need to look up the actual descriptor, not whatever might be\n            # bound to the class. This needs to come from the __dict__ of the\n            # declaring class.\n            for parent in mro:\n                try:\n                    attr = parent.__dict__[attr_name]\n                except KeyError:\n                    continue\n                else:\n                    break\n            else:\n                # In case we didn't find the attribute and didn't break above.\n                # We should never hit this - it's just here for completeness\n                # to exclude the possibility of attr being undefined.\n                continue\n\n            try:\n                processor_tags = attr.__marshmallow_tags__\n            except AttributeError:\n                continue\n\n            self._has_processors = bool(processor_tags)\n            for tag in processor_tags:\n                # Use name here so we can get the bound method later, in case\n                # the processor was a descriptor or something.\n                self.__processors__[tag].append(attr_name)\n", "tokens": ["src", "marshmallow", "schema", "py", "schemameta", "def", "_resolve_processors", "self", "add", "in", "the", "decorated", "processors", "by", "doing", "this", "after", "constructing", "the", "class", "we", "let", "standard", "inheritance", "do", "all", "the", "hard", "work", "mro", "inspect", "getmro", "self", "self", "_has_processors", "false", "self", "__processors__", "defaultdict", "list", "for", "attr_name", "in", "dir", "self", "need", "to", "look", "up", "the", "actual", "descriptor", "not", "whatever", "might", "be", "bound", "to", "the", "class", "this", "needs", "to", "come", "from", "the", "__dict__", "of", "the", "declaring", "class", "for", "parent", "in", "mro", "try", "attr", "parent", "__dict__", "attr_name", "except", "keyerror", "continue", "else", "break", "else", "in", "case", "we", "didn", "t", "find", "the", "attribute", "and", "didn", "t", "break", "above", "we", "should", "never", "hit", "this", "it", "s", "just", "here", "for", "completeness", "to", "exclude", "the", "possibility", "of", "attr", "being", "undefined", "continue", "try", "processor_tags", "attr", "__marshmallow_tags__", "except", "attributeerror", "continue", "self", "_has_processors", "bool", "processor_tags", "for", "tag", "in", "processor_tags", "use", "name", "here", "so", "we", "can", "get", "the", "bound", "method", "later", "in", "case", "the", "processor", "was", "a", "descriptor", "or", "something", "self", "__processors__", "tag", "append", "attr_name"], "doc_len": 159}
{"doc_id": "src/marshmallow/schema.py::SchemaOpts.__init__", "file_path": "src/marshmallow/schema.py", "class_name": "SchemaOpts", "func_name": "__init__", "text": "文件路径: src/marshmallow/schema.py, 类名: SchemaOpts\n    def __init__(self, meta):\n        self.fields = getattr(meta, 'fields', ())\n        if not isinstance(self.fields, (list, tuple)):\n            raise ValueError(\"`fields` option must be a list or tuple.\")\n        self.additional = getattr(meta, 'additional', ())\n        if not isinstance(self.additional, (list, tuple)):\n            raise ValueError(\"`additional` option must be a list or tuple.\")\n        if self.fields and self.additional:\n            raise ValueError(\"Cannot set both `fields` and `additional` options\"\n                            \" for the same Schema.\")\n        self.exclude = getattr(meta, 'exclude', ())\n        if not isinstance(self.exclude, (list, tuple)):\n            raise ValueError(\"`exclude` must be a list or tuple.\")\n        self.strict = getattr(meta, 'strict', False)\n        if hasattr(meta, 'dateformat'):\n            warnings.warn(\n                \"The dateformat option is renamed to datetimeformat in marshmallow 3.\",\n                ChangedInMarshmallow3Warning\n            )\n        self.dateformat = getattr(meta, 'dateformat', None)\n        if hasattr(meta, 'json_module'):\n            warnings.warn(\n                \"The json_module option is renamed to render_module in marshmallow 3.\",\n                ChangedInMarshmallow3Warning\n            )\n        self.json_module = getattr(meta, 'json_module', json)\n        if hasattr(meta, 'skip_missing'):\n            warnings.warn(\n                'The skip_missing option is no longer necessary. Missing inputs passed to '\n                'Schema.dump will be excluded from the serialized output by default.',\n                UserWarning\n            )\n        self.ordered = getattr(meta, 'ordered', False)\n        self.index_errors = getattr(meta, 'index_errors', True)\n        self.include = getattr(meta, 'include', {})\n        self.load_only = getattr(meta, 'load_only', ())\n        self.dump_only = getattr(meta, 'dump_only', ())\n", "tokens": ["src", "marshmallow", "schema", "py", "schemaopts", "def", "__init__", "self", "meta", "self", "fields", "getattr", "meta", "fields", "if", "not", "isinstance", "self", "fields", "list", "tuple", "raise", "valueerror", "fields", "option", "must", "be", "a", "list", "or", "tuple", "self", "additional", "getattr", "meta", "additional", "if", "not", "isinstance", "self", "additional", "list", "tuple", "raise", "valueerror", "additional", "option", "must", "be", "a", "list", "or", "tuple", "if", "self", "fields", "and", "self", "additional", "raise", "valueerror", "cannot", "set", "both", "fields", "and", "additional", "options", "for", "the", "same", "schema", "self", "exclude", "getattr", "meta", "exclude", "if", "not", "isinstance", "self", "exclude", "list", "tuple", "raise", "valueerror", "exclude", "must", "be", "a", "list", "or", "tuple", "self", "strict", "getattr", "meta", "strict", "false", "if", "hasattr", "meta", "dateformat", "warnings", "warn", "the", "dateformat", "option", "is", "renamed", "to", "datetimeformat", "in", "marshmallow", "3", "changedinmarshmallow3warning", "self", "dateformat", "getattr", "meta", "dateformat", "none", "if", "hasattr", "meta", "json_module", "warnings", "warn", "the", "json_module", "option", "is", "renamed", "to", "render_module", "in", "marshmallow", "3", "changedinmarshmallow3warning", "self", "json_module", "getattr", "meta", "json_module", "json", "if", "hasattr", "meta", "skip_missing", "warnings", "warn", "the", "skip_missing", "option", "is", "no", "longer", "necessary", "missing", "inputs", "passed", "to", "schema", "dump", "will", "be", "excluded", "from", "the", "serialized", "output", "by", "default", "userwarning", "self", "ordered", "getattr", "meta", "ordered", "false", "self", "index_errors", "getattr", "meta", "index_errors", "true", "self", "include", "getattr", "meta", "include", "self", "load_only", "getattr", "meta", "load_only", "self", "dump_only", "getattr", "meta", "dump_only"], "doc_len": 201}
{"doc_id": "src/marshmallow/schema.py::BaseSchema.__init__", "file_path": "src/marshmallow/schema.py", "class_name": "BaseSchema", "func_name": "__init__", "text": "文件路径: src/marshmallow/schema.py, 类名: BaseSchema\n    def __init__(self, extra=None, only=None, exclude=(), prefix='', strict=None,\n                 many=False, context=None, load_only=(), dump_only=(),\n                 partial=False):\n        # copy declared fields from metaclass\n        self.declared_fields = copy.deepcopy(self._declared_fields)\n        self.many = many\n        self.only = only\n        self.exclude = set(self.opts.exclude) | set(exclude)\n        if prefix:\n            warnings.warn(\n                'The `prefix` argument is deprecated. Use a post_dump '\n                'method to insert a prefix instead.',\n                RemovedInMarshmallow3Warning\n            )\n        self.prefix = prefix\n        self.strict = strict if strict is not None else self.opts.strict\n        self.ordered = self.opts.ordered\n        self.load_only = set(load_only) or set(self.opts.load_only)\n        self.dump_only = set(dump_only) or set(self.opts.dump_only)\n        self.partial = partial\n        #: Dictionary mapping field_names -> :class:`Field` objects\n        self.fields = self.dict_class()\n        if extra:\n            warnings.warn(\n                'The `extra` argument is deprecated. Use a post_dump '\n                'method to add additional data instead.',\n                RemovedInMarshmallow3Warning\n            )\n        self.extra = extra\n        self.context = context or {}\n        self._normalize_nested_options()\n        self._types_seen = set()\n        self._update_fields(many=many)\n", "tokens": ["src", "marshmallow", "schema", "py", "baseschema", "def", "__init__", "self", "extra", "none", "only", "none", "exclude", "prefix", "strict", "none", "many", "false", "context", "none", "load_only", "dump_only", "partial", "false", "copy", "declared", "fields", "from", "metaclass", "self", "declared_fields", "copy", "deepcopy", "self", "_declared_fields", "self", "many", "many", "self", "only", "only", "self", "exclude", "set", "self", "opts", "exclude", "set", "exclude", "if", "prefix", "warnings", "warn", "the", "prefix", "argument", "is", "deprecated", "use", "a", "post_dump", "method", "to", "insert", "a", "prefix", "instead", "removedinmarshmallow3warning", "self", "prefix", "prefix", "self", "strict", "strict", "if", "strict", "is", "not", "none", "else", "self", "opts", "strict", "self", "ordered", "self", "opts", "ordered", "self", "load_only", "set", "load_only", "or", "set", "self", "opts", "load_only", "self", "dump_only", "set", "dump_only", "or", "set", "self", "opts", "dump_only", "self", "partial", "partial", "dictionary", "mapping", "field_names", "class", "field", "objects", "self", "fields", "self", "dict_class", "if", "extra", "warnings", "warn", "the", "extra", "argument", "is", "deprecated", "use", "a", "post_dump", "method", "to", "add", "additional", "data", "instead", "removedinmarshmallow3warning", "self", "extra", "extra", "self", "context", "context", "or", "self", "_normalize_nested_options", "self", "_types_seen", "set", "self", "_update_fields", "many", "many"], "doc_len": 154}
{"doc_id": "src/marshmallow/schema.py::BaseSchema.__repr__", "file_path": "src/marshmallow/schema.py", "class_name": "BaseSchema", "func_name": "__repr__", "text": "文件路径: src/marshmallow/schema.py, 类名: BaseSchema\n    def __repr__(self):\n        return '<{ClassName}(many={self.many}, strict={self.strict})>'.format(\n            ClassName=self.__class__.__name__, self=self\n        )\n", "tokens": ["src", "marshmallow", "schema", "py", "baseschema", "def", "__repr__", "self", "return", "classname", "many", "self", "many", "strict", "self", "strict", "format", "classname", "self", "__class__", "__name__", "self", "self"], "doc_len": 23}
{"doc_id": "src/marshmallow/schema.py::BaseSchema._postprocess", "file_path": "src/marshmallow/schema.py", "class_name": "BaseSchema", "func_name": "_postprocess", "text": "文件路径: src/marshmallow/schema.py, 类名: BaseSchema\n    def _postprocess(self, data, many, obj):\n        if self.extra:\n            if many:\n                for each in data:\n                    each.update(self.extra)\n            else:\n                data.update(self.extra)\n        return data\n", "tokens": ["src", "marshmallow", "schema", "py", "baseschema", "def", "_postprocess", "self", "data", "many", "obj", "if", "self", "extra", "if", "many", "for", "each", "in", "data", "each", "update", "self", "extra", "else", "data", "update", "self", "extra", "return", "data"], "doc_len": 31}
{"doc_id": "src/marshmallow/schema.py::BaseSchema.dict_class", "file_path": "src/marshmallow/schema.py", "class_name": "BaseSchema", "func_name": "dict_class", "text": "文件路径: src/marshmallow/schema.py, 类名: BaseSchema\n    def dict_class(self):\n        return OrderedDict if self.ordered else dict\n", "tokens": ["src", "marshmallow", "schema", "py", "baseschema", "def", "dict_class", "self", "return", "ordereddict", "if", "self", "ordered", "else", "dict"], "doc_len": 15}
{"doc_id": "src/marshmallow/schema.py::BaseSchema.set_class", "file_path": "src/marshmallow/schema.py", "class_name": "BaseSchema", "func_name": "set_class", "text": "文件路径: src/marshmallow/schema.py, 类名: BaseSchema\n    def set_class(self):\n        return OrderedSet if self.ordered else set\n", "tokens": ["src", "marshmallow", "schema", "py", "baseschema", "def", "set_class", "self", "return", "orderedset", "if", "self", "ordered", "else", "set"], "doc_len": 15}
{"doc_id": "src/marshmallow/schema.py::BaseSchema.handle_error", "file_path": "src/marshmallow/schema.py", "class_name": "BaseSchema", "func_name": "handle_error", "text": "文件路径: src/marshmallow/schema.py, 类名: BaseSchema\n    def handle_error(self, error, data):\n        \"\"\"Custom error handler function for the schema.\n\n        :param ValidationError error: The `ValidationError` raised during (de)serialization.\n        :param data: The original input data.\n\n        .. versionadded:: 2.0.0\n        \"\"\"\n        pass\n", "tokens": ["src", "marshmallow", "schema", "py", "baseschema", "def", "handle_error", "self", "error", "data", "custom", "error", "handler", "function", "for", "the", "schema", "param", "validationerror", "error", "the", "validationerror", "raised", "during", "de", "serialization", "param", "data", "the", "original", "input", "data", "versionadded", "2", "0", "0", "pass"], "doc_len": 37}
{"doc_id": "src/marshmallow/schema.py::BaseSchema.get_attribute", "file_path": "src/marshmallow/schema.py", "class_name": "BaseSchema", "func_name": "get_attribute", "text": "文件路径: src/marshmallow/schema.py, 类名: BaseSchema\n    def get_attribute(self, attr, obj, default):\n        \"\"\"Defines how to pull values from an object to serialize.\n\n        .. versionadded:: 2.0.0\n        \"\"\"\n        return utils.get_value(attr, obj, default)\n", "tokens": ["src", "marshmallow", "schema", "py", "baseschema", "def", "get_attribute", "self", "attr", "obj", "default", "defines", "how", "to", "pull", "values", "from", "an", "object", "to", "serialize", "versionadded", "2", "0", "0", "return", "utils", "get_value", "attr", "obj", "default"], "doc_len": 31}
{"doc_id": "src/marshmallow/schema.py::BaseSchema.error_handler", "file_path": "src/marshmallow/schema.py", "class_name": "BaseSchema", "func_name": "error_handler", "text": "文件路径: src/marshmallow/schema.py, 类名: BaseSchema\n    def error_handler(cls, func):\n        \"\"\"Decorator that registers an error handler function for the schema.\n        The function receives the :class:`Schema` instance, a dictionary of errors,\n        and the serialized object (if serializing data) or data dictionary (if\n        deserializing data) as arguments.\n\n        Example: ::\n\n            class UserSchema(Schema):\n                email = fields.Email()\n\n            @UserSchema.error_handler\n            def handle_errors(schema, errors, obj):\n                raise ValueError('An error occurred while marshalling {}'.format(obj))\n\n            user = User(email='invalid')\n            UserSchema().dump(user)  # => raises ValueError\n            UserSchema().load({'email': 'bademail'})  # raises ValueError\n\n        .. versionadded:: 0.7.0\n        .. deprecated:: 2.0.0\n            Set the ``error_handler`` class Meta option instead.\n        \"\"\"\n        warnings.warn(\n            'Schema.error_handler is deprecated. Set the error_handler class Meta option '\n            'instead.', category=DeprecationWarning\n        )\n        cls.__error_handler__ = func\n        return func\n", "tokens": ["src", "marshmallow", "schema", "py", "baseschema", "def", "error_handler", "cls", "func", "decorator", "that", "registers", "an", "error", "handler", "function", "for", "the", "schema", "the", "function", "receives", "the", "class", "schema", "instance", "a", "dictionary", "of", "errors", "and", "the", "serialized", "object", "if", "serializing", "data", "or", "data", "dictionary", "if", "deserializing", "data", "as", "arguments", "example", "class", "userschema", "schema", "email", "fields", "email", "userschema", "error_handler", "def", "handle_errors", "schema", "errors", "obj", "raise", "valueerror", "an", "error", "occurred", "while", "marshalling", "format", "obj", "user", "user", "email", "invalid", "userschema", "dump", "user", "raises", "valueerror", "userschema", "load", "email", "bademail", "raises", "valueerror", "versionadded", "0", "7", "0", "deprecated", "2", "0", "0", "set", "the", "error_handler", "class", "meta", "option", "instead", "warnings", "warn", "schema", "error_handler", "is", "deprecated", "set", "the", "error_handler", "class", "meta", "option", "instead", "category", "deprecationwarning", "cls", "__error_handler__", "func", "return", "func"], "doc_len": 118}
{"doc_id": "src/marshmallow/schema.py::BaseSchema.accessor", "file_path": "src/marshmallow/schema.py", "class_name": "BaseSchema", "func_name": "accessor", "text": "文件路径: src/marshmallow/schema.py, 类名: BaseSchema\n    def accessor(cls, func):\n        \"\"\"Decorator that registers a function for pulling values from an object\n        to serialize. The function receives the :class:`Schema` instance, the\n        ``key`` of the value to get, the ``obj`` to serialize, and an optional\n        ``default`` value.\n\n        .. deprecated:: 2.0.0\n            Set the ``error_handler`` class Meta option instead.\n        \"\"\"\n        warnings.warn(\n            'Schema.accessor is deprecated. Set the accessor class Meta option '\n            'instead.', category=DeprecationWarning\n        )\n        cls.__accessor__ = func\n        return func\n", "tokens": ["src", "marshmallow", "schema", "py", "baseschema", "def", "accessor", "cls", "func", "decorator", "that", "registers", "a", "function", "for", "pulling", "values", "from", "an", "object", "to", "serialize", "the", "function", "receives", "the", "class", "schema", "instance", "the", "key", "of", "the", "value", "to", "get", "the", "obj", "to", "serialize", "and", "an", "optional", "default", "value", "deprecated", "2", "0", "0", "set", "the", "error_handler", "class", "meta", "option", "instead", "warnings", "warn", "schema", "accessor", "is", "deprecated", "set", "the", "accessor", "class", "meta", "option", "instead", "category", "deprecationwarning", "cls", "__accessor__", "func", "return", "func"], "doc_len": 76}
{"doc_id": "src/marshmallow/schema.py::BaseSchema.dump", "file_path": "src/marshmallow/schema.py", "class_name": "BaseSchema", "func_name": "dump", "text": "文件路径: src/marshmallow/schema.py, 类名: BaseSchema\n    def dump(self, obj, many=None, update_fields=True, **kwargs):\n        \"\"\"Serialize an object to native Python data types according to this\n        Schema's fields.\n\n        :param obj: The object to serialize.\n        :param bool many: Whether to serialize `obj` as a collection. If `None`, the value\n            for `self.many` is used.\n        :param bool update_fields: Whether to update the schema's field classes. Typically\n            set to `True`, but may be `False` when serializing a homogenous collection.\n            This parameter is used by `fields.Nested` to avoid multiple updates.\n        :return: A tuple of the form (``data``, ``errors``)\n        :rtype: `MarshalResult`, a `collections.namedtuple`\n\n        .. versionadded:: 1.0.0\n        \"\"\"\n        # Callable marshalling object\n        marshal = marshalling.Marshaller(prefix=self.prefix)\n        errors = {}\n        many = self.many if many is None else bool(many)\n        if many and utils.is_iterable_but_not_string(obj):\n            obj = list(obj)\n\n        if self._has_processors:\n            try:\n                processed_obj = self._invoke_dump_processors(\n                    PRE_DUMP,\n                    obj,\n                    many,\n                    original_data=obj)\n            except ValidationError as error:\n                errors = error.normalized_messages()\n                result = None\n        else:\n            processed_obj = obj\n\n        if not errors:\n            if update_fields:\n                obj_type = type(processed_obj)\n                if obj_type not in self._types_seen:\n                    self._update_fields(processed_obj, many=many)\n                    if not isinstance(processed_obj, Mapping):\n                        self._types_seen.add(obj_type)\n\n            try:\n                preresult = marshal(\n                    processed_obj,\n                    self.fields,\n                    many=many,\n                    # TODO: Remove self.__accessor__ in a later release\n                    accessor=self.get_attribute or self.__accessor__,\n                    dict_class=self.dict_class,\n                    index_errors=self.opts.index_errors,\n                    **kwargs\n                )\n            except ValidationError as error:\n                errors = marshal.errors\n                preresult = error.data\n\n            result = self._postprocess(preresult, many, obj=obj)\n\n        if not errors and self._has_processors:\n            try:\n                result = self._invoke_dump_processors(\n                    POST_DUMP,\n                    result,\n                    many,\n                    original_data=obj)\n            except ValidationError as error:\n                errors = error.normalized_messages()\n        if errors:\n            # TODO: Remove self.__error_handler__ in a later release\n            if self.__error_handler__ and callable(self.__error_handler__):\n                self.__error_handler__(errors, obj)\n            exc = ValidationError(\n                errors,\n                field_names=marshal.error_field_names,\n                fields=marshal.error_fields,\n                data=obj,\n                **marshal.error_kwargs\n            )\n            self.handle_error(exc, obj)\n            if self.strict:\n                raise exc\n\n        return MarshalResult(result, errors)\n", "tokens": ["src", "marshmallow", "schema", "py", "baseschema", "def", "dump", "self", "obj", "many", "none", "update_fields", "true", "kwargs", "serialize", "an", "object", "to", "native", "python", "data", "types", "according", "to", "this", "schema", "s", "fields", "param", "obj", "the", "object", "to", "serialize", "param", "bool", "many", "whether", "to", "serialize", "obj", "as", "a", "collection", "if", "none", "the", "value", "for", "self", "many", "is", "used", "param", "bool", "update_fields", "whether", "to", "update", "the", "schema", "s", "field", "classes", "typically", "set", "to", "true", "but", "may", "be", "false", "when", "serializing", "a", "homogenous", "collection", "this", "parameter", "is", "used", "by", "fields", "nested", "to", "avoid", "multiple", "updates", "return", "a", "tuple", "of", "the", "form", "data", "errors", "rtype", "marshalresult", "a", "collections", "namedtuple", "versionadded", "1", "0", "0", "callable", "marshalling", "object", "marshal", "marshalling", "marshaller", "prefix", "self", "prefix", "errors", "many", "self", "many", "if", "many", "is", "none", "else", "bool", "many", "if", "many", "and", "utils", "is_iterable_but_not_string", "obj", "obj", "list", "obj", "if", "self", "_has_processors", "try", "processed_obj", "self", "_invoke_dump_processors", "pre_dump", "obj", "many", "original_data", "obj", "except", "validationerror", "as", "error", "errors", "error", "normalized_messages", "result", "none", "else", "processed_obj", "obj", "if", "not", "errors", "if", "update_fields", "obj_type", "type", "processed_obj", "if", "obj_type", "not", "in", "self", "_types_seen", "self", "_update_fields", "processed_obj", "many", "many", "if", "not", "isinstance", "processed_obj", "mapping", "self", "_types_seen", "add", "obj_type", "try", "preresult", "marshal", "processed_obj", "self", "fields", "many", "many", "todo", "remove", "self", "__accessor__", "in", "a", "later", "release", "accessor", "self", "get_attribute", "or", "self", "__accessor__", "dict_class", "self", "dict_class", "index_errors", "self", "opts", "index_errors", "kwargs", "except", "validationerror", "as", "error", "errors", "marshal", "errors", "preresult", "error", "data", "result", "self", "_postprocess", "preresult", "many", "obj", "obj", "if", "not", "errors", "and", "self", "_has_processors", "try", "result", "self", "_invoke_dump_processors", "post_dump", "result", "many", "original_data", "obj", "except", "validationerror", "as", "error", "errors", "error", "normalized_messages", "if", "errors", "todo", "remove", "self", "__error_handler__", "in", "a", "later", "release", "if", "self", "__error_handler__", "and", "callable", "self", "__error_handler__", "self", "__error_handler__", "errors", "obj", "exc", "validationerror", "errors", "field_names", "marshal", "error_field_names", "fields", "marshal", "error_fields", "data", "obj", "marshal", "error_kwargs", "self", "handle_error", "exc", "obj", "if", "self", "strict", "raise", "exc", "return", "marshalresult", "result", "errors"], "doc_len": 302}
{"doc_id": "src/marshmallow/schema.py::BaseSchema.dumps", "file_path": "src/marshmallow/schema.py", "class_name": "BaseSchema", "func_name": "dumps", "text": "文件路径: src/marshmallow/schema.py, 类名: BaseSchema\n    def dumps(self, obj, many=None, update_fields=True, *args, **kwargs):\n        \"\"\"Same as :meth:`dump`, except return a JSON-encoded string.\n\n        :param obj: The object to serialize.\n        :param bool many: Whether to serialize `obj` as a collection. If `None`, the value\n            for `self.many` is used.\n        :param bool update_fields: Whether to update the schema's field classes. Typically\n            set to `True`, but may be `False` when serializing a homogenous collection.\n            This parameter is used by `fields.Nested` to avoid multiple updates.\n        :return: A tuple of the form (``data``, ``errors``)\n        :rtype: `MarshalResult`, a `collections.namedtuple`\n\n        .. versionadded:: 1.0.0\n        \"\"\"\n        deserialized, errors = self.dump(obj, many=many, update_fields=update_fields)\n        ret = self.opts.json_module.dumps(deserialized, *args, **kwargs)\n        return MarshalResult(ret, errors)\n", "tokens": ["src", "marshmallow", "schema", "py", "baseschema", "def", "dumps", "self", "obj", "many", "none", "update_fields", "true", "args", "kwargs", "same", "as", "meth", "dump", "except", "return", "a", "json", "encoded", "string", "param", "obj", "the", "object", "to", "serialize", "param", "bool", "many", "whether", "to", "serialize", "obj", "as", "a", "collection", "if", "none", "the", "value", "for", "self", "many", "is", "used", "param", "bool", "update_fields", "whether", "to", "update", "the", "schema", "s", "field", "classes", "typically", "set", "to", "true", "but", "may", "be", "false", "when", "serializing", "a", "homogenous", "collection", "this", "parameter", "is", "used", "by", "fields", "nested", "to", "avoid", "multiple", "updates", "return", "a", "tuple", "of", "the", "form", "data", "errors", "rtype", "marshalresult", "a", "collections", "namedtuple", "versionadded", "1", "0", "0", "deserialized", "errors", "self", "dump", "obj", "many", "many", "update_fields", "update_fields", "ret", "self", "opts", "json_module", "dumps", "deserialized", "args", "kwargs", "return", "marshalresult", "ret", "errors"], "doc_len": 123}
{"doc_id": "src/marshmallow/schema.py::BaseSchema.load", "file_path": "src/marshmallow/schema.py", "class_name": "BaseSchema", "func_name": "load", "text": "文件路径: src/marshmallow/schema.py, 类名: BaseSchema\n    def load(self, data, many=None, partial=None):\n        \"\"\"Deserialize a data structure to an object defined by this Schema's\n        fields and :meth:`make_object`.\n\n        :param dict data: The data to deserialize.\n        :param bool many: Whether to deserialize `data` as a collection. If `None`, the\n            value for `self.many` is used.\n        :param bool|tuple partial: Whether to ignore missing fields. If `None`,\n            the value for `self.partial` is used. If its value is an iterable,\n            only missing fields listed in that iterable will be ignored.\n        :return: A tuple of the form (``data``, ``errors``)\n        :rtype: `UnmarshalResult`, a `collections.namedtuple`\n\n        .. versionadded:: 1.0.0\n        \"\"\"\n        result, errors = self._do_load(data, many, partial=partial, postprocess=True)\n        return UnmarshalResult(data=result, errors=errors)\n", "tokens": ["src", "marshmallow", "schema", "py", "baseschema", "def", "load", "self", "data", "many", "none", "partial", "none", "deserialize", "a", "data", "structure", "to", "an", "object", "defined", "by", "this", "schema", "s", "fields", "and", "meth", "make_object", "param", "dict", "data", "the", "data", "to", "deserialize", "param", "bool", "many", "whether", "to", "deserialize", "data", "as", "a", "collection", "if", "none", "the", "value", "for", "self", "many", "is", "used", "param", "bool", "tuple", "partial", "whether", "to", "ignore", "missing", "fields", "if", "none", "the", "value", "for", "self", "partial", "is", "used", "if", "its", "value", "is", "an", "iterable", "only", "missing", "fields", "listed", "in", "that", "iterable", "will", "be", "ignored", "return", "a", "tuple", "of", "the", "form", "data", "errors", "rtype", "unmarshalresult", "a", "collections", "namedtuple", "versionadded", "1", "0", "0", "result", "errors", "self", "_do_load", "data", "many", "partial", "partial", "postprocess", "true", "return", "unmarshalresult", "data", "result", "errors", "errors"], "doc_len": 122}
{"doc_id": "src/marshmallow/schema.py::BaseSchema.loads", "file_path": "src/marshmallow/schema.py", "class_name": "BaseSchema", "func_name": "loads", "text": "文件路径: src/marshmallow/schema.py, 类名: BaseSchema\n    def loads(self, json_data, many=None, *args, **kwargs):\n        \"\"\"Same as :meth:`load`, except it takes a JSON string as input.\n\n        :param str json_data: A JSON string of the data to deserialize.\n        :param bool many: Whether to deserialize `obj` as a collection. If `None`, the\n            value for `self.many` is used.\n        :param bool|tuple partial: Whether to ignore missing fields. If `None`,\n            the value for `self.partial` is used. If its value is an iterable,\n            only missing fields listed in that iterable will be ignored.\n        :return: A tuple of the form (``data``, ``errors``)\n        :rtype: `UnmarshalResult`, a `collections.namedtuple`\n\n        .. versionadded:: 1.0.0\n        \"\"\"\n        # TODO: This avoids breaking backward compatibility if people were\n        # passing in positional args after `many` for use by `json.loads`, but\n        # ideally we shouldn't have to do this.\n        partial = kwargs.pop('partial', None)\n\n        data = self.opts.json_module.loads(json_data, *args, **kwargs)\n        return self.load(data, many=many, partial=partial)\n", "tokens": ["src", "marshmallow", "schema", "py", "baseschema", "def", "loads", "self", "json_data", "many", "none", "args", "kwargs", "same", "as", "meth", "load", "except", "it", "takes", "a", "json", "string", "as", "input", "param", "str", "json_data", "a", "json", "string", "of", "the", "data", "to", "deserialize", "param", "bool", "many", "whether", "to", "deserialize", "obj", "as", "a", "collection", "if", "none", "the", "value", "for", "self", "many", "is", "used", "param", "bool", "tuple", "partial", "whether", "to", "ignore", "missing", "fields", "if", "none", "the", "value", "for", "self", "partial", "is", "used", "if", "its", "value", "is", "an", "iterable", "only", "missing", "fields", "listed", "in", "that", "iterable", "will", "be", "ignored", "return", "a", "tuple", "of", "the", "form", "data", "errors", "rtype", "unmarshalresult", "a", "collections", "namedtuple", "versionadded", "1", "0", "0", "todo", "this", "avoids", "breaking", "backward", "compatibility", "if", "people", "were", "passing", "in", "positional", "args", "after", "many", "for", "use", "by", "json", "loads", "but", "ideally", "we", "shouldn", "t", "have", "to", "do", "this", "partial", "kwargs", "pop", "partial", "none", "data", "self", "opts", "json_module", "loads", "json_data", "args", "kwargs", "return", "self", "load", "data", "many", "many", "partial", "partial"], "doc_len": 156}
{"doc_id": "src/marshmallow/schema.py::BaseSchema.validate", "file_path": "src/marshmallow/schema.py", "class_name": "BaseSchema", "func_name": "validate", "text": "文件路径: src/marshmallow/schema.py, 类名: BaseSchema\n    def validate(self, data, many=None, partial=None):\n        \"\"\"Validate `data` against the schema, returning a dictionary of\n        validation errors.\n\n        :param dict data: The data to validate.\n        :param bool many: Whether to validate `data` as a collection. If `None`, the\n            value for `self.many` is used.\n        :param bool|tuple partial: Whether to ignore missing fields. If `None`,\n            the value for `self.partial` is used. If its value is an iterable,\n            only missing fields listed in that iterable will be ignored.\n        :return: A dictionary of validation errors.\n        :rtype: dict\n\n        .. versionadded:: 1.1.0\n        \"\"\"\n        _, errors = self._do_load(data, many, partial=partial, postprocess=False)\n        return errors\n", "tokens": ["src", "marshmallow", "schema", "py", "baseschema", "def", "validate", "self", "data", "many", "none", "partial", "none", "validate", "data", "against", "the", "schema", "returning", "a", "dictionary", "of", "validation", "errors", "param", "dict", "data", "the", "data", "to", "validate", "param", "bool", "many", "whether", "to", "validate", "data", "as", "a", "collection", "if", "none", "the", "value", "for", "self", "many", "is", "used", "param", "bool", "tuple", "partial", "whether", "to", "ignore", "missing", "fields", "if", "none", "the", "value", "for", "self", "partial", "is", "used", "if", "its", "value", "is", "an", "iterable", "only", "missing", "fields", "listed", "in", "that", "iterable", "will", "be", "ignored", "return", "a", "dictionary", "of", "validation", "errors", "rtype", "dict", "versionadded", "1", "1", "0", "_", "errors", "self", "_do_load", "data", "many", "partial", "partial", "postprocess", "false", "return", "errors"], "doc_len": 108}
{"doc_id": "src/marshmallow/schema.py::BaseSchema._do_load", "file_path": "src/marshmallow/schema.py", "class_name": "BaseSchema", "func_name": "_do_load", "text": "文件路径: src/marshmallow/schema.py, 类名: BaseSchema\n    def _do_load(self, data, many=None, partial=None, postprocess=True):\n        \"\"\"Deserialize `data`, returning the deserialized result and a dictonary of\n        validation errors.\n\n        :param data: The data to deserialize.\n        :param bool many: Whether to deserialize `data` as a collection. If `None`, the\n            value for `self.many` is used.\n        :param bool|tuple partial: Whether to validate required fields. If its value is an iterable,\n            only fields listed in that iterable will be ignored will be allowed missing.\n            If `True`, all fields will be allowed missing.\n            If `None`, the value for `self.partial` is used.\n        :param bool postprocess: Whether to run post_load methods..\n        :return: A tuple of the form (`data`, `errors`)\n        \"\"\"\n        # Callable unmarshalling object\n        unmarshal = marshalling.Unmarshaller()\n        errors = {}\n        many = self.many if many is None else bool(many)\n        if partial is None:\n            partial = self.partial\n        try:\n            processed_data = self._invoke_load_processors(\n                PRE_LOAD,\n                data,\n                many,\n                original_data=data)\n        except ValidationError as err:\n            errors = err.normalized_messages()\n            result = None\n        if not errors:\n            try:\n                result = unmarshal(\n                    processed_data,\n                    self.fields,\n                    many=many,\n                    partial=partial,\n                    dict_class=self.dict_class,\n                    index_errors=self.opts.index_errors,\n                )\n            except ValidationError as error:\n                result = error.data\n            self._invoke_field_validators(unmarshal, data=result, many=many)\n            errors = unmarshal.errors\n            field_errors = bool(errors)\n            # Run schema-level migration\n            try:\n                self._invoke_validators(unmarshal, pass_many=True, data=result, original_data=data,\n                                        many=many, field_errors=field_errors)\n            except ValidationError as err:\n                errors.update(err.messages)\n            try:\n                self._invoke_validators(unmarshal, pass_many=False, data=result, original_data=data,\n                                        many=many, field_errors=field_errors)\n            except ValidationError as err:\n                errors.update(err.messages)\n        # Run post processors\n        if not errors and postprocess:\n            try:\n                result = self._invoke_load_processors(\n                    POST_LOAD,\n                    result,\n                    many,\n                    original_data=data)\n            except ValidationError as err:\n                errors = err.normalized_messages()\n        if errors:\n            # TODO: Remove self.__error_handler__ in a later release\n            if self.__error_handler__ and callable(self.__error_handler__):\n                self.__error_handler__(errors, data)\n            exc = ValidationError(\n                errors,\n                field_names=unmarshal.error_field_names,\n                fields=unmarshal.error_fields,\n                data=data,\n                **unmarshal.error_kwargs\n            )\n            self.handle_error(exc, data)\n            if self.strict:\n                raise exc\n\n        return result, errors\n", "tokens": ["src", "marshmallow", "schema", "py", "baseschema", "def", "_do_load", "self", "data", "many", "none", "partial", "none", "postprocess", "true", "deserialize", "data", "returning", "the", "deserialized", "result", "and", "a", "dictonary", "of", "validation", "errors", "param", "data", "the", "data", "to", "deserialize", "param", "bool", "many", "whether", "to", "deserialize", "data", "as", "a", "collection", "if", "none", "the", "value", "for", "self", "many", "is", "used", "param", "bool", "tuple", "partial", "whether", "to", "validate", "required", "fields", "if", "its", "value", "is", "an", "iterable", "only", "fields", "listed", "in", "that", "iterable", "will", "be", "ignored", "will", "be", "allowed", "missing", "if", "true", "all", "fields", "will", "be", "allowed", "missing", "if", "none", "the", "value", "for", "self", "partial", "is", "used", "param", "bool", "postprocess", "whether", "to", "run", "post_load", "methods", "return", "a", "tuple", "of", "the", "form", "data", "errors", "callable", "unmarshalling", "object", "unmarshal", "marshalling", "unmarshaller", "errors", "many", "self", "many", "if", "many", "is", "none", "else", "bool", "many", "if", "partial", "is", "none", "partial", "self", "partial", "try", "processed_data", "self", "_invoke_load_processors", "pre_load", "data", "many", "original_data", "data", "except", "validationerror", "as", "err", "errors", "err", "normalized_messages", "result", "none", "if", "not", "errors", "try", "result", "unmarshal", "processed_data", "self", "fields", "many", "many", "partial", "partial", "dict_class", "self", "dict_class", "index_errors", "self", "opts", "index_errors", "except", "validationerror", "as", "error", "result", "error", "data", "self", "_invoke_field_validators", "unmarshal", "data", "result", "many", "many", "errors", "unmarshal", "errors", "field_errors", "bool", "errors", "run", "schema", "level", "migration", "try", "self", "_invoke_validators", "unmarshal", "pass_many", "true", "data", "result", "original_data", "data", "many", "many", "field_errors", "field_errors", "except", "validationerror", "as", "err", "errors", "update", "err", "messages", "try", "self", "_invoke_validators", "unmarshal", "pass_many", "false", "data", "result", "original_data", "data", "many", "many", "field_errors", "field_errors", "except", "validationerror", "as", "err", "errors", "update", "err", "messages", "run", "post", "processors", "if", "not", "errors", "and", "postprocess", "try", "result", "self", "_invoke_load_processors", "post_load", "result", "many", "original_data", "data", "except", "validationerror", "as", "err", "errors", "err", "normalized_messages", "if", "errors", "todo", "remove", "self", "__error_handler__", "in", "a", "later", "release", "if", "self", "__error_handler__", "and", "callable", "self", "__error_handler__", "self", "__error_handler__", "errors", "data", "exc", "validationerror", "errors", "field_names", "unmarshal", "error_field_names", "fields", "unmarshal", "error_fields", "data", "data", "unmarshal", "error_kwargs", "self", "handle_error", "exc", "data", "if", "self", "strict", "raise", "exc", "return", "result", "errors"], "doc_len": 313}
{"doc_id": "src/marshmallow/schema.py::BaseSchema._normalize_nested_options", "file_path": "src/marshmallow/schema.py", "class_name": "BaseSchema", "func_name": "_normalize_nested_options", "text": "文件路径: src/marshmallow/schema.py, 类名: BaseSchema\n    def _normalize_nested_options(self):\n        \"\"\"Apply then flatten nested schema options\"\"\"\n        if self.only is not None:\n            # Apply the only option to nested fields.\n            self.__apply_nested_option('only', self.only, 'intersection')\n            # Remove the child field names from the only option.\n            self.only = self.set_class(\n                [field.split('.', 1)[0] for field in self.only],\n            )\n        if self.exclude:\n            # Apply the exclude option to nested fields.\n            self.__apply_nested_option('exclude', self.exclude, 'union')\n            # Remove the parent field names from the exclude option.\n            self.exclude = self.set_class(\n                [field for field in self.exclude if '.' not in field],\n            )\n", "tokens": ["src", "marshmallow", "schema", "py", "baseschema", "def", "_normalize_nested_options", "self", "apply", "then", "flatten", "nested", "schema", "options", "if", "self", "only", "is", "not", "none", "apply", "the", "only", "option", "to", "nested", "fields", "self", "__apply_nested_option", "only", "self", "only", "intersection", "remove", "the", "child", "field", "names", "from", "the", "only", "option", "self", "only", "self", "set_class", "field", "split", "1", "0", "for", "field", "in", "self", "only", "if", "self", "exclude", "apply", "the", "exclude", "option", "to", "nested", "fields", "self", "__apply_nested_option", "exclude", "self", "exclude", "union", "remove", "the", "parent", "field", "names", "from", "the", "exclude", "option", "self", "exclude", "self", "set_class", "field", "for", "field", "in", "self", "exclude", "if", "not", "in", "field"], "doc_len": 94}
{"doc_id": "src/marshmallow/schema.py::BaseSchema.__apply_nested_option", "file_path": "src/marshmallow/schema.py", "class_name": "BaseSchema", "func_name": "__apply_nested_option", "text": "文件路径: src/marshmallow/schema.py, 类名: BaseSchema\n    def __apply_nested_option(self, option_name, field_names, set_operation):\n        \"\"\"Apply nested options to nested fields\"\"\"\n        # Split nested field names on the first dot.\n        nested_fields = [name.split('.', 1) for name in field_names if '.' in name]\n        # Partition the nested field names by parent field.\n        nested_options = defaultdict(list)\n        for parent, nested_names in nested_fields:\n            nested_options[parent].append(nested_names)\n        # Apply the nested field options.\n        for key, options in iter(nested_options.items()):\n            new_options = self.set_class(options)\n            original_options = getattr(self.declared_fields[key], option_name, ())\n            if original_options:\n                if set_operation == 'union':\n                    new_options |= self.set_class(original_options)\n                if set_operation == 'intersection':\n                    new_options &= self.set_class(original_options)\n            setattr(self.declared_fields[key], option_name, new_options)\n", "tokens": ["src", "marshmallow", "schema", "py", "baseschema", "def", "__apply_nested_option", "self", "option_name", "field_names", "set_operation", "apply", "nested", "options", "to", "nested", "fields", "split", "nested", "field", "names", "on", "the", "first", "dot", "nested_fields", "name", "split", "1", "for", "name", "in", "field_names", "if", "in", "name", "partition", "the", "nested", "field", "names", "by", "parent", "field", "nested_options", "defaultdict", "list", "for", "parent", "nested_names", "in", "nested_fields", "nested_options", "parent", "append", "nested_names", "apply", "the", "nested", "field", "options", "for", "key", "options", "in", "iter", "nested_options", "items", "new_options", "self", "set_class", "options", "original_options", "getattr", "self", "declared_fields", "key", "option_name", "if", "original_options", "if", "set_operation", "union", "new_options", "self", "set_class", "original_options", "if", "set_operation", "intersection", "new_options", "self", "set_class", "original_options", "setattr", "self", "declared_fields", "key", "option_name", "new_options"], "doc_len": 100}
{"doc_id": "src/marshmallow/schema.py::BaseSchema._update_fields", "file_path": "src/marshmallow/schema.py", "class_name": "BaseSchema", "func_name": "_update_fields", "text": "文件路径: src/marshmallow/schema.py, 类名: BaseSchema\n    def _update_fields(self, obj=None, many=False):\n        \"\"\"Update fields based on the passed in object.\"\"\"\n        if self.only is not None:\n            # Return only fields specified in only option\n            if self.opts.fields:\n                field_names = self.set_class(self.opts.fields) & self.set_class(self.only)\n            else:\n                field_names = self.set_class(self.only)\n        elif self.opts.fields:\n            # Return fields specified in fields option\n            field_names = self.set_class(self.opts.fields)\n        elif self.opts.additional:\n            # Return declared fields + additional fields\n            field_names = (self.set_class(self.declared_fields.keys()) |\n                            self.set_class(self.opts.additional))\n        else:\n            field_names = self.set_class(self.declared_fields.keys())\n\n        # If \"exclude\" option or param is specified, remove those fields\n        field_names -= self.exclude\n        ret = self.__filter_fields(field_names, obj, many=many)\n        # Set parents\n        self.__set_field_attrs(ret)\n        self.fields = ret\n        return self.fields\n", "tokens": ["src", "marshmallow", "schema", "py", "baseschema", "def", "_update_fields", "self", "obj", "none", "many", "false", "update", "fields", "based", "on", "the", "passed", "in", "object", "if", "self", "only", "is", "not", "none", "return", "only", "fields", "specified", "in", "only", "option", "if", "self", "opts", "fields", "field_names", "self", "set_class", "self", "opts", "fields", "self", "set_class", "self", "only", "else", "field_names", "self", "set_class", "self", "only", "elif", "self", "opts", "fields", "return", "fields", "specified", "in", "fields", "option", "field_names", "self", "set_class", "self", "opts", "fields", "elif", "self", "opts", "additional", "return", "declared", "fields", "additional", "fields", "field_names", "self", "set_class", "self", "declared_fields", "keys", "self", "set_class", "self", "opts", "additional", "else", "field_names", "self", "set_class", "self", "declared_fields", "keys", "if", "exclude", "option", "or", "param", "is", "specified", "remove", "those", "fields", "field_names", "self", "exclude", "ret", "self", "__filter_fields", "field_names", "obj", "many", "many", "set", "parents", "self", "__set_field_attrs", "ret", "self", "fields", "ret", "return", "self", "fields"], "doc_len": 127}
{"doc_id": "src/marshmallow/schema.py::BaseSchema.on_bind_field", "file_path": "src/marshmallow/schema.py", "class_name": "BaseSchema", "func_name": "on_bind_field", "text": "文件路径: src/marshmallow/schema.py, 类名: BaseSchema\n    def on_bind_field(self, field_name, field_obj):\n        \"\"\"Hook to modify a field when it is bound to the `Schema`. No-op by default.\"\"\"\n        return None\n", "tokens": ["src", "marshmallow", "schema", "py", "baseschema", "def", "on_bind_field", "self", "field_name", "field_obj", "hook", "to", "modify", "a", "field", "when", "it", "is", "bound", "to", "the", "schema", "no", "op", "by", "default", "return", "none"], "doc_len": 28}
{"doc_id": "src/marshmallow/schema.py::BaseSchema.__set_field_attrs", "file_path": "src/marshmallow/schema.py", "class_name": "BaseSchema", "func_name": "__set_field_attrs", "text": "文件路径: src/marshmallow/schema.py, 类名: BaseSchema\n    def __set_field_attrs(self, fields_dict):\n        \"\"\"Bind fields to the schema, setting any necessary attributes\n        on the fields (e.g. parent and name).\n\n        Also set field load_only and dump_only values if field_name was\n        specified in ``class Meta``.\n        \"\"\"\n        for field_name, field_obj in iteritems(fields_dict):\n            try:\n                if field_name in self.load_only:\n                    field_obj.load_only = True\n                if field_name in self.dump_only:\n                    field_obj.dump_only = True\n                field_obj._add_to_schema(field_name, self)\n                self.on_bind_field(field_name, field_obj)\n            except TypeError:\n                # field declared as a class, not an instance\n                if (isinstance(field_obj, type) and\n                        issubclass(field_obj, base.FieldABC)):\n                    msg = ('Field for \"{0}\" must be declared as a '\n                           'Field instance, not a class. '\n                           'Did you mean \"fields.{1}()\"?'\n                           .format(field_name, field_obj.__name__))\n                    raise TypeError(msg)\n        return fields_dict\n", "tokens": ["src", "marshmallow", "schema", "py", "baseschema", "def", "__set_field_attrs", "self", "fields_dict", "bind", "fields", "to", "the", "schema", "setting", "any", "necessary", "attributes", "on", "the", "fields", "e", "g", "parent", "and", "name", "also", "set", "field", "load_only", "and", "dump_only", "values", "if", "field_name", "was", "specified", "in", "class", "meta", "for", "field_name", "field_obj", "in", "iteritems", "fields_dict", "try", "if", "field_name", "in", "self", "load_only", "field_obj", "load_only", "true", "if", "field_name", "in", "self", "dump_only", "field_obj", "dump_only", "true", "field_obj", "_add_to_schema", "field_name", "self", "self", "on_bind_field", "field_name", "field_obj", "except", "typeerror", "field", "declared", "as", "a", "class", "not", "an", "instance", "if", "isinstance", "field_obj", "type", "and", "issubclass", "field_obj", "base", "fieldabc", "msg", "field", "for", "0", "must", "be", "declared", "as", "a", "field", "instance", "not", "a", "class", "did", "you", "mean", "fields", "1", "format", "field_name", "field_obj", "__name__", "raise", "typeerror", "msg", "return", "fields_dict"], "doc_len": 118}
{"doc_id": "src/marshmallow/schema.py::BaseSchema.__filter_fields", "file_path": "src/marshmallow/schema.py", "class_name": "BaseSchema", "func_name": "__filter_fields", "text": "文件路径: src/marshmallow/schema.py, 类名: BaseSchema\n    def __filter_fields(self, field_names, obj, many=False):\n        \"\"\"Return only those field_name:field_obj pairs specified by\n        ``field_names``.\n\n        :param set field_names: Field names to include in the final\n            return dictionary.\n        :param object|Mapping|list obj The object to base filtered fields on.\n        :returns: An dict of field_name:field_obj pairs.\n        \"\"\"\n        if obj and many:\n            try:  # list\n                obj = obj[0]\n            except IndexError:  # Nothing to serialize\n                return dict((k, v) for k, v in self.declared_fields.items() if k in field_names)\n        ret = self.dict_class()\n        for key in field_names:\n            if key in self.declared_fields:\n                ret[key] = self.declared_fields[key]\n            else:  # Implicit field creation (class Meta 'fields' or 'additional')\n                if obj:\n                    attribute_type = None\n                    try:\n                        if isinstance(obj, Mapping):\n                            attribute_type = type(obj[key])\n                        else:\n                            attribute_type = type(getattr(obj, key))\n                    except (AttributeError, KeyError) as err:\n                        err_type = type(err)\n                        raise err_type(\n                            '\"{0}\" is not a valid field for {1}.'.format(key, obj))\n                    field_obj = self.TYPE_MAPPING.get(attribute_type, fields.Field)()\n                else:  # Object is None\n                    field_obj = fields.Field()\n                # map key -> field (default to Raw)\n                ret[key] = field_obj\n        return ret\n", "tokens": ["src", "marshmallow", "schema", "py", "baseschema", "def", "__filter_fields", "self", "field_names", "obj", "many", "false", "return", "only", "those", "field_name", "field_obj", "pairs", "specified", "by", "field_names", "param", "set", "field_names", "field", "names", "to", "include", "in", "the", "final", "return", "dictionary", "param", "object", "mapping", "list", "obj", "the", "object", "to", "base", "filtered", "fields", "on", "returns", "an", "dict", "of", "field_name", "field_obj", "pairs", "if", "obj", "and", "many", "try", "list", "obj", "obj", "0", "except", "indexerror", "nothing", "to", "serialize", "return", "dict", "k", "v", "for", "k", "v", "in", "self", "declared_fields", "items", "if", "k", "in", "field_names", "ret", "self", "dict_class", "for", "key", "in", "field_names", "if", "key", "in", "self", "declared_fields", "ret", "key", "self", "declared_fields", "key", "else", "implicit", "field", "creation", "class", "meta", "fields", "or", "additional", "if", "obj", "attribute_type", "none", "try", "if", "isinstance", "obj", "mapping", "attribute_type", "type", "obj", "key", "else", "attribute_type", "type", "getattr", "obj", "key", "except", "attributeerror", "keyerror", "as", "err", "err_type", "type", "err", "raise", "err_type", "0", "is", "not", "a", "valid", "field", "for", "1", "format", "key", "obj", "field_obj", "self", "type_mapping", "get", "attribute_type", "fields", "field", "else", "object", "is", "none", "field_obj", "fields", "field", "map", "key", "field", "default", "to", "raw", "ret", "key", "field_obj", "return", "ret"], "doc_len": 172}
{"doc_id": "src/marshmallow/schema.py::BaseSchema._invoke_dump_processors", "file_path": "src/marshmallow/schema.py", "class_name": "BaseSchema", "func_name": "_invoke_dump_processors", "text": "文件路径: src/marshmallow/schema.py, 类名: BaseSchema\n    def _invoke_dump_processors(self, tag_name, data, many, original_data=None):\n        # The pass_many post-dump processors may do things like add an envelope, so\n        # invoke those after invoking the non-pass_many processors which will expect\n        # to get a list of items.\n        data = self._invoke_processors(tag_name, pass_many=False,\n            data=data, many=many, original_data=original_data)\n        data = self._invoke_processors(tag_name, pass_many=True,\n            data=data, many=many, original_data=original_data)\n        return data\n", "tokens": ["src", "marshmallow", "schema", "py", "baseschema", "def", "_invoke_dump_processors", "self", "tag_name", "data", "many", "original_data", "none", "the", "pass_many", "post", "dump", "processors", "may", "do", "things", "like", "add", "an", "envelope", "so", "invoke", "those", "after", "invoking", "the", "non", "pass_many", "processors", "which", "will", "expect", "to", "get", "a", "list", "of", "items", "data", "self", "_invoke_processors", "tag_name", "pass_many", "false", "data", "data", "many", "many", "original_data", "original_data", "data", "self", "_invoke_processors", "tag_name", "pass_many", "true", "data", "data", "many", "many", "original_data", "original_data", "return", "data"], "doc_len": 69}
{"doc_id": "src/marshmallow/schema.py::BaseSchema._invoke_load_processors", "file_path": "src/marshmallow/schema.py", "class_name": "BaseSchema", "func_name": "_invoke_load_processors", "text": "文件路径: src/marshmallow/schema.py, 类名: BaseSchema\n    def _invoke_load_processors(self, tag_name, data, many, original_data=None):\n        # This has to invert the order of the dump processors, so run the pass_many\n        # processors first.\n        data = self._invoke_processors(tag_name, pass_many=True,\n            data=data, many=many, original_data=original_data)\n        data = self._invoke_processors(tag_name, pass_many=False,\n            data=data, many=many, original_data=original_data)\n        return data\n", "tokens": ["src", "marshmallow", "schema", "py", "baseschema", "def", "_invoke_load_processors", "self", "tag_name", "data", "many", "original_data", "none", "this", "has", "to", "invert", "the", "order", "of", "the", "dump", "processors", "so", "run", "the", "pass_many", "processors", "first", "data", "self", "_invoke_processors", "tag_name", "pass_many", "true", "data", "data", "many", "many", "original_data", "original_data", "data", "self", "_invoke_processors", "tag_name", "pass_many", "false", "data", "data", "many", "many", "original_data", "original_data", "return", "data"], "doc_len": 55}
{"doc_id": "src/marshmallow/schema.py::BaseSchema._invoke_field_validators", "file_path": "src/marshmallow/schema.py", "class_name": "BaseSchema", "func_name": "_invoke_field_validators", "text": "文件路径: src/marshmallow/schema.py, 类名: BaseSchema\n    def _invoke_field_validators(self, unmarshal, data, many):\n        for attr_name in self.__processors__[(VALIDATES, False)]:\n            validator = getattr(self, attr_name)\n            validator_kwargs = validator.__marshmallow_kwargs__[(VALIDATES, False)]\n            field_name = validator_kwargs['field_name']\n\n            try:\n                field_obj = self.fields[field_name]\n            except KeyError:\n                if field_name in self.declared_fields:\n                    continue\n                raise ValueError('\"{0}\" field does not exist.'.format(field_name))\n\n            if many:\n                for idx, item in enumerate(data):\n                    try:\n                        value = item[field_obj.attribute or field_name]\n                    except KeyError:\n                        pass\n                    else:\n                        validated_value = unmarshal.call_and_store(\n                            getter_func=validator,\n                            data=value,\n                            field_name=field_obj.load_from or field_name,\n                            field_obj=field_obj,\n                            index=(idx if self.opts.index_errors else None)\n                        )\n                        if validated_value is missing:\n                            data[idx].pop(field_name, None)\n            else:\n                try:\n                    value = data[field_obj.attribute or field_name]\n                except KeyError:\n                    pass\n                else:\n                    validated_value = unmarshal.call_and_store(\n                        getter_func=validator,\n                        data=value,\n                        field_name=field_obj.load_from or field_name,\n                        field_obj=field_obj\n                    )\n                    if validated_value is missing:\n                        data.pop(field_name, None)\n", "tokens": ["src", "marshmallow", "schema", "py", "baseschema", "def", "_invoke_field_validators", "self", "unmarshal", "data", "many", "for", "attr_name", "in", "self", "__processors__", "validates", "false", "validator", "getattr", "self", "attr_name", "validator_kwargs", "validator", "__marshmallow_kwargs__", "validates", "false", "field_name", "validator_kwargs", "field_name", "try", "field_obj", "self", "fields", "field_name", "except", "keyerror", "if", "field_name", "in", "self", "declared_fields", "continue", "raise", "valueerror", "0", "field", "does", "not", "exist", "format", "field_name", "if", "many", "for", "idx", "item", "in", "enumerate", "data", "try", "value", "item", "field_obj", "attribute", "or", "field_name", "except", "keyerror", "pass", "else", "validated_value", "unmarshal", "call_and_store", "getter_func", "validator", "data", "value", "field_name", "field_obj", "load_from", "or", "field_name", "field_obj", "field_obj", "index", "idx", "if", "self", "opts", "index_errors", "else", "none", "if", "validated_value", "is", "missing", "data", "idx", "pop", "field_name", "none", "else", "try", "value", "data", "field_obj", "attribute", "or", "field_name", "except", "keyerror", "pass", "else", "validated_value", "unmarshal", "call_and_store", "getter_func", "validator", "data", "value", "field_name", "field_obj", "load_from", "or", "field_name", "field_obj", "field_obj", "if", "validated_value", "is", "missing", "data", "pop", "field_name", "none"], "doc_len": 136}
{"doc_id": "src/marshmallow/schema.py::BaseSchema._invoke_validators", "file_path": "src/marshmallow/schema.py", "class_name": "BaseSchema", "func_name": "_invoke_validators", "text": "文件路径: src/marshmallow/schema.py, 类名: BaseSchema\n    def _invoke_validators(\n            self, unmarshal, pass_many, data, original_data, many, field_errors=False):\n        errors = {}\n        for attr_name in self.__processors__[(VALIDATES_SCHEMA, pass_many)]:\n            validator = getattr(self, attr_name)\n            validator_kwargs = validator.__marshmallow_kwargs__[(VALIDATES_SCHEMA, pass_many)]\n            pass_original = validator_kwargs.get('pass_original', False)\n\n            skip_on_field_errors = validator_kwargs['skip_on_field_errors']\n            if skip_on_field_errors and field_errors:\n                continue\n\n            if pass_many:\n                validator = functools.partial(validator, many=many)\n            if many and not pass_many:\n                for idx, item in enumerate(data):\n                    try:\n                        unmarshal.run_validator(validator,\n                                                item, original_data, self.fields, many=many,\n                                                index=idx, pass_original=pass_original)\n                    except ValidationError as err:\n                        errors.update(err.messages)\n            else:\n                try:\n                    unmarshal.run_validator(validator,\n                                            data, original_data, self.fields, many=many,\n                                            pass_original=pass_original)\n                except ValidationError as err:\n                    errors.update(err.messages)\n        if errors:\n            raise ValidationError(errors)\n        return None\n", "tokens": ["src", "marshmallow", "schema", "py", "baseschema", "def", "_invoke_validators", "self", "unmarshal", "pass_many", "data", "original_data", "many", "field_errors", "false", "errors", "for", "attr_name", "in", "self", "__processors__", "validates_schema", "pass_many", "validator", "getattr", "self", "attr_name", "validator_kwargs", "validator", "__marshmallow_kwargs__", "validates_schema", "pass_many", "pass_original", "validator_kwargs", "get", "pass_original", "false", "skip_on_field_errors", "validator_kwargs", "skip_on_field_errors", "if", "skip_on_field_errors", "and", "field_errors", "continue", "if", "pass_many", "validator", "functools", "partial", "validator", "many", "many", "if", "many", "and", "not", "pass_many", "for", "idx", "item", "in", "enumerate", "data", "try", "unmarshal", "run_validator", "validator", "item", "original_data", "self", "fields", "many", "many", "index", "idx", "pass_original", "pass_original", "except", "validationerror", "as", "err", "errors", "update", "err", "messages", "else", "try", "unmarshal", "run_validator", "validator", "data", "original_data", "self", "fields", "many", "many", "pass_original", "pass_original", "except", "validationerror", "as", "err", "errors", "update", "err", "messages", "if", "errors", "raise", "validationerror", "errors", "return", "none"], "doc_len": 114}
{"doc_id": "src/marshmallow/schema.py::BaseSchema._invoke_processors", "file_path": "src/marshmallow/schema.py", "class_name": "BaseSchema", "func_name": "_invoke_processors", "text": "文件路径: src/marshmallow/schema.py, 类名: BaseSchema\n    def _invoke_processors(self, tag_name, pass_many, data, many, original_data=None):\n        for attr_name in self.__processors__[(tag_name, pass_many)]:\n            # This will be a bound method.\n            processor = getattr(self, attr_name)\n\n            processor_kwargs = processor.__marshmallow_kwargs__[(tag_name, pass_many)]\n            pass_original = processor_kwargs.get('pass_original', False)\n\n            if pass_many:\n                if pass_original:\n                    data = utils.if_none(processor(data, many, original_data), data)\n                else:\n                    data = utils.if_none(processor(data, many), data)\n            elif many:\n                if pass_original:\n                    data = [utils.if_none(processor(item, original_data), item)\n                            for item in data]\n                else:\n                    data = [utils.if_none(processor(item), item) for item in data]\n            else:\n                if pass_original:\n                    data = utils.if_none(processor(data, original_data), data)\n                else:\n                    data = utils.if_none(processor(data), data)\n        return data\n", "tokens": ["src", "marshmallow", "schema", "py", "baseschema", "def", "_invoke_processors", "self", "tag_name", "pass_many", "data", "many", "original_data", "none", "for", "attr_name", "in", "self", "__processors__", "tag_name", "pass_many", "this", "will", "be", "a", "bound", "method", "processor", "getattr", "self", "attr_name", "processor_kwargs", "processor", "__marshmallow_kwargs__", "tag_name", "pass_many", "pass_original", "processor_kwargs", "get", "pass_original", "false", "if", "pass_many", "if", "pass_original", "data", "utils", "if_none", "processor", "data", "many", "original_data", "data", "else", "data", "utils", "if_none", "processor", "data", "many", "data", "elif", "many", "if", "pass_original", "data", "utils", "if_none", "processor", "item", "original_data", "item", "for", "item", "in", "data", "else", "data", "utils", "if_none", "processor", "item", "item", "for", "item", "in", "data", "else", "if", "pass_original", "data", "utils", "if_none", "processor", "data", "original_data", "data", "else", "data", "utils", "if_none", "processor", "data", "data", "return", "data"], "doc_len": 106}
{"doc_id": "src/marshmallow/utils.py::_Missing.__bool__", "file_path": "src/marshmallow/utils.py", "class_name": "_Missing", "func_name": "__bool__", "text": "文件路径: src/marshmallow/utils.py, 类名: _Missing\n    def __bool__(self):\n        return False\n", "tokens": ["src", "marshmallow", "utils", "py", "_missing", "def", "__bool__", "self", "return", "false"], "doc_len": 10}
{"doc_id": "src/marshmallow/utils.py::_Missing.__copy__", "file_path": "src/marshmallow/utils.py", "class_name": "_Missing", "func_name": "__copy__", "text": "文件路径: src/marshmallow/utils.py, 类名: _Missing\n    def __copy__(self):\n        return self\n", "tokens": ["src", "marshmallow", "utils", "py", "_missing", "def", "__copy__", "self", "return", "self"], "doc_len": 10}
{"doc_id": "src/marshmallow/utils.py::_Missing.__deepcopy__", "file_path": "src/marshmallow/utils.py", "class_name": "_Missing", "func_name": "__deepcopy__", "text": "文件路径: src/marshmallow/utils.py, 类名: _Missing\n    def __deepcopy__(self, _):\n        return self\n", "tokens": ["src", "marshmallow", "utils", "py", "_missing", "def", "__deepcopy__", "self", "_", "return", "self"], "doc_len": 11}
{"doc_id": "src/marshmallow/utils.py::_Missing.__repr__", "file_path": "src/marshmallow/utils.py", "class_name": "_Missing", "func_name": "__repr__", "text": "文件路径: src/marshmallow/utils.py, 类名: _Missing\n    def __repr__(self):\n        return '<marshmallow.missing>'\n", "tokens": ["src", "marshmallow", "utils", "py", "_missing", "def", "__repr__", "self", "return", "marshmallow", "missing"], "doc_len": 11}
{"doc_id": "src/marshmallow/utils.py::is_generator", "file_path": "src/marshmallow/utils.py", "class_name": null, "func_name": "is_generator", "text": "文件路径: src/marshmallow/utils.py\ndef is_generator(obj):\n    \"\"\"Return True if ``obj`` is a generator\n    \"\"\"\n    return inspect.isgeneratorfunction(obj) or inspect.isgenerator(obj)\n", "tokens": ["src", "marshmallow", "utils", "py", "def", "is_generator", "obj", "return", "true", "if", "obj", "is", "a", "generator", "return", "inspect", "isgeneratorfunction", "obj", "or", "inspect", "isgenerator", "obj"], "doc_len": 22}
{"doc_id": "src/marshmallow/utils.py::is_iterable_but_not_string", "file_path": "src/marshmallow/utils.py", "class_name": null, "func_name": "is_iterable_but_not_string", "text": "文件路径: src/marshmallow/utils.py\ndef is_iterable_but_not_string(obj):\n    \"\"\"Return True if ``obj`` is an iterable object that isn't a string.\"\"\"\n    return (\n        (isinstance(obj, Iterable) and not hasattr(obj, \"strip\")) or is_generator(obj)\n    )\n", "tokens": ["src", "marshmallow", "utils", "py", "def", "is_iterable_but_not_string", "obj", "return", "true", "if", "obj", "is", "an", "iterable", "object", "that", "isn", "t", "a", "string", "return", "isinstance", "obj", "iterable", "and", "not", "hasattr", "obj", "strip", "or", "is_generator", "obj"], "doc_len": 32}
{"doc_id": "src/marshmallow/utils.py::is_indexable_but_not_string", "file_path": "src/marshmallow/utils.py", "class_name": null, "func_name": "is_indexable_but_not_string", "text": "文件路径: src/marshmallow/utils.py\ndef is_indexable_but_not_string(obj):\n    \"\"\"Return True if ``obj`` is indexable but isn't a string.\"\"\"\n    return not hasattr(obj, \"strip\") and hasattr(obj, \"__getitem__\")\n", "tokens": ["src", "marshmallow", "utils", "py", "def", "is_indexable_but_not_string", "obj", "return", "true", "if", "obj", "is", "indexable", "but", "isn", "t", "a", "string", "return", "not", "hasattr", "obj", "strip", "and", "hasattr", "obj", "__getitem__"], "doc_len": 27}
{"doc_id": "src/marshmallow/utils.py::is_collection", "file_path": "src/marshmallow/utils.py", "class_name": null, "func_name": "is_collection", "text": "文件路径: src/marshmallow/utils.py\ndef is_collection(obj):\n    \"\"\"Return True if ``obj`` is a collection type, e.g list, tuple, queryset.\"\"\"\n    return is_iterable_but_not_string(obj) and not isinstance(obj, Mapping)\n", "tokens": ["src", "marshmallow", "utils", "py", "def", "is_collection", "obj", "return", "true", "if", "obj", "is", "a", "collection", "type", "e", "g", "list", "tuple", "queryset", "return", "is_iterable_but_not_string", "obj", "and", "not", "isinstance", "obj", "mapping"], "doc_len": 28}
{"doc_id": "src/marshmallow/utils.py::is_instance_or_subclass", "file_path": "src/marshmallow/utils.py", "class_name": null, "func_name": "is_instance_or_subclass", "text": "文件路径: src/marshmallow/utils.py\ndef is_instance_or_subclass(val, class_):\n    \"\"\"Return True if ``val`` is either a subclass or instance of ``class_``.\"\"\"\n    try:\n        return issubclass(val, class_)\n    except TypeError:\n        return isinstance(val, class_)\n", "tokens": ["src", "marshmallow", "utils", "py", "def", "is_instance_or_subclass", "val", "class_", "return", "true", "if", "val", "is", "either", "a", "subclass", "or", "instance", "of", "class_", "try", "return", "issubclass", "val", "class_", "except", "typeerror", "return", "isinstance", "val", "class_"], "doc_len": 31}
{"doc_id": "src/marshmallow/utils.py::is_keyed_tuple", "file_path": "src/marshmallow/utils.py", "class_name": null, "func_name": "is_keyed_tuple", "text": "文件路径: src/marshmallow/utils.py\ndef is_keyed_tuple(obj):\n    \"\"\"Return True if ``obj`` has keyed tuple behavior, such as\n    namedtuples or SQLAlchemy's KeyedTuples.\n    \"\"\"\n    return isinstance(obj, tuple) and hasattr(obj, '_fields')\n", "tokens": ["src", "marshmallow", "utils", "py", "def", "is_keyed_tuple", "obj", "return", "true", "if", "obj", "has", "keyed", "tuple", "behavior", "such", "as", "namedtuples", "or", "sqlalchemy", "s", "keyedtuples", "return", "isinstance", "obj", "tuple", "and", "hasattr", "obj", "_fields"], "doc_len": 30}
{"doc_id": "src/marshmallow/utils.py::float_to_decimal", "file_path": "src/marshmallow/utils.py", "class_name": null, "func_name": "float_to_decimal", "text": "文件路径: src/marshmallow/utils.py\ndef float_to_decimal(f):\n    \"\"\"Convert a floating point number to a Decimal with no loss of information.\n        See: http://docs.python.org/release/2.6.7/library/decimal.html#decimal-faq\n    \"\"\"\n    n, d = f.as_integer_ratio()\n    numerator, denominator = Decimal(n), Decimal(d)\n    ctx = Context(prec=60)\n    result = ctx.divide(numerator, denominator)\n    while ctx.flags[Inexact]:\n        ctx.flags[Inexact] = False\n        ctx.prec *= 2\n        result = ctx.divide(numerator, denominator)\n    return result\n", "tokens": ["src", "marshmallow", "utils", "py", "def", "float_to_decimal", "f", "convert", "a", "floating", "point", "number", "to", "a", "decimal", "with", "no", "loss", "of", "information", "see", "http", "docs", "python", "org", "release", "2", "6", "7", "library", "decimal", "html", "decimal", "faq", "n", "d", "f", "as_integer_ratio", "numerator", "denominator", "decimal", "n", "decimal", "d", "ctx", "context", "prec", "60", "result", "ctx", "divide", "numerator", "denominator", "while", "ctx", "flags", "inexact", "ctx", "flags", "inexact", "false", "ctx", "prec", "2", "result", "ctx", "divide", "numerator", "denominator", "return", "result"], "doc_len": 71}
{"doc_id": "src/marshmallow/utils.py::decimal_to_fixed", "file_path": "src/marshmallow/utils.py", "class_name": null, "func_name": "decimal_to_fixed", "text": "文件路径: src/marshmallow/utils.py\ndef decimal_to_fixed(value, precision):\n    \"\"\"Convert a `Decimal` to a fixed-precision number as a string.\"\"\"\n    return text_type(value.quantize(precision, rounding=ROUND_HALF_EVEN))\n", "tokens": ["src", "marshmallow", "utils", "py", "def", "decimal_to_fixed", "value", "precision", "convert", "a", "decimal", "to", "a", "fixed", "precision", "number", "as", "a", "string", "return", "text_type", "value", "quantize", "precision", "rounding", "round_half_even"], "doc_len": 26}
{"doc_id": "src/marshmallow/utils.py::to_marshallable_type", "file_path": "src/marshmallow/utils.py", "class_name": null, "func_name": "to_marshallable_type", "text": "文件路径: src/marshmallow/utils.py\ndef to_marshallable_type(obj, field_names=None):\n    \"\"\"Helper for converting an object to a dictionary only if it is not\n    dictionary already or an indexable object nor a simple type\"\"\"\n    if obj is None:\n        return None  # make it idempotent for None\n\n    if hasattr(obj, '__marshallable__'):\n        return obj.__marshallable__()\n\n    if hasattr(obj, '__getitem__') and not is_keyed_tuple(obj):\n        return obj  # it is indexable it is ok\n\n    if isinstance(obj, types.GeneratorType):\n        return list(obj)\n    if field_names:\n        # exclude field names that aren't actual attributes of the object\n        attrs = set(dir(obj)) & set(field_names)\n    else:\n        attrs = set(dir(obj))\n    return dict([(attr, getattr(obj, attr, None)) for attr in attrs\n                  if not attr.startswith(\"__\") and not attr.endswith(\"__\")])\n", "tokens": ["src", "marshmallow", "utils", "py", "def", "to_marshallable_type", "obj", "field_names", "none", "helper", "for", "converting", "an", "object", "to", "a", "dictionary", "only", "if", "it", "is", "not", "dictionary", "already", "or", "an", "indexable", "object", "nor", "a", "simple", "type", "if", "obj", "is", "none", "return", "none", "make", "it", "idempotent", "for", "none", "if", "hasattr", "obj", "__marshallable__", "return", "obj", "__marshallable__", "if", "hasattr", "obj", "__getitem__", "and", "not", "is_keyed_tuple", "obj", "return", "obj", "it", "is", "indexable", "it", "is", "ok", "if", "isinstance", "obj", "types", "generatortype", "return", "list", "obj", "if", "field_names", "exclude", "field", "names", "that", "aren", "t", "actual", "attributes", "of", "the", "object", "attrs", "set", "dir", "obj", "set", "field_names", "else", "attrs", "set", "dir", "obj", "return", "dict", "attr", "getattr", "obj", "attr", "none", "for", "attr", "in", "attrs", "if", "not", "attr", "startswith", "__", "and", "not", "attr", "endswith", "__"], "doc_len": 119}
{"doc_id": "src/marshmallow/utils.py::pprint", "file_path": "src/marshmallow/utils.py", "class_name": null, "func_name": "pprint", "text": "文件路径: src/marshmallow/utils.py\ndef pprint(obj, *args, **kwargs):\n    \"\"\"Pretty-printing function that can pretty-print OrderedDicts\n    like regular dictionaries. Useful for printing the output of\n    :meth:`marshmallow.Schema.dump`.\n    \"\"\"\n    if isinstance(obj, OrderedDict):\n        print(json.dumps(obj, *args, **kwargs))\n    else:\n        py_pprint(obj, *args, **kwargs)\n", "tokens": ["src", "marshmallow", "utils", "py", "def", "pprint", "obj", "args", "kwargs", "pretty", "printing", "function", "that", "can", "pretty", "print", "ordereddicts", "like", "regular", "dictionaries", "useful", "for", "printing", "the", "output", "of", "meth", "marshmallow", "schema", "dump", "if", "isinstance", "obj", "ordereddict", "print", "json", "dumps", "obj", "args", "kwargs", "else", "py_pprint", "obj", "args", "kwargs"], "doc_len": 45}
{"doc_id": "src/marshmallow/utils.py::UTC.fromutc", "file_path": "src/marshmallow/utils.py", "class_name": "UTC", "func_name": "fromutc", "text": "文件路径: src/marshmallow/utils.py, 类名: UTC\n    def fromutc(self, dt):\n        if dt.tzinfo is None:\n            return self.localize(dt)\n        return super(utc.__class__, self).fromutc(dt)\n", "tokens": ["src", "marshmallow", "utils", "py", "utc", "def", "fromutc", "self", "dt", "if", "dt", "tzinfo", "is", "none", "return", "self", "localize", "dt", "return", "super", "utc", "__class__", "self", "fromutc", "dt"], "doc_len": 25}
{"doc_id": "src/marshmallow/utils.py::UTC.utcoffset", "file_path": "src/marshmallow/utils.py", "class_name": "UTC", "func_name": "utcoffset", "text": "文件路径: src/marshmallow/utils.py, 类名: UTC\n    def utcoffset(self, dt):\n        return ZERO\n", "tokens": ["src", "marshmallow", "utils", "py", "utc", "def", "utcoffset", "self", "dt", "return", "zero"], "doc_len": 11}
{"doc_id": "src/marshmallow/utils.py::UTC.tzname", "file_path": "src/marshmallow/utils.py", "class_name": "UTC", "func_name": "tzname", "text": "文件路径: src/marshmallow/utils.py, 类名: UTC\n    def tzname(self, dt):\n        return \"UTC\"\n", "tokens": ["src", "marshmallow", "utils", "py", "utc", "def", "tzname", "self", "dt", "return", "utc"], "doc_len": 11}
{"doc_id": "src/marshmallow/utils.py::UTC.dst", "file_path": "src/marshmallow/utils.py", "class_name": "UTC", "func_name": "dst", "text": "文件路径: src/marshmallow/utils.py, 类名: UTC\n    def dst(self, dt):\n        return ZERO\n", "tokens": ["src", "marshmallow", "utils", "py", "utc", "def", "dst", "self", "dt", "return", "zero"], "doc_len": 11}
{"doc_id": "src/marshmallow/utils.py::UTC.localize", "file_path": "src/marshmallow/utils.py", "class_name": "UTC", "func_name": "localize", "text": "文件路径: src/marshmallow/utils.py, 类名: UTC\n    def localize(self, dt, is_dst=False):\n        '''Convert naive time to local time'''\n        if dt.tzinfo is not None:\n            raise ValueError('Not naive datetime (tzinfo is already set)')\n        return dt.replace(tzinfo=self)\n", "tokens": ["src", "marshmallow", "utils", "py", "utc", "def", "localize", "self", "dt", "is_dst", "false", "convert", "naive", "time", "to", "local", "time", "if", "dt", "tzinfo", "is", "not", "none", "raise", "valueerror", "not", "naive", "datetime", "tzinfo", "is", "already", "set", "return", "dt", "replace", "tzinfo", "self"], "doc_len": 37}
{"doc_id": "src/marshmallow/utils.py::UTC.normalize", "file_path": "src/marshmallow/utils.py", "class_name": "UTC", "func_name": "normalize", "text": "文件路径: src/marshmallow/utils.py, 类名: UTC\n    def normalize(self, dt, is_dst=False):\n        '''Correct the timezone information on the given datetime'''\n        if dt.tzinfo is self:\n            return dt\n        if dt.tzinfo is None:\n            raise ValueError('Naive time - no tzinfo set')\n        return dt.astimezone(self)\n", "tokens": ["src", "marshmallow", "utils", "py", "utc", "def", "normalize", "self", "dt", "is_dst", "false", "correct", "the", "timezone", "information", "on", "the", "given", "datetime", "if", "dt", "tzinfo", "is", "self", "return", "dt", "if", "dt", "tzinfo", "is", "none", "raise", "valueerror", "naive", "time", "no", "tzinfo", "set", "return", "dt", "astimezone", "self"], "doc_len": 42}
{"doc_id": "src/marshmallow/utils.py::UTC.__repr__", "file_path": "src/marshmallow/utils.py", "class_name": "UTC", "func_name": "__repr__", "text": "文件路径: src/marshmallow/utils.py, 类名: UTC\n    def __repr__(self):\n        return \"<UTC>\"\n", "tokens": ["src", "marshmallow", "utils", "py", "utc", "def", "__repr__", "self", "return", "utc"], "doc_len": 10}
{"doc_id": "src/marshmallow/utils.py::UTC.__str__", "file_path": "src/marshmallow/utils.py", "class_name": "UTC", "func_name": "__str__", "text": "文件路径: src/marshmallow/utils.py, 类名: UTC\n    def __str__(self):\n        return \"UTC\"\n", "tokens": ["src", "marshmallow", "utils", "py", "utc", "def", "__str__", "self", "return", "utc"], "doc_len": 10}
{"doc_id": "src/marshmallow/utils.py::local_rfcformat", "file_path": "src/marshmallow/utils.py", "class_name": null, "func_name": "local_rfcformat", "text": "文件路径: src/marshmallow/utils.py\ndef local_rfcformat(dt):\n    \"\"\"Return the RFC822-formatted representation of a timezone-aware datetime\n    with the UTC offset.\n    \"\"\"\n    weekday = [\"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"][dt.weekday()]\n    month = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\",\n             \"Oct\", \"Nov\", \"Dec\"][dt.month - 1]\n    tz_offset = dt.strftime(\"%z\")\n    return \"%s, %02d %s %04d %02d:%02d:%02d %s\" % (weekday, dt.day, month,\n        dt.year, dt.hour, dt.minute, dt.second, tz_offset)\n", "tokens": ["src", "marshmallow", "utils", "py", "def", "local_rfcformat", "dt", "return", "the", "rfc822", "formatted", "representation", "of", "a", "timezone", "aware", "datetime", "with", "the", "utc", "offset", "weekday", "mon", "tue", "wed", "thu", "fri", "sat", "sun", "dt", "weekday", "month", "jan", "feb", "mar", "apr", "may", "jun", "jul", "aug", "sep", "oct", "nov", "dec", "dt", "month", "1", "tz_offset", "dt", "strftime", "z", "return", "s", "02d", "s", "04d", "02d", "02d", "02d", "s", "weekday", "dt", "day", "month", "dt", "year", "dt", "hour", "dt", "minute", "dt", "second", "tz_offset"], "doc_len": 73}
{"doc_id": "src/marshmallow/utils.py::rfcformat", "file_path": "src/marshmallow/utils.py", "class_name": null, "func_name": "rfcformat", "text": "文件路径: src/marshmallow/utils.py\ndef rfcformat(dt, localtime=False):\n    \"\"\"Return the RFC822-formatted representation of a datetime object.\n\n    :param datetime dt: The datetime.\n    :param bool localtime: If ``True``, return the date relative to the local\n        timezone instead of UTC, displaying the proper offset,\n        e.g. \"Sun, 10 Nov 2013 08:23:45 -0600\"\n    \"\"\"\n    if not localtime:\n        return formatdate(timegm(dt.utctimetuple()))\n    else:\n        return local_rfcformat(dt)\n", "tokens": ["src", "marshmallow", "utils", "py", "def", "rfcformat", "dt", "localtime", "false", "return", "the", "rfc822", "formatted", "representation", "of", "a", "datetime", "object", "param", "datetime", "dt", "the", "datetime", "param", "bool", "localtime", "if", "true", "return", "the", "date", "relative", "to", "the", "local", "timezone", "instead", "of", "utc", "displaying", "the", "proper", "offset", "e", "g", "sun", "10", "nov", "2013", "08", "23", "45", "0600", "if", "not", "localtime", "return", "formatdate", "timegm", "dt", "utctimetuple", "else", "return", "local_rfcformat", "dt"], "doc_len": 65}
{"doc_id": "src/marshmallow/utils.py::isoformat", "file_path": "src/marshmallow/utils.py", "class_name": null, "func_name": "isoformat", "text": "文件路径: src/marshmallow/utils.py\ndef isoformat(dt, localtime=False, *args, **kwargs):\n    \"\"\"Return the ISO8601-formatted UTC representation of a datetime object.\n    \"\"\"\n    if localtime and dt.tzinfo is not None:\n        localized = dt\n    else:\n        if dt.tzinfo is None:\n            localized = UTC.localize(dt)\n        else:\n            localized = dt.astimezone(UTC)\n    return localized.isoformat(*args, **kwargs)\n", "tokens": ["src", "marshmallow", "utils", "py", "def", "isoformat", "dt", "localtime", "false", "args", "kwargs", "return", "the", "iso8601", "formatted", "utc", "representation", "of", "a", "datetime", "object", "if", "localtime", "and", "dt", "tzinfo", "is", "not", "none", "localized", "dt", "else", "if", "dt", "tzinfo", "is", "none", "localized", "utc", "localize", "dt", "else", "localized", "dt", "astimezone", "utc", "return", "localized", "isoformat", "args", "kwargs"], "doc_len": 51}
{"doc_id": "src/marshmallow/utils.py::from_datestring", "file_path": "src/marshmallow/utils.py", "class_name": null, "func_name": "from_datestring", "text": "文件路径: src/marshmallow/utils.py\ndef from_datestring(datestring):\n    \"\"\"Parse an arbitrary datestring and return a datetime object using\n    dateutils' parser.\n    \"\"\"\n    if dateutil_available:\n        return parser.parse(datestring)\n    else:\n        raise RuntimeError('from_datestring requires the python-dateutil library')\n", "tokens": ["src", "marshmallow", "utils", "py", "def", "from_datestring", "datestring", "parse", "an", "arbitrary", "datestring", "and", "return", "a", "datetime", "object", "using", "dateutils", "parser", "if", "dateutil_available", "return", "parser", "parse", "datestring", "else", "raise", "runtimeerror", "from_datestring", "requires", "the", "python", "dateutil", "library"], "doc_len": 34}
{"doc_id": "src/marshmallow/utils.py::from_rfc", "file_path": "src/marshmallow/utils.py", "class_name": null, "func_name": "from_rfc", "text": "文件路径: src/marshmallow/utils.py\ndef from_rfc(datestring, use_dateutil=True):\n    \"\"\"Parse a RFC822-formatted datetime string and return a datetime object.\n\n    Use dateutil's parser if possible.\n\n    https://stackoverflow.com/questions/885015/how-to-parse-a-rfc-2822-date-time-into-a-python-datetime\n    \"\"\"\n    # Use dateutil's parser if possible\n    if dateutil_available and use_dateutil:\n        return parser.parse(datestring)\n    else:\n        parsed = parsedate(datestring)  # as a tuple\n        timestamp = time.mktime(parsed)\n        return datetime.datetime.fromtimestamp(timestamp)\n", "tokens": ["src", "marshmallow", "utils", "py", "def", "from_rfc", "datestring", "use_dateutil", "true", "parse", "a", "rfc822", "formatted", "datetime", "string", "and", "return", "a", "datetime", "object", "use", "dateutil", "s", "parser", "if", "possible", "https", "stackoverflow", "com", "questions", "885015", "how", "to", "parse", "a", "rfc", "2822", "date", "time", "into", "a", "python", "datetime", "use", "dateutil", "s", "parser", "if", "possible", "if", "dateutil_available", "and", "use_dateutil", "return", "parser", "parse", "datestring", "else", "parsed", "parsedate", "datestring", "as", "a", "tuple", "timestamp", "time", "mktime", "parsed", "return", "datetime", "datetime", "fromtimestamp", "timestamp"], "doc_len": 73}
{"doc_id": "src/marshmallow/utils.py::from_iso", "file_path": "src/marshmallow/utils.py", "class_name": null, "func_name": "from_iso", "text": "文件路径: src/marshmallow/utils.py\ndef from_iso(datestring, use_dateutil=True):\n    \"\"\"Parse an ISO8601-formatted datetime string and return a datetime object.\n\n    Use dateutil's parser if possible and return a timezone-aware datetime.\n    \"\"\"\n    if not _iso8601_re.match(datestring):\n        raise ValueError('Not a valid ISO8601-formatted string')\n    # Use dateutil's parser if possible\n    if dateutil_available and use_dateutil:\n        return parser.parse(datestring)\n    else:\n        # Strip off timezone info.\n        if '.' in datestring:\n            # datestring contains microseconds\n            (dt_nomstz, mstz) = datestring.split('.')\n            ms_notz = mstz[:len(mstz) - len(mstz.lstrip('0123456789'))]\n            datestring = '.'.join((dt_nomstz, ms_notz))\n            return datetime.datetime.strptime(datestring[:26], '%Y-%m-%dT%H:%M:%S.%f')\n        return datetime.datetime.strptime(datestring[:19], '%Y-%m-%dT%H:%M:%S')\n", "tokens": ["src", "marshmallow", "utils", "py", "def", "from_iso", "datestring", "use_dateutil", "true", "parse", "an", "iso8601", "formatted", "datetime", "string", "and", "return", "a", "datetime", "object", "use", "dateutil", "s", "parser", "if", "possible", "and", "return", "a", "timezone", "aware", "datetime", "if", "not", "_iso8601_re", "match", "datestring", "raise", "valueerror", "not", "a", "valid", "iso8601", "formatted", "string", "use", "dateutil", "s", "parser", "if", "possible", "if", "dateutil_available", "and", "use_dateutil", "return", "parser", "parse", "datestring", "else", "strip", "off", "timezone", "info", "if", "in", "datestring", "datestring", "contains", "microseconds", "dt_nomstz", "mstz", "datestring", "split", "ms_notz", "mstz", "len", "mstz", "len", "mstz", "lstrip", "0123456789", "datestring", "join", "dt_nomstz", "ms_notz", "return", "datetime", "datetime", "strptime", "datestring", "26", "y", "m", "dt", "h", "m", "s", "f", "return", "datetime", "datetime", "strptime", "datestring", "19", "y", "m", "dt", "h", "m", "s"], "doc_len": 111}
{"doc_id": "src/marshmallow/utils.py::from_iso_time", "file_path": "src/marshmallow/utils.py", "class_name": null, "func_name": "from_iso_time", "text": "文件路径: src/marshmallow/utils.py\ndef from_iso_time(timestring, use_dateutil=True):\n    \"\"\"Parse an ISO8601-formatted datetime string and return a datetime.time\n    object.\n    \"\"\"\n    if dateutil_available and use_dateutil:\n        return parser.parse(timestring).time()\n    else:\n        if len(timestring) > 8:  # has microseconds\n            fmt = '%H:%M:%S.%f'\n        else:\n            fmt = '%H:%M:%S'\n        return datetime.datetime.strptime(timestring, fmt).time()\n", "tokens": ["src", "marshmallow", "utils", "py", "def", "from_iso_time", "timestring", "use_dateutil", "true", "parse", "an", "iso8601", "formatted", "datetime", "string", "and", "return", "a", "datetime", "time", "object", "if", "dateutil_available", "and", "use_dateutil", "return", "parser", "parse", "timestring", "time", "else", "if", "len", "timestring", "8", "has", "microseconds", "fmt", "h", "m", "s", "f", "else", "fmt", "h", "m", "s", "return", "datetime", "datetime", "strptime", "timestring", "fmt", "time"], "doc_len": 54}
{"doc_id": "src/marshmallow/utils.py::from_iso_date", "file_path": "src/marshmallow/utils.py", "class_name": null, "func_name": "from_iso_date", "text": "文件路径: src/marshmallow/utils.py\ndef from_iso_date(datestring, use_dateutil=True):\n    if dateutil_available and use_dateutil:\n        return parser.parse(datestring).date()\n    else:\n        return datetime.datetime.strptime(datestring[:10], '%Y-%m-%d').date()\n", "tokens": ["src", "marshmallow", "utils", "py", "def", "from_iso_date", "datestring", "use_dateutil", "true", "if", "dateutil_available", "and", "use_dateutil", "return", "parser", "parse", "datestring", "date", "else", "return", "datetime", "datetime", "strptime", "datestring", "10", "y", "m", "d", "date"], "doc_len": 29}
{"doc_id": "src/marshmallow/utils.py::ensure_text_type", "file_path": "src/marshmallow/utils.py", "class_name": null, "func_name": "ensure_text_type", "text": "文件路径: src/marshmallow/utils.py\ndef ensure_text_type(val):\n    if isinstance(val, binary_type):\n        val = val.decode('utf-8')\n    return text_type(val)\n", "tokens": ["src", "marshmallow", "utils", "py", "def", "ensure_text_type", "val", "if", "isinstance", "val", "binary_type", "val", "val", "decode", "utf", "8", "return", "text_type", "val"], "doc_len": 19}
{"doc_id": "src/marshmallow/utils.py::pluck", "file_path": "src/marshmallow/utils.py", "class_name": null, "func_name": "pluck", "text": "文件路径: src/marshmallow/utils.py\ndef pluck(dictlist, key):\n    \"\"\"Extracts a list of dictionary values from a list of dictionaries.\n    ::\n\n        >>> dlist = [{'id': 1, 'name': 'foo'}, {'id': 2, 'name': 'bar'}]\n        >>> pluck(dlist, 'id')\n        [1, 2]\n    \"\"\"\n    return [d[key] for d in dictlist]\n", "tokens": ["src", "marshmallow", "utils", "py", "def", "pluck", "dictlist", "key", "extracts", "a", "list", "of", "dictionary", "values", "from", "a", "list", "of", "dictionaries", "dlist", "id", "1", "name", "foo", "id", "2", "name", "bar", "pluck", "dlist", "id", "1", "2", "return", "d", "key", "for", "d", "in", "dictlist"], "doc_len": 40}
{"doc_id": "src/marshmallow/utils.py::get_value", "file_path": "src/marshmallow/utils.py", "class_name": null, "func_name": "get_value", "text": "文件路径: src/marshmallow/utils.py\ndef get_value(key, obj, default=missing):\n    \"\"\"Helper for pulling a keyed value off various types of objects\"\"\"\n    if isinstance(key, int):\n        return _get_value_for_key(key, obj, default)\n    else:\n        return _get_value_for_keys(key.split('.'), obj, default)\n", "tokens": ["src", "marshmallow", "utils", "py", "def", "get_value", "key", "obj", "default", "missing", "helper", "for", "pulling", "a", "keyed", "value", "off", "various", "types", "of", "objects", "if", "isinstance", "key", "int", "return", "_get_value_for_key", "key", "obj", "default", "else", "return", "_get_value_for_keys", "key", "split", "obj", "default"], "doc_len": 37}
{"doc_id": "src/marshmallow/utils.py::_get_value_for_keys", "file_path": "src/marshmallow/utils.py", "class_name": null, "func_name": "_get_value_for_keys", "text": "文件路径: src/marshmallow/utils.py\ndef _get_value_for_keys(keys, obj, default):\n    if len(keys) == 1:\n        return _get_value_for_key(keys[0], obj, default)\n    else:\n        return _get_value_for_keys(\n            keys[1:], _get_value_for_key(keys[0], obj, default), default)\n", "tokens": ["src", "marshmallow", "utils", "py", "def", "_get_value_for_keys", "keys", "obj", "default", "if", "len", "keys", "1", "return", "_get_value_for_key", "keys", "0", "obj", "default", "else", "return", "_get_value_for_keys", "keys", "1", "_get_value_for_key", "keys", "0", "obj", "default", "default"], "doc_len": 30}
{"doc_id": "src/marshmallow/utils.py::_get_value_for_key", "file_path": "src/marshmallow/utils.py", "class_name": null, "func_name": "_get_value_for_key", "text": "文件路径: src/marshmallow/utils.py\ndef _get_value_for_key(key, obj, default):\n    try:\n        return obj[key]\n    except (KeyError, AttributeError, IndexError, TypeError):\n        try:\n            attr = getattr(obj, key)\n            return attr() if callable(attr) else attr\n        except AttributeError:\n            return default\n    return default\n", "tokens": ["src", "marshmallow", "utils", "py", "def", "_get_value_for_key", "key", "obj", "default", "try", "return", "obj", "key", "except", "keyerror", "attributeerror", "indexerror", "typeerror", "try", "attr", "getattr", "obj", "key", "return", "attr", "if", "callable", "attr", "else", "attr", "except", "attributeerror", "return", "default", "return", "default"], "doc_len": 36}
{"doc_id": "src/marshmallow/utils.py::set_value", "file_path": "src/marshmallow/utils.py", "class_name": null, "func_name": "set_value", "text": "文件路径: src/marshmallow/utils.py\ndef set_value(dct, key, value):\n    \"\"\"Set a value in a dict. If `key` contains a '.', it is assumed\n    be a path (i.e. dot-delimited string) to the value's location.\n\n    ::\n\n        >>> d = {}\n        >>> set_value(d, 'foo.bar', 42)\n        >>> d\n        {'foo': {'bar': 42}}\n    \"\"\"\n    if '.' in key:\n        head, rest = key.split('.', 1)\n        target = dct.setdefault(head, {})\n        if not isinstance(target, dict):\n            raise ValueError(\n                'Cannot set {key} in {head} '\n                'due to existing value: {target}'.format(key=key, head=head, target=target)\n            )\n        set_value(target, rest, value)\n    else:\n        dct[key] = value\n", "tokens": ["src", "marshmallow", "utils", "py", "def", "set_value", "dct", "key", "value", "set", "a", "value", "in", "a", "dict", "if", "key", "contains", "a", "it", "is", "assumed", "be", "a", "path", "i", "e", "dot", "delimited", "string", "to", "the", "value", "s", "location", "d", "set_value", "d", "foo", "bar", "42", "d", "foo", "bar", "42", "if", "in", "key", "head", "rest", "key", "split", "1", "target", "dct", "setdefault", "head", "if", "not", "isinstance", "target", "dict", "raise", "valueerror", "cannot", "set", "key", "in", "head", "due", "to", "existing", "value", "target", "format", "key", "key", "head", "head", "target", "target", "set_value", "target", "rest", "value", "else", "dct", "key", "value"], "doc_len": 89}
{"doc_id": "src/marshmallow/utils.py::callable_or_raise", "file_path": "src/marshmallow/utils.py", "class_name": null, "func_name": "callable_or_raise", "text": "文件路径: src/marshmallow/utils.py\ndef callable_or_raise(obj):\n    \"\"\"Check that an object is callable, else raise a :exc:`ValueError`.\n    \"\"\"\n    if not callable(obj):\n        raise ValueError('Object {0!r} is not callable.'.format(obj))\n    return obj\n", "tokens": ["src", "marshmallow", "utils", "py", "def", "callable_or_raise", "obj", "check", "that", "an", "object", "is", "callable", "else", "raise", "a", "exc", "valueerror", "if", "not", "callable", "obj", "raise", "valueerror", "object", "0", "r", "is", "not", "callable", "format", "obj", "return", "obj"], "doc_len": 34}
{"doc_id": "src/marshmallow/utils.py::if_none", "file_path": "src/marshmallow/utils.py", "class_name": null, "func_name": "if_none", "text": "文件路径: src/marshmallow/utils.py\ndef if_none(value, default):\n    return value if value is not None else default\n", "tokens": ["src", "marshmallow", "utils", "py", "def", "if_none", "value", "default", "return", "value", "if", "value", "is", "not", "none", "else", "default"], "doc_len": 17}
{"doc_id": "src/marshmallow/validate.py::Validator.__repr__", "file_path": "src/marshmallow/validate.py", "class_name": "Validator", "func_name": "__repr__", "text": "文件路径: src/marshmallow/validate.py, 类名: Validator\n    def __repr__(self):\n        args = self._repr_args()\n        args = '{0}, '.format(args) if args else ''\n\n        return (\n            '<{self.__class__.__name__}({args}error={self.error!r})>'\n            .format(self=self, args=args)\n        )\n", "tokens": ["src", "marshmallow", "validate", "py", "validator", "def", "__repr__", "self", "args", "self", "_repr_args", "args", "0", "format", "args", "if", "args", "else", "return", "self", "__class__", "__name__", "args", "error", "self", "error", "r", "format", "self", "self", "args", "args"], "doc_len": 32}
{"doc_id": "src/marshmallow/validate.py::Validator._repr_args", "file_path": "src/marshmallow/validate.py", "class_name": "Validator", "func_name": "_repr_args", "text": "文件路径: src/marshmallow/validate.py, 类名: Validator\n    def _repr_args(self):\n        \"\"\"A string representation of the args passed to this validator. Used by\n        `__repr__`.\n        \"\"\"\n        return ''\n", "tokens": ["src", "marshmallow", "validate", "py", "validator", "def", "_repr_args", "self", "a", "string", "representation", "of", "the", "args", "passed", "to", "this", "validator", "used", "by", "__repr__", "return"], "doc_len": 22}
{"doc_id": "src/marshmallow/validate.py::URL.__init__", "file_path": "src/marshmallow/validate.py", "class_name": "URL", "func_name": "__init__", "text": "文件路径: src/marshmallow/validate.py, 类名: URL\n    def __init__(self, relative=False, error=None, schemes=None, require_tld=True):\n        self.relative = relative\n        self.error = error or self.default_message\n        self.schemes = schemes or self.default_schemes\n        self.require_tld = require_tld\n", "tokens": ["src", "marshmallow", "validate", "py", "url", "def", "__init__", "self", "relative", "false", "error", "none", "schemes", "none", "require_tld", "true", "self", "relative", "relative", "self", "error", "error", "or", "self", "default_message", "self", "schemes", "schemes", "or", "self", "default_schemes", "self", "require_tld", "require_tld"], "doc_len": 34}
{"doc_id": "src/marshmallow/validate.py::URL._repr_args", "file_path": "src/marshmallow/validate.py", "class_name": "URL", "func_name": "_repr_args", "text": "文件路径: src/marshmallow/validate.py, 类名: URL\n    def _repr_args(self):\n        return 'relative={0!r}'.format(self.relative)\n", "tokens": ["src", "marshmallow", "validate", "py", "url", "def", "_repr_args", "self", "return", "relative", "0", "r", "format", "self", "relative"], "doc_len": 15}
{"doc_id": "src/marshmallow/validate.py::URL._format_error", "file_path": "src/marshmallow/validate.py", "class_name": "URL", "func_name": "_format_error", "text": "文件路径: src/marshmallow/validate.py, 类名: URL\n    def _format_error(self, value):\n        return self.error.format(input=value)\n", "tokens": ["src", "marshmallow", "validate", "py", "url", "def", "_format_error", "self", "value", "return", "self", "error", "format", "input", "value"], "doc_len": 15}
{"doc_id": "src/marshmallow/validate.py::URL.__call__", "file_path": "src/marshmallow/validate.py", "class_name": "URL", "func_name": "__call__", "text": "文件路径: src/marshmallow/validate.py, 类名: URL\n    def __call__(self, value):\n        message = self._format_error(value)\n        if not value:\n            raise ValidationError(message)\n\n        # Check first if the scheme is valid\n        if '://' in value:\n            scheme = value.split('://')[0].lower()\n            if scheme not in self.schemes:\n                raise ValidationError(message)\n\n        regex = self._regex(self.relative, self.require_tld)\n\n        if not regex.search(value):\n            raise ValidationError(message)\n\n        return value\n", "tokens": ["src", "marshmallow", "validate", "py", "url", "def", "__call__", "self", "value", "message", "self", "_format_error", "value", "if", "not", "value", "raise", "validationerror", "message", "check", "first", "if", "the", "scheme", "is", "valid", "if", "in", "value", "scheme", "value", "split", "0", "lower", "if", "scheme", "not", "in", "self", "schemes", "raise", "validationerror", "message", "regex", "self", "_regex", "self", "relative", "self", "require_tld", "if", "not", "regex", "search", "value", "raise", "validationerror", "message", "return", "value"], "doc_len": 60}
{"doc_id": "src/marshmallow/validate.py::Email.__init__", "file_path": "src/marshmallow/validate.py", "class_name": "Email", "func_name": "__init__", "text": "文件路径: src/marshmallow/validate.py, 类名: Email\n    def __init__(self, error=None):\n        self.error = error or self.default_message\n", "tokens": ["src", "marshmallow", "validate", "py", "email", "def", "__init__", "self", "error", "none", "self", "error", "error", "or", "self", "default_message"], "doc_len": 16}
{"doc_id": "src/marshmallow/validate.py::Email._format_error", "file_path": "src/marshmallow/validate.py", "class_name": "Email", "func_name": "_format_error", "text": "文件路径: src/marshmallow/validate.py, 类名: Email\n    def _format_error(self, value):\n        return self.error.format(input=value)\n", "tokens": ["src", "marshmallow", "validate", "py", "email", "def", "_format_error", "self", "value", "return", "self", "error", "format", "input", "value"], "doc_len": 15}
{"doc_id": "src/marshmallow/validate.py::Email.__call__", "file_path": "src/marshmallow/validate.py", "class_name": "Email", "func_name": "__call__", "text": "文件路径: src/marshmallow/validate.py, 类名: Email\n    def __call__(self, value):\n        message = self._format_error(value)\n\n        if not value or '@' not in value:\n            raise ValidationError(message)\n\n        user_part, domain_part = value.rsplit('@', 1)\n\n        if not self.USER_REGEX.match(user_part):\n            raise ValidationError(message)\n\n        if domain_part not in self.DOMAIN_WHITELIST:\n            if not self.DOMAIN_REGEX.match(domain_part):\n                try:\n                    domain_part = domain_part.encode('idna').decode('ascii')\n                except UnicodeError:\n                    pass\n                else:\n                    if self.DOMAIN_REGEX.match(domain_part):\n                        return value\n                raise ValidationError(message)\n\n        return value\n", "tokens": ["src", "marshmallow", "validate", "py", "email", "def", "__call__", "self", "value", "message", "self", "_format_error", "value", "if", "not", "value", "or", "not", "in", "value", "raise", "validationerror", "message", "user_part", "domain_part", "value", "rsplit", "1", "if", "not", "self", "user_regex", "match", "user_part", "raise", "validationerror", "message", "if", "domain_part", "not", "in", "self", "domain_whitelist", "if", "not", "self", "domain_regex", "match", "domain_part", "try", "domain_part", "domain_part", "encode", "idna", "decode", "ascii", "except", "unicodeerror", "pass", "else", "if", "self", "domain_regex", "match", "domain_part", "return", "value", "raise", "validationerror", "message", "return", "value"], "doc_len": 72}
{"doc_id": "src/marshmallow/validate.py::Range.__init__", "file_path": "src/marshmallow/validate.py", "class_name": "Range", "func_name": "__init__", "text": "文件路径: src/marshmallow/validate.py, 类名: Range\n    def __init__(self, min=None, max=None, error=None):\n        self.min = min\n        self.max = max\n        self.error = error\n", "tokens": ["src", "marshmallow", "validate", "py", "range", "def", "__init__", "self", "min", "none", "max", "none", "error", "none", "self", "min", "min", "self", "max", "max", "self", "error", "error"], "doc_len": 23}
{"doc_id": "src/marshmallow/validate.py::Range._repr_args", "file_path": "src/marshmallow/validate.py", "class_name": "Range", "func_name": "_repr_args", "text": "文件路径: src/marshmallow/validate.py, 类名: Range\n    def _repr_args(self):\n        return 'min={0!r}, max={1!r}'.format(self.min, self.max)\n", "tokens": ["src", "marshmallow", "validate", "py", "range", "def", "_repr_args", "self", "return", "min", "0", "r", "max", "1", "r", "format", "self", "min", "self", "max"], "doc_len": 20}
{"doc_id": "src/marshmallow/validate.py::Range._format_error", "file_path": "src/marshmallow/validate.py", "class_name": "Range", "func_name": "_format_error", "text": "文件路径: src/marshmallow/validate.py, 类名: Range\n    def _format_error(self, value, message):\n        return (self.error or message).format(input=value, min=self.min, max=self.max)\n", "tokens": ["src", "marshmallow", "validate", "py", "range", "def", "_format_error", "self", "value", "message", "return", "self", "error", "or", "message", "format", "input", "value", "min", "self", "min", "max", "self", "max"], "doc_len": 24}
{"doc_id": "src/marshmallow/validate.py::Range.__call__", "file_path": "src/marshmallow/validate.py", "class_name": "Range", "func_name": "__call__", "text": "文件路径: src/marshmallow/validate.py, 类名: Range\n    def __call__(self, value):\n        if self.min is not None and value < self.min:\n            message = self.message_min if self.max is None else self.message_all\n            raise ValidationError(self._format_error(value, message))\n\n        if self.max is not None and value > self.max:\n            message = self.message_max if self.min is None else self.message_all\n            raise ValidationError(self._format_error(value, message))\n\n        return value\n", "tokens": ["src", "marshmallow", "validate", "py", "range", "def", "__call__", "self", "value", "if", "self", "min", "is", "not", "none", "and", "value", "self", "min", "message", "self", "message_min", "if", "self", "max", "is", "none", "else", "self", "message_all", "raise", "validationerror", "self", "_format_error", "value", "message", "if", "self", "max", "is", "not", "none", "and", "value", "self", "max", "message", "self", "message_max", "if", "self", "min", "is", "none", "else", "self", "message_all", "raise", "validationerror", "self", "_format_error", "value", "message", "return", "value"], "doc_len": 65}
{"doc_id": "src/marshmallow/validate.py::Length.__init__", "file_path": "src/marshmallow/validate.py", "class_name": "Length", "func_name": "__init__", "text": "文件路径: src/marshmallow/validate.py, 类名: Length\n    def __init__(self, min=None, max=None, error=None, equal=None):\n        if equal is not None and any([min, max]):\n            raise ValueError(\n                'The `equal` parameter was provided, maximum or '\n                'minimum parameter must not be provided.'\n            )\n\n        super(Length, self).__init__(min, max, error)\n        self.equal = equal\n", "tokens": ["src", "marshmallow", "validate", "py", "length", "def", "__init__", "self", "min", "none", "max", "none", "error", "none", "equal", "none", "if", "equal", "is", "not", "none", "and", "any", "min", "max", "raise", "valueerror", "the", "equal", "parameter", "was", "provided", "maximum", "or", "minimum", "parameter", "must", "not", "be", "provided", "super", "length", "self", "__init__", "min", "max", "error", "self", "equal", "equal"], "doc_len": 50}
{"doc_id": "src/marshmallow/validate.py::Length._repr_args", "file_path": "src/marshmallow/validate.py", "class_name": "Length", "func_name": "_repr_args", "text": "文件路径: src/marshmallow/validate.py, 类名: Length\n    def _repr_args(self):\n        return 'min={0!r}, max={1!r}, equal={2!r}'.format(self.min, self.max, self.equal)\n", "tokens": ["src", "marshmallow", "validate", "py", "length", "def", "_repr_args", "self", "return", "min", "0", "r", "max", "1", "r", "equal", "2", "r", "format", "self", "min", "self", "max", "self", "equal"], "doc_len": 25}
{"doc_id": "src/marshmallow/validate.py::Length._format_error", "file_path": "src/marshmallow/validate.py", "class_name": "Length", "func_name": "_format_error", "text": "文件路径: src/marshmallow/validate.py, 类名: Length\n    def _format_error(self, value, message):\n        return (self.error or message).format(input=value, min=self.min, max=self.max,\n                                              equal=self.equal)\n", "tokens": ["src", "marshmallow", "validate", "py", "length", "def", "_format_error", "self", "value", "message", "return", "self", "error", "or", "message", "format", "input", "value", "min", "self", "min", "max", "self", "max", "equal", "self", "equal"], "doc_len": 27}
{"doc_id": "src/marshmallow/validate.py::Length.__call__", "file_path": "src/marshmallow/validate.py", "class_name": "Length", "func_name": "__call__", "text": "文件路径: src/marshmallow/validate.py, 类名: Length\n    def __call__(self, value):\n        length = len(value)\n\n        if self.equal is not None:\n            if length != self.equal:\n                raise ValidationError(self._format_error(value, self.message_equal))\n            return value\n\n        if self.min is not None and length < self.min:\n            message = self.message_min if self.max is None else self.message_all\n            raise ValidationError(self._format_error(value, message))\n\n        if self.max is not None and length > self.max:\n            message = self.message_max if self.min is None else self.message_all\n            raise ValidationError(self._format_error(value, message))\n\n        return value\n", "tokens": ["src", "marshmallow", "validate", "py", "length", "def", "__call__", "self", "value", "length", "len", "value", "if", "self", "equal", "is", "not", "none", "if", "length", "self", "equal", "raise", "validationerror", "self", "_format_error", "value", "self", "message_equal", "return", "value", "if", "self", "min", "is", "not", "none", "and", "length", "self", "min", "message", "self", "message_min", "if", "self", "max", "is", "none", "else", "self", "message_all", "raise", "validationerror", "self", "_format_error", "value", "message", "if", "self", "max", "is", "not", "none", "and", "length", "self", "max", "message", "self", "message_max", "if", "self", "min", "is", "none", "else", "self", "message_all", "raise", "validationerror", "self", "_format_error", "value", "message", "return", "value"], "doc_len": 87}
{"doc_id": "src/marshmallow/validate.py::Equal.__init__", "file_path": "src/marshmallow/validate.py", "class_name": "Equal", "func_name": "__init__", "text": "文件路径: src/marshmallow/validate.py, 类名: Equal\n    def __init__(self, comparable, error=None):\n        self.comparable = comparable\n        self.error = error or self.default_message\n", "tokens": ["src", "marshmallow", "validate", "py", "equal", "def", "__init__", "self", "comparable", "error", "none", "self", "comparable", "comparable", "self", "error", "error", "or", "self", "default_message"], "doc_len": 20}
{"doc_id": "src/marshmallow/validate.py::Equal._repr_args", "file_path": "src/marshmallow/validate.py", "class_name": "Equal", "func_name": "_repr_args", "text": "文件路径: src/marshmallow/validate.py, 类名: Equal\n    def _repr_args(self):\n        return 'comparable={0!r}'.format(self.comparable)\n", "tokens": ["src", "marshmallow", "validate", "py", "equal", "def", "_repr_args", "self", "return", "comparable", "0", "r", "format", "self", "comparable"], "doc_len": 15}
{"doc_id": "src/marshmallow/validate.py::Equal._format_error", "file_path": "src/marshmallow/validate.py", "class_name": "Equal", "func_name": "_format_error", "text": "文件路径: src/marshmallow/validate.py, 类名: Equal\n    def _format_error(self, value):\n        return self.error.format(input=value, other=self.comparable)\n", "tokens": ["src", "marshmallow", "validate", "py", "equal", "def", "_format_error", "self", "value", "return", "self", "error", "format", "input", "value", "other", "self", "comparable"], "doc_len": 18}
{"doc_id": "src/marshmallow/validate.py::Equal.__call__", "file_path": "src/marshmallow/validate.py", "class_name": "Equal", "func_name": "__call__", "text": "文件路径: src/marshmallow/validate.py, 类名: Equal\n    def __call__(self, value):\n        if value != self.comparable:\n            raise ValidationError(self._format_error(value))\n        return value\n", "tokens": ["src", "marshmallow", "validate", "py", "equal", "def", "__call__", "self", "value", "if", "value", "self", "comparable", "raise", "validationerror", "self", "_format_error", "value", "return", "value"], "doc_len": 20}
{"doc_id": "src/marshmallow/validate.py::Regexp.__init__", "file_path": "src/marshmallow/validate.py", "class_name": "Regexp", "func_name": "__init__", "text": "文件路径: src/marshmallow/validate.py, 类名: Regexp\n    def __init__(self, regex, flags=0, error=None):\n        self.regex = re.compile(regex, flags) if isinstance(regex, basestring) else regex\n        self.error = error or self.default_message\n", "tokens": ["src", "marshmallow", "validate", "py", "regexp", "def", "__init__", "self", "regex", "flags", "0", "error", "none", "self", "regex", "re", "compile", "regex", "flags", "if", "isinstance", "regex", "basestring", "else", "regex", "self", "error", "error", "or", "self", "default_message"], "doc_len": 31}
{"doc_id": "src/marshmallow/validate.py::Regexp._repr_args", "file_path": "src/marshmallow/validate.py", "class_name": "Regexp", "func_name": "_repr_args", "text": "文件路径: src/marshmallow/validate.py, 类名: Regexp\n    def _repr_args(self):\n        return 'regex={0!r}'.format(self.regex)\n", "tokens": ["src", "marshmallow", "validate", "py", "regexp", "def", "_repr_args", "self", "return", "regex", "0", "r", "format", "self", "regex"], "doc_len": 15}
{"doc_id": "src/marshmallow/validate.py::Regexp._format_error", "file_path": "src/marshmallow/validate.py", "class_name": "Regexp", "func_name": "_format_error", "text": "文件路径: src/marshmallow/validate.py, 类名: Regexp\n    def _format_error(self, value):\n        return self.error.format(input=value, regex=self.regex.pattern)\n", "tokens": ["src", "marshmallow", "validate", "py", "regexp", "def", "_format_error", "self", "value", "return", "self", "error", "format", "input", "value", "regex", "self", "regex", "pattern"], "doc_len": 19}
{"doc_id": "src/marshmallow/validate.py::Regexp.__call__", "file_path": "src/marshmallow/validate.py", "class_name": "Regexp", "func_name": "__call__", "text": "文件路径: src/marshmallow/validate.py, 类名: Regexp\n    def __call__(self, value):\n        if self.regex.match(value) is None:\n            raise ValidationError(self._format_error(value))\n\n        return value\n", "tokens": ["src", "marshmallow", "validate", "py", "regexp", "def", "__call__", "self", "value", "if", "self", "regex", "match", "value", "is", "none", "raise", "validationerror", "self", "_format_error", "value", "return", "value"], "doc_len": 23}
{"doc_id": "src/marshmallow/validate.py::Predicate.__init__", "file_path": "src/marshmallow/validate.py", "class_name": "Predicate", "func_name": "__init__", "text": "文件路径: src/marshmallow/validate.py, 类名: Predicate\n    def __init__(self, method, error=None, **kwargs):\n        self.method = method\n        self.error = error or self.default_message\n        self.kwargs = kwargs\n", "tokens": ["src", "marshmallow", "validate", "py", "predicate", "def", "__init__", "self", "method", "error", "none", "kwargs", "self", "method", "method", "self", "error", "error", "or", "self", "default_message", "self", "kwargs", "kwargs"], "doc_len": 24}
{"doc_id": "src/marshmallow/validate.py::Predicate._repr_args", "file_path": "src/marshmallow/validate.py", "class_name": "Predicate", "func_name": "_repr_args", "text": "文件路径: src/marshmallow/validate.py, 类名: Predicate\n    def _repr_args(self):\n        return 'method={0!r}, kwargs={1!r}'.format(self.method, self.kwargs)\n", "tokens": ["src", "marshmallow", "validate", "py", "predicate", "def", "_repr_args", "self", "return", "method", "0", "r", "kwargs", "1", "r", "format", "self", "method", "self", "kwargs"], "doc_len": 20}
{"doc_id": "src/marshmallow/validate.py::Predicate._format_error", "file_path": "src/marshmallow/validate.py", "class_name": "Predicate", "func_name": "_format_error", "text": "文件路径: src/marshmallow/validate.py, 类名: Predicate\n    def _format_error(self, value):\n        return self.error.format(input=value, method=self.method)\n", "tokens": ["src", "marshmallow", "validate", "py", "predicate", "def", "_format_error", "self", "value", "return", "self", "error", "format", "input", "value", "method", "self", "method"], "doc_len": 18}
{"doc_id": "src/marshmallow/validate.py::Predicate.__call__", "file_path": "src/marshmallow/validate.py", "class_name": "Predicate", "func_name": "__call__", "text": "文件路径: src/marshmallow/validate.py, 类名: Predicate\n    def __call__(self, value):\n        method = getattr(value, self.method)\n\n        if not method(**self.kwargs):\n            raise ValidationError(self._format_error(value))\n\n        return value\n", "tokens": ["src", "marshmallow", "validate", "py", "predicate", "def", "__call__", "self", "value", "method", "getattr", "value", "self", "method", "if", "not", "method", "self", "kwargs", "raise", "validationerror", "self", "_format_error", "value", "return", "value"], "doc_len": 26}
{"doc_id": "src/marshmallow/validate.py::NoneOf.__init__", "file_path": "src/marshmallow/validate.py", "class_name": "NoneOf", "func_name": "__init__", "text": "文件路径: src/marshmallow/validate.py, 类名: NoneOf\n    def __init__(self, iterable, error=None):\n        self.iterable = iterable\n        self.values_text = ', '.join(text_type(each) for each in self.iterable)\n        self.error = error or self.default_message\n", "tokens": ["src", "marshmallow", "validate", "py", "noneof", "def", "__init__", "self", "iterable", "error", "none", "self", "iterable", "iterable", "self", "values_text", "join", "text_type", "each", "for", "each", "in", "self", "iterable", "self", "error", "error", "or", "self", "default_message"], "doc_len": 30}
{"doc_id": "src/marshmallow/validate.py::NoneOf._repr_args", "file_path": "src/marshmallow/validate.py", "class_name": "NoneOf", "func_name": "_repr_args", "text": "文件路径: src/marshmallow/validate.py, 类名: NoneOf\n    def _repr_args(self):\n        return 'iterable={0!r}'.format(self.iterable)\n", "tokens": ["src", "marshmallow", "validate", "py", "noneof", "def", "_repr_args", "self", "return", "iterable", "0", "r", "format", "self", "iterable"], "doc_len": 15}
{"doc_id": "src/marshmallow/validate.py::NoneOf._format_error", "file_path": "src/marshmallow/validate.py", "class_name": "NoneOf", "func_name": "_format_error", "text": "文件路径: src/marshmallow/validate.py, 类名: NoneOf\n    def _format_error(self, value):\n        return self.error.format(\n            input=value,\n            values=self.values_text,\n        )\n", "tokens": ["src", "marshmallow", "validate", "py", "noneof", "def", "_format_error", "self", "value", "return", "self", "error", "format", "input", "value", "values", "self", "values_text"], "doc_len": 18}
{"doc_id": "src/marshmallow/validate.py::NoneOf.__call__", "file_path": "src/marshmallow/validate.py", "class_name": "NoneOf", "func_name": "__call__", "text": "文件路径: src/marshmallow/validate.py, 类名: NoneOf\n    def __call__(self, value):\n        try:\n            if value in self.iterable:\n                raise ValidationError(self._format_error(value))\n        except TypeError:\n            pass\n\n        return value\n", "tokens": ["src", "marshmallow", "validate", "py", "noneof", "def", "__call__", "self", "value", "try", "if", "value", "in", "self", "iterable", "raise", "validationerror", "self", "_format_error", "value", "except", "typeerror", "pass", "return", "value"], "doc_len": 25}
{"doc_id": "src/marshmallow/validate.py::OneOf.__init__", "file_path": "src/marshmallow/validate.py", "class_name": "OneOf", "func_name": "__init__", "text": "文件路径: src/marshmallow/validate.py, 类名: OneOf\n    def __init__(self, choices, labels=None, error=None):\n        self.choices = choices\n        self.choices_text = ', '.join(text_type(choice) for choice in self.choices)\n        self.labels = labels if labels is not None else []\n        self.labels_text = ', '.join(text_type(label) for label in self.labels)\n        self.error = error or self.default_message\n", "tokens": ["src", "marshmallow", "validate", "py", "oneof", "def", "__init__", "self", "choices", "labels", "none", "error", "none", "self", "choices", "choices", "self", "choices_text", "join", "text_type", "choice", "for", "choice", "in", "self", "choices", "self", "labels", "labels", "if", "labels", "is", "not", "none", "else", "self", "labels_text", "join", "text_type", "label", "for", "label", "in", "self", "labels", "self", "error", "error", "or", "self", "default_message"], "doc_len": 51}
{"doc_id": "src/marshmallow/validate.py::OneOf._repr_args", "file_path": "src/marshmallow/validate.py", "class_name": "OneOf", "func_name": "_repr_args", "text": "文件路径: src/marshmallow/validate.py, 类名: OneOf\n    def _repr_args(self):\n        return 'choices={0!r}, labels={1!r}'.format(self.choices, self.labels)\n", "tokens": ["src", "marshmallow", "validate", "py", "oneof", "def", "_repr_args", "self", "return", "choices", "0", "r", "labels", "1", "r", "format", "self", "choices", "self", "labels"], "doc_len": 20}
{"doc_id": "src/marshmallow/validate.py::OneOf._format_error", "file_path": "src/marshmallow/validate.py", "class_name": "OneOf", "func_name": "_format_error", "text": "文件路径: src/marshmallow/validate.py, 类名: OneOf\n    def _format_error(self, value):\n        return self.error.format(\n            input=value,\n            choices=self.choices_text,\n            labels=self.labels_text,\n        )\n", "tokens": ["src", "marshmallow", "validate", "py", "oneof", "def", "_format_error", "self", "value", "return", "self", "error", "format", "input", "value", "choices", "self", "choices_text", "labels", "self", "labels_text"], "doc_len": 21}
{"doc_id": "src/marshmallow/validate.py::OneOf.__call__", "file_path": "src/marshmallow/validate.py", "class_name": "OneOf", "func_name": "__call__", "text": "文件路径: src/marshmallow/validate.py, 类名: OneOf\n    def __call__(self, value):\n        try:\n            if value not in self.choices:\n                raise ValidationError(self._format_error(value))\n        except TypeError:\n            raise ValidationError(self._format_error(value))\n\n        return value\n", "tokens": ["src", "marshmallow", "validate", "py", "oneof", "def", "__call__", "self", "value", "try", "if", "value", "not", "in", "self", "choices", "raise", "validationerror", "self", "_format_error", "value", "except", "typeerror", "raise", "validationerror", "self", "_format_error", "value", "return", "value"], "doc_len": 30}
{"doc_id": "src/marshmallow/validate.py::OneOf.options", "file_path": "src/marshmallow/validate.py", "class_name": "OneOf", "func_name": "options", "text": "文件路径: src/marshmallow/validate.py, 类名: OneOf\n    def options(self, valuegetter=text_type):\n        \"\"\"Return a generator over the (value, label) pairs, where value\n        is a string associated with each choice. This convenience method\n        is useful to populate, for instance, a form select field.\n\n        :param valuegetter: Can be a callable or a string. In the former case, it must\n            be a one-argument callable which returns the value of a\n            choice. In the latter case, the string specifies the name\n            of an attribute of the choice objects. Defaults to `str()`\n            or `unicode()`.\n        \"\"\"\n        valuegetter = valuegetter if callable(valuegetter) else attrgetter(valuegetter)\n        pairs = zip_longest(self.choices, self.labels, fillvalue='')\n\n        return ((valuegetter(choice), label) for choice, label in pairs)\n", "tokens": ["src", "marshmallow", "validate", "py", "oneof", "def", "options", "self", "valuegetter", "text_type", "return", "a", "generator", "over", "the", "value", "label", "pairs", "where", "value", "is", "a", "string", "associated", "with", "each", "choice", "this", "convenience", "method", "is", "useful", "to", "populate", "for", "instance", "a", "form", "select", "field", "param", "valuegetter", "can", "be", "a", "callable", "or", "a", "string", "in", "the", "former", "case", "it", "must", "be", "a", "one", "argument", "callable", "which", "returns", "the", "value", "of", "a", "choice", "in", "the", "latter", "case", "the", "string", "specifies", "the", "name", "of", "an", "attribute", "of", "the", "choice", "objects", "defaults", "to", "str", "or", "unicode", "valuegetter", "valuegetter", "if", "callable", "valuegetter", "else", "attrgetter", "valuegetter", "pairs", "zip_longest", "self", "choices", "self", "labels", "fillvalue", "return", "valuegetter", "choice", "label", "for", "choice", "label", "in", "pairs"], "doc_len": 112}
{"doc_id": "src/marshmallow/validate.py::ContainsOnly._format_error", "file_path": "src/marshmallow/validate.py", "class_name": "ContainsOnly", "func_name": "_format_error", "text": "文件路径: src/marshmallow/validate.py, 类名: ContainsOnly\n    def _format_error(self, value):\n        value_text = ', '.join(text_type(val) for val in value)\n        return super(ContainsOnly, self)._format_error(value_text)\n", "tokens": ["src", "marshmallow", "validate", "py", "containsonly", "def", "_format_error", "self", "value", "value_text", "join", "text_type", "val", "for", "val", "in", "value", "return", "super", "containsonly", "self", "_format_error", "value_text"], "doc_len": 23}
{"doc_id": "src/marshmallow/validate.py::ContainsOnly.__call__", "file_path": "src/marshmallow/validate.py", "class_name": "ContainsOnly", "func_name": "__call__", "text": "文件路径: src/marshmallow/validate.py, 类名: ContainsOnly\n    def __call__(self, value):\n        choices = list(self.choices)\n\n        if not value and choices:\n            raise ValidationError(self._format_error(value))\n\n        # We check list.index instead of using set.issubset so that\n        # unhashable types are handled.\n        for val in value:\n            try:\n                index = choices.index(val)\n            except ValueError:\n                raise ValidationError(self._format_error(value))\n            else:\n                del choices[index]\n\n        return value\n", "tokens": ["src", "marshmallow", "validate", "py", "containsonly", "def", "__call__", "self", "value", "choices", "list", "self", "choices", "if", "not", "value", "and", "choices", "raise", "validationerror", "self", "_format_error", "value", "we", "check", "list", "index", "instead", "of", "using", "set", "issubset", "so", "that", "unhashable", "types", "are", "handled", "for", "val", "in", "value", "try", "index", "choices", "index", "val", "except", "valueerror", "raise", "validationerror", "self", "_format_error", "value", "else", "del", "choices", "index", "return", "value"], "doc_len": 60}
{"doc_id": "src/marshmallow/warnings.py::unused_and_removed_in_ma3", "file_path": "src/marshmallow/warnings.py", "class_name": null, "func_name": "unused_and_removed_in_ma3", "text": "文件路径: src/marshmallow/warnings.py\ndef unused_and_removed_in_ma3(f):\n    @functools.wraps(f)\n    def wrapped(*args, **kwargs):\n        warnings.warn(\n            '{} is unused and is removed in marshmallow 3.'.format(f.__name__),\n            RemovedInMarshmallow3Warning,\n            stacklevel=2,\n        )\n        return f(*args, **kwargs)\n\n    return wrapped\n", "tokens": ["src", "marshmallow", "warnings", "py", "def", "unused_and_removed_in_ma3", "f", "functools", "wraps", "f", "def", "wrapped", "args", "kwargs", "warnings", "warn", "is", "unused", "and", "is", "removed", "in", "marshmallow", "3", "format", "f", "__name__", "removedinmarshmallow3warning", "stacklevel", "2", "return", "f", "args", "kwargs", "return", "wrapped"], "doc_len": 36}
{"doc_id": "tests/base.py::assert_almost_equal", "file_path": "tests/base.py", "class_name": null, "func_name": "assert_almost_equal", "text": "文件路径: tests/base.py\ndef assert_almost_equal(a, b, precision=5):\n    assert round(a, precision) == round(b, precision)\n", "tokens": ["tests", "base", "py", "def", "assert_almost_equal", "a", "b", "precision", "5", "assert", "round", "a", "precision", "round", "b", "precision"], "doc_len": 16}
{"doc_id": "tests/base.py::assert_date_equal", "file_path": "tests/base.py", "class_name": null, "func_name": "assert_date_equal", "text": "文件路径: tests/base.py\ndef assert_date_equal(d1, d2):\n    assert d1.year == d2.year\n    assert d1.month == d2.month\n    assert d1.day == d2.day\n", "tokens": ["tests", "base", "py", "def", "assert_date_equal", "d1", "d2", "assert", "d1", "year", "d2", "year", "assert", "d1", "month", "d2", "month", "assert", "d1", "day", "d2", "day"], "doc_len": 22}
{"doc_id": "tests/base.py::assert_datetime_equal", "file_path": "tests/base.py", "class_name": null, "func_name": "assert_datetime_equal", "text": "文件路径: tests/base.py\ndef assert_datetime_equal(dt1, dt2):\n    assert_date_equal(dt1, dt2)\n    assert dt1.hour == dt2.hour\n    assert dt1.minute == dt2.minute\n    assert dt1.second == dt2.second\n    assert dt1.microsecond == dt2.microsecond\n", "tokens": ["tests", "base", "py", "def", "assert_datetime_equal", "dt1", "dt2", "assert_date_equal", "dt1", "dt2", "assert", "dt1", "hour", "dt2", "hour", "assert", "dt1", "minute", "dt2", "minute", "assert", "dt1", "second", "dt2", "second", "assert", "dt1", "microsecond", "dt2", "microsecond"], "doc_len": 30}
{"doc_id": "tests/base.py::assert_time_equal", "file_path": "tests/base.py", "class_name": null, "func_name": "assert_time_equal", "text": "文件路径: tests/base.py\ndef assert_time_equal(t1, t2):\n    assert t1.hour == t2.hour\n    assert t1.minute == t2.minute\n    assert t1.second == t2.second\n    assert t1.microsecond == t2.microsecond\n", "tokens": ["tests", "base", "py", "def", "assert_time_equal", "t1", "t2", "assert", "t1", "hour", "t2", "hour", "assert", "t1", "minute", "t2", "minute", "assert", "t1", "second", "t2", "second", "assert", "t1", "microsecond", "t2", "microsecond"], "doc_len": 27}
{"doc_id": "tests/base.py::User.__init__", "file_path": "tests/base.py", "class_name": "User", "func_name": "__init__", "text": "文件路径: tests/base.py, 类名: User\n    def __init__(self, name, age=0, id_=None, homepage=None, email=None,\n                 registered=True, time_registered=None, birthdate=None,\n                 balance=100, sex='male', employer=None, various_data=None):\n        self.name = name\n        self.age = age\n        # A naive datetime\n        self.created = dt.datetime(2013, 11, 10, 14, 20, 58)\n        # A TZ-aware datetime\n        self.updated = central.localize(\n            dt.datetime(2013, 11, 10, 14, 20, 58), is_dst=False\n        )\n        self.id = id_\n        self.homepage = homepage\n        self.email = email\n        self.balance = balance\n        self.registered = True\n        self.hair_colors = ['black', 'brown', 'blond', 'redhead']\n        self.sex_choices = ('male', 'female')\n        self.finger_count = 10\n        self.uid = uuid.uuid1()\n        self.time_registered = time_registered or dt.time(1, 23, 45, 6789)\n        self.birthdate = birthdate or dt.date(2013, 1, 23)\n        self.sex = sex\n        self.employer = employer\n        self.relatives = []\n        self.various_data = various_data or {'pets': ['cat', 'dog'],\n                                             'address': \"1600 Pennsylvania Ave\\n\"\n                                                        \"Washington, DC 20006\"}\n", "tokens": ["tests", "base", "py", "user", "def", "__init__", "self", "name", "age", "0", "id_", "none", "homepage", "none", "email", "none", "registered", "true", "time_registered", "none", "birthdate", "none", "balance", "100", "sex", "male", "employer", "none", "various_data", "none", "self", "name", "name", "self", "age", "age", "a", "naive", "datetime", "self", "created", "dt", "datetime", "2013", "11", "10", "14", "20", "58", "a", "tz", "aware", "datetime", "self", "updated", "central", "localize", "dt", "datetime", "2013", "11", "10", "14", "20", "58", "is_dst", "false", "self", "id", "id_", "self", "homepage", "homepage", "self", "email", "email", "self", "balance", "balance", "self", "registered", "true", "self", "hair_colors", "black", "brown", "blond", "redhead", "self", "sex_choices", "male", "female", "self", "finger_count", "10", "self", "uid", "uuid", "uuid1", "self", "time_registered", "time_registered", "or", "dt", "time", "1", "23", "45", "6789", "self", "birthdate", "birthdate", "or", "dt", "date", "2013", "1", "23", "self", "sex", "sex", "self", "employer", "employer", "self", "relatives", "self", "various_data", "various_data", "or", "pets", "cat", "dog", "address", "1600", "pennsylvania", "ave", "n", "washington", "dc", "20006"], "doc_len": 141}
{"doc_id": "tests/base.py::User.since_created", "file_path": "tests/base.py", "class_name": "User", "func_name": "since_created", "text": "文件路径: tests/base.py, 类名: User\n    def since_created(self):\n        return dt.datetime(2013, 11, 24) - self.created\n", "tokens": ["tests", "base", "py", "user", "def", "since_created", "self", "return", "dt", "datetime", "2013", "11", "24", "self", "created"], "doc_len": 15}
{"doc_id": "tests/base.py::User.call_me", "file_path": "tests/base.py", "class_name": "User", "func_name": "call_me", "text": "文件路径: tests/base.py, 类名: User\n    def call_me(self):\n        return \"This was called.\"\n", "tokens": ["tests", "base", "py", "user", "def", "call_me", "self", "return", "this", "was", "called"], "doc_len": 11}
{"doc_id": "tests/base.py::User.__repr__", "file_path": "tests/base.py", "class_name": "User", "func_name": "__repr__", "text": "文件路径: tests/base.py, 类名: User\n    def __repr__(self):\n        return \"<User {0}>\".format(self.name)\n", "tokens": ["tests", "base", "py", "user", "def", "__repr__", "self", "return", "user", "0", "format", "self", "name"], "doc_len": 13}
{"doc_id": "tests/base.py::Blog.__init__", "file_path": "tests/base.py", "class_name": "Blog", "func_name": "__init__", "text": "文件路径: tests/base.py, 类名: Blog\n    def __init__(self, title, user, collaborators=None, categories=None, id_=None):\n        self.title = title\n        self.user = user\n        self.collaborators = collaborators or []  # List/tuple of users\n        self.categories = categories\n        self.id = id_\n", "tokens": ["tests", "base", "py", "blog", "def", "__init__", "self", "title", "user", "collaborators", "none", "categories", "none", "id_", "none", "self", "title", "title", "self", "user", "user", "self", "collaborators", "collaborators", "or", "list", "tuple", "of", "users", "self", "categories", "categories", "self", "id", "id_"], "doc_len": 35}
{"doc_id": "tests/base.py::Blog.__contains__", "file_path": "tests/base.py", "class_name": "Blog", "func_name": "__contains__", "text": "文件路径: tests/base.py, 类名: Blog\n    def __contains__(self, item):\n        return item.name in [each.name for each in self.collaborators]\n", "tokens": ["tests", "base", "py", "blog", "def", "__contains__", "self", "item", "return", "item", "name", "in", "each", "name", "for", "each", "in", "self", "collaborators"], "doc_len": 19}
{"doc_id": "tests/base.py::DummyModel.__init__", "file_path": "tests/base.py", "class_name": "DummyModel", "func_name": "__init__", "text": "文件路径: tests/base.py, 类名: DummyModel\n    def __init__(self, foo):\n        self.foo = foo\n", "tokens": ["tests", "base", "py", "dummymodel", "def", "__init__", "self", "foo", "self", "foo", "foo"], "doc_len": 11}
{"doc_id": "tests/base.py::DummyModel.__eq__", "file_path": "tests/base.py", "class_name": "DummyModel", "func_name": "__eq__", "text": "文件路径: tests/base.py, 类名: DummyModel\n    def __eq__(self, other):\n        return self.foo == other.foo\n", "tokens": ["tests", "base", "py", "dummymodel", "def", "__eq__", "self", "other", "return", "self", "foo", "other", "foo"], "doc_len": 13}
{"doc_id": "tests/base.py::DummyModel.__str__", "file_path": "tests/base.py", "class_name": "DummyModel", "func_name": "__str__", "text": "文件路径: tests/base.py, 类名: DummyModel\n    def __str__(self):\n        return 'bar {0}'.format(self.foo)\n", "tokens": ["tests", "base", "py", "dummymodel", "def", "__str__", "self", "return", "bar", "0", "format", "self", "foo"], "doc_len": 13}
{"doc_id": "tests/base.py::Uppercased._serialize", "file_path": "tests/base.py", "class_name": "Uppercased", "func_name": "_serialize", "text": "文件路径: tests/base.py, 类名: Uppercased\n    def _serialize(self, value, attr, obj):\n        if value:\n            return value.upper()\n", "tokens": ["tests", "base", "py", "uppercased", "def", "_serialize", "self", "value", "attr", "obj", "if", "value", "return", "value", "upper"], "doc_len": 15}
{"doc_id": "tests/base.py::UserSchema.get_is_old", "file_path": "tests/base.py", "class_name": "UserSchema", "func_name": "get_is_old", "text": "文件路径: tests/base.py, 类名: UserSchema\n    def get_is_old(self, obj):\n        try:\n            return obj.age > 80\n        except TypeError as te:\n            raise ValidationError(text_type(te))\n", "tokens": ["tests", "base", "py", "userschema", "def", "get_is_old", "self", "obj", "try", "return", "obj", "age", "80", "except", "typeerror", "as", "te", "raise", "validationerror", "text_type", "te"], "doc_len": 21}
{"doc_id": "tests/base.py::UserSchema.make_user", "file_path": "tests/base.py", "class_name": "UserSchema", "func_name": "make_user", "text": "文件路径: tests/base.py, 类名: UserSchema\n    def make_user(self, data):\n        return User(**data)\n", "tokens": ["tests", "base", "py", "userschema", "def", "make_user", "self", "data", "return", "user", "data"], "doc_len": 11}
{"doc_id": "tests/base.py::UserMetaSchema.get_is_old", "file_path": "tests/base.py", "class_name": "UserMetaSchema", "func_name": "get_is_old", "text": "文件路径: tests/base.py, 类名: UserMetaSchema\n    def get_is_old(self, obj):\n        try:\n            return obj.age > 80\n        except TypeError as te:\n            raise ValidationError(te)\n", "tokens": ["tests", "base", "py", "usermetaschema", "def", "get_is_old", "self", "obj", "try", "return", "obj", "age", "80", "except", "typeerror", "as", "te", "raise", "validationerror", "te"], "doc_len": 20}
{"doc_id": "tests/base.py::mockjson.dumps", "file_path": "tests/base.py", "class_name": "mockjson", "func_name": "dumps", "text": "文件路径: tests/base.py, 类名: mockjson\n    def dumps(val):\n        return '{\"foo\": 42}'.encode('utf-8')\n", "tokens": ["tests", "base", "py", "mockjson", "def", "dumps", "val", "return", "foo", "42", "encode", "utf", "8"], "doc_len": 13}
{"doc_id": "tests/base.py::mockjson.loads", "file_path": "tests/base.py", "class_name": "mockjson", "func_name": "loads", "text": "文件路径: tests/base.py, 类名: mockjson\n    def loads(val):\n        return {'foo': 42}\n", "tokens": ["tests", "base", "py", "mockjson", "def", "loads", "val", "return", "foo", "42"], "doc_len": 10}
{"doc_id": "tests/conftest.py::user", "file_path": "tests/conftest.py", "class_name": null, "func_name": "user", "text": "文件路径: tests/conftest.py\ndef user():\n    return User(name=\"Monty\", age=42.3, homepage=\"http://monty.python.org/\")\n", "tokens": ["tests", "conftest", "py", "def", "user", "return", "user", "name", "monty", "age", "42", "3", "homepage", "http", "monty", "python", "org"], "doc_len": 17}
{"doc_id": "tests/conftest.py::blog", "file_path": "tests/conftest.py", "class_name": null, "func_name": "blog", "text": "文件路径: tests/conftest.py\ndef blog(user):\n    col1 = User(name=\"Mick\", age=123)\n    col2 = User(name=\"Keith\", age=456)\n    return Blog(\"Monty's blog\", user=user, categories=['humor', 'violence'],\n                collaborators=[col1, col2])\n", "tokens": ["tests", "conftest", "py", "def", "blog", "user", "col1", "user", "name", "mick", "age", "123", "col2", "user", "name", "keith", "age", "456", "return", "blog", "monty", "s", "blog", "user", "user", "categories", "humor", "violence", "collaborators", "col1", "col2"], "doc_len": 31}
{"doc_id": "tests/conftest.py::serialized_user", "file_path": "tests/conftest.py", "class_name": null, "func_name": "serialized_user", "text": "文件路径: tests/conftest.py\ndef serialized_user(user):\n    return UserSchema().dump(user)\n", "tokens": ["tests", "conftest", "py", "def", "serialized_user", "user", "return", "userschema", "dump", "user"], "doc_len": 10}
{"doc_id": "tests/test_decorators.py::test_decorated_processors", "file_path": "tests/test_decorators.py", "class_name": null, "func_name": "test_decorated_processors", "text": "文件路径: tests/test_decorators.py\ndef test_decorated_processors():\n    class ExampleSchema(Schema):\n        \"\"\"Includes different ways to invoke decorators and set up methods\"\"\"\n\n        TAG = 'TAG'\n\n        value = fields.Integer(as_string=True)\n\n        # Implicit default raw, pre dump, static method, return modified item.\n        @pre_dump\n        def increment_value(self, item):\n            item['value'] += 1\n            return item\n\n        # Implicit default raw, post dump, class method, modify in place.\n        @post_dump\n        def add_tag(self, item):\n            item['value'] = self.TAG + item['value']\n\n        # Explicitly raw, post dump, instance method, return modified item.\n        @post_dump(pass_many=True)\n        def add_envelope(self, data, many):\n            key = self.get_envelope_key(many)\n            return {key: data}\n\n        # Explicitly raw, pre load, instance method, return modified item.\n        @pre_load(pass_many=True)\n        def remove_envelope(self, data, many):\n            key = self.get_envelope_key(many)\n            return data[key]\n\n        @staticmethod\n        def get_envelope_key(many):\n            return 'data' if many else 'datum'\n\n        # Explicitly not raw, pre load, instance method, modify in place.\n        @pre_load(pass_many=False)\n        def remove_tag(self, item):\n            item['value'] = item['value'][len(self.TAG):]\n\n        # Explicit default raw, post load, instance method, modify in place.\n        @post_load()\n        def decrement_value(self, item):\n            item['value'] -= 1\n\n    schema = ExampleSchema()\n\n    # Need to re-create these because the processors will modify in place.\n    make_item = lambda: {'value': 3}\n    make_items = lambda: [make_item(), {'value': 5}]\n\n    item_dumped = schema.dump(make_item()).data\n    assert item_dumped == {'datum': {'value': 'TAG4'}}\n    item_loaded = schema.load(item_dumped).data\n    assert item_loaded == make_item()\n\n    items_dumped = schema.dump(make_items(), many=True).data\n    assert items_dumped == {'data': [{'value': 'TAG4'}, {'value': 'TAG6'}]}\n    items_loaded = schema.load(items_dumped, many=True).data\n    assert items_loaded == make_items()\n", "tokens": ["tests", "test_decorators", "py", "def", "test_decorated_processors", "class", "exampleschema", "schema", "includes", "different", "ways", "to", "invoke", "decorators", "and", "set", "up", "methods", "tag", "tag", "value", "fields", "integer", "as_string", "true", "implicit", "default", "raw", "pre", "dump", "static", "method", "return", "modified", "item", "pre_dump", "def", "increment_value", "self", "item", "item", "value", "1", "return", "item", "implicit", "default", "raw", "post", "dump", "class", "method", "modify", "in", "place", "post_dump", "def", "add_tag", "self", "item", "item", "value", "self", "tag", "item", "value", "explicitly", "raw", "post", "dump", "instance", "method", "return", "modified", "item", "post_dump", "pass_many", "true", "def", "add_envelope", "self", "data", "many", "key", "self", "get_envelope_key", "many", "return", "key", "data", "explicitly", "raw", "pre", "load", "instance", "method", "return", "modified", "item", "pre_load", "pass_many", "true", "def", "remove_envelope", "self", "data", "many", "key", "self", "get_envelope_key", "many", "return", "data", "key", "staticmethod", "def", "get_envelope_key", "many", "return", "data", "if", "many", "else", "datum", "explicitly", "not", "raw", "pre", "load", "instance", "method", "modify", "in", "place", "pre_load", "pass_many", "false", "def", "remove_tag", "self", "item", "item", "value", "item", "value", "len", "self", "tag", "explicit", "default", "raw", "post", "load", "instance", "method", "modify", "in", "place", "post_load", "def", "decrement_value", "self", "item", "item", "value", "1", "schema", "exampleschema", "need", "to", "re", "create", "these", "because", "the", "processors", "will", "modify", "in", "place", "make_item", "lambda", "value", "3", "make_items", "lambda", "make_item", "value", "5", "item_dumped", "schema", "dump", "make_item", "data", "assert", "item_dumped", "datum", "value", "tag4", "item_loaded", "schema", "load", "item_dumped", "data", "assert", "item_loaded", "make_item", "items_dumped", "schema", "dump", "make_items", "many", "true", "data", "assert", "items_dumped", "data", "value", "tag4", "value", "tag6", "items_loaded", "schema", "load", "items_dumped", "many", "true", "data", "assert", "items_loaded", "make_items"], "doc_len": 231}
{"doc_id": "tests/test_decorators.py::TestPassOriginal.test_pass_original_single_no_mutation", "file_path": "tests/test_decorators.py", "class_name": "TestPassOriginal", "func_name": "test_pass_original_single_no_mutation", "text": "文件路径: tests/test_decorators.py, 类名: TestPassOriginal\n    def test_pass_original_single_no_mutation(self):\n        class MySchema(Schema):\n            foo = fields.Field()\n\n            @post_load(pass_original=True)\n            def post_load(self, data, input_data):\n                ret = data.copy()\n                ret['_post_load'] = input_data['sentinel']\n                return ret\n\n            @post_dump(pass_original=True)\n            def post_dump(self, data, obj):\n                ret = data.copy()\n                ret['_post_dump'] = obj['sentinel']\n                return ret\n\n        schema = MySchema()\n        datum = {'foo': 42, 'sentinel': 24}\n        item_loaded = schema.load(datum).data\n        assert item_loaded['foo'] == 42\n        assert item_loaded['_post_load'] == 24\n\n        item_dumped = schema.dump(datum).data\n\n        assert item_dumped['foo'] == 42\n        assert item_dumped['_post_dump'] == 24\n", "tokens": ["tests", "test_decorators", "py", "testpassoriginal", "def", "test_pass_original_single_no_mutation", "self", "class", "myschema", "schema", "foo", "fields", "field", "post_load", "pass_original", "true", "def", "post_load", "self", "data", "input_data", "ret", "data", "copy", "ret", "_post_load", "input_data", "sentinel", "return", "ret", "post_dump", "pass_original", "true", "def", "post_dump", "self", "data", "obj", "ret", "data", "copy", "ret", "_post_dump", "obj", "sentinel", "return", "ret", "schema", "myschema", "datum", "foo", "42", "sentinel", "24", "item_loaded", "schema", "load", "datum", "data", "assert", "item_loaded", "foo", "42", "assert", "item_loaded", "_post_load", "24", "item_dumped", "schema", "dump", "datum", "data", "assert", "item_dumped", "foo", "42", "assert", "item_dumped", "_post_dump", "24"], "doc_len": 80}
{"doc_id": "tests/test_decorators.py::TestPassOriginal.test_pass_original_single_with_mutation", "file_path": "tests/test_decorators.py", "class_name": "TestPassOriginal", "func_name": "test_pass_original_single_with_mutation", "text": "文件路径: tests/test_decorators.py, 类名: TestPassOriginal\n    def test_pass_original_single_with_mutation(self):\n        class MySchema(Schema):\n            foo = fields.Field()\n\n            @post_load(pass_original=True)\n            def post_load(self, data, input_data):\n                data['_post_load'] = input_data['post_load']\n\n        schema = MySchema()\n        item_loaded = schema.load({'foo': 42, 'post_load': 24}).data\n        assert item_loaded['foo'] == 42\n        assert item_loaded['_post_load'] == 24\n", "tokens": ["tests", "test_decorators", "py", "testpassoriginal", "def", "test_pass_original_single_with_mutation", "self", "class", "myschema", "schema", "foo", "fields", "field", "post_load", "pass_original", "true", "def", "post_load", "self", "data", "input_data", "data", "_post_load", "input_data", "post_load", "schema", "myschema", "item_loaded", "schema", "load", "foo", "42", "post_load", "24", "data", "assert", "item_loaded", "foo", "42", "assert", "item_loaded", "_post_load", "24"], "doc_len": 43}
{"doc_id": "tests/test_decorators.py::TestPassOriginal.test_pass_original_many", "file_path": "tests/test_decorators.py", "class_name": "TestPassOriginal", "func_name": "test_pass_original_many", "text": "文件路径: tests/test_decorators.py, 类名: TestPassOriginal\n    def test_pass_original_many(self):\n        class MySchema(Schema):\n            foo = fields.Field()\n\n            @post_load(pass_many=True, pass_original=True)\n            def post_load(self, data, many, original):\n                if many:\n                    ret = []\n                    for item, orig_item in zip(data, original):\n                        item['_post_load'] = orig_item['sentinel']\n                        ret.append(item)\n                else:\n                    ret = data.copy()\n                    ret['_post_load'] = original['sentinel']\n                return ret\n\n            @post_dump(pass_many=True, pass_original=True)\n            def post_dump(self, data, many, original):\n                if many:\n                    ret = []\n                    for item, orig_item in zip(data, original):\n                        item['_post_dump'] = orig_item['sentinel']\n                        ret.append(item)\n                else:\n                    ret = data.copy()\n                    ret['_post_dump'] = original['sentinel']\n                return ret\n\n        schema = MySchema()\n        data = [{'foo': 42, 'sentinel': 24}, {'foo': 424, 'sentinel': 242}]\n        items_loaded = schema.load(data, many=True).data\n        assert items_loaded == [\n            {'foo': 42, '_post_load': 24},\n            {'foo': 424, '_post_load': 242},\n        ]\n        test_values = [e['_post_load'] for e in items_loaded]\n        assert test_values == [24, 242]\n\n        items_dumped = schema.dump(data, many=True).data\n        assert items_dumped == [\n            {'foo': 42, '_post_dump': 24},\n            {'foo': 424, '_post_dump': 242},\n        ]\n\n        # Also check load/dump of single item\n\n        datum = {'foo': 42, 'sentinel': 24}\n        item_loaded = schema.load(datum, many=False).data\n        assert item_loaded == {'foo': 42, '_post_load': 24}\n\n        item_dumped = schema.dump(datum, many=False).data\n        assert item_dumped == {'foo': 42, '_post_dump': 24}\n", "tokens": ["tests", "test_decorators", "py", "testpassoriginal", "def", "test_pass_original_many", "self", "class", "myschema", "schema", "foo", "fields", "field", "post_load", "pass_many", "true", "pass_original", "true", "def", "post_load", "self", "data", "many", "original", "if", "many", "ret", "for", "item", "orig_item", "in", "zip", "data", "original", "item", "_post_load", "orig_item", "sentinel", "ret", "append", "item", "else", "ret", "data", "copy", "ret", "_post_load", "original", "sentinel", "return", "ret", "post_dump", "pass_many", "true", "pass_original", "true", "def", "post_dump", "self", "data", "many", "original", "if", "many", "ret", "for", "item", "orig_item", "in", "zip", "data", "original", "item", "_post_dump", "orig_item", "sentinel", "ret", "append", "item", "else", "ret", "data", "copy", "ret", "_post_dump", "original", "sentinel", "return", "ret", "schema", "myschema", "data", "foo", "42", "sentinel", "24", "foo", "424", "sentinel", "242", "items_loaded", "schema", "load", "data", "many", "true", "data", "assert", "items_loaded", "foo", "42", "_post_load", "24", "foo", "424", "_post_load", "242", "test_values", "e", "_post_load", "for", "e", "in", "items_loaded", "assert", "test_values", "24", "242", "items_dumped", "schema", "dump", "data", "many", "true", "data", "assert", "items_dumped", "foo", "42", "_post_dump", "24", "foo", "424", "_post_dump", "242", "also", "check", "load", "dump", "of", "single", "item", "datum", "foo", "42", "sentinel", "24", "item_loaded", "schema", "load", "datum", "many", "false", "data", "assert", "item_loaded", "foo", "42", "_post_load", "24", "item_dumped", "schema", "dump", "datum", "many", "false", "data", "assert", "item_dumped", "foo", "42", "_post_dump", "24"], "doc_len": 183}
{"doc_id": "tests/test_decorators.py::test_decorated_processor_inheritance", "file_path": "tests/test_decorators.py", "class_name": null, "func_name": "test_decorated_processor_inheritance", "text": "文件路径: tests/test_decorators.py\ndef test_decorated_processor_inheritance():\n    class ParentSchema(Schema):\n\n        @post_dump\n        def inherited(self, item):\n            item['inherited'] = 'inherited'\n            return item\n\n        @post_dump\n        def overridden(self, item):\n            item['overridden'] = 'base'\n            return item\n\n        @post_dump\n        def deleted(self, item):\n            item['deleted'] = 'retained'\n            return item\n\n    class ChildSchema(ParentSchema):\n\n        @post_dump\n        def overridden(self, item):\n            item['overridden'] = 'overridden'\n            return item\n\n        deleted = None\n\n    parent_dumped = ParentSchema().dump({}).data\n    assert parent_dumped == {\n        'inherited': 'inherited',\n        'overridden': 'base',\n        'deleted': 'retained'\n    }\n\n    child_dumped = ChildSchema().dump({}).data\n    assert child_dumped == {\n        'inherited': 'inherited',\n        'overridden': 'overridden'\n    }\n", "tokens": ["tests", "test_decorators", "py", "def", "test_decorated_processor_inheritance", "class", "parentschema", "schema", "post_dump", "def", "inherited", "self", "item", "item", "inherited", "inherited", "return", "item", "post_dump", "def", "overridden", "self", "item", "item", "overridden", "base", "return", "item", "post_dump", "def", "deleted", "self", "item", "item", "deleted", "retained", "return", "item", "class", "childschema", "parentschema", "post_dump", "def", "overridden", "self", "item", "item", "overridden", "overridden", "return", "item", "deleted", "none", "parent_dumped", "parentschema", "dump", "data", "assert", "parent_dumped", "inherited", "inherited", "overridden", "base", "deleted", "retained", "child_dumped", "childschema", "dump", "data", "assert", "child_dumped", "inherited", "inherited", "overridden", "overridden"], "doc_len": 75}
{"doc_id": "tests/test_decorators.py::test_pre_dump_is_invoked_before_implicit_field_generation", "file_path": "tests/test_decorators.py", "class_name": null, "func_name": "test_pre_dump_is_invoked_before_implicit_field_generation", "text": "文件路径: tests/test_decorators.py\ndef test_pre_dump_is_invoked_before_implicit_field_generation():\n    class Foo(Schema):\n        field = fields.Integer()\n\n        @pre_dump\n        def hook(s, data):\n            data['generated_field'] = 7\n\n        class Meta:\n            # Removing generated_field from here drops it from the output\n            fields = ('field', 'generated_field')\n\n    assert Foo().dump({\"field\": 5}).data == {'field': 5, 'generated_field': 7}\n", "tokens": ["tests", "test_decorators", "py", "def", "test_pre_dump_is_invoked_before_implicit_field_generation", "class", "foo", "schema", "field", "fields", "integer", "pre_dump", "def", "hook", "s", "data", "data", "generated_field", "7", "class", "meta", "removing", "generated_field", "from", "here", "drops", "it", "from", "the", "output", "fields", "field", "generated_field", "assert", "foo", "dump", "field", "5", "data", "field", "5", "generated_field", "7"], "doc_len": 43}
{"doc_id": "tests/test_decorators.py::ValidatesSchema.validate_foo", "file_path": "tests/test_decorators.py", "class_name": "ValidatesSchema", "func_name": "validate_foo", "text": "文件路径: tests/test_decorators.py, 类名: ValidatesSchema\n    def validate_foo(self, value):\n        if value != 42:\n            raise ValidationError('The answer to life the universe and everything.')\n", "tokens": ["tests", "test_decorators", "py", "validatesschema", "def", "validate_foo", "self", "value", "if", "value", "42", "raise", "validationerror", "the", "answer", "to", "life", "the", "universe", "and", "everything"], "doc_len": 21}
{"doc_id": "tests/test_decorators.py::TestValidatesDecorator.test_validates_and_strict", "file_path": "tests/test_decorators.py", "class_name": "TestValidatesDecorator", "func_name": "test_validates_and_strict", "text": "文件路径: tests/test_decorators.py, 类名: TestValidatesDecorator\n    def test_validates_and_strict(self):\n        class VSchema(Schema):\n            s = fields.String()\n\n            @validates('s')\n            def validate_string(self, data):\n                raise ValidationError('nope')\n\n        with pytest.raises(ValidationError) as excinfo:\n            VSchema(strict=True).load({'s': 'bar'})\n\n        assert excinfo.value.messages == {'s': ['nope']}\n", "tokens": ["tests", "test_decorators", "py", "testvalidatesdecorator", "def", "test_validates_and_strict", "self", "class", "vschema", "schema", "s", "fields", "string", "validates", "s", "def", "validate_string", "self", "data", "raise", "validationerror", "nope", "with", "pytest", "raises", "validationerror", "as", "excinfo", "vschema", "strict", "true", "load", "s", "bar", "assert", "excinfo", "value", "messages", "s", "nope"], "doc_len": 40}
{"doc_id": "tests/test_decorators.py::TestValidatesDecorator.test_validates_with_attribute_and_strict", "file_path": "tests/test_decorators.py", "class_name": "TestValidatesDecorator", "func_name": "test_validates_with_attribute_and_strict", "text": "文件路径: tests/test_decorators.py, 类名: TestValidatesDecorator\n    def test_validates_with_attribute_and_strict(self):\n        class S1(Schema):\n            s = fields.String(attribute='string_name')\n\n            @validates('s')\n            def validate_string(self, data):\n                raise ValidationError('nope')\n        with pytest.raises(ValidationError) as excinfo:\n            S1(strict=True).load({'s': 'foo'})\n        assert excinfo.value.messages == {'s': ['nope']}\n\n        with pytest.raises(ValidationError):\n            S1(strict=True, many=True).load([{'s': 'foo'}])\n", "tokens": ["tests", "test_decorators", "py", "testvalidatesdecorator", "def", "test_validates_with_attribute_and_strict", "self", "class", "s1", "schema", "s", "fields", "string", "attribute", "string_name", "validates", "s", "def", "validate_string", "self", "data", "raise", "validationerror", "nope", "with", "pytest", "raises", "validationerror", "as", "excinfo", "s1", "strict", "true", "load", "s", "foo", "assert", "excinfo", "value", "messages", "s", "nope", "with", "pytest", "raises", "validationerror", "s1", "strict", "true", "many", "true", "load", "s", "foo"], "doc_len": 54}
{"doc_id": "tests/test_decorators.py::TestValidatesDecorator.test_validates_decorator", "file_path": "tests/test_decorators.py", "class_name": "TestValidatesDecorator", "func_name": "test_validates_decorator", "text": "文件路径: tests/test_decorators.py, 类名: TestValidatesDecorator\n    def test_validates_decorator(self):\n        schema = ValidatesSchema()\n\n        errors = schema.validate({'foo': 41})\n        assert 'foo' in errors\n        assert errors['foo'][0] == 'The answer to life the universe and everything.'\n\n        errors = schema.validate({'foo': 42})\n        assert errors == {}\n\n        errors = schema.validate([{'foo': 42}, {'foo': 43}], many=True)\n        assert 'foo' in errors[1]\n        assert len(errors[1]['foo']) == 1\n        assert errors[1]['foo'][0] == 'The answer to life the universe and everything.'\n\n        errors = schema.validate([{'foo': 42}, {'foo': 42}], many=True)\n        assert errors == {}\n\n        errors = schema.validate({})\n        assert errors == {}\n\n        result, errors = schema.load({'foo': 41})\n        assert errors\n        assert result == {}\n\n        result, errors = schema.load([{'foo': 42}, {'foo': 43}], many=True)\n        assert len(result) == 2\n        assert result[0] == {'foo': 42}\n        assert result[1] == {}\n        assert 1 in errors\n        assert 'foo' in errors[1]\n        assert errors[1]['foo'] == ['The answer to life the universe and everything.']\n", "tokens": ["tests", "test_decorators", "py", "testvalidatesdecorator", "def", "test_validates_decorator", "self", "schema", "validatesschema", "errors", "schema", "validate", "foo", "41", "assert", "foo", "in", "errors", "assert", "errors", "foo", "0", "the", "answer", "to", "life", "the", "universe", "and", "everything", "errors", "schema", "validate", "foo", "42", "assert", "errors", "errors", "schema", "validate", "foo", "42", "foo", "43", "many", "true", "assert", "foo", "in", "errors", "1", "assert", "len", "errors", "1", "foo", "1", "assert", "errors", "1", "foo", "0", "the", "answer", "to", "life", "the", "universe", "and", "everything", "errors", "schema", "validate", "foo", "42", "foo", "42", "many", "true", "assert", "errors", "errors", "schema", "validate", "assert", "errors", "result", "errors", "schema", "load", "foo", "41", "assert", "errors", "assert", "result", "result", "errors", "schema", "load", "foo", "42", "foo", "43", "many", "true", "assert", "len", "result", "2", "assert", "result", "0", "foo", "42", "assert", "result", "1", "assert", "1", "in", "errors", "assert", "foo", "in", "errors", "1", "assert", "errors", "1", "foo", "the", "answer", "to", "life", "the", "universe", "and", "everything"], "doc_len": 139}
{"doc_id": "tests/test_decorators.py::TestValidatesDecorator.test_field_not_present", "file_path": "tests/test_decorators.py", "class_name": "TestValidatesDecorator", "func_name": "test_field_not_present", "text": "文件路径: tests/test_decorators.py, 类名: TestValidatesDecorator\n    def test_field_not_present(self):\n        class BadSchema(ValidatesSchema):\n            @validates('bar')\n            def validate_bar(self, value):\n                raise ValidationError('Never raised.')\n\n        schema = BadSchema()\n\n        with pytest.raises(ValueError, match='\"bar\" field does not exist.'):\n            schema.validate({'foo': 42})\n", "tokens": ["tests", "test_decorators", "py", "testvalidatesdecorator", "def", "test_field_not_present", "self", "class", "badschema", "validatesschema", "validates", "bar", "def", "validate_bar", "self", "value", "raise", "validationerror", "never", "raised", "schema", "badschema", "with", "pytest", "raises", "valueerror", "match", "bar", "field", "does", "not", "exist", "schema", "validate", "foo", "42"], "doc_len": 36}
{"doc_id": "tests/test_decorators.py::TestValidatesDecorator.test_precedence", "file_path": "tests/test_decorators.py", "class_name": "TestValidatesDecorator", "func_name": "test_precedence", "text": "文件路径: tests/test_decorators.py, 类名: TestValidatesDecorator\n    def test_precedence(self):\n        class Schema2(ValidatesSchema):\n            foo = fields.Int(validate=lambda n: n != 42)\n            bar = fields.Int(validate=lambda n: n == 1)\n\n            @validates('bar')\n            def validate_bar(self, value):\n                if value != 2:\n                    raise ValidationError('Must be 2')\n\n        schema = Schema2()\n\n        errors = schema.validate({'foo': 42})\n        assert 'foo' in errors\n        assert len(errors['foo']) == 1\n        assert 'Invalid value.' in errors['foo'][0]\n\n        errors = schema.validate({'bar': 3})\n        assert 'bar' in errors\n        assert len(errors['bar']) == 1\n        assert 'Invalid value.' in errors['bar'][0]\n\n        errors = schema.validate({'bar': 1})\n        assert 'bar' in errors\n        assert len(errors['bar']) == 1\n        assert errors['bar'][0] == 'Must be 2'\n", "tokens": ["tests", "test_decorators", "py", "testvalidatesdecorator", "def", "test_precedence", "self", "class", "schema2", "validatesschema", "foo", "fields", "int", "validate", "lambda", "n", "n", "42", "bar", "fields", "int", "validate", "lambda", "n", "n", "1", "validates", "bar", "def", "validate_bar", "self", "value", "if", "value", "2", "raise", "validationerror", "must", "be", "2", "schema", "schema2", "errors", "schema", "validate", "foo", "42", "assert", "foo", "in", "errors", "assert", "len", "errors", "foo", "1", "assert", "invalid", "value", "in", "errors", "foo", "0", "errors", "schema", "validate", "bar", "3", "assert", "bar", "in", "errors", "assert", "len", "errors", "bar", "1", "assert", "invalid", "value", "in", "errors", "bar", "0", "errors", "schema", "validate", "bar", "1", "assert", "bar", "in", "errors", "assert", "len", "errors", "bar", "1", "assert", "errors", "bar", "0", "must", "be", "2"], "doc_len": 105}
{"doc_id": "tests/test_decorators.py::TestValidatesDecorator.test_validates_load_from", "file_path": "tests/test_decorators.py", "class_name": "TestValidatesDecorator", "func_name": "test_validates_load_from", "text": "文件路径: tests/test_decorators.py, 类名: TestValidatesDecorator\n    def test_validates_load_from(self):\n        class BadSchema(Schema):\n            foo = fields.String(load_from='foo-name')\n\n            @validates('foo')\n            def validate_string(self, data):\n                raise ValidationError('nope')\n\n        schema = BadSchema()\n        errors = schema.validate({'foo-name': 'data'})\n        assert 'foo-name' in errors\n        assert errors['foo-name'] == ['nope']\n\n        schema = BadSchema()\n        errors = schema.validate([{'foo-name': 'data'}, {'foo-name': 'data2'}], many=True)\n        assert errors == {\n            0: {'foo-name': ['nope']},\n            1: {'foo-name': ['nope']},\n        }\n", "tokens": ["tests", "test_decorators", "py", "testvalidatesdecorator", "def", "test_validates_load_from", "self", "class", "badschema", "schema", "foo", "fields", "string", "load_from", "foo", "name", "validates", "foo", "def", "validate_string", "self", "data", "raise", "validationerror", "nope", "schema", "badschema", "errors", "schema", "validate", "foo", "name", "data", "assert", "foo", "name", "in", "errors", "assert", "errors", "foo", "name", "nope", "schema", "badschema", "errors", "schema", "validate", "foo", "name", "data", "foo", "name", "data2", "many", "true", "assert", "errors", "0", "foo", "name", "nope", "1", "foo", "name", "nope"], "doc_len": 66}
{"doc_id": "tests/test_decorators.py::TestValidatesSchemaDecorator.test_validator_nested_many", "file_path": "tests/test_decorators.py", "class_name": "TestValidatesSchemaDecorator", "func_name": "test_validator_nested_many", "text": "文件路径: tests/test_decorators.py, 类名: TestValidatesSchemaDecorator\n    def test_validator_nested_many(self):\n\n        class NestedSchema(Schema):\n            foo = fields.Int(required=True)\n\n            @validates_schema\n            def validate_schema(self, data):\n                raise ValidationError('This will never work', 'foo')\n\n        class MySchema(Schema):\n            nested = fields.Nested(NestedSchema, required=True, many=True)\n\n        schema = MySchema()\n        errors = schema.validate({'nested': [1]})\n        assert errors\n        assert 'nested' in errors\n        assert 0 in errors['nested']\n        assert '_schema' in errors['nested']\n        assert 'foo' not in errors['nested']\n", "tokens": ["tests", "test_decorators", "py", "testvalidatesschemadecorator", "def", "test_validator_nested_many", "self", "class", "nestedschema", "schema", "foo", "fields", "int", "required", "true", "validates_schema", "def", "validate_schema", "self", "data", "raise", "validationerror", "this", "will", "never", "work", "foo", "class", "myschema", "schema", "nested", "fields", "nested", "nestedschema", "required", "true", "many", "true", "schema", "myschema", "errors", "schema", "validate", "nested", "1", "assert", "errors", "assert", "nested", "in", "errors", "assert", "0", "in", "errors", "nested", "assert", "_schema", "in", "errors", "nested", "assert", "foo", "not", "in", "errors", "nested"], "doc_len": 67}
{"doc_id": "tests/test_decorators.py::TestValidatesSchemaDecorator.test_decorated_validators", "file_path": "tests/test_decorators.py", "class_name": "TestValidatesSchemaDecorator", "func_name": "test_decorated_validators", "text": "文件路径: tests/test_decorators.py, 类名: TestValidatesSchemaDecorator\n    def test_decorated_validators(self):\n\n        class MySchema(Schema):\n            foo = fields.Int()\n            bar = fields.Int()\n\n            @validates_schema\n            def validate_schema(self, data):\n                if data['foo'] <= 3:\n                    raise ValidationError('Must be greater than 3')\n\n            @validates_schema(pass_many=True)\n            def validate_raw(self, data, many):\n                if many:\n                    assert type(data) is list\n                    if len(data) < 2:\n                        raise ValidationError('Must provide at least 2 items')\n\n            @validates_schema\n            def validate_bar(self, data):\n                if 'bar' in data and data['bar'] < 0:\n                    raise ValidationError('bar must not be negative', 'bar')\n\n        schema = MySchema()\n        errors = schema.validate({'foo': 3})\n        assert '_schema' in errors\n        assert errors['_schema'][0] == 'Must be greater than 3'\n\n        errors = schema.validate([{'foo': 4}], many=True)\n        assert '_schema' in errors\n        assert len(errors['_schema']) == 1\n        assert errors['_schema'][0] == 'Must provide at least 2 items'\n\n        errors = schema.validate({'foo': 4, 'bar': -1})\n        assert 'bar' in errors\n        assert len(errors['bar']) == 1\n        assert errors['bar'][0] == 'bar must not be negative'\n", "tokens": ["tests", "test_decorators", "py", "testvalidatesschemadecorator", "def", "test_decorated_validators", "self", "class", "myschema", "schema", "foo", "fields", "int", "bar", "fields", "int", "validates_schema", "def", "validate_schema", "self", "data", "if", "data", "foo", "3", "raise", "validationerror", "must", "be", "greater", "than", "3", "validates_schema", "pass_many", "true", "def", "validate_raw", "self", "data", "many", "if", "many", "assert", "type", "data", "is", "list", "if", "len", "data", "2", "raise", "validationerror", "must", "provide", "at", "least", "2", "items", "validates_schema", "def", "validate_bar", "self", "data", "if", "bar", "in", "data", "and", "data", "bar", "0", "raise", "validationerror", "bar", "must", "not", "be", "negative", "bar", "schema", "myschema", "errors", "schema", "validate", "foo", "3", "assert", "_schema", "in", "errors", "assert", "errors", "_schema", "0", "must", "be", "greater", "than", "3", "errors", "schema", "validate", "foo", "4", "many", "true", "assert", "_schema", "in", "errors", "assert", "len", "errors", "_schema", "1", "assert", "errors", "_schema", "0", "must", "provide", "at", "least", "2", "items", "errors", "schema", "validate", "foo", "4", "bar", "1", "assert", "bar", "in", "errors", "assert", "len", "errors", "bar", "1", "assert", "errors", "bar", "0", "bar", "must", "not", "be", "negative"], "doc_len": 151}
{"doc_id": "tests/test_decorators.py::TestValidatesSchemaDecorator.test_multiple_validators", "file_path": "tests/test_decorators.py", "class_name": "TestValidatesSchemaDecorator", "func_name": "test_multiple_validators", "text": "文件路径: tests/test_decorators.py, 类名: TestValidatesSchemaDecorator\n    def test_multiple_validators(self):\n\n        class MySchema(Schema):\n            foo = fields.Int()\n            bar = fields.Int()\n\n            @validates_schema\n            def validate_schema(self, data):\n                if data['foo'] <= 3:\n                    raise ValidationError('Must be greater than 3')\n\n            @validates_schema\n            def validate_bar(self, data):\n                if 'bar' in data and data['bar'] < 0:\n                    raise ValidationError('bar must not be negative')\n\n        schema = MySchema()\n        errors = schema.validate({'foo': 3, 'bar': -1})\n        assert type(errors) is dict\n        assert '_schema' in errors\n        assert len(errors['_schema']) == 2\n        assert 'Must be greater than 3' in errors['_schema']\n        assert 'bar must not be negative' in errors['_schema']\n\n        errors = schema.validate([{'foo': 3, 'bar': -1}, {'foo': 3}], many=True)\n        assert type(errors) is dict\n        assert '_schema' in errors[0]\n        assert len(errors[0]['_schema']) == 2\n        assert 'Must be greater than 3' in errors[0]['_schema']\n        assert 'bar must not be negative' in errors[0]['_schema']\n        assert len(errors[1]['_schema']) == 1\n        assert 'Must be greater than 3' in errors[0]['_schema']\n", "tokens": ["tests", "test_decorators", "py", "testvalidatesschemadecorator", "def", "test_multiple_validators", "self", "class", "myschema", "schema", "foo", "fields", "int", "bar", "fields", "int", "validates_schema", "def", "validate_schema", "self", "data", "if", "data", "foo", "3", "raise", "validationerror", "must", "be", "greater", "than", "3", "validates_schema", "def", "validate_bar", "self", "data", "if", "bar", "in", "data", "and", "data", "bar", "0", "raise", "validationerror", "bar", "must", "not", "be", "negative", "schema", "myschema", "errors", "schema", "validate", "foo", "3", "bar", "1", "assert", "type", "errors", "is", "dict", "assert", "_schema", "in", "errors", "assert", "len", "errors", "_schema", "2", "assert", "must", "be", "greater", "than", "3", "in", "errors", "_schema", "assert", "bar", "must", "not", "be", "negative", "in", "errors", "_schema", "errors", "schema", "validate", "foo", "3", "bar", "1", "foo", "3", "many", "true", "assert", "type", "errors", "is", "dict", "assert", "_schema", "in", "errors", "0", "assert", "len", "errors", "0", "_schema", "2", "assert", "must", "be", "greater", "than", "3", "in", "errors", "0", "_schema", "assert", "bar", "must", "not", "be", "negative", "in", "errors", "0", "_schema", "assert", "len", "errors", "1", "_schema", "1", "assert", "must", "be", "greater", "than", "3", "in", "errors", "0", "_schema"], "doc_len": 156}
{"doc_id": "tests/test_decorators.py::TestValidatesSchemaDecorator.test_passing_original_data", "file_path": "tests/test_decorators.py", "class_name": "TestValidatesSchemaDecorator", "func_name": "test_passing_original_data", "text": "文件路径: tests/test_decorators.py, 类名: TestValidatesSchemaDecorator\n    def test_passing_original_data(self):\n\n        class MySchema(Schema):\n            foo = fields.Int()\n            bar = fields.Int()\n\n            @validates_schema(pass_original=True)\n            def validate_original(self, data, original_data):\n                if isinstance(original_data, dict) and isinstance(original_data['foo'], str):\n                    raise ValidationError('foo cannot be a string')\n\n            # See https://github.com/marshmallow-code/marshmallow/issues/127\n            @validates_schema(pass_many=True, pass_original=True)\n            def check_unknown_fields(self, data, original_data, many):\n                def check(datum):\n                    for key, val in datum.items():\n                        if key not in self.fields:\n                            raise ValidationError({'code': 'invalid_field'})\n                if many:\n                    for each in original_data:\n                        check(each)\n                else:\n                    check(original_data)\n\n        schema = MySchema()\n        errors = schema.validate({'foo': 4, 'baz': 42})\n        assert '_schema' in errors\n        assert len(errors['_schema']) == 1\n        assert errors['_schema'][0] == {'code': 'invalid_field'}\n\n        errors = schema.validate({'foo': '4'})\n        assert '_schema' in errors\n        assert len(errors['_schema']) == 1\n        assert errors['_schema'][0] == 'foo cannot be a string'\n\n        schema = MySchema()\n        errors = schema.validate([{'foo': 4, 'baz': 42}], many=True)\n        assert '_schema' in errors\n        assert len(errors['_schema']) == 1\n        assert errors['_schema'][0] == {'code': 'invalid_field'}\n", "tokens": ["tests", "test_decorators", "py", "testvalidatesschemadecorator", "def", "test_passing_original_data", "self", "class", "myschema", "schema", "foo", "fields", "int", "bar", "fields", "int", "validates_schema", "pass_original", "true", "def", "validate_original", "self", "data", "original_data", "if", "isinstance", "original_data", "dict", "and", "isinstance", "original_data", "foo", "str", "raise", "validationerror", "foo", "cannot", "be", "a", "string", "see", "https", "github", "com", "marshmallow", "code", "marshmallow", "issues", "127", "validates_schema", "pass_many", "true", "pass_original", "true", "def", "check_unknown_fields", "self", "data", "original_data", "many", "def", "check", "datum", "for", "key", "val", "in", "datum", "items", "if", "key", "not", "in", "self", "fields", "raise", "validationerror", "code", "invalid_field", "if", "many", "for", "each", "in", "original_data", "check", "each", "else", "check", "original_data", "schema", "myschema", "errors", "schema", "validate", "foo", "4", "baz", "42", "assert", "_schema", "in", "errors", "assert", "len", "errors", "_schema", "1", "assert", "errors", "_schema", "0", "code", "invalid_field", "errors", "schema", "validate", "foo", "4", "assert", "_schema", "in", "errors", "assert", "len", "errors", "_schema", "1", "assert", "errors", "_schema", "0", "foo", "cannot", "be", "a", "string", "schema", "myschema", "errors", "schema", "validate", "foo", "4", "baz", "42", "many", "true", "assert", "_schema", "in", "errors", "assert", "len", "errors", "_schema", "1", "assert", "errors", "_schema", "0", "code", "invalid_field"], "doc_len": 163}
{"doc_id": "tests/test_decorators.py::TestValidatesSchemaDecorator.test_allow_arbitrary_field_names_in_error", "file_path": "tests/test_decorators.py", "class_name": "TestValidatesSchemaDecorator", "func_name": "test_allow_arbitrary_field_names_in_error", "text": "文件路径: tests/test_decorators.py, 类名: TestValidatesSchemaDecorator\n    def test_allow_arbitrary_field_names_in_error(self):\n\n        class MySchema(Schema):\n            foo = fields.Int()\n            bar = fields.Int()\n\n            @validates_schema(pass_original=True)\n            def strict_fields(self, data, original_data):\n                for key in original_data:\n                    if key not in self.fields:\n                        raise ValidationError('Unknown field name', key)\n\n        schema = MySchema()\n        errors = schema.validate({'foo': 2, 'baz': 42})\n        assert 'baz' in errors\n        assert len(errors['baz']) == 1\n        assert errors['baz'][0] == 'Unknown field name'\n", "tokens": ["tests", "test_decorators", "py", "testvalidatesschemadecorator", "def", "test_allow_arbitrary_field_names_in_error", "self", "class", "myschema", "schema", "foo", "fields", "int", "bar", "fields", "int", "validates_schema", "pass_original", "true", "def", "strict_fields", "self", "data", "original_data", "for", "key", "in", "original_data", "if", "key", "not", "in", "self", "fields", "raise", "validationerror", "unknown", "field", "name", "key", "schema", "myschema", "errors", "schema", "validate", "foo", "2", "baz", "42", "assert", "baz", "in", "errors", "assert", "len", "errors", "baz", "1", "assert", "errors", "baz", "0", "unknown", "field", "name"], "doc_len": 65}
{"doc_id": "tests/test_decorators.py::TestValidatesSchemaDecorator.test_skip_on_field_errors", "file_path": "tests/test_decorators.py", "class_name": "TestValidatesSchemaDecorator", "func_name": "test_skip_on_field_errors", "text": "文件路径: tests/test_decorators.py, 类名: TestValidatesSchemaDecorator\n    def test_skip_on_field_errors(self):\n\n        class MySchema(Schema):\n            foo = fields.Int(required=True, validate=lambda n: n == 3)\n            bar = fields.Int(required=True)\n\n            @validates_schema(skip_on_field_errors=True)\n            def validate_schema(self, data):\n                if data['foo'] != data['bar']:\n                    raise ValidationError('Foo and bar must be equal.')\n\n            @validates_schema(skip_on_field_errors=True, pass_many=True)\n            def validate_many(self, data, many):\n                if many:\n                    assert type(data) is list\n                    if len(data) < 2:\n                        raise ValidationError('Must provide at least 2 items')\n\n        schema = MySchema()\n        # check that schema errors still occur with no field errors\n        errors = schema.validate({'foo': 3, 'bar': 4})\n        assert '_schema' in errors\n        assert errors['_schema'][0] == 'Foo and bar must be equal.'\n\n        errors = schema.validate([{'foo': 3, 'bar': 3}], many=True)\n        assert '_schema' in errors\n        assert errors['_schema'][0] == 'Must provide at least 2 items'\n\n        # check that schema errors don't occur when field errors do\n        errors = schema.validate({'foo': 3, 'bar': 'not an int'})\n        assert 'bar' in errors\n        assert '_schema' not in errors\n\n        errors = schema.validate({'foo': 2, 'bar': 2})\n        assert 'foo' in errors\n        assert '_schema' not in errors\n\n        errors = schema.validate([{'foo': 3, 'bar': 'not an int'}], many=True)\n        assert 'bar' in errors[0]\n        assert '_schema' not in errors\n", "tokens": ["tests", "test_decorators", "py", "testvalidatesschemadecorator", "def", "test_skip_on_field_errors", "self", "class", "myschema", "schema", "foo", "fields", "int", "required", "true", "validate", "lambda", "n", "n", "3", "bar", "fields", "int", "required", "true", "validates_schema", "skip_on_field_errors", "true", "def", "validate_schema", "self", "data", "if", "data", "foo", "data", "bar", "raise", "validationerror", "foo", "and", "bar", "must", "be", "equal", "validates_schema", "skip_on_field_errors", "true", "pass_many", "true", "def", "validate_many", "self", "data", "many", "if", "many", "assert", "type", "data", "is", "list", "if", "len", "data", "2", "raise", "validationerror", "must", "provide", "at", "least", "2", "items", "schema", "myschema", "check", "that", "schema", "errors", "still", "occur", "with", "no", "field", "errors", "errors", "schema", "validate", "foo", "3", "bar", "4", "assert", "_schema", "in", "errors", "assert", "errors", "_schema", "0", "foo", "and", "bar", "must", "be", "equal", "errors", "schema", "validate", "foo", "3", "bar", "3", "many", "true", "assert", "_schema", "in", "errors", "assert", "errors", "_schema", "0", "must", "provide", "at", "least", "2", "items", "check", "that", "schema", "errors", "don", "t", "occur", "when", "field", "errors", "do", "errors", "schema", "validate", "foo", "3", "bar", "not", "an", "int", "assert", "bar", "in", "errors", "assert", "_schema", "not", "in", "errors", "errors", "schema", "validate", "foo", "2", "bar", "2", "assert", "foo", "in", "errors", "assert", "_schema", "not", "in", "errors", "errors", "schema", "validate", "foo", "3", "bar", "not", "an", "int", "many", "true", "assert", "bar", "in", "errors", "0", "assert", "_schema", "not", "in", "errors"], "doc_len": 196}
{"doc_id": "tests/test_decorators.py::test_decorator_error_handling", "file_path": "tests/test_decorators.py", "class_name": null, "func_name": "test_decorator_error_handling", "text": "文件路径: tests/test_decorators.py\ndef test_decorator_error_handling():\n    class ExampleSchema(Schema):\n        foo = fields.Int()\n        bar = fields.Int()\n\n        @pre_load()\n        def pre_load_error1(self, item):\n            if item['foo'] != 0:\n                return\n            errors = {\n              'foo' : ['preloadmsg1',],\n              'bar' : ['preloadmsg2', 'preloadmsg3'],\n            }\n            raise ValidationError(errors)\n\n        @pre_load()\n        def pre_load_error2(self, item):\n            if item['foo'] != 4:\n                return\n            raise ValidationError('preloadmsg1', 'foo')\n\n        @pre_load()\n        def pre_load_error3(self, item):\n            if item['foo'] != 8:\n                return\n            raise ValidationError('preloadmsg1')\n\n        @post_load()\n        def post_load_error1(self, item):\n            if item['foo'] != 1:\n                return item\n            errors = {\n              'foo' : ['postloadmsg1',],\n              'bar' : ['postloadmsg2', 'postloadmsg3'],\n            }\n            raise ValidationError(errors)\n\n        @post_load()\n        def post_load_error2(self, item):\n            if item['foo'] != 5:\n                return item\n            raise ValidationError('postloadmsg1', 'foo')\n\n        @pre_dump()\n        def pre_dump_error1(self, item):\n            if item['foo'] != 2:\n                return\n            errors = {\n              'foo' : ['predumpmsg1',],\n              'bar' : ['predumpmsg2', 'predumpmsg3'],\n            }\n            raise ValidationError(errors)\n\n        @pre_dump()\n        def pre_dump_error2(self, item):\n            if item['foo'] != 6:\n                return\n            raise ValidationError('predumpmsg1', 'foo')\n\n        @post_dump()\n        def post_dump_error1(self, item):\n            if item['foo'] != 3:\n                return item\n            errors = {\n              'foo' : ['postdumpmsg1',],\n              'bar' : ['postdumpmsg2', 'postdumpmsg3'],\n            }\n            raise ValidationError(errors)\n\n        @post_dump()\n        def post_dump_error2(self, item):\n            if item['foo'] != 7:\n                return\n            raise ValidationError('postdumpmsg1', 'foo')\n\n    def make_item(foo, bar):\n        data, errors = schema.load({'foo' : foo, 'bar' : bar})\n        assert data is not None\n        assert not errors\n        return data\n\n    schema = ExampleSchema()\n    data, errors = schema.load({'foo' : 0, 'bar' : 1})\n    assert 'foo' in errors\n    assert len(errors['foo']) == 1\n    assert errors['foo'][0] == 'preloadmsg1'\n    assert 'bar' in errors\n    assert len(errors['bar']) == 2\n    assert 'preloadmsg2' in errors['bar']\n    assert 'preloadmsg3' in errors['bar']\n    data, errors = schema.load({'foo' : 1, 'bar' : 1})\n    assert 'foo' in errors\n    assert len(errors['foo']) == 1\n    assert errors['foo'][0] == 'postloadmsg1'\n    assert 'bar' in errors\n    assert len(errors['bar']) == 2\n    assert 'postloadmsg2' in errors['bar']\n    assert 'postloadmsg3' in errors['bar']\n    data, errors = schema.dump(make_item(2, 1))\n    assert 'foo' in errors\n    assert len(errors['foo']) == 1\n    assert errors['foo'][0] == 'predumpmsg1'\n    assert 'bar' in errors\n    assert len(errors['bar']) == 2\n    assert 'predumpmsg2' in errors['bar']\n    assert 'predumpmsg3' in errors['bar']\n    data, errors = schema.dump(make_item(3, 1))\n    assert 'foo' in errors\n    assert len(errors['foo']) == 1\n    assert errors['foo'][0] == 'postdumpmsg1'\n    assert 'bar' in errors\n    assert len(errors['bar']) == 2\n    assert 'postdumpmsg2' in errors['bar']\n    assert 'postdumpmsg3' in errors['bar']\n    data, errors = schema.load({'foo' : 4, 'bar' : 1})\n    assert len(errors) == 1\n    assert 'foo' in errors\n    assert len(errors['foo']) == 1\n    assert errors['foo'][0] == 'preloadmsg1'\n    data, errors = schema.load({'foo' : 5, 'bar' : 1})\n    assert len(errors) == 1\n    assert 'foo' in errors\n    assert len(errors['foo']) == 1\n    assert errors['foo'][0] == 'postloadmsg1'\n    data, errors = schema.dump(make_item(6, 1))\n    assert 'foo' in errors\n    assert len(errors['foo']) == 1\n    assert errors['foo'][0] == 'predumpmsg1'\n    data, errors = schema.dump(make_item(7, 1))\n    assert 'foo' in errors\n    assert len(errors['foo']) == 1\n    assert errors['foo'][0] == 'postdumpmsg1'\n    data, errors = schema.load({'foo' : 8, 'bar' : 1})\n    assert len(errors) == 1\n    assert '_schema' in errors\n    assert len(errors['_schema']) == 1\n    assert errors['_schema'][0] == 'preloadmsg1'\n", "tokens": ["tests", "test_decorators", "py", "def", "test_decorator_error_handling", "class", "exampleschema", "schema", "foo", "fields", "int", "bar", "fields", "int", "pre_load", "def", "pre_load_error1", "self", "item", "if", "item", "foo", "0", "return", "errors", "foo", "preloadmsg1", "bar", "preloadmsg2", "preloadmsg3", "raise", "validationerror", "errors", "pre_load", "def", "pre_load_error2", "self", "item", "if", "item", "foo", "4", "return", "raise", "validationerror", "preloadmsg1", "foo", "pre_load", "def", "pre_load_error3", "self", "item", "if", "item", "foo", "8", "return", "raise", "validationerror", "preloadmsg1", "post_load", "def", "post_load_error1", "self", "item", "if", "item", "foo", "1", "return", "item", "errors", "foo", "postloadmsg1", "bar", "postloadmsg2", "postloadmsg3", "raise", "validationerror", "errors", "post_load", "def", "post_load_error2", "self", "item", "if", "item", "foo", "5", "return", "item", "raise", "validationerror", "postloadmsg1", "foo", "pre_dump", "def", "pre_dump_error1", "self", "item", "if", "item", "foo", "2", "return", "errors", "foo", "predumpmsg1", "bar", "predumpmsg2", "predumpmsg3", "raise", "validationerror", "errors", "pre_dump", "def", "pre_dump_error2", "self", "item", "if", "item", "foo", "6", "return", "raise", "validationerror", "predumpmsg1", "foo", "post_dump", "def", "post_dump_error1", "self", "item", "if", "item", "foo", "3", "return", "item", "errors", "foo", "postdumpmsg1", "bar", "postdumpmsg2", "postdumpmsg3", "raise", "validationerror", "errors", "post_dump", "def", "post_dump_error2", "self", "item", "if", "item", "foo", "7", "return", "raise", "validationerror", "postdumpmsg1", "foo", "def", "make_item", "foo", "bar", "data", "errors", "schema", "load", "foo", "foo", "bar", "bar", "assert", "data", "is", "not", "none", "assert", "not", "errors", "return", "data", "schema", "exampleschema", "data", "errors", "schema", "load", "foo", "0", "bar", "1", "assert", "foo", "in", "errors", "assert", "len", "errors", "foo", "1", "assert", "errors", "foo", "0", "preloadmsg1", "assert", "bar", "in", "errors", "assert", "len", "errors", "bar", "2", "assert", "preloadmsg2", "in", "errors", "bar", "assert", "preloadmsg3", "in", "errors", "bar", "data", "errors", "schema", "load", "foo", "1", "bar", "1", "assert", "foo", "in", "errors", "assert", "len", "errors", "foo", "1", "assert", "errors", "foo", "0", "postloadmsg1", "assert", "bar", "in", "errors", "assert", "len", "errors", "bar", "2", "assert", "postloadmsg2", "in", "errors", "bar", "assert", "postloadmsg3", "in", "errors", "bar", "data", "errors", "schema", "dump", "make_item", "2", "1", "assert", "foo", "in", "errors", "assert", "len", "errors", "foo", "1", "assert", "errors", "foo", "0", "predumpmsg1", "assert", "bar", "in", "errors", "assert", "len", "errors", "bar", "2", "assert", "predumpmsg2", "in", "errors", "bar", "assert", "predumpmsg3", "in", "errors", "bar", "data", "errors", "schema", "dump", "make_item", "3", "1", "assert", "foo", "in", "errors", "assert", "len", "errors", "foo", "1", "assert", "errors", "foo", "0", "postdumpmsg1", "assert", "bar", "in", "errors", "assert", "len", "errors", "bar", "2", "assert", "postdumpmsg2", "in", "errors", "bar", "assert", "postdumpmsg3", "in", "errors", "bar", "data", "errors", "schema", "load", "foo", "4", "bar", "1", "assert", "len", "errors", "1", "assert", "foo", "in", "errors", "assert", "len", "errors", "foo", "1", "assert", "errors", "foo", "0", "preloadmsg1", "data", "errors", "schema", "load", "foo", "5", "bar", "1", "assert", "len", "errors", "1", "assert", "foo", "in", "errors", "assert", "len", "errors", "foo", "1", "assert", "errors", "foo", "0", "postloadmsg1", "data", "errors", "schema", "dump", "make_item", "6", "1", "assert", "foo", "in", "errors", "assert", "len", "errors", "foo", "1", "assert", "errors", "foo", "0", "predumpmsg1", "data", "errors", "schema", "dump", "make_item", "7", "1", "assert", "foo", "in", "errors", "assert", "len", "errors", "foo", "1", "assert", "errors", "foo", "0", "postdumpmsg1", "data", "errors", "schema", "load", "foo", "8", "bar", "1", "assert", "len", "errors", "1", "assert", "_schema", "in", "errors", "assert", "len", "errors", "_schema", "1", "assert", "errors", "_schema", "0", "preloadmsg1"], "doc_len": 468}
{"doc_id": "tests/test_decorators.py::test_decorator_strict_error_handling_with_load", "file_path": "tests/test_decorators.py", "class_name": null, "func_name": "test_decorator_strict_error_handling_with_load", "text": "文件路径: tests/test_decorators.py\ndef test_decorator_strict_error_handling_with_load(decorator):\n    class ExampleSchema(Schema):\n        @decorator\n        def raise_value_error(self, item):\n            raise ValidationError({'foo': 'error'})\n\n    schema = ExampleSchema(strict=True)\n    with pytest.raises(ValidationError) as exc:\n        schema.load({})\n    assert exc.value.messages == {'foo': 'error'}\n    schema.dump(object())\n", "tokens": ["tests", "test_decorators", "py", "def", "test_decorator_strict_error_handling_with_load", "decorator", "class", "exampleschema", "schema", "decorator", "def", "raise_value_error", "self", "item", "raise", "validationerror", "foo", "error", "schema", "exampleschema", "strict", "true", "with", "pytest", "raises", "validationerror", "as", "exc", "schema", "load", "assert", "exc", "value", "messages", "foo", "error", "schema", "dump", "object"], "doc_len": 39}
{"doc_id": "tests/test_decorators.py::test_decorator_strict_error_handling_with_dump", "file_path": "tests/test_decorators.py", "class_name": null, "func_name": "test_decorator_strict_error_handling_with_dump", "text": "文件路径: tests/test_decorators.py\ndef test_decorator_strict_error_handling_with_dump(decorator):\n    class ExampleSchema(Schema):\n        @decorator\n        def raise_value_error(self, item):\n            raise ValidationError({'foo': 'error'})\n\n    schema = ExampleSchema(strict=True)\n    with pytest.raises(ValidationError) as exc:\n        schema.dump(object())\n    assert exc.value.messages == {'foo': 'error'}\n    schema.load({})\n", "tokens": ["tests", "test_decorators", "py", "def", "test_decorator_strict_error_handling_with_dump", "decorator", "class", "exampleschema", "schema", "decorator", "def", "raise_value_error", "self", "item", "raise", "validationerror", "foo", "error", "schema", "exampleschema", "strict", "true", "with", "pytest", "raises", "validationerror", "as", "exc", "schema", "dump", "object", "assert", "exc", "value", "messages", "foo", "error", "schema", "load"], "doc_len": 39}
{"doc_id": "tests/test_deserialization.py::TestDeserializingNone.test_fields_allow_none_deserialize_to_none", "file_path": "tests/test_deserialization.py", "class_name": "TestDeserializingNone", "func_name": "test_fields_allow_none_deserialize_to_none", "text": "文件路径: tests/test_deserialization.py, 类名: TestDeserializingNone\n    def test_fields_allow_none_deserialize_to_none(self, FieldClass):\n        if FieldClass == fields.FormattedString:\n            field = FieldClass(src_str='foo', allow_none=True)\n        else:\n            field = FieldClass(allow_none=True)\n        field.deserialize(None) is None\n", "tokens": ["tests", "test_deserialization", "py", "testdeserializingnone", "def", "test_fields_allow_none_deserialize_to_none", "self", "fieldclass", "if", "fieldclass", "fields", "formattedstring", "field", "fieldclass", "src_str", "foo", "allow_none", "true", "else", "field", "fieldclass", "allow_none", "true", "field", "deserialize", "none", "is", "none"], "doc_len": 28}
{"doc_id": "tests/test_deserialization.py::TestDeserializingNone.test_fields_dont_allow_none_by_default", "file_path": "tests/test_deserialization.py", "class_name": "TestDeserializingNone", "func_name": "test_fields_dont_allow_none_by_default", "text": "文件路径: tests/test_deserialization.py, 类名: TestDeserializingNone\n    def test_fields_dont_allow_none_by_default(self, FieldClass):\n        # by default, allow_none=False\n        if FieldClass == fields.FormattedString:\n            field = FieldClass(src_str='foo')\n        else:\n            field = FieldClass()\n        with pytest.raises(ValidationError, match='Field may not be null.'):\n            field.deserialize(None)\n", "tokens": ["tests", "test_deserialization", "py", "testdeserializingnone", "def", "test_fields_dont_allow_none_by_default", "self", "fieldclass", "by", "default", "allow_none", "false", "if", "fieldclass", "fields", "formattedstring", "field", "fieldclass", "src_str", "foo", "else", "field", "fieldclass", "with", "pytest", "raises", "validationerror", "match", "field", "may", "not", "be", "null", "field", "deserialize", "none"], "doc_len": 36}
{"doc_id": "tests/test_deserialization.py::TestDeserializingNone.test_allow_none_is_true_if_missing_is_true", "file_path": "tests/test_deserialization.py", "class_name": "TestDeserializingNone", "func_name": "test_allow_none_is_true_if_missing_is_true", "text": "文件路径: tests/test_deserialization.py, 类名: TestDeserializingNone\n    def test_allow_none_is_true_if_missing_is_true(self):\n        field = fields.Field(missing=None)\n        assert field.allow_none is True\n        field.deserialize(None) is None\n", "tokens": ["tests", "test_deserialization", "py", "testdeserializingnone", "def", "test_allow_none_is_true_if_missing_is_true", "self", "field", "fields", "field", "missing", "none", "assert", "field", "allow_none", "is", "true", "field", "deserialize", "none", "is", "none"], "doc_len": 22}
{"doc_id": "tests/test_deserialization.py::TestDeserializingNone.test_list_field_deserialize_none_to_empty_list", "file_path": "tests/test_deserialization.py", "class_name": "TestDeserializingNone", "func_name": "test_list_field_deserialize_none_to_empty_list", "text": "文件路径: tests/test_deserialization.py, 类名: TestDeserializingNone\n    def test_list_field_deserialize_none_to_empty_list(self):\n        field = fields.List(fields.String(allow_none=True), allow_none=True)\n        assert field.deserialize(None) is None\n", "tokens": ["tests", "test_deserialization", "py", "testdeserializingnone", "def", "test_list_field_deserialize_none_to_empty_list", "self", "field", "fields", "list", "fields", "string", "allow_none", "true", "allow_none", "true", "assert", "field", "deserialize", "none", "is", "none"], "doc_len": 22}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_float_field_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_float_field_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_float_field_deserialization(self):\n        field = fields.Float()\n        assert_almost_equal(field.deserialize('12.3'), 12.3)\n        assert_almost_equal(field.deserialize(12.3), 12.3)\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_float_field_deserialization", "self", "field", "fields", "float", "assert_almost_equal", "field", "deserialize", "12", "3", "12", "3", "assert_almost_equal", "field", "deserialize", "12", "3", "12", "3"], "doc_len": 24}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_invalid_float_field_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_invalid_float_field_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_invalid_float_field_deserialization(self, in_val):\n        field = fields.Float()\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize(in_val)\n        assert excinfo.value.args[0] == 'Not a valid number.'\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_invalid_float_field_deserialization", "self", "in_val", "field", "fields", "float", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "in_val", "assert", "excinfo", "value", "args", "0", "not", "a", "valid", "number"], "doc_len": 29}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_float_field_overflow", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_float_field_overflow", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_float_field_overflow(self):\n        field = fields.Float()\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize(2**1024)\n        assert excinfo.value.args[0] == 'Number too large.'\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_float_field_overflow", "self", "field", "fields", "float", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "2", "1024", "assert", "excinfo", "value", "args", "0", "number", "too", "large"], "doc_len": 28}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_integer_field_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_integer_field_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_integer_field_deserialization(self):\n        field = fields.Integer()\n        assert field.deserialize('42') == 42\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize('42.0')\n        assert excinfo.value.args[0] == 'Not a valid integer.'\n        with pytest.raises(ValidationError):\n            field.deserialize('bad')\n        assert excinfo.value.args[0] == 'Not a valid integer.'\n        with pytest.raises(ValidationError):\n            field.deserialize({})\n        assert excinfo.value.args[0] == 'Not a valid integer.'\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_integer_field_deserialization", "self", "field", "fields", "integer", "assert", "field", "deserialize", "42", "42", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "42", "0", "assert", "excinfo", "value", "args", "0", "not", "a", "valid", "integer", "with", "pytest", "raises", "validationerror", "field", "deserialize", "bad", "assert", "excinfo", "value", "args", "0", "not", "a", "valid", "integer", "with", "pytest", "raises", "validationerror", "field", "deserialize", "assert", "excinfo", "value", "args", "0", "not", "a", "valid", "integer"], "doc_len": 65}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_decimal_field_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_decimal_field_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_decimal_field_deserialization(self):\n        m1 = 12\n        m2 = '12.355'\n        m3 = decimal.Decimal(1)\n        m4 = 3.14\n        m5 = 'abc'\n        m6 = [1, 2]\n\n        field = fields.Decimal()\n        assert isinstance(field.deserialize(m1), decimal.Decimal)\n        assert field.deserialize(m1) == decimal.Decimal(12)\n        assert isinstance(field.deserialize(m2), decimal.Decimal)\n        assert field.deserialize(m2) == decimal.Decimal('12.355')\n        assert isinstance(field.deserialize(m3), decimal.Decimal)\n        assert field.deserialize(m3) == decimal.Decimal(1)\n        assert isinstance(field.deserialize(m4), decimal.Decimal)\n        assert field.deserialize(m4).as_tuple() == (0, (3, 1, 4), -2)\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize(m5)\n        assert excinfo.value.args[0] == 'Not a valid number.'\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize(m6)\n        assert excinfo.value.args[0] == 'Not a valid number.'\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_decimal_field_deserialization", "self", "m1", "12", "m2", "12", "355", "m3", "decimal", "decimal", "1", "m4", "3", "14", "m5", "abc", "m6", "1", "2", "field", "fields", "decimal", "assert", "isinstance", "field", "deserialize", "m1", "decimal", "decimal", "assert", "field", "deserialize", "m1", "decimal", "decimal", "12", "assert", "isinstance", "field", "deserialize", "m2", "decimal", "decimal", "assert", "field", "deserialize", "m2", "decimal", "decimal", "12", "355", "assert", "isinstance", "field", "deserialize", "m3", "decimal", "decimal", "assert", "field", "deserialize", "m3", "decimal", "decimal", "1", "assert", "isinstance", "field", "deserialize", "m4", "decimal", "decimal", "assert", "field", "deserialize", "m4", "as_tuple", "0", "3", "1", "4", "2", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "m5", "assert", "excinfo", "value", "args", "0", "not", "a", "valid", "number", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "m6", "assert", "excinfo", "value", "args", "0", "not", "a", "valid", "number"], "doc_len": 123}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_decimal_field_with_places", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_decimal_field_with_places", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_decimal_field_with_places(self):\n        m1 = 12\n        m2 = '12.355'\n        m3 = decimal.Decimal(1)\n        m4 = 'abc'\n        m5 = [1, 2]\n\n        field = fields.Decimal(1)\n        assert isinstance(field.deserialize(m1), decimal.Decimal)\n        assert field.deserialize(m1) == decimal.Decimal(12)\n        assert isinstance(field.deserialize(m2), decimal.Decimal)\n        assert field.deserialize(m2) == decimal.Decimal('12.4')\n        assert isinstance(field.deserialize(m3), decimal.Decimal)\n        assert field.deserialize(m3) == decimal.Decimal(1)\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize(m4)\n        assert excinfo.value.args[0] == 'Not a valid number.'\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize(m5)\n        assert excinfo.value.args[0] == 'Not a valid number.'\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_decimal_field_with_places", "self", "m1", "12", "m2", "12", "355", "m3", "decimal", "decimal", "1", "m4", "abc", "m5", "1", "2", "field", "fields", "decimal", "1", "assert", "isinstance", "field", "deserialize", "m1", "decimal", "decimal", "assert", "field", "deserialize", "m1", "decimal", "decimal", "12", "assert", "isinstance", "field", "deserialize", "m2", "decimal", "decimal", "assert", "field", "deserialize", "m2", "decimal", "decimal", "12", "4", "assert", "isinstance", "field", "deserialize", "m3", "decimal", "decimal", "assert", "field", "deserialize", "m3", "decimal", "decimal", "1", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "m4", "assert", "excinfo", "value", "args", "0", "not", "a", "valid", "number", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "m5", "assert", "excinfo", "value", "args", "0", "not", "a", "valid", "number"], "doc_len": 104}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_decimal_field_with_places_and_rounding", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_decimal_field_with_places_and_rounding", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_decimal_field_with_places_and_rounding(self):\n        m1 = 12\n        m2 = '12.355'\n        m3 = decimal.Decimal(1)\n        m4 = 'abc'\n        m5 = [1, 2]\n\n        field = fields.Decimal(1, decimal.ROUND_DOWN)\n        assert isinstance(field.deserialize(m1), decimal.Decimal)\n        assert field.deserialize(m1) == decimal.Decimal(12)\n        assert isinstance(field.deserialize(m2), decimal.Decimal)\n        assert field.deserialize(m2) == decimal.Decimal('12.3')\n        assert isinstance(field.deserialize(m3), decimal.Decimal)\n        assert field.deserialize(m3) == decimal.Decimal(1)\n        with pytest.raises(ValidationError):\n            field.deserialize(m4)\n        with pytest.raises(ValidationError):\n            field.deserialize(m5)\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_decimal_field_with_places_and_rounding", "self", "m1", "12", "m2", "12", "355", "m3", "decimal", "decimal", "1", "m4", "abc", "m5", "1", "2", "field", "fields", "decimal", "1", "decimal", "round_down", "assert", "isinstance", "field", "deserialize", "m1", "decimal", "decimal", "assert", "field", "deserialize", "m1", "decimal", "decimal", "12", "assert", "isinstance", "field", "deserialize", "m2", "decimal", "decimal", "assert", "field", "deserialize", "m2", "decimal", "decimal", "12", "3", "assert", "isinstance", "field", "deserialize", "m3", "decimal", "decimal", "assert", "field", "deserialize", "m3", "decimal", "decimal", "1", "with", "pytest", "raises", "validationerror", "field", "deserialize", "m4", "with", "pytest", "raises", "validationerror", "field", "deserialize", "m5"], "doc_len": 84}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_decimal_field_deserialization_string", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_decimal_field_deserialization_string", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_decimal_field_deserialization_string(self):\n        m1 = 12\n        m2 = '12.355'\n        m3 = decimal.Decimal(1)\n        m4 = 'abc'\n        m5 = [1, 2]\n\n        field = fields.Decimal(as_string=True)\n        assert isinstance(field.deserialize(m1), decimal.Decimal)\n        assert field.deserialize(m1) == decimal.Decimal(12)\n        assert isinstance(field.deserialize(m2), decimal.Decimal)\n        assert field.deserialize(m2) == decimal.Decimal('12.355')\n        assert isinstance(field.deserialize(m3), decimal.Decimal)\n        assert field.deserialize(m3) == decimal.Decimal(1)\n        with pytest.raises(ValidationError):\n            field.deserialize(m4)\n        with pytest.raises(ValidationError):\n            field.deserialize(m5)\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_decimal_field_deserialization_string", "self", "m1", "12", "m2", "12", "355", "m3", "decimal", "decimal", "1", "m4", "abc", "m5", "1", "2", "field", "fields", "decimal", "as_string", "true", "assert", "isinstance", "field", "deserialize", "m1", "decimal", "decimal", "assert", "field", "deserialize", "m1", "decimal", "decimal", "12", "assert", "isinstance", "field", "deserialize", "m2", "decimal", "decimal", "assert", "field", "deserialize", "m2", "decimal", "decimal", "12", "355", "assert", "isinstance", "field", "deserialize", "m3", "decimal", "decimal", "assert", "field", "deserialize", "m3", "decimal", "decimal", "1", "with", "pytest", "raises", "validationerror", "field", "deserialize", "m4", "with", "pytest", "raises", "validationerror", "field", "deserialize", "m5"], "doc_len": 83}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_decimal_field_special_values", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_decimal_field_special_values", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_decimal_field_special_values(self):\n        m1 = '-NaN'\n        m2 = 'NaN'\n        m3 = '-sNaN'\n        m4 = 'sNaN'\n        m5 = '-Infinity'\n        m6 = 'Infinity'\n        m7 = '-0'\n\n        field = fields.Decimal(places=2, allow_nan=True)\n\n        m1d = field.deserialize(m1)\n        assert isinstance(m1d, decimal.Decimal)\n        assert m1d.is_qnan() and not m1d.is_signed()\n\n        m2d = field.deserialize(m2)\n        assert isinstance(m2d, decimal.Decimal)\n        assert m2d.is_qnan() and not m2d.is_signed()\n\n        m3d = field.deserialize(m3)\n        assert isinstance(m3d, decimal.Decimal)\n        assert m3d.is_qnan() and not m3d.is_signed()\n\n        m4d = field.deserialize(m4)\n        assert isinstance(m4d, decimal.Decimal)\n        assert m4d.is_qnan() and not m4d.is_signed()\n\n        m5d = field.deserialize(m5)\n        assert isinstance(m5d, decimal.Decimal)\n        assert m5d.is_infinite() and m5d.is_signed()\n\n        m6d = field.deserialize(m6)\n        assert isinstance(m6d, decimal.Decimal)\n        assert m6d.is_infinite() and not m6d.is_signed()\n\n        m7d = field.deserialize(m7)\n        assert isinstance(m7d, decimal.Decimal)\n        assert m7d.is_zero() and m7d.is_signed()\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_decimal_field_special_values", "self", "m1", "nan", "m2", "nan", "m3", "snan", "m4", "snan", "m5", "infinity", "m6", "infinity", "m7", "0", "field", "fields", "decimal", "places", "2", "allow_nan", "true", "m1d", "field", "deserialize", "m1", "assert", "isinstance", "m1d", "decimal", "decimal", "assert", "m1d", "is_qnan", "and", "not", "m1d", "is_signed", "m2d", "field", "deserialize", "m2", "assert", "isinstance", "m2d", "decimal", "decimal", "assert", "m2d", "is_qnan", "and", "not", "m2d", "is_signed", "m3d", "field", "deserialize", "m3", "assert", "isinstance", "m3d", "decimal", "decimal", "assert", "m3d", "is_qnan", "and", "not", "m3d", "is_signed", "m4d", "field", "deserialize", "m4", "assert", "isinstance", "m4d", "decimal", "decimal", "assert", "m4d", "is_qnan", "and", "not", "m4d", "is_signed", "m5d", "field", "deserialize", "m5", "assert", "isinstance", "m5d", "decimal", "decimal", "assert", "m5d", "is_infinite", "and", "m5d", "is_signed", "m6d", "field", "deserialize", "m6", "assert", "isinstance", "m6d", "decimal", "decimal", "assert", "m6d", "is_infinite", "and", "not", "m6d", "is_signed", "m7d", "field", "deserialize", "m7", "assert", "isinstance", "m7d", "decimal", "decimal", "assert", "m7d", "is_zero", "and", "m7d", "is_signed"], "doc_len": 138}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_decimal_field_special_values_not_permitted", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_decimal_field_special_values_not_permitted", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_decimal_field_special_values_not_permitted(self):\n        m1 = '-NaN'\n        m2 = 'NaN'\n        m3 = '-sNaN'\n        m4 = 'sNaN'\n        m5 = '-Infinity'\n        m6 = 'Infinity'\n        m7 = '-0'\n\n        field = fields.Decimal(places=2)\n\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize(m1)\n        assert str(excinfo.value.args[0]) == 'Special numeric values are not permitted.'\n        with pytest.raises(ValidationError):\n            field.deserialize(m2)\n        with pytest.raises(ValidationError):\n            field.deserialize(m3)\n        with pytest.raises(ValidationError):\n            field.deserialize(m4)\n        with pytest.raises(ValidationError):\n            field.deserialize(m5)\n        with pytest.raises(ValidationError):\n            field.deserialize(m6)\n\n        m7d = field.deserialize(m7)\n        assert isinstance(m7d, decimal.Decimal)\n        assert m7d.is_zero() and m7d.is_signed()\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_decimal_field_special_values_not_permitted", "self", "m1", "nan", "m2", "nan", "m3", "snan", "m4", "snan", "m5", "infinity", "m6", "infinity", "m7", "0", "field", "fields", "decimal", "places", "2", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "m1", "assert", "str", "excinfo", "value", "args", "0", "special", "numeric", "values", "are", "not", "permitted", "with", "pytest", "raises", "validationerror", "field", "deserialize", "m2", "with", "pytest", "raises", "validationerror", "field", "deserialize", "m3", "with", "pytest", "raises", "validationerror", "field", "deserialize", "m4", "with", "pytest", "raises", "validationerror", "field", "deserialize", "m5", "with", "pytest", "raises", "validationerror", "field", "deserialize", "m6", "m7d", "field", "deserialize", "m7", "assert", "isinstance", "m7d", "decimal", "decimal", "assert", "m7d", "is_zero", "and", "m7d", "is_signed"], "doc_len": 97}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_string_field_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_string_field_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_string_field_deserialization(self):\n        field = fields.String()\n        assert field.deserialize('foo') == 'foo'\n        assert field.deserialize(b'foo') == 'foo'\n\n        # https://github.com/marshmallow-code/marshmallow/issues/231\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize(42)\n        assert excinfo.value.args[0] == 'Not a valid string.'\n\n        with pytest.raises(ValidationError):\n            field.deserialize({})\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_string_field_deserialization", "self", "field", "fields", "string", "assert", "field", "deserialize", "foo", "foo", "assert", "field", "deserialize", "b", "foo", "foo", "https", "github", "com", "marshmallow", "code", "marshmallow", "issues", "231", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "42", "assert", "excinfo", "value", "args", "0", "not", "a", "valid", "string", "with", "pytest", "raises", "validationerror", "field", "deserialize"], "doc_len": 53}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_boolean_field_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_boolean_field_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_boolean_field_deserialization(self):\n        field = fields.Boolean()\n        assert field.deserialize(True) is True\n        assert field.deserialize(False) is False\n        assert field.deserialize('True') is True\n        assert field.deserialize('False') is False\n        assert field.deserialize('true') is True\n        assert field.deserialize('false') is False\n        assert field.deserialize('1') is True\n        assert field.deserialize('0') is False\n        assert field.deserialize(1) is True\n        assert field.deserialize(0) is False\n\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize({})\n        assert excinfo.value.args[0] == 'Not a valid boolean.'\n\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize(42)\n\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize('invalid-string')\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_boolean_field_deserialization", "self", "field", "fields", "boolean", "assert", "field", "deserialize", "true", "is", "true", "assert", "field", "deserialize", "false", "is", "false", "assert", "field", "deserialize", "true", "is", "true", "assert", "field", "deserialize", "false", "is", "false", "assert", "field", "deserialize", "true", "is", "true", "assert", "field", "deserialize", "false", "is", "false", "assert", "field", "deserialize", "1", "is", "true", "assert", "field", "deserialize", "0", "is", "false", "assert", "field", "deserialize", "1", "is", "true", "assert", "field", "deserialize", "0", "is", "false", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "assert", "excinfo", "value", "args", "0", "not", "a", "valid", "boolean", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "42", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "invalid", "string"], "doc_len": 106}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_boolean_field_deserialization_with_custom_truthy_values", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_boolean_field_deserialization_with_custom_truthy_values", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_boolean_field_deserialization_with_custom_truthy_values(self):\n        class MyBoolean(fields.Boolean):\n            truthy = set(['yep'])\n        field = MyBoolean()\n        assert field.deserialize('yep') is True\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_boolean_field_deserialization_with_custom_truthy_values", "self", "class", "myboolean", "fields", "boolean", "truthy", "set", "yep", "field", "myboolean", "assert", "field", "deserialize", "yep", "is", "true"], "doc_len": 22}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_boolean_field_deserialization_with_custom_truthy_values_invalid", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_boolean_field_deserialization_with_custom_truthy_values_invalid", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_boolean_field_deserialization_with_custom_truthy_values_invalid(\n            self, in_val):\n        class MyBoolean(fields.Boolean):\n            truthy = set(['yep'])\n        field = MyBoolean()\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize(in_val)\n        expected_msg = 'Not a valid boolean.'\n        assert str(excinfo.value.args[0]) == expected_msg\n        field2 = MyBoolean(error_messages={'invalid': 'bad input'})\n        with pytest.raises(ValidationError) as excinfo:\n            field2.deserialize(in_val)\n        assert str(excinfo.value.args[0]) == 'bad input'\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_boolean_field_deserialization_with_custom_truthy_values_invalid", "self", "in_val", "class", "myboolean", "fields", "boolean", "truthy", "set", "yep", "field", "myboolean", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "in_val", "expected_msg", "not", "a", "valid", "boolean", "assert", "str", "excinfo", "value", "args", "0", "expected_msg", "field2", "myboolean", "error_messages", "invalid", "bad", "input", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field2", "deserialize", "in_val", "assert", "str", "excinfo", "value", "args", "0", "bad", "input"], "doc_len": 61}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_invalid_datetime_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_invalid_datetime_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_invalid_datetime_deserialization(self, in_value):\n        field = fields.DateTime()\n        msg = 'Not a valid datetime.'.format(in_value)\n        with pytest.raises(ValidationError, match=msg):\n            field.deserialize(in_value)\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_invalid_datetime_deserialization", "self", "in_value", "field", "fields", "datetime", "msg", "not", "a", "valid", "datetime", "format", "in_value", "with", "pytest", "raises", "validationerror", "match", "msg", "field", "deserialize", "in_value"], "doc_len": 27}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_datetime_passed_year_is_invalid", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_datetime_passed_year_is_invalid", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_datetime_passed_year_is_invalid(self):\n        field = fields.DateTime()\n        with pytest.raises(ValidationError):\n            field.deserialize('1916')\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_datetime_passed_year_is_invalid", "self", "field", "fields", "datetime", "with", "pytest", "raises", "validationerror", "field", "deserialize", "1916"], "doc_len": 17}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_custom_date_format_datetime_field_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_custom_date_format_datetime_field_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_custom_date_format_datetime_field_deserialization(self):\n\n        dtime = dt.datetime.now()\n        datestring = dtime.strftime('%H:%M:%S.%f %Y-%m-%d')\n\n        field = fields.DateTime(format='%d-%m-%Y %H:%M:%S')\n        #deserialization should fail when datestring is not of same format\n        with pytest.raises(ValidationError, match='Not a valid datetime.'):\n            field.deserialize(datestring)\n        field = fields.DateTime(format='%H:%M:%S.%f %Y-%m-%d')\n        assert_datetime_equal(field.deserialize(datestring), dtime)\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_custom_date_format_datetime_field_deserialization", "self", "dtime", "dt", "datetime", "now", "datestring", "dtime", "strftime", "h", "m", "s", "f", "y", "m", "d", "field", "fields", "datetime", "format", "d", "m", "y", "h", "m", "s", "deserialization", "should", "fail", "when", "datestring", "is", "not", "of", "same", "format", "with", "pytest", "raises", "validationerror", "match", "not", "a", "valid", "datetime", "field", "deserialize", "datestring", "field", "fields", "datetime", "format", "h", "m", "s", "f", "y", "m", "d", "assert_datetime_equal", "field", "deserialize", "datestring", "dtime"], "doc_len": 69}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_rfc_datetime_field_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_rfc_datetime_field_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_rfc_datetime_field_deserialization(self, fmt):\n        dtime = dt.datetime.now().replace(microsecond=0)\n        datestring = utils.rfcformat(dtime)\n        field = fields.DateTime(format=fmt)\n        assert_datetime_equal(field.deserialize(datestring), dtime)\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_rfc_datetime_field_deserialization", "self", "fmt", "dtime", "dt", "datetime", "now", "replace", "microsecond", "0", "datestring", "utils", "rfcformat", "dtime", "field", "fields", "datetime", "format", "fmt", "assert_datetime_equal", "field", "deserialize", "datestring", "dtime"], "doc_len": 29}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_iso_datetime_field_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_iso_datetime_field_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_iso_datetime_field_deserialization(self, fmt):\n        dtime = dt.datetime.now()\n        datestring = dtime.isoformat()\n        field = fields.DateTime(format=fmt)\n        assert_datetime_equal(field.deserialize(datestring), dtime)\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_iso_datetime_field_deserialization", "self", "fmt", "dtime", "dt", "datetime", "now", "datestring", "dtime", "isoformat", "field", "fields", "datetime", "format", "fmt", "assert_datetime_equal", "field", "deserialize", "datestring", "dtime"], "doc_len": 25}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_localdatetime_field_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_localdatetime_field_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_localdatetime_field_deserialization(self):\n        dtime = dt.datetime.now()\n        localized_dtime = central.localize(dtime)\n        field = fields.DateTime(format='iso')\n        result = field.deserialize(localized_dtime.isoformat())\n        assert_datetime_equal(result, dtime)\n        # If dateutil is used, the datetime will not be naive\n        if utils.dateutil_available:\n            assert result.tzinfo is not None\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_localdatetime_field_deserialization", "self", "dtime", "dt", "datetime", "now", "localized_dtime", "central", "localize", "dtime", "field", "fields", "datetime", "format", "iso", "result", "field", "deserialize", "localized_dtime", "isoformat", "assert_datetime_equal", "result", "dtime", "if", "dateutil", "is", "used", "the", "datetime", "will", "not", "be", "naive", "if", "utils", "dateutil_available", "assert", "result", "tzinfo", "is", "not", "none"], "doc_len": 47}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_time_field_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_time_field_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_time_field_deserialization(self):\n        field = fields.Time()\n        t = dt.time(1, 23, 45)\n        t_formatted = t.isoformat()\n        result = field.deserialize(t_formatted)\n        assert isinstance(result, dt.time)\n        assert_time_equal(result, t)\n        # With microseconds\n        t2 = dt.time(1, 23, 45, 6789)\n        t2_formatted = t2.isoformat()\n        result2 = field.deserialize(t2_formatted)\n        assert_time_equal(result2, t2)\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_time_field_deserialization", "self", "field", "fields", "time", "t", "dt", "time", "1", "23", "45", "t_formatted", "t", "isoformat", "result", "field", "deserialize", "t_formatted", "assert", "isinstance", "result", "dt", "time", "assert_time_equal", "result", "t", "with", "microseconds", "t2", "dt", "time", "1", "23", "45", "6789", "t2_formatted", "t2", "isoformat", "result2", "field", "deserialize", "t2_formatted", "assert_time_equal", "result2", "t2"], "doc_len": 50}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_invalid_time_field_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_invalid_time_field_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_invalid_time_field_deserialization(self, in_data):\n        field = fields.Time()\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize(in_data)\n        assert excinfo.value.args[0] == 'Not a valid time.'\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_invalid_time_field_deserialization", "self", "in_data", "field", "fields", "time", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "in_data", "assert", "excinfo", "value", "args", "0", "not", "a", "valid", "time"], "doc_len": 29}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_timedelta_field_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_timedelta_field_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_timedelta_field_deserialization(self):\n        field = fields.TimeDelta()\n        result = field.deserialize('42')\n        assert isinstance(result, dt.timedelta)\n        assert result.days == 0\n        assert result.seconds == 42\n        assert result.microseconds == 0\n\n        field = fields.TimeDelta(fields.TimeDelta.SECONDS)\n        result = field.deserialize(100000)\n        assert result.days == 1\n        assert result.seconds == 13600\n        assert result.microseconds == 0\n\n        field = fields.TimeDelta(fields.TimeDelta.DAYS)\n        result = field.deserialize('-42')\n        assert isinstance(result, dt.timedelta)\n        assert result.days == -42\n        assert result.seconds == 0\n        assert result.microseconds == 0\n\n        field = fields.TimeDelta(fields.TimeDelta.MICROSECONDS)\n        result = field.deserialize(10 ** 6 + 1)\n        assert isinstance(result, dt.timedelta)\n        assert result.days == 0\n        assert result.seconds == 1\n        assert result.microseconds == 1\n\n        field = fields.TimeDelta(fields.TimeDelta.MICROSECONDS)\n        result = field.deserialize(86400 * 10 ** 6 + 1)\n        assert isinstance(result, dt.timedelta)\n        assert result.days == 1\n        assert result.seconds == 0\n        assert result.microseconds == 1\n\n        field = fields.TimeDelta()\n        result = field.deserialize(12.9)\n        assert isinstance(result, dt.timedelta)\n        assert result.days == 0\n        assert result.seconds == 12\n        assert result.microseconds == 0\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_timedelta_field_deserialization", "self", "field", "fields", "timedelta", "result", "field", "deserialize", "42", "assert", "isinstance", "result", "dt", "timedelta", "assert", "result", "days", "0", "assert", "result", "seconds", "42", "assert", "result", "microseconds", "0", "field", "fields", "timedelta", "fields", "timedelta", "seconds", "result", "field", "deserialize", "100000", "assert", "result", "days", "1", "assert", "result", "seconds", "13600", "assert", "result", "microseconds", "0", "field", "fields", "timedelta", "fields", "timedelta", "days", "result", "field", "deserialize", "42", "assert", "isinstance", "result", "dt", "timedelta", "assert", "result", "days", "42", "assert", "result", "seconds", "0", "assert", "result", "microseconds", "0", "field", "fields", "timedelta", "fields", "timedelta", "microseconds", "result", "field", "deserialize", "10", "6", "1", "assert", "isinstance", "result", "dt", "timedelta", "assert", "result", "days", "0", "assert", "result", "seconds", "1", "assert", "result", "microseconds", "1", "field", "fields", "timedelta", "fields", "timedelta", "microseconds", "result", "field", "deserialize", "86400", "10", "6", "1", "assert", "isinstance", "result", "dt", "timedelta", "assert", "result", "days", "1", "assert", "result", "seconds", "0", "assert", "result", "microseconds", "1", "field", "fields", "timedelta", "result", "field", "deserialize", "12", "9", "assert", "isinstance", "result", "dt", "timedelta", "assert", "result", "days", "0", "assert", "result", "seconds", "12", "assert", "result", "microseconds", "0"], "doc_len": 164}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_invalid_timedelta_field_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_invalid_timedelta_field_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_invalid_timedelta_field_deserialization(self, in_value):\n        field = fields.TimeDelta(fields.TimeDelta.DAYS)\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize(in_value)\n        assert excinfo.value.args[0] == 'Not a valid period of time.'\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_invalid_timedelta_field_deserialization", "self", "in_value", "field", "fields", "timedelta", "fields", "timedelta", "days", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "in_value", "assert", "excinfo", "value", "args", "0", "not", "a", "valid", "period", "of", "time"], "doc_len": 34}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_date_field_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_date_field_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_date_field_deserialization(self):\n        field = fields.Date()\n        d = dt.date(2014, 8, 21)\n        iso_date = d.isoformat()\n        result = field.deserialize(iso_date)\n        assert isinstance(result, dt.date)\n        assert_date_equal(result, d)\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_date_field_deserialization", "self", "field", "fields", "date", "d", "dt", "date", "2014", "8", "21", "iso_date", "d", "isoformat", "result", "field", "deserialize", "iso_date", "assert", "isinstance", "result", "dt", "date", "assert_date_equal", "result", "d"], "doc_len": 31}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_invalid_date_field_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_invalid_date_field_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_invalid_date_field_deserialization(self, in_value):\n        field = fields.Date()\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize(in_value)\n        msg = 'Not a valid date.'\n        assert excinfo.value.args[0] == msg\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_invalid_date_field_deserialization", "self", "in_value", "field", "fields", "date", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "in_value", "msg", "not", "a", "valid", "date", "assert", "excinfo", "value", "args", "0", "msg"], "doc_len": 31}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_dict_field_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_dict_field_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_dict_field_deserialization(self):\n        field = fields.Dict()\n        assert field.deserialize({\"foo\": \"bar\"}) == {\"foo\": \"bar\"}\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize('baddict')\n        assert excinfo.value.args[0] == 'Not a valid mapping type.'\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_dict_field_deserialization", "self", "field", "fields", "dict", "assert", "field", "deserialize", "foo", "bar", "foo", "bar", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "baddict", "assert", "excinfo", "value", "args", "0", "not", "a", "valid", "mapping", "type"], "doc_len": 36}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_url_field_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_url_field_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_url_field_deserialization(self):\n        field = fields.Url()\n        assert field.deserialize('https://duckduckgo.com') == 'https://duckduckgo.com'\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize('badurl')\n        assert excinfo.value.args[0][0] == 'Not a valid URL.'\n        # Relative URLS not allowed by default\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize('/foo/bar')\n        assert excinfo.value.args[0][0] == 'Not a valid URL.'\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_url_field_deserialization", "self", "field", "fields", "url", "assert", "field", "deserialize", "https", "duckduckgo", "com", "https", "duckduckgo", "com", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "badurl", "assert", "excinfo", "value", "args", "0", "0", "not", "a", "valid", "url", "relative", "urls", "not", "allowed", "by", "default", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "foo", "bar", "assert", "excinfo", "value", "args", "0", "0", "not", "a", "valid", "url"], "doc_len": 64}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_relative_url_field_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_relative_url_field_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_relative_url_field_deserialization(self):\n        field = fields.Url(relative=True)\n        assert field.deserialize('/foo/bar') == '/foo/bar'\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_relative_url_field_deserialization", "self", "field", "fields", "url", "relative", "true", "assert", "field", "deserialize", "foo", "bar", "foo", "bar"], "doc_len": 19}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_url_field_schemes_argument", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_url_field_schemes_argument", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_url_field_schemes_argument(self):\n        field = fields.URL()\n        url = 'ws://test.test'\n        with pytest.raises(ValidationError):\n            field.deserialize(url)\n        field2 = fields.URL(schemes=set(['http', 'https', 'ws']))\n        assert field2.deserialize(url) == url\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_url_field_schemes_argument", "self", "field", "fields", "url", "url", "ws", "test", "test", "with", "pytest", "raises", "validationerror", "field", "deserialize", "url", "field2", "fields", "url", "schemes", "set", "http", "https", "ws", "assert", "field2", "deserialize", "url", "url"], "doc_len": 34}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_email_field_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_email_field_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_email_field_deserialization(self):\n        field = fields.Email()\n        assert field.deserialize('foo@bar.com') == 'foo@bar.com'\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize('invalidemail')\n        assert excinfo.value.args[0][0] == 'Not a valid email address.'\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_email_field_deserialization", "self", "field", "fields", "email", "assert", "field", "deserialize", "foo", "bar", "com", "foo", "bar", "com", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "invalidemail", "assert", "excinfo", "value", "args", "0", "0", "not", "a", "valid", "email", "address"], "doc_len": 39}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_function_field_deserialization_is_noop_by_default", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_function_field_deserialization_is_noop_by_default", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_function_field_deserialization_is_noop_by_default(self):\n        field = fields.Function(lambda x: None)\n        # Default is noop\n        assert field.deserialize('foo') == 'foo'\n        assert field.deserialize(42) == 42\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_function_field_deserialization_is_noop_by_default", "self", "field", "fields", "function", "lambda", "x", "none", "default", "is", "noop", "assert", "field", "deserialize", "foo", "foo", "assert", "field", "deserialize", "42", "42"], "doc_len": 26}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_function_field_deserialization_with_callable", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_function_field_deserialization_with_callable", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_function_field_deserialization_with_callable(self):\n        field = fields.Function(lambda x: None,\n                                deserialize=lambda val: val.upper())\n        assert field.deserialize('foo') == 'FOO'\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_function_field_deserialization_with_callable", "self", "field", "fields", "function", "lambda", "x", "none", "deserialize", "lambda", "val", "val", "upper", "assert", "field", "deserialize", "foo", "foo"], "doc_len": 23}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_function_field_deserialization_with_context", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_function_field_deserialization_with_context", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_function_field_deserialization_with_context(self):\n        class Parent(Schema):\n            pass\n        field = fields.Function(\n            lambda x: None,\n            deserialize=lambda val, context: val.upper() + context['key']\n        )\n        field.parent = Parent(context={'key': 'BAR'})\n        assert field.deserialize('foo') == 'FOOBAR'\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_function_field_deserialization_with_context", "self", "class", "parent", "schema", "pass", "field", "fields", "function", "lambda", "x", "none", "deserialize", "lambda", "val", "context", "val", "upper", "context", "key", "field", "parent", "parent", "context", "key", "bar", "assert", "field", "deserialize", "foo", "foobar"], "doc_len": 36}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_uuid_field_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_uuid_field_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_uuid_field_deserialization(self):\n        field = fields.UUID()\n        uuid_str = str(uuid.uuid4())\n        result = field.deserialize(uuid_str)\n        assert isinstance(result, uuid.UUID)\n        assert str(result) == uuid_str\n\n        uuid4 = uuid.uuid4()\n        result = field.deserialize(uuid4)\n        assert isinstance(result, uuid.UUID)\n        assert result == uuid4\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_uuid_field_deserialization", "self", "field", "fields", "uuid", "uuid_str", "str", "uuid", "uuid4", "result", "field", "deserialize", "uuid_str", "assert", "isinstance", "result", "uuid", "uuid", "assert", "str", "result", "uuid_str", "uuid4", "uuid", "uuid4", "result", "field", "deserialize", "uuid4", "assert", "isinstance", "result", "uuid", "uuid", "assert", "result", "uuid4"], "doc_len": 42}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_invalid_uuid_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_invalid_uuid_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_invalid_uuid_deserialization(self, in_value):\n        field = fields.UUID()\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize(in_value)\n\n        assert excinfo.value.args[0] == 'Not a valid UUID.'\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_invalid_uuid_deserialization", "self", "in_value", "field", "fields", "uuid", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "in_value", "assert", "excinfo", "value", "args", "0", "not", "a", "valid", "uuid"], "doc_len": 29}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_deserialization_function_must_be_callable", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_deserialization_function_must_be_callable", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_deserialization_function_must_be_callable(self):\n        with pytest.raises(ValueError):\n            fields.Function(lambda x: None,\n                            deserialize='notvalid')\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_deserialization_function_must_be_callable", "self", "with", "pytest", "raises", "valueerror", "fields", "function", "lambda", "x", "none", "deserialize", "notvalid"], "doc_len": 18}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_method_field_deserialization_is_noop_by_default", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_method_field_deserialization_is_noop_by_default", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_method_field_deserialization_is_noop_by_default(self):\n        class MiniUserSchema(Schema):\n            uppername = fields.Method('uppercase_name')\n\n            def uppercase_name(self, obj):\n                return obj.upper()\n        user = User(name='steve')\n        s = MiniUserSchema(user)\n        assert s.fields['uppername'].deserialize('steve') == 'steve'\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_method_field_deserialization_is_noop_by_default", "self", "class", "miniuserschema", "schema", "uppername", "fields", "method", "uppercase_name", "def", "uppercase_name", "self", "obj", "return", "obj", "upper", "user", "user", "name", "steve", "s", "miniuserschema", "user", "assert", "s", "fields", "uppername", "deserialize", "steve", "steve"], "doc_len": 35}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_deserialization_method", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_deserialization_method", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_deserialization_method(self):\n        class MiniUserSchema(Schema):\n            uppername = fields.Method('uppercase_name', deserialize='lowercase_name')\n\n            def uppercase_name(self, obj):\n                return obj.name.upper()\n\n            def lowercase_name(self, value):\n                return value.lower()\n\n        s = MiniUserSchema()\n        assert s.fields['uppername'].deserialize('STEVE') == 'steve'\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_deserialization_method", "self", "class", "miniuserschema", "schema", "uppername", "fields", "method", "uppercase_name", "deserialize", "lowercase_name", "def", "uppercase_name", "self", "obj", "return", "obj", "name", "upper", "def", "lowercase_name", "self", "value", "return", "value", "lower", "s", "miniuserschema", "assert", "s", "fields", "uppername", "deserialize", "steve", "steve"], "doc_len": 40}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_deserialization_method_must_be_a_method", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_deserialization_method_must_be_a_method", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_deserialization_method_must_be_a_method(self):\n        class BadSchema(Schema):\n            uppername = fields.Method('uppercase_name', deserialize='lowercase_name')\n\n        s = BadSchema()\n        with pytest.raises(ValueError):\n            s.fields['uppername'].deserialize('STEVE')\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_deserialization_method_must_be_a_method", "self", "class", "badschema", "schema", "uppername", "fields", "method", "uppercase_name", "deserialize", "lowercase_name", "s", "badschema", "with", "pytest", "raises", "valueerror", "s", "fields", "uppername", "deserialize", "steve"], "doc_len": 27}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_method_field_deserialize_only", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_method_field_deserialize_only", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_method_field_deserialize_only(self):\n        class MethodDeserializeOnly(Schema):\n            def lowercase_name(self, value):\n                return value.lower()\n\n        m = fields.Method(deserialize='lowercase_name')\n        m.parent = MethodDeserializeOnly()\n\n        assert m.deserialize('ALEC') == 'alec'\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_method_field_deserialize_only", "self", "class", "methoddeserializeonly", "schema", "def", "lowercase_name", "self", "value", "return", "value", "lower", "m", "fields", "method", "deserialize", "lowercase_name", "m", "parent", "methoddeserializeonly", "assert", "m", "deserialize", "alec", "alec"], "doc_len": 30}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_datetime_list_field_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_datetime_list_field_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_datetime_list_field_deserialization(self):\n        dtimes = dt.datetime.now(), dt.datetime.now(), dt.datetime.utcnow()\n        dstrings = [each.isoformat() for each in dtimes]\n        field = fields.List(fields.DateTime())\n        result = field.deserialize(dstrings)\n        assert all([isinstance(each, dt.datetime) for each in result])\n        for actual, expected in zip(result, dtimes):\n            assert_date_equal(actual, expected)\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_datetime_list_field_deserialization", "self", "dtimes", "dt", "datetime", "now", "dt", "datetime", "now", "dt", "datetime", "utcnow", "dstrings", "each", "isoformat", "for", "each", "in", "dtimes", "field", "fields", "list", "fields", "datetime", "result", "field", "deserialize", "dstrings", "assert", "all", "isinstance", "each", "dt", "datetime", "for", "each", "in", "result", "for", "actual", "expected", "in", "zip", "result", "dtimes", "assert_date_equal", "actual", "expected"], "doc_len": 53}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_list_field_deserialize_invalid_item", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_list_field_deserialize_invalid_item", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_list_field_deserialize_invalid_item(self):\n        field = fields.List(fields.DateTime)\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize(['badvalue'])\n        assert excinfo.value.args[0] == {0: ['Not a valid datetime.']}\n\n        field = fields.List(fields.Str())\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize(['good', 42])\n        assert excinfo.value.args[0] == {1: ['Not a valid string.']}\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_list_field_deserialize_invalid_item", "self", "field", "fields", "list", "fields", "datetime", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "badvalue", "assert", "excinfo", "value", "args", "0", "0", "not", "a", "valid", "datetime", "field", "fields", "list", "fields", "str", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "good", "42", "assert", "excinfo", "value", "args", "0", "1", "not", "a", "valid", "string"], "doc_len": 56}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_list_field_deserialize_multiple_invalid_items", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_list_field_deserialize_multiple_invalid_items", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_list_field_deserialize_multiple_invalid_items(self):\n        field = fields.List(\n            fields.Int(\n                validate=validate.Range(10, 20, error='Value {input} not in range')\n            )\n        )\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize([10, 5, 25])\n        assert len(excinfo.value.args[0]) == 2\n        assert excinfo.value.args[0][1] == ['Value 5 not in range']\n        assert excinfo.value.args[0][2] == ['Value 25 not in range']\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_list_field_deserialize_multiple_invalid_items", "self", "field", "fields", "list", "fields", "int", "validate", "validate", "range", "10", "20", "error", "value", "input", "not", "in", "range", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "10", "5", "25", "assert", "len", "excinfo", "value", "args", "0", "2", "assert", "excinfo", "value", "args", "0", "1", "value", "5", "not", "in", "range", "assert", "excinfo", "value", "args", "0", "2", "value", "25", "not", "in", "range"], "doc_len": 63}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_list_field_deserialize_value_that_is_not_a_list", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_list_field_deserialize_value_that_is_not_a_list", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_list_field_deserialize_value_that_is_not_a_list(self, value):\n        field = fields.List(fields.Str())\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize(value)\n        assert excinfo.value.args[0] == 'Not a valid list.'\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_list_field_deserialize_value_that_is_not_a_list", "self", "value", "field", "fields", "list", "fields", "str", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "value", "assert", "excinfo", "value", "args", "0", "not", "a", "valid", "list"], "doc_len": 31}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_constant_field_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_constant_field_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_constant_field_deserialization(self):\n        field = fields.Constant('something')\n        assert field.deserialize('whatever') == 'something'\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_constant_field_deserialization", "self", "field", "fields", "constant", "something", "assert", "field", "deserialize", "whatever", "something"], "doc_len": 16}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_constant_is_always_included_in_deserialized_data", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_constant_is_always_included_in_deserialized_data", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_constant_is_always_included_in_deserialized_data(self):\n\n        class MySchema(Schema):\n            foo = fields.Constant(42)\n\n        sch = MySchema()\n        assert sch.load({'bar': 24}).data['foo'] == 42\n        assert sch.load({'foo': 24}).data['foo'] == 42\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_constant_is_always_included_in_deserialized_data", "self", "class", "myschema", "schema", "foo", "fields", "constant", "42", "sch", "myschema", "assert", "sch", "load", "bar", "24", "data", "foo", "42", "assert", "sch", "load", "foo", "24", "data", "foo", "42"], "doc_len": 32}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_field_deserialization_with_user_validator_function", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_field_deserialization_with_user_validator_function", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_field_deserialization_with_user_validator_function(self):\n        field = fields.String(validate=lambda s: s.lower() == 'valid')\n        assert field.deserialize('Valid') == 'Valid'\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize('invalid')\n        assert excinfo.value.args[0][0] == 'Invalid value.'\n        assert type(excinfo.value) == ValidationError\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_field_deserialization_with_user_validator_function", "self", "field", "fields", "string", "validate", "lambda", "s", "s", "lower", "valid", "assert", "field", "deserialize", "valid", "valid", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "invalid", "assert", "excinfo", "value", "args", "0", "0", "invalid", "value", "assert", "type", "excinfo", "value", "validationerror"], "doc_len": 43}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_field_deserialization_with_user_validator_class_that_returns_bool", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_field_deserialization_with_user_validator_class_that_returns_bool", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_field_deserialization_with_user_validator_class_that_returns_bool(self):\n        class MyValidator(object):\n            def __call__(self, val):\n                if val == 'valid':\n                    return True\n                return False\n\n        field = fields.Field(validate=MyValidator())\n        assert field.deserialize('valid') == 'valid'\n        with pytest.raises(ValidationError, match='Invalid value.'):\n            field.deserialize('invalid')\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_field_deserialization_with_user_validator_class_that_returns_bool", "self", "class", "myvalidator", "object", "def", "__call__", "self", "val", "if", "val", "valid", "return", "true", "return", "false", "field", "fields", "field", "validate", "myvalidator", "assert", "field", "deserialize", "valid", "valid", "with", "pytest", "raises", "validationerror", "match", "invalid", "value", "field", "deserialize", "invalid"], "doc_len": 41}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_field_deserialization_with_user_validator_that_raises_error_with_list", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_field_deserialization_with_user_validator_that_raises_error_with_list", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_field_deserialization_with_user_validator_that_raises_error_with_list(self):\n        def validator(val):\n            raise ValidationError(['err1', 'err2'])\n\n        class MySchema(Schema):\n            foo = fields.Field(validate=validator)\n\n        errors = MySchema().validate({'foo': 42})\n        assert errors['foo'] == ['err1', 'err2']\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_field_deserialization_with_user_validator_that_raises_error_with_list", "self", "def", "validator", "val", "raise", "validationerror", "err1", "err2", "class", "myschema", "schema", "foo", "fields", "field", "validate", "validator", "errors", "myschema", "validate", "foo", "42", "assert", "errors", "foo", "err1", "err2"], "doc_len": 32}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_validator_must_return_false_to_raise_error", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_validator_must_return_false_to_raise_error", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_validator_must_return_false_to_raise_error(self):\n        # validator returns None, so anything validates\n        field = fields.String(validate=lambda s: None)\n        assert field.deserialize('Valid') == 'Valid'\n        # validator returns False, so nothing validates\n        field2 = fields.String(validate=lambda s: False)\n        with pytest.raises(ValidationError):\n            field2.deserialize('invalid')\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_validator_must_return_false_to_raise_error", "self", "validator", "returns", "none", "so", "anything", "validates", "field", "fields", "string", "validate", "lambda", "s", "none", "assert", "field", "deserialize", "valid", "valid", "validator", "returns", "false", "so", "nothing", "validates", "field2", "fields", "string", "validate", "lambda", "s", "false", "with", "pytest", "raises", "validationerror", "field2", "deserialize", "invalid"], "doc_len": 45}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_field_deserialization_with_validator_with_nonascii_input", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_field_deserialization_with_validator_with_nonascii_input", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_field_deserialization_with_validator_with_nonascii_input(self):\n        field = fields.String(validate=lambda s: False)\n        with pytest.raises(ValidationError) as excinfo:\n            field.deserialize(u'привет')\n        assert type(excinfo.value) == ValidationError\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_field_deserialization_with_validator_with_nonascii_input", "self", "field", "fields", "string", "validate", "lambda", "s", "false", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "u", "assert", "type", "excinfo", "value", "validationerror"], "doc_len": 28}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_field_deserialization_with_user_validators", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_field_deserialization_with_user_validators", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_field_deserialization_with_user_validators(self):\n        validators_gen = (func for func in (lambda s: s.lower() == 'valid',\n                                            lambda s: s.lower()[::-1] == 'dilav'))\n\n        m_colletion_type = [\n            fields.String(validate=[lambda s: s.lower() == 'valid',\n                lambda s: s.lower()[::-1] == 'dilav']),\n            fields.String(validate=(lambda s: s.lower() == 'valid',\n                lambda s: s.lower()[::-1] == 'dilav')),\n            fields.String(validate=validators_gen)\n        ]\n\n        for field in m_colletion_type:\n            assert field.deserialize('Valid') == 'Valid'\n            with pytest.raises(ValidationError, match='Invalid value.'):\n                field.deserialize('invalid')\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_field_deserialization_with_user_validators", "self", "validators_gen", "func", "for", "func", "in", "lambda", "s", "s", "lower", "valid", "lambda", "s", "s", "lower", "1", "dilav", "m_colletion_type", "fields", "string", "validate", "lambda", "s", "s", "lower", "valid", "lambda", "s", "s", "lower", "1", "dilav", "fields", "string", "validate", "lambda", "s", "s", "lower", "valid", "lambda", "s", "s", "lower", "1", "dilav", "fields", "string", "validate", "validators_gen", "for", "field", "in", "m_colletion_type", "assert", "field", "deserialize", "valid", "valid", "with", "pytest", "raises", "validationerror", "match", "invalid", "value", "field", "deserialize", "invalid"], "doc_len": 75}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_field_deserialization_with_custom_error_message", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_field_deserialization_with_custom_error_message", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_field_deserialization_with_custom_error_message(self):\n        field = fields.String(validate=lambda s: s.lower() == 'valid',\n                error_messages={'validator_failed': 'Bad value.'})\n        with pytest.raises(ValidationError, match='Bad value.'):\n            field.deserialize('invalid')\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_field_deserialization_with_custom_error_message", "self", "field", "fields", "string", "validate", "lambda", "s", "s", "lower", "valid", "error_messages", "validator_failed", "bad", "value", "with", "pytest", "raises", "validationerror", "match", "bad", "value", "field", "deserialize", "invalid"], "doc_len": 30}
{"doc_id": "tests/test_deserialization.py::TestFieldDeserialization.test_field_deserialization_with_non_utf8_value", "file_path": "tests/test_deserialization.py", "class_name": "TestFieldDeserialization", "func_name": "test_field_deserialization_with_non_utf8_value", "text": "文件路径: tests/test_deserialization.py, 类名: TestFieldDeserialization\n    def test_field_deserialization_with_non_utf8_value(self):\n        non_utf8_char = '\\xc8'\n        field = fields.String()\n        # This exception only happens in Python version <= 2.7\n        if isinstance(non_utf8_char, bytes):\n            with pytest.raises(ValidationError) as excinfo:\n                field.deserialize(non_utf8_char)\n            assert excinfo.value.args[0] == 'Not a valid utf-8 string.'\n", "tokens": ["tests", "test_deserialization", "py", "testfielddeserialization", "def", "test_field_deserialization_with_non_utf8_value", "self", "non_utf8_char", "xc8", "field", "fields", "string", "this", "exception", "only", "happens", "in", "python", "version", "2", "7", "if", "isinstance", "non_utf8_char", "bytes", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "deserialize", "non_utf8_char", "assert", "excinfo", "value", "args", "0", "not", "a", "valid", "utf", "8", "string"], "doc_len": 45}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_deserialize_to_dict", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_deserialize_to_dict", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_deserialize_to_dict(self):\n        user_dict = {'name': 'Monty', 'age': '42.3'}\n        result, errors = SimpleUserSchema().load(user_dict)\n        assert result['name'] == 'Monty'\n        assert_almost_equal(result['age'], 42.3)\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_deserialize_to_dict", "self", "user_dict", "name", "monty", "age", "42", "3", "result", "errors", "simpleuserschema", "load", "user_dict", "assert", "result", "name", "monty", "assert_almost_equal", "result", "age", "42", "3"], "doc_len": 27}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_deserialize_with_missing_values", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_deserialize_with_missing_values", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_deserialize_with_missing_values(self):\n        user_dict = {'name': 'Monty'}\n        result, errs = SimpleUserSchema().load(user_dict)\n        # 'age' is not included in result\n        assert result == {'name': 'Monty'}\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_deserialize_with_missing_values", "self", "user_dict", "name", "monty", "result", "errs", "simpleuserschema", "load", "user_dict", "age", "is", "not", "included", "in", "result", "assert", "result", "name", "monty"], "doc_len": 25}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_deserialize_many", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_deserialize_many", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_deserialize_many(self):\n        users_data = [\n            {'name': 'Mick', 'age': '914'},\n            {'name': 'Keith', 'age': '8442'}\n        ]\n        result, errors = SimpleUserSchema(many=True).load(users_data)\n        assert isinstance(result, list)\n        user = result[0]\n        assert user['age'] == int(users_data[0]['age'])\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_deserialize_many", "self", "users_data", "name", "mick", "age", "914", "name", "keith", "age", "8442", "result", "errors", "simpleuserschema", "many", "true", "load", "users_data", "assert", "isinstance", "result", "list", "user", "result", "0", "assert", "user", "age", "int", "users_data", "0", "age"], "doc_len": 37}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_exclude", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_exclude", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_exclude(self):\n        schema = SimpleUserSchema(exclude=('age', ))\n        result = schema.load({'name': 'Monty', 'age': 42})\n        assert 'name' in result.data\n        assert 'age' not in result.data\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_exclude", "self", "schema", "simpleuserschema", "exclude", "age", "result", "schema", "load", "name", "monty", "age", "42", "assert", "name", "in", "result", "data", "assert", "age", "not", "in", "result", "data"], "doc_len": 29}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_nested_single_deserialization_to_dict", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_nested_single_deserialization_to_dict", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_nested_single_deserialization_to_dict(self):\n        class SimpleBlogSerializer(Schema):\n            title = fields.String()\n            author = fields.Nested(SimpleUserSchema)\n\n        blog_dict = {\n            'title': 'Gimme Shelter',\n            'author': {'name': 'Mick', 'age': '914', 'email': 'mick@stones.com'}\n        }\n        result, errors = SimpleBlogSerializer().load(blog_dict)\n        author = result['author']\n        assert author['name'] == 'Mick'\n        assert author['age'] == 914\n        assert 'email' not in author\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_nested_single_deserialization_to_dict", "self", "class", "simpleblogserializer", "schema", "title", "fields", "string", "author", "fields", "nested", "simpleuserschema", "blog_dict", "title", "gimme", "shelter", "author", "name", "mick", "age", "914", "email", "mick", "stones", "com", "result", "errors", "simpleblogserializer", "load", "blog_dict", "author", "result", "author", "assert", "author", "name", "mick", "assert", "author", "age", "914", "assert", "email", "not", "in", "author"], "doc_len": 51}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_nested_list_deserialization_to_dict", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_nested_list_deserialization_to_dict", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_nested_list_deserialization_to_dict(self):\n        class SimpleBlogSerializer(Schema):\n            title = fields.String()\n            authors = fields.Nested(SimpleUserSchema, many=True)\n\n        blog_dict = {\n            'title': 'Gimme Shelter',\n            'authors': [\n                {'name': 'Mick', 'age': '914'},\n                {'name': 'Keith', 'age': '8442'}\n            ]\n        }\n        result, errors = SimpleBlogSerializer().load(blog_dict)\n        assert isinstance(result['authors'], list)\n        author = result['authors'][0]\n        assert author['name'] == 'Mick'\n        assert author['age'] == 914\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_nested_list_deserialization_to_dict", "self", "class", "simpleblogserializer", "schema", "title", "fields", "string", "authors", "fields", "nested", "simpleuserschema", "many", "true", "blog_dict", "title", "gimme", "shelter", "authors", "name", "mick", "age", "914", "name", "keith", "age", "8442", "result", "errors", "simpleblogserializer", "load", "blog_dict", "assert", "isinstance", "result", "authors", "list", "author", "result", "authors", "0", "assert", "author", "name", "mick", "assert", "author", "age", "914"], "doc_len": 54}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_nested_single_none_not_allowed", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_nested_single_none_not_allowed", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_nested_single_none_not_allowed(self):\n        class PetSchema(Schema):\n            name = fields.Str()\n\n        class OwnerSchema(Schema):\n            pet = fields.Nested(PetSchema(), allow_none=False)\n\n        sch = OwnerSchema()\n        errors = sch.validate({'pet': None})\n        assert 'pet' in errors\n        assert errors['pet'] == ['Field may not be null.']\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_nested_single_none_not_allowed", "self", "class", "petschema", "schema", "name", "fields", "str", "class", "ownerschema", "schema", "pet", "fields", "nested", "petschema", "allow_none", "false", "sch", "ownerschema", "errors", "sch", "validate", "pet", "none", "assert", "pet", "in", "errors", "assert", "errors", "pet", "field", "may", "not", "be", "null"], "doc_len": 41}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_nested_many_non_not_allowed", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_nested_many_non_not_allowed", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_nested_many_non_not_allowed(self):\n        class PetSchema(Schema):\n            name = fields.Str()\n\n        class StoreSchema(Schema):\n            pets = fields.Nested(PetSchema(), allow_none=False, many=True)\n\n        sch = StoreSchema()\n        errors = sch.validate({'pets': None})\n        assert 'pets' in errors\n        assert errors['pets'] == ['Field may not be null.']\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_nested_many_non_not_allowed", "self", "class", "petschema", "schema", "name", "fields", "str", "class", "storeschema", "schema", "pets", "fields", "nested", "petschema", "allow_none", "false", "many", "true", "sch", "storeschema", "errors", "sch", "validate", "pets", "none", "assert", "pets", "in", "errors", "assert", "errors", "pets", "field", "may", "not", "be", "null"], "doc_len": 43}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_nested_single_required_missing", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_nested_single_required_missing", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_nested_single_required_missing(self):\n        class PetSchema(Schema):\n            name = fields.Str()\n\n        class OwnerSchema(Schema):\n            pet = fields.Nested(PetSchema(), required=True)\n\n        sch = OwnerSchema()\n        errors = sch.validate({})\n        assert 'pet' in errors\n        assert errors['pet'] == ['Missing data for required field.']\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_nested_single_required_missing", "self", "class", "petschema", "schema", "name", "fields", "str", "class", "ownerschema", "schema", "pet", "fields", "nested", "petschema", "required", "true", "sch", "ownerschema", "errors", "sch", "validate", "assert", "pet", "in", "errors", "assert", "errors", "pet", "missing", "data", "for", "required", "field"], "doc_len": 39}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_nested_many_required_missing", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_nested_many_required_missing", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_nested_many_required_missing(self):\n        class PetSchema(Schema):\n            name = fields.Str()\n\n        class StoreSchema(Schema):\n            pets = fields.Nested(PetSchema(), required=True, many=True)\n\n        sch = StoreSchema()\n        errors = sch.validate({})\n        assert 'pets' in errors\n        assert errors['pets'] == ['Missing data for required field.']\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_nested_many_required_missing", "self", "class", "petschema", "schema", "name", "fields", "str", "class", "storeschema", "schema", "pets", "fields", "nested", "petschema", "required", "true", "many", "true", "sch", "storeschema", "errors", "sch", "validate", "assert", "pets", "in", "errors", "assert", "errors", "pets", "missing", "data", "for", "required", "field"], "doc_len": 41}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_none_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_none_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_none_deserialization(self):\n        result, errors = SimpleUserSchema().load(None)\n        assert result is None\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_none_deserialization", "self", "result", "errors", "simpleuserschema", "load", "none", "assert", "result", "is", "none"], "doc_len": 16}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_nested_none_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_nested_none_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_nested_none_deserialization(self):\n        class SimpleBlogSerializer(Schema):\n            title = fields.String()\n            author = fields.Nested(SimpleUserSchema, allow_none=True)\n\n        blog_dict = {\n            'title': 'Gimme Shelter',\n            'author': None\n        }\n        result, errors = SimpleBlogSerializer().load(blog_dict)\n        assert not errors\n        assert result['author'] is None\n        assert result['title'] == blog_dict['title']\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_nested_none_deserialization", "self", "class", "simpleblogserializer", "schema", "title", "fields", "string", "author", "fields", "nested", "simpleuserschema", "allow_none", "true", "blog_dict", "title", "gimme", "shelter", "author", "none", "result", "errors", "simpleblogserializer", "load", "blog_dict", "assert", "not", "errors", "assert", "result", "author", "is", "none", "assert", "result", "title", "blog_dict", "title"], "doc_len": 43}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_deserialize_with_attribute_param", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_deserialize_with_attribute_param", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_deserialize_with_attribute_param(self):\n        class AliasingUserSerializer(Schema):\n            username = fields.Email(attribute='email')\n            years = fields.Integer(attribute='age')\n        data = {\n            'username': 'foo@bar.com',\n            'years': '42'\n        }\n        result, errors = AliasingUserSerializer().load(data)\n        assert result['email'] == 'foo@bar.com'\n        assert result['age'] == 42\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_deserialize_with_attribute_param", "self", "class", "aliasinguserserializer", "schema", "username", "fields", "email", "attribute", "email", "years", "fields", "integer", "attribute", "age", "data", "username", "foo", "bar", "com", "years", "42", "result", "errors", "aliasinguserserializer", "load", "data", "assert", "result", "email", "foo", "bar", "com", "assert", "result", "age", "42"], "doc_len": 42}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_deserialize_with_attribute_param_symmetry", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_deserialize_with_attribute_param_symmetry", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_deserialize_with_attribute_param_symmetry(self):\n        class MySchema(Schema):\n            foo = fields.Field(attribute='bar.baz')\n\n        schema = MySchema()\n        dump_data, errors = schema.dump({'bar': {'baz': 42}})\n        assert dump_data == {'foo': 42}\n\n        load_data, errors = schema.load({'foo': 42})\n        assert load_data == {'bar': {'baz': 42}}\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_deserialize_with_attribute_param_symmetry", "self", "class", "myschema", "schema", "foo", "fields", "field", "attribute", "bar", "baz", "schema", "myschema", "dump_data", "errors", "schema", "dump", "bar", "baz", "42", "assert", "dump_data", "foo", "42", "load_data", "errors", "schema", "load", "foo", "42", "assert", "load_data", "bar", "baz", "42"], "doc_len": 40}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_deserialize_with_attribute_param_error_returns_field_name_not_attribute_name", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_deserialize_with_attribute_param_error_returns_field_name_not_attribute_name", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_deserialize_with_attribute_param_error_returns_field_name_not_attribute_name(self):\n        class AliasingUserSerializer(Schema):\n            username = fields.Email(attribute='email')\n            years = fields.Integer(attribute='age')\n        data = {\n            'username': 'foobar.com',\n            'years': '42'\n        }\n        result, errors = AliasingUserSerializer().load(data)\n        assert errors\n        assert errors['username'] == ['Not a valid email address.']\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_deserialize_with_attribute_param_error_returns_field_name_not_attribute_name", "self", "class", "aliasinguserserializer", "schema", "username", "fields", "email", "attribute", "email", "years", "fields", "integer", "attribute", "age", "data", "username", "foobar", "com", "years", "42", "result", "errors", "aliasinguserserializer", "load", "data", "assert", "errors", "assert", "errors", "username", "not", "a", "valid", "email", "address"], "doc_len": 41}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_deserialize_with_attribute_param_error_returns_load_from_not_attribute_name", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_deserialize_with_attribute_param_error_returns_load_from_not_attribute_name", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_deserialize_with_attribute_param_error_returns_load_from_not_attribute_name(self):\n        class AliasingUserSerializer(Schema):\n            name = fields.String(load_from='Name')\n            username = fields.Email(attribute='email', load_from='UserName')\n            years = fields.Integer(attribute='age', load_from='Years')\n        data = {\n            'Name': 'Mick',\n            'UserName': 'foobar.com',\n            'years': 'abc'\n        }\n        result, errors = AliasingUserSerializer().load(data)\n        assert errors['UserName'] == [u'Not a valid email address.']\n        assert errors['years'] == [u'Not a valid integer.']\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_deserialize_with_attribute_param_error_returns_load_from_not_attribute_name", "self", "class", "aliasinguserserializer", "schema", "name", "fields", "string", "load_from", "name", "username", "fields", "email", "attribute", "email", "load_from", "username", "years", "fields", "integer", "attribute", "age", "load_from", "years", "data", "name", "mick", "username", "foobar", "com", "years", "abc", "result", "errors", "aliasinguserserializer", "load", "data", "assert", "errors", "username", "u", "not", "a", "valid", "email", "address", "assert", "errors", "years", "u", "not", "a", "valid", "integer"], "doc_len": 59}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_deserialize_with_load_from_param", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_deserialize_with_load_from_param", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_deserialize_with_load_from_param(self):\n        class AliasingUserSerializer(Schema):\n            name = fields.String(load_from='Name')\n            username = fields.Email(attribute='email', load_from='UserName')\n            years = fields.Integer(attribute='age', load_from='Years')\n        data = {\n            'Name': 'Mick',\n            'UserName': 'foo@bar.com',\n            'years': '42'\n        }\n        result, errors = AliasingUserSerializer().load(data)\n        assert result['name'] == 'Mick'\n        assert result['email'] == 'foo@bar.com'\n        assert result['age'] == 42\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_deserialize_with_load_from_param", "self", "class", "aliasinguserserializer", "schema", "name", "fields", "string", "load_from", "name", "username", "fields", "email", "attribute", "email", "load_from", "username", "years", "fields", "integer", "attribute", "age", "load_from", "years", "data", "name", "mick", "username", "foo", "bar", "com", "years", "42", "result", "errors", "aliasinguserserializer", "load", "data", "assert", "result", "name", "mick", "assert", "result", "email", "foo", "bar", "com", "assert", "result", "age", "42"], "doc_len": 57}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_deserialize_with_dump_only_param", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_deserialize_with_dump_only_param", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_deserialize_with_dump_only_param(self):\n        class AliasingUserSerializer(Schema):\n            name = fields.String()\n            years = fields.Integer(dump_only=True)\n            nicknames = fields.List(fields.Str(), dump_only=True)\n        data = {\n            'name': 'Mick',\n            'years': '42',\n            'nicknames': ['Your Majesty', 'Brenda']\n        }\n        result, errors = AliasingUserSerializer().load(data)\n        assert result['name'] == 'Mick'\n        assert 'years' not in result\n        assert 'nicknames' not in result\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_deserialize_with_dump_only_param", "self", "class", "aliasinguserserializer", "schema", "name", "fields", "string", "years", "fields", "integer", "dump_only", "true", "nicknames", "fields", "list", "fields", "str", "dump_only", "true", "data", "name", "mick", "years", "42", "nicknames", "your", "majesty", "brenda", "result", "errors", "aliasinguserserializer", "load", "data", "assert", "result", "name", "mick", "assert", "years", "not", "in", "result", "assert", "nicknames", "not", "in", "result"], "doc_len": 53}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_deserialize_with_missing_param_value", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_deserialize_with_missing_param_value", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_deserialize_with_missing_param_value(self):\n        class AliasingUserSerializer(Schema):\n            name = fields.String()\n            years = fields.Integer(missing=10)\n        data = {\n            'name': 'Mick',\n        }\n        result, errors = AliasingUserSerializer().load(data)\n        assert result['name'] == 'Mick'\n        assert result['years'] == 10\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_deserialize_with_missing_param_value", "self", "class", "aliasinguserserializer", "schema", "name", "fields", "string", "years", "fields", "integer", "missing", "10", "data", "name", "mick", "result", "errors", "aliasinguserserializer", "load", "data", "assert", "result", "name", "mick", "assert", "result", "years", "10"], "doc_len": 34}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_deserialize_with_missing_param_callable", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_deserialize_with_missing_param_callable", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_deserialize_with_missing_param_callable(self):\n        class AliasingUserSerializer(Schema):\n            name = fields.String()\n            years = fields.Integer(missing=lambda: 13 + 7)\n        data = {\n            'name': 'Mick',\n        }\n        result, errors = AliasingUserSerializer().load(data)\n        assert result['name'] == 'Mick'\n        assert result['years'] == 20\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_deserialize_with_missing_param_callable", "self", "class", "aliasinguserserializer", "schema", "name", "fields", "string", "years", "fields", "integer", "missing", "lambda", "13", "7", "data", "name", "mick", "result", "errors", "aliasinguserserializer", "load", "data", "assert", "result", "name", "mick", "assert", "result", "years", "20"], "doc_len": 36}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_deserialize_with_missing_param_none", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_deserialize_with_missing_param_none", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_deserialize_with_missing_param_none(self):\n        class AliasingUserSerializer(Schema):\n            name = fields.String()\n            years = fields.Integer(missing=None, allow_none=True)\n        data = {\n            'name': 'Mick',\n        }\n        result, errors = AliasingUserSerializer().load(data)\n        assert not errors\n        assert result['name'] == 'Mick'\n        assert result['years'] is None\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_deserialize_with_missing_param_none", "self", "class", "aliasinguserserializer", "schema", "name", "fields", "string", "years", "fields", "integer", "missing", "none", "allow_none", "true", "data", "name", "mick", "result", "errors", "aliasinguserserializer", "load", "data", "assert", "not", "errors", "assert", "result", "name", "mick", "assert", "result", "years", "is", "none"], "doc_len": 40}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_deserialization_returns_errors", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_deserialization_returns_errors", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_deserialization_returns_errors(self):\n        bad_data = {\n            'email': 'invalid-email',\n            'colors': 'burger',\n            'age': -1,\n        }\n        v = Validator(strict=False)\n        result, errors = v.load(bad_data)\n        assert 'email' in errors\n        assert 'colors' in errors\n        assert 'age' in errors\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_deserialization_returns_errors", "self", "bad_data", "email", "invalid", "email", "colors", "burger", "age", "1", "v", "validator", "strict", "false", "result", "errors", "v", "load", "bad_data", "assert", "email", "in", "errors", "assert", "colors", "in", "errors", "assert", "age", "in", "errors"], "doc_len": 36}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_deserialization_returns_errors_with_multiple_validators", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_deserialization_returns_errors_with_multiple_validators", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_deserialization_returns_errors_with_multiple_validators(self):\n        bad_data = {\n            'email': 'invalid-email',\n            'colors': 'burger',\n            'age': -1,\n        }\n        v = Validators(strict=False)\n        result, errors = v.load(bad_data)\n        assert 'email' in errors\n        assert 'colors' in errors\n        assert 'age' in errors\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_deserialization_returns_errors_with_multiple_validators", "self", "bad_data", "email", "invalid", "email", "colors", "burger", "age", "1", "v", "validators", "strict", "false", "result", "errors", "v", "load", "bad_data", "assert", "email", "in", "errors", "assert", "colors", "in", "errors", "assert", "age", "in", "errors"], "doc_len": 36}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_strict_mode_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_strict_mode_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_strict_mode_deserialization(self):\n        bad_data = {\n            'email': 'invalid-email',\n            'colors': 'burger',\n            'age': -1,\n        }\n        v = Validator(strict=True)\n        with pytest.raises(ValidationError):\n            v.load(bad_data)\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_strict_mode_deserialization", "self", "bad_data", "email", "invalid", "email", "colors", "burger", "age", "1", "v", "validator", "strict", "true", "with", "pytest", "raises", "validationerror", "v", "load", "bad_data"], "doc_len": 26}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_strict_mode_many", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_strict_mode_many", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_strict_mode_many(self):\n        bad_data = [\n            {'email': 'foo@bar.com', 'colors': 'red', 'age': 18},\n            {'email': 'bad', 'colors': 'pizza', 'age': -1}\n        ]\n        v = Validator(strict=True, many=True)\n        with pytest.raises(ValidationError):\n            v.load(bad_data)\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_strict_mode_many", "self", "bad_data", "email", "foo", "bar", "com", "colors", "red", "age", "18", "email", "bad", "colors", "pizza", "age", "1", "v", "validator", "strict", "true", "many", "true", "with", "pytest", "raises", "validationerror", "v", "load", "bad_data"], "doc_len": 35}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_strict_mode_deserialization_with_multiple_validators", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_strict_mode_deserialization_with_multiple_validators", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_strict_mode_deserialization_with_multiple_validators(self):\n        bad_data = {\n            'email': 'invalid-email',\n            'colors': 'burger',\n            'age': -1,\n        }\n        v = Validators(strict=True)\n        with pytest.raises(ValidationError):\n            v.load(bad_data)\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_strict_mode_deserialization_with_multiple_validators", "self", "bad_data", "email", "invalid", "email", "colors", "burger", "age", "1", "v", "validators", "strict", "true", "with", "pytest", "raises", "validationerror", "v", "load", "bad_data"], "doc_len": 26}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_uncaught_validation_errors_are_stored", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_uncaught_validation_errors_are_stored", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_uncaught_validation_errors_are_stored(self):\n        def validate_field(val):\n            raise ValidationError('Something went wrong')\n\n        class MySchema(Schema):\n            foo = fields.Field(validate=validate_field)\n\n        _, errors = MySchema().load({'foo': 42})\n        assert 'Something went wrong' in errors['foo']\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_uncaught_validation_errors_are_stored", "self", "def", "validate_field", "val", "raise", "validationerror", "something", "went", "wrong", "class", "myschema", "schema", "foo", "fields", "field", "validate", "validate_field", "_", "errors", "myschema", "load", "foo", "42", "assert", "something", "went", "wrong", "in", "errors", "foo"], "doc_len": 36}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_multiple_errors_can_be_stored_for_a_field", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_multiple_errors_can_be_stored_for_a_field", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_multiple_errors_can_be_stored_for_a_field(self):\n\n        def validate_with_bool(n):\n            return False\n\n        def validate_with_error(n):\n            raise ValidationError('foo is not valid')\n\n        class MySchema(Schema):\n            foo = fields.Field(required=True, validate=[\n                validate_with_bool,\n                validate_with_error,\n            ])\n        _, errors = MySchema().load({'foo': 'bar'})\n\n        assert type(errors['foo']) == list\n        assert len(errors['foo']) == 2\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_multiple_errors_can_be_stored_for_a_field", "self", "def", "validate_with_bool", "n", "return", "false", "def", "validate_with_error", "n", "raise", "validationerror", "foo", "is", "not", "valid", "class", "myschema", "schema", "foo", "fields", "field", "required", "true", "validate", "validate_with_bool", "validate_with_error", "_", "errors", "myschema", "load", "foo", "bar", "assert", "type", "errors", "foo", "list", "assert", "len", "errors", "foo", "2"], "doc_len": 48}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_multiple_errors_can_be_stored_for_an_email_field", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_multiple_errors_can_be_stored_for_an_email_field", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_multiple_errors_can_be_stored_for_an_email_field(self):\n        def validate_with_bool(val):\n            return False\n\n        class MySchema(Schema):\n            email = fields.Email(validate=[\n                validate_with_bool,\n            ])\n        _, errors = MySchema().load({'email': 'foo'})\n        assert len(errors['email']) == 2\n        assert 'Not a valid email address.' in errors['email'][0]\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_multiple_errors_can_be_stored_for_an_email_field", "self", "def", "validate_with_bool", "val", "return", "false", "class", "myschema", "schema", "email", "fields", "email", "validate", "validate_with_bool", "_", "errors", "myschema", "load", "email", "foo", "assert", "len", "errors", "email", "2", "assert", "not", "a", "valid", "email", "address", "in", "errors", "email", "0"], "doc_len": 41}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_multiple_errors_can_be_stored_for_a_url_field", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_multiple_errors_can_be_stored_for_a_url_field", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_multiple_errors_can_be_stored_for_a_url_field(self):\n        def validate_with_bool(val):\n            return False\n\n        class MySchema(Schema):\n            url = fields.Url(validate=[\n                validate_with_bool,\n            ])\n        _, errors = MySchema().load({'url': 'foo'})\n        assert len(errors['url']) == 2\n        assert 'Not a valid URL.' in errors['url'][0]\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_multiple_errors_can_be_stored_for_a_url_field", "self", "def", "validate_with_bool", "val", "return", "false", "class", "myschema", "schema", "url", "fields", "url", "validate", "validate_with_bool", "_", "errors", "myschema", "load", "url", "foo", "assert", "len", "errors", "url", "2", "assert", "not", "a", "valid", "url", "in", "errors", "url", "0"], "doc_len": 40}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_required_value_only_passed_to_validators_if_provided", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_required_value_only_passed_to_validators_if_provided", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_required_value_only_passed_to_validators_if_provided(self):\n        class MySchema(Schema):\n            foo = fields.Field(required=True, validate=lambda f: False)\n\n        _, errors = MySchema().load({})\n        # required value missing\n        assert len(errors['foo']) == 1\n        assert 'Missing data for required field.' in errors['foo']\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_required_value_only_passed_to_validators_if_provided", "self", "class", "myschema", "schema", "foo", "fields", "field", "required", "true", "validate", "lambda", "f", "false", "_", "errors", "myschema", "load", "required", "value", "missing", "assert", "len", "errors", "foo", "1", "assert", "missing", "data", "for", "required", "field", "in", "errors", "foo"], "doc_len": 40}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_partial_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_partial_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_partial_deserialization(self, partial_schema):\n        class MySchema(Schema):\n            foo = fields.Field(required=True)\n            bar = fields.Field(required=True)\n\n        schema_args = {}\n        load_args = {}\n        if partial_schema:\n            schema_args['partial'] = True\n        else:\n            load_args['partial'] = True\n        data, errors = MySchema(**schema_args).load({'foo': 3}, **load_args)\n\n        assert data['foo'] == 3\n        assert 'bar' not in data\n        assert not errors\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_partial_deserialization", "self", "partial_schema", "class", "myschema", "schema", "foo", "fields", "field", "required", "true", "bar", "fields", "field", "required", "true", "schema_args", "load_args", "if", "partial_schema", "schema_args", "partial", "true", "else", "load_args", "partial", "true", "data", "errors", "myschema", "schema_args", "load", "foo", "3", "load_args", "assert", "data", "foo", "3", "assert", "bar", "not", "in", "data", "assert", "not", "errors"], "doc_len": 52}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_partial_fields_deserialization", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_partial_fields_deserialization", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_partial_fields_deserialization(self):\n        class MySchema(Schema):\n            foo = fields.Field(required=True)\n            bar = fields.Field(required=True)\n            baz = fields.Field(required=True)\n\n        data, errors = MySchema().load({'foo': 3}, partial=tuple())\n        assert data['foo'] == 3\n        assert 'bar' in errors\n        assert 'baz' in errors\n\n        data, errors = MySchema().load({'foo': 3}, partial=('bar', 'baz'))\n        assert data['foo'] == 3\n        assert 'bar' not in data\n        assert 'baz' not in data\n        assert not errors\n\n        data, errors = MySchema(partial=True).load({'foo': 3}, partial=('bar', 'baz'))\n        assert data['foo'] == 3\n        assert 'bar' not in data\n        assert 'baz' not in data\n        assert not errors\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_partial_fields_deserialization", "self", "class", "myschema", "schema", "foo", "fields", "field", "required", "true", "bar", "fields", "field", "required", "true", "baz", "fields", "field", "required", "true", "data", "errors", "myschema", "load", "foo", "3", "partial", "tuple", "assert", "data", "foo", "3", "assert", "bar", "in", "errors", "assert", "baz", "in", "errors", "data", "errors", "myschema", "load", "foo", "3", "partial", "bar", "baz", "assert", "data", "foo", "3", "assert", "bar", "not", "in", "data", "assert", "baz", "not", "in", "data", "assert", "not", "errors", "data", "errors", "myschema", "partial", "true", "load", "foo", "3", "partial", "bar", "baz", "assert", "data", "foo", "3", "assert", "bar", "not", "in", "data", "assert", "baz", "not", "in", "data", "assert", "not", "errors"], "doc_len": 99}
{"doc_id": "tests/test_deserialization.py::TestSchemaDeserialization.test_partial_fields_validation", "file_path": "tests/test_deserialization.py", "class_name": "TestSchemaDeserialization", "func_name": "test_partial_fields_validation", "text": "文件路径: tests/test_deserialization.py, 类名: TestSchemaDeserialization\n    def test_partial_fields_validation(self):\n        class MySchema(Schema):\n            foo = fields.Field(required=True)\n            bar = fields.Field(required=True)\n            baz = fields.Field(required=True)\n\n        errors = MySchema().validate({'foo': 3}, partial=tuple())\n        assert 'bar' in errors\n        assert 'baz' in errors\n\n        errors = MySchema().validate({'foo': 3}, partial=('bar', 'baz'))\n        assert not errors\n\n        errors = MySchema(partial=True).validate({'foo': 3}, partial=('bar', 'baz'))\n        assert not errors\n", "tokens": ["tests", "test_deserialization", "py", "testschemadeserialization", "def", "test_partial_fields_validation", "self", "class", "myschema", "schema", "foo", "fields", "field", "required", "true", "bar", "fields", "field", "required", "true", "baz", "fields", "field", "required", "true", "errors", "myschema", "validate", "foo", "3", "partial", "tuple", "assert", "bar", "in", "errors", "assert", "baz", "in", "errors", "errors", "myschema", "validate", "foo", "3", "partial", "bar", "baz", "assert", "not", "errors", "errors", "myschema", "partial", "true", "validate", "foo", "3", "partial", "bar", "baz", "assert", "not", "errors"], "doc_len": 64}
{"doc_id": "tests/test_deserialization.py::TestValidation.test_integer_with_validator", "file_path": "tests/test_deserialization.py", "class_name": "TestValidation", "func_name": "test_integer_with_validator", "text": "文件路径: tests/test_deserialization.py, 类名: TestValidation\n    def test_integer_with_validator(self):\n        field = fields.Integer(validate=lambda x: 18 <= x <= 24)\n        out = field.deserialize('20')\n        assert out == 20\n        with pytest.raises(ValidationError):\n            field.deserialize(25)\n", "tokens": ["tests", "test_deserialization", "py", "testvalidation", "def", "test_integer_with_validator", "self", "field", "fields", "integer", "validate", "lambda", "x", "18", "x", "24", "out", "field", "deserialize", "20", "assert", "out", "20", "with", "pytest", "raises", "validationerror", "field", "deserialize", "25"], "doc_len": 30}
{"doc_id": "tests/test_deserialization.py::TestValidation.test_integer_with_validators", "file_path": "tests/test_deserialization.py", "class_name": "TestValidation", "func_name": "test_integer_with_validators", "text": "文件路径: tests/test_deserialization.py, 类名: TestValidation\n    def test_integer_with_validators(self, field):\n        out = field.deserialize('20')\n        assert out == 20\n        with pytest.raises(ValidationError):\n            field.deserialize(25)\n", "tokens": ["tests", "test_deserialization", "py", "testvalidation", "def", "test_integer_with_validators", "self", "field", "out", "field", "deserialize", "20", "assert", "out", "20", "with", "pytest", "raises", "validationerror", "field", "deserialize", "25"], "doc_len": 22}
{"doc_id": "tests/test_deserialization.py::TestValidation.test_float_with_validators", "file_path": "tests/test_deserialization.py", "class_name": "TestValidation", "func_name": "test_float_with_validators", "text": "文件路径: tests/test_deserialization.py, 类名: TestValidation\n    def test_float_with_validators(self, field):\n        assert field.deserialize(3.14)\n        with pytest.raises(ValidationError):\n            field.deserialize(4.2)\n", "tokens": ["tests", "test_deserialization", "py", "testvalidation", "def", "test_float_with_validators", "self", "field", "assert", "field", "deserialize", "3", "14", "with", "pytest", "raises", "validationerror", "field", "deserialize", "4", "2"], "doc_len": 21}
{"doc_id": "tests/test_deserialization.py::TestValidation.test_string_validator", "file_path": "tests/test_deserialization.py", "class_name": "TestValidation", "func_name": "test_string_validator", "text": "文件路径: tests/test_deserialization.py, 类名: TestValidation\n    def test_string_validator(self):\n        field = fields.String(validate=lambda n: len(n) == 3)\n        assert field.deserialize('Joe') == 'Joe'\n        with pytest.raises(ValidationError):\n            field.deserialize('joseph')\n", "tokens": ["tests", "test_deserialization", "py", "testvalidation", "def", "test_string_validator", "self", "field", "fields", "string", "validate", "lambda", "n", "len", "n", "3", "assert", "field", "deserialize", "joe", "joe", "with", "pytest", "raises", "validationerror", "field", "deserialize", "joseph"], "doc_len": 28}
{"doc_id": "tests/test_deserialization.py::TestValidation.test_function_validator", "file_path": "tests/test_deserialization.py", "class_name": "TestValidation", "func_name": "test_function_validator", "text": "文件路径: tests/test_deserialization.py, 类名: TestValidation\n    def test_function_validator(self):\n        field = fields.Function(lambda d: d.name.upper(),\n                                validate=lambda n: len(n) == 3)\n        assert field.deserialize('joe')\n        with pytest.raises(ValidationError):\n            field.deserialize('joseph')\n", "tokens": ["tests", "test_deserialization", "py", "testvalidation", "def", "test_function_validator", "self", "field", "fields", "function", "lambda", "d", "d", "name", "upper", "validate", "lambda", "n", "len", "n", "3", "assert", "field", "deserialize", "joe", "with", "pytest", "raises", "validationerror", "field", "deserialize", "joseph"], "doc_len": 32}
{"doc_id": "tests/test_deserialization.py::TestValidation.test_function_validators", "file_path": "tests/test_deserialization.py", "class_name": "TestValidation", "func_name": "test_function_validators", "text": "文件路径: tests/test_deserialization.py, 类名: TestValidation\n    def test_function_validators(self, field):\n        assert field.deserialize('joe')\n        with pytest.raises(ValidationError):\n            field.deserialize('joseph')\n", "tokens": ["tests", "test_deserialization", "py", "testvalidation", "def", "test_function_validators", "self", "field", "assert", "field", "deserialize", "joe", "with", "pytest", "raises", "validationerror", "field", "deserialize", "joseph"], "doc_len": 19}
{"doc_id": "tests/test_deserialization.py::TestValidation.test_method_validator", "file_path": "tests/test_deserialization.py", "class_name": "TestValidation", "func_name": "test_method_validator", "text": "文件路径: tests/test_deserialization.py, 类名: TestValidation\n    def test_method_validator(self):\n        class MethodSerializer(Schema):\n            name = fields.Method('get_name', deserialize='get_name',\n                                      validate=lambda n: len(n) == 3)\n\n            def get_name(self, val):\n                return val.upper()\n        assert MethodSerializer(strict=True).load({'name': 'joe'})\n        with pytest.raises(ValidationError, match='Invalid value.'):\n            MethodSerializer(strict=True).load({'name': 'joseph'})\n", "tokens": ["tests", "test_deserialization", "py", "testvalidation", "def", "test_method_validator", "self", "class", "methodserializer", "schema", "name", "fields", "method", "get_name", "deserialize", "get_name", "validate", "lambda", "n", "len", "n", "3", "def", "get_name", "self", "val", "return", "val", "upper", "assert", "methodserializer", "strict", "true", "load", "name", "joe", "with", "pytest", "raises", "validationerror", "match", "invalid", "value", "methodserializer", "strict", "true", "load", "name", "joseph"], "doc_len": 49}
{"doc_id": "tests/test_deserialization.py::TestValidation.test_nested_data_is_stored_when_validation_fails", "file_path": "tests/test_deserialization.py", "class_name": "TestValidation", "func_name": "test_nested_data_is_stored_when_validation_fails", "text": "文件路径: tests/test_deserialization.py, 类名: TestValidation\n    def test_nested_data_is_stored_when_validation_fails(self):\n        class SchemaA(Schema):\n            x = fields.Integer()\n            y = fields.Integer(validate=lambda n: n > 0)\n            z = fields.Integer()\n\n        class SchemaB(Schema):\n            w = fields.Integer()\n            n = fields.Nested(SchemaA)\n\n        sch = SchemaB()\n\n        data, errors = sch.load({'w': 90, 'n': {'x': 90, 'y': 89, 'z': None}})\n        assert 'z' in errors['n']\n        assert data == {'w': 90, 'n': {'x': 90, 'y': 89}}\n\n        data, errors = sch.load({'w': 90, 'n': {'x': 90, 'y': -1, 'z': 180}})\n        assert 'y' in errors['n']\n        assert data == {'w': 90, 'n': {'x': 90, 'z': 180}}\n", "tokens": ["tests", "test_deserialization", "py", "testvalidation", "def", "test_nested_data_is_stored_when_validation_fails", "self", "class", "schemaa", "schema", "x", "fields", "integer", "y", "fields", "integer", "validate", "lambda", "n", "n", "0", "z", "fields", "integer", "class", "schemab", "schema", "w", "fields", "integer", "n", "fields", "nested", "schemaa", "sch", "schemab", "data", "errors", "sch", "load", "w", "90", "n", "x", "90", "y", "89", "z", "none", "assert", "z", "in", "errors", "n", "assert", "data", "w", "90", "n", "x", "90", "y", "89", "data", "errors", "sch", "load", "w", "90", "n", "x", "90", "y", "1", "z", "180", "assert", "y", "in", "errors", "n", "assert", "data", "w", "90", "n", "x", "90", "z", "180"], "doc_len": 90}
{"doc_id": "tests/test_deserialization.py::TestValidation.test_false_value_validation", "file_path": "tests/test_deserialization.py", "class_name": "TestValidation", "func_name": "test_false_value_validation", "text": "文件路径: tests/test_deserialization.py, 类名: TestValidation\n    def test_false_value_validation(self):\n        class Sch(Schema):\n            lamb = fields.Raw(validate=lambda x: x is False)\n            equal = fields.Raw(validate=Equal(False))\n\n        errors = Sch().validate({'lamb': False, 'equal': False})\n        assert not errors\n        errors = Sch().validate({'lamb': True, 'equal': True})\n        assert 'lamb' in errors\n        assert errors['lamb'] == ['Invalid value.']\n        assert 'equal' in errors\n        assert errors['equal'] == ['Must be equal to False.']\n", "tokens": ["tests", "test_deserialization", "py", "testvalidation", "def", "test_false_value_validation", "self", "class", "sch", "schema", "lamb", "fields", "raw", "validate", "lambda", "x", "x", "is", "false", "equal", "fields", "raw", "validate", "equal", "false", "errors", "sch", "validate", "lamb", "false", "equal", "false", "assert", "not", "errors", "errors", "sch", "validate", "lamb", "true", "equal", "true", "assert", "lamb", "in", "errors", "assert", "errors", "lamb", "invalid", "value", "assert", "equal", "in", "errors", "assert", "errors", "equal", "must", "be", "equal", "to", "false"], "doc_len": 63}
{"doc_id": "tests/test_deserialization.py::test_required_field_failure", "file_path": "tests/test_deserialization.py", "class_name": null, "func_name": "test_required_field_failure", "text": "文件路径: tests/test_deserialization.py\ndef test_required_field_failure(FieldClass):  # noqa\n    class RequireSchema(Schema):\n        age = FieldClass(required=True)\n    user_data = {\"name\": \"Phil\"}\n    data, errs = RequireSchema().load(user_data)\n    assert \"Missing data for required field.\" in errs['age']\n    assert data == {}\n", "tokens": ["tests", "test_deserialization", "py", "def", "test_required_field_failure", "fieldclass", "noqa", "class", "requireschema", "schema", "age", "fieldclass", "required", "true", "user_data", "name", "phil", "data", "errs", "requireschema", "load", "user_data", "assert", "missing", "data", "for", "required", "field", "in", "errs", "age", "assert", "data"], "doc_len": 33}
{"doc_id": "tests/test_deserialization.py::test_required_message_can_be_changed", "file_path": "tests/test_deserialization.py", "class_name": null, "func_name": "test_required_message_can_be_changed", "text": "文件路径: tests/test_deserialization.py\ndef test_required_message_can_be_changed(message):\n    class RequireSchema(Schema):\n        age = fields.Integer(required=True, error_messages={'required': message})\n\n    user_data = {\"name\": \"Phil\"}\n    data, errs = RequireSchema().load(user_data)\n    expected = [message] if isinstance(message, basestring) else message\n    assert expected == errs['age']\n    assert data == {}\n", "tokens": ["tests", "test_deserialization", "py", "def", "test_required_message_can_be_changed", "message", "class", "requireschema", "schema", "age", "fields", "integer", "required", "true", "error_messages", "required", "message", "user_data", "name", "phil", "data", "errs", "requireschema", "load", "user_data", "expected", "message", "if", "isinstance", "message", "basestring", "else", "message", "assert", "expected", "errs", "age", "assert", "data"], "doc_len": 39}
{"doc_id": "tests/test_deserialization.py::test_deserialize_doesnt_raise_exception_if_strict_is_false_and_input_type_is_incorrect", "file_path": "tests/test_deserialization.py", "class_name": null, "func_name": "test_deserialize_doesnt_raise_exception_if_strict_is_false_and_input_type_is_incorrect", "text": "文件路径: tests/test_deserialization.py\ndef test_deserialize_doesnt_raise_exception_if_strict_is_false_and_input_type_is_incorrect():\n    class MySchema(Schema):\n        foo = fields.Field()\n        bar = fields.Field()\n    data, errs = MySchema().load([])\n    assert '_schema' in errs\n    assert errs['_schema'] == ['Invalid input type.']\n", "tokens": ["tests", "test_deserialization", "py", "def", "test_deserialize_doesnt_raise_exception_if_strict_is_false_and_input_type_is_incorrect", "class", "myschema", "schema", "foo", "fields", "field", "bar", "fields", "field", "data", "errs", "myschema", "load", "assert", "_schema", "in", "errs", "assert", "errs", "_schema", "invalid", "input", "type"], "doc_len": 28}
{"doc_id": "tests/test_deserialization.py::test_deserialize_raises_exception_if_strict_is_true_and_input_type_is_incorrect", "file_path": "tests/test_deserialization.py", "class_name": null, "func_name": "test_deserialize_raises_exception_if_strict_is_true_and_input_type_is_incorrect", "text": "文件路径: tests/test_deserialization.py\ndef test_deserialize_raises_exception_if_strict_is_true_and_input_type_is_incorrect():\n    class MySchema(Schema):\n        foo = fields.Field()\n        bar = fields.Field()\n    with pytest.raises(ValidationError, match='Invalid input type.') as excinfo:\n        MySchema(strict=True).load([])\n    exc = excinfo.value\n    assert exc.field_names == ['_schema']\n    assert exc.fields == []\n", "tokens": ["tests", "test_deserialization", "py", "def", "test_deserialize_raises_exception_if_strict_is_true_and_input_type_is_incorrect", "class", "myschema", "schema", "foo", "fields", "field", "bar", "fields", "field", "with", "pytest", "raises", "validationerror", "match", "invalid", "input", "type", "as", "excinfo", "myschema", "strict", "true", "load", "exc", "excinfo", "value", "assert", "exc", "field_names", "_schema", "assert", "exc", "fields"], "doc_len": 38}
{"doc_id": "tests/test_exceptions.py::TestValidationError.test_stores_message_in_list", "file_path": "tests/test_exceptions.py", "class_name": "TestValidationError", "func_name": "test_stores_message_in_list", "text": "文件路径: tests/test_exceptions.py, 类名: TestValidationError\n    def test_stores_message_in_list(self):\n        err = ValidationError('foo')\n        assert err.messages == ['foo']\n", "tokens": ["tests", "test_exceptions", "py", "testvalidationerror", "def", "test_stores_message_in_list", "self", "err", "validationerror", "foo", "assert", "err", "messages", "foo"], "doc_len": 14}
{"doc_id": "tests/test_exceptions.py::TestValidationError.test_can_pass_list_of_messages", "file_path": "tests/test_exceptions.py", "class_name": "TestValidationError", "func_name": "test_can_pass_list_of_messages", "text": "文件路径: tests/test_exceptions.py, 类名: TestValidationError\n    def test_can_pass_list_of_messages(self):\n        err = ValidationError(['foo', 'bar'])\n        assert err.messages == ['foo', 'bar']\n", "tokens": ["tests", "test_exceptions", "py", "testvalidationerror", "def", "test_can_pass_list_of_messages", "self", "err", "validationerror", "foo", "bar", "assert", "err", "messages", "foo", "bar"], "doc_len": 16}
{"doc_id": "tests/test_exceptions.py::TestValidationError.test_stores_dictionaries", "file_path": "tests/test_exceptions.py", "class_name": "TestValidationError", "func_name": "test_stores_dictionaries", "text": "文件路径: tests/test_exceptions.py, 类名: TestValidationError\n    def test_stores_dictionaries(self):\n        messages = {'user': {'email': ['email is invalid']}}\n        err = ValidationError(messages)\n        assert err.messages == messages\n", "tokens": ["tests", "test_exceptions", "py", "testvalidationerror", "def", "test_stores_dictionaries", "self", "messages", "user", "email", "email", "is", "invalid", "err", "validationerror", "messages", "assert", "err", "messages", "messages"], "doc_len": 20}
{"doc_id": "tests/test_exceptions.py::TestValidationError.test_can_store_field_names", "file_path": "tests/test_exceptions.py", "class_name": "TestValidationError", "func_name": "test_can_store_field_names", "text": "文件路径: tests/test_exceptions.py, 类名: TestValidationError\n    def test_can_store_field_names(self):\n        err = ValidationError('invalid email', field_names='email')\n        assert err.field_names == ['email']\n        err = ValidationError('invalid email', field_names=['email'])\n        assert err.field_names == ['email']\n", "tokens": ["tests", "test_exceptions", "py", "testvalidationerror", "def", "test_can_store_field_names", "self", "err", "validationerror", "invalid", "email", "field_names", "email", "assert", "err", "field_names", "email", "err", "validationerror", "invalid", "email", "field_names", "email", "assert", "err", "field_names", "email"], "doc_len": 27}
{"doc_id": "tests/test_exceptions.py::TestValidationError.test_str", "file_path": "tests/test_exceptions.py", "class_name": "TestValidationError", "func_name": "test_str", "text": "文件路径: tests/test_exceptions.py, 类名: TestValidationError\n    def test_str(self):\n        err = ValidationError('invalid email')\n        assert str(err) == 'invalid email'\n\n        err2 = ValidationError('invalid email', 'email')\n        assert str(err2) == 'invalid email'\n", "tokens": ["tests", "test_exceptions", "py", "testvalidationerror", "def", "test_str", "self", "err", "validationerror", "invalid", "email", "assert", "str", "err", "invalid", "email", "err2", "validationerror", "invalid", "email", "email", "assert", "str", "err2", "invalid", "email"], "doc_len": 26}
{"doc_id": "tests/test_fields.py::TestFieldAliases.test_int_is_integer", "file_path": "tests/test_fields.py", "class_name": "TestFieldAliases", "func_name": "test_int_is_integer", "text": "文件路径: tests/test_fields.py, 类名: TestFieldAliases\n    def test_int_is_integer(self):\n        assert fields.Int is fields.Integer\n", "tokens": ["tests", "test_fields", "py", "testfieldaliases", "def", "test_int_is_integer", "self", "assert", "fields", "int", "is", "fields", "integer"], "doc_len": 13}
{"doc_id": "tests/test_fields.py::TestFieldAliases.test_str_is_string", "file_path": "tests/test_fields.py", "class_name": "TestFieldAliases", "func_name": "test_str_is_string", "text": "文件路径: tests/test_fields.py, 类名: TestFieldAliases\n    def test_str_is_string(self):\n        assert fields.Str is fields.String\n", "tokens": ["tests", "test_fields", "py", "testfieldaliases", "def", "test_str_is_string", "self", "assert", "fields", "str", "is", "fields", "string"], "doc_len": 13}
{"doc_id": "tests/test_fields.py::TestFieldAliases.test_bool_is_boolean", "file_path": "tests/test_fields.py", "class_name": "TestFieldAliases", "func_name": "test_bool_is_boolean", "text": "文件路径: tests/test_fields.py, 类名: TestFieldAliases\n    def test_bool_is_boolean(self):\n        assert fields.Bool is fields.Boolean\n", "tokens": ["tests", "test_fields", "py", "testfieldaliases", "def", "test_bool_is_boolean", "self", "assert", "fields", "bool", "is", "fields", "boolean"], "doc_len": 13}
{"doc_id": "tests/test_fields.py::TestFieldAliases.test_URL_is_Url", "file_path": "tests/test_fields.py", "class_name": "TestFieldAliases", "func_name": "test_URL_is_Url", "text": "文件路径: tests/test_fields.py, 类名: TestFieldAliases\n    def test_URL_is_Url(self):  # flake8: noqa\n        assert fields.URL is fields.Url\n", "tokens": ["tests", "test_fields", "py", "testfieldaliases", "def", "test_url_is_url", "self", "flake8", "noqa", "assert", "fields", "url", "is", "fields", "url"], "doc_len": 15}
{"doc_id": "tests/test_fields.py::TestField.test_repr", "file_path": "tests/test_fields.py", "class_name": "TestField", "func_name": "test_repr", "text": "文件路径: tests/test_fields.py, 类名: TestField\n    def test_repr(self):\n        default = u'œ∑´'\n        field = fields.Field(default=default, attribute=None)\n        assert repr(field) == (u'<fields.Field(default={0!r}, attribute=None, '\n                                'validate=None, required=False, '\n                                'load_only=False, dump_only=False, '\n                                'missing={missing}, allow_none=False, '\n                                'error_messages={error_messages})>'\n                                .format(default, missing=missing,\n                                        error_messages=field.error_messages))\n        int_field = fields.Integer(validate=lambda x: True)\n        assert '<fields.Integer' in repr(int_field)\n", "tokens": ["tests", "test_fields", "py", "testfield", "def", "test_repr", "self", "default", "u", "field", "fields", "field", "default", "default", "attribute", "none", "assert", "repr", "field", "u", "fields", "field", "default", "0", "r", "attribute", "none", "validate", "none", "required", "false", "load_only", "false", "dump_only", "false", "missing", "missing", "allow_none", "false", "error_messages", "error_messages", "format", "default", "missing", "missing", "error_messages", "field", "error_messages", "int_field", "fields", "integer", "validate", "lambda", "x", "true", "assert", "fields", "integer", "in", "repr", "int_field"], "doc_len": 61}
{"doc_id": "tests/test_fields.py::TestField.test_error_raised_if_uncallable_validator_passed", "file_path": "tests/test_fields.py", "class_name": "TestField", "func_name": "test_error_raised_if_uncallable_validator_passed", "text": "文件路径: tests/test_fields.py, 类名: TestField\n    def test_error_raised_if_uncallable_validator_passed(self):\n        with pytest.raises(ValueError):\n            fields.Field(validate='notcallable')\n", "tokens": ["tests", "test_fields", "py", "testfield", "def", "test_error_raised_if_uncallable_validator_passed", "self", "with", "pytest", "raises", "valueerror", "fields", "field", "validate", "notcallable"], "doc_len": 15}
{"doc_id": "tests/test_fields.py::TestField.test_custom_field_receives_attr_and_obj", "file_path": "tests/test_fields.py", "class_name": "TestField", "func_name": "test_custom_field_receives_attr_and_obj", "text": "文件路径: tests/test_fields.py, 类名: TestField\n    def test_custom_field_receives_attr_and_obj(self, user):\n        class MyField(fields.Field):\n            def _deserialize(self, val, attr, data):\n                assert attr == 'name'\n                assert data['foo'] == 42\n                return val\n\n        class MySchema(Schema):\n            name = MyField()\n\n        result = MySchema().load({'name': 'Monty', 'foo': 42})\n        assert result.data == {'name': 'Monty'}\n", "tokens": ["tests", "test_fields", "py", "testfield", "def", "test_custom_field_receives_attr_and_obj", "self", "user", "class", "myfield", "fields", "field", "def", "_deserialize", "self", "val", "attr", "data", "assert", "attr", "name", "assert", "data", "foo", "42", "return", "val", "class", "myschema", "schema", "name", "myfield", "result", "myschema", "load", "name", "monty", "foo", "42", "assert", "result", "data", "name", "monty"], "doc_len": 44}
{"doc_id": "tests/test_fields.py::TestField.test_custom_field_receives_load_from_if_set", "file_path": "tests/test_fields.py", "class_name": "TestField", "func_name": "test_custom_field_receives_load_from_if_set", "text": "文件路径: tests/test_fields.py, 类名: TestField\n    def test_custom_field_receives_load_from_if_set(self, user):\n        class MyField(fields.Field):\n            def _deserialize(self, val, attr, data):\n                assert attr == 'name'\n                assert data['foo'] == 42\n                return val\n\n        class MySchema(Schema):\n            Name = MyField(load_from='name')\n\n        result = MySchema().load({'name': 'Monty', 'foo': 42})\n        assert result.data == {'Name': 'Monty'}\n", "tokens": ["tests", "test_fields", "py", "testfield", "def", "test_custom_field_receives_load_from_if_set", "self", "user", "class", "myfield", "fields", "field", "def", "_deserialize", "self", "val", "attr", "data", "assert", "attr", "name", "assert", "data", "foo", "42", "return", "val", "class", "myschema", "schema", "name", "myfield", "load_from", "name", "result", "myschema", "load", "name", "monty", "foo", "42", "assert", "result", "data", "name", "monty"], "doc_len": 46}
{"doc_id": "tests/test_fields.py::TestField.test_custom_field_follows_dump_to_if_set", "file_path": "tests/test_fields.py", "class_name": "TestField", "func_name": "test_custom_field_follows_dump_to_if_set", "text": "文件路径: tests/test_fields.py, 类名: TestField\n    def test_custom_field_follows_dump_to_if_set(self, user):\n        class MyField(fields.Field):\n            def _serialize(self, val, attr, data):\n                assert attr == 'name'\n                assert data['foo'] == 42\n                return val\n\n        class MySchema(Schema):\n            name = MyField(dump_to='_NaMe')\n\n        result = MySchema().dump({'name': 'Monty', 'foo': 42})\n        assert result.data == {'_NaMe': 'Monty'}\n", "tokens": ["tests", "test_fields", "py", "testfield", "def", "test_custom_field_follows_dump_to_if_set", "self", "user", "class", "myfield", "fields", "field", "def", "_serialize", "self", "val", "attr", "data", "assert", "attr", "name", "assert", "data", "foo", "42", "return", "val", "class", "myschema", "schema", "name", "myfield", "dump_to", "_name", "result", "myschema", "dump", "name", "monty", "foo", "42", "assert", "result", "data", "_name", "monty"], "doc_len": 46}
{"doc_id": "tests/test_fields.py::TestParentAndName.schema", "file_path": "tests/test_fields.py", "class_name": "TestParentAndName", "func_name": "schema", "text": "文件路径: tests/test_fields.py, 类名: TestParentAndName\n    def schema(self):\n        return self.MySchema()\n", "tokens": ["tests", "test_fields", "py", "testparentandname", "def", "schema", "self", "return", "self", "myschema"], "doc_len": 10}
{"doc_id": "tests/test_fields.py::TestParentAndName.test_simple_field_parent_and_name", "file_path": "tests/test_fields.py", "class_name": "TestParentAndName", "func_name": "test_simple_field_parent_and_name", "text": "文件路径: tests/test_fields.py, 类名: TestParentAndName\n    def test_simple_field_parent_and_name(self, schema):\n        assert schema.fields['foo'].parent == schema\n        assert schema.fields['foo'].name == 'foo'\n        assert schema.fields['bar'].parent == schema\n        assert schema.fields['bar'].name == 'bar'\n", "tokens": ["tests", "test_fields", "py", "testparentandname", "def", "test_simple_field_parent_and_name", "self", "schema", "assert", "schema", "fields", "foo", "parent", "schema", "assert", "schema", "fields", "foo", "name", "foo", "assert", "schema", "fields", "bar", "parent", "schema", "assert", "schema", "fields", "bar", "name", "bar"], "doc_len": 32}
{"doc_id": "tests/test_fields.py::TestParentAndName.test_unbound_field_root_returns_none", "file_path": "tests/test_fields.py", "class_name": "TestParentAndName", "func_name": "test_unbound_field_root_returns_none", "text": "文件路径: tests/test_fields.py, 类名: TestParentAndName\n    def test_unbound_field_root_returns_none(self):\n        field = fields.Str()\n        assert field.root is None\n\n        inner_field = fields.Nested(self.MySchema())\n        outer_field = fields.List(inner_field)\n\n        assert outer_field.root is None\n        assert inner_field.root is None\n", "tokens": ["tests", "test_fields", "py", "testparentandname", "def", "test_unbound_field_root_returns_none", "self", "field", "fields", "str", "assert", "field", "root", "is", "none", "inner_field", "fields", "nested", "self", "myschema", "outer_field", "fields", "list", "inner_field", "assert", "outer_field", "root", "is", "none", "assert", "inner_field", "root", "is", "none"], "doc_len": 34}
{"doc_id": "tests/test_fields.py::TestParentAndName.test_list_field_inner_parent_and_name", "file_path": "tests/test_fields.py", "class_name": "TestParentAndName", "func_name": "test_list_field_inner_parent_and_name", "text": "文件路径: tests/test_fields.py, 类名: TestParentAndName\n    def test_list_field_inner_parent_and_name(self, schema):\n        assert schema.fields['bar'].container.parent == schema.fields['bar']\n        assert schema.fields['bar'].container.name == 'bar'\n", "tokens": ["tests", "test_fields", "py", "testparentandname", "def", "test_list_field_inner_parent_and_name", "self", "schema", "assert", "schema", "fields", "bar", "container", "parent", "schema", "fields", "bar", "assert", "schema", "fields", "bar", "container", "name", "bar"], "doc_len": 24}
{"doc_id": "tests/test_fields.py::TestParentAndName.test_simple_field_root", "file_path": "tests/test_fields.py", "class_name": "TestParentAndName", "func_name": "test_simple_field_root", "text": "文件路径: tests/test_fields.py, 类名: TestParentAndName\n    def test_simple_field_root(self, schema):\n        assert schema.fields['foo'].root == schema\n        assert schema.fields['bar'].root == schema\n", "tokens": ["tests", "test_fields", "py", "testparentandname", "def", "test_simple_field_root", "self", "schema", "assert", "schema", "fields", "foo", "root", "schema", "assert", "schema", "fields", "bar", "root", "schema"], "doc_len": 20}
{"doc_id": "tests/test_fields.py::TestParentAndName.test_list_field_inner_root", "file_path": "tests/test_fields.py", "class_name": "TestParentAndName", "func_name": "test_list_field_inner_root", "text": "文件路径: tests/test_fields.py, 类名: TestParentAndName\n    def test_list_field_inner_root(self, schema):\n        assert schema.fields['bar'].container.root == schema\n", "tokens": ["tests", "test_fields", "py", "testparentandname", "def", "test_list_field_inner_root", "self", "schema", "assert", "schema", "fields", "bar", "container", "root", "schema"], "doc_len": 15}
{"doc_id": "tests/test_fields.py::TestParentAndName.test_list_root_inheritance", "file_path": "tests/test_fields.py", "class_name": "TestParentAndName", "func_name": "test_list_root_inheritance", "text": "文件路径: tests/test_fields.py, 类名: TestParentAndName\n    def test_list_root_inheritance(self, schema):\n        class OtherSchema(TestParentAndName.MySchema):\n            pass\n        schema2 = OtherSchema()\n        assert schema.fields['bar'].container.root == schema\n        assert schema2.fields['bar'].container.root == schema2\n", "tokens": ["tests", "test_fields", "py", "testparentandname", "def", "test_list_root_inheritance", "self", "schema", "class", "otherschema", "testparentandname", "myschema", "pass", "schema2", "otherschema", "assert", "schema", "fields", "bar", "container", "root", "schema", "assert", "schema2", "fields", "bar", "container", "root", "schema2"], "doc_len": 29}
{"doc_id": "tests/test_fields.py::TestMetadata.test_extra_metadata_may_be_added_to_field", "file_path": "tests/test_fields.py", "class_name": "TestMetadata", "func_name": "test_extra_metadata_may_be_added_to_field", "text": "文件路径: tests/test_fields.py, 类名: TestMetadata\n    def test_extra_metadata_may_be_added_to_field(self, FieldClass):  # noqa\n        field = FieldClass(description='Just a normal field.')\n        assert field.metadata['description'] == 'Just a normal field.'\n        field = FieldClass(required=True, default=None, validate=lambda v: True,\n                            description='foo', widget='select')\n        assert field.metadata == {'description': 'foo', 'widget': 'select'}\n", "tokens": ["tests", "test_fields", "py", "testmetadata", "def", "test_extra_metadata_may_be_added_to_field", "self", "fieldclass", "noqa", "field", "fieldclass", "description", "just", "a", "normal", "field", "assert", "field", "metadata", "description", "just", "a", "normal", "field", "field", "fieldclass", "required", "true", "default", "none", "validate", "lambda", "v", "true", "description", "foo", "widget", "select", "assert", "field", "metadata", "description", "foo", "widget", "select"], "doc_len": 45}
{"doc_id": "tests/test_fields.py::TestMetadata.test_metadata_may_be_added_to_formatted_string_field", "file_path": "tests/test_fields.py", "class_name": "TestMetadata", "func_name": "test_metadata_may_be_added_to_formatted_string_field", "text": "文件路径: tests/test_fields.py, 类名: TestMetadata\n    def test_metadata_may_be_added_to_formatted_string_field(self):\n        field = fields.FormattedString('hello {name}', description='a greeting')\n        assert field.metadata == {'description': 'a greeting'}\n", "tokens": ["tests", "test_fields", "py", "testmetadata", "def", "test_metadata_may_be_added_to_formatted_string_field", "self", "field", "fields", "formattedstring", "hello", "name", "description", "a", "greeting", "assert", "field", "metadata", "description", "a", "greeting"], "doc_len": 21}
{"doc_id": "tests/test_fields.py::TestErrorMessages.test_default_error_messages_get_merged_with_parent_error_messages", "file_path": "tests/test_fields.py", "class_name": "TestErrorMessages", "func_name": "test_default_error_messages_get_merged_with_parent_error_messages", "text": "文件路径: tests/test_fields.py, 类名: TestErrorMessages\n    def test_default_error_messages_get_merged_with_parent_error_messages(self):\n        field = self.MyField()\n        assert field.error_messages['custom'] == 'Custom error message'\n        assert 'required' in field.error_messages\n", "tokens": ["tests", "test_fields", "py", "testerrormessages", "def", "test_default_error_messages_get_merged_with_parent_error_messages", "self", "field", "self", "myfield", "assert", "field", "error_messages", "custom", "custom", "error", "message", "assert", "required", "in", "field", "error_messages"], "doc_len": 22}
{"doc_id": "tests/test_fields.py::TestErrorMessages.test_default_error_messages_get_merged_with_parent_error_messages", "file_path": "tests/test_fields.py", "class_name": "TestErrorMessages", "func_name": "test_default_error_messages_get_merged_with_parent_error_messages", "text": "文件路径: tests/test_fields.py, 类名: TestErrorMessages\n    def test_default_error_messages_get_merged_with_parent_error_messages(self):\n        field = self.MyField(error_messages={'passed': 'Passed error message'})\n        assert field.error_messages['passed'] == 'Passed error message'\n", "tokens": ["tests", "test_fields", "py", "testerrormessages", "def", "test_default_error_messages_get_merged_with_parent_error_messages", "self", "field", "self", "myfield", "error_messages", "passed", "passed", "error", "message", "assert", "field", "error_messages", "passed", "passed", "error", "message"], "doc_len": 22}
{"doc_id": "tests/test_fields.py::TestErrorMessages.test_fail", "file_path": "tests/test_fields.py", "class_name": "TestErrorMessages", "func_name": "test_fail", "text": "文件路径: tests/test_fields.py, 类名: TestErrorMessages\n    def test_fail(self):\n        field = self.MyField()\n\n        with pytest.raises(ValidationError) as excinfo:\n            field.fail('required')\n        assert excinfo.value.args[0] == 'Missing data for required field.'\n\n        with pytest.raises(ValidationError) as excinfo:\n            field.fail('null')\n        assert excinfo.value.args[0] == 'Field may not be null.'\n\n        with pytest.raises(ValidationError) as excinfo:\n            field.fail('custom')\n        assert excinfo.value.args[0] == 'Custom error message.'\n\n        with pytest.raises(ValidationError) as excinfo:\n            field.fail('validator_failed')\n        assert excinfo.value.args[0] == 'Invalid value.'\n\n        with pytest.raises(AssertionError) as excinfo:\n            field.fail('doesntexist')\n\n        assert 'doesntexist' in excinfo.value.args[0]\n        assert 'MyField' in excinfo.value.args[0]\n", "tokens": ["tests", "test_fields", "py", "testerrormessages", "def", "test_fail", "self", "field", "self", "myfield", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "fail", "required", "assert", "excinfo", "value", "args", "0", "missing", "data", "for", "required", "field", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "fail", "null", "assert", "excinfo", "value", "args", "0", "field", "may", "not", "be", "null", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "fail", "custom", "assert", "excinfo", "value", "args", "0", "custom", "error", "message", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "fail", "validator_failed", "assert", "excinfo", "value", "args", "0", "invalid", "value", "with", "pytest", "raises", "assertionerror", "as", "excinfo", "field", "fail", "doesntexist", "assert", "doesntexist", "in", "excinfo", "value", "args", "0", "assert", "myfield", "in", "excinfo", "value", "args", "0"], "doc_len": 104}
{"doc_id": "tests/test_marshalling.py::test_missing_is_falsy", "file_path": "tests/test_marshalling.py", "class_name": null, "func_name": "test_missing_is_falsy", "text": "文件路径: tests/test_marshalling.py\ndef test_missing_is_falsy():\n    assert bool(missing) is False\n", "tokens": ["tests", "test_marshalling", "py", "def", "test_missing_is_falsy", "assert", "bool", "missing", "is", "false"], "doc_len": 10}
{"doc_id": "tests/test_marshalling.py::TestMarshaller.marshal", "file_path": "tests/test_marshalling.py", "class_name": "TestMarshaller", "func_name": "marshal", "text": "文件路径: tests/test_marshalling.py, 类名: TestMarshaller\n    def marshal(self):\n        return Marshaller()\n", "tokens": ["tests", "test_marshalling", "py", "testmarshaller", "def", "marshal", "self", "return", "marshaller"], "doc_len": 9}
{"doc_id": "tests/test_marshalling.py::TestMarshaller.test_prefix", "file_path": "tests/test_marshalling.py", "class_name": "TestMarshaller", "func_name": "test_prefix", "text": "文件路径: tests/test_marshalling.py, 类名: TestMarshaller\n    def test_prefix(self):\n        u = User(\"Foo\", email=\"foo@bar.com\")\n        marshal = Marshaller(prefix='usr_')\n        result = marshal(u, {\"email\": fields.Email(), 'name': fields.String()})\n        assert result['usr_name'] == u.name\n        assert result['usr_email'] == u.email\n", "tokens": ["tests", "test_marshalling", "py", "testmarshaller", "def", "test_prefix", "self", "u", "user", "foo", "email", "foo", "bar", "com", "marshal", "marshaller", "prefix", "usr_", "result", "marshal", "u", "email", "fields", "email", "name", "fields", "string", "assert", "result", "usr_name", "u", "name", "assert", "result", "usr_email", "u", "email"], "doc_len": 37}
{"doc_id": "tests/test_marshalling.py::TestMarshaller.test_marshalling_generator", "file_path": "tests/test_marshalling.py", "class_name": "TestMarshaller", "func_name": "test_marshalling_generator", "text": "文件路径: tests/test_marshalling.py, 类名: TestMarshaller\n    def test_marshalling_generator(self, marshal):\n        gen = (u for u in [User(\"Foo\"), User(\"Bar\")])\n        res = marshal(gen, {\"name\": fields.String()}, many=True)\n        assert len(res) == 2\n", "tokens": ["tests", "test_marshalling", "py", "testmarshaller", "def", "test_marshalling_generator", "self", "marshal", "gen", "u", "for", "u", "in", "user", "foo", "user", "bar", "res", "marshal", "gen", "name", "fields", "string", "many", "true", "assert", "len", "res", "2"], "doc_len": 29}
{"doc_id": "tests/test_marshalling.py::TestMarshaller.test_default_to_missing", "file_path": "tests/test_marshalling.py", "class_name": "TestMarshaller", "func_name": "test_default_to_missing", "text": "文件路径: tests/test_marshalling.py, 类名: TestMarshaller\n    def test_default_to_missing(self, marshal):\n        u = {'name': 'Foo'}\n        res = marshal(u, {'name': fields.String(),\n                         'email': fields.Email(default=missing)})\n        assert res['name'] == u['name']\n        assert 'email' not in res\n", "tokens": ["tests", "test_marshalling", "py", "testmarshaller", "def", "test_default_to_missing", "self", "marshal", "u", "name", "foo", "res", "marshal", "u", "name", "fields", "string", "email", "fields", "email", "default", "missing", "assert", "res", "name", "u", "name", "assert", "email", "not", "in", "res"], "doc_len": 32}
{"doc_id": "tests/test_marshalling.py::TestMarshaller.test_serialize_fields_with_load_only_param", "file_path": "tests/test_marshalling.py", "class_name": "TestMarshaller", "func_name": "test_serialize_fields_with_load_only_param", "text": "文件路径: tests/test_marshalling.py, 类名: TestMarshaller\n    def test_serialize_fields_with_load_only_param(self, marshal):\n        u = User('Foo', email='foo@bar.com')\n        fields_dict = {\n            'name': fields.String(),\n            'email': fields.Email(load_only=True),\n        }\n        result = marshal(u, fields_dict)\n        assert result['name'] == 'Foo'\n        assert 'email' not in result\n", "tokens": ["tests", "test_marshalling", "py", "testmarshaller", "def", "test_serialize_fields_with_load_only_param", "self", "marshal", "u", "user", "foo", "email", "foo", "bar", "com", "fields_dict", "name", "fields", "string", "email", "fields", "email", "load_only", "true", "result", "marshal", "u", "fields_dict", "assert", "result", "name", "foo", "assert", "email", "not", "in", "result"], "doc_len": 37}
{"doc_id": "tests/test_marshalling.py::TestMarshaller.test_missing_data_are_skipped", "file_path": "tests/test_marshalling.py", "class_name": "TestMarshaller", "func_name": "test_missing_data_are_skipped", "text": "文件路径: tests/test_marshalling.py, 类名: TestMarshaller\n    def test_missing_data_are_skipped(self, marshal):\n        assert marshal({}, {'foo': fields.Field()}) == {}\n        assert marshal({}, {'foo': fields.Str()}) == {}\n        assert marshal({}, {'foo': fields.Int()}) == {}\n        assert marshal({}, {'foo': fields.Int(as_string=True)}) == {}\n        assert marshal({}, {'foo': fields.Decimal(as_string=True)}) == {}\n", "tokens": ["tests", "test_marshalling", "py", "testmarshaller", "def", "test_missing_data_are_skipped", "self", "marshal", "assert", "marshal", "foo", "fields", "field", "assert", "marshal", "foo", "fields", "str", "assert", "marshal", "foo", "fields", "int", "assert", "marshal", "foo", "fields", "int", "as_string", "true", "assert", "marshal", "foo", "fields", "decimal", "as_string", "true"], "doc_len": 37}
{"doc_id": "tests/test_marshalling.py::TestMarshaller.test_serialize_with_load_only_doesnt_validate", "file_path": "tests/test_marshalling.py", "class_name": "TestMarshaller", "func_name": "test_serialize_with_load_only_doesnt_validate", "text": "文件路径: tests/test_marshalling.py, 类名: TestMarshaller\n    def test_serialize_with_load_only_doesnt_validate(self, marshal):\n        fields_dict = {\n            'email': fields.Email(load_only=True)\n        }\n        marshal({'email': 'invalid'}, fields_dict)\n        assert 'email' not in marshal.errors\n", "tokens": ["tests", "test_marshalling", "py", "testmarshaller", "def", "test_serialize_with_load_only_doesnt_validate", "self", "marshal", "fields_dict", "email", "fields", "email", "load_only", "true", "marshal", "email", "invalid", "fields_dict", "assert", "email", "not", "in", "marshal", "errors"], "doc_len": 24}
{"doc_id": "tests/test_marshalling.py::TestMarshaller.test_serialize_fields_with_dump_to_param", "file_path": "tests/test_marshalling.py", "class_name": "TestMarshaller", "func_name": "test_serialize_fields_with_dump_to_param", "text": "文件路径: tests/test_marshalling.py, 类名: TestMarshaller\n    def test_serialize_fields_with_dump_to_param(self, marshal):\n        data = {\n            'name': 'Mike',\n            'email': 'm@wazow.ski',\n        }\n        fields_dict = {\n            'name': fields.String(dump_to='NaMe'),\n            'email': fields.Email(attribute='email', dump_to='EmAiL'),\n        }\n        result = marshal.serialize(data, fields_dict)\n        assert result['NaMe'] == 'Mike'\n        assert result['EmAiL'] == 'm@wazow.ski'\n", "tokens": ["tests", "test_marshalling", "py", "testmarshaller", "def", "test_serialize_fields_with_dump_to_param", "self", "marshal", "data", "name", "mike", "email", "m", "wazow", "ski", "fields_dict", "name", "fields", "string", "dump_to", "name", "email", "fields", "email", "attribute", "email", "dump_to", "email", "result", "marshal", "serialize", "data", "fields_dict", "assert", "result", "name", "mike", "assert", "result", "email", "m", "wazow", "ski"], "doc_len": 43}
{"doc_id": "tests/test_marshalling.py::TestMarshaller.test_serialize_fields_with_dump_to_and_prefix_params", "file_path": "tests/test_marshalling.py", "class_name": "TestMarshaller", "func_name": "test_serialize_fields_with_dump_to_and_prefix_params", "text": "文件路径: tests/test_marshalling.py, 类名: TestMarshaller\n    def test_serialize_fields_with_dump_to_and_prefix_params(self):\n        u = User(\"Foo\", email=\"foo@bar.com\")\n        marshal = Marshaller(prefix='usr_')\n        result = marshal(u, {\"email\": fields.Email(dump_to='EmAiL'),\n                             'name': fields.String(dump_to='NaMe')})\n        assert result['usr_NaMe'] == u.name\n        assert result['usr_EmAiL'] == u.email\n", "tokens": ["tests", "test_marshalling", "py", "testmarshaller", "def", "test_serialize_fields_with_dump_to_and_prefix_params", "self", "u", "user", "foo", "email", "foo", "bar", "com", "marshal", "marshaller", "prefix", "usr_", "result", "marshal", "u", "email", "fields", "email", "dump_to", "email", "name", "fields", "string", "dump_to", "name", "assert", "result", "usr_name", "u", "name", "assert", "result", "usr_email", "u", "email"], "doc_len": 41}
{"doc_id": "tests/test_marshalling.py::TestMarshaller.test_stores_indices_of_errors_when_many_equals_true", "file_path": "tests/test_marshalling.py", "class_name": "TestMarshaller", "func_name": "test_stores_indices_of_errors_when_many_equals_true", "text": "文件路径: tests/test_marshalling.py, 类名: TestMarshaller\n    def test_stores_indices_of_errors_when_many_equals_true(self, marshal):\n        users = [\n            {'email': 'bar@example.com'},\n            {'email': 'foobar'},\n            {'email': 'invalid'},\n        ]\n        try:\n            marshal(users, {'email': fields.Email()}, many=True)\n        except ValidationError:\n            pass\n        # 2nd and 3rd elements have an error\n        assert 1 in marshal.errors\n        assert 2 in marshal.errors\n        assert 'email' in marshal.errors[1]\n        assert 'email' in marshal.errors[2]\n", "tokens": ["tests", "test_marshalling", "py", "testmarshaller", "def", "test_stores_indices_of_errors_when_many_equals_true", "self", "marshal", "users", "email", "bar", "example", "com", "email", "foobar", "email", "invalid", "try", "marshal", "users", "email", "fields", "email", "many", "true", "except", "validationerror", "pass", "2nd", "and", "3rd", "elements", "have", "an", "error", "assert", "1", "in", "marshal", "errors", "assert", "2", "in", "marshal", "errors", "assert", "email", "in", "marshal", "errors", "1", "assert", "email", "in", "marshal", "errors", "2"], "doc_len": 57}
{"doc_id": "tests/test_marshalling.py::TestMarshaller.test_doesnt_store_errors_when_index_errors_equals_false", "file_path": "tests/test_marshalling.py", "class_name": "TestMarshaller", "func_name": "test_doesnt_store_errors_when_index_errors_equals_false", "text": "文件路径: tests/test_marshalling.py, 类名: TestMarshaller\n    def test_doesnt_store_errors_when_index_errors_equals_false(self, marshal):\n        users = [\n            {'email': 'bar@example.com'},\n            {'email': 'foobar'},\n            {'email': 'invalid'},\n        ]\n        try:\n            marshal(users, {'email': fields.Email()}, many=True, index_errors=False)\n        except ValidationError:\n            pass\n        assert 1 not in marshal.errors\n        assert 'email' in marshal.errors\n", "tokens": ["tests", "test_marshalling", "py", "testmarshaller", "def", "test_doesnt_store_errors_when_index_errors_equals_false", "self", "marshal", "users", "email", "bar", "example", "com", "email", "foobar", "email", "invalid", "try", "marshal", "users", "email", "fields", "email", "many", "true", "index_errors", "false", "except", "validationerror", "pass", "assert", "1", "not", "in", "marshal", "errors", "assert", "email", "in", "marshal", "errors"], "doc_len": 41}
{"doc_id": "tests/test_marshalling.py::TestUnmarshaller.unmarshal", "file_path": "tests/test_marshalling.py", "class_name": "TestUnmarshaller", "func_name": "unmarshal", "text": "文件路径: tests/test_marshalling.py, 类名: TestUnmarshaller\n    def unmarshal(self):\n        return Unmarshaller()\n", "tokens": ["tests", "test_marshalling", "py", "testunmarshaller", "def", "unmarshal", "self", "return", "unmarshaller"], "doc_len": 9}
{"doc_id": "tests/test_marshalling.py::TestUnmarshaller.test_extra_data_is_ignored", "file_path": "tests/test_marshalling.py", "class_name": "TestUnmarshaller", "func_name": "test_extra_data_is_ignored", "text": "文件路径: tests/test_marshalling.py, 类名: TestUnmarshaller\n    def test_extra_data_is_ignored(self, unmarshal):\n        fields_ = {'name': fields.Str()}\n        ret = unmarshal({'extra': 42, 'name': 'Steve'}, fields_)\n        assert 'extra' not in ret\n", "tokens": ["tests", "test_marshalling", "py", "testunmarshaller", "def", "test_extra_data_is_ignored", "self", "unmarshal", "fields_", "name", "fields", "str", "ret", "unmarshal", "extra", "42", "name", "steve", "fields_", "assert", "extra", "not", "in", "ret"], "doc_len": 24}
{"doc_id": "tests/test_marshalling.py::TestUnmarshaller.test_stores_errors", "file_path": "tests/test_marshalling.py", "class_name": "TestUnmarshaller", "func_name": "test_stores_errors", "text": "文件路径: tests/test_marshalling.py, 类名: TestUnmarshaller\n    def test_stores_errors(self, unmarshal):\n        data = {'email': 'invalid-email'}\n        try:\n            unmarshal(data, {\"email\": fields.Email()})\n        except ValidationError:\n            pass\n        assert \"email\" in unmarshal.errors\n", "tokens": ["tests", "test_marshalling", "py", "testunmarshaller", "def", "test_stores_errors", "self", "unmarshal", "data", "email", "invalid", "email", "try", "unmarshal", "data", "email", "fields", "email", "except", "validationerror", "pass", "assert", "email", "in", "unmarshal", "errors"], "doc_len": 26}
{"doc_id": "tests/test_marshalling.py::TestUnmarshaller.test_stores_indices_of_errors_when_many_equals_true", "file_path": "tests/test_marshalling.py", "class_name": "TestUnmarshaller", "func_name": "test_stores_indices_of_errors_when_many_equals_true", "text": "文件路径: tests/test_marshalling.py, 类名: TestUnmarshaller\n    def test_stores_indices_of_errors_when_many_equals_true(self, unmarshal):\n        users = [\n            {'email': 'bar@example.com'},\n            {'email': 'foobar'},\n            {'email': 'invalid'},\n        ]\n        try:\n            unmarshal(users, {'email': fields.Email()}, many=True)\n        except ValidationError:\n            pass\n        # 2nd and 3rd elements have an error\n        assert 1 in unmarshal.errors\n        assert 2 in unmarshal.errors\n        assert 'email' in unmarshal.errors[1]\n        assert 'email' in unmarshal.errors[2]\n", "tokens": ["tests", "test_marshalling", "py", "testunmarshaller", "def", "test_stores_indices_of_errors_when_many_equals_true", "self", "unmarshal", "users", "email", "bar", "example", "com", "email", "foobar", "email", "invalid", "try", "unmarshal", "users", "email", "fields", "email", "many", "true", "except", "validationerror", "pass", "2nd", "and", "3rd", "elements", "have", "an", "error", "assert", "1", "in", "unmarshal", "errors", "assert", "2", "in", "unmarshal", "errors", "assert", "email", "in", "unmarshal", "errors", "1", "assert", "email", "in", "unmarshal", "errors", "2"], "doc_len": 57}
{"doc_id": "tests/test_marshalling.py::TestUnmarshaller.test_doesnt_store_errors_when_index_errors_equals_false", "file_path": "tests/test_marshalling.py", "class_name": "TestUnmarshaller", "func_name": "test_doesnt_store_errors_when_index_errors_equals_false", "text": "文件路径: tests/test_marshalling.py, 类名: TestUnmarshaller\n    def test_doesnt_store_errors_when_index_errors_equals_false(self, unmarshal):\n        users = [\n            {'email': 'bar@example.com'},\n            {'email': 'foobar'},\n            {'email': 'invalid'},\n        ]\n        try:\n            unmarshal(users, {'email': fields.Email()}, many=True, index_errors=False)\n        except ValidationError:\n            pass\n        assert 1 not in unmarshal.errors\n        assert 'email' in unmarshal.errors\n", "tokens": ["tests", "test_marshalling", "py", "testunmarshaller", "def", "test_doesnt_store_errors_when_index_errors_equals_false", "self", "unmarshal", "users", "email", "bar", "example", "com", "email", "foobar", "email", "invalid", "try", "unmarshal", "users", "email", "fields", "email", "many", "true", "index_errors", "false", "except", "validationerror", "pass", "assert", "1", "not", "in", "unmarshal", "errors", "assert", "email", "in", "unmarshal", "errors"], "doc_len": 41}
{"doc_id": "tests/test_marshalling.py::TestUnmarshaller.test_deserialize", "file_path": "tests/test_marshalling.py", "class_name": "TestUnmarshaller", "func_name": "test_deserialize", "text": "文件路径: tests/test_marshalling.py, 类名: TestUnmarshaller\n    def test_deserialize(self, unmarshal):\n        user_data = {\n            'age': '12'\n        }\n        result = unmarshal.deserialize(user_data, {'age': fields.Integer()})\n        assert result['age'] == 12\n", "tokens": ["tests", "test_marshalling", "py", "testunmarshaller", "def", "test_deserialize", "self", "unmarshal", "user_data", "age", "12", "result", "unmarshal", "deserialize", "user_data", "age", "fields", "integer", "assert", "result", "age", "12"], "doc_len": 22}
{"doc_id": "tests/test_marshalling.py::TestUnmarshaller.test_extra_fields", "file_path": "tests/test_marshalling.py", "class_name": "TestUnmarshaller", "func_name": "test_extra_fields", "text": "文件路径: tests/test_marshalling.py, 类名: TestUnmarshaller\n    def test_extra_fields(self, unmarshal):\n        data = {'name': 'Mick'}\n        fields_dict = {'name': fields.String(), 'age': fields.Integer()}\n        # data doesn't have to have all the fields in the schema\n        result = unmarshal(data, fields_dict)\n        assert result['name'] == data['name']\n        assert 'age' not in result\n", "tokens": ["tests", "test_marshalling", "py", "testunmarshaller", "def", "test_extra_fields", "self", "unmarshal", "data", "name", "mick", "fields_dict", "name", "fields", "string", "age", "fields", "integer", "data", "doesn", "t", "have", "to", "have", "all", "the", "fields", "in", "the", "schema", "result", "unmarshal", "data", "fields_dict", "assert", "result", "name", "data", "name", "assert", "age", "not", "in", "result"], "doc_len": 44}
{"doc_id": "tests/test_marshalling.py::TestUnmarshaller.test_deserialize_many", "file_path": "tests/test_marshalling.py", "class_name": "TestUnmarshaller", "func_name": "test_deserialize_many", "text": "文件路径: tests/test_marshalling.py, 类名: TestUnmarshaller\n    def test_deserialize_many(self, unmarshal):\n        users_data = [\n            {'name': 'Mick', 'age': '71'},\n            {'name': 'Keith', 'age': '70'}\n        ]\n        fields_dict = {\n            'name': fields.String(),\n            'age': fields.Integer(),\n        }\n        result = unmarshal.deserialize(users_data, fields_dict, many=True)\n        assert isinstance(result, list)\n        user = result[0]\n        assert user['age'] == 71\n", "tokens": ["tests", "test_marshalling", "py", "testunmarshaller", "def", "test_deserialize_many", "self", "unmarshal", "users_data", "name", "mick", "age", "71", "name", "keith", "age", "70", "fields_dict", "name", "fields", "string", "age", "fields", "integer", "result", "unmarshal", "deserialize", "users_data", "fields_dict", "many", "true", "assert", "isinstance", "result", "list", "user", "result", "0", "assert", "user", "age", "71"], "doc_len": 42}
{"doc_id": "tests/test_marshalling.py::TestUnmarshaller.test_deserialize_stores_errors", "file_path": "tests/test_marshalling.py", "class_name": "TestUnmarshaller", "func_name": "test_deserialize_stores_errors", "text": "文件路径: tests/test_marshalling.py, 类名: TestUnmarshaller\n    def test_deserialize_stores_errors(self, unmarshal):\n        user_data = {\n            'email': 'invalid',\n            'age': 'nan',\n            'name': 'Valid Name',\n        }\n        fields_dict = {\n            'email': fields.Email(),\n            'age': fields.Integer(),\n            'name': fields.String(),\n        }\n        try:\n            unmarshal(user_data, fields_dict)\n        except ValidationError:\n            pass\n        errors = unmarshal.errors\n        assert 'email' in errors\n        assert 'age' in errors\n        assert 'name' not in errors\n", "tokens": ["tests", "test_marshalling", "py", "testunmarshaller", "def", "test_deserialize_stores_errors", "self", "unmarshal", "user_data", "email", "invalid", "age", "nan", "name", "valid", "name", "fields_dict", "email", "fields", "email", "age", "fields", "integer", "name", "fields", "string", "try", "unmarshal", "user_data", "fields_dict", "except", "validationerror", "pass", "errors", "unmarshal", "errors", "assert", "email", "in", "errors", "assert", "age", "in", "errors", "assert", "name", "not", "in", "errors"], "doc_len": 49}
{"doc_id": "tests/test_marshalling.py::TestUnmarshaller.test_deserialize_fields_with_attribute_param", "file_path": "tests/test_marshalling.py", "class_name": "TestUnmarshaller", "func_name": "test_deserialize_fields_with_attribute_param", "text": "文件路径: tests/test_marshalling.py, 类名: TestUnmarshaller\n    def test_deserialize_fields_with_attribute_param(self, unmarshal):\n        data = {\n            'username': 'mick@stones.com',\n            'name': 'Mick'\n        }\n        fields_dict = {\n            'username': fields.Email(attribute='email'),\n            'name': fields.String(attribute='firstname'),\n        }\n        result = unmarshal.deserialize(data, fields_dict)\n        assert result['email'] == 'mick@stones.com'\n        assert result['firstname'] == 'Mick'\n", "tokens": ["tests", "test_marshalling", "py", "testunmarshaller", "def", "test_deserialize_fields_with_attribute_param", "self", "unmarshal", "data", "username", "mick", "stones", "com", "name", "mick", "fields_dict", "username", "fields", "email", "attribute", "email", "name", "fields", "string", "attribute", "firstname", "result", "unmarshal", "deserialize", "data", "fields_dict", "assert", "result", "email", "mick", "stones", "com", "assert", "result", "firstname", "mick"], "doc_len": 41}
{"doc_id": "tests/test_marshalling.py::TestUnmarshaller.test_deserialize_fields_with_load_from_param", "file_path": "tests/test_marshalling.py", "class_name": "TestUnmarshaller", "func_name": "test_deserialize_fields_with_load_from_param", "text": "文件路径: tests/test_marshalling.py, 类名: TestUnmarshaller\n    def test_deserialize_fields_with_load_from_param(self, unmarshal):\n        data = {\n            'Name': 'Mick',\n            'UserName': 'foo@bar.com',\n            'years': '42'\n        }\n        fields_dict = {\n            'name': fields.String(load_from='Name'),\n            'username': fields.Email(attribute='email', load_from='UserName'),\n            'years': fields.Integer(attribute='age', load_from='Years')\n        }\n        result = unmarshal.deserialize(data, fields_dict)\n        assert result['name'] == 'Mick'\n        assert result['email'] == 'foo@bar.com'\n        assert result['age'] == 42\n", "tokens": ["tests", "test_marshalling", "py", "testunmarshaller", "def", "test_deserialize_fields_with_load_from_param", "self", "unmarshal", "data", "name", "mick", "username", "foo", "bar", "com", "years", "42", "fields_dict", "name", "fields", "string", "load_from", "name", "username", "fields", "email", "attribute", "email", "load_from", "username", "years", "fields", "integer", "attribute", "age", "load_from", "years", "result", "unmarshal", "deserialize", "data", "fields_dict", "assert", "result", "name", "mick", "assert", "result", "email", "foo", "bar", "com", "assert", "result", "age", "42"], "doc_len": 56}
{"doc_id": "tests/test_marshalling.py::TestUnmarshaller.test_deserialize_fields_with_dump_only_param", "file_path": "tests/test_marshalling.py", "class_name": "TestUnmarshaller", "func_name": "test_deserialize_fields_with_dump_only_param", "text": "文件路径: tests/test_marshalling.py, 类名: TestUnmarshaller\n    def test_deserialize_fields_with_dump_only_param(self, unmarshal):\n        data = {\n            'name': 'Mick',\n            'years': '42',\n        }\n        fields_dict = {\n            'name': fields.String(),\n            'years': fields.Integer(dump_only=True),\n            'always_invalid': fields.Field(validate=lambda f: False, dump_only=True)\n        }\n        result = unmarshal.deserialize(data, fields_dict)\n        assert result['name'] == 'Mick'\n        assert 'years' not in result\n\n        assert 'always_invalid' not in unmarshal.errors\n", "tokens": ["tests", "test_marshalling", "py", "testunmarshaller", "def", "test_deserialize_fields_with_dump_only_param", "self", "unmarshal", "data", "name", "mick", "years", "42", "fields_dict", "name", "fields", "string", "years", "fields", "integer", "dump_only", "true", "always_invalid", "fields", "field", "validate", "lambda", "f", "false", "dump_only", "true", "result", "unmarshal", "deserialize", "data", "fields_dict", "assert", "result", "name", "mick", "assert", "years", "not", "in", "result", "assert", "always_invalid", "not", "in", "unmarshal", "errors"], "doc_len": 51}
{"doc_id": "tests/test_marshalling.py::TestUnmarshaller.test_deserialize_wrong_type_root_data", "file_path": "tests/test_marshalling.py", "class_name": "TestUnmarshaller", "func_name": "test_deserialize_wrong_type_root_data", "text": "文件路径: tests/test_marshalling.py, 类名: TestUnmarshaller\n    def test_deserialize_wrong_type_root_data(self, unmarshal):\n        data = ''\n        fields_dict = {}\n        result = unmarshal.deserialize(data, fields_dict)\n        assert result is None\n        assert '_schema' in unmarshal.errors\n", "tokens": ["tests", "test_marshalling", "py", "testunmarshaller", "def", "test_deserialize_wrong_type_root_data", "self", "unmarshal", "data", "fields_dict", "result", "unmarshal", "deserialize", "data", "fields_dict", "assert", "result", "is", "none", "assert", "_schema", "in", "unmarshal", "errors"], "doc_len": 24}
{"doc_id": "tests/test_marshalling.py::TestUnmarshaller.test_deserialize_wrong_type_nested_data", "file_path": "tests/test_marshalling.py", "class_name": "TestUnmarshaller", "func_name": "test_deserialize_wrong_type_nested_data", "text": "文件路径: tests/test_marshalling.py, 类名: TestUnmarshaller\n    def test_deserialize_wrong_type_nested_data(self, unmarshal):\n        class TestSchema(Schema):\n            pass\n\n        data = {\n            'foo': 'not what we need'\n        }\n        fields_dict = {\n            'foo': fields.Nested(TestSchema, required=True)\n        }\n        with pytest.raises(ValidationError) as excinfo:\n            result = unmarshal.deserialize(data, fields_dict)\n\n            assert result is None\n            assert excinfo.value.messages == {'foo': {'_schema': ['Invalid input type.']}}\n", "tokens": ["tests", "test_marshalling", "py", "testunmarshaller", "def", "test_deserialize_wrong_type_nested_data", "self", "unmarshal", "class", "testschema", "schema", "pass", "data", "foo", "not", "what", "we", "need", "fields_dict", "foo", "fields", "nested", "testschema", "required", "true", "with", "pytest", "raises", "validationerror", "as", "excinfo", "result", "unmarshal", "deserialize", "data", "fields_dict", "assert", "result", "is", "none", "assert", "excinfo", "value", "messages", "foo", "_schema", "invalid", "input", "type"], "doc_len": 49}
{"doc_id": "tests/test_options.py::TestStrict.test_strict_meta_option", "file_path": "tests/test_options.py", "class_name": "TestStrict", "func_name": "test_strict_meta_option", "text": "文件路径: tests/test_options.py, 类名: TestStrict\n    def test_strict_meta_option(self):\n        with pytest.raises(ValidationError):\n            self.StrictUserSchema().load({'email': 'foo.com'})\n", "tokens": ["tests", "test_options", "py", "teststrict", "def", "test_strict_meta_option", "self", "with", "pytest", "raises", "validationerror", "self", "strictuserschema", "load", "email", "foo", "com"], "doc_len": 17}
{"doc_id": "tests/test_options.py::TestStrict.test_strict_meta_option_is_inherited", "file_path": "tests/test_options.py", "class_name": "TestStrict", "func_name": "test_strict_meta_option_is_inherited", "text": "文件路径: tests/test_options.py, 类名: TestStrict\n    def test_strict_meta_option_is_inherited(self):\n        class StrictUserSchema(UserSchema):\n            class Meta:\n                strict = True\n\n        class ChildStrictSchema(self.StrictUserSchema):\n            pass\n        with pytest.raises(ValidationError):\n            ChildStrictSchema().load({'email': 'foo.com'})\n", "tokens": ["tests", "test_options", "py", "teststrict", "def", "test_strict_meta_option_is_inherited", "self", "class", "strictuserschema", "userschema", "class", "meta", "strict", "true", "class", "childstrictschema", "self", "strictuserschema", "pass", "with", "pytest", "raises", "validationerror", "childstrictschema", "load", "email", "foo", "com"], "doc_len": 28}
{"doc_id": "tests/test_options.py::TestUnordered.test_unordered_dump_returns_dict", "file_path": "tests/test_options.py", "class_name": "TestUnordered", "func_name": "test_unordered_dump_returns_dict", "text": "文件路径: tests/test_options.py, 类名: TestUnordered\n    def test_unordered_dump_returns_dict(self):\n        schema = self.UnorderedSchema()\n        u = User('steve', email='steve@steve.steve')\n        result = schema.dump(u)\n        assert not isinstance(result.data, OrderedDict)\n        assert type(result.data) is dict\n", "tokens": ["tests", "test_options", "py", "testunordered", "def", "test_unordered_dump_returns_dict", "self", "schema", "self", "unorderedschema", "u", "user", "steve", "email", "steve", "steve", "steve", "result", "schema", "dump", "u", "assert", "not", "isinstance", "result", "data", "ordereddict", "assert", "type", "result", "data", "is", "dict"], "doc_len": 33}
{"doc_id": "tests/test_options.py::TestUnordered.test_unordered_load_returns_dict", "file_path": "tests/test_options.py", "class_name": "TestUnordered", "func_name": "test_unordered_load_returns_dict", "text": "文件路径: tests/test_options.py, 类名: TestUnordered\n    def test_unordered_load_returns_dict(self):\n        schema = self.UnorderedSchema()\n        result = schema.load({'name': 'steve', 'email': 'steve@steve.steve'})\n        assert not isinstance(result.data, OrderedDict)\n        assert type(result.data) is dict\n", "tokens": ["tests", "test_options", "py", "testunordered", "def", "test_unordered_load_returns_dict", "self", "schema", "self", "unorderedschema", "result", "schema", "load", "name", "steve", "email", "steve", "steve", "steve", "assert", "not", "isinstance", "result", "data", "ordereddict", "assert", "type", "result", "data", "is", "dict"], "doc_len": 31}
{"doc_id": "tests/test_options.py::TestFieldOrdering.test_ordered_option_is_inherited", "file_path": "tests/test_options.py", "class_name": "TestFieldOrdering", "func_name": "test_ordered_option_is_inherited", "text": "文件路径: tests/test_options.py, 类名: TestFieldOrdering\n    def test_ordered_option_is_inherited(self, user, with_meta):\n        class ParentUnordered(Schema):\n            class Meta:\n                ordered = False\n\n        # KeepOrder is before ParentUnordered in MRO,\n        # so ChildOrderedSchema will be ordered\n        class ChildOrderedSchema(KeepOrder, ParentUnordered):\n            if with_meta:\n                class Meta:\n                    pass\n\n        schema = ChildOrderedSchema()\n        assert schema.opts.ordered is True\n        assert schema.dict_class == OrderedDict\n\n        data, errors = schema.dump(user)\n        assert not errors\n        keys = list(data)\n        assert keys == ['name', 'email', 'age', 'created', 'id', 'homepage', 'birthdate']\n\n        # KeepOrder is before ParentUnordered in MRO,\n        # so ChildOrderedSchema will be ordered\n        class ChildUnorderedSchema(ParentUnordered, KeepOrder):\n            class Meta:\n                pass\n\n        schema = ChildUnorderedSchema()\n        assert schema.opts.ordered is False\n", "tokens": ["tests", "test_options", "py", "testfieldordering", "def", "test_ordered_option_is_inherited", "self", "user", "with_meta", "class", "parentunordered", "schema", "class", "meta", "ordered", "false", "keeporder", "is", "before", "parentunordered", "in", "mro", "so", "childorderedschema", "will", "be", "ordered", "class", "childorderedschema", "keeporder", "parentunordered", "if", "with_meta", "class", "meta", "pass", "schema", "childorderedschema", "assert", "schema", "opts", "ordered", "is", "true", "assert", "schema", "dict_class", "ordereddict", "data", "errors", "schema", "dump", "user", "assert", "not", "errors", "keys", "list", "data", "assert", "keys", "name", "email", "age", "created", "id", "homepage", "birthdate", "keeporder", "is", "before", "parentunordered", "in", "mro", "so", "childorderedschema", "will", "be", "ordered", "class", "childunorderedschema", "parentunordered", "keeporder", "class", "meta", "pass", "schema", "childunorderedschema", "assert", "schema", "opts", "ordered", "is", "false"], "doc_len": 94}
{"doc_id": "tests/test_options.py::TestFieldOrdering.test_ordering_is_off_by_default", "file_path": "tests/test_options.py", "class_name": "TestFieldOrdering", "func_name": "test_ordering_is_off_by_default", "text": "文件路径: tests/test_options.py, 类名: TestFieldOrdering\n    def test_ordering_is_off_by_default(self):\n        class DummySchema(Schema):\n            pass\n\n        schema = DummySchema()\n        assert schema.ordered is False\n", "tokens": ["tests", "test_options", "py", "testfieldordering", "def", "test_ordering_is_off_by_default", "self", "class", "dummyschema", "schema", "pass", "schema", "dummyschema", "assert", "schema", "ordered", "is", "false"], "doc_len": 18}
{"doc_id": "tests/test_options.py::TestFieldOrdering.test_declared_field_order_is_maintained_on_dump", "file_path": "tests/test_options.py", "class_name": "TestFieldOrdering", "func_name": "test_declared_field_order_is_maintained_on_dump", "text": "文件路径: tests/test_options.py, 类名: TestFieldOrdering\n    def test_declared_field_order_is_maintained_on_dump(self, user):\n        ser = KeepOrder()\n        data, errs = ser.dump(user)\n        keys = list(data)\n        assert keys == ['name', 'email', 'age', 'created', 'id', 'homepage', 'birthdate']\n", "tokens": ["tests", "test_options", "py", "testfieldordering", "def", "test_declared_field_order_is_maintained_on_dump", "self", "user", "ser", "keeporder", "data", "errs", "ser", "dump", "user", "keys", "list", "data", "assert", "keys", "name", "email", "age", "created", "id", "homepage", "birthdate"], "doc_len": 27}
{"doc_id": "tests/test_options.py::TestFieldOrdering.test_declared_field_order_is_maintained_on_load", "file_path": "tests/test_options.py", "class_name": "TestFieldOrdering", "func_name": "test_declared_field_order_is_maintained_on_load", "text": "文件路径: tests/test_options.py, 类名: TestFieldOrdering\n    def test_declared_field_order_is_maintained_on_load(self, serialized_user):\n        schema = KeepOrder()\n        data, errs = schema.load(serialized_user.data)\n        assert not errs\n        keys = list(data)\n        assert keys == ['name', 'email', 'age', 'created', 'id', 'homepage', 'birthdate']\n", "tokens": ["tests", "test_options", "py", "testfieldordering", "def", "test_declared_field_order_is_maintained_on_load", "self", "serialized_user", "schema", "keeporder", "data", "errs", "schema", "load", "serialized_user", "data", "assert", "not", "errs", "keys", "list", "data", "assert", "keys", "name", "email", "age", "created", "id", "homepage", "birthdate"], "doc_len": 31}
{"doc_id": "tests/test_options.py::TestFieldOrdering.test_nested_field_order_with_only_arg_is_maintained_on_dump", "file_path": "tests/test_options.py", "class_name": "TestFieldOrdering", "func_name": "test_nested_field_order_with_only_arg_is_maintained_on_dump", "text": "文件路径: tests/test_options.py, 类名: TestFieldOrdering\n    def test_nested_field_order_with_only_arg_is_maintained_on_dump(self, user):\n        schema = OrderedNestedOnly()\n        data, errs = schema.dump({'user': user})\n        user_data = data['user']\n        keys = list(user_data)\n        assert keys == ['name', 'email', 'age', 'created', 'id', 'homepage', 'birthdate']\n", "tokens": ["tests", "test_options", "py", "testfieldordering", "def", "test_nested_field_order_with_only_arg_is_maintained_on_dump", "self", "user", "schema", "orderednestedonly", "data", "errs", "schema", "dump", "user", "user", "user_data", "data", "user", "keys", "list", "user_data", "assert", "keys", "name", "email", "age", "created", "id", "homepage", "birthdate"], "doc_len": 31}
{"doc_id": "tests/test_options.py::TestFieldOrdering.test_nested_field_order_with_only_arg_is_maintained_on_load", "file_path": "tests/test_options.py", "class_name": "TestFieldOrdering", "func_name": "test_nested_field_order_with_only_arg_is_maintained_on_load", "text": "文件路径: tests/test_options.py, 类名: TestFieldOrdering\n    def test_nested_field_order_with_only_arg_is_maintained_on_load(self):\n        schema = OrderedNestedOnly()\n        data, errs = schema.load({'user': {\n            'name': 'Foo',\n            'email': 'Foo@bar.com',\n            'age': 42,\n            'created': dt.datetime.now().isoformat(),\n            'id': 123,\n            'homepage': 'http://foo.com',\n            'birthdate': dt.datetime.now().isoformat(),\n        }})\n        user_data = data['user']\n        keys = list(user_data)\n        assert keys == ['name', 'email', 'age', 'created', 'id', 'homepage', 'birthdate']\n", "tokens": ["tests", "test_options", "py", "testfieldordering", "def", "test_nested_field_order_with_only_arg_is_maintained_on_load", "self", "schema", "orderednestedonly", "data", "errs", "schema", "load", "user", "name", "foo", "email", "foo", "bar", "com", "age", "42", "created", "dt", "datetime", "now", "isoformat", "id", "123", "homepage", "http", "foo", "com", "birthdate", "dt", "datetime", "now", "isoformat", "user_data", "data", "user", "keys", "list", "user_data", "assert", "keys", "name", "email", "age", "created", "id", "homepage", "birthdate"], "doc_len": 53}
{"doc_id": "tests/test_options.py::TestFieldOrdering.test_nested_field_order_with_exlude_arg_is_maintained", "file_path": "tests/test_options.py", "class_name": "TestFieldOrdering", "func_name": "test_nested_field_order_with_exlude_arg_is_maintained", "text": "文件路径: tests/test_options.py, 类名: TestFieldOrdering\n    def test_nested_field_order_with_exlude_arg_is_maintained(self, user):\n        class HasNestedExclude(Schema):\n            class Meta:\n                ordered = True\n\n            user = fields.Nested(KeepOrder, exclude=('birthdate', ))\n\n        ser = HasNestedExclude()\n        data, errs = ser.dump({'user': user})\n        user_data = data['user']\n        keys = list(user_data)\n        assert keys == ['name', 'email', 'age', 'created', 'id', 'homepage']\n", "tokens": ["tests", "test_options", "py", "testfieldordering", "def", "test_nested_field_order_with_exlude_arg_is_maintained", "self", "user", "class", "hasnestedexclude", "schema", "class", "meta", "ordered", "true", "user", "fields", "nested", "keeporder", "exclude", "birthdate", "ser", "hasnestedexclude", "data", "errs", "ser", "dump", "user", "user", "user_data", "data", "user", "keys", "list", "user_data", "assert", "keys", "name", "email", "age", "created", "id", "homepage"], "doc_len": 43}
{"doc_id": "tests/test_options.py::TestFieldOrdering.test_meta_fields_order_is_maintained_on_dump", "file_path": "tests/test_options.py", "class_name": "TestFieldOrdering", "func_name": "test_meta_fields_order_is_maintained_on_dump", "text": "文件路径: tests/test_options.py, 类名: TestFieldOrdering\n    def test_meta_fields_order_is_maintained_on_dump(self, user):\n        ser = OrderedMetaSchema()\n        data, errs = ser.dump(user)\n        keys = list(data)\n        assert keys == ['name', 'email', 'age', 'created', 'id', 'homepage', 'birthdate']\n", "tokens": ["tests", "test_options", "py", "testfieldordering", "def", "test_meta_fields_order_is_maintained_on_dump", "self", "user", "ser", "orderedmetaschema", "data", "errs", "ser", "dump", "user", "keys", "list", "data", "assert", "keys", "name", "email", "age", "created", "id", "homepage", "birthdate"], "doc_len": 27}
{"doc_id": "tests/test_options.py::TestFieldOrdering.test_meta_fields_order_is_maintained_on_load", "file_path": "tests/test_options.py", "class_name": "TestFieldOrdering", "func_name": "test_meta_fields_order_is_maintained_on_load", "text": "文件路径: tests/test_options.py, 类名: TestFieldOrdering\n    def test_meta_fields_order_is_maintained_on_load(self, serialized_user):\n        schema = OrderedMetaSchema()\n        data, errs = schema.load(serialized_user.data)\n        assert not errs\n        keys = list(data)\n        assert keys == ['name', 'email', 'age', 'created', 'id', 'homepage', 'birthdate']\n", "tokens": ["tests", "test_options", "py", "testfieldordering", "def", "test_meta_fields_order_is_maintained_on_load", "self", "serialized_user", "schema", "orderedmetaschema", "data", "errs", "schema", "load", "serialized_user", "data", "assert", "not", "errs", "keys", "list", "data", "assert", "keys", "name", "email", "age", "created", "id", "homepage", "birthdate"], "doc_len": 31}
{"doc_id": "tests/test_options.py::TestIncludeOption.test_fields_are_added", "file_path": "tests/test_options.py", "class_name": "TestIncludeOption", "func_name": "test_fields_are_added", "text": "文件路径: tests/test_options.py, 类名: TestIncludeOption\n    def test_fields_are_added(self):\n        s = self.AddFieldsSchema()\n        in_data = {'name': 'Steve', 'from': 'Oskosh'}\n        result = s.load({'name': 'Steve', 'from': 'Oskosh'})\n        assert result.data == in_data\n", "tokens": ["tests", "test_options", "py", "testincludeoption", "def", "test_fields_are_added", "self", "s", "self", "addfieldsschema", "in_data", "name", "steve", "from", "oskosh", "result", "s", "load", "name", "steve", "from", "oskosh", "assert", "result", "data", "in_data"], "doc_len": 26}
{"doc_id": "tests/test_options.py::TestIncludeOption.test_ordered_included", "file_path": "tests/test_options.py", "class_name": "TestIncludeOption", "func_name": "test_ordered_included", "text": "文件路径: tests/test_options.py, 类名: TestIncludeOption\n    def test_ordered_included(self):\n        class AddFieldsOrdered(Schema):\n            name = fields.Str()\n            email = fields.Str()\n\n            class Meta:\n                include = OrderedDict([\n                    ('from', fields.Str()),\n                    ('in', fields.Str()),\n                    ('@at', fields.Str())\n                ])\n                ordered = True\n\n        s = AddFieldsOrdered()\n        in_data = {'name': 'Steve', 'from': 'Oskosh', 'email': 'steve@steve.steve',\n                    'in': 'VA', '@at': 'Charlottesville'}\n        # declared fields, then \"included\" fields\n        expected_fields = ['name', 'email', 'from', 'in', '@at']\n        assert list(AddFieldsOrdered._declared_fields.keys()) == expected_fields\n\n        result = s.load(in_data)\n        assert list(result.data.keys()) == expected_fields\n", "tokens": ["tests", "test_options", "py", "testincludeoption", "def", "test_ordered_included", "self", "class", "addfieldsordered", "schema", "name", "fields", "str", "email", "fields", "str", "class", "meta", "include", "ordereddict", "from", "fields", "str", "in", "fields", "str", "at", "fields", "str", "ordered", "true", "s", "addfieldsordered", "in_data", "name", "steve", "from", "oskosh", "email", "steve", "steve", "steve", "in", "va", "at", "charlottesville", "declared", "fields", "then", "included", "fields", "expected_fields", "name", "email", "from", "in", "at", "assert", "list", "addfieldsordered", "_declared_fields", "keys", "expected_fields", "result", "s", "load", "in_data", "assert", "list", "result", "data", "keys", "expected_fields"], "doc_len": 73}
{"doc_id": "tests/test_options.py::TestIncludeOption.test_added_fields_are_inherited", "file_path": "tests/test_options.py", "class_name": "TestIncludeOption", "func_name": "test_added_fields_are_inherited", "text": "文件路径: tests/test_options.py, 类名: TestIncludeOption\n    def test_added_fields_are_inherited(self):\n\n        class AddFieldsChild(self.AddFieldsSchema):\n            email = fields.Str()\n\n        s = AddFieldsChild()\n        assert 'email' in s._declared_fields.keys()\n        assert 'from' in s._declared_fields.keys()\n        assert isinstance(s._declared_fields['from'], fields.Str)\n", "tokens": ["tests", "test_options", "py", "testincludeoption", "def", "test_added_fields_are_inherited", "self", "class", "addfieldschild", "self", "addfieldsschema", "email", "fields", "str", "s", "addfieldschild", "assert", "email", "in", "s", "_declared_fields", "keys", "assert", "from", "in", "s", "_declared_fields", "keys", "assert", "isinstance", "s", "_declared_fields", "from", "fields", "str"], "doc_len": 35}
{"doc_id": "tests/test_options.py::CustomSchemaOpts.__init__", "file_path": "tests/test_options.py", "class_name": "CustomSchemaOpts", "func_name": "__init__", "text": "文件路径: tests/test_options.py, 类名: CustomSchemaOpts\n    def __init__(self, meta):\n        super(CustomSchemaOpts, self).__init__(meta)\n        self.custom_option = True\n", "tokens": ["tests", "test_options", "py", "customschemaopts", "def", "__init__", "self", "meta", "super", "customschemaopts", "self", "__init__", "meta", "self", "custom_option", "true"], "doc_len": 16}
{"doc_id": "tests/test_options.py::TestSchemaOptsClass.test_schema_with_custom_schema_opts", "file_path": "tests/test_options.py", "class_name": "TestSchemaOptsClass", "func_name": "test_schema_with_custom_schema_opts", "text": "文件路径: tests/test_options.py, 类名: TestSchemaOptsClass\n    def test_schema_with_custom_schema_opts(self):\n        s = SchemaWithCustomSchemaOpts()\n        assert s.opts.custom_option\n", "tokens": ["tests", "test_options", "py", "testschemaoptsclass", "def", "test_schema_with_custom_schema_opts", "self", "s", "schemawithcustomschemaopts", "assert", "s", "opts", "custom_option"], "doc_len": 13}
{"doc_id": "tests/test_registry.py::test_serializer_has_class_registry", "file_path": "tests/test_registry.py", "class_name": null, "func_name": "test_serializer_has_class_registry", "text": "文件路径: tests/test_registry.py\ndef test_serializer_has_class_registry():\n    class MySchema(Schema):\n        pass\n\n    class MySubSchema(Schema):\n        pass\n\n    assert 'MySchema' in class_registry._registry\n    assert 'MySubSchema' in class_registry._registry\n\n    # by fullpath\n    assert 'tests.test_registry.MySchema' in class_registry._registry\n    assert 'tests.test_registry.MySubSchema' in class_registry._registry\n", "tokens": ["tests", "test_registry", "py", "def", "test_serializer_has_class_registry", "class", "myschema", "schema", "pass", "class", "mysubschema", "schema", "pass", "assert", "myschema", "in", "class_registry", "_registry", "assert", "mysubschema", "in", "class_registry", "_registry", "by", "fullpath", "assert", "tests", "test_registry", "myschema", "in", "class_registry", "_registry", "assert", "tests", "test_registry", "mysubschema", "in", "class_registry", "_registry"], "doc_len": 39}
{"doc_id": "tests/test_registry.py::test_serializer_class_registry_register_same_classname_different_module", "file_path": "tests/test_registry.py", "class_name": null, "func_name": "test_serializer_class_registry_register_same_classname_different_module", "text": "文件路径: tests/test_registry.py\ndef test_serializer_class_registry_register_same_classname_different_module():\n\n    reglen = len(class_registry._registry)\n\n    type('MyTestRegSchema', (Schema,), {'__module__': 'modA'})\n\n    assert 'MyTestRegSchema' in class_registry._registry\n    assert len(class_registry._registry.get('MyTestRegSchema')) == 1\n    assert 'modA.MyTestRegSchema' in class_registry._registry\n    #  storing for classname and fullpath\n    assert len(class_registry._registry) == reglen + 2\n\n    type('MyTestRegSchema', (Schema,), {'__module__': 'modB'})\n\n    assert 'MyTestRegSchema' in class_registry._registry\n    #  aggregating classes with same name from different modules\n    assert len(class_registry._registry.get('MyTestRegSchema')) == 2\n    assert 'modB.MyTestRegSchema' in class_registry._registry\n    #  storing for same classname (+0) and different module (+1)\n    assert len(class_registry._registry) == reglen + 2 + 1\n\n    type('MyTestRegSchema', (Schema,), {'__module__': 'modB'})\n\n    assert 'MyTestRegSchema' in class_registry._registry\n    #  only the class with matching module has been replaced\n    assert len(class_registry._registry.get('MyTestRegSchema')) == 2\n    assert 'modB.MyTestRegSchema' in class_registry._registry\n    #  only the class with matching module has been replaced (+0)\n    assert len(class_registry._registry) == reglen + 2 + 1\n", "tokens": ["tests", "test_registry", "py", "def", "test_serializer_class_registry_register_same_classname_different_module", "reglen", "len", "class_registry", "_registry", "type", "mytestregschema", "schema", "__module__", "moda", "assert", "mytestregschema", "in", "class_registry", "_registry", "assert", "len", "class_registry", "_registry", "get", "mytestregschema", "1", "assert", "moda", "mytestregschema", "in", "class_registry", "_registry", "storing", "for", "classname", "and", "fullpath", "assert", "len", "class_registry", "_registry", "reglen", "2", "type", "mytestregschema", "schema", "__module__", "modb", "assert", "mytestregschema", "in", "class_registry", "_registry", "aggregating", "classes", "with", "same", "name", "from", "different", "modules", "assert", "len", "class_registry", "_registry", "get", "mytestregschema", "2", "assert", "modb", "mytestregschema", "in", "class_registry", "_registry", "storing", "for", "same", "classname", "0", "and", "different", "module", "1", "assert", "len", "class_registry", "_registry", "reglen", "2", "1", "type", "mytestregschema", "schema", "__module__", "modb", "assert", "mytestregschema", "in", "class_registry", "_registry", "only", "the", "class", "with", "matching", "module", "has", "been", "replaced", "assert", "len", "class_registry", "_registry", "get", "mytestregschema", "2", "assert", "modb", "mytestregschema", "in", "class_registry", "_registry", "only", "the", "class", "with", "matching", "module", "has", "been", "replaced", "0", "assert", "len", "class_registry", "_registry", "reglen", "2", "1"], "doc_len": 139}
{"doc_id": "tests/test_registry.py::test_serializer_class_registry_override_if_same_classname_same_module", "file_path": "tests/test_registry.py", "class_name": null, "func_name": "test_serializer_class_registry_override_if_same_classname_same_module", "text": "文件路径: tests/test_registry.py\ndef test_serializer_class_registry_override_if_same_classname_same_module():\n\n    reglen = len(class_registry._registry)\n\n    type('MyTestReg2Schema', (Schema,), {'__module__': 'SameModulePath'})\n\n    assert 'MyTestReg2Schema' in class_registry._registry\n    assert len(class_registry._registry.get('MyTestReg2Schema')) == 1\n    assert 'SameModulePath.MyTestReg2Schema' in class_registry._registry\n    assert len(class_registry._registry.get('SameModulePath.MyTestReg2Schema')) == 1\n    #  storing for classname and fullpath\n    assert len(class_registry._registry) == reglen + 2\n\n    type('MyTestReg2Schema', (Schema,), {'__module__': 'SameModulePath'})\n\n    assert 'MyTestReg2Schema' in class_registry._registry\n    #  overriding same class name and same module\n    assert len(class_registry._registry.get('MyTestReg2Schema')) == 1\n    assert 'SameModulePath.MyTestReg2Schema' in class_registry._registry\n    #  overriding same fullpath\n    assert len(class_registry._registry.get('SameModulePath.MyTestReg2Schema')) == 1\n    #  overriding for same classname (+0) and different module (+0)\n    assert len(class_registry._registry) == reglen + 2\n", "tokens": ["tests", "test_registry", "py", "def", "test_serializer_class_registry_override_if_same_classname_same_module", "reglen", "len", "class_registry", "_registry", "type", "mytestreg2schema", "schema", "__module__", "samemodulepath", "assert", "mytestreg2schema", "in", "class_registry", "_registry", "assert", "len", "class_registry", "_registry", "get", "mytestreg2schema", "1", "assert", "samemodulepath", "mytestreg2schema", "in", "class_registry", "_registry", "assert", "len", "class_registry", "_registry", "get", "samemodulepath", "mytestreg2schema", "1", "storing", "for", "classname", "and", "fullpath", "assert", "len", "class_registry", "_registry", "reglen", "2", "type", "mytestreg2schema", "schema", "__module__", "samemodulepath", "assert", "mytestreg2schema", "in", "class_registry", "_registry", "overriding", "same", "class", "name", "and", "same", "module", "assert", "len", "class_registry", "_registry", "get", "mytestreg2schema", "1", "assert", "samemodulepath", "mytestreg2schema", "in", "class_registry", "_registry", "overriding", "same", "fullpath", "assert", "len", "class_registry", "_registry", "get", "samemodulepath", "mytestreg2schema", "1", "overriding", "for", "same", "classname", "0", "and", "different", "module", "0", "assert", "len", "class_registry", "_registry", "reglen", "2"], "doc_len": 107}
{"doc_id": "tests/test_registry.py::A.__init__", "file_path": "tests/test_registry.py", "class_name": "A", "func_name": "__init__", "text": "文件路径: tests/test_registry.py, 类名: A\n    def __init__(self, _id, b=None):\n        self.id = _id\n        self.b = b\n", "tokens": ["tests", "test_registry", "py", "a", "def", "__init__", "self", "_id", "b", "none", "self", "id", "_id", "self", "b", "b"], "doc_len": 16}
{"doc_id": "tests/test_registry.py::B.__init__", "file_path": "tests/test_registry.py", "class_name": "B", "func_name": "__init__", "text": "文件路径: tests/test_registry.py, 类名: B\n    def __init__(self, _id, a=None):\n        self.id = _id\n        self.a = a\n", "tokens": ["tests", "test_registry", "py", "b", "def", "__init__", "self", "_id", "a", "none", "self", "id", "_id", "self", "a", "a"], "doc_len": 16}
{"doc_id": "tests/test_registry.py::C.__init__", "file_path": "tests/test_registry.py", "class_name": "C", "func_name": "__init__", "text": "文件路径: tests/test_registry.py, 类名: C\n    def __init__(self, _id, bs=None):\n        self.id = _id\n        self.bs = bs or []\n", "tokens": ["tests", "test_registry", "py", "c", "def", "__init__", "self", "_id", "bs", "none", "self", "id", "_id", "self", "bs", "bs", "or"], "doc_len": 17}
{"doc_id": "tests/test_registry.py::test_two_way_nesting", "file_path": "tests/test_registry.py", "class_name": null, "func_name": "test_two_way_nesting", "text": "文件路径: tests/test_registry.py\ndef test_two_way_nesting():\n    a_obj = A(1)\n    b_obj = B(2, a=a_obj)\n    a_obj.b = b_obj\n\n    a_serialized = ASchema().dump(a_obj)\n    b_serialized = BSchema().dump(b_obj)\n    assert a_serialized.data['b']['id'] == b_obj.id\n    assert b_serialized.data['a']['id'] == a_obj.id\n", "tokens": ["tests", "test_registry", "py", "def", "test_two_way_nesting", "a_obj", "a", "1", "b_obj", "b", "2", "a", "a_obj", "a_obj", "b", "b_obj", "a_serialized", "aschema", "dump", "a_obj", "b_serialized", "bschema", "dump", "b_obj", "assert", "a_serialized", "data", "b", "id", "b_obj", "id", "assert", "b_serialized", "data", "a", "id", "a_obj", "id"], "doc_len": 38}
{"doc_id": "tests/test_registry.py::test_nesting_with_class_name_many", "file_path": "tests/test_registry.py", "class_name": null, "func_name": "test_nesting_with_class_name_many", "text": "文件路径: tests/test_registry.py\ndef test_nesting_with_class_name_many():\n    c_obj = C(1, bs=[B(2), B(3), B(4)])\n\n    c_serialized = CSchema().dump(c_obj)\n\n    assert len(c_serialized.data['bs']) == len(c_obj.bs)\n    assert c_serialized.data['bs'][0]['id'] == c_obj.bs[0].id\n", "tokens": ["tests", "test_registry", "py", "def", "test_nesting_with_class_name_many", "c_obj", "c", "1", "bs", "b", "2", "b", "3", "b", "4", "c_serialized", "cschema", "dump", "c_obj", "assert", "len", "c_serialized", "data", "bs", "len", "c_obj", "bs", "assert", "c_serialized", "data", "bs", "0", "id", "c_obj", "bs", "0", "id"], "doc_len": 37}
{"doc_id": "tests/test_registry.py::test_invalid_class_name_in_nested_field_raises_error", "file_path": "tests/test_registry.py", "class_name": null, "func_name": "test_invalid_class_name_in_nested_field_raises_error", "text": "文件路径: tests/test_registry.py\ndef test_invalid_class_name_in_nested_field_raises_error(user):\n\n    class MySchema(Schema):\n        nf = fields.Nested('notfound')\n    sch = MySchema()\n    msg = 'Class with name {0!r} was not found'.format('notfound')\n    with pytest.raises(RegistryError, match=msg):\n        sch.dump({'nf': None})\n", "tokens": ["tests", "test_registry", "py", "def", "test_invalid_class_name_in_nested_field_raises_error", "user", "class", "myschema", "schema", "nf", "fields", "nested", "notfound", "sch", "myschema", "msg", "class", "with", "name", "0", "r", "was", "not", "found", "format", "notfound", "with", "pytest", "raises", "registryerror", "match", "msg", "sch", "dump", "nf", "none"], "doc_len": 36}
{"doc_id": "tests/test_registry.py::test_multiple_classes_with_same_name_raises_error", "file_path": "tests/test_registry.py", "class_name": null, "func_name": "test_multiple_classes_with_same_name_raises_error", "text": "文件路径: tests/test_registry.py\ndef test_multiple_classes_with_same_name_raises_error():\n    # Import a class with the same name\n    from .foo_serializer import FooSerializer as FooSerializer1  # noqa\n\n    class MySchema(Schema):\n        foo = fields.Nested('FooSerializer')\n\n    # Using a nested field with the class name fails because there are\n    # two defined classes with the same name\n    sch = MySchema()\n    msg = 'Multiple classes with name {0!r} were found.'\\\n            .format('FooSerializer')\n    with pytest.raises(RegistryError, match=msg) as excinfo:\n        sch.dump({'foo': {'_id': 1}})\n", "tokens": ["tests", "test_registry", "py", "def", "test_multiple_classes_with_same_name_raises_error", "import", "a", "class", "with", "the", "same", "name", "from", "foo_serializer", "import", "fooserializer", "as", "fooserializer1", "noqa", "class", "myschema", "schema", "foo", "fields", "nested", "fooserializer", "using", "a", "nested", "field", "with", "the", "class", "name", "fails", "because", "there", "are", "two", "defined", "classes", "with", "the", "same", "name", "sch", "myschema", "msg", "multiple", "classes", "with", "name", "0", "r", "were", "found", "format", "fooserializer", "with", "pytest", "raises", "registryerror", "match", "msg", "as", "excinfo", "sch", "dump", "foo", "_id", "1"], "doc_len": 71}
{"doc_id": "tests/test_registry.py::test_multiple_classes_with_all", "file_path": "tests/test_registry.py", "class_name": null, "func_name": "test_multiple_classes_with_all", "text": "文件路径: tests/test_registry.py\ndef test_multiple_classes_with_all():\n    # Import a class with the same name\n    from .foo_serializer import FooSerializer as FooSerializer1  # noqa\n\n    classes = class_registry.get_class('FooSerializer', all=True)\n    assert len(classes) == 2\n", "tokens": ["tests", "test_registry", "py", "def", "test_multiple_classes_with_all", "import", "a", "class", "with", "the", "same", "name", "from", "foo_serializer", "import", "fooserializer", "as", "fooserializer1", "noqa", "classes", "class_registry", "get_class", "fooserializer", "all", "true", "assert", "len", "classes", "2"], "doc_len": 29}
{"doc_id": "tests/test_registry.py::test_can_use_full_module_path_to_class", "file_path": "tests/test_registry.py", "class_name": null, "func_name": "test_can_use_full_module_path_to_class", "text": "文件路径: tests/test_registry.py\ndef test_can_use_full_module_path_to_class():\n    from .foo_serializer import FooSerializer as FooSerializer1  # noqa\n    # Using full paths is ok\n\n    class Schema1(Schema):\n        foo = fields.Nested('tests.foo_serializer.FooSerializer')\n\n    sch = Schema1()\n\n    # Note: The arguments here don't matter. What matters is that no\n    # error is raised\n    assert sch.dump({'foo': {'_id': 42}}).data\n\n    class Schema2(Schema):\n        foo = fields.Nested('tests.test_registry.FooSerializer')\n    sch = Schema2()\n    assert sch.dump({'foo': {'_id': 42}}).data\n", "tokens": ["tests", "test_registry", "py", "def", "test_can_use_full_module_path_to_class", "from", "foo_serializer", "import", "fooserializer", "as", "fooserializer1", "noqa", "using", "full", "paths", "is", "ok", "class", "schema1", "schema", "foo", "fields", "nested", "tests", "foo_serializer", "fooserializer", "sch", "schema1", "note", "the", "arguments", "here", "don", "t", "matter", "what", "matters", "is", "that", "no", "error", "is", "raised", "assert", "sch", "dump", "foo", "_id", "42", "data", "class", "schema2", "schema", "foo", "fields", "nested", "tests", "test_registry", "fooserializer", "sch", "schema2", "assert", "sch", "dump", "foo", "_id", "42", "data"], "doc_len": 68}
{"doc_id": "tests/test_schema.py::test_serializing_basic_object", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_serializing_basic_object", "text": "文件路径: tests/test_schema.py\ndef test_serializing_basic_object(SchemaClass, user):\n    s = SchemaClass()\n    data, errors = s.dump(user)\n    assert data['name'] == user.name\n    assert_almost_equal(data['age'], 42.3)\n    assert data['registered']\n", "tokens": ["tests", "test_schema", "py", "def", "test_serializing_basic_object", "schemaclass", "user", "s", "schemaclass", "data", "errors", "s", "dump", "user", "assert", "data", "name", "user", "name", "assert_almost_equal", "data", "age", "42", "3", "assert", "data", "registered"], "doc_len": 27}
{"doc_id": "tests/test_schema.py::test_serializer_dump", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_serializer_dump", "text": "文件路径: tests/test_schema.py\ndef test_serializer_dump(user):\n    s = UserSchema()\n    result, errors = s.dump(user)\n    assert result['name'] == user.name\n    # Change strict mode\n    s.strict = True\n    bad_user = User(name='Monty', age='badage')\n    with pytest.raises(ValidationError):\n        s.dump(bad_user)\n", "tokens": ["tests", "test_schema", "py", "def", "test_serializer_dump", "user", "s", "userschema", "result", "errors", "s", "dump", "user", "assert", "result", "name", "user", "name", "change", "strict", "mode", "s", "strict", "true", "bad_user", "user", "name", "monty", "age", "badage", "with", "pytest", "raises", "validationerror", "s", "dump", "bad_user"], "doc_len": 37}
{"doc_id": "tests/test_schema.py::test_dump_returns_dict_of_errors", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_dump_returns_dict_of_errors", "text": "文件路径: tests/test_schema.py\ndef test_dump_returns_dict_of_errors():\n    s = UserSchema()\n    bad_user = User(name='Monty', age='badage')\n    result, errors = s.dump(bad_user)\n    assert 'age' in errors\n", "tokens": ["tests", "test_schema", "py", "def", "test_dump_returns_dict_of_errors", "s", "userschema", "bad_user", "user", "name", "monty", "age", "badage", "result", "errors", "s", "dump", "bad_user", "assert", "age", "in", "errors"], "doc_len": 22}
{"doc_id": "tests/test_schema.py::test_dump_with_strict_mode_raises_error", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_dump_with_strict_mode_raises_error", "text": "文件路径: tests/test_schema.py\ndef test_dump_with_strict_mode_raises_error(SchemaClass):\n    s = SchemaClass(strict=True)\n    bad_user = User(name='Monty', homepage='http://www.foo.bar', email='invalid-email')\n    with pytest.raises(ValidationError) as excinfo:\n        s.dump(bad_user)\n    exc = excinfo.value\n    assert type(exc.fields[0]) == fields.Email\n    assert exc.field_names[0] == 'email'\n\n    assert type(exc.messages) == dict\n    assert exc.messages == {'email': ['Not a valid email address.']}\n", "tokens": ["tests", "test_schema", "py", "def", "test_dump_with_strict_mode_raises_error", "schemaclass", "s", "schemaclass", "strict", "true", "bad_user", "user", "name", "monty", "homepage", "http", "www", "foo", "bar", "email", "invalid", "email", "with", "pytest", "raises", "validationerror", "as", "excinfo", "s", "dump", "bad_user", "exc", "excinfo", "value", "assert", "type", "exc", "fields", "0", "fields", "email", "assert", "exc", "field_names", "0", "email", "assert", "type", "exc", "messages", "dict", "assert", "exc", "messages", "email", "not", "a", "valid", "email", "address"], "doc_len": 60}
{"doc_id": "tests/test_schema.py::test_dump_resets_errors", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_dump_resets_errors", "text": "文件路径: tests/test_schema.py\ndef test_dump_resets_errors():\n    class MySchema(Schema):\n        email = fields.Email()\n\n    schema = MySchema()\n    result = schema.dump(User('Joe', email='notvalid'))\n    assert len(result.errors['email']) == 1\n    assert 'Not a valid email address.' in result.errors['email'][0]\n    result = schema.dump(User('Steve', email='__invalid'))\n    assert len(result.errors['email']) == 1\n    assert 'Not a valid email address.' in result.errors['email'][0]\n", "tokens": ["tests", "test_schema", "py", "def", "test_dump_resets_errors", "class", "myschema", "schema", "email", "fields", "email", "schema", "myschema", "result", "schema", "dump", "user", "joe", "email", "notvalid", "assert", "len", "result", "errors", "email", "1", "assert", "not", "a", "valid", "email", "address", "in", "result", "errors", "email", "0", "result", "schema", "dump", "user", "steve", "email", "__invalid", "assert", "len", "result", "errors", "email", "1", "assert", "not", "a", "valid", "email", "address", "in", "result", "errors", "email", "0"], "doc_len": 61}
{"doc_id": "tests/test_schema.py::test_load_resets_errors", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_load_resets_errors", "text": "文件路径: tests/test_schema.py\ndef test_load_resets_errors():\n    class MySchema(Schema):\n        email = fields.Email()\n\n    schema = MySchema()\n    result = schema.load({'name': 'Joe', 'email': 'notvalid'})\n    assert len(result.errors['email']) == 1\n    assert 'Not a valid email address.' in result.errors['email'][0]\n    result = schema.load({'name': 'Joe', 'email': '__invalid'})\n    assert len(result.errors['email']) == 1\n    assert 'Not a valid email address.' in result.errors['email'][0]\n", "tokens": ["tests", "test_schema", "py", "def", "test_load_resets_errors", "class", "myschema", "schema", "email", "fields", "email", "schema", "myschema", "result", "schema", "load", "name", "joe", "email", "notvalid", "assert", "len", "result", "errors", "email", "1", "assert", "not", "a", "valid", "email", "address", "in", "result", "errors", "email", "0", "result", "schema", "load", "name", "joe", "email", "__invalid", "assert", "len", "result", "errors", "email", "1", "assert", "not", "a", "valid", "email", "address", "in", "result", "errors", "email", "0"], "doc_len": 61}
{"doc_id": "tests/test_schema.py::test_dump_resets_error_fields", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_dump_resets_error_fields", "text": "文件路径: tests/test_schema.py\ndef test_dump_resets_error_fields():\n    class MySchema(Schema):\n        email = fields.Email()\n\n    schema = MySchema(strict=True)\n    with pytest.raises(ValidationError) as excinfo:\n        schema.dump(User('Joe', email='notvalid'))\n    exc = excinfo.value\n    assert len(exc.fields) == 1\n    assert len(exc.field_names) == 1\n\n    with pytest.raises(ValidationError) as excinfo:\n        schema.dump(User('Joe', email='__invalid'))\n\n    assert len(exc.fields) == 1\n    assert len(exc.field_names) == 1\n", "tokens": ["tests", "test_schema", "py", "def", "test_dump_resets_error_fields", "class", "myschema", "schema", "email", "fields", "email", "schema", "myschema", "strict", "true", "with", "pytest", "raises", "validationerror", "as", "excinfo", "schema", "dump", "user", "joe", "email", "notvalid", "exc", "excinfo", "value", "assert", "len", "exc", "fields", "1", "assert", "len", "exc", "field_names", "1", "with", "pytest", "raises", "validationerror", "as", "excinfo", "schema", "dump", "user", "joe", "email", "__invalid", "assert", "len", "exc", "fields", "1", "assert", "len", "exc", "field_names", "1"], "doc_len": 62}
{"doc_id": "tests/test_schema.py::test_load_resets_error_fields", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_load_resets_error_fields", "text": "文件路径: tests/test_schema.py\ndef test_load_resets_error_fields():\n    class MySchema(Schema):\n        email = fields.Email()\n\n    schema = MySchema(strict=True)\n    with pytest.raises(ValidationError) as excinfo:\n        schema.load({'name': 'Joe', 'email': 'not-valid'})\n    exc = excinfo.value\n    assert len(exc.fields) == 1\n    assert len(exc.field_names) == 1\n\n    with pytest.raises(ValidationError) as excinfo:\n        schema.load({'name': 'Joe', 'email': '__invalid'})\n\n    assert len(exc.fields) == 1\n    assert len(exc.field_names) == 1\n", "tokens": ["tests", "test_schema", "py", "def", "test_load_resets_error_fields", "class", "myschema", "schema", "email", "fields", "email", "schema", "myschema", "strict", "true", "with", "pytest", "raises", "validationerror", "as", "excinfo", "schema", "load", "name", "joe", "email", "not", "valid", "exc", "excinfo", "value", "assert", "len", "exc", "fields", "1", "assert", "len", "exc", "field_names", "1", "with", "pytest", "raises", "validationerror", "as", "excinfo", "schema", "load", "name", "joe", "email", "__invalid", "assert", "len", "exc", "fields", "1", "assert", "len", "exc", "field_names", "1"], "doc_len": 63}
{"doc_id": "tests/test_schema.py::test_load_resets_error_kwargs", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_load_resets_error_kwargs", "text": "文件路径: tests/test_schema.py\ndef test_load_resets_error_kwargs():\n    class MySchema(Schema):\n        name = fields.String()\n\n        @validates_schema\n        def validate_all(self, data):\n            if data:\n                raise ValidationError('oops', custom_error_kwarg=data)\n            else:\n                raise ValidationError('oops')\n\n    schema = MySchema(strict=True)\n    with pytest.raises(ValidationError) as excinfo:\n        schema.load({'name': 'Joe'})\n\n    exc = excinfo.value\n    assert exc.kwargs['custom_error_kwarg'] == {'name': 'Joe'}\n\n    with pytest.raises(ValidationError) as excinfo:\n        schema.load({})\n\n    exc = excinfo.value\n    assert 'custom_error_kwarg' not in exc.kwargs\n", "tokens": ["tests", "test_schema", "py", "def", "test_load_resets_error_kwargs", "class", "myschema", "schema", "name", "fields", "string", "validates_schema", "def", "validate_all", "self", "data", "if", "data", "raise", "validationerror", "oops", "custom_error_kwarg", "data", "else", "raise", "validationerror", "oops", "schema", "myschema", "strict", "true", "with", "pytest", "raises", "validationerror", "as", "excinfo", "schema", "load", "name", "joe", "exc", "excinfo", "value", "assert", "exc", "kwargs", "custom_error_kwarg", "name", "joe", "with", "pytest", "raises", "validationerror", "as", "excinfo", "schema", "load", "exc", "excinfo", "value", "assert", "custom_error_kwarg", "not", "in", "exc", "kwargs"], "doc_len": 67}
{"doc_id": "tests/test_schema.py::test_errored_fields_do_not_appear_in_output", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_errored_fields_do_not_appear_in_output", "text": "文件路径: tests/test_schema.py\ndef test_errored_fields_do_not_appear_in_output():\n\n    class MyField(fields.Field):\n        # Make sure validation fails during serialization\n        def _serialize(self, val, attr, obj):\n            raise ValidationError('oops')\n\n    class MySchema(Schema):\n        foo = MyField(validate=lambda x: False)\n\n    sch = MySchema()\n    data, errors = sch.load({'foo': 2})\n\n    assert 'foo' in errors\n    assert 'foo' not in data\n\n    data, errors = sch.dump({'foo': 2})\n\n    assert 'foo' in errors\n    assert 'foo' not in data\n", "tokens": ["tests", "test_schema", "py", "def", "test_errored_fields_do_not_appear_in_output", "class", "myfield", "fields", "field", "make", "sure", "validation", "fails", "during", "serialization", "def", "_serialize", "self", "val", "attr", "obj", "raise", "validationerror", "oops", "class", "myschema", "schema", "foo", "myfield", "validate", "lambda", "x", "false", "sch", "myschema", "data", "errors", "sch", "load", "foo", "2", "assert", "foo", "in", "errors", "assert", "foo", "not", "in", "data", "data", "errors", "sch", "dump", "foo", "2", "assert", "foo", "in", "errors", "assert", "foo", "not", "in", "data"], "doc_len": 65}
{"doc_id": "tests/test_schema.py::test_load_many_stores_error_indices", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_load_many_stores_error_indices", "text": "文件路径: tests/test_schema.py\ndef test_load_many_stores_error_indices():\n    s = UserSchema()\n    data = [\n        {'name': 'Mick', 'email': 'mick@stones.com'},\n        {'name': 'Keith', 'email': 'invalid-email', 'homepage': 'invalid-homepage'},\n    ]\n    _, errors = s.load(data, many=True)\n    assert 0 not in errors\n    assert 1 in errors\n    assert 'email' in errors[1]\n    assert 'homepage' in errors[1]\n", "tokens": ["tests", "test_schema", "py", "def", "test_load_many_stores_error_indices", "s", "userschema", "data", "name", "mick", "email", "mick", "stones", "com", "name", "keith", "email", "invalid", "email", "homepage", "invalid", "homepage", "_", "errors", "s", "load", "data", "many", "true", "assert", "0", "not", "in", "errors", "assert", "1", "in", "errors", "assert", "email", "in", "errors", "1", "assert", "homepage", "in", "errors", "1"], "doc_len": 48}
{"doc_id": "tests/test_schema.py::test_dump_many", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_dump_many", "text": "文件路径: tests/test_schema.py\ndef test_dump_many():\n    s = UserSchema()\n    u1, u2 = User('Mick'), User('Keith')\n    data, errors = s.dump([u1, u2], many=True)\n    assert len(data) == 2\n    assert data[0] == s.dump(u1).data\n", "tokens": ["tests", "test_schema", "py", "def", "test_dump_many", "s", "userschema", "u1", "u2", "user", "mick", "user", "keith", "data", "errors", "s", "dump", "u1", "u2", "many", "true", "assert", "len", "data", "2", "assert", "data", "0", "s", "dump", "u1", "data"], "doc_len": 32}
{"doc_id": "tests/test_schema.py::test_multiple_errors_can_be_stored_for_a_given_index", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_multiple_errors_can_be_stored_for_a_given_index", "text": "文件路径: tests/test_schema.py\ndef test_multiple_errors_can_be_stored_for_a_given_index():\n    class MySchema(Schema):\n        foo = fields.Str(validate=lambda x: len(x) > 3)\n        bar = fields.Int(validate=lambda x: x > 3)\n\n    sch = MySchema()\n    valid = {'foo': 'loll', 'bar': 42}\n    invalid = {'foo': 'lol', 'bar': 3}\n    errors = sch.validate([valid, invalid], many=True)\n\n    assert 1 in errors\n    assert len(errors[1]) == 2\n    assert 'foo' in errors[1]\n    assert 'bar' in errors[1]\n", "tokens": ["tests", "test_schema", "py", "def", "test_multiple_errors_can_be_stored_for_a_given_index", "class", "myschema", "schema", "foo", "fields", "str", "validate", "lambda", "x", "len", "x", "3", "bar", "fields", "int", "validate", "lambda", "x", "x", "3", "sch", "myschema", "valid", "foo", "loll", "bar", "42", "invalid", "foo", "lol", "bar", "3", "errors", "sch", "validate", "valid", "invalid", "many", "true", "assert", "1", "in", "errors", "assert", "len", "errors", "1", "2", "assert", "foo", "in", "errors", "1", "assert", "bar", "in", "errors", "1"], "doc_len": 63}
{"doc_id": "tests/test_schema.py::test_dump_many_stores_error_indices", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_dump_many_stores_error_indices", "text": "文件路径: tests/test_schema.py\ndef test_dump_many_stores_error_indices():\n    s = UserSchema()\n    u1, u2 = User('Mick', email='mick@stones.com'), User('Keith', email='invalid')\n\n    _, errors = s.dump([u1, u2], many=True)\n    assert 1 in errors\n    assert len(errors[1]) == 1\n\n    assert 'email' in errors[1]\n", "tokens": ["tests", "test_schema", "py", "def", "test_dump_many_stores_error_indices", "s", "userschema", "u1", "u2", "user", "mick", "email", "mick", "stones", "com", "user", "keith", "email", "invalid", "_", "errors", "s", "dump", "u1", "u2", "many", "true", "assert", "1", "in", "errors", "assert", "len", "errors", "1", "1", "assert", "email", "in", "errors", "1"], "doc_len": 41}
{"doc_id": "tests/test_schema.py::test_dump_many_doesnt_stores_error_indices_when_index_errors_is_false", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_dump_many_doesnt_stores_error_indices_when_index_errors_is_false", "text": "文件路径: tests/test_schema.py\ndef test_dump_many_doesnt_stores_error_indices_when_index_errors_is_false():\n    class NoIndex(Schema):\n        email = fields.Email()\n\n        class Meta:\n            index_errors = False\n\n    s = NoIndex()\n    u1, u2 = User('Mick', email='mick@stones.com'), User('Keith', email='invalid')\n\n    _, errors = s.dump([u1, u2], many=True)\n    assert 1 not in errors\n    assert 'email' in errors\n", "tokens": ["tests", "test_schema", "py", "def", "test_dump_many_doesnt_stores_error_indices_when_index_errors_is_false", "class", "noindex", "schema", "email", "fields", "email", "class", "meta", "index_errors", "false", "s", "noindex", "u1", "u2", "user", "mick", "email", "mick", "stones", "com", "user", "keith", "email", "invalid", "_", "errors", "s", "dump", "u1", "u2", "many", "true", "assert", "1", "not", "in", "errors", "assert", "email", "in", "errors"], "doc_len": 46}
{"doc_id": "tests/test_schema.py::test_dump_returns_a_marshalresult", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_dump_returns_a_marshalresult", "text": "文件路径: tests/test_schema.py\ndef test_dump_returns_a_marshalresult(user):\n    s = UserSchema()\n    result = s.dump(user)\n    assert type(result) == MarshalResult\n    data = result.data\n    assert type(data) == dict\n    errors = result.errors\n    assert type(errors) == dict\n", "tokens": ["tests", "test_schema", "py", "def", "test_dump_returns_a_marshalresult", "user", "s", "userschema", "result", "s", "dump", "user", "assert", "type", "result", "marshalresult", "data", "result", "data", "assert", "type", "data", "dict", "errors", "result", "errors", "assert", "type", "errors", "dict"], "doc_len": 30}
{"doc_id": "tests/test_schema.py::test_dumps_returns_a_marshalresult", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_dumps_returns_a_marshalresult", "text": "文件路径: tests/test_schema.py\ndef test_dumps_returns_a_marshalresult(user):\n    s = UserSchema()\n    result = s.dumps(user)\n    assert type(result) == MarshalResult\n    assert type(result.data) == str\n    assert type(result.errors) == dict\n", "tokens": ["tests", "test_schema", "py", "def", "test_dumps_returns_a_marshalresult", "user", "s", "userschema", "result", "s", "dumps", "user", "assert", "type", "result", "marshalresult", "assert", "type", "result", "data", "str", "assert", "type", "result", "errors", "dict"], "doc_len": 26}
{"doc_id": "tests/test_schema.py::test_dumping_single_object_with_collection_schema", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_dumping_single_object_with_collection_schema", "text": "文件路径: tests/test_schema.py\ndef test_dumping_single_object_with_collection_schema():\n    s = UserSchema(many=True)\n    user = UserSchema('Mick')\n    result = s.dump(user, many=False)\n    assert type(result.data) == dict\n    assert result.data == UserSchema().dump(user).data\n", "tokens": ["tests", "test_schema", "py", "def", "test_dumping_single_object_with_collection_schema", "s", "userschema", "many", "true", "user", "userschema", "mick", "result", "s", "dump", "user", "many", "false", "assert", "type", "result", "data", "dict", "assert", "result", "data", "userschema", "dump", "user", "data"], "doc_len": 30}
{"doc_id": "tests/test_schema.py::test_loading_single_object_with_collection_schema", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_loading_single_object_with_collection_schema", "text": "文件路径: tests/test_schema.py\ndef test_loading_single_object_with_collection_schema():\n    s = UserSchema(many=True)\n    in_data = {'name': 'Mick', 'email': 'mick@stones.com'}\n    result = s.load(in_data, many=False)\n    assert type(result.data) == User\n    assert result.data.name == UserSchema().load(in_data).data.name\n", "tokens": ["tests", "test_schema", "py", "def", "test_loading_single_object_with_collection_schema", "s", "userschema", "many", "true", "in_data", "name", "mick", "email", "mick", "stones", "com", "result", "s", "load", "in_data", "many", "false", "assert", "type", "result", "data", "user", "assert", "result", "data", "name", "userschema", "load", "in_data", "data", "name"], "doc_len": 36}
{"doc_id": "tests/test_schema.py::test_dumps_many", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_dumps_many", "text": "文件路径: tests/test_schema.py\ndef test_dumps_many():\n    s = UserSchema()\n    u1, u2 = User('Mick'), User('Keith')\n    json_result = s.dumps([u1, u2], many=True)\n    data = json.loads(json_result.data)\n    assert len(data) == 2\n    assert data[0] == s.dump(u1).data\n", "tokens": ["tests", "test_schema", "py", "def", "test_dumps_many", "s", "userschema", "u1", "u2", "user", "mick", "user", "keith", "json_result", "s", "dumps", "u1", "u2", "many", "true", "data", "json", "loads", "json_result", "data", "assert", "len", "data", "2", "assert", "data", "0", "s", "dump", "u1", "data"], "doc_len": 36}
{"doc_id": "tests/test_schema.py::test_load_returns_an_unmarshalresult", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_load_returns_an_unmarshalresult", "text": "文件路径: tests/test_schema.py\ndef test_load_returns_an_unmarshalresult():\n    s = UserSchema()\n    result = s.load({'name': 'Monty'})\n    assert type(result) == UnmarshalResult\n    assert type(result.data) == User\n    assert type(result.errors) == dict\n", "tokens": ["tests", "test_schema", "py", "def", "test_load_returns_an_unmarshalresult", "s", "userschema", "result", "s", "load", "name", "monty", "assert", "type", "result", "unmarshalresult", "assert", "type", "result", "data", "user", "assert", "type", "result", "errors", "dict"], "doc_len": 26}
{"doc_id": "tests/test_schema.py::test_load_many", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_load_many", "text": "文件路径: tests/test_schema.py\ndef test_load_many():\n    s = UserSchema()\n    in_data = [{'name': 'Mick'}, {'name': 'Keith'}]\n    result = s.load(in_data, many=True)\n    assert type(result.data) == list\n    assert type(result.data[0]) == User\n    assert result.data[0].name == 'Mick'\n", "tokens": ["tests", "test_schema", "py", "def", "test_load_many", "s", "userschema", "in_data", "name", "mick", "name", "keith", "result", "s", "load", "in_data", "many", "true", "assert", "type", "result", "data", "list", "assert", "type", "result", "data", "0", "user", "assert", "result", "data", "0", "name", "mick"], "doc_len": 35}
{"doc_id": "tests/test_schema.py::test_load_many_invalid_input_type", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_load_many_invalid_input_type", "text": "文件路径: tests/test_schema.py\ndef test_load_many_invalid_input_type(val):\n    class Sch(Schema):\n        name = fields.Str()\n    with pytest.raises(ValidationError) as e:\n        Sch(strict=True, many=True).load(val)\n    assert e.value.messages == {'_schema': ['Invalid input type.']}\n    assert '_schema' in e.value.field_names\n", "tokens": ["tests", "test_schema", "py", "def", "test_load_many_invalid_input_type", "val", "class", "sch", "schema", "name", "fields", "str", "with", "pytest", "raises", "validationerror", "as", "e", "sch", "strict", "true", "many", "true", "load", "val", "assert", "e", "value", "messages", "_schema", "invalid", "input", "type", "assert", "_schema", "in", "e", "value", "field_names"], "doc_len": 39}
{"doc_id": "tests/test_schema.py::test_loads_returns_an_unmarshalresult", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_loads_returns_an_unmarshalresult", "text": "文件路径: tests/test_schema.py\ndef test_loads_returns_an_unmarshalresult(user):\n    s = UserSchema()\n    result = s.loads(json.dumps({'name': 'Monty'}))\n    assert type(result) == UnmarshalResult\n    assert type(result.data) == User\n    assert type(result.errors) == dict\n", "tokens": ["tests", "test_schema", "py", "def", "test_loads_returns_an_unmarshalresult", "user", "s", "userschema", "result", "s", "loads", "json", "dumps", "name", "monty", "assert", "type", "result", "unmarshalresult", "assert", "type", "result", "data", "user", "assert", "type", "result", "errors", "dict"], "doc_len": 29}
{"doc_id": "tests/test_schema.py::test_loads_many", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_loads_many", "text": "文件路径: tests/test_schema.py\ndef test_loads_many():\n    s = UserSchema()\n    in_data = [{'name': 'Mick'}, {'name': 'Keith'}]\n    in_json_data = json.dumps(in_data)\n    result = s.loads(in_json_data, many=True)\n    assert type(result.data) == list\n    assert result.data[0].name == 'Mick'\n", "tokens": ["tests", "test_schema", "py", "def", "test_loads_many", "s", "userschema", "in_data", "name", "mick", "name", "keith", "in_json_data", "json", "dumps", "in_data", "result", "s", "loads", "in_json_data", "many", "true", "assert", "type", "result", "data", "list", "assert", "result", "data", "0", "name", "mick"], "doc_len": 33}
{"doc_id": "tests/test_schema.py::test_loads_deserializes_from_json", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_loads_deserializes_from_json", "text": "文件路径: tests/test_schema.py\ndef test_loads_deserializes_from_json():\n    user_dict = {'name': 'Monty', 'age': '42.3'}\n    user_json = json.dumps(user_dict)\n    result, errors = UserSchema().loads(user_json)\n    assert isinstance(result, User)\n    assert result.name == 'Monty'\n    assert_almost_equal(result.age, 42.3)\n", "tokens": ["tests", "test_schema", "py", "def", "test_loads_deserializes_from_json", "user_dict", "name", "monty", "age", "42", "3", "user_json", "json", "dumps", "user_dict", "result", "errors", "userschema", "loads", "user_json", "assert", "isinstance", "result", "user", "assert", "result", "name", "monty", "assert_almost_equal", "result", "age", "42", "3"], "doc_len": 33}
{"doc_id": "tests/test_schema.py::test_serializing_none", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_serializing_none", "text": "文件路径: tests/test_schema.py\ndef test_serializing_none():\n    class MySchema(Schema):\n        id = fields.Str(default='no-id')\n        num = fields.Int()\n        name = fields.Str()\n    s = UserSchema().dump(None)\n    assert s.data == {'id': 'no-id'}\n    assert s.errors == {}\n", "tokens": ["tests", "test_schema", "py", "def", "test_serializing_none", "class", "myschema", "schema", "id", "fields", "str", "default", "no", "id", "num", "fields", "int", "name", "fields", "str", "s", "userschema", "dump", "none", "assert", "s", "data", "id", "no", "id", "assert", "s", "errors"], "doc_len": 33}
{"doc_id": "tests/test_schema.py::test_default_many_symmetry", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_default_many_symmetry", "text": "文件路径: tests/test_schema.py\ndef test_default_many_symmetry():\n    \"\"\"The dump/load(s) methods should all default to the many value of the schema.\"\"\"\n    s_many = UserSchema(many=True, only=('name',))\n    s_single = UserSchema(only=('name',))\n    u1, u2 = User('King Arthur'), User('Sir Lancelot')\n    s_single.load(s_single.dump(u1).data)\n    s_single.loads(s_single.dumps(u1).data)\n    s_many.load(s_many.dump([u1, u2]).data)\n    s_many.loads(s_many.dumps([u1, u2]).data)\n", "tokens": ["tests", "test_schema", "py", "def", "test_default_many_symmetry", "the", "dump", "load", "s", "methods", "should", "all", "default", "to", "the", "many", "value", "of", "the", "schema", "s_many", "userschema", "many", "true", "only", "name", "s_single", "userschema", "only", "name", "u1", "u2", "user", "king", "arthur", "user", "sir", "lancelot", "s_single", "load", "s_single", "dump", "u1", "data", "s_single", "loads", "s_single", "dumps", "u1", "data", "s_many", "load", "s_many", "dump", "u1", "u2", "data", "s_many", "loads", "s_many", "dumps", "u1", "u2", "data"], "doc_len": 64}
{"doc_id": "tests/test_schema.py::test_on_bind_field_hook", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_on_bind_field_hook", "text": "文件路径: tests/test_schema.py\ndef test_on_bind_field_hook():\n    class MySchema(Schema):\n        foo = fields.Str()\n\n        def on_bind_field(self, field_name, field_obj):\n            assert field_obj.parent is self\n            field_obj.metadata['fname'] = field_name\n\n    schema = MySchema()\n    assert schema.fields['foo'].metadata['fname'] == 'foo'\n", "tokens": ["tests", "test_schema", "py", "def", "test_on_bind_field_hook", "class", "myschema", "schema", "foo", "fields", "str", "def", "on_bind_field", "self", "field_name", "field_obj", "assert", "field_obj", "parent", "is", "self", "field_obj", "metadata", "fname", "field_name", "schema", "myschema", "assert", "schema", "fields", "foo", "metadata", "fname", "foo"], "doc_len": 34}
{"doc_id": "tests/test_schema.py::test_nested_on_bind_field_hook", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_nested_on_bind_field_hook", "text": "文件路径: tests/test_schema.py\ndef test_nested_on_bind_field_hook():\n    class MySchema(Schema):\n\n        class NestedSchema(Schema):\n            bar = fields.Str()\n\n            def on_bind_field(self, field_name, field_obj):\n                field_obj.metadata['fname'] = self.context['fname']\n\n        foo = fields.Nested(NestedSchema)\n\n    schema1 = MySchema(context={'fname': 'foobar'})\n    schema2 = MySchema(context={'fname': 'quxquux'})\n\n    assert schema1.fields['foo'].schema.fields['bar'].metadata['fname'] == 'foobar'\n    assert schema2.fields['foo'].schema.fields['bar'].metadata['fname'] == 'quxquux'\n", "tokens": ["tests", "test_schema", "py", "def", "test_nested_on_bind_field_hook", "class", "myschema", "schema", "class", "nestedschema", "schema", "bar", "fields", "str", "def", "on_bind_field", "self", "field_name", "field_obj", "field_obj", "metadata", "fname", "self", "context", "fname", "foo", "fields", "nested", "nestedschema", "schema1", "myschema", "context", "fname", "foobar", "schema2", "myschema", "context", "fname", "quxquux", "assert", "schema1", "fields", "foo", "schema", "fields", "bar", "metadata", "fname", "foobar", "assert", "schema2", "fields", "foo", "schema", "fields", "bar", "metadata", "fname", "quxquux"], "doc_len": 59}
{"doc_id": "tests/test_schema.py::TestValidate.test_validate_returns_errors_dict", "file_path": "tests/test_schema.py", "class_name": "TestValidate", "func_name": "test_validate_returns_errors_dict", "text": "文件路径: tests/test_schema.py, 类名: TestValidate\n    def test_validate_returns_errors_dict(self):\n        s = UserSchema()\n        errors = s.validate({'email': 'bad-email', 'name': 'Valid Name'})\n        assert type(errors) is dict\n        assert 'email' in errors\n        assert 'name' not in errors\n\n        valid_data = {'name': 'Valid Name', 'email': 'valid@email.com'}\n        errors = s.validate(valid_data)\n        assert errors == {}\n", "tokens": ["tests", "test_schema", "py", "testvalidate", "def", "test_validate_returns_errors_dict", "self", "s", "userschema", "errors", "s", "validate", "email", "bad", "email", "name", "valid", "name", "assert", "type", "errors", "is", "dict", "assert", "email", "in", "errors", "assert", "name", "not", "in", "errors", "valid_data", "name", "valid", "name", "email", "valid", "email", "com", "errors", "s", "validate", "valid_data", "assert", "errors"], "doc_len": 46}
{"doc_id": "tests/test_schema.py::TestValidate.test_validate_many", "file_path": "tests/test_schema.py", "class_name": "TestValidate", "func_name": "test_validate_many", "text": "文件路径: tests/test_schema.py, 类名: TestValidate\n    def test_validate_many(self):\n        s = UserSchema(many=True)\n        in_data = [\n            {'name': 'Valid Name', 'email': 'validemail@hotmail.com'},\n            {'name': 'Valid Name2', 'email': 'invalid'}\n        ]\n        errors = s.validate(in_data, many=True)\n        assert 1 in errors\n        assert 'email' in errors[1]\n", "tokens": ["tests", "test_schema", "py", "testvalidate", "def", "test_validate_many", "self", "s", "userschema", "many", "true", "in_data", "name", "valid", "name", "email", "validemail", "hotmail", "com", "name", "valid", "name2", "email", "invalid", "errors", "s", "validate", "in_data", "many", "true", "assert", "1", "in", "errors", "assert", "email", "in", "errors", "1"], "doc_len": 39}
{"doc_id": "tests/test_schema.py::TestValidate.test_validate_many_doesnt_store_index_if_index_errors_option_is_false", "file_path": "tests/test_schema.py", "class_name": "TestValidate", "func_name": "test_validate_many_doesnt_store_index_if_index_errors_option_is_false", "text": "文件路径: tests/test_schema.py, 类名: TestValidate\n    def test_validate_many_doesnt_store_index_if_index_errors_option_is_false(self):\n        class NoIndex(Schema):\n            email = fields.Email()\n\n            class Meta:\n                index_errors = False\n        s = NoIndex()\n        in_data = [\n            {'name': 'Valid Name', 'email': 'validemail@hotmail.com'},\n            {'name': 'Valid Name2', 'email': 'invalid'}\n        ]\n        errors = s.validate(in_data, many=True)\n        assert 1 not in errors\n        assert 'email' in errors\n", "tokens": ["tests", "test_schema", "py", "testvalidate", "def", "test_validate_many_doesnt_store_index_if_index_errors_option_is_false", "self", "class", "noindex", "schema", "email", "fields", "email", "class", "meta", "index_errors", "false", "s", "noindex", "in_data", "name", "valid", "name", "email", "validemail", "hotmail", "com", "name", "valid", "name2", "email", "invalid", "errors", "s", "validate", "in_data", "many", "true", "assert", "1", "not", "in", "errors", "assert", "email", "in", "errors"], "doc_len": 47}
{"doc_id": "tests/test_schema.py::TestValidate.test_validate_strict", "file_path": "tests/test_schema.py", "class_name": "TestValidate", "func_name": "test_validate_strict", "text": "文件路径: tests/test_schema.py, 类名: TestValidate\n    def test_validate_strict(self):\n        s = UserSchema(strict=True)\n        with pytest.raises(ValidationError) as excinfo:\n            s.validate({'email': 'bad-email'})\n        exc = excinfo.value\n        assert exc.messages == {'email': ['Not a valid email address.']}\n        assert type(exc.fields[0]) == fields.Email\n", "tokens": ["tests", "test_schema", "py", "testvalidate", "def", "test_validate_strict", "self", "s", "userschema", "strict", "true", "with", "pytest", "raises", "validationerror", "as", "excinfo", "s", "validate", "email", "bad", "email", "exc", "excinfo", "value", "assert", "exc", "messages", "email", "not", "a", "valid", "email", "address", "assert", "type", "exc", "fields", "0", "fields", "email"], "doc_len": 41}
{"doc_id": "tests/test_schema.py::TestValidate.test_validate_required", "file_path": "tests/test_schema.py", "class_name": "TestValidate", "func_name": "test_validate_required", "text": "文件路径: tests/test_schema.py, 类名: TestValidate\n    def test_validate_required(self):\n        class MySchema(Schema):\n            foo = fields.Field(required=True)\n\n        s = MySchema()\n        errors = s.validate({'bar': 42})\n        assert 'foo' in errors\n        assert 'required' in errors['foo'][0]\n", "tokens": ["tests", "test_schema", "py", "testvalidate", "def", "test_validate_required", "self", "class", "myschema", "schema", "foo", "fields", "field", "required", "true", "s", "myschema", "errors", "s", "validate", "bar", "42", "assert", "foo", "in", "errors", "assert", "required", "in", "errors", "foo", "0"], "doc_len": 32}
{"doc_id": "tests/test_schema.py::test_fields_are_not_copies", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_fields_are_not_copies", "text": "文件路径: tests/test_schema.py\ndef test_fields_are_not_copies(SchemaClass):\n    s = SchemaClass(User('Monty', age=42))\n    s2 = SchemaClass(User('Monty', age=43))\n    assert s.fields is not s2.fields\n", "tokens": ["tests", "test_schema", "py", "def", "test_fields_are_not_copies", "schemaclass", "s", "schemaclass", "user", "monty", "age", "42", "s2", "schemaclass", "user", "monty", "age", "43", "assert", "s", "fields", "is", "not", "s2", "fields"], "doc_len": 25}
{"doc_id": "tests/test_schema.py::test_dumps_returns_json", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_dumps_returns_json", "text": "文件路径: tests/test_schema.py\ndef test_dumps_returns_json(user):\n    ser = UserSchema()\n    serialized, errors = ser.dump(user)\n    json_data, errors = ser.dumps(user)\n    assert type(json_data) == str\n    expected = json.dumps(serialized)\n    assert json_data == expected\n", "tokens": ["tests", "test_schema", "py", "def", "test_dumps_returns_json", "user", "ser", "userschema", "serialized", "errors", "ser", "dump", "user", "json_data", "errors", "ser", "dumps", "user", "assert", "type", "json_data", "str", "expected", "json", "dumps", "serialized", "assert", "json_data", "expected"], "doc_len": 29}
{"doc_id": "tests/test_schema.py::test_naive_datetime_field", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_naive_datetime_field", "text": "文件路径: tests/test_schema.py\ndef test_naive_datetime_field(user, serialized_user):\n    expected = utils.isoformat(user.created)\n    assert serialized_user.data['created'] == expected\n", "tokens": ["tests", "test_schema", "py", "def", "test_naive_datetime_field", "user", "serialized_user", "expected", "utils", "isoformat", "user", "created", "assert", "serialized_user", "data", "created", "expected"], "doc_len": 17}
{"doc_id": "tests/test_schema.py::test_datetime_formatted_field", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_datetime_formatted_field", "text": "文件路径: tests/test_schema.py\ndef test_datetime_formatted_field(user, serialized_user):\n    result = serialized_user.data['created_formatted']\n    assert result == user.created.strftime(\"%Y-%m-%d\")\n", "tokens": ["tests", "test_schema", "py", "def", "test_datetime_formatted_field", "user", "serialized_user", "result", "serialized_user", "data", "created_formatted", "assert", "result", "user", "created", "strftime", "y", "m", "d"], "doc_len": 19}
{"doc_id": "tests/test_schema.py::test_datetime_iso_field", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_datetime_iso_field", "text": "文件路径: tests/test_schema.py\ndef test_datetime_iso_field(user, serialized_user):\n    assert serialized_user.data['created_iso'] == utils.isoformat(user.created)\n", "tokens": ["tests", "test_schema", "py", "def", "test_datetime_iso_field", "user", "serialized_user", "assert", "serialized_user", "data", "created_iso", "utils", "isoformat", "user", "created"], "doc_len": 15}
{"doc_id": "tests/test_schema.py::test_tz_datetime_field", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_tz_datetime_field", "text": "文件路径: tests/test_schema.py\ndef test_tz_datetime_field(user, serialized_user):\n    # Datetime is corrected back to GMT\n    expected = utils.isoformat(user.updated)\n    assert serialized_user.data['updated'] == expected\n", "tokens": ["tests", "test_schema", "py", "def", "test_tz_datetime_field", "user", "serialized_user", "datetime", "is", "corrected", "back", "to", "gmt", "expected", "utils", "isoformat", "user", "updated", "assert", "serialized_user", "data", "updated", "expected"], "doc_len": 23}
{"doc_id": "tests/test_schema.py::test_local_datetime_field", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_local_datetime_field", "text": "文件路径: tests/test_schema.py\ndef test_local_datetime_field(user, serialized_user):\n    expected = utils.isoformat(user.updated, localtime=True)\n    assert serialized_user.data['updated_local'] == expected\n", "tokens": ["tests", "test_schema", "py", "def", "test_local_datetime_field", "user", "serialized_user", "expected", "utils", "isoformat", "user", "updated", "localtime", "true", "assert", "serialized_user", "data", "updated_local", "expected"], "doc_len": 19}
{"doc_id": "tests/test_schema.py::test_class_variable", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_class_variable", "text": "文件路径: tests/test_schema.py\ndef test_class_variable(serialized_user):\n    assert serialized_user.data['species'] == 'Homo sapiens'\n", "tokens": ["tests", "test_schema", "py", "def", "test_class_variable", "serialized_user", "assert", "serialized_user", "data", "species", "homo", "sapiens"], "doc_len": 12}
{"doc_id": "tests/test_schema.py::test_serialize_many", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_serialize_many", "text": "文件路径: tests/test_schema.py\ndef test_serialize_many(SchemaClass):\n    user1 = User(name=\"Mick\", age=123)\n    user2 = User(name=\"Keith\", age=456)\n    users = [user1, user2]\n    serialized = SchemaClass(many=True).dump(users)\n    assert len(serialized.data) == 2\n    assert serialized.data[0]['name'] == \"Mick\"\n    assert serialized.data[1]['name'] == \"Keith\"\n", "tokens": ["tests", "test_schema", "py", "def", "test_serialize_many", "schemaclass", "user1", "user", "name", "mick", "age", "123", "user2", "user", "name", "keith", "age", "456", "users", "user1", "user2", "serialized", "schemaclass", "many", "true", "dump", "users", "assert", "len", "serialized", "data", "2", "assert", "serialized", "data", "0", "name", "mick", "assert", "serialized", "data", "1", "name", "keith"], "doc_len": 44}
{"doc_id": "tests/test_schema.py::test_inheriting_schema", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_inheriting_schema", "text": "文件路径: tests/test_schema.py\ndef test_inheriting_schema(user):\n    sch = ExtendedUserSchema()\n    result = sch.dump(user)\n    assert result.data['name'] == user.name\n    user.is_old = True\n    result = sch.dump(user)\n    assert result.data['is_old'] is True\n", "tokens": ["tests", "test_schema", "py", "def", "test_inheriting_schema", "user", "sch", "extendeduserschema", "result", "sch", "dump", "user", "assert", "result", "data", "name", "user", "name", "user", "is_old", "true", "result", "sch", "dump", "user", "assert", "result", "data", "is_old", "is", "true"], "doc_len": 31}
{"doc_id": "tests/test_schema.py::test_custom_field", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_custom_field", "text": "文件路径: tests/test_schema.py\ndef test_custom_field(serialized_user, user):\n    assert serialized_user.data['uppername'] == user.name.upper()\n", "tokens": ["tests", "test_schema", "py", "def", "test_custom_field", "serialized_user", "user", "assert", "serialized_user", "data", "uppername", "user", "name", "upper"], "doc_len": 14}
{"doc_id": "tests/test_schema.py::test_url_field", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_url_field", "text": "文件路径: tests/test_schema.py\ndef test_url_field(serialized_user, user):\n    assert serialized_user.data['homepage'] == user.homepage\n", "tokens": ["tests", "test_schema", "py", "def", "test_url_field", "serialized_user", "user", "assert", "serialized_user", "data", "homepage", "user", "homepage"], "doc_len": 13}
{"doc_id": "tests/test_schema.py::test_relative_url_field", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_relative_url_field", "text": "文件路径: tests/test_schema.py\ndef test_relative_url_field():\n    u = {'name': 'John', 'homepage': '/foo'}\n    result, errors = UserRelativeUrlSchema().load(u)\n    assert 'homepage' not in errors\n", "tokens": ["tests", "test_schema", "py", "def", "test_relative_url_field", "u", "name", "john", "homepage", "foo", "result", "errors", "userrelativeurlschema", "load", "u", "assert", "homepage", "not", "in", "errors"], "doc_len": 20}
{"doc_id": "tests/test_schema.py::test_stores_invalid_url_error", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_stores_invalid_url_error", "text": "文件路径: tests/test_schema.py\ndef test_stores_invalid_url_error(SchemaClass):\n    user = {'name': 'Steve', 'homepage': 'www.foo.com'}\n    result = SchemaClass().load(user)\n    assert \"homepage\" in result.errors\n    expected = ['Not a valid URL.']\n    assert result.errors['homepage'] == expected\n", "tokens": ["tests", "test_schema", "py", "def", "test_stores_invalid_url_error", "schemaclass", "user", "name", "steve", "homepage", "www", "foo", "com", "result", "schemaclass", "load", "user", "assert", "homepage", "in", "result", "errors", "expected", "not", "a", "valid", "url", "assert", "result", "errors", "homepage", "expected"], "doc_len": 32}
{"doc_id": "tests/test_schema.py::test_email_field", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_email_field", "text": "文件路径: tests/test_schema.py\ndef test_email_field(SchemaClass):\n    u = User(\"John\", email=\"john@example.com\")\n    s = SchemaClass().dump(u)\n    assert s.data['email'] == \"john@example.com\"\n", "tokens": ["tests", "test_schema", "py", "def", "test_email_field", "schemaclass", "u", "user", "john", "email", "john", "example", "com", "s", "schemaclass", "dump", "u", "assert", "s", "data", "email", "john", "example", "com"], "doc_len": 24}
{"doc_id": "tests/test_schema.py::test_stored_invalid_email", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_stored_invalid_email", "text": "文件路径: tests/test_schema.py\ndef test_stored_invalid_email():\n    u = {'name': 'John', 'email': 'johnexample.com'}\n    s = UserSchema().load(u)\n    assert \"email\" in s.errors\n    assert s.errors['email'][0] == 'Not a valid email address.'\n", "tokens": ["tests", "test_schema", "py", "def", "test_stored_invalid_email", "u", "name", "john", "email", "johnexample", "com", "s", "userschema", "load", "u", "assert", "email", "in", "s", "errors", "assert", "s", "errors", "email", "0", "not", "a", "valid", "email", "address"], "doc_len": 30}
{"doc_id": "tests/test_schema.py::test_integer_field", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_integer_field", "text": "文件路径: tests/test_schema.py\ndef test_integer_field():\n    u = User(\"John\", age=42.3)\n    serialized = UserIntSchema().dump(u)\n    assert type(serialized.data['age']) == int\n    assert serialized.data['age'] == 42\n", "tokens": ["tests", "test_schema", "py", "def", "test_integer_field", "u", "user", "john", "age", "42", "3", "serialized", "userintschema", "dump", "u", "assert", "type", "serialized", "data", "age", "int", "assert", "serialized", "data", "age", "42"], "doc_len": 26}
{"doc_id": "tests/test_schema.py::test_as_string", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_as_string", "text": "文件路径: tests/test_schema.py\ndef test_as_string():\n    u = User(\"John\", age=42.3)\n    serialized = UserFloatStringSchema().dump(u)\n    assert type(serialized.data['age']) == str\n    assert_almost_equal(float(serialized.data['age']), 42.3)\n", "tokens": ["tests", "test_schema", "py", "def", "test_as_string", "u", "user", "john", "age", "42", "3", "serialized", "userfloatstringschema", "dump", "u", "assert", "type", "serialized", "data", "age", "str", "assert_almost_equal", "float", "serialized", "data", "age", "42", "3"], "doc_len": 28}
{"doc_id": "tests/test_schema.py::test_extra", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_extra", "text": "文件路径: tests/test_schema.py\ndef test_extra():\n    user = User(\"Joe\", email=\"joe@foo.com\")\n    data, errors = UserSchema(extra={\"fav_color\": \"blue\"}).dump(user)\n    assert data['fav_color'] == \"blue\"\n", "tokens": ["tests", "test_schema", "py", "def", "test_extra", "user", "user", "joe", "email", "joe", "foo", "com", "data", "errors", "userschema", "extra", "fav_color", "blue", "dump", "user", "assert", "data", "fav_color", "blue"], "doc_len": 24}
{"doc_id": "tests/test_schema.py::test_extra_many", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_extra_many", "text": "文件路径: tests/test_schema.py\ndef test_extra_many():\n    users = [User('Fred'), User('Brian')]\n    data, errs = UserSchema(many=True, extra={'band': 'Queen'}).dump(users)\n    assert data[0]['band'] == 'Queen'\n", "tokens": ["tests", "test_schema", "py", "def", "test_extra_many", "users", "user", "fred", "user", "brian", "data", "errs", "userschema", "many", "true", "extra", "band", "queen", "dump", "users", "assert", "data", "0", "band", "queen"], "doc_len": 25}
{"doc_id": "tests/test_schema.py::test_method_field", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_method_field", "text": "文件路径: tests/test_schema.py\ndef test_method_field(SchemaClass, serialized_user):\n    assert serialized_user.data['is_old'] is False\n    u = User(\"Joe\", age=81)\n    assert SchemaClass().dump(u).data['is_old'] is True\n", "tokens": ["tests", "test_schema", "py", "def", "test_method_field", "schemaclass", "serialized_user", "assert", "serialized_user", "data", "is_old", "is", "false", "u", "user", "joe", "age", "81", "assert", "schemaclass", "dump", "u", "data", "is_old", "is", "true"], "doc_len": 26}
{"doc_id": "tests/test_schema.py::test_function_field", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_function_field", "text": "文件路径: tests/test_schema.py\ndef test_function_field(serialized_user, user):\n    assert serialized_user.data['lowername'] == user.name.lower()\n", "tokens": ["tests", "test_schema", "py", "def", "test_function_field", "serialized_user", "user", "assert", "serialized_user", "data", "lowername", "user", "name", "lower"], "doc_len": 14}
{"doc_id": "tests/test_schema.py::test_prefix", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_prefix", "text": "文件路径: tests/test_schema.py\ndef test_prefix(SchemaClass, user):\n    s = SchemaClass(prefix=\"usr_\").dump(user)\n    assert s.data['usr_name'] == user.name\n", "tokens": ["tests", "test_schema", "py", "def", "test_prefix", "schemaclass", "user", "s", "schemaclass", "prefix", "usr_", "dump", "user", "assert", "s", "data", "usr_name", "user", "name"], "doc_len": 19}
{"doc_id": "tests/test_schema.py::test_fields_must_be_declared_as_instances", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_fields_must_be_declared_as_instances", "text": "文件路径: tests/test_schema.py\ndef test_fields_must_be_declared_as_instances(user):\n    class BadUserSchema(Schema):\n        name = fields.String\n    with pytest.raises(TypeError, match='must be declared as a Field instance'):\n        BadUserSchema().dump(user)\n", "tokens": ["tests", "test_schema", "py", "def", "test_fields_must_be_declared_as_instances", "user", "class", "baduserschema", "schema", "name", "fields", "string", "with", "pytest", "raises", "typeerror", "match", "must", "be", "declared", "as", "a", "field", "instance", "baduserschema", "dump", "user"], "doc_len": 27}
{"doc_id": "tests/test_schema.py::test_serializing_generator", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_serializing_generator", "text": "文件路径: tests/test_schema.py\ndef test_serializing_generator(SchemaClass):\n    users = [User(\"Foo\"), User(\"Bar\")]\n    user_gen = (u for u in users)\n    s = SchemaClass(many=True).dump(user_gen)\n    assert len(s.data) == 2\n    assert s.data[0] == SchemaClass().dump(users[0]).data\n", "tokens": ["tests", "test_schema", "py", "def", "test_serializing_generator", "schemaclass", "users", "user", "foo", "user", "bar", "user_gen", "u", "for", "u", "in", "users", "s", "schemaclass", "many", "true", "dump", "user_gen", "assert", "len", "s", "data", "2", "assert", "s", "data", "0", "schemaclass", "dump", "users", "0", "data"], "doc_len": 37}
{"doc_id": "tests/test_schema.py::test_serializing_empty_list_returns_empty_list", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_serializing_empty_list_returns_empty_list", "text": "文件路径: tests/test_schema.py\ndef test_serializing_empty_list_returns_empty_list():\n    assert UserSchema(many=True).dump([]).data == []\n    assert UserMetaSchema(many=True).dump([]).data == []\n", "tokens": ["tests", "test_schema", "py", "def", "test_serializing_empty_list_returns_empty_list", "assert", "userschema", "many", "true", "dump", "data", "assert", "usermetaschema", "many", "true", "dump", "data"], "doc_len": 17}
{"doc_id": "tests/test_schema.py::test_serializing_dict", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_serializing_dict", "text": "文件路径: tests/test_schema.py\ndef test_serializing_dict():\n    user = {\"name\": \"foo\", \"email\": \"foo@bar.com\", \"age\": 'badage', \"various_data\": {\"foo\": \"bar\"}}\n    s = UserSchema().dump(user)\n    assert s.data['name'] == \"foo\"\n    assert 'age' in s.errors\n    assert 'age' not in s.data\n    assert s.data['various_data'] == {\"foo\": \"bar\"}\n", "tokens": ["tests", "test_schema", "py", "def", "test_serializing_dict", "user", "name", "foo", "email", "foo", "bar", "com", "age", "badage", "various_data", "foo", "bar", "s", "userschema", "dump", "user", "assert", "s", "data", "name", "foo", "assert", "age", "in", "s", "errors", "assert", "age", "not", "in", "s", "data", "assert", "s", "data", "various_data", "foo", "bar"], "doc_len": 43}
{"doc_id": "tests/test_schema.py::test_serializing_dict_with_meta_fields", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_serializing_dict_with_meta_fields", "text": "文件路径: tests/test_schema.py\ndef test_serializing_dict_with_meta_fields():\n    class MySchema(Schema):\n        class Meta:\n            fields = ('foo', 'bar')\n\n    sch = MySchema()\n    data, errors = sch.dump({'foo': 42, 'bar': 24, 'baz': 424})\n    assert not errors\n    assert data['foo'] == 42\n    assert data['bar'] == 24\n    assert 'baz' not in data\n", "tokens": ["tests", "test_schema", "py", "def", "test_serializing_dict_with_meta_fields", "class", "myschema", "schema", "class", "meta", "fields", "foo", "bar", "sch", "myschema", "data", "errors", "sch", "dump", "foo", "42", "bar", "24", "baz", "424", "assert", "not", "errors", "assert", "data", "foo", "42", "assert", "data", "bar", "24", "assert", "baz", "not", "in", "data"], "doc_len": 41}
{"doc_id": "tests/test_schema.py::test_exclude_in_init", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_exclude_in_init", "text": "文件路径: tests/test_schema.py\ndef test_exclude_in_init(SchemaClass, user):\n    s = SchemaClass(exclude=('age', 'homepage')).dump(user)\n    assert 'homepage' not in s.data\n    assert 'age' not in s.data\n    assert 'name' in s.data\n", "tokens": ["tests", "test_schema", "py", "def", "test_exclude_in_init", "schemaclass", "user", "s", "schemaclass", "exclude", "age", "homepage", "dump", "user", "assert", "homepage", "not", "in", "s", "data", "assert", "age", "not", "in", "s", "data", "assert", "name", "in", "s", "data"], "doc_len": 31}
{"doc_id": "tests/test_schema.py::test_only_in_init", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_only_in_init", "text": "文件路径: tests/test_schema.py\ndef test_only_in_init(SchemaClass, user):\n    s = SchemaClass(only=('name', 'age')).dump(user)\n    assert 'homepage' not in s.data\n    assert 'name' in s.data\n    assert 'age' in s.data\n", "tokens": ["tests", "test_schema", "py", "def", "test_only_in_init", "schemaclass", "user", "s", "schemaclass", "only", "name", "age", "dump", "user", "assert", "homepage", "not", "in", "s", "data", "assert", "name", "in", "s", "data", "assert", "age", "in", "s", "data"], "doc_len": 30}
{"doc_id": "tests/test_schema.py::test_invalid_only_param", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_invalid_only_param", "text": "文件路径: tests/test_schema.py\ndef test_invalid_only_param(user):\n    with pytest.raises(AttributeError):\n        UserSchema(only=(\"_invalid\", \"name\")).dump(user)\n", "tokens": ["tests", "test_schema", "py", "def", "test_invalid_only_param", "user", "with", "pytest", "raises", "attributeerror", "userschema", "only", "_invalid", "name", "dump", "user"], "doc_len": 16}
{"doc_id": "tests/test_schema.py::test_can_serialize_uuid", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_can_serialize_uuid", "text": "文件路径: tests/test_schema.py\ndef test_can_serialize_uuid(serialized_user, user):\n    assert serialized_user.data['uid'] == str(user.uid)\n", "tokens": ["tests", "test_schema", "py", "def", "test_can_serialize_uuid", "serialized_user", "user", "assert", "serialized_user", "data", "uid", "str", "user", "uid"], "doc_len": 14}
{"doc_id": "tests/test_schema.py::test_can_serialize_time", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_can_serialize_time", "text": "文件路径: tests/test_schema.py\ndef test_can_serialize_time(user, serialized_user):\n    expected = user.time_registered.isoformat()[:15]\n    assert serialized_user.data['time_registered'] == expected\n", "tokens": ["tests", "test_schema", "py", "def", "test_can_serialize_time", "user", "serialized_user", "expected", "user", "time_registered", "isoformat", "15", "assert", "serialized_user", "data", "time_registered", "expected"], "doc_len": 17}
{"doc_id": "tests/test_schema.py::test_invalid_time", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_invalid_time", "text": "文件路径: tests/test_schema.py\ndef test_invalid_time():\n    u = User('Joe', time_registered='foo')\n    s = UserSchema().dump(u)\n    assert '\"foo\" cannot be formatted as a time.' in s.errors['time_registered']\n", "tokens": ["tests", "test_schema", "py", "def", "test_invalid_time", "u", "user", "joe", "time_registered", "foo", "s", "userschema", "dump", "u", "assert", "foo", "cannot", "be", "formatted", "as", "a", "time", "in", "s", "errors", "time_registered"], "doc_len": 26}
{"doc_id": "tests/test_schema.py::test_invalid_date", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_invalid_date", "text": "文件路径: tests/test_schema.py\ndef test_invalid_date():\n    u = User(\"Joe\", birthdate='foo')\n    s = UserSchema().dump(u)\n    assert '\"foo\" cannot be formatted as a date.' in s.errors['birthdate']\n", "tokens": ["tests", "test_schema", "py", "def", "test_invalid_date", "u", "user", "joe", "birthdate", "foo", "s", "userschema", "dump", "u", "assert", "foo", "cannot", "be", "formatted", "as", "a", "date", "in", "s", "errors", "birthdate"], "doc_len": 26}
{"doc_id": "tests/test_schema.py::test_invalid_email", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_invalid_email", "text": "文件路径: tests/test_schema.py\ndef test_invalid_email():\n    u = User('Joe', email='bademail')\n    s = UserSchema().dump(u)\n    assert 'email' in s.errors\n    assert 'Not a valid email address.' in s.errors['email'][0]\n", "tokens": ["tests", "test_schema", "py", "def", "test_invalid_email", "u", "user", "joe", "email", "bademail", "s", "userschema", "dump", "u", "assert", "email", "in", "s", "errors", "assert", "not", "a", "valid", "email", "address", "in", "s", "errors", "email", "0"], "doc_len": 30}
{"doc_id": "tests/test_schema.py::test_invalid_url", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_invalid_url", "text": "文件路径: tests/test_schema.py\ndef test_invalid_url():\n    u = User('Joe', homepage='badurl')\n    s = UserSchema().dump(u)\n    assert 'homepage' in s.errors\n    assert 'Not a valid URL.' in s.errors['homepage'][0]\n", "tokens": ["tests", "test_schema", "py", "def", "test_invalid_url", "u", "user", "joe", "homepage", "badurl", "s", "userschema", "dump", "u", "assert", "homepage", "in", "s", "errors", "assert", "not", "a", "valid", "url", "in", "s", "errors", "homepage", "0"], "doc_len": 29}
{"doc_id": "tests/test_schema.py::test_invalid_dict_but_okay", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_invalid_dict_but_okay", "text": "文件路径: tests/test_schema.py\ndef test_invalid_dict_but_okay():\n    u = User('Joe', various_data='baddict')\n    s = UserSchema().dump(u)\n    assert 'various_data' not in s.errors\n", "tokens": ["tests", "test_schema", "py", "def", "test_invalid_dict_but_okay", "u", "user", "joe", "various_data", "baddict", "s", "userschema", "dump", "u", "assert", "various_data", "not", "in", "s", "errors"], "doc_len": 20}
{"doc_id": "tests/test_schema.py::test_custom_json", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_custom_json", "text": "文件路径: tests/test_schema.py\ndef test_custom_json():\n    class UserJSONSchema(Schema):\n        name = fields.String()\n\n        class Meta:\n            json_module = mockjson\n\n    user = User('Joe')\n    s = UserJSONSchema()\n    result, errors = s.dumps(user)\n    assert result == mockjson.dumps('val')\n", "tokens": ["tests", "test_schema", "py", "def", "test_custom_json", "class", "userjsonschema", "schema", "name", "fields", "string", "class", "meta", "json_module", "mockjson", "user", "user", "joe", "s", "userjsonschema", "result", "errors", "s", "dumps", "user", "assert", "result", "mockjson", "dumps", "val"], "doc_len": 30}
{"doc_id": "tests/test_schema.py::test_custom_error_message", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_custom_error_message", "text": "文件路径: tests/test_schema.py\ndef test_custom_error_message():\n    class ErrorSchema(Schema):\n        email = fields.Email(error_messages={'invalid': 'Invalid email'})\n        homepage = fields.Url(error_messages={'invalid': 'Bad homepage.'})\n        balance = fields.Decimal(error_messages={'invalid': 'Bad balance.'})\n\n    u = {'email': 'joe.net', 'homepage': 'joe@example.com', 'balance': 'blah'}\n    s = ErrorSchema()\n    data, errors = s.load(u)\n    assert \"Bad balance.\" in errors['balance']\n    assert \"Bad homepage.\" in errors['homepage']\n    assert \"Invalid email\" in errors['email']\n", "tokens": ["tests", "test_schema", "py", "def", "test_custom_error_message", "class", "errorschema", "schema", "email", "fields", "email", "error_messages", "invalid", "invalid", "email", "homepage", "fields", "url", "error_messages", "invalid", "bad", "homepage", "balance", "fields", "decimal", "error_messages", "invalid", "bad", "balance", "u", "email", "joe", "net", "homepage", "joe", "example", "com", "balance", "blah", "s", "errorschema", "data", "errors", "s", "load", "u", "assert", "bad", "balance", "in", "errors", "balance", "assert", "bad", "homepage", "in", "errors", "homepage", "assert", "invalid", "email", "in", "errors", "email"], "doc_len": 64}
{"doc_id": "tests/test_schema.py::test_load_errors_with_many", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_load_errors_with_many", "text": "文件路径: tests/test_schema.py\ndef test_load_errors_with_many():\n    class ErrorSchema(Schema):\n        email = fields.Email()\n\n    data = [\n        {'email': 'bademail'},\n        {'email': 'goo@email.com'},\n        {'email': 'anotherbademail'},\n    ]\n\n    data, errors = ErrorSchema(many=True).load(data)\n    assert 0 in errors\n    assert 2 in errors\n    assert 'Not a valid email address.' in errors[0]['email'][0]\n    assert 'Not a valid email address.' in errors[2]['email'][0]\n", "tokens": ["tests", "test_schema", "py", "def", "test_load_errors_with_many", "class", "errorschema", "schema", "email", "fields", "email", "data", "email", "bademail", "email", "goo", "email", "com", "email", "anotherbademail", "data", "errors", "errorschema", "many", "true", "load", "data", "assert", "0", "in", "errors", "assert", "2", "in", "errors", "assert", "not", "a", "valid", "email", "address", "in", "errors", "0", "email", "0", "assert", "not", "a", "valid", "email", "address", "in", "errors", "2", "email", "0"], "doc_len": 57}
{"doc_id": "tests/test_schema.py::test_error_raised_if_fields_option_is_not_list", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_error_raised_if_fields_option_is_not_list", "text": "文件路径: tests/test_schema.py\ndef test_error_raised_if_fields_option_is_not_list():\n    with pytest.raises(ValueError):\n        class BadSchema(Schema):\n            name = fields.String()\n\n            class Meta:\n                fields = 'name'\n", "tokens": ["tests", "test_schema", "py", "def", "test_error_raised_if_fields_option_is_not_list", "with", "pytest", "raises", "valueerror", "class", "badschema", "schema", "name", "fields", "string", "class", "meta", "fields", "name"], "doc_len": 19}
{"doc_id": "tests/test_schema.py::test_error_raised_if_additional_option_is_not_list", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_error_raised_if_additional_option_is_not_list", "text": "文件路径: tests/test_schema.py\ndef test_error_raised_if_additional_option_is_not_list():\n    with pytest.raises(ValueError):\n        class BadSchema(Schema):\n            name = fields.String()\n\n            class Meta:\n                additional = 'email'\n", "tokens": ["tests", "test_schema", "py", "def", "test_error_raised_if_additional_option_is_not_list", "with", "pytest", "raises", "valueerror", "class", "badschema", "schema", "name", "fields", "string", "class", "meta", "additional", "email"], "doc_len": 19}
{"doc_id": "tests/test_schema.py::test_nested_custom_set_in_exclude_reusing_schema", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_nested_custom_set_in_exclude_reusing_schema", "text": "文件路径: tests/test_schema.py\ndef test_nested_custom_set_in_exclude_reusing_schema():\n\n    class CustomSet(object):\n        # This custom set is to allow the obj check in BaseSchema.__filter_fields\n        # to pass, since it'll be a valid instance, and this class overrides\n        # getitem method to allow the hasattr check to pass too, which will try\n        # to access the first obj index and will simulate a IndexError throwing.\n        # e.g. SqlAlchemy.Query is a valid use case for this \"obj\".\n\n        def __getitem__(self, item):\n            return [][item]\n\n    class ChildSchema(Schema):\n        foo = fields.Field(required=True)\n        bar = fields.Field()\n\n        class Meta:\n            only = ('bar', )\n\n    class ParentSchema(Schema):\n        child = fields.Nested(ChildSchema, many=True, exclude=('foo',))\n\n    sch = ParentSchema(strict=True)\n    obj = dict(child=CustomSet())\n    sch.dumps(obj)\n    data = dict(child=[{'bar': 1}])\n    result = sch.load(data, partial=True)\n    assert not result.errors\n", "tokens": ["tests", "test_schema", "py", "def", "test_nested_custom_set_in_exclude_reusing_schema", "class", "customset", "object", "this", "custom", "set", "is", "to", "allow", "the", "obj", "check", "in", "baseschema", "__filter_fields", "to", "pass", "since", "it", "ll", "be", "a", "valid", "instance", "and", "this", "class", "overrides", "getitem", "method", "to", "allow", "the", "hasattr", "check", "to", "pass", "too", "which", "will", "try", "to", "access", "the", "first", "obj", "index", "and", "will", "simulate", "a", "indexerror", "throwing", "e", "g", "sqlalchemy", "query", "is", "a", "valid", "use", "case", "for", "this", "obj", "def", "__getitem__", "self", "item", "return", "item", "class", "childschema", "schema", "foo", "fields", "field", "required", "true", "bar", "fields", "field", "class", "meta", "only", "bar", "class", "parentschema", "schema", "child", "fields", "nested", "childschema", "many", "true", "exclude", "foo", "sch", "parentschema", "strict", "true", "obj", "dict", "child", "customset", "sch", "dumps", "obj", "data", "dict", "child", "bar", "1", "result", "sch", "load", "data", "partial", "true", "assert", "not", "result", "errors"], "doc_len": 128}
{"doc_id": "tests/test_schema.py::test_nested_only", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_nested_only", "text": "文件路径: tests/test_schema.py\ndef test_nested_only():\n    class ChildSchema(Schema):\n        foo = fields.Field()\n        bar = fields.Field()\n        baz = fields.Field()\n    class ParentSchema(Schema):\n        bla = fields.Field()\n        bli = fields.Field()\n        blubb = fields.Nested(ChildSchema)\n    sch = ParentSchema(only=('bla', 'blubb.foo', 'blubb.bar'))\n    data = dict(bla=1, bli=2, blubb=dict(foo=42, bar=24, baz=242))\n    result = sch.dump(data)\n    assert 'bla' in result.data\n    assert 'blubb' in result.data\n    assert 'bli' not in result.data\n    child = result.data['blubb']\n    assert 'foo' in child\n    assert 'bar' in child\n    assert 'baz' not in child\n", "tokens": ["tests", "test_schema", "py", "def", "test_nested_only", "class", "childschema", "schema", "foo", "fields", "field", "bar", "fields", "field", "baz", "fields", "field", "class", "parentschema", "schema", "bla", "fields", "field", "bli", "fields", "field", "blubb", "fields", "nested", "childschema", "sch", "parentschema", "only", "bla", "blubb", "foo", "blubb", "bar", "data", "dict", "bla", "1", "bli", "2", "blubb", "dict", "foo", "42", "bar", "24", "baz", "242", "result", "sch", "dump", "data", "assert", "bla", "in", "result", "data", "assert", "blubb", "in", "result", "data", "assert", "bli", "not", "in", "result", "data", "child", "result", "data", "blubb", "assert", "foo", "in", "child", "assert", "bar", "in", "child", "assert", "baz", "not", "in", "child"], "doc_len": 89}
{"doc_id": "tests/test_schema.py::test_nested_only_inheritance", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_nested_only_inheritance", "text": "文件路径: tests/test_schema.py\ndef test_nested_only_inheritance():\n    class ChildSchema(Schema):\n        foo = fields.Field()\n        bar = fields.Field()\n        baz = fields.Field()\n    class ParentSchema(Schema):\n        bla = fields.Field()\n        bli = fields.Field()\n        blubb = fields.Nested(ChildSchema, only=('foo', 'bar'))\n    sch = ParentSchema(only=('blubb.foo', 'blubb.baz'))\n    data = dict(bla=1, bli=2, blubb=dict(foo=42, bar=24, baz=242))\n    result = sch.dump(data)\n    assert 'bla' not in result.data\n    assert 'blubb' in result.data\n    assert 'bli' not in result.data\n    child = result.data['blubb']\n    assert 'foo' in child\n    assert 'bar' not in child\n    assert 'baz' not in child\n", "tokens": ["tests", "test_schema", "py", "def", "test_nested_only_inheritance", "class", "childschema", "schema", "foo", "fields", "field", "bar", "fields", "field", "baz", "fields", "field", "class", "parentschema", "schema", "bla", "fields", "field", "bli", "fields", "field", "blubb", "fields", "nested", "childschema", "only", "foo", "bar", "sch", "parentschema", "only", "blubb", "foo", "blubb", "baz", "data", "dict", "bla", "1", "bli", "2", "blubb", "dict", "foo", "42", "bar", "24", "baz", "242", "result", "sch", "dump", "data", "assert", "bla", "not", "in", "result", "data", "assert", "blubb", "in", "result", "data", "assert", "bli", "not", "in", "result", "data", "child", "result", "data", "blubb", "assert", "foo", "in", "child", "assert", "bar", "not", "in", "child", "assert", "baz", "not", "in", "child"], "doc_len": 93}
{"doc_id": "tests/test_schema.py::test_nested_only_empty_inheritance", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_nested_only_empty_inheritance", "text": "文件路径: tests/test_schema.py\ndef test_nested_only_empty_inheritance():\n    class ChildSchema(Schema):\n        foo = fields.Field()\n        bar = fields.Field()\n        baz = fields.Field()\n    class ParentSchema(Schema):\n        bla = fields.Field()\n        bli = fields.Field()\n        blubb = fields.Nested(ChildSchema, only=('bar',))\n    sch = ParentSchema(only=('blubb.foo',))\n    data = dict(bla=1, bli=2, blubb=dict(foo=42, bar=24, baz=242))\n    result = sch.dump(data)\n    assert 'bla' not in result.data\n    assert 'blubb' in result.data\n    assert 'bli' not in result.data\n    child = result.data['blubb']\n    assert 'foo' not in child\n    assert 'bar' not in child\n    assert 'baz' not in child\n", "tokens": ["tests", "test_schema", "py", "def", "test_nested_only_empty_inheritance", "class", "childschema", "schema", "foo", "fields", "field", "bar", "fields", "field", "baz", "fields", "field", "class", "parentschema", "schema", "bla", "fields", "field", "bli", "fields", "field", "blubb", "fields", "nested", "childschema", "only", "bar", "sch", "parentschema", "only", "blubb", "foo", "data", "dict", "bla", "1", "bli", "2", "blubb", "dict", "foo", "42", "bar", "24", "baz", "242", "result", "sch", "dump", "data", "assert", "bla", "not", "in", "result", "data", "assert", "blubb", "in", "result", "data", "assert", "bli", "not", "in", "result", "data", "child", "result", "data", "blubb", "assert", "foo", "not", "in", "child", "assert", "bar", "not", "in", "child", "assert", "baz", "not", "in", "child"], "doc_len": 91}
{"doc_id": "tests/test_schema.py::test_nested_exclude", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_nested_exclude", "text": "文件路径: tests/test_schema.py\ndef test_nested_exclude():\n    class ChildSchema(Schema):\n        foo = fields.Field()\n        bar = fields.Field()\n        baz = fields.Field()\n    class ParentSchema(Schema):\n        bla = fields.Field()\n        bli = fields.Field()\n        blubb = fields.Nested(ChildSchema)\n    sch = ParentSchema(exclude=('bli', 'blubb.baz'))\n    data = dict(bla=1, bli=2, blubb=dict(foo=42, bar=24, baz=242))\n    result = sch.dump(data)\n    assert 'bla' in result.data\n    assert 'blubb' in result.data\n    assert 'bli' not in result.data\n    child = result.data['blubb']\n    assert 'foo' in child\n    assert 'bar' in child\n    assert 'baz' not in child\n", "tokens": ["tests", "test_schema", "py", "def", "test_nested_exclude", "class", "childschema", "schema", "foo", "fields", "field", "bar", "fields", "field", "baz", "fields", "field", "class", "parentschema", "schema", "bla", "fields", "field", "bli", "fields", "field", "blubb", "fields", "nested", "childschema", "sch", "parentschema", "exclude", "bli", "blubb", "baz", "data", "dict", "bla", "1", "bli", "2", "blubb", "dict", "foo", "42", "bar", "24", "baz", "242", "result", "sch", "dump", "data", "assert", "bla", "in", "result", "data", "assert", "blubb", "in", "result", "data", "assert", "bli", "not", "in", "result", "data", "child", "result", "data", "blubb", "assert", "foo", "in", "child", "assert", "bar", "in", "child", "assert", "baz", "not", "in", "child"], "doc_len": 87}
{"doc_id": "tests/test_schema.py::test_nested_exclude_inheritance", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_nested_exclude_inheritance", "text": "文件路径: tests/test_schema.py\ndef test_nested_exclude_inheritance():\n    class ChildSchema(Schema):\n        foo = fields.Field()\n        bar = fields.Field()\n        baz = fields.Field()\n    class ParentSchema(Schema):\n        bla = fields.Field()\n        bli = fields.Field()\n        blubb = fields.Nested(ChildSchema, exclude=('baz',))\n    sch = ParentSchema(exclude=('blubb.foo',))\n    data = dict(bla=1, bli=2, blubb=dict(foo=42, bar=24, baz=242))\n    result = sch.dump(data)\n    assert 'bla' in result.data\n    assert 'blubb' in result.data\n    assert 'bli' in result.data\n    child = result.data['blubb']\n    assert 'foo' not in child\n    assert 'bar' in child\n    assert 'baz' not in child\n", "tokens": ["tests", "test_schema", "py", "def", "test_nested_exclude_inheritance", "class", "childschema", "schema", "foo", "fields", "field", "bar", "fields", "field", "baz", "fields", "field", "class", "parentschema", "schema", "bla", "fields", "field", "bli", "fields", "field", "blubb", "fields", "nested", "childschema", "exclude", "baz", "sch", "parentschema", "exclude", "blubb", "foo", "data", "dict", "bla", "1", "bli", "2", "blubb", "dict", "foo", "42", "bar", "24", "baz", "242", "result", "sch", "dump", "data", "assert", "bla", "in", "result", "data", "assert", "blubb", "in", "result", "data", "assert", "bli", "in", "result", "data", "child", "result", "data", "blubb", "assert", "foo", "not", "in", "child", "assert", "bar", "in", "child", "assert", "baz", "not", "in", "child"], "doc_len": 88}
{"doc_id": "tests/test_schema.py::test_nested_only_and_exclude", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_nested_only_and_exclude", "text": "文件路径: tests/test_schema.py\ndef test_nested_only_and_exclude():\n    class ChildSchema(Schema):\n        foo = fields.Field()\n        bar = fields.Field()\n        baz = fields.Field()\n    class ParentSchema(Schema):\n        bla = fields.Field()\n        bli = fields.Field()\n        blubb = fields.Nested(ChildSchema)\n    sch = ParentSchema(only=('bla', 'blubb.foo', 'blubb.bar'), exclude=('blubb.foo',))\n    data = dict(bla=1, bli=2, blubb=dict(foo=42, bar=24, baz=242))\n    result = sch.dump(data)\n    assert 'bla' in result.data\n    assert 'blubb' in result.data\n    assert 'bli' not in result.data\n    child = result.data['blubb']\n    assert 'foo' not in child\n    assert 'bar' in child\n    assert 'baz' not in child\n", "tokens": ["tests", "test_schema", "py", "def", "test_nested_only_and_exclude", "class", "childschema", "schema", "foo", "fields", "field", "bar", "fields", "field", "baz", "fields", "field", "class", "parentschema", "schema", "bla", "fields", "field", "bli", "fields", "field", "blubb", "fields", "nested", "childschema", "sch", "parentschema", "only", "bla", "blubb", "foo", "blubb", "bar", "exclude", "blubb", "foo", "data", "dict", "bla", "1", "bli", "2", "blubb", "dict", "foo", "42", "bar", "24", "baz", "242", "result", "sch", "dump", "data", "assert", "bla", "in", "result", "data", "assert", "blubb", "in", "result", "data", "assert", "bli", "not", "in", "result", "data", "child", "result", "data", "blubb", "assert", "foo", "not", "in", "child", "assert", "bar", "in", "child", "assert", "baz", "not", "in", "child"], "doc_len": 93}
{"doc_id": "tests/test_schema.py::test_nested_only_then_exclude_inheritance", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_nested_only_then_exclude_inheritance", "text": "文件路径: tests/test_schema.py\ndef test_nested_only_then_exclude_inheritance():\n    class ChildSchema(Schema):\n        foo = fields.Field()\n        bar = fields.Field()\n        baz = fields.Field()\n    class ParentSchema(Schema):\n        bla = fields.Field()\n        bli = fields.Field()\n        blubb = fields.Nested(ChildSchema, only=('foo', 'bar'))\n    sch = ParentSchema(exclude=('blubb.foo',))\n    data = dict(bla=1, bli=2, blubb=dict(foo=42, bar=24, baz=242))\n    result = sch.dump(data)\n    assert 'bla' in result.data\n    assert 'blubb' in result.data\n    assert 'bli' in result.data\n    child = result.data['blubb']\n    assert 'foo' not in child\n    assert 'bar' in child\n    assert 'baz' not in child\n", "tokens": ["tests", "test_schema", "py", "def", "test_nested_only_then_exclude_inheritance", "class", "childschema", "schema", "foo", "fields", "field", "bar", "fields", "field", "baz", "fields", "field", "class", "parentschema", "schema", "bla", "fields", "field", "bli", "fields", "field", "blubb", "fields", "nested", "childschema", "only", "foo", "bar", "sch", "parentschema", "exclude", "blubb", "foo", "data", "dict", "bla", "1", "bli", "2", "blubb", "dict", "foo", "42", "bar", "24", "baz", "242", "result", "sch", "dump", "data", "assert", "bla", "in", "result", "data", "assert", "blubb", "in", "result", "data", "assert", "bli", "in", "result", "data", "child", "result", "data", "blubb", "assert", "foo", "not", "in", "child", "assert", "bar", "in", "child", "assert", "baz", "not", "in", "child"], "doc_len": 89}
{"doc_id": "tests/test_schema.py::test_nested_exclude_then_only_inheritance", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_nested_exclude_then_only_inheritance", "text": "文件路径: tests/test_schema.py\ndef test_nested_exclude_then_only_inheritance():\n    class ChildSchema(Schema):\n        foo = fields.Field()\n        bar = fields.Field()\n        baz = fields.Field()\n    class ParentSchema(Schema):\n        bla = fields.Field()\n        bli = fields.Field()\n        blubb = fields.Nested(ChildSchema, exclude=('foo',))\n    sch = ParentSchema(only=('blubb.bar',))\n    data = dict(bla=1, bli=2, blubb=dict(foo=42, bar=24, baz=242))\n    result = sch.dump(data)\n    assert 'bla' not in result.data\n    assert 'blubb' in result.data\n    assert 'bli' not in result.data\n    child = result.data['blubb']\n    assert 'foo' not in child\n    assert 'bar' in child\n    assert 'baz' not in child\n", "tokens": ["tests", "test_schema", "py", "def", "test_nested_exclude_then_only_inheritance", "class", "childschema", "schema", "foo", "fields", "field", "bar", "fields", "field", "baz", "fields", "field", "class", "parentschema", "schema", "bla", "fields", "field", "bli", "fields", "field", "blubb", "fields", "nested", "childschema", "exclude", "foo", "sch", "parentschema", "only", "blubb", "bar", "data", "dict", "bla", "1", "bli", "2", "blubb", "dict", "foo", "42", "bar", "24", "baz", "242", "result", "sch", "dump", "data", "assert", "bla", "not", "in", "result", "data", "assert", "blubb", "in", "result", "data", "assert", "bli", "not", "in", "result", "data", "child", "result", "data", "blubb", "assert", "foo", "not", "in", "child", "assert", "bar", "in", "child", "assert", "baz", "not", "in", "child"], "doc_len": 90}
{"doc_id": "tests/test_schema.py::test_nested_exclude_and_only_inheritance", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_nested_exclude_and_only_inheritance", "text": "文件路径: tests/test_schema.py\ndef test_nested_exclude_and_only_inheritance():\n    class ChildSchema(Schema):\n        foo = fields.Field()\n        bar = fields.Field()\n        baz = fields.Field()\n        ban = fields.Field()\n        fuu = fields.Field()\n    class ParentSchema(Schema):\n        bla = fields.Field()\n        bli = fields.Field()\n        blubb = fields.Nested(ChildSchema, only=('foo', 'bar', 'baz', 'ban'), exclude=('foo',))\n    sch = ParentSchema(only=('blubb.foo', 'blubb.bar', 'blubb.baz'), exclude=('blubb.baz',))\n    data = dict(bla=1, bli=2, blubb=dict(foo=42, bar=24, baz=242))\n    result = sch.dump(data)\n    assert 'bla' not in result.data\n    assert 'blubb' in result.data\n    assert 'bli' not in result.data\n    child = result.data['blubb']\n    assert 'foo' not in child\n    assert 'bar' in child\n    assert 'baz' not in child\n    assert 'ban' not in child\n    assert 'fuu' not in child\n", "tokens": ["tests", "test_schema", "py", "def", "test_nested_exclude_and_only_inheritance", "class", "childschema", "schema", "foo", "fields", "field", "bar", "fields", "field", "baz", "fields", "field", "ban", "fields", "field", "fuu", "fields", "field", "class", "parentschema", "schema", "bla", "fields", "field", "bli", "fields", "field", "blubb", "fields", "nested", "childschema", "only", "foo", "bar", "baz", "ban", "exclude", "foo", "sch", "parentschema", "only", "blubb", "foo", "blubb", "bar", "blubb", "baz", "exclude", "blubb", "baz", "data", "dict", "bla", "1", "bli", "2", "blubb", "dict", "foo", "42", "bar", "24", "baz", "242", "result", "sch", "dump", "data", "assert", "bla", "not", "in", "result", "data", "assert", "blubb", "in", "result", "data", "assert", "bli", "not", "in", "result", "data", "child", "result", "data", "blubb", "assert", "foo", "not", "in", "child", "assert", "bar", "in", "child", "assert", "baz", "not", "in", "child", "assert", "ban", "not", "in", "child", "assert", "fuu", "not", "in", "child"], "doc_len": 118}
{"doc_id": "tests/test_schema.py::test_meta_nested_exclude", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_meta_nested_exclude", "text": "文件路径: tests/test_schema.py\ndef test_meta_nested_exclude():\n    class ChildSchema(Schema):\n        foo = fields.Field()\n        bar = fields.Field()\n        baz = fields.Field()\n    class ParentSchema(Schema):\n        bla = fields.Field()\n        bli = fields.Field()\n        blubb = fields.Nested(ChildSchema)\n        class Meta:\n            exclude = ('blubb.foo',)\n\n    data = dict(bla=1, bli=2, blubb=dict(foo=42, bar=24, baz=242))\n\n    sch = ParentSchema()\n    result = sch.dump(data)\n    assert 'bla' in result.data\n    assert 'blubb' in result.data\n    assert 'bli' in result.data\n    child = result.data['blubb']\n    assert 'foo' not in child\n    assert 'bar' in child\n    assert 'baz' in child\n\n    # Test fields with dot notations in Meta.exclude on multiple instantiations\n    # Regression test for https://github.com/marshmallow-code/marshmallow/issues/1212\n    sch = ParentSchema()\n    result = sch.dump(data)\n    assert 'bla' in result.data\n    assert 'blubb' in result.data\n    assert 'bli' in result.data\n    child = result.data['blubb']\n    assert 'foo' not in child\n    assert 'bar' in child\n    assert 'baz' in child\n", "tokens": ["tests", "test_schema", "py", "def", "test_meta_nested_exclude", "class", "childschema", "schema", "foo", "fields", "field", "bar", "fields", "field", "baz", "fields", "field", "class", "parentschema", "schema", "bla", "fields", "field", "bli", "fields", "field", "blubb", "fields", "nested", "childschema", "class", "meta", "exclude", "blubb", "foo", "data", "dict", "bla", "1", "bli", "2", "blubb", "dict", "foo", "42", "bar", "24", "baz", "242", "sch", "parentschema", "result", "sch", "dump", "data", "assert", "bla", "in", "result", "data", "assert", "blubb", "in", "result", "data", "assert", "bli", "in", "result", "data", "child", "result", "data", "blubb", "assert", "foo", "not", "in", "child", "assert", "bar", "in", "child", "assert", "baz", "in", "child", "test", "fields", "with", "dot", "notations", "in", "meta", "exclude", "on", "multiple", "instantiations", "regression", "test", "for", "https", "github", "com", "marshmallow", "code", "marshmallow", "issues", "1212", "sch", "parentschema", "result", "sch", "dump", "data", "assert", "bla", "in", "result", "data", "assert", "blubb", "in", "result", "data", "assert", "bli", "in", "result", "data", "child", "result", "data", "blubb", "assert", "foo", "not", "in", "child", "assert", "bar", "in", "child", "assert", "baz", "in", "child"], "doc_len": 147}
{"doc_id": "tests/test_schema.py::test_nested_custom_set_not_implementing_getitem", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_nested_custom_set_not_implementing_getitem", "text": "文件路径: tests/test_schema.py\ndef test_nested_custom_set_not_implementing_getitem():\n    \"\"\"\n    This test checks that Marshmallow can serialize implementations of\n    :mod:`collections.abc.MutableSequence`, with ``__getitem__`` arguments\n    that are not integers.\n    \"\"\"\n    class ListLikeParent(object):\n        \"\"\"\n        Implements a list-like object that can get children using a\n        non-integer key\n        \"\"\"\n        def __init__(self, required_key, child):\n            \"\"\"\n            :param required_key: The key to use in ``__getitem__`` in order\n                to successfully get the ``child``\n            :param child: The return value of the ``child`` if\n            ``__getitem__`` succeeds\n            \"\"\"\n            self.children = {required_key: child}\n\n    class Child(object):\n        \"\"\"\n        Implements an object with some attribute\n        \"\"\"\n        def __init__(self, attribute):\n            \"\"\"\n            :param str attribute: The attribute to initialize\n            \"\"\"\n            self.attribute = attribute\n\n    class ChildSchema(Schema):\n        \"\"\"\n        The marshmallow schema for the child\n        \"\"\"\n        attribute = fields.Str()\n\n    class ParentSchema(Schema):\n        \"\"\"\n        The schema for the parent\n        \"\"\"\n        children = fields.Nested(ChildSchema, many=True)\n\n    attribute = 'Foo'\n    required_key = 'key'\n    child = Child(attribute)\n\n    parent = ListLikeParent(required_key, child)\n\n    assert not ParentSchema().dump(parent).errors\n", "tokens": ["tests", "test_schema", "py", "def", "test_nested_custom_set_not_implementing_getitem", "this", "test", "checks", "that", "marshmallow", "can", "serialize", "implementations", "of", "mod", "collections", "abc", "mutablesequence", "with", "__getitem__", "arguments", "that", "are", "not", "integers", "class", "listlikeparent", "object", "implements", "a", "list", "like", "object", "that", "can", "get", "children", "using", "a", "non", "integer", "key", "def", "__init__", "self", "required_key", "child", "param", "required_key", "the", "key", "to", "use", "in", "__getitem__", "in", "order", "to", "successfully", "get", "the", "child", "param", "child", "the", "return", "value", "of", "the", "child", "if", "__getitem__", "succeeds", "self", "children", "required_key", "child", "class", "child", "object", "implements", "an", "object", "with", "some", "attribute", "def", "__init__", "self", "attribute", "param", "str", "attribute", "the", "attribute", "to", "initialize", "self", "attribute", "attribute", "class", "childschema", "schema", "the", "marshmallow", "schema", "for", "the", "child", "attribute", "fields", "str", "class", "parentschema", "schema", "the", "schema", "for", "the", "parent", "children", "fields", "nested", "childschema", "many", "true", "attribute", "foo", "required_key", "key", "child", "child", "attribute", "parent", "listlikeparent", "required_key", "child", "assert", "not", "parentschema", "dump", "parent", "errors"], "doc_len": 143}
{"doc_id": "tests/test_schema.py::test_deeply_nested_only_and_exclude", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_deeply_nested_only_and_exclude", "text": "文件路径: tests/test_schema.py\ndef test_deeply_nested_only_and_exclude():\n    class GrandChildSchema(Schema):\n        goo = fields.Field()\n        gah = fields.Field()\n        bah = fields.Field()\n    class ChildSchema(Schema):\n        foo = fields.Field()\n        bar = fields.Field()\n        flubb = fields.Nested(GrandChildSchema)\n    class ParentSchema(Schema):\n        bla = fields.Field()\n        bli = fields.Field()\n        blubb = fields.Nested(ChildSchema)\n    sch = ParentSchema(\n        only=('bla', 'blubb.foo', 'blubb.flubb.goo', 'blubb.flubb.gah'),\n        exclude=('blubb.flubb.goo',)\n    )\n    data = dict(bla=1, bli=2, blubb=dict(foo=3, bar=4, flubb=dict(goo=5, gah=6, bah=7)))\n    result = sch.dump(data)\n    assert 'bla' in result.data\n    assert 'blubb' in result.data\n    assert 'bli' not in result.data\n    child = result.data['blubb']\n    assert 'foo' in child\n    assert 'flubb' in child\n    assert 'bar' not in child\n    grand_child = child['flubb']\n    assert 'gah' in grand_child\n    assert 'goo' not in grand_child\n    assert 'bah' not in grand_child\n", "tokens": ["tests", "test_schema", "py", "def", "test_deeply_nested_only_and_exclude", "class", "grandchildschema", "schema", "goo", "fields", "field", "gah", "fields", "field", "bah", "fields", "field", "class", "childschema", "schema", "foo", "fields", "field", "bar", "fields", "field", "flubb", "fields", "nested", "grandchildschema", "class", "parentschema", "schema", "bla", "fields", "field", "bli", "fields", "field", "blubb", "fields", "nested", "childschema", "sch", "parentschema", "only", "bla", "blubb", "foo", "blubb", "flubb", "goo", "blubb", "flubb", "gah", "exclude", "blubb", "flubb", "goo", "data", "dict", "bla", "1", "bli", "2", "blubb", "dict", "foo", "3", "bar", "4", "flubb", "dict", "goo", "5", "gah", "6", "bah", "7", "result", "sch", "dump", "data", "assert", "bla", "in", "result", "data", "assert", "blubb", "in", "result", "data", "assert", "bli", "not", "in", "result", "data", "child", "result", "data", "blubb", "assert", "foo", "in", "child", "assert", "flubb", "in", "child", "assert", "bar", "not", "in", "child", "grand_child", "child", "flubb", "assert", "gah", "in", "grand_child", "assert", "goo", "not", "in", "grand_child", "assert", "bah", "not", "in", "grand_child"], "doc_len": 133}
{"doc_id": "tests/test_schema.py::TestDeeplyNestedLoadOnly.schema", "file_path": "tests/test_schema.py", "class_name": "TestDeeplyNestedLoadOnly", "func_name": "schema", "text": "文件路径: tests/test_schema.py, 类名: TestDeeplyNestedLoadOnly\n    def schema(self):\n        class GrandChildSchema(Schema):\n            str_dump_only = fields.String()\n            str_load_only = fields.String()\n            str_regular = fields.String()\n\n        class ChildSchema(Schema):\n            str_dump_only = fields.String()\n            str_load_only = fields.String()\n            str_regular = fields.String()\n            grand_child = fields.Nested(GrandChildSchema)\n\n        class ParentSchema(Schema):\n            str_dump_only = fields.String()\n            str_load_only = fields.String()\n            str_regular = fields.String()\n            child = fields.Nested(ChildSchema)\n\n        return ParentSchema(\n            dump_only=('str_dump_only', 'child.str_dump_only', 'child.grand_child.str_dump_only'),\n            load_only=('str_load_only', 'child.str_load_only', 'child.grand_child.str_load_only'),\n        )\n", "tokens": ["tests", "test_schema", "py", "testdeeplynestedloadonly", "def", "schema", "self", "class", "grandchildschema", "schema", "str_dump_only", "fields", "string", "str_load_only", "fields", "string", "str_regular", "fields", "string", "class", "childschema", "schema", "str_dump_only", "fields", "string", "str_load_only", "fields", "string", "str_regular", "fields", "string", "grand_child", "fields", "nested", "grandchildschema", "class", "parentschema", "schema", "str_dump_only", "fields", "string", "str_load_only", "fields", "string", "str_regular", "fields", "string", "child", "fields", "nested", "childschema", "return", "parentschema", "dump_only", "str_dump_only", "child", "str_dump_only", "child", "grand_child", "str_dump_only", "load_only", "str_load_only", "child", "str_load_only", "child", "grand_child", "str_load_only"], "doc_len": 67}
{"doc_id": "tests/test_schema.py::TestDeeplyNestedLoadOnly.data", "file_path": "tests/test_schema.py", "class_name": "TestDeeplyNestedLoadOnly", "func_name": "data", "text": "文件路径: tests/test_schema.py, 类名: TestDeeplyNestedLoadOnly\n    def data(self):\n        return dict(\n            str_dump_only='Dump Only',\n            str_load_only='Load Only',\n            str_regular='Regular String',\n            child=dict(\n                str_dump_only='Dump Only',\n                str_load_only='Load Only',\n                str_regular='Regular String',\n                grand_child=dict(\n                    str_dump_only='Dump Only',\n                    str_load_only='Load Only',\n                    str_regular='Regular String',\n                )\n            )\n        )\n", "tokens": ["tests", "test_schema", "py", "testdeeplynestedloadonly", "def", "data", "self", "return", "dict", "str_dump_only", "dump", "only", "str_load_only", "load", "only", "str_regular", "regular", "string", "child", "dict", "str_dump_only", "dump", "only", "str_load_only", "load", "only", "str_regular", "regular", "string", "grand_child", "dict", "str_dump_only", "dump", "only", "str_load_only", "load", "only", "str_regular", "regular", "string"], "doc_len": 40}
{"doc_id": "tests/test_schema.py::TestDeeplyNestedLoadOnly.test_load_only", "file_path": "tests/test_schema.py", "class_name": "TestDeeplyNestedLoadOnly", "func_name": "test_load_only", "text": "文件路径: tests/test_schema.py, 类名: TestDeeplyNestedLoadOnly\n    def test_load_only(self, schema, data):\n        result = schema.dump(data)\n        assert not result.errors\n        assert 'str_load_only' not in result.data\n        assert 'str_dump_only' in result.data\n        assert 'str_regular' in result.data\n        child = result.data['child']\n        assert 'str_load_only' not in child\n        assert 'str_dump_only' in child\n        assert 'str_regular' in child\n        grand_child = child['grand_child']\n        assert 'str_load_only' not in grand_child\n        assert 'str_dump_only' in grand_child\n        assert 'str_regular' in grand_child\n", "tokens": ["tests", "test_schema", "py", "testdeeplynestedloadonly", "def", "test_load_only", "self", "schema", "data", "result", "schema", "dump", "data", "assert", "not", "result", "errors", "assert", "str_load_only", "not", "in", "result", "data", "assert", "str_dump_only", "in", "result", "data", "assert", "str_regular", "in", "result", "data", "child", "result", "data", "child", "assert", "str_load_only", "not", "in", "child", "assert", "str_dump_only", "in", "child", "assert", "str_regular", "in", "child", "grand_child", "child", "grand_child", "assert", "str_load_only", "not", "in", "grand_child", "assert", "str_dump_only", "in", "grand_child", "assert", "str_regular", "in", "grand_child"], "doc_len": 66}
{"doc_id": "tests/test_schema.py::TestDeeplyNestedLoadOnly.test_dump_only", "file_path": "tests/test_schema.py", "class_name": "TestDeeplyNestedLoadOnly", "func_name": "test_dump_only", "text": "文件路径: tests/test_schema.py, 类名: TestDeeplyNestedLoadOnly\n    def test_dump_only(self, schema, data):\n        result = schema.load(data)\n        assert not result.errors\n        assert 'str_dump_only' not in result.data\n        assert 'str_load_only' in result.data\n        assert 'str_regular' in result.data\n        child = result.data['child']\n        assert 'str_dump_only' not in child\n        assert 'str_load_only' in child\n        assert 'str_regular' in child\n        grand_child = child['grand_child']\n        assert 'str_dump_only' not in grand_child\n        assert 'str_load_only' in grand_child\n        assert 'str_regular' in grand_child\n", "tokens": ["tests", "test_schema", "py", "testdeeplynestedloadonly", "def", "test_dump_only", "self", "schema", "data", "result", "schema", "load", "data", "assert", "not", "result", "errors", "assert", "str_dump_only", "not", "in", "result", "data", "assert", "str_load_only", "in", "result", "data", "assert", "str_regular", "in", "result", "data", "child", "result", "data", "child", "assert", "str_dump_only", "not", "in", "child", "assert", "str_load_only", "in", "child", "assert", "str_regular", "in", "child", "grand_child", "child", "grand_child", "assert", "str_dump_only", "not", "in", "grand_child", "assert", "str_load_only", "in", "grand_child", "assert", "str_regular", "in", "grand_child"], "doc_len": 66}
{"doc_id": "tests/test_schema.py::TestDeeplyNestedListLoadOnly.schema", "file_path": "tests/test_schema.py", "class_name": "TestDeeplyNestedListLoadOnly", "func_name": "schema", "text": "文件路径: tests/test_schema.py, 类名: TestDeeplyNestedListLoadOnly\n    def schema(self):\n        class ChildSchema(Schema):\n            str_dump_only = fields.String()\n            str_load_only = fields.String()\n            str_regular = fields.String()\n\n        class ParentSchema(Schema):\n            str_dump_only = fields.String()\n            str_load_only = fields.String()\n            str_regular = fields.String()\n            child = fields.List(fields.Nested(ChildSchema))\n\n        return ParentSchema(\n            dump_only=('str_dump_only', 'child.str_dump_only'),\n            load_only=('str_load_only', 'child.str_load_only'),\n        )\n", "tokens": ["tests", "test_schema", "py", "testdeeplynestedlistloadonly", "def", "schema", "self", "class", "childschema", "schema", "str_dump_only", "fields", "string", "str_load_only", "fields", "string", "str_regular", "fields", "string", "class", "parentschema", "schema", "str_dump_only", "fields", "string", "str_load_only", "fields", "string", "str_regular", "fields", "string", "child", "fields", "list", "fields", "nested", "childschema", "return", "parentschema", "dump_only", "str_dump_only", "child", "str_dump_only", "load_only", "str_load_only", "child", "str_load_only"], "doc_len": 47}
{"doc_id": "tests/test_schema.py::TestDeeplyNestedListLoadOnly.data", "file_path": "tests/test_schema.py", "class_name": "TestDeeplyNestedListLoadOnly", "func_name": "data", "text": "文件路径: tests/test_schema.py, 类名: TestDeeplyNestedListLoadOnly\n    def data(self):\n        return dict(\n            str_dump_only='Dump Only',\n            str_load_only='Load Only',\n            str_regular='Regular String',\n            child=[dict(\n                str_dump_only='Dump Only',\n                str_load_only='Load Only',\n                str_regular='Regular String'\n            )]\n        )\n", "tokens": ["tests", "test_schema", "py", "testdeeplynestedlistloadonly", "def", "data", "self", "return", "dict", "str_dump_only", "dump", "only", "str_load_only", "load", "only", "str_regular", "regular", "string", "child", "dict", "str_dump_only", "dump", "only", "str_load_only", "load", "only", "str_regular", "regular", "string"], "doc_len": 29}
{"doc_id": "tests/test_schema.py::TestDeeplyNestedListLoadOnly.test_load_only", "file_path": "tests/test_schema.py", "class_name": "TestDeeplyNestedListLoadOnly", "func_name": "test_load_only", "text": "文件路径: tests/test_schema.py, 类名: TestDeeplyNestedListLoadOnly\n    def test_load_only(self, schema, data):\n        result = schema.dump(data)\n        assert not result.errors\n        assert 'str_load_only' not in result.data\n        assert 'str_dump_only' in result.data\n        assert 'str_regular' in result.data\n        child = result.data['child'][0]\n        assert 'str_load_only' not in child\n        assert 'str_dump_only' in child\n        assert 'str_regular' in child\n", "tokens": ["tests", "test_schema", "py", "testdeeplynestedlistloadonly", "def", "test_load_only", "self", "schema", "data", "result", "schema", "dump", "data", "assert", "not", "result", "errors", "assert", "str_load_only", "not", "in", "result", "data", "assert", "str_dump_only", "in", "result", "data", "assert", "str_regular", "in", "result", "data", "child", "result", "data", "child", "0", "assert", "str_load_only", "not", "in", "child", "assert", "str_dump_only", "in", "child", "assert", "str_regular", "in", "child"], "doc_len": 51}
{"doc_id": "tests/test_schema.py::TestDeeplyNestedListLoadOnly.test_dump_only", "file_path": "tests/test_schema.py", "class_name": "TestDeeplyNestedListLoadOnly", "func_name": "test_dump_only", "text": "文件路径: tests/test_schema.py, 类名: TestDeeplyNestedListLoadOnly\n    def test_dump_only(self, schema, data):\n        result = schema.load(data)\n        assert not result.errors\n        assert 'str_dump_only' not in result.data\n        assert 'str_load_only' in result.data\n        assert 'str_regular' in result.data\n        child = result.data['child'][0]\n        assert 'str_dump_only' not in child\n        assert 'str_load_only' in child\n        assert 'str_regular' in child\n", "tokens": ["tests", "test_schema", "py", "testdeeplynestedlistloadonly", "def", "test_dump_only", "self", "schema", "data", "result", "schema", "load", "data", "assert", "not", "result", "errors", "assert", "str_dump_only", "not", "in", "result", "data", "assert", "str_load_only", "in", "result", "data", "assert", "str_regular", "in", "result", "data", "child", "result", "data", "child", "0", "assert", "str_dump_only", "not", "in", "child", "assert", "str_load_only", "in", "child", "assert", "str_regular", "in", "child"], "doc_len": 51}
{"doc_id": "tests/test_schema.py::test_nested_constructor_only_and_exclude", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_nested_constructor_only_and_exclude", "text": "文件路径: tests/test_schema.py\ndef test_nested_constructor_only_and_exclude():\n    class GrandChildSchema(Schema):\n        goo = fields.Field()\n        gah = fields.Field()\n        bah = fields.Field()\n    class ChildSchema(Schema):\n        foo = fields.Field()\n        bar = fields.Field()\n        flubb = fields.Nested(GrandChildSchema)\n    class ParentSchema(Schema):\n        bla = fields.Field()\n        bli = fields.Field()\n        blubb = fields.Nested(\n            ChildSchema,\n            only=('foo', 'flubb.goo', 'flubb.gah'),\n            exclude=('flubb.goo',)\n        )\n    sch = ParentSchema(only=('bla', 'blubb'))\n    data = dict(bla=1, bli=2, blubb=dict(foo=3, bar=4, flubb=dict(goo=5, gah=6, bah=7)))\n    result = sch.dump(data)\n    assert 'bla' in result.data\n    assert 'blubb' in result.data\n    assert 'bli' not in result.data\n    child = result.data['blubb']\n    assert 'foo' in child\n    assert 'flubb' in child\n    assert 'bar' not in child\n    grand_child = child['flubb']\n    assert 'gah' in grand_child\n    assert 'goo' not in grand_child\n    assert 'bah' not in grand_child\n", "tokens": ["tests", "test_schema", "py", "def", "test_nested_constructor_only_and_exclude", "class", "grandchildschema", "schema", "goo", "fields", "field", "gah", "fields", "field", "bah", "fields", "field", "class", "childschema", "schema", "foo", "fields", "field", "bar", "fields", "field", "flubb", "fields", "nested", "grandchildschema", "class", "parentschema", "schema", "bla", "fields", "field", "bli", "fields", "field", "blubb", "fields", "nested", "childschema", "only", "foo", "flubb", "goo", "flubb", "gah", "exclude", "flubb", "goo", "sch", "parentschema", "only", "bla", "blubb", "data", "dict", "bla", "1", "bli", "2", "blubb", "dict", "foo", "3", "bar", "4", "flubb", "dict", "goo", "5", "gah", "6", "bah", "7", "result", "sch", "dump", "data", "assert", "bla", "in", "result", "data", "assert", "blubb", "in", "result", "data", "assert", "bli", "not", "in", "result", "data", "child", "result", "data", "blubb", "assert", "foo", "in", "child", "assert", "flubb", "in", "child", "assert", "bar", "not", "in", "child", "grand_child", "child", "flubb", "assert", "gah", "in", "grand_child", "assert", "goo", "not", "in", "grand_child", "assert", "bah", "not", "in", "grand_child"], "doc_len": 131}
{"doc_id": "tests/test_schema.py::test_only_and_exclude", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_only_and_exclude", "text": "文件路径: tests/test_schema.py\ndef test_only_and_exclude():\n    class MySchema(Schema):\n        foo = fields.Field()\n        bar = fields.Field()\n        baz = fields.Field()\n    sch = MySchema(only=('foo', 'bar'), exclude=('bar', ))\n    data = dict(foo=42, bar=24, baz=242)\n    result = sch.dump(data)\n    assert 'foo' in result.data\n    assert 'bar' not in result.data\n", "tokens": ["tests", "test_schema", "py", "def", "test_only_and_exclude", "class", "myschema", "schema", "foo", "fields", "field", "bar", "fields", "field", "baz", "fields", "field", "sch", "myschema", "only", "foo", "bar", "exclude", "bar", "data", "dict", "foo", "42", "bar", "24", "baz", "242", "result", "sch", "dump", "data", "assert", "foo", "in", "result", "data", "assert", "bar", "not", "in", "result", "data"], "doc_len": 47}
{"doc_id": "tests/test_schema.py::test_exclude_invalid_attribute", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_exclude_invalid_attribute", "text": "文件路径: tests/test_schema.py\ndef test_exclude_invalid_attribute():\n\n    class MySchema(Schema):\n        foo = fields.Field()\n\n    sch = MySchema(exclude=('bar', ))\n    assert sch.dump({'foo': 42}).data == {'foo': 42}\n", "tokens": ["tests", "test_schema", "py", "def", "test_exclude_invalid_attribute", "class", "myschema", "schema", "foo", "fields", "field", "sch", "myschema", "exclude", "bar", "assert", "sch", "dump", "foo", "42", "data", "foo", "42"], "doc_len": 23}
{"doc_id": "tests/test_schema.py::test_only_with_invalid_attribute", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_only_with_invalid_attribute", "text": "文件路径: tests/test_schema.py\ndef test_only_with_invalid_attribute():\n    class MySchema(Schema):\n        foo = fields.Field()\n\n    sch = MySchema(only=('bar', ))\n    with pytest.raises(KeyError) as excinfo:\n        sch.dump(dict(foo=42))\n    assert '\"bar\" is not a valid field' in str(excinfo.value.args[0])\n", "tokens": ["tests", "test_schema", "py", "def", "test_only_with_invalid_attribute", "class", "myschema", "schema", "foo", "fields", "field", "sch", "myschema", "only", "bar", "with", "pytest", "raises", "keyerror", "as", "excinfo", "sch", "dump", "dict", "foo", "42", "assert", "bar", "is", "not", "a", "valid", "field", "in", "str", "excinfo", "value", "args", "0"], "doc_len": 39}
{"doc_id": "tests/test_schema.py::test_only_bounded_by_fields", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_only_bounded_by_fields", "text": "文件路径: tests/test_schema.py\ndef test_only_bounded_by_fields():\n    class MySchema(Schema):\n\n        class Meta:\n            fields = ('foo', )\n\n    sch = MySchema(only=('baz', ))\n    assert sch.dump({'foo': 42}).data == {}\n", "tokens": ["tests", "test_schema", "py", "def", "test_only_bounded_by_fields", "class", "myschema", "schema", "class", "meta", "fields", "foo", "sch", "myschema", "only", "baz", "assert", "sch", "dump", "foo", "42", "data"], "doc_len": 22}
{"doc_id": "tests/test_schema.py::test_only_empty", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_only_empty", "text": "文件路径: tests/test_schema.py\ndef test_only_empty():\n    class MySchema(Schema):\n        foo = fields.Field()\n\n    sch = MySchema(only=())\n    assert 'foo' not in sch.dump({'foo': 'bar'})\n", "tokens": ["tests", "test_schema", "py", "def", "test_only_empty", "class", "myschema", "schema", "foo", "fields", "field", "sch", "myschema", "only", "assert", "foo", "not", "in", "sch", "dump", "foo", "bar"], "doc_len": 22}
{"doc_id": "tests/test_schema.py::test_nested_only_and_exclude", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_nested_only_and_exclude", "text": "文件路径: tests/test_schema.py\ndef test_nested_only_and_exclude():\n    class Inner(Schema):\n        foo = fields.Field()\n        bar = fields.Field()\n        baz = fields.Field()\n\n    class Outer(Schema):\n        inner = fields.Nested(Inner, only=('foo', 'bar'), exclude=('bar', ))\n\n    sch = Outer()\n    data = dict(inner=dict(foo=42, bar=24, baz=242))\n    result = sch.dump(data)\n    assert 'foo' in result.data['inner']\n    assert 'bar' not in result.data['inner']\n", "tokens": ["tests", "test_schema", "py", "def", "test_nested_only_and_exclude", "class", "inner", "schema", "foo", "fields", "field", "bar", "fields", "field", "baz", "fields", "field", "class", "outer", "schema", "inner", "fields", "nested", "inner", "only", "foo", "bar", "exclude", "bar", "sch", "outer", "data", "dict", "inner", "dict", "foo", "42", "bar", "24", "baz", "242", "result", "sch", "dump", "data", "assert", "foo", "in", "result", "data", "inner", "assert", "bar", "not", "in", "result", "data", "inner"], "doc_len": 58}
{"doc_id": "tests/test_schema.py::test_nested_with_sets", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_nested_with_sets", "text": "文件路径: tests/test_schema.py\ndef test_nested_with_sets():\n    class Inner(Schema):\n        foo = fields.Field()\n\n    class Outer(Schema):\n        inners = fields.Nested(Inner, many=True)\n\n    sch = Outer()\n\n    DataClass = namedtuple('DataClass', ['foo'])\n    data = dict(inners=set([DataClass(42), DataClass(2)]))\n    result = sch.dump(data)\n    assert len(result.data['inners']) == 2\n", "tokens": ["tests", "test_schema", "py", "def", "test_nested_with_sets", "class", "inner", "schema", "foo", "fields", "field", "class", "outer", "schema", "inners", "fields", "nested", "inner", "many", "true", "sch", "outer", "dataclass", "namedtuple", "dataclass", "foo", "data", "dict", "inners", "set", "dataclass", "42", "dataclass", "2", "result", "sch", "dump", "data", "assert", "len", "result", "data", "inners", "2"], "doc_len": 44}
{"doc_id": "tests/test_schema.py::test_meta_serializer_fields", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_meta_serializer_fields", "text": "文件路径: tests/test_schema.py\ndef test_meta_serializer_fields():\n    u = User(\"John\", age=42.3, email=\"john@example.com\",\n             homepage=\"http://john.com\")\n    result = UserMetaSchema().dump(u)\n    assert not result.errors\n    assert result.data['name'] == u.name\n    assert result.data['balance'] == decimal.Decimal('100.00')\n    assert result.data['uppername'] == \"JOHN\"\n    assert result.data['is_old'] is False\n    assert result.data['created'] == utils.isoformat(u.created)\n    assert result.data['updated_local'] == utils.isoformat(u.updated, localtime=True)\n    assert result.data['finger_count'] == 10\n    assert result.data['various_data'] == dict(u.various_data)\n", "tokens": ["tests", "test_schema", "py", "def", "test_meta_serializer_fields", "u", "user", "john", "age", "42", "3", "email", "john", "example", "com", "homepage", "http", "john", "com", "result", "usermetaschema", "dump", "u", "assert", "not", "result", "errors", "assert", "result", "data", "name", "u", "name", "assert", "result", "data", "balance", "decimal", "decimal", "100", "00", "assert", "result", "data", "uppername", "john", "assert", "result", "data", "is_old", "is", "false", "assert", "result", "data", "created", "utils", "isoformat", "u", "created", "assert", "result", "data", "updated_local", "utils", "isoformat", "u", "updated", "localtime", "true", "assert", "result", "data", "finger_count", "10", "assert", "result", "data", "various_data", "dict", "u", "various_data"], "doc_len": 82}
{"doc_id": "tests/test_schema.py::test_meta_fields_mapping", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_meta_fields_mapping", "text": "文件路径: tests/test_schema.py\ndef test_meta_fields_mapping(user):\n    s = UserMetaSchema()\n    s.dump(user)  # need to call dump to update fields\n    assert type(s.fields['name']) == fields.String\n    assert type(s.fields['created']) == fields.DateTime\n    assert type(s.fields['updated']) == fields.DateTime\n    assert type(s.fields['updated_local']) == fields.LocalDateTime\n    assert type(s.fields['age']) == fields.Float\n    assert type(s.fields['balance']) == fields.Decimal\n    assert type(s.fields['registered']) == fields.Boolean\n    assert type(s.fields['sex_choices']) == fields.Raw\n    assert type(s.fields['hair_colors']) == fields.Raw\n    assert type(s.fields['finger_count']) == fields.Integer\n    assert type(s.fields['uid']) == fields.UUID\n    assert type(s.fields['time_registered']) == fields.Time\n    assert type(s.fields['birthdate']) == fields.Date\n    assert type(s.fields['since_created']) == fields.TimeDelta\n", "tokens": ["tests", "test_schema", "py", "def", "test_meta_fields_mapping", "user", "s", "usermetaschema", "s", "dump", "user", "need", "to", "call", "dump", "to", "update", "fields", "assert", "type", "s", "fields", "name", "fields", "string", "assert", "type", "s", "fields", "created", "fields", "datetime", "assert", "type", "s", "fields", "updated", "fields", "datetime", "assert", "type", "s", "fields", "updated_local", "fields", "localdatetime", "assert", "type", "s", "fields", "age", "fields", "float", "assert", "type", "s", "fields", "balance", "fields", "decimal", "assert", "type", "s", "fields", "registered", "fields", "boolean", "assert", "type", "s", "fields", "sex_choices", "fields", "raw", "assert", "type", "s", "fields", "hair_colors", "fields", "raw", "assert", "type", "s", "fields", "finger_count", "fields", "integer", "assert", "type", "s", "fields", "uid", "fields", "uuid", "assert", "type", "s", "fields", "time_registered", "fields", "time", "assert", "type", "s", "fields", "birthdate", "fields", "date", "assert", "type", "s", "fields", "since_created", "fields", "timedelta"], "doc_len": 116}
{"doc_id": "tests/test_schema.py::test_meta_field_not_on_obj_raises_attribute_error", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_meta_field_not_on_obj_raises_attribute_error", "text": "文件路径: tests/test_schema.py\ndef test_meta_field_not_on_obj_raises_attribute_error(user):\n    class BadUserSchema(Schema):\n        class Meta:\n            fields = ('name', 'notfound')\n    with pytest.raises(AttributeError):\n        BadUserSchema().dump(user)\n", "tokens": ["tests", "test_schema", "py", "def", "test_meta_field_not_on_obj_raises_attribute_error", "user", "class", "baduserschema", "schema", "class", "meta", "fields", "name", "notfound", "with", "pytest", "raises", "attributeerror", "baduserschema", "dump", "user"], "doc_len": 21}
{"doc_id": "tests/test_schema.py::test_exclude_fields", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_exclude_fields", "text": "文件路径: tests/test_schema.py\ndef test_exclude_fields(user):\n    s = UserExcludeSchema().dump(user)\n    assert \"created\" not in s.data\n    assert \"updated\" not in s.data\n    assert \"name\" in s.data\n", "tokens": ["tests", "test_schema", "py", "def", "test_exclude_fields", "user", "s", "userexcludeschema", "dump", "user", "assert", "created", "not", "in", "s", "data", "assert", "updated", "not", "in", "s", "data", "assert", "name", "in", "s", "data"], "doc_len": 27}
{"doc_id": "tests/test_schema.py::test_fields_option_must_be_list_or_tuple", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_fields_option_must_be_list_or_tuple", "text": "文件路径: tests/test_schema.py\ndef test_fields_option_must_be_list_or_tuple(user):\n    with pytest.raises(ValueError):\n        class BadFields(Schema):\n            class Meta:\n                fields = \"name\"\n", "tokens": ["tests", "test_schema", "py", "def", "test_fields_option_must_be_list_or_tuple", "user", "with", "pytest", "raises", "valueerror", "class", "badfields", "schema", "class", "meta", "fields", "name"], "doc_len": 17}
{"doc_id": "tests/test_schema.py::test_exclude_option_must_be_list_or_tuple", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_exclude_option_must_be_list_or_tuple", "text": "文件路径: tests/test_schema.py\ndef test_exclude_option_must_be_list_or_tuple(user):\n    with pytest.raises(ValueError):\n        class BadExclude(Schema):\n            class Meta:\n                exclude = \"name\"\n", "tokens": ["tests", "test_schema", "py", "def", "test_exclude_option_must_be_list_or_tuple", "user", "with", "pytest", "raises", "valueerror", "class", "badexclude", "schema", "class", "meta", "exclude", "name"], "doc_len": 17}
{"doc_id": "tests/test_schema.py::test_dateformat_option", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_dateformat_option", "text": "文件路径: tests/test_schema.py\ndef test_dateformat_option(user):\n    fmt = '%Y-%m'\n\n    class DateFormatSchema(Schema):\n        updated = fields.DateTime(\"%m-%d\")\n\n        class Meta:\n            fields = ('created', 'updated')\n            dateformat = fmt\n    serialized = DateFormatSchema().dump(user)\n    assert serialized.data['created'] == user.created.strftime(fmt)\n    assert serialized.data['updated'] == user.updated.strftime(\"%m-%d\")\n", "tokens": ["tests", "test_schema", "py", "def", "test_dateformat_option", "user", "fmt", "y", "m", "class", "dateformatschema", "schema", "updated", "fields", "datetime", "m", "d", "class", "meta", "fields", "created", "updated", "dateformat", "fmt", "serialized", "dateformatschema", "dump", "user", "assert", "serialized", "data", "created", "user", "created", "strftime", "fmt", "assert", "serialized", "data", "updated", "user", "updated", "strftime", "m", "d"], "doc_len": 45}
{"doc_id": "tests/test_schema.py::test_default_dateformat", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_default_dateformat", "text": "文件路径: tests/test_schema.py\ndef test_default_dateformat(user):\n    class DateFormatSchema(Schema):\n        updated = fields.DateTime(format=\"%m-%d\")\n\n        class Meta:\n            fields = ('created', 'updated')\n    serialized = DateFormatSchema().dump(user)\n    assert serialized.data['created'] == utils.isoformat(user.created)\n    assert serialized.data['updated'] == user.updated.strftime(\"%m-%d\")\n", "tokens": ["tests", "test_schema", "py", "def", "test_default_dateformat", "user", "class", "dateformatschema", "schema", "updated", "fields", "datetime", "format", "m", "d", "class", "meta", "fields", "created", "updated", "serialized", "dateformatschema", "dump", "user", "assert", "serialized", "data", "created", "utils", "isoformat", "user", "created", "assert", "serialized", "data", "updated", "user", "updated", "strftime", "m", "d"], "doc_len": 41}
{"doc_id": "tests/test_schema.py::test_inherit_meta", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_inherit_meta", "text": "文件路径: tests/test_schema.py\ndef test_inherit_meta(user):\n    class InheritedMetaSchema(UserMetaSchema):\n        pass\n    result = InheritedMetaSchema().dump(user).data\n    expected = UserMetaSchema().dump(user).data\n    assert result == expected\n", "tokens": ["tests", "test_schema", "py", "def", "test_inherit_meta", "user", "class", "inheritedmetaschema", "usermetaschema", "pass", "result", "inheritedmetaschema", "dump", "user", "data", "expected", "usermetaschema", "dump", "user", "data", "assert", "result", "expected"], "doc_len": 23}
{"doc_id": "tests/test_schema.py::test_inherit_meta_override", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_inherit_meta_override", "text": "文件路径: tests/test_schema.py\ndef test_inherit_meta_override():\n    class Parent(Schema):\n        class Meta:\n            strict = True\n            fields = ('name', 'email')\n\n    class Child(Schema):\n        class Meta(Parent.Meta):\n            strict = False\n\n    child = Child()\n    assert child.opts.fields == ('name', 'email')\n    assert child.opts.strict is False\n", "tokens": ["tests", "test_schema", "py", "def", "test_inherit_meta_override", "class", "parent", "schema", "class", "meta", "strict", "true", "fields", "name", "email", "class", "child", "schema", "class", "meta", "parent", "meta", "strict", "false", "child", "child", "assert", "child", "opts", "fields", "name", "email", "assert", "child", "opts", "strict", "is", "false"], "doc_len": 38}
{"doc_id": "tests/test_schema.py::test_additional", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_additional", "text": "文件路径: tests/test_schema.py\ndef test_additional(user):\n    s = UserAdditionalSchema().dump(user)\n    assert s.data['lowername'] == user.name.lower()\n    assert s.data['name'] == user.name\n", "tokens": ["tests", "test_schema", "py", "def", "test_additional", "user", "s", "useradditionalschema", "dump", "user", "assert", "s", "data", "lowername", "user", "name", "lower", "assert", "s", "data", "name", "user", "name"], "doc_len": 23}
{"doc_id": "tests/test_schema.py::test_cant_set_both_additional_and_fields", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_cant_set_both_additional_and_fields", "text": "文件路径: tests/test_schema.py\ndef test_cant_set_both_additional_and_fields(user):\n    with pytest.raises(ValueError):\n        class BadSchema(Schema):\n            name = fields.String()\n\n            class Meta:\n                fields = (\"name\", 'email')\n                additional = ('email', 'homepage')\n", "tokens": ["tests", "test_schema", "py", "def", "test_cant_set_both_additional_and_fields", "user", "with", "pytest", "raises", "valueerror", "class", "badschema", "schema", "name", "fields", "string", "class", "meta", "fields", "name", "email", "additional", "email", "homepage"], "doc_len": 24}
{"doc_id": "tests/test_schema.py::test_serializing_none_meta", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_serializing_none_meta", "text": "文件路径: tests/test_schema.py\ndef test_serializing_none_meta():\n    s = UserMetaSchema().dump(None)\n    assert s.data == {}\n    assert s.errors == {}\n", "tokens": ["tests", "test_schema", "py", "def", "test_serializing_none_meta", "s", "usermetaschema", "dump", "none", "assert", "s", "data", "assert", "s", "errors"], "doc_len": 15}
{"doc_id": "tests/test_schema.py::MySchema.handle_error", "file_path": "tests/test_schema.py", "class_name": "MySchema", "func_name": "handle_error", "text": "文件路径: tests/test_schema.py, 类名: MySchema\n    def handle_error(self, errors, obj):\n        raise CustomError('Something bad happened')\n", "tokens": ["tests", "test_schema", "py", "myschema", "def", "handle_error", "self", "errors", "obj", "raise", "customerror", "something", "bad", "happened"], "doc_len": 14}
{"doc_id": "tests/test_schema.py::TestErrorHandler.test_error_handler_decorator_is_deprecated", "file_path": "tests/test_schema.py", "class_name": "TestErrorHandler", "func_name": "test_error_handler_decorator_is_deprecated", "text": "文件路径: tests/test_schema.py, 类名: TestErrorHandler\n    def test_error_handler_decorator_is_deprecated(self):\n\n        def deprecated():\n            class MySchema(Schema):\n                pass\n\n            @MySchema.error_handler\n            def f(*args, **kwargs):\n                pass\n\n        pytest.deprecated_call(deprecated)\n", "tokens": ["tests", "test_schema", "py", "testerrorhandler", "def", "test_error_handler_decorator_is_deprecated", "self", "def", "deprecated", "class", "myschema", "schema", "pass", "myschema", "error_handler", "def", "f", "args", "kwargs", "pass", "pytest", "deprecated_call", "deprecated"], "doc_len": 23}
{"doc_id": "tests/test_schema.py::TestErrorHandler.test_dump_with_custom_error_handler", "file_path": "tests/test_schema.py", "class_name": "TestErrorHandler", "func_name": "test_dump_with_custom_error_handler", "text": "文件路径: tests/test_schema.py, 类名: TestErrorHandler\n    def test_dump_with_custom_error_handler(self, user):\n        user.age = 'notavalidage'\n        with pytest.raises(CustomError):\n            MySchema().dump(user)\n", "tokens": ["tests", "test_schema", "py", "testerrorhandler", "def", "test_dump_with_custom_error_handler", "self", "user", "user", "age", "notavalidage", "with", "pytest", "raises", "customerror", "myschema", "dump", "user"], "doc_len": 18}
{"doc_id": "tests/test_schema.py::TestErrorHandler.test_dump_with_custom_error_handler_and_strict", "file_path": "tests/test_schema.py", "class_name": "TestErrorHandler", "func_name": "test_dump_with_custom_error_handler_and_strict", "text": "文件路径: tests/test_schema.py, 类名: TestErrorHandler\n    def test_dump_with_custom_error_handler_and_strict(self, user):\n        user.age = 'notavalidage'\n        with pytest.raises(CustomError):\n            MySchema(strict=True).dump(user)\n", "tokens": ["tests", "test_schema", "py", "testerrorhandler", "def", "test_dump_with_custom_error_handler_and_strict", "self", "user", "user", "age", "notavalidage", "with", "pytest", "raises", "customerror", "myschema", "strict", "true", "dump", "user"], "doc_len": 20}
{"doc_id": "tests/test_schema.py::TestErrorHandler.test_load_with_custom_error_handler", "file_path": "tests/test_schema.py", "class_name": "TestErrorHandler", "func_name": "test_load_with_custom_error_handler", "text": "文件路径: tests/test_schema.py, 类名: TestErrorHandler\n    def test_load_with_custom_error_handler(self):\n        in_data = {'email': 'invalid'}\n\n        class MySchema3(Schema):\n            email = fields.Email()\n\n            def handle_error(self, error, data):\n                assert type(error) is ValidationError\n                assert 'email' in error.messages\n                assert error.field_names == ['email']\n                assert error.fields == [self.fields['email']]\n                assert data == in_data\n                raise CustomError('Something bad happened')\n\n        with pytest.raises(CustomError):\n            MySchema3().load(in_data)\n", "tokens": ["tests", "test_schema", "py", "testerrorhandler", "def", "test_load_with_custom_error_handler", "self", "in_data", "email", "invalid", "class", "myschema3", "schema", "email", "fields", "email", "def", "handle_error", "self", "error", "data", "assert", "type", "error", "is", "validationerror", "assert", "email", "in", "error", "messages", "assert", "error", "field_names", "email", "assert", "error", "fields", "self", "fields", "email", "assert", "data", "in_data", "raise", "customerror", "something", "bad", "happened", "with", "pytest", "raises", "customerror", "myschema3", "load", "in_data"], "doc_len": 56}
{"doc_id": "tests/test_schema.py::TestErrorHandler.test_load_with_custom_error_handler_and_partially_valid_data", "file_path": "tests/test_schema.py", "class_name": "TestErrorHandler", "func_name": "test_load_with_custom_error_handler_and_partially_valid_data", "text": "文件路径: tests/test_schema.py, 类名: TestErrorHandler\n    def test_load_with_custom_error_handler_and_partially_valid_data(self):\n        in_data = {'email': 'invalid', 'url': 'http://valid.com'}\n\n        class MySchema(Schema):\n            email = fields.Email()\n            url = fields.URL()\n\n            def handle_error(self, error, data):\n                assert type(error) is ValidationError\n                assert 'email' in error.messages\n                assert error.field_names == ['email']\n                assert error.fields == [self.fields['email']]\n                assert data == in_data\n                raise CustomError('Something bad happened')\n\n        with pytest.raises(CustomError):\n            MySchema().load(in_data)\n", "tokens": ["tests", "test_schema", "py", "testerrorhandler", "def", "test_load_with_custom_error_handler_and_partially_valid_data", "self", "in_data", "email", "invalid", "url", "http", "valid", "com", "class", "myschema", "schema", "email", "fields", "email", "url", "fields", "url", "def", "handle_error", "self", "error", "data", "assert", "type", "error", "is", "validationerror", "assert", "email", "in", "error", "messages", "assert", "error", "field_names", "email", "assert", "error", "fields", "self", "fields", "email", "assert", "data", "in_data", "raise", "customerror", "something", "bad", "happened", "with", "pytest", "raises", "customerror", "myschema", "load", "in_data"], "doc_len": 63}
{"doc_id": "tests/test_schema.py::TestErrorHandler.test_custom_error_handler_with_validates_decorator", "file_path": "tests/test_schema.py", "class_name": "TestErrorHandler", "func_name": "test_custom_error_handler_with_validates_decorator", "text": "文件路径: tests/test_schema.py, 类名: TestErrorHandler\n    def test_custom_error_handler_with_validates_decorator(self):\n        in_data = {'num': -1}\n\n        class MySchema(Schema):\n            num = fields.Int()\n\n            @validates('num')\n            def validate_num(self, value):\n                if value < 0:\n                    raise ValidationError('Must be greater than 0.')\n\n            def handle_error(self, error, data):\n                assert type(error) is ValidationError\n                assert 'num' in error.messages\n                assert error.field_names == ['num']\n                assert error.fields == [self.fields['num']]\n                assert data == in_data\n                raise CustomError('Something bad happened')\n\n        with pytest.raises(CustomError):\n            MySchema().load(in_data)\n", "tokens": ["tests", "test_schema", "py", "testerrorhandler", "def", "test_custom_error_handler_with_validates_decorator", "self", "in_data", "num", "1", "class", "myschema", "schema", "num", "fields", "int", "validates", "num", "def", "validate_num", "self", "value", "if", "value", "0", "raise", "validationerror", "must", "be", "greater", "than", "0", "def", "handle_error", "self", "error", "data", "assert", "type", "error", "is", "validationerror", "assert", "num", "in", "error", "messages", "assert", "error", "field_names", "num", "assert", "error", "fields", "self", "fields", "num", "assert", "data", "in_data", "raise", "customerror", "something", "bad", "happened", "with", "pytest", "raises", "customerror", "myschema", "load", "in_data"], "doc_len": 72}
{"doc_id": "tests/test_schema.py::TestErrorHandler.test_custom_error_handler_with_validates_schema_decorator", "file_path": "tests/test_schema.py", "class_name": "TestErrorHandler", "func_name": "test_custom_error_handler_with_validates_schema_decorator", "text": "文件路径: tests/test_schema.py, 类名: TestErrorHandler\n    def test_custom_error_handler_with_validates_schema_decorator(self):\n        in_data = {'num': -1}\n\n        class MySchema(Schema):\n            num = fields.Int()\n\n            @validates_schema\n            def validates_schema(self, data):\n                raise ValidationError('Invalid schema!')\n\n            def handle_error(self, error, data):\n                assert type(error) is ValidationError\n                assert '_schema' in error.messages\n                assert error.field_names == ['_schema']\n                assert error.fields == []\n                assert data == in_data\n                raise CustomError('Something bad happened')\n\n        with pytest.raises(CustomError):\n            MySchema().load(in_data)\n", "tokens": ["tests", "test_schema", "py", "testerrorhandler", "def", "test_custom_error_handler_with_validates_schema_decorator", "self", "in_data", "num", "1", "class", "myschema", "schema", "num", "fields", "int", "validates_schema", "def", "validates_schema", "self", "data", "raise", "validationerror", "invalid", "schema", "def", "handle_error", "self", "error", "data", "assert", "type", "error", "is", "validationerror", "assert", "_schema", "in", "error", "messages", "assert", "error", "field_names", "_schema", "assert", "error", "fields", "assert", "data", "in_data", "raise", "customerror", "something", "bad", "happened", "with", "pytest", "raises", "customerror", "myschema", "load", "in_data"], "doc_len": 62}
{"doc_id": "tests/test_schema.py::TestErrorHandler.test_validate_with_custom_error_handler", "file_path": "tests/test_schema.py", "class_name": "TestErrorHandler", "func_name": "test_validate_with_custom_error_handler", "text": "文件路径: tests/test_schema.py, 类名: TestErrorHandler\n    def test_validate_with_custom_error_handler(self):\n        with pytest.raises(CustomError):\n            MySchema().validate({'age': 'notvalid', 'email': 'invalid'})\n", "tokens": ["tests", "test_schema", "py", "testerrorhandler", "def", "test_validate_with_custom_error_handler", "self", "with", "pytest", "raises", "customerror", "myschema", "validate", "age", "notvalid", "email", "invalid"], "doc_len": 17}
{"doc_id": "tests/test_schema.py::TestFieldValidation.test_errors_are_cleared_after_loading_collection", "file_path": "tests/test_schema.py", "class_name": "TestFieldValidation", "func_name": "test_errors_are_cleared_after_loading_collection", "text": "文件路径: tests/test_schema.py, 类名: TestFieldValidation\n    def test_errors_are_cleared_after_loading_collection(self):\n        def always_fail(val):\n            raise ValidationError('lol')\n\n        class MySchema(Schema):\n            foo = fields.Str(validate=always_fail)\n\n        schema = MySchema()\n        _, errors = schema.load([\n            {'foo': 'bar'},\n            {'foo': 'baz'}\n        ], many=True)\n        assert len(errors[0]['foo']) == 1\n        assert len(errors[1]['foo']) == 1\n        _, errors2 = schema.load({'foo': 'bar'})\n        assert len(errors2['foo']) == 1\n", "tokens": ["tests", "test_schema", "py", "testfieldvalidation", "def", "test_errors_are_cleared_after_loading_collection", "self", "def", "always_fail", "val", "raise", "validationerror", "lol", "class", "myschema", "schema", "foo", "fields", "str", "validate", "always_fail", "schema", "myschema", "_", "errors", "schema", "load", "foo", "bar", "foo", "baz", "many", "true", "assert", "len", "errors", "0", "foo", "1", "assert", "len", "errors", "1", "foo", "1", "_", "errors2", "schema", "load", "foo", "bar", "assert", "len", "errors2", "foo", "1"], "doc_len": 56}
{"doc_id": "tests/test_schema.py::TestFieldValidation.test_raises_error_with_list", "file_path": "tests/test_schema.py", "class_name": "TestFieldValidation", "func_name": "test_raises_error_with_list", "text": "文件路径: tests/test_schema.py, 类名: TestFieldValidation\n    def test_raises_error_with_list(self):\n        def validator(val):\n            raise ValidationError(['err1', 'err2'])\n\n        class MySchema(Schema):\n            foo = fields.Field(validate=validator)\n\n        s = MySchema()\n        errors = s.validate({'foo': 42})\n        assert errors['foo'] == ['err1', 'err2']\n", "tokens": ["tests", "test_schema", "py", "testfieldvalidation", "def", "test_raises_error_with_list", "self", "def", "validator", "val", "raise", "validationerror", "err1", "err2", "class", "myschema", "schema", "foo", "fields", "field", "validate", "validator", "s", "myschema", "errors", "s", "validate", "foo", "42", "assert", "errors", "foo", "err1", "err2"], "doc_len": 34}
{"doc_id": "tests/test_schema.py::TestFieldValidation.test_raises_error_with_dict", "file_path": "tests/test_schema.py", "class_name": "TestFieldValidation", "func_name": "test_raises_error_with_dict", "text": "文件路径: tests/test_schema.py, 类名: TestFieldValidation\n    def test_raises_error_with_dict(self):\n        def validator(val):\n            raise ValidationError({'code': 'invalid_foo'})\n\n        class MySchema(Schema):\n            foo = fields.Field(validate=validator)\n\n        s = MySchema()\n        errors = s.validate({'foo': 42})\n        assert errors['foo'] == [{'code': 'invalid_foo'}]\n", "tokens": ["tests", "test_schema", "py", "testfieldvalidation", "def", "test_raises_error_with_dict", "self", "def", "validator", "val", "raise", "validationerror", "code", "invalid_foo", "class", "myschema", "schema", "foo", "fields", "field", "validate", "validator", "s", "myschema", "errors", "s", "validate", "foo", "42", "assert", "errors", "foo", "code", "invalid_foo"], "doc_len": 34}
{"doc_id": "tests/test_schema.py::TestFieldValidation.test_ignored_if_not_in_only", "file_path": "tests/test_schema.py", "class_name": "TestFieldValidation", "func_name": "test_ignored_if_not_in_only", "text": "文件路径: tests/test_schema.py, 类名: TestFieldValidation\n    def test_ignored_if_not_in_only(self):\n        class MySchema(Schema):\n            a = fields.Field()\n            b = fields.Field()\n\n            @validates('a')\n            def validate_a(self, val):\n                raise ValidationError({'code': 'invalid_a'})\n\n            @validates('b')\n            def validate_b(self, val):\n                raise ValidationError({'code': 'invalid_b'})\n\n        s = MySchema(only=('b',))\n        errors = s.validate({'b': 'data'})\n        assert errors == {'b': {'code': 'invalid_b'}}\n", "tokens": ["tests", "test_schema", "py", "testfieldvalidation", "def", "test_ignored_if_not_in_only", "self", "class", "myschema", "schema", "a", "fields", "field", "b", "fields", "field", "validates", "a", "def", "validate_a", "self", "val", "raise", "validationerror", "code", "invalid_a", "validates", "b", "def", "validate_b", "self", "val", "raise", "validationerror", "code", "invalid_b", "s", "myschema", "only", "b", "errors", "s", "validate", "b", "data", "assert", "errors", "b", "code", "invalid_b"], "doc_len": 50}
{"doc_id": "tests/test_schema.py::test_schema_repr", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_schema_repr", "text": "文件路径: tests/test_schema.py\ndef test_schema_repr():\n    class MySchema(Schema):\n        name = fields.String()\n\n    ser = MySchema(many=True, strict=True)\n    rep = repr(ser)\n    assert 'MySchema' in rep\n    assert 'strict=True' in rep\n    assert 'many=True' in rep\n", "tokens": ["tests", "test_schema", "py", "def", "test_schema_repr", "class", "myschema", "schema", "name", "fields", "string", "ser", "myschema", "many", "true", "strict", "true", "rep", "repr", "ser", "assert", "myschema", "in", "rep", "assert", "strict", "true", "in", "rep", "assert", "many", "true", "in", "rep"], "doc_len": 34}
{"doc_id": "tests/test_schema.py::TestNestedSchema.user", "file_path": "tests/test_schema.py", "class_name": "TestNestedSchema", "func_name": "user", "text": "文件路径: tests/test_schema.py, 类名: TestNestedSchema\n    def user(self):\n        return User(name=\"Monty\", age=81)\n", "tokens": ["tests", "test_schema", "py", "testnestedschema", "def", "user", "self", "return", "user", "name", "monty", "age", "81"], "doc_len": 13}
{"doc_id": "tests/test_schema.py::TestNestedSchema.blog", "file_path": "tests/test_schema.py", "class_name": "TestNestedSchema", "func_name": "blog", "text": "文件路径: tests/test_schema.py, 类名: TestNestedSchema\n    def blog(self, user):\n        col1 = User(name=\"Mick\", age=123)\n        col2 = User(name=\"Keith\", age=456)\n        blog = Blog(\"Monty's blog\", user=user, categories=[\"humor\", \"violence\"],\n                         collaborators=[col1, col2])\n        return blog\n", "tokens": ["tests", "test_schema", "py", "testnestedschema", "def", "blog", "self", "user", "col1", "user", "name", "mick", "age", "123", "col2", "user", "name", "keith", "age", "456", "blog", "blog", "monty", "s", "blog", "user", "user", "categories", "humor", "violence", "collaborators", "col1", "col2", "return", "blog"], "doc_len": 35}
{"doc_id": "tests/test_schema.py::TestNestedSchema.test_flat_nested", "file_path": "tests/test_schema.py", "class_name": "TestNestedSchema", "func_name": "test_flat_nested", "text": "文件路径: tests/test_schema.py, 类名: TestNestedSchema\n    def test_flat_nested(self, blog):\n        class FlatBlogSchema(Schema):\n            name = fields.String()\n            user = fields.Nested(UserSchema, only='name')\n            collaborators = fields.Nested(UserSchema, only='name', many=True)\n        s = FlatBlogSchema()\n        data, _ = s.dump(blog)\n        assert data['user'] == blog.user.name\n        for i, name in enumerate(data['collaborators']):\n            assert name == blog.collaborators[i].name\n", "tokens": ["tests", "test_schema", "py", "testnestedschema", "def", "test_flat_nested", "self", "blog", "class", "flatblogschema", "schema", "name", "fields", "string", "user", "fields", "nested", "userschema", "only", "name", "collaborators", "fields", "nested", "userschema", "only", "name", "many", "true", "s", "flatblogschema", "data", "_", "s", "dump", "blog", "assert", "data", "user", "blog", "user", "name", "for", "i", "name", "in", "enumerate", "data", "collaborators", "assert", "name", "blog", "collaborators", "i", "name"], "doc_len": 54}
{"doc_id": "tests/test_schema.py::TestNestedSchema.test_flat_nested_with_dump_to", "file_path": "tests/test_schema.py", "class_name": "TestNestedSchema", "func_name": "test_flat_nested_with_dump_to", "text": "文件路径: tests/test_schema.py, 类名: TestNestedSchema\n    def test_flat_nested_with_dump_to(self, blog):\n        class UserSchema(Schema):\n            name = fields.String(dump_to='username')\n            age = fields.Int()\n        class FlatBlogSchema(Schema):\n            name = fields.String()\n            user = fields.Nested(UserSchema, only='name')\n            collaborators = fields.Nested(UserSchema, only='name', many=True)\n        s = FlatBlogSchema()\n        data, _ = s.dump(blog)\n        assert data['user'] == blog.user.name\n        for i, name in enumerate(data['collaborators']):\n            assert name == blog.collaborators[i].name\n", "tokens": ["tests", "test_schema", "py", "testnestedschema", "def", "test_flat_nested_with_dump_to", "self", "blog", "class", "userschema", "schema", "name", "fields", "string", "dump_to", "username", "age", "fields", "int", "class", "flatblogschema", "schema", "name", "fields", "string", "user", "fields", "nested", "userschema", "only", "name", "collaborators", "fields", "nested", "userschema", "only", "name", "many", "true", "s", "flatblogschema", "data", "_", "s", "dump", "blog", "assert", "data", "user", "blog", "user", "name", "for", "i", "name", "in", "enumerate", "data", "collaborators", "assert", "name", "blog", "collaborators", "i", "name"], "doc_len": 65}
{"doc_id": "tests/test_schema.py::TestNestedSchema.test_nested_many_with_missing_attribute", "file_path": "tests/test_schema.py", "class_name": "TestNestedSchema", "func_name": "test_nested_many_with_missing_attribute", "text": "文件路径: tests/test_schema.py, 类名: TestNestedSchema\n    def test_nested_many_with_missing_attribute(self, user):\n        class SimpleBlogSchema(Schema):\n            title = fields.Str()\n            wat = fields.Nested(UserSchema, many=True)\n        blog = Blog('Simple blog', user=user, collaborators=None)\n        schema = SimpleBlogSchema()\n        result = schema.dump(blog)\n        assert 'wat' not in result.data\n", "tokens": ["tests", "test_schema", "py", "testnestedschema", "def", "test_nested_many_with_missing_attribute", "self", "user", "class", "simpleblogschema", "schema", "title", "fields", "str", "wat", "fields", "nested", "userschema", "many", "true", "blog", "blog", "simple", "blog", "user", "user", "collaborators", "none", "schema", "simpleblogschema", "result", "schema", "dump", "blog", "assert", "wat", "not", "in", "result", "data"], "doc_len": 40}
{"doc_id": "tests/test_schema.py::TestNestedSchema.test_nested_with_attribute_none", "file_path": "tests/test_schema.py", "class_name": "TestNestedSchema", "func_name": "test_nested_with_attribute_none", "text": "文件路径: tests/test_schema.py, 类名: TestNestedSchema\n    def test_nested_with_attribute_none(self):\n        class InnerSchema(Schema):\n            bar = fields.Field()\n\n        class MySchema(Schema):\n            foo = fields.Nested(InnerSchema)\n\n        class MySchema2(Schema):\n            foo = fields.Nested(InnerSchema)\n\n        s = MySchema()\n        result = s.dump({'foo': None})\n        assert result.data['foo'] is None\n\n        s2 = MySchema2()\n        result2 = s2.dump({'foo': None})\n        assert result2.data['foo'] is None\n", "tokens": ["tests", "test_schema", "py", "testnestedschema", "def", "test_nested_with_attribute_none", "self", "class", "innerschema", "schema", "bar", "fields", "field", "class", "myschema", "schema", "foo", "fields", "nested", "innerschema", "class", "myschema2", "schema", "foo", "fields", "nested", "innerschema", "s", "myschema", "result", "s", "dump", "foo", "none", "assert", "result", "data", "foo", "is", "none", "s2", "myschema2", "result2", "s2", "dump", "foo", "none", "assert", "result2", "data", "foo", "is", "none"], "doc_len": 53}
{"doc_id": "tests/test_schema.py::TestNestedSchema.test_flat_nested2", "file_path": "tests/test_schema.py", "class_name": "TestNestedSchema", "func_name": "test_flat_nested2", "text": "文件路径: tests/test_schema.py, 类名: TestNestedSchema\n    def test_flat_nested2(self, blog):\n        class FlatBlogSchema(Schema):\n            name = fields.String()\n            collaborators = fields.Nested(UserSchema, many=True, only='uid')\n\n        s = FlatBlogSchema()\n        data, _ = s.dump(blog)\n        assert data['collaborators'][0] == str(blog.collaborators[0].uid)\n", "tokens": ["tests", "test_schema", "py", "testnestedschema", "def", "test_flat_nested2", "self", "blog", "class", "flatblogschema", "schema", "name", "fields", "string", "collaborators", "fields", "nested", "userschema", "many", "true", "only", "uid", "s", "flatblogschema", "data", "_", "s", "dump", "blog", "assert", "data", "collaborators", "0", "str", "blog", "collaborators", "0", "uid"], "doc_len": 38}
{"doc_id": "tests/test_schema.py::TestNestedSchema.test_nested_field_does_not_validate_required", "file_path": "tests/test_schema.py", "class_name": "TestNestedSchema", "func_name": "test_nested_field_does_not_validate_required", "text": "文件路径: tests/test_schema.py, 类名: TestNestedSchema\n    def test_nested_field_does_not_validate_required(self):\n        class BlogRequiredSchema(Schema):\n            user = fields.Nested(UserSchema, required=True)\n\n        b = Blog('Authorless blog', user=None)\n        _, errs = BlogRequiredSchema().dump(b)\n        assert 'user' not in errs\n", "tokens": ["tests", "test_schema", "py", "testnestedschema", "def", "test_nested_field_does_not_validate_required", "self", "class", "blogrequiredschema", "schema", "user", "fields", "nested", "userschema", "required", "true", "b", "blog", "authorless", "blog", "user", "none", "_", "errs", "blogrequiredschema", "dump", "b", "assert", "user", "not", "in", "errs"], "doc_len": 32}
{"doc_id": "tests/test_schema.py::TestNestedSchema.test_nested_required_errors_with_load_from", "file_path": "tests/test_schema.py", "class_name": "TestNestedSchema", "func_name": "test_nested_required_errors_with_load_from", "text": "文件路径: tests/test_schema.py, 类名: TestNestedSchema\n    def test_nested_required_errors_with_load_from(self):\n        class DatesInfoSchema(Schema):\n            created = fields.DateTime(required=True)\n            updated = fields.DateTime(required=True)\n\n        class UserSimpleSchema(Schema):\n            name = fields.String(required=True)\n            time_registered = fields.Time(load_from='timeRegistered', required=True)\n            dates_info = fields.Nested(DatesInfoSchema, load_from='datesInfo', required=True)\n\n        class BlogRequiredSchema(Schema):\n            user = fields.Nested(UserSimpleSchema, required=True)\n\n        _, errs = BlogRequiredSchema().load({})\n        assert 'timeRegistered' in errs['user']\n        assert 'datesInfo' in errs['user']\n", "tokens": ["tests", "test_schema", "py", "testnestedschema", "def", "test_nested_required_errors_with_load_from", "self", "class", "datesinfoschema", "schema", "created", "fields", "datetime", "required", "true", "updated", "fields", "datetime", "required", "true", "class", "usersimpleschema", "schema", "name", "fields", "string", "required", "true", "time_registered", "fields", "time", "load_from", "timeregistered", "required", "true", "dates_info", "fields", "nested", "datesinfoschema", "load_from", "datesinfo", "required", "true", "class", "blogrequiredschema", "schema", "user", "fields", "nested", "usersimpleschema", "required", "true", "_", "errs", "blogrequiredschema", "load", "assert", "timeregistered", "in", "errs", "user", "assert", "datesinfo", "in", "errs", "user"], "doc_len": 66}
{"doc_id": "tests/test_schema.py::TestNestedSchema.test_nested_none", "file_path": "tests/test_schema.py", "class_name": "TestNestedSchema", "func_name": "test_nested_none", "text": "文件路径: tests/test_schema.py, 类名: TestNestedSchema\n    def test_nested_none(self):\n        class BlogDefaultSchema(Schema):\n            user = fields.Nested(UserSchema, default=0)\n\n        b = Blog('Just the default blog', user=None)\n        data, _ = BlogDefaultSchema().dump(b)\n        assert data['user'] is None\n", "tokens": ["tests", "test_schema", "py", "testnestedschema", "def", "test_nested_none", "self", "class", "blogdefaultschema", "schema", "user", "fields", "nested", "userschema", "default", "0", "b", "blog", "just", "the", "default", "blog", "user", "none", "data", "_", "blogdefaultschema", "dump", "b", "assert", "data", "user", "is", "none"], "doc_len": 34}
{"doc_id": "tests/test_schema.py::TestNestedSchema.test_nested", "file_path": "tests/test_schema.py", "class_name": "TestNestedSchema", "func_name": "test_nested", "text": "文件路径: tests/test_schema.py, 类名: TestNestedSchema\n    def test_nested(self, user, blog):\n        blog_serializer = BlogSchema()\n        serialized_blog, _ = blog_serializer.dump(blog)\n        user_serializer = UserSchema()\n        serialized_user, _ = user_serializer.dump(user)\n        assert serialized_blog['user'] == serialized_user\n", "tokens": ["tests", "test_schema", "py", "testnestedschema", "def", "test_nested", "self", "user", "blog", "blog_serializer", "blogschema", "serialized_blog", "_", "blog_serializer", "dump", "blog", "user_serializer", "userschema", "serialized_user", "_", "user_serializer", "dump", "user", "assert", "serialized_blog", "user", "serialized_user"], "doc_len": 27}
{"doc_id": "tests/test_schema.py::TestNestedSchema.test_nested_many_fields", "file_path": "tests/test_schema.py", "class_name": "TestNestedSchema", "func_name": "test_nested_many_fields", "text": "文件路径: tests/test_schema.py, 类名: TestNestedSchema\n    def test_nested_many_fields(self, blog):\n        serialized_blog, _ = BlogSchema().dump(blog)\n        expected = [UserSchema().dump(col)[0] for col in blog.collaborators]\n        assert serialized_blog['collaborators'] == expected\n", "tokens": ["tests", "test_schema", "py", "testnestedschema", "def", "test_nested_many_fields", "self", "blog", "serialized_blog", "_", "blogschema", "dump", "blog", "expected", "userschema", "dump", "col", "0", "for", "col", "in", "blog", "collaborators", "assert", "serialized_blog", "collaborators", "expected"], "doc_len": 27}
{"doc_id": "tests/test_schema.py::TestNestedSchema.test_nested_meta_many", "file_path": "tests/test_schema.py", "class_name": "TestNestedSchema", "func_name": "test_nested_meta_many", "text": "文件路径: tests/test_schema.py, 类名: TestNestedSchema\n    def test_nested_meta_many(self, blog):\n        serialized_blog = BlogUserMetaSchema().dump(blog)[0]\n        assert len(serialized_blog['collaborators']) == 2\n        expected = [UserMetaSchema().dump(col)[0] for col in blog.collaborators]\n        assert serialized_blog['collaborators'] == expected\n", "tokens": ["tests", "test_schema", "py", "testnestedschema", "def", "test_nested_meta_many", "self", "blog", "serialized_blog", "blogusermetaschema", "dump", "blog", "0", "assert", "len", "serialized_blog", "collaborators", "2", "expected", "usermetaschema", "dump", "col", "0", "for", "col", "in", "blog", "collaborators", "assert", "serialized_blog", "collaborators", "expected"], "doc_len": 32}
{"doc_id": "tests/test_schema.py::TestNestedSchema.test_nested_only", "file_path": "tests/test_schema.py", "class_name": "TestNestedSchema", "func_name": "test_nested_only", "text": "文件路径: tests/test_schema.py, 类名: TestNestedSchema\n    def test_nested_only(self, blog):\n        col1 = User(name=\"Mick\", age=123, id_=\"abc\")\n        col2 = User(name=\"Keith\", age=456, id_=\"def\")\n        blog.collaborators = [col1, col2]\n        serialized_blog = BlogOnlySchema().dump(blog)[0]\n        assert serialized_blog['collaborators'] == [{\"id\": col1.id}, {\"id\": col2.id}]\n", "tokens": ["tests", "test_schema", "py", "testnestedschema", "def", "test_nested_only", "self", "blog", "col1", "user", "name", "mick", "age", "123", "id_", "abc", "col2", "user", "name", "keith", "age", "456", "id_", "def", "blog", "collaborators", "col1", "col2", "serialized_blog", "blogonlyschema", "dump", "blog", "0", "assert", "serialized_blog", "collaborators", "id", "col1", "id", "id", "col2", "id"], "doc_len": 42}
{"doc_id": "tests/test_schema.py::TestNestedSchema.test_exclude", "file_path": "tests/test_schema.py", "class_name": "TestNestedSchema", "func_name": "test_exclude", "text": "文件路径: tests/test_schema.py, 类名: TestNestedSchema\n    def test_exclude(self, blog):\n        serialized = BlogSchemaExclude().dump(blog)[0]\n        assert \"uppername\" not in serialized['user'].keys()\n", "tokens": ["tests", "test_schema", "py", "testnestedschema", "def", "test_exclude", "self", "blog", "serialized", "blogschemaexclude", "dump", "blog", "0", "assert", "uppername", "not", "in", "serialized", "user", "keys"], "doc_len": 20}
{"doc_id": "tests/test_schema.py::TestNestedSchema.test_list_field", "file_path": "tests/test_schema.py", "class_name": "TestNestedSchema", "func_name": "test_list_field", "text": "文件路径: tests/test_schema.py, 类名: TestNestedSchema\n    def test_list_field(self, blog):\n        serialized = BlogSchema().dump(blog)[0]\n        assert serialized['categories'] == [\"humor\", \"violence\"]\n", "tokens": ["tests", "test_schema", "py", "testnestedschema", "def", "test_list_field", "self", "blog", "serialized", "blogschema", "dump", "blog", "0", "assert", "serialized", "categories", "humor", "violence"], "doc_len": 18}
{"doc_id": "tests/test_schema.py::TestNestedSchema.test_nested_load_many", "file_path": "tests/test_schema.py", "class_name": "TestNestedSchema", "func_name": "test_nested_load_many", "text": "文件路径: tests/test_schema.py, 类名: TestNestedSchema\n    def test_nested_load_many(self):\n        in_data = {'title': 'Shine A Light', 'collaborators': [\n            {'name': 'Mick', 'email': 'mick@stones.com'},\n            {'name': 'Keith', 'email': 'keith@stones.com'}\n        ]}\n        data, errors = BlogSchema().load(in_data)\n        collabs = data['collaborators']\n        assert len(collabs) == 2\n        assert all(type(each) == User for each in collabs)\n        assert collabs[0].name == in_data['collaborators'][0]['name']\n", "tokens": ["tests", "test_schema", "py", "testnestedschema", "def", "test_nested_load_many", "self", "in_data", "title", "shine", "a", "light", "collaborators", "name", "mick", "email", "mick", "stones", "com", "name", "keith", "email", "keith", "stones", "com", "data", "errors", "blogschema", "load", "in_data", "collabs", "data", "collaborators", "assert", "len", "collabs", "2", "assert", "all", "type", "each", "user", "for", "each", "in", "collabs", "assert", "collabs", "0", "name", "in_data", "collaborators", "0", "name"], "doc_len": 54}
{"doc_id": "tests/test_schema.py::TestNestedSchema.test_nested_errors", "file_path": "tests/test_schema.py", "class_name": "TestNestedSchema", "func_name": "test_nested_errors", "text": "文件路径: tests/test_schema.py, 类名: TestNestedSchema\n    def test_nested_errors(self):\n        _, errors = BlogSchema().load(\n            {'title': \"Monty's blog\", 'user': {'name': 'Monty', 'email': 'foo'}}\n        )\n        assert \"email\" in errors['user']\n        assert len(errors['user']['email']) == 1\n        assert 'Not a valid email address.' in errors['user']['email'][0]\n        # No problems with collaborators\n        assert \"collaborators\" not in errors\n", "tokens": ["tests", "test_schema", "py", "testnestedschema", "def", "test_nested_errors", "self", "_", "errors", "blogschema", "load", "title", "monty", "s", "blog", "user", "name", "monty", "email", "foo", "assert", "email", "in", "errors", "user", "assert", "len", "errors", "user", "email", "1", "assert", "not", "a", "valid", "email", "address", "in", "errors", "user", "email", "0", "no", "problems", "with", "collaborators", "assert", "collaborators", "not", "in", "errors"], "doc_len": 51}
{"doc_id": "tests/test_schema.py::TestNestedSchema.test_nested_strict", "file_path": "tests/test_schema.py", "class_name": "TestNestedSchema", "func_name": "test_nested_strict", "text": "文件路径: tests/test_schema.py, 类名: TestNestedSchema\n    def test_nested_strict(self):\n        with pytest.raises(ValidationError, match='email'):\n            _, errors = BlogSchema(strict=True).load(\n                {'title': \"Monty's blog\", 'user': {'name': 'Monty', 'email': 'foo'}}\n            )\n", "tokens": ["tests", "test_schema", "py", "testnestedschema", "def", "test_nested_strict", "self", "with", "pytest", "raises", "validationerror", "match", "email", "_", "errors", "blogschema", "strict", "true", "load", "title", "monty", "s", "blog", "user", "name", "monty", "email", "foo"], "doc_len": 28}
{"doc_id": "tests/test_schema.py::TestNestedSchema.test_nested_dump_errors", "file_path": "tests/test_schema.py", "class_name": "TestNestedSchema", "func_name": "test_nested_dump_errors", "text": "文件路径: tests/test_schema.py, 类名: TestNestedSchema\n    def test_nested_dump_errors(self, blog):\n        blog.user.email = \"foo\"\n        _, errors = BlogSchema().dump(blog)\n        assert \"email\" in errors['user']\n        assert len(errors['user']['email']) == 1\n        assert 'Not a valid email address.' in errors['user']['email'][0]\n        # No problems with collaborators\n        assert \"collaborators\" not in errors\n", "tokens": ["tests", "test_schema", "py", "testnestedschema", "def", "test_nested_dump_errors", "self", "blog", "blog", "user", "email", "foo", "_", "errors", "blogschema", "dump", "blog", "assert", "email", "in", "errors", "user", "assert", "len", "errors", "user", "email", "1", "assert", "not", "a", "valid", "email", "address", "in", "errors", "user", "email", "0", "no", "problems", "with", "collaborators", "assert", "collaborators", "not", "in", "errors"], "doc_len": 48}
{"doc_id": "tests/test_schema.py::TestNestedSchema.test_nested_dump_strict", "file_path": "tests/test_schema.py", "class_name": "TestNestedSchema", "func_name": "test_nested_dump_strict", "text": "文件路径: tests/test_schema.py, 类名: TestNestedSchema\n    def test_nested_dump_strict(self, blog):\n        blog.user.email = \"foo\"\n        with pytest.raises(ValidationError, match='email'):\n            _, errors = BlogSchema(strict=True).dump(blog)\n", "tokens": ["tests", "test_schema", "py", "testnestedschema", "def", "test_nested_dump_strict", "self", "blog", "blog", "user", "email", "foo", "with", "pytest", "raises", "validationerror", "match", "email", "_", "errors", "blogschema", "strict", "true", "dump", "blog"], "doc_len": 25}
{"doc_id": "tests/test_schema.py::TestNestedSchema.test_nested_method_field", "file_path": "tests/test_schema.py", "class_name": "TestNestedSchema", "func_name": "test_nested_method_field", "text": "文件路径: tests/test_schema.py, 类名: TestNestedSchema\n    def test_nested_method_field(self, blog):\n        data = BlogSchema().dump(blog)[0]\n        assert data['user']['is_old']\n        assert data['collaborators'][0]['is_old']\n", "tokens": ["tests", "test_schema", "py", "testnestedschema", "def", "test_nested_method_field", "self", "blog", "data", "blogschema", "dump", "blog", "0", "assert", "data", "user", "is_old", "assert", "data", "collaborators", "0", "is_old"], "doc_len": 22}
{"doc_id": "tests/test_schema.py::TestNestedSchema.test_nested_function_field", "file_path": "tests/test_schema.py", "class_name": "TestNestedSchema", "func_name": "test_nested_function_field", "text": "文件路径: tests/test_schema.py, 类名: TestNestedSchema\n    def test_nested_function_field(self, blog, user):\n        data = BlogSchema().dump(blog)[0]\n        assert data['user']['lowername'] == user.name.lower()\n        expected = blog.collaborators[0].name.lower()\n        assert data['collaborators'][0]['lowername'] == expected\n", "tokens": ["tests", "test_schema", "py", "testnestedschema", "def", "test_nested_function_field", "self", "blog", "user", "data", "blogschema", "dump", "blog", "0", "assert", "data", "user", "lowername", "user", "name", "lower", "expected", "blog", "collaborators", "0", "name", "lower", "assert", "data", "collaborators", "0", "lowername", "expected"], "doc_len": 33}
{"doc_id": "tests/test_schema.py::TestNestedSchema.test_nested_prefixed_field", "file_path": "tests/test_schema.py", "class_name": "TestNestedSchema", "func_name": "test_nested_prefixed_field", "text": "文件路径: tests/test_schema.py, 类名: TestNestedSchema\n    def test_nested_prefixed_field(self, blog, user):\n        data = BlogSchemaPrefixedUser().dump(blog)[0]\n        assert data['user']['usr_name'] == user.name\n        assert data['user']['usr_lowername'] == user.name.lower()\n", "tokens": ["tests", "test_schema", "py", "testnestedschema", "def", "test_nested_prefixed_field", "self", "blog", "user", "data", "blogschemaprefixeduser", "dump", "blog", "0", "assert", "data", "user", "usr_name", "user", "name", "assert", "data", "user", "usr_lowername", "user", "name", "lower"], "doc_len": 27}
{"doc_id": "tests/test_schema.py::TestNestedSchema.test_nested_prefixed_many_field", "file_path": "tests/test_schema.py", "class_name": "TestNestedSchema", "func_name": "test_nested_prefixed_many_field", "text": "文件路径: tests/test_schema.py, 类名: TestNestedSchema\n    def test_nested_prefixed_many_field(self, blog):\n        data = BlogSchemaPrefixedUser().dump(blog)[0]\n        assert data['collaborators'][0]['usr_name'] == blog.collaborators[0].name\n", "tokens": ["tests", "test_schema", "py", "testnestedschema", "def", "test_nested_prefixed_many_field", "self", "blog", "data", "blogschemaprefixeduser", "dump", "blog", "0", "assert", "data", "collaborators", "0", "usr_name", "blog", "collaborators", "0", "name"], "doc_len": 22}
{"doc_id": "tests/test_schema.py::TestNestedSchema.test_invalid_float_field", "file_path": "tests/test_schema.py", "class_name": "TestNestedSchema", "func_name": "test_invalid_float_field", "text": "文件路径: tests/test_schema.py, 类名: TestNestedSchema\n    def test_invalid_float_field(self):\n        user = User(\"Joe\", age=\"1b2\")\n        _, errors = UserSchema().dump(user)\n        assert \"age\" in errors\n", "tokens": ["tests", "test_schema", "py", "testnestedschema", "def", "test_invalid_float_field", "self", "user", "user", "joe", "age", "1b2", "_", "errors", "userschema", "dump", "user", "assert", "age", "in", "errors"], "doc_len": 21}
{"doc_id": "tests/test_schema.py::TestNestedSchema.test_serializer_meta_with_nested_fields", "file_path": "tests/test_schema.py", "class_name": "TestNestedSchema", "func_name": "test_serializer_meta_with_nested_fields", "text": "文件路径: tests/test_schema.py, 类名: TestNestedSchema\n    def test_serializer_meta_with_nested_fields(self, blog, user):\n        data = BlogSchemaMeta().dump(blog)[0]\n        assert data['title'] == blog.title\n        assert data['user'] == UserSchema().dump(user).data\n        assert data['collaborators'] == [UserSchema().dump(c).data\n                                               for c in blog.collaborators]\n        assert data['categories'] == blog.categories\n", "tokens": ["tests", "test_schema", "py", "testnestedschema", "def", "test_serializer_meta_with_nested_fields", "self", "blog", "user", "data", "blogschemameta", "dump", "blog", "0", "assert", "data", "title", "blog", "title", "assert", "data", "user", "userschema", "dump", "user", "data", "assert", "data", "collaborators", "userschema", "dump", "c", "data", "for", "c", "in", "blog", "collaborators", "assert", "data", "categories", "blog", "categories"], "doc_len": 43}
{"doc_id": "tests/test_schema.py::TestNestedSchema.test_serializer_with_nested_meta_fields", "file_path": "tests/test_schema.py", "class_name": "TestNestedSchema", "func_name": "test_serializer_with_nested_meta_fields", "text": "文件路径: tests/test_schema.py, 类名: TestNestedSchema\n    def test_serializer_with_nested_meta_fields(self, blog):\n        # Schema has user = fields.Nested(UserMetaSerializer)\n        s = BlogUserMetaSchema().dump(blog)\n        assert s.data['user'] == UserMetaSchema().dump(blog.user).data\n", "tokens": ["tests", "test_schema", "py", "testnestedschema", "def", "test_serializer_with_nested_meta_fields", "self", "blog", "schema", "has", "user", "fields", "nested", "usermetaserializer", "s", "blogusermetaschema", "dump", "blog", "assert", "s", "data", "user", "usermetaschema", "dump", "blog", "user", "data"], "doc_len": 27}
{"doc_id": "tests/test_schema.py::TestNestedSchema.test_nested_fields_must_be_passed_a_serializer", "file_path": "tests/test_schema.py", "class_name": "TestNestedSchema", "func_name": "test_nested_fields_must_be_passed_a_serializer", "text": "文件路径: tests/test_schema.py, 类名: TestNestedSchema\n    def test_nested_fields_must_be_passed_a_serializer(self, blog):\n        class BadNestedFieldSchema(BlogSchema):\n            user = fields.Nested(fields.String)\n        with pytest.raises(ValueError):\n            BadNestedFieldSchema().dump(blog)\n", "tokens": ["tests", "test_schema", "py", "testnestedschema", "def", "test_nested_fields_must_be_passed_a_serializer", "self", "blog", "class", "badnestedfieldschema", "blogschema", "user", "fields", "nested", "fields", "string", "with", "pytest", "raises", "valueerror", "badnestedfieldschema", "dump", "blog"], "doc_len": 23}
{"doc_id": "tests/test_schema.py::TestNestedSchema.test_invalid_type_passed_to_nested_field", "file_path": "tests/test_schema.py", "class_name": "TestNestedSchema", "func_name": "test_invalid_type_passed_to_nested_field", "text": "文件路径: tests/test_schema.py, 类名: TestNestedSchema\n    def test_invalid_type_passed_to_nested_field(self):\n        class InnerSchema(Schema):\n            foo = fields.Field()\n\n        class MySchema(Schema):\n            inner = fields.Nested(InnerSchema, many=True)\n\n        sch = MySchema()\n\n        result = sch.load({'inner': [{'foo': 42}]})\n        assert not result.errors\n\n        result = sch.load({'inner': 'invalid'})\n        assert 'inner' in result.errors\n        assert result.errors['inner'] == ['Invalid type.']\n\n        class OuterSchema(Schema):\n            inner = fields.Nested(InnerSchema)\n\n        schema = OuterSchema()\n        _, errors = schema.load({'inner': 1})\n        assert errors['inner']['_schema'] == ['Invalid input type.']\n", "tokens": ["tests", "test_schema", "py", "testnestedschema", "def", "test_invalid_type_passed_to_nested_field", "self", "class", "innerschema", "schema", "foo", "fields", "field", "class", "myschema", "schema", "inner", "fields", "nested", "innerschema", "many", "true", "sch", "myschema", "result", "sch", "load", "inner", "foo", "42", "assert", "not", "result", "errors", "result", "sch", "load", "inner", "invalid", "assert", "inner", "in", "result", "errors", "assert", "result", "errors", "inner", "invalid", "type", "class", "outerschema", "schema", "inner", "fields", "nested", "innerschema", "schema", "outerschema", "_", "errors", "schema", "load", "inner", "1", "assert", "errors", "inner", "_schema", "invalid", "input", "type"], "doc_len": 72}
{"doc_id": "tests/test_schema.py::TestNestedSchema.test_all_errors_on_many_nested_field_with_validates_decorator", "file_path": "tests/test_schema.py", "class_name": "TestNestedSchema", "func_name": "test_all_errors_on_many_nested_field_with_validates_decorator", "text": "文件路径: tests/test_schema.py, 类名: TestNestedSchema\n    def test_all_errors_on_many_nested_field_with_validates_decorator(self):\n        class Inner(Schema):\n            req = fields.Field(required=True)\n\n        class Outer(Schema):\n            inner = fields.Nested(Inner, many=True)\n\n            @validates('inner')\n            def validates_inner(self, data):\n                raise ValidationError('not a chance')\n\n        outer = Outer()\n        _, errors = outer.load({'inner': [{}]})\n        assert 'inner' in errors\n        assert '_field' in errors['inner']\n", "tokens": ["tests", "test_schema", "py", "testnestedschema", "def", "test_all_errors_on_many_nested_field_with_validates_decorator", "self", "class", "inner", "schema", "req", "fields", "field", "required", "true", "class", "outer", "schema", "inner", "fields", "nested", "inner", "many", "true", "validates", "inner", "def", "validates_inner", "self", "data", "raise", "validationerror", "not", "a", "chance", "outer", "outer", "_", "errors", "outer", "load", "inner", "assert", "inner", "in", "errors", "assert", "_field", "in", "errors", "inner"], "doc_len": 51}
{"doc_id": "tests/test_schema.py::TestNestedSchema.test_missing_required_nested_field", "file_path": "tests/test_schema.py", "class_name": "TestNestedSchema", "func_name": "test_missing_required_nested_field", "text": "文件路径: tests/test_schema.py, 类名: TestNestedSchema\n    def test_missing_required_nested_field(self):\n        class Inner(Schema):\n            inner_req = fields.Field(required=True, error_messages={'required': 'Oops'})\n            inner_not_req = fields.Field()\n            inner_bad = fields.Integer(required=True, error_messages={'required': 'Int plz'})\n\n        class Middle(Schema):\n            middle_many_req = fields.Nested(Inner, required=True, many=True)\n            middle_req_2 = fields.Nested(Inner, required=True)\n            middle_not_req = fields.Nested(Inner)\n            middle_field = fields.Field(required=True, error_messages={'required': 'middlin'})\n\n        class Outer(Schema):\n            outer_req = fields.Nested(Middle, required=True)\n            outer_many_req = fields.Nested(Middle, required=True, many=True)\n            outer_not_req = fields.Nested(Middle)\n            outer_many_not_req = fields.Nested(Middle, many=True)\n\n        outer = Outer()\n        expected = {\n            'outer_many_req': {0: {'middle_many_req': {0: {'inner_bad': ['Int plz'],\n                                                           'inner_req': ['Oops']}},\n                                   'middle_req_2': {'inner_bad': ['Int plz'],\n                                                    'inner_req': ['Oops']},\n                                   'middle_field': ['middlin']}},\n            'outer_req': {'middle_field': ['middlin'],\n                           'middle_many_req': {0: {'inner_bad': ['Int plz'],\n                                              'inner_req': ['Oops']}},\n                           'middle_req_2': {'inner_bad': ['Int plz'],\n                                            'inner_req': ['Oops']}}}\n        data, errors = outer.load({})\n        assert errors == expected\n", "tokens": ["tests", "test_schema", "py", "testnestedschema", "def", "test_missing_required_nested_field", "self", "class", "inner", "schema", "inner_req", "fields", "field", "required", "true", "error_messages", "required", "oops", "inner_not_req", "fields", "field", "inner_bad", "fields", "integer", "required", "true", "error_messages", "required", "int", "plz", "class", "middle", "schema", "middle_many_req", "fields", "nested", "inner", "required", "true", "many", "true", "middle_req_2", "fields", "nested", "inner", "required", "true", "middle_not_req", "fields", "nested", "inner", "middle_field", "fields", "field", "required", "true", "error_messages", "required", "middlin", "class", "outer", "schema", "outer_req", "fields", "nested", "middle", "required", "true", "outer_many_req", "fields", "nested", "middle", "required", "true", "many", "true", "outer_not_req", "fields", "nested", "middle", "outer_many_not_req", "fields", "nested", "middle", "many", "true", "outer", "outer", "expected", "outer_many_req", "0", "middle_many_req", "0", "inner_bad", "int", "plz", "inner_req", "oops", "middle_req_2", "inner_bad", "int", "plz", "inner_req", "oops", "middle_field", "middlin", "outer_req", "middle_field", "middlin", "middle_many_req", "0", "inner_bad", "int", "plz", "inner_req", "oops", "middle_req_2", "inner_bad", "int", "plz", "inner_req", "oops", "data", "errors", "outer", "load", "assert", "errors", "expected"], "doc_len": 129}
{"doc_id": "tests/test_schema.py::TestSelfReference.employer", "file_path": "tests/test_schema.py", "class_name": "TestSelfReference", "func_name": "employer", "text": "文件路径: tests/test_schema.py, 类名: TestSelfReference\n    def employer(self):\n        return User(name=\"Joe\", age=59)\n", "tokens": ["tests", "test_schema", "py", "testselfreference", "def", "employer", "self", "return", "user", "name", "joe", "age", "59"], "doc_len": 13}
{"doc_id": "tests/test_schema.py::TestSelfReference.user", "file_path": "tests/test_schema.py", "class_name": "TestSelfReference", "func_name": "user", "text": "文件路径: tests/test_schema.py, 类名: TestSelfReference\n    def user(self, employer):\n        return User(name=\"Tom\", employer=employer, age=28)\n", "tokens": ["tests", "test_schema", "py", "testselfreference", "def", "user", "self", "employer", "return", "user", "name", "tom", "employer", "employer", "age", "28"], "doc_len": 16}
{"doc_id": "tests/test_schema.py::TestSelfReference.test_nesting_schema_within_itself", "file_path": "tests/test_schema.py", "class_name": "TestSelfReference", "func_name": "test_nesting_schema_within_itself", "text": "文件路径: tests/test_schema.py, 类名: TestSelfReference\n    def test_nesting_schema_within_itself(self, user, employer):\n        class SelfSchema(Schema):\n            name = fields.String()\n            age = fields.Integer()\n            employer = fields.Nested('self', exclude=('employer', ))\n\n        data, errors = SelfSchema().dump(user)\n        assert not errors\n        assert data['name'] == user.name\n        assert data['employer']['name'] == employer.name\n        assert data['employer']['age'] == employer.age\n", "tokens": ["tests", "test_schema", "py", "testselfreference", "def", "test_nesting_schema_within_itself", "self", "user", "employer", "class", "selfschema", "schema", "name", "fields", "string", "age", "fields", "integer", "employer", "fields", "nested", "self", "exclude", "employer", "data", "errors", "selfschema", "dump", "user", "assert", "not", "errors", "assert", "data", "name", "user", "name", "assert", "data", "employer", "name", "employer", "name", "assert", "data", "employer", "age", "employer", "age"], "doc_len": 49}
{"doc_id": "tests/test_schema.py::TestSelfReference.test_nesting_schema_by_passing_class_name", "file_path": "tests/test_schema.py", "class_name": "TestSelfReference", "func_name": "test_nesting_schema_by_passing_class_name", "text": "文件路径: tests/test_schema.py, 类名: TestSelfReference\n    def test_nesting_schema_by_passing_class_name(self, user, employer):\n        class SelfReferencingSchema(Schema):\n            name = fields.Str()\n            age = fields.Int()\n            employer = fields.Nested('SelfReferencingSchema', exclude=('employer',))\n        data, errors = SelfReferencingSchema().dump(user)\n        assert not errors\n        assert data['name'] == user.name\n        assert data['employer']['name'] == employer.name\n        assert data['employer']['age'] == employer.age\n", "tokens": ["tests", "test_schema", "py", "testselfreference", "def", "test_nesting_schema_by_passing_class_name", "self", "user", "employer", "class", "selfreferencingschema", "schema", "name", "fields", "str", "age", "fields", "int", "employer", "fields", "nested", "selfreferencingschema", "exclude", "employer", "data", "errors", "selfreferencingschema", "dump", "user", "assert", "not", "errors", "assert", "data", "name", "user", "name", "assert", "data", "employer", "name", "employer", "name", "assert", "data", "employer", "age", "employer", "age"], "doc_len": 49}
{"doc_id": "tests/test_schema.py::TestSelfReference.test_nesting_within_itself_meta", "file_path": "tests/test_schema.py", "class_name": "TestSelfReference", "func_name": "test_nesting_within_itself_meta", "text": "文件路径: tests/test_schema.py, 类名: TestSelfReference\n    def test_nesting_within_itself_meta(self, user, employer):\n        class SelfSchema(Schema):\n            employer = fields.Nested(\"self\", exclude=('employer', ))\n\n            class Meta:\n                additional = ('name', 'age')\n\n        data, errors = SelfSchema().dump(user)\n        assert not errors\n        assert data['name'] == user.name\n        assert data['age'] == user.age\n        assert data['employer']['name'] == employer.name\n        assert data['employer']['age'] == employer.age\n", "tokens": ["tests", "test_schema", "py", "testselfreference", "def", "test_nesting_within_itself_meta", "self", "user", "employer", "class", "selfschema", "schema", "employer", "fields", "nested", "self", "exclude", "employer", "class", "meta", "additional", "name", "age", "data", "errors", "selfschema", "dump", "user", "assert", "not", "errors", "assert", "data", "name", "user", "name", "assert", "data", "age", "user", "age", "assert", "data", "employer", "name", "employer", "name", "assert", "data", "employer", "age", "employer", "age"], "doc_len": 53}
{"doc_id": "tests/test_schema.py::TestSelfReference.test_recursive_missing_required_field", "file_path": "tests/test_schema.py", "class_name": "TestSelfReference", "func_name": "test_recursive_missing_required_field", "text": "文件路径: tests/test_schema.py, 类名: TestSelfReference\n    def test_recursive_missing_required_field(self):\n        class BasicSchema(Schema):\n            sub_basics = fields.Nested(\"self\", required=True)\n\n        data, errors = BasicSchema().load({})\n        assert data == {}\n        assert errors == {\n            'sub_basics': ['Missing data for required field.']\n        }\n", "tokens": ["tests", "test_schema", "py", "testselfreference", "def", "test_recursive_missing_required_field", "self", "class", "basicschema", "schema", "sub_basics", "fields", "nested", "self", "required", "true", "data", "errors", "basicschema", "load", "assert", "data", "assert", "errors", "sub_basics", "missing", "data", "for", "required", "field"], "doc_len": 30}
{"doc_id": "tests/test_schema.py::TestSelfReference.test_recursive_missing_required_field_one_level_in", "file_path": "tests/test_schema.py", "class_name": "TestSelfReference", "func_name": "test_recursive_missing_required_field_one_level_in", "text": "文件路径: tests/test_schema.py, 类名: TestSelfReference\n    def test_recursive_missing_required_field_one_level_in(self):\n        class BasicSchema(Schema):\n            sub_basics = fields.Nested(\"self\", required=True, exclude=('sub_basics', ))\n            simple_field = fields.Str(required=True)\n\n        class DeepSchema(Schema):\n            basic = fields.Nested(BasicSchema(), required=True)\n\n        data, errors = DeepSchema().load({})\n        assert data == {}\n\n        assert errors == {\n            'basic': {\n                'sub_basics':  [u'Missing data for required field.'] ,\n                'simple_field': [u'Missing data for required field.'],\n            }\n        }\n\n        partially_valid = {\n            'basic': {'sub_basics': {'simple_field': 'foo'}}\n        }\n        data, errors = DeepSchema().load(partially_valid)\n        assert data == partially_valid\n        assert errors == {\n            'basic': {\n                'simple_field': [u'Missing data for required field.'],\n            }\n        }\n\n        partially_valid2 = {\n            'basic': {'simple_field': 'foo'}\n        }\n        data, errors = DeepSchema().load(partially_valid2)\n        assert data == partially_valid2\n        assert errors == {\n            'basic': {\n                'sub_basics': ['Missing data for required field.'],\n            }\n        }\n", "tokens": ["tests", "test_schema", "py", "testselfreference", "def", "test_recursive_missing_required_field_one_level_in", "self", "class", "basicschema", "schema", "sub_basics", "fields", "nested", "self", "required", "true", "exclude", "sub_basics", "simple_field", "fields", "str", "required", "true", "class", "deepschema", "schema", "basic", "fields", "nested", "basicschema", "required", "true", "data", "errors", "deepschema", "load", "assert", "data", "assert", "errors", "basic", "sub_basics", "u", "missing", "data", "for", "required", "field", "simple_field", "u", "missing", "data", "for", "required", "field", "partially_valid", "basic", "sub_basics", "simple_field", "foo", "data", "errors", "deepschema", "load", "partially_valid", "assert", "data", "partially_valid", "assert", "errors", "basic", "simple_field", "u", "missing", "data", "for", "required", "field", "partially_valid2", "basic", "simple_field", "foo", "data", "errors", "deepschema", "load", "partially_valid2", "assert", "data", "partially_valid2", "assert", "errors", "basic", "sub_basics", "missing", "data", "for", "required", "field"], "doc_len": 99}
{"doc_id": "tests/test_schema.py::TestSelfReference.test_nested_self_with_only_param", "file_path": "tests/test_schema.py", "class_name": "TestSelfReference", "func_name": "test_nested_self_with_only_param", "text": "文件路径: tests/test_schema.py, 类名: TestSelfReference\n    def test_nested_self_with_only_param(self, user, employer):\n        class SelfSchema(Schema):\n            employer = fields.Nested('self', only=('name', ))\n\n            class Meta:\n                fields = ('name', 'employer')\n\n        data = SelfSchema().dump(user)[0]\n        assert data['name'] == user.name\n        assert data['employer']['name'] == employer.name\n        assert 'age' not in data['employer']\n", "tokens": ["tests", "test_schema", "py", "testselfreference", "def", "test_nested_self_with_only_param", "self", "user", "employer", "class", "selfschema", "schema", "employer", "fields", "nested", "self", "only", "name", "class", "meta", "fields", "name", "employer", "data", "selfschema", "dump", "user", "0", "assert", "data", "name", "user", "name", "assert", "data", "employer", "name", "employer", "name", "assert", "age", "not", "in", "data", "employer"], "doc_len": 45}
{"doc_id": "tests/test_schema.py::TestSelfReference.test_multiple_nested_self_fields", "file_path": "tests/test_schema.py", "class_name": "TestSelfReference", "func_name": "test_multiple_nested_self_fields", "text": "文件路径: tests/test_schema.py, 类名: TestSelfReference\n    def test_multiple_nested_self_fields(self, user):\n        class MultipleSelfSchema(Schema):\n            emp = fields.Nested('self', only='name', attribute='employer')\n            rels = fields.Nested('self', only='name',\n                                    many=True, attribute='relatives')\n\n            class Meta:\n                fields = ('name', 'emp', 'rels')\n\n        schema = MultipleSelfSchema()\n        user.relatives = [User(name=\"Bar\", age=12), User(name='Baz', age=34)]\n        data, errors = schema.dump(user)\n        assert not errors\n        assert len(data['rels']) == len(user.relatives)\n        relative = data['rels'][0]\n        assert relative == user.relatives[0].name\n", "tokens": ["tests", "test_schema", "py", "testselfreference", "def", "test_multiple_nested_self_fields", "self", "user", "class", "multipleselfschema", "schema", "emp", "fields", "nested", "self", "only", "name", "attribute", "employer", "rels", "fields", "nested", "self", "only", "name", "many", "true", "attribute", "relatives", "class", "meta", "fields", "name", "emp", "rels", "schema", "multipleselfschema", "user", "relatives", "user", "name", "bar", "age", "12", "user", "name", "baz", "age", "34", "data", "errors", "schema", "dump", "user", "assert", "not", "errors", "assert", "len", "data", "rels", "len", "user", "relatives", "relative", "data", "rels", "0", "assert", "relative", "user", "relatives", "0", "name"], "doc_len": 74}
{"doc_id": "tests/test_schema.py::TestSelfReference.test_nested_many", "file_path": "tests/test_schema.py", "class_name": "TestSelfReference", "func_name": "test_nested_many", "text": "文件路径: tests/test_schema.py, 类名: TestSelfReference\n    def test_nested_many(self):\n        class SelfManySchema(Schema):\n            relatives = fields.Nested('self', many=True)\n\n            class Meta:\n                additional = ('name', 'age')\n\n        person = User(name='Foo')\n        person.relatives = [User(name=\"Bar\", age=12), User(name='Baz', age=34)]\n        data = SelfManySchema().dump(person)[0]\n        assert data['name'] == person.name\n        assert len(data['relatives']) == len(person.relatives)\n        assert data['relatives'][0]['name'] == person.relatives[0].name\n        assert data['relatives'][0]['age'] == person.relatives[0].age\n", "tokens": ["tests", "test_schema", "py", "testselfreference", "def", "test_nested_many", "self", "class", "selfmanyschema", "schema", "relatives", "fields", "nested", "self", "many", "true", "class", "meta", "additional", "name", "age", "person", "user", "name", "foo", "person", "relatives", "user", "name", "bar", "age", "12", "user", "name", "baz", "age", "34", "data", "selfmanyschema", "dump", "person", "0", "assert", "data", "name", "person", "name", "assert", "len", "data", "relatives", "len", "person", "relatives", "assert", "data", "relatives", "0", "name", "person", "relatives", "0", "name", "assert", "data", "relatives", "0", "age", "person", "relatives", "0", "age"], "doc_len": 72}
{"doc_id": "tests/test_schema.py::test_serialization_with_required_field", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_serialization_with_required_field", "text": "文件路径: tests/test_schema.py\ndef test_serialization_with_required_field():\n    user = User(name=None)\n    data, errors = RequiredUserSchema().dump(user)\n    # Does not validate required\n    assert 'name' not in errors\n", "tokens": ["tests", "test_schema", "py", "def", "test_serialization_with_required_field", "user", "user", "name", "none", "data", "errors", "requireduserschema", "dump", "user", "does", "not", "validate", "required", "assert", "name", "not", "in", "errors"], "doc_len": 23}
{"doc_id": "tests/test_schema.py::test_deserialization_with_required_field", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_deserialization_with_required_field", "text": "文件路径: tests/test_schema.py\ndef test_deserialization_with_required_field():\n    in_data = {}\n    data, errors = RequiredUserSchema().load(in_data)\n    assert 'name' in errors\n    assert 'Missing data for required field.' in errors['name']\n    # field value should also not be in output data\n    assert 'name' not in data\n", "tokens": ["tests", "test_schema", "py", "def", "test_deserialization_with_required_field", "in_data", "data", "errors", "requireduserschema", "load", "in_data", "assert", "name", "in", "errors", "assert", "missing", "data", "for", "required", "field", "in", "errors", "name", "field", "value", "should", "also", "not", "be", "in", "output", "data", "assert", "name", "not", "in", "data"], "doc_len": 38}
{"doc_id": "tests/test_schema.py::test_deserialization_with_required_field_and_custom_validator", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_deserialization_with_required_field_and_custom_validator", "text": "文件路径: tests/test_schema.py\ndef test_deserialization_with_required_field_and_custom_validator():\n    class ValidatingSchema(Schema):\n        color = fields.String(required=True,\n                        validate=lambda x: x.lower() == 'red' or x.lower() == 'blue',\n                        error_messages={\n                            'validator_failed': \"Color must be red or blue\"})\n\n    data, errors = ValidatingSchema().load({'name': 'foo'})\n    assert errors\n    assert 'color' in errors\n    assert \"Missing data for required field.\" in errors['color']\n\n    _, errors = ValidatingSchema().load({'color': 'green'})\n    assert 'color' in errors\n    assert \"Color must be red or blue\" in errors['color']\n", "tokens": ["tests", "test_schema", "py", "def", "test_deserialization_with_required_field_and_custom_validator", "class", "validatingschema", "schema", "color", "fields", "string", "required", "true", "validate", "lambda", "x", "x", "lower", "red", "or", "x", "lower", "blue", "error_messages", "validator_failed", "color", "must", "be", "red", "or", "blue", "data", "errors", "validatingschema", "load", "name", "foo", "assert", "errors", "assert", "color", "in", "errors", "assert", "missing", "data", "for", "required", "field", "in", "errors", "color", "_", "errors", "validatingschema", "load", "color", "green", "assert", "color", "in", "errors", "assert", "color", "must", "be", "red", "or", "blue", "in", "errors", "color"], "doc_len": 72}
{"doc_id": "tests/test_schema.py::UserContextSchema.get_is_owner", "file_path": "tests/test_schema.py", "class_name": "UserContextSchema", "func_name": "get_is_owner", "text": "文件路径: tests/test_schema.py, 类名: UserContextSchema\n    def get_is_owner(self, user):\n        return self.context['blog'].user.name == user.name\n", "tokens": ["tests", "test_schema", "py", "usercontextschema", "def", "get_is_owner", "self", "user", "return", "self", "context", "blog", "user", "name", "user", "name"], "doc_len": 16}
{"doc_id": "tests/test_schema.py::TestContext.test_context_method", "file_path": "tests/test_schema.py", "class_name": "TestContext", "func_name": "test_context_method", "text": "文件路径: tests/test_schema.py, 类名: TestContext\n    def test_context_method(self):\n        owner = User('Joe')\n        blog = Blog(title='Joe Blog', user=owner)\n        context = {'blog': blog}\n        serializer = UserContextSchema()\n        serializer.context = context\n        data = serializer.dump(owner)[0]\n        assert data['is_owner'] is True\n        nonowner = User('Fred')\n        data = serializer.dump(nonowner)[0]\n        assert data['is_owner'] is False\n", "tokens": ["tests", "test_schema", "py", "testcontext", "def", "test_context_method", "self", "owner", "user", "joe", "blog", "blog", "title", "joe", "blog", "user", "owner", "context", "blog", "blog", "serializer", "usercontextschema", "serializer", "context", "context", "data", "serializer", "dump", "owner", "0", "assert", "data", "is_owner", "is", "true", "nonowner", "user", "fred", "data", "serializer", "dump", "nonowner", "0", "assert", "data", "is_owner", "is", "false"], "doc_len": 48}
{"doc_id": "tests/test_schema.py::TestContext.test_context_method_function", "file_path": "tests/test_schema.py", "class_name": "TestContext", "func_name": "test_context_method_function", "text": "文件路径: tests/test_schema.py, 类名: TestContext\n    def test_context_method_function(self):\n        owner = User('Fred')\n        blog = Blog('Killer Queen', user=owner)\n        collab = User('Brian')\n        blog.collaborators.append(collab)\n        context = {'blog': blog}\n        serializer = UserContextSchema()\n        serializer.context = context\n        data = serializer.dump(collab)[0]\n        assert data['is_collab'] is True\n        noncollab = User('Foo')\n        data = serializer.dump(noncollab)[0]\n        assert data['is_collab'] is False\n", "tokens": ["tests", "test_schema", "py", "testcontext", "def", "test_context_method_function", "self", "owner", "user", "fred", "blog", "blog", "killer", "queen", "user", "owner", "collab", "user", "brian", "blog", "collaborators", "append", "collab", "context", "blog", "blog", "serializer", "usercontextschema", "serializer", "context", "context", "data", "serializer", "dump", "collab", "0", "assert", "data", "is_collab", "is", "true", "noncollab", "user", "foo", "data", "serializer", "dump", "noncollab", "0", "assert", "data", "is_collab", "is", "false"], "doc_len": 54}
{"doc_id": "tests/test_schema.py::TestContext.test_function_field_raises_error_when_context_not_available", "file_path": "tests/test_schema.py", "class_name": "TestContext", "func_name": "test_function_field_raises_error_when_context_not_available", "text": "文件路径: tests/test_schema.py, 类名: TestContext\n    def test_function_field_raises_error_when_context_not_available(self):\n        # only has a function field\n        class UserFunctionContextSchema(Schema):\n            is_collab = fields.Function(lambda user, ctx: user in ctx['blog'])\n\n        owner = User('Joe')\n        serializer = UserFunctionContextSchema(strict=True)\n        # no context\n        serializer.context = None\n        msg = 'No context available for Function field {0!r}'.format('is_collab')\n        with pytest.raises(ValidationError, match=msg) as excinfo:\n            serializer.dump(owner)\n", "tokens": ["tests", "test_schema", "py", "testcontext", "def", "test_function_field_raises_error_when_context_not_available", "self", "only", "has", "a", "function", "field", "class", "userfunctioncontextschema", "schema", "is_collab", "fields", "function", "lambda", "user", "ctx", "user", "in", "ctx", "blog", "owner", "user", "joe", "serializer", "userfunctioncontextschema", "strict", "true", "no", "context", "serializer", "context", "none", "msg", "no", "context", "available", "for", "function", "field", "0", "r", "format", "is_collab", "with", "pytest", "raises", "validationerror", "match", "msg", "as", "excinfo", "serializer", "dump", "owner"], "doc_len": 59}
{"doc_id": "tests/test_schema.py::TestContext.test_fields_context", "file_path": "tests/test_schema.py", "class_name": "TestContext", "func_name": "test_fields_context", "text": "文件路径: tests/test_schema.py, 类名: TestContext\n    def test_fields_context(self):\n        class CSchema(Schema):\n            name = fields.String()\n\n        ser = CSchema()\n        ser.context['foo'] = 42\n\n        assert ser.fields['name'].context == {'foo': 42}\n", "tokens": ["tests", "test_schema", "py", "testcontext", "def", "test_fields_context", "self", "class", "cschema", "schema", "name", "fields", "string", "ser", "cschema", "ser", "context", "foo", "42", "assert", "ser", "fields", "name", "context", "foo", "42"], "doc_len": 26}
{"doc_id": "tests/test_schema.py::TestContext.test_nested_fields_inherit_context", "file_path": "tests/test_schema.py", "class_name": "TestContext", "func_name": "test_nested_fields_inherit_context", "text": "文件路径: tests/test_schema.py, 类名: TestContext\n    def test_nested_fields_inherit_context(self):\n        class InnerSchema(Schema):\n            likes_bikes = fields.Function(lambda obj, ctx: 'bikes' in ctx['info'])\n\n        class CSchema(Schema):\n            inner = fields.Nested(InnerSchema)\n\n        ser = CSchema(strict=True)\n        ser.context['info'] = 'i like bikes'\n        obj = {\n            'inner': {}\n        }\n        result = ser.dump(obj)\n        assert result.data['inner']['likes_bikes'] is True\n", "tokens": ["tests", "test_schema", "py", "testcontext", "def", "test_nested_fields_inherit_context", "self", "class", "innerschema", "schema", "likes_bikes", "fields", "function", "lambda", "obj", "ctx", "bikes", "in", "ctx", "info", "class", "cschema", "schema", "inner", "fields", "nested", "innerschema", "ser", "cschema", "strict", "true", "ser", "context", "info", "i", "like", "bikes", "obj", "inner", "result", "ser", "dump", "obj", "assert", "result", "data", "inner", "likes_bikes", "is", "true"], "doc_len": 50}
{"doc_id": "tests/test_schema.py::TestContext.test_nested_list_fields_inherit_context", "file_path": "tests/test_schema.py", "class_name": "TestContext", "func_name": "test_nested_list_fields_inherit_context", "text": "文件路径: tests/test_schema.py, 类名: TestContext\n    def test_nested_list_fields_inherit_context(self):\n        class InnerSchema(Schema):\n            foo = fields.Field()\n\n            @validates('foo')\n            def validate_foo(self, value):\n                if 'foo_context' not in self.context:\n                    raise ValidationError('Missing context')\n\n        class OuterSchema(Schema):\n            bars = fields.List(fields.Nested(InnerSchema()))\n\n        inner = InnerSchema(strict=True)\n        inner.context['foo_context'] = 'foo'\n        assert inner.load({'foo': 42})\n\n        outer = OuterSchema(strict=True)\n        outer.context['foo_context'] = 'foo'\n        assert outer.load({'bars': [{'foo': 42}]})\n", "tokens": ["tests", "test_schema", "py", "testcontext", "def", "test_nested_list_fields_inherit_context", "self", "class", "innerschema", "schema", "foo", "fields", "field", "validates", "foo", "def", "validate_foo", "self", "value", "if", "foo_context", "not", "in", "self", "context", "raise", "validationerror", "missing", "context", "class", "outerschema", "schema", "bars", "fields", "list", "fields", "nested", "innerschema", "inner", "innerschema", "strict", "true", "inner", "context", "foo_context", "foo", "assert", "inner", "load", "foo", "42", "outer", "outerschema", "strict", "true", "outer", "context", "foo_context", "foo", "assert", "outer", "load", "bars", "foo", "42"], "doc_len": 65}
{"doc_id": "tests/test_schema.py::test_serializer_can_specify_nested_object_as_attribute", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "test_serializer_can_specify_nested_object_as_attribute", "text": "文件路径: tests/test_schema.py\ndef test_serializer_can_specify_nested_object_as_attribute(blog):\n    class BlogUsernameSchema(Schema):\n        author_name = fields.String(attribute='user.name')\n    ser = BlogUsernameSchema()\n    result = ser.dump(blog)\n    assert result.data['author_name'] == blog.user.name\n", "tokens": ["tests", "test_schema", "py", "def", "test_serializer_can_specify_nested_object_as_attribute", "blog", "class", "blogusernameschema", "schema", "author_name", "fields", "string", "attribute", "user", "name", "ser", "blogusernameschema", "result", "ser", "dump", "blog", "assert", "result", "data", "author_name", "blog", "user", "name"], "doc_len": 28}
{"doc_id": "tests/test_schema.py::TestFieldInheritance.test_inherit_fields_from_schema_subclass", "file_path": "tests/test_schema.py", "class_name": "TestFieldInheritance", "func_name": "test_inherit_fields_from_schema_subclass", "text": "文件路径: tests/test_schema.py, 类名: TestFieldInheritance\n    def test_inherit_fields_from_schema_subclass(self):\n        expected = OrderedDict([\n            ('field_a', fields.Number()),\n            ('field_b', fields.Number()),\n        ])\n\n        class SerializerA(Schema):\n            field_a = expected['field_a']\n\n        class SerializerB(SerializerA):\n            field_b = expected['field_b']\n        assert SerializerB._declared_fields == expected\n", "tokens": ["tests", "test_schema", "py", "testfieldinheritance", "def", "test_inherit_fields_from_schema_subclass", "self", "expected", "ordereddict", "field_a", "fields", "number", "field_b", "fields", "number", "class", "serializera", "schema", "field_a", "expected", "field_a", "class", "serializerb", "serializera", "field_b", "expected", "field_b", "assert", "serializerb", "_declared_fields", "expected"], "doc_len": 31}
{"doc_id": "tests/test_schema.py::TestFieldInheritance.test_inherit_fields_from_non_schema_subclass", "file_path": "tests/test_schema.py", "class_name": "TestFieldInheritance", "func_name": "test_inherit_fields_from_non_schema_subclass", "text": "文件路径: tests/test_schema.py, 类名: TestFieldInheritance\n    def test_inherit_fields_from_non_schema_subclass(self):\n        expected = OrderedDict([\n            ('field_a', fields.Number()),\n            ('field_b', fields.Number()),\n        ])\n\n        class PlainBaseClass(object):\n            field_a = expected['field_a']\n\n        class SerializerB1(Schema, PlainBaseClass):\n            field_b = expected['field_b']\n\n        class SerializerB2(PlainBaseClass, Schema):\n            field_b = expected['field_b']\n        assert SerializerB1._declared_fields == expected\n        assert SerializerB2._declared_fields == expected\n", "tokens": ["tests", "test_schema", "py", "testfieldinheritance", "def", "test_inherit_fields_from_non_schema_subclass", "self", "expected", "ordereddict", "field_a", "fields", "number", "field_b", "fields", "number", "class", "plainbaseclass", "object", "field_a", "expected", "field_a", "class", "serializerb1", "schema", "plainbaseclass", "field_b", "expected", "field_b", "class", "serializerb2", "plainbaseclass", "schema", "field_b", "expected", "field_b", "assert", "serializerb1", "_declared_fields", "expected", "assert", "serializerb2", "_declared_fields", "expected"], "doc_len": 43}
{"doc_id": "tests/test_schema.py::TestFieldInheritance.test_inheritance_follows_mro", "file_path": "tests/test_schema.py", "class_name": "TestFieldInheritance", "func_name": "test_inheritance_follows_mro", "text": "文件路径: tests/test_schema.py, 类名: TestFieldInheritance\n    def test_inheritance_follows_mro(self):\n        expected = OrderedDict([\n            ('field_a', fields.String()),\n            ('field_c', fields.String()),\n            ('field_b', fields.String()),\n            ('field_d', fields.String()),\n        ])\n        # Diamond inheritance graph\n        # MRO: D -> B -> C -> A\n\n        class SerializerA(Schema):\n            field_a = expected['field_a']\n\n        class SerializerB(SerializerA):\n            field_b = expected['field_b']\n\n        class SerializerC(SerializerA):\n            field_c = expected['field_c']\n\n        class SerializerD(SerializerB, SerializerC):\n            field_d = expected['field_d']\n        assert SerializerD._declared_fields == expected\n", "tokens": ["tests", "test_schema", "py", "testfieldinheritance", "def", "test_inheritance_follows_mro", "self", "expected", "ordereddict", "field_a", "fields", "string", "field_c", "fields", "string", "field_b", "fields", "string", "field_d", "fields", "string", "diamond", "inheritance", "graph", "mro", "d", "b", "c", "a", "class", "serializera", "schema", "field_a", "expected", "field_a", "class", "serializerb", "serializera", "field_b", "expected", "field_b", "class", "serializerc", "serializera", "field_c", "expected", "field_c", "class", "serializerd", "serializerb", "serializerc", "field_d", "expected", "field_d", "assert", "serializerd", "_declared_fields", "expected"], "doc_len": 58}
{"doc_id": "tests/test_schema.py::get_from_dict", "file_path": "tests/test_schema.py", "class_name": null, "func_name": "get_from_dict", "text": "文件路径: tests/test_schema.py\ndef get_from_dict(schema, key, obj, default=None):\n    return obj.get('_' + key, default)\n", "tokens": ["tests", "test_schema", "py", "def", "get_from_dict", "schema", "key", "obj", "default", "none", "return", "obj", "get", "_", "key", "default"], "doc_len": 16}
{"doc_id": "tests/test_schema.py::TestAccessor.test_accessor_decorator_is_deprecated", "file_path": "tests/test_schema.py", "class_name": "TestAccessor", "func_name": "test_accessor_decorator_is_deprecated", "text": "文件路径: tests/test_schema.py, 类名: TestAccessor\n    def test_accessor_decorator_is_deprecated(self):\n\n        def deprecated():\n            class MySchema(Schema):\n                pass\n\n            @MySchema.accessor\n            def f(*args, **kwargs):\n                pass\n\n        pytest.deprecated_call(deprecated)\n", "tokens": ["tests", "test_schema", "py", "testaccessor", "def", "test_accessor_decorator_is_deprecated", "self", "def", "deprecated", "class", "myschema", "schema", "pass", "myschema", "accessor", "def", "f", "args", "kwargs", "pass", "pytest", "deprecated_call", "deprecated"], "doc_len": 23}
{"doc_id": "tests/test_schema.py::TestAccessor.test_accessor_is_used", "file_path": "tests/test_schema.py", "class_name": "TestAccessor", "func_name": "test_accessor_is_used", "text": "文件路径: tests/test_schema.py, 类名: TestAccessor\n    def test_accessor_is_used(self):\n        class UserDictSchema(Schema):\n            name = fields.Str()\n            email = fields.Email()\n\n            def get_attribute(self, attr, obj, default):\n                return get_from_dict(self, attr, obj, default)\n\n        user_dict = {'_name': 'joe', '_email': 'joe@shmoe.com'}\n        schema = UserDictSchema()\n        result = schema.dump(user_dict)\n        assert result.data['name'] == user_dict['_name']\n        assert result.data['email'] == user_dict['_email']\n        assert not result.errors\n        # can't serialize User object\n        user = User(name='joe', email='joe@shmoe.com')\n        with pytest.raises(AttributeError):\n            schema.dump(user)\n", "tokens": ["tests", "test_schema", "py", "testaccessor", "def", "test_accessor_is_used", "self", "class", "userdictschema", "schema", "name", "fields", "str", "email", "fields", "email", "def", "get_attribute", "self", "attr", "obj", "default", "return", "get_from_dict", "self", "attr", "obj", "default", "user_dict", "_name", "joe", "_email", "joe", "shmoe", "com", "schema", "userdictschema", "result", "schema", "dump", "user_dict", "assert", "result", "data", "name", "user_dict", "_name", "assert", "result", "data", "email", "user_dict", "_email", "assert", "not", "result", "errors", "can", "t", "serialize", "user", "object", "user", "user", "name", "joe", "email", "joe", "shmoe", "com", "with", "pytest", "raises", "attributeerror", "schema", "dump", "user"], "doc_len": 77}
{"doc_id": "tests/test_schema.py::TestAccessor.test_accessor_with_many", "file_path": "tests/test_schema.py", "class_name": "TestAccessor", "func_name": "test_accessor_with_many", "text": "文件路径: tests/test_schema.py, 类名: TestAccessor\n    def test_accessor_with_many(self):\n        class UserDictSchema(Schema):\n            name = fields.Str()\n            email = fields.Email()\n\n            def get_attribute(self, attr, obj, default):\n                return get_from_dict(self, attr, obj, default)\n\n        user_dicts = [{'_name': 'joe', '_email': 'joe@shmoe.com'},\n                      {'_name': 'jane', '_email': 'jane@shmane.com'}]\n        schema = UserDictSchema(many=True)\n        results = schema.dump(user_dicts)\n        for result, user_dict in zip(results.data, user_dicts):\n            assert result['name'] == user_dict['_name']\n            assert result['email'] == user_dict['_email']\n        assert not results.errors\n        # can't serialize User object\n        users = [User(name='joe', email='joe@shmoe.com'),\n                 User(name='jane', email='jane@shmane.com')]\n        with pytest.raises(AttributeError):\n            schema.dump(users)\n", "tokens": ["tests", "test_schema", "py", "testaccessor", "def", "test_accessor_with_many", "self", "class", "userdictschema", "schema", "name", "fields", "str", "email", "fields", "email", "def", "get_attribute", "self", "attr", "obj", "default", "return", "get_from_dict", "self", "attr", "obj", "default", "user_dicts", "_name", "joe", "_email", "joe", "shmoe", "com", "_name", "jane", "_email", "jane", "shmane", "com", "schema", "userdictschema", "many", "true", "results", "schema", "dump", "user_dicts", "for", "result", "user_dict", "in", "zip", "results", "data", "user_dicts", "assert", "result", "name", "user_dict", "_name", "assert", "result", "email", "user_dict", "_email", "assert", "not", "results", "errors", "can", "t", "serialize", "user", "object", "users", "user", "name", "joe", "email", "joe", "shmoe", "com", "user", "name", "jane", "email", "jane", "shmane", "com", "with", "pytest", "raises", "attributeerror", "schema", "dump", "users"], "doc_len": 98}
{"doc_id": "tests/test_schema.py::TestRequiredFields.string_schema", "file_path": "tests/test_schema.py", "class_name": "TestRequiredFields", "func_name": "string_schema", "text": "文件路径: tests/test_schema.py, 类名: TestRequiredFields\n    def string_schema(self):\n        return self.StringSchema()\n", "tokens": ["tests", "test_schema", "py", "testrequiredfields", "def", "string_schema", "self", "return", "self", "stringschema"], "doc_len": 10}
{"doc_id": "tests/test_schema.py::TestRequiredFields.data", "file_path": "tests/test_schema.py", "class_name": "TestRequiredFields", "func_name": "data", "text": "文件路径: tests/test_schema.py, 类名: TestRequiredFields\n    def data(self):\n        return dict(\n            required_field='foo',\n            allow_none_field='bar',\n            allow_none_required_field='one',\n        )\n", "tokens": ["tests", "test_schema", "py", "testrequiredfields", "def", "data", "self", "return", "dict", "required_field", "foo", "allow_none_field", "bar", "allow_none_required_field", "one"], "doc_len": 15}
{"doc_id": "tests/test_schema.py::TestRequiredFields.test_required_string_field_missing", "file_path": "tests/test_schema.py", "class_name": "TestRequiredFields", "func_name": "test_required_string_field_missing", "text": "文件路径: tests/test_schema.py, 类名: TestRequiredFields\n    def test_required_string_field_missing(self, string_schema, data):\n        del data['required_field']\n        errors = string_schema.validate(data)\n        assert errors['required_field'] == ['Missing data for required field.']\n", "tokens": ["tests", "test_schema", "py", "testrequiredfields", "def", "test_required_string_field_missing", "self", "string_schema", "data", "del", "data", "required_field", "errors", "string_schema", "validate", "data", "assert", "errors", "required_field", "missing", "data", "for", "required", "field"], "doc_len": 24}
{"doc_id": "tests/test_schema.py::TestRequiredFields.test_required_string_field_failure", "file_path": "tests/test_schema.py", "class_name": "TestRequiredFields", "func_name": "test_required_string_field_failure", "text": "文件路径: tests/test_schema.py, 类名: TestRequiredFields\n    def test_required_string_field_failure(self, string_schema, data):\n        data['required_field'] = None\n        errors = string_schema.validate(data)\n        assert errors['required_field'] == ['Field may not be null.']\n", "tokens": ["tests", "test_schema", "py", "testrequiredfields", "def", "test_required_string_field_failure", "self", "string_schema", "data", "data", "required_field", "none", "errors", "string_schema", "validate", "data", "assert", "errors", "required_field", "field", "may", "not", "be", "null"], "doc_len": 24}
{"doc_id": "tests/test_schema.py::TestRequiredFields.test_allow_none_param", "file_path": "tests/test_schema.py", "class_name": "TestRequiredFields", "func_name": "test_allow_none_param", "text": "文件路径: tests/test_schema.py, 类名: TestRequiredFields\n    def test_allow_none_param(self, string_schema, data):\n        data['allow_none_field'] = None\n        errors = string_schema.validate(data)\n        assert 'allow_none_field' not in errors\n\n        data['allow_none_required_field'] = None\n        errors = string_schema.validate(data)\n        assert 'allow_none_required_field' not in errors\n\n        del data['allow_none_required_field']\n        errors = string_schema.validate(data)\n        assert 'allow_none_required_field' in errors\n", "tokens": ["tests", "test_schema", "py", "testrequiredfields", "def", "test_allow_none_param", "self", "string_schema", "data", "data", "allow_none_field", "none", "errors", "string_schema", "validate", "data", "assert", "allow_none_field", "not", "in", "errors", "data", "allow_none_required_field", "none", "errors", "string_schema", "validate", "data", "assert", "allow_none_required_field", "not", "in", "errors", "del", "data", "allow_none_required_field", "errors", "string_schema", "validate", "data", "assert", "allow_none_required_field", "in", "errors"], "doc_len": 44}
{"doc_id": "tests/test_schema.py::TestRequiredFields.test_allow_none_custom_message", "file_path": "tests/test_schema.py", "class_name": "TestRequiredFields", "func_name": "test_allow_none_custom_message", "text": "文件路径: tests/test_schema.py, 类名: TestRequiredFields\n    def test_allow_none_custom_message(self, data):\n        class MySchema(Schema):\n            allow_none_field = fields.Field(allow_none=False,\n                error_messages={'null': '<custom>'})\n\n        schema = MySchema()\n        errors = schema.validate({'allow_none_field': None})\n        assert errors['allow_none_field'][0] == '<custom>'\n", "tokens": ["tests", "test_schema", "py", "testrequiredfields", "def", "test_allow_none_custom_message", "self", "data", "class", "myschema", "schema", "allow_none_field", "fields", "field", "allow_none", "false", "error_messages", "null", "custom", "schema", "myschema", "errors", "schema", "validate", "allow_none_field", "none", "assert", "errors", "allow_none_field", "0", "custom"], "doc_len": 31}
{"doc_id": "tests/test_schema.py::TestDefaults.schema", "file_path": "tests/test_schema.py", "class_name": "TestDefaults", "func_name": "schema", "text": "文件路径: tests/test_schema.py, 类名: TestDefaults\n    def schema(self):\n        return self.MySchema()\n", "tokens": ["tests", "test_schema", "py", "testdefaults", "def", "schema", "self", "return", "self", "myschema"], "doc_len": 10}
{"doc_id": "tests/test_schema.py::TestDefaults.data", "file_path": "tests/test_schema.py", "class_name": "TestDefaults", "func_name": "data", "text": "文件路径: tests/test_schema.py, 类名: TestDefaults\n    def data(self):\n        return dict(\n            int_no_default=None,\n            str_no_default=None,\n            list_no_default=None,\n            nested_no_default=None,\n            int_with_default=None,\n            str_with_default=None,\n        )\n", "tokens": ["tests", "test_schema", "py", "testdefaults", "def", "data", "self", "return", "dict", "int_no_default", "none", "str_no_default", "none", "list_no_default", "none", "nested_no_default", "none", "int_with_default", "none", "str_with_default", "none"], "doc_len": 21}
{"doc_id": "tests/test_schema.py::TestDefaults.test_missing_inputs_are_excluded_from_dump_output", "file_path": "tests/test_schema.py", "class_name": "TestDefaults", "func_name": "test_missing_inputs_are_excluded_from_dump_output", "text": "文件路径: tests/test_schema.py, 类名: TestDefaults\n    def test_missing_inputs_are_excluded_from_dump_output(self, schema, data):\n        for key in ['int_no_default', 'str_no_default',\n                    'list_no_default', 'nested_no_default']:\n            d = data.copy()\n            del d[key]\n            result = schema.dump(d)\n            # the missing key is not in the serialized result\n            assert key not in result.data\n            # the rest of the keys are in the result.data\n            assert all(k in result.data for k in d.keys())\n", "tokens": ["tests", "test_schema", "py", "testdefaults", "def", "test_missing_inputs_are_excluded_from_dump_output", "self", "schema", "data", "for", "key", "in", "int_no_default", "str_no_default", "list_no_default", "nested_no_default", "d", "data", "copy", "del", "d", "key", "result", "schema", "dump", "d", "the", "missing", "key", "is", "not", "in", "the", "serialized", "result", "assert", "key", "not", "in", "result", "data", "the", "rest", "of", "the", "keys", "are", "in", "the", "result", "data", "assert", "all", "k", "in", "result", "data", "for", "k", "in", "d", "keys"], "doc_len": 62}
{"doc_id": "tests/test_schema.py::TestDefaults.test_none_is_serialized_to_none", "file_path": "tests/test_schema.py", "class_name": "TestDefaults", "func_name": "test_none_is_serialized_to_none", "text": "文件路径: tests/test_schema.py, 类名: TestDefaults\n    def test_none_is_serialized_to_none(self, schema, data):\n        assert schema.validate(data) == {}\n        result = schema.dump(data)\n        for key in data.keys():\n            msg = 'result.data[{0!r}] should be None'.format(key)\n            assert result.data[key] is None, msg\n", "tokens": ["tests", "test_schema", "py", "testdefaults", "def", "test_none_is_serialized_to_none", "self", "schema", "data", "assert", "schema", "validate", "data", "result", "schema", "dump", "data", "for", "key", "in", "data", "keys", "msg", "result", "data", "0", "r", "should", "be", "none", "format", "key", "assert", "result", "data", "key", "is", "none", "msg"], "doc_len": 39}
{"doc_id": "tests/test_schema.py::TestDefaults.test_default_and_value_missing", "file_path": "tests/test_schema.py", "class_name": "TestDefaults", "func_name": "test_default_and_value_missing", "text": "文件路径: tests/test_schema.py, 类名: TestDefaults\n    def test_default_and_value_missing(self, schema, data):\n        del data['int_with_default']\n        del data['str_with_default']\n        result = schema.dump(data)\n        assert result.data['int_with_default'] == 42\n        assert result.data['str_with_default'] == 'foo'\n", "tokens": ["tests", "test_schema", "py", "testdefaults", "def", "test_default_and_value_missing", "self", "schema", "data", "del", "data", "int_with_default", "del", "data", "str_with_default", "result", "schema", "dump", "data", "assert", "result", "data", "int_with_default", "42", "assert", "result", "data", "str_with_default", "foo"], "doc_len": 29}
{"doc_id": "tests/test_schema.py::TestDefaults.test_loading_none", "file_path": "tests/test_schema.py", "class_name": "TestDefaults", "func_name": "test_loading_none", "text": "文件路径: tests/test_schema.py, 类名: TestDefaults\n    def test_loading_none(self, schema, data):\n        result = schema.load(data)\n        assert not result.errors\n        for key in data.keys():\n            result.data[key] is None\n", "tokens": ["tests", "test_schema", "py", "testdefaults", "def", "test_loading_none", "self", "schema", "data", "result", "schema", "load", "data", "assert", "not", "result", "errors", "for", "key", "in", "data", "keys", "result", "data", "key", "is", "none"], "doc_len": 27}
{"doc_id": "tests/test_schema.py::TestDefaults.test_missing_inputs_are_excluded_from_load_output", "file_path": "tests/test_schema.py", "class_name": "TestDefaults", "func_name": "test_missing_inputs_are_excluded_from_load_output", "text": "文件路径: tests/test_schema.py, 类名: TestDefaults\n    def test_missing_inputs_are_excluded_from_load_output(self, schema, data):\n        for key in ['int_no_default', 'str_no_default',\n                    'list_no_default', 'nested_no_default']:\n            d = data.copy()\n            del d[key]\n            result = schema.load(d)\n            # the missing key is not in the deserialized result\n            assert key not in result.data\n            # the rest of the keys are in the result.data\n            assert all(k in result.data for k in d.keys())\n", "tokens": ["tests", "test_schema", "py", "testdefaults", "def", "test_missing_inputs_are_excluded_from_load_output", "self", "schema", "data", "for", "key", "in", "int_no_default", "str_no_default", "list_no_default", "nested_no_default", "d", "data", "copy", "del", "d", "key", "result", "schema", "load", "d", "the", "missing", "key", "is", "not", "in", "the", "deserialized", "result", "assert", "key", "not", "in", "result", "data", "the", "rest", "of", "the", "keys", "are", "in", "the", "result", "data", "assert", "all", "k", "in", "result", "data", "for", "k", "in", "d", "keys"], "doc_len": 62}
{"doc_id": "tests/test_schema.py::TestLoadOnly.schema", "file_path": "tests/test_schema.py", "class_name": "TestLoadOnly", "func_name": "schema", "text": "文件路径: tests/test_schema.py, 类名: TestLoadOnly\n    def schema(self):\n        return self.MySchema()\n", "tokens": ["tests", "test_schema", "py", "testloadonly", "def", "schema", "self", "return", "self", "myschema"], "doc_len": 10}
{"doc_id": "tests/test_schema.py::TestLoadOnly.data", "file_path": "tests/test_schema.py", "class_name": "TestLoadOnly", "func_name": "data", "text": "文件路径: tests/test_schema.py, 类名: TestLoadOnly\n    def data(self):\n        return dict(\n            str_dump_only='Dump Only',\n            str_load_only='Load Only',\n            str_regular='Regular String')\n", "tokens": ["tests", "test_schema", "py", "testloadonly", "def", "data", "self", "return", "dict", "str_dump_only", "dump", "only", "str_load_only", "load", "only", "str_regular", "regular", "string"], "doc_len": 18}
{"doc_id": "tests/test_schema.py::TestLoadOnly.test_load_only", "file_path": "tests/test_schema.py", "class_name": "TestLoadOnly", "func_name": "test_load_only", "text": "文件路径: tests/test_schema.py, 类名: TestLoadOnly\n    def test_load_only(self, schema, data):\n        result = schema.dump(data)\n        assert not result.errors\n        assert 'str_load_only' not in result.data\n        assert 'str_dump_only' in result.data\n        assert 'str_regular' in result.data\n", "tokens": ["tests", "test_schema", "py", "testloadonly", "def", "test_load_only", "self", "schema", "data", "result", "schema", "dump", "data", "assert", "not", "result", "errors", "assert", "str_load_only", "not", "in", "result", "data", "assert", "str_dump_only", "in", "result", "data", "assert", "str_regular", "in", "result", "data"], "doc_len": 33}
{"doc_id": "tests/test_schema.py::TestLoadOnly.test_dump_only", "file_path": "tests/test_schema.py", "class_name": "TestLoadOnly", "func_name": "test_dump_only", "text": "文件路径: tests/test_schema.py, 类名: TestLoadOnly\n    def test_dump_only(self, schema, data):\n        result = schema.load(data)\n        assert not result.errors\n        assert 'str_dump_only' not in result.data\n        assert 'str_load_only' in result.data\n        assert 'str_regular' in result.data\n", "tokens": ["tests", "test_schema", "py", "testloadonly", "def", "test_dump_only", "self", "schema", "data", "result", "schema", "load", "data", "assert", "not", "result", "errors", "assert", "str_dump_only", "not", "in", "result", "data", "assert", "str_load_only", "in", "result", "data", "assert", "str_regular", "in", "result", "data"], "doc_len": 33}
{"doc_id": "tests/test_schema.py::TestStrictDefault.test_default", "file_path": "tests/test_schema.py", "class_name": "TestStrictDefault", "func_name": "test_default", "text": "文件路径: tests/test_schema.py, 类名: TestStrictDefault\n    def test_default(self):\n        assert self.SchemaWithoutMeta().strict is False\n", "tokens": ["tests", "test_schema", "py", "teststrictdefault", "def", "test_default", "self", "assert", "self", "schemawithoutmeta", "strict", "is", "false"], "doc_len": 13}
{"doc_id": "tests/test_schema.py::TestStrictDefault.test_meta_true", "file_path": "tests/test_schema.py", "class_name": "TestStrictDefault", "func_name": "test_meta_true", "text": "文件路径: tests/test_schema.py, 类名: TestStrictDefault\n    def test_meta_true(self):\n        assert self.SchemaTrueByMeta().strict is True\n", "tokens": ["tests", "test_schema", "py", "teststrictdefault", "def", "test_meta_true", "self", "assert", "self", "schematruebymeta", "strict", "is", "true"], "doc_len": 13}
{"doc_id": "tests/test_schema.py::TestStrictDefault.test_meta_false", "file_path": "tests/test_schema.py", "class_name": "TestStrictDefault", "func_name": "test_meta_false", "text": "文件路径: tests/test_schema.py, 类名: TestStrictDefault\n    def test_meta_false(self):\n        assert self.SchemaFalseByMeta().strict is False\n", "tokens": ["tests", "test_schema", "py", "teststrictdefault", "def", "test_meta_false", "self", "assert", "self", "schemafalsebymeta", "strict", "is", "false"], "doc_len": 13}
{"doc_id": "tests/test_schema.py::TestStrictDefault.test_default_init_true", "file_path": "tests/test_schema.py", "class_name": "TestStrictDefault", "func_name": "test_default_init_true", "text": "文件路径: tests/test_schema.py, 类名: TestStrictDefault\n    def test_default_init_true(self):\n        assert self.SchemaWithoutMeta(strict=True).strict is True\n", "tokens": ["tests", "test_schema", "py", "teststrictdefault", "def", "test_default_init_true", "self", "assert", "self", "schemawithoutmeta", "strict", "true", "strict", "is", "true"], "doc_len": 15}
{"doc_id": "tests/test_schema.py::TestStrictDefault.test_default_init_false", "file_path": "tests/test_schema.py", "class_name": "TestStrictDefault", "func_name": "test_default_init_false", "text": "文件路径: tests/test_schema.py, 类名: TestStrictDefault\n    def test_default_init_false(self):\n        assert self.SchemaWithoutMeta(strict=False).strict is False\n", "tokens": ["tests", "test_schema", "py", "teststrictdefault", "def", "test_default_init_false", "self", "assert", "self", "schemawithoutmeta", "strict", "false", "strict", "is", "false"], "doc_len": 15}
{"doc_id": "tests/test_schema.py::TestStrictDefault.test_meta_true_init_true", "file_path": "tests/test_schema.py", "class_name": "TestStrictDefault", "func_name": "test_meta_true_init_true", "text": "文件路径: tests/test_schema.py, 类名: TestStrictDefault\n    def test_meta_true_init_true(self):\n        assert self.SchemaTrueByMeta(strict=True).strict is True\n", "tokens": ["tests", "test_schema", "py", "teststrictdefault", "def", "test_meta_true_init_true", "self", "assert", "self", "schematruebymeta", "strict", "true", "strict", "is", "true"], "doc_len": 15}
{"doc_id": "tests/test_schema.py::TestStrictDefault.test_meta_true_init_false", "file_path": "tests/test_schema.py", "class_name": "TestStrictDefault", "func_name": "test_meta_true_init_false", "text": "文件路径: tests/test_schema.py, 类名: TestStrictDefault\n    def test_meta_true_init_false(self):\n        assert self.SchemaTrueByMeta(strict=False).strict is False\n", "tokens": ["tests", "test_schema", "py", "teststrictdefault", "def", "test_meta_true_init_false", "self", "assert", "self", "schematruebymeta", "strict", "false", "strict", "is", "false"], "doc_len": 15}
{"doc_id": "tests/test_schema.py::TestStrictDefault.test_meta_false_init_true", "file_path": "tests/test_schema.py", "class_name": "TestStrictDefault", "func_name": "test_meta_false_init_true", "text": "文件路径: tests/test_schema.py, 类名: TestStrictDefault\n    def test_meta_false_init_true(self):\n        assert self.SchemaFalseByMeta(strict=True).strict is True\n", "tokens": ["tests", "test_schema", "py", "teststrictdefault", "def", "test_meta_false_init_true", "self", "assert", "self", "schemafalsebymeta", "strict", "true", "strict", "is", "true"], "doc_len": 15}
{"doc_id": "tests/test_schema.py::TestStrictDefault.test_meta_false_init_false", "file_path": "tests/test_schema.py", "class_name": "TestStrictDefault", "func_name": "test_meta_false_init_false", "text": "文件路径: tests/test_schema.py, 类名: TestStrictDefault\n    def test_meta_false_init_false(self):\n        assert self.SchemaFalseByMeta(strict=False).strict is False\n", "tokens": ["tests", "test_schema", "py", "teststrictdefault", "def", "test_meta_false_init_false", "self", "assert", "self", "schemafalsebymeta", "strict", "false", "strict", "is", "false"], "doc_len": 15}
{"doc_id": "tests/test_serialization.py::DateTimeList.__init__", "file_path": "tests/test_serialization.py", "class_name": "DateTimeList", "func_name": "__init__", "text": "文件路径: tests/test_serialization.py, 类名: DateTimeList\n    def __init__(self, dtimes):\n        self.dtimes = dtimes\n", "tokens": ["tests", "test_serialization", "py", "datetimelist", "def", "__init__", "self", "dtimes", "self", "dtimes", "dtimes"], "doc_len": 11}
{"doc_id": "tests/test_serialization.py::IntegerList.__init__", "file_path": "tests/test_serialization.py", "class_name": "IntegerList", "func_name": "__init__", "text": "文件路径: tests/test_serialization.py, 类名: IntegerList\n    def __init__(self, ints):\n        self.ints = ints\n", "tokens": ["tests", "test_serialization", "py", "integerlist", "def", "__init__", "self", "ints", "self", "ints", "ints"], "doc_len": 11}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.user", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "user", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def user(self):\n        return User(\"Foo\", email=\"foo@bar.com\", age=42)\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "user", "self", "return", "user", "foo", "email", "foo", "bar", "com", "age", "42"], "doc_len": 16}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_default", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_default", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_default(self, user):\n        field = fields.Field(default='nan')\n        assert field.serialize('age', {}) == 'nan'\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_default", "self", "user", "field", "fields", "field", "default", "nan", "assert", "field", "serialize", "age", "nan"], "doc_len": 18}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_number", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_number", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_number(self, value, expected, user):\n        field = fields.Number()\n        user.age = value\n        assert field.serialize('age', user) == expected\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_number", "self", "value", "expected", "user", "field", "fields", "number", "user", "age", "value", "assert", "field", "serialize", "age", "user", "expected"], "doc_len": 22}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_number_as_string", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_number_as_string", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_number_as_string(self, user):\n        user.age = 42\n        field = fields.Number(as_string=True)\n        assert field.serialize('age', user) == str(float(user.age))\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_number_as_string", "self", "user", "user", "age", "42", "field", "fields", "number", "as_string", "true", "assert", "field", "serialize", "age", "user", "str", "float", "user", "age"], "doc_len": 25}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_number_as_string_passed_none", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_number_as_string_passed_none", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_number_as_string_passed_none(self, user):\n        user.age = None\n        field = fields.Number(as_string=True, allow_none=True)\n        assert field.serialize('age', user) is None\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_number_as_string_passed_none", "self", "user", "user", "age", "none", "field", "fields", "number", "as_string", "true", "allow_none", "true", "assert", "field", "serialize", "age", "user", "is", "none"], "doc_len": 25}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_callable_default", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_callable_default", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_callable_default(self, user):\n        field = fields.Field(default=lambda: 'nan')\n        assert field.serialize('age', {}) == 'nan'\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_callable_default", "self", "user", "field", "fields", "field", "default", "lambda", "nan", "assert", "field", "serialize", "age", "nan"], "doc_len": 19}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_function_field_passed_func", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_function_field_passed_func", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_function_field_passed_func(self, user):\n        field = fields.Function(lambda obj: obj.name.upper())\n        assert \"FOO\" == field.serialize(\"key\", user)\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_function_field_passed_func", "self", "user", "field", "fields", "function", "lambda", "obj", "obj", "name", "upper", "assert", "foo", "field", "serialize", "key", "user"], "doc_len": 22}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_function_field_passed_serialize", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_function_field_passed_serialize", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_function_field_passed_serialize(self, user):\n        field = fields.Function(serialize=lambda obj: obj.name.upper())\n        assert \"FOO\" == field.serialize(\"key\", user)\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_function_field_passed_serialize", "self", "user", "field", "fields", "function", "serialize", "lambda", "obj", "obj", "name", "upper", "assert", "foo", "field", "serialize", "key", "user"], "doc_len": 23}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_function_field_passed_func_is_deprecated", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_function_field_passed_func_is_deprecated", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_function_field_passed_func_is_deprecated(self):\n        pytest.deprecated_call(lambda: fields.Function(func=lambda obj: obj.name.upper()))\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_function_field_passed_func_is_deprecated", "self", "pytest", "deprecated_call", "lambda", "fields", "function", "func", "lambda", "obj", "obj", "name", "upper"], "doc_len": 18}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_function_field_passed_serialize_with_context", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_function_field_passed_serialize_with_context", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_function_field_passed_serialize_with_context(self, user, monkeypatch):\n        class Parent(Schema):\n            pass\n        field = fields.Function(\n            serialize=lambda obj, context: obj.name.upper() + context['key']\n        )\n        field.parent = Parent(context={'key': 'BAR'})\n        assert \"FOOBAR\" == field.serialize(\"key\", user)\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_function_field_passed_serialize_with_context", "self", "user", "monkeypatch", "class", "parent", "schema", "pass", "field", "fields", "function", "serialize", "lambda", "obj", "context", "obj", "name", "upper", "context", "key", "field", "parent", "parent", "context", "key", "bar", "assert", "foobar", "field", "serialize", "key", "user"], "doc_len": 37}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_function_field_passed_uncallable_object", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_function_field_passed_uncallable_object", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_function_field_passed_uncallable_object(self):\n        with pytest.raises(ValueError):\n            fields.Function('uncallable')\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_function_field_passed_uncallable_object", "self", "with", "pytest", "raises", "valueerror", "fields", "function", "uncallable"], "doc_len": 14}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_integer_field", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_integer_field", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_integer_field(self, user):\n        field = fields.Integer()\n        assert field.serialize('age', user) == 42\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_integer_field", "self", "user", "field", "fields", "integer", "assert", "field", "serialize", "age", "user", "42"], "doc_len": 17}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_integer_as_string_field", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_integer_as_string_field", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_integer_as_string_field(self, user):\n        field = fields.Integer(as_string=True)\n        assert field.serialize('age', user) == '42'\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_integer_as_string_field", "self", "user", "field", "fields", "integer", "as_string", "true", "assert", "field", "serialize", "age", "user", "42"], "doc_len": 19}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_integer_field_default", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_integer_field_default", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_integer_field_default(self, user):\n        user.age = None\n        field = fields.Integer(default=0)\n        assert field.serialize('age', user) is None\n        # missing\n        assert field.serialize('age', {}) == 0\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_integer_field_default", "self", "user", "user", "age", "none", "field", "fields", "integer", "default", "0", "assert", "field", "serialize", "age", "user", "is", "none", "missing", "assert", "field", "serialize", "age", "0"], "doc_len": 29}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_integer_field_default_set_to_none", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_integer_field_default_set_to_none", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_integer_field_default_set_to_none(self, user):\n        user.age = None\n        field = fields.Integer(default=None)\n        assert field.serialize('age', user) is None\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_integer_field_default_set_to_none", "self", "user", "user", "age", "none", "field", "fields", "integer", "default", "none", "assert", "field", "serialize", "age", "user", "is", "none"], "doc_len": 23}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_callable_field", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_callable_field", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_callable_field(self, user):\n       field = fields.String()\n       assert field.serialize('call_me', user) == 'This was called.'\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_callable_field", "self", "user", "field", "fields", "string", "assert", "field", "serialize", "call_me", "user", "this", "was", "called"], "doc_len": 19}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_uuid_field", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_uuid_field", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_uuid_field(self, user):\n        user.uuid1 = '{12345678-1234-5678-1234-567812345678}'\n        user.uuid2 = uuid.UUID('12345678123456781234567812345678')\n        user.uuid3 = None\n        user.uuid4 = 'this is not a UUID'\n        user.uuid5 = 42\n        user.uuid6 = {}\n\n        field = fields.UUID()\n        assert isinstance(field.serialize('uuid1', user), str)\n        assert field.serialize('uuid1', user) == '12345678-1234-5678-1234-567812345678'\n        assert isinstance(field.serialize('uuid2', user), str)\n        assert field.serialize('uuid2', user) == '12345678-1234-5678-1234-567812345678'\n        assert field.serialize('uuid3', user) is None\n        with pytest.raises(ValidationError):\n            field.serialize('uuid4', user)\n        with pytest.raises(ValidationError):\n            field.serialize('uuid5', user)\n        with pytest.raises(ValidationError):\n            field.serialize('uuid6', user)\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_uuid_field", "self", "user", "user", "uuid1", "12345678", "1234", "5678", "1234", "567812345678", "user", "uuid2", "uuid", "uuid", "12345678123456781234567812345678", "user", "uuid3", "none", "user", "uuid4", "this", "is", "not", "a", "uuid", "user", "uuid5", "42", "user", "uuid6", "field", "fields", "uuid", "assert", "isinstance", "field", "serialize", "uuid1", "user", "str", "assert", "field", "serialize", "uuid1", "user", "12345678", "1234", "5678", "1234", "567812345678", "assert", "isinstance", "field", "serialize", "uuid2", "user", "str", "assert", "field", "serialize", "uuid2", "user", "12345678", "1234", "5678", "1234", "567812345678", "assert", "field", "serialize", "uuid3", "user", "is", "none", "with", "pytest", "raises", "validationerror", "field", "serialize", "uuid4", "user", "with", "pytest", "raises", "validationerror", "field", "serialize", "uuid5", "user", "with", "pytest", "raises", "validationerror", "field", "serialize", "uuid6", "user"], "doc_len": 103}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_decimal_field", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_decimal_field", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_decimal_field(self, user):\n        user.m1 = 12\n        user.m2 = '12.355'\n        user.m3 = decimal.Decimal(1)\n        user.m4 = None\n        user.m5 = 'abc'\n        user.m6 = [1, 2]\n\n        field = fields.Decimal()\n        assert isinstance(field.serialize('m1', user), decimal.Decimal)\n        assert field.serialize('m1', user) == decimal.Decimal(12)\n        assert isinstance(field.serialize('m2', user), decimal.Decimal)\n        assert field.serialize('m2', user) == decimal.Decimal('12.355')\n        assert isinstance(field.serialize('m3', user), decimal.Decimal)\n        assert field.serialize('m3', user) == decimal.Decimal(1)\n        assert field.serialize('m4', user) is None\n        with pytest.raises(ValidationError):\n            field.serialize('m5', user)\n        with pytest.raises(ValidationError):\n            field.serialize('m6', user)\n\n        field = fields.Decimal(1)\n        assert isinstance(field.serialize('m1', user), decimal.Decimal)\n        assert field.serialize('m1', user) == decimal.Decimal(12)\n        assert isinstance(field.serialize('m2', user), decimal.Decimal)\n        assert field.serialize('m2', user) == decimal.Decimal('12.4')\n        assert isinstance(field.serialize('m3', user), decimal.Decimal)\n        assert field.serialize('m3', user) == decimal.Decimal(1)\n        assert field.serialize('m4', user) is None\n        with pytest.raises(ValidationError):\n            field.serialize('m5', user)\n        with pytest.raises(ValidationError):\n            field.serialize('m6', user)\n\n        field = fields.Decimal(1, decimal.ROUND_DOWN)\n        assert isinstance(field.serialize('m1', user), decimal.Decimal)\n        assert field.serialize('m1', user) == decimal.Decimal(12)\n        assert isinstance(field.serialize('m2', user), decimal.Decimal)\n        assert field.serialize('m2', user) == decimal.Decimal('12.3')\n        assert isinstance(field.serialize('m3', user), decimal.Decimal)\n        assert field.serialize('m3', user) == decimal.Decimal(1)\n        assert field.serialize('m4', user) is None\n        with pytest.raises(ValidationError):\n            field.serialize('m5', user)\n        with pytest.raises(ValidationError):\n            field.serialize('m6', user)\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_decimal_field", "self", "user", "user", "m1", "12", "user", "m2", "12", "355", "user", "m3", "decimal", "decimal", "1", "user", "m4", "none", "user", "m5", "abc", "user", "m6", "1", "2", "field", "fields", "decimal", "assert", "isinstance", "field", "serialize", "m1", "user", "decimal", "decimal", "assert", "field", "serialize", "m1", "user", "decimal", "decimal", "12", "assert", "isinstance", "field", "serialize", "m2", "user", "decimal", "decimal", "assert", "field", "serialize", "m2", "user", "decimal", "decimal", "12", "355", "assert", "isinstance", "field", "serialize", "m3", "user", "decimal", "decimal", "assert", "field", "serialize", "m3", "user", "decimal", "decimal", "1", "assert", "field", "serialize", "m4", "user", "is", "none", "with", "pytest", "raises", "validationerror", "field", "serialize", "m5", "user", "with", "pytest", "raises", "validationerror", "field", "serialize", "m6", "user", "field", "fields", "decimal", "1", "assert", "isinstance", "field", "serialize", "m1", "user", "decimal", "decimal", "assert", "field", "serialize", "m1", "user", "decimal", "decimal", "12", "assert", "isinstance", "field", "serialize", "m2", "user", "decimal", "decimal", "assert", "field", "serialize", "m2", "user", "decimal", "decimal", "12", "4", "assert", "isinstance", "field", "serialize", "m3", "user", "decimal", "decimal", "assert", "field", "serialize", "m3", "user", "decimal", "decimal", "1", "assert", "field", "serialize", "m4", "user", "is", "none", "with", "pytest", "raises", "validationerror", "field", "serialize", "m5", "user", "with", "pytest", "raises", "validationerror", "field", "serialize", "m6", "user", "field", "fields", "decimal", "1", "decimal", "round_down", "assert", "isinstance", "field", "serialize", "m1", "user", "decimal", "decimal", "assert", "field", "serialize", "m1", "user", "decimal", "decimal", "12", "assert", "isinstance", "field", "serialize", "m2", "user", "decimal", "decimal", "assert", "field", "serialize", "m2", "user", "decimal", "decimal", "12", "3", "assert", "isinstance", "field", "serialize", "m3", "user", "decimal", "decimal", "assert", "field", "serialize", "m3", "user", "decimal", "decimal", "1", "assert", "field", "serialize", "m4", "user", "is", "none", "with", "pytest", "raises", "validationerror", "field", "serialize", "m5", "user", "with", "pytest", "raises", "validationerror", "field", "serialize", "m6", "user"], "doc_len": 259}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_decimal_field_string", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_decimal_field_string", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_decimal_field_string(self, user):\n        user.m1 = 12\n        user.m2 = '12.355'\n        user.m3 = decimal.Decimal(1)\n        user.m4 = None\n        user.m5 = 'abc'\n        user.m6 = [1, 2]\n\n        field = fields.Decimal(as_string=True)\n        assert isinstance(field.serialize('m1', user), basestring)\n        assert field.serialize('m1', user) == '12'\n        assert isinstance(field.serialize('m2', user), basestring)\n        assert field.serialize('m2', user) == '12.355'\n        assert isinstance(field.serialize('m3', user), basestring)\n        assert field.serialize('m3', user) == '1'\n        assert field.serialize('m4', user) is None\n        with pytest.raises(ValidationError):\n            field.serialize('m5', user)\n        with pytest.raises(ValidationError):\n            field.serialize('m6', user)\n\n        field = fields.Decimal(1, as_string=True)\n        assert isinstance(field.serialize('m1', user), basestring)\n        assert field.serialize('m1', user) == '12.0'\n        assert isinstance(field.serialize('m2', user), basestring)\n        assert field.serialize('m2', user) == '12.4'\n        assert isinstance(field.serialize('m3', user), basestring)\n        assert field.serialize('m3', user) == '1.0'\n        assert field.serialize('m4', user) is None\n        with pytest.raises(ValidationError):\n            field.serialize('m5', user)\n        with pytest.raises(ValidationError):\n            field.serialize('m6', user)\n\n        field = fields.Decimal(1, decimal.ROUND_DOWN, as_string=True)\n        assert isinstance(field.serialize('m1', user), basestring)\n        assert field.serialize('m1', user) == '12.0'\n        assert isinstance(field.serialize('m2', user), basestring)\n        assert field.serialize('m2', user) == '12.3'\n        assert isinstance(field.serialize('m3', user), basestring)\n        assert field.serialize('m3', user) == '1.0'\n        assert field.serialize('m4', user) is None\n        with pytest.raises(ValidationError):\n            field.serialize('m5', user)\n        with pytest.raises(ValidationError):\n            field.serialize('m6', user)\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_decimal_field_string", "self", "user", "user", "m1", "12", "user", "m2", "12", "355", "user", "m3", "decimal", "decimal", "1", "user", "m4", "none", "user", "m5", "abc", "user", "m6", "1", "2", "field", "fields", "decimal", "as_string", "true", "assert", "isinstance", "field", "serialize", "m1", "user", "basestring", "assert", "field", "serialize", "m1", "user", "12", "assert", "isinstance", "field", "serialize", "m2", "user", "basestring", "assert", "field", "serialize", "m2", "user", "12", "355", "assert", "isinstance", "field", "serialize", "m3", "user", "basestring", "assert", "field", "serialize", "m3", "user", "1", "assert", "field", "serialize", "m4", "user", "is", "none", "with", "pytest", "raises", "validationerror", "field", "serialize", "m5", "user", "with", "pytest", "raises", "validationerror", "field", "serialize", "m6", "user", "field", "fields", "decimal", "1", "as_string", "true", "assert", "isinstance", "field", "serialize", "m1", "user", "basestring", "assert", "field", "serialize", "m1", "user", "12", "0", "assert", "isinstance", "field", "serialize", "m2", "user", "basestring", "assert", "field", "serialize", "m2", "user", "12", "4", "assert", "isinstance", "field", "serialize", "m3", "user", "basestring", "assert", "field", "serialize", "m3", "user", "1", "0", "assert", "field", "serialize", "m4", "user", "is", "none", "with", "pytest", "raises", "validationerror", "field", "serialize", "m5", "user", "with", "pytest", "raises", "validationerror", "field", "serialize", "m6", "user", "field", "fields", "decimal", "1", "decimal", "round_down", "as_string", "true", "assert", "isinstance", "field", "serialize", "m1", "user", "basestring", "assert", "field", "serialize", "m1", "user", "12", "0", "assert", "isinstance", "field", "serialize", "m2", "user", "basestring", "assert", "field", "serialize", "m2", "user", "12", "3", "assert", "isinstance", "field", "serialize", "m3", "user", "basestring", "assert", "field", "serialize", "m3", "user", "1", "0", "assert", "field", "serialize", "m4", "user", "is", "none", "with", "pytest", "raises", "validationerror", "field", "serialize", "m5", "user", "with", "pytest", "raises", "validationerror", "field", "serialize", "m6", "user"], "doc_len": 242}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_decimal_field_special_values", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_decimal_field_special_values", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_decimal_field_special_values(self, user):\n        user.m1 = '-NaN'\n        user.m2 = 'NaN'\n        user.m3 = '-sNaN'\n        user.m4 = 'sNaN'\n        user.m5 = '-Infinity'\n        user.m6 = 'Infinity'\n        user.m7 = '-0'\n\n        field = fields.Decimal(places=2, allow_nan=True)\n\n        m1s = field.serialize('m1', user)\n        assert isinstance(m1s, decimal.Decimal)\n        assert m1s.is_qnan() and not m1s.is_signed()\n\n        m2s = field.serialize('m2', user)\n        assert isinstance(m2s, decimal.Decimal)\n        assert m2s.is_qnan() and not m2s.is_signed()\n\n        m3s = field.serialize('m3', user)\n        assert isinstance(m3s, decimal.Decimal)\n        assert m3s.is_qnan() and not m3s.is_signed()\n\n        m4s = field.serialize('m4', user)\n        assert isinstance(m4s, decimal.Decimal)\n        assert m4s.is_qnan() and not m4s.is_signed()\n\n        m5s = field.serialize('m5', user)\n        assert isinstance(m5s, decimal.Decimal)\n        assert m5s.is_infinite() and m5s.is_signed()\n\n        m6s = field.serialize('m6', user)\n        assert isinstance(m6s, decimal.Decimal)\n        assert m6s.is_infinite() and not m6s.is_signed()\n\n        m7s = field.serialize('m7', user)\n        assert isinstance(m7s, decimal.Decimal)\n        assert m7s.is_zero() and m7s.is_signed()\n\n        field = fields.Decimal(as_string=True, allow_nan=True)\n\n        m2s = field.serialize('m2', user)\n        assert isinstance(m2s, basestring)\n        assert m2s == user.m2\n\n        m5s = field.serialize('m5', user)\n        assert isinstance(m5s, basestring)\n        assert m5s == user.m5\n\n        m6s = field.serialize('m6', user)\n        assert isinstance(m6s, basestring)\n        assert m6s == user.m6\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_decimal_field_special_values", "self", "user", "user", "m1", "nan", "user", "m2", "nan", "user", "m3", "snan", "user", "m4", "snan", "user", "m5", "infinity", "user", "m6", "infinity", "user", "m7", "0", "field", "fields", "decimal", "places", "2", "allow_nan", "true", "m1s", "field", "serialize", "m1", "user", "assert", "isinstance", "m1s", "decimal", "decimal", "assert", "m1s", "is_qnan", "and", "not", "m1s", "is_signed", "m2s", "field", "serialize", "m2", "user", "assert", "isinstance", "m2s", "decimal", "decimal", "assert", "m2s", "is_qnan", "and", "not", "m2s", "is_signed", "m3s", "field", "serialize", "m3", "user", "assert", "isinstance", "m3s", "decimal", "decimal", "assert", "m3s", "is_qnan", "and", "not", "m3s", "is_signed", "m4s", "field", "serialize", "m4", "user", "assert", "isinstance", "m4s", "decimal", "decimal", "assert", "m4s", "is_qnan", "and", "not", "m4s", "is_signed", "m5s", "field", "serialize", "m5", "user", "assert", "isinstance", "m5s", "decimal", "decimal", "assert", "m5s", "is_infinite", "and", "m5s", "is_signed", "m6s", "field", "serialize", "m6", "user", "assert", "isinstance", "m6s", "decimal", "decimal", "assert", "m6s", "is_infinite", "and", "not", "m6s", "is_signed", "m7s", "field", "serialize", "m7", "user", "assert", "isinstance", "m7s", "decimal", "decimal", "assert", "m7s", "is_zero", "and", "m7s", "is_signed", "field", "fields", "decimal", "as_string", "true", "allow_nan", "true", "m2s", "field", "serialize", "m2", "user", "assert", "isinstance", "m2s", "basestring", "assert", "m2s", "user", "m2", "m5s", "field", "serialize", "m5", "user", "assert", "isinstance", "m5s", "basestring", "assert", "m5s", "user", "m5", "m6s", "field", "serialize", "m6", "user", "assert", "isinstance", "m6s", "basestring", "assert", "m6s", "user", "m6"], "doc_len": 199}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_decimal_field_special_values_not_permitted", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_decimal_field_special_values_not_permitted", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_decimal_field_special_values_not_permitted(self, user):\n        user.m1 = '-NaN'\n        user.m2 = 'NaN'\n        user.m3 = '-sNaN'\n        user.m4 = 'sNaN'\n        user.m5 = '-Infinity'\n        user.m6 = 'Infinity'\n        user.m7 = '-0'\n\n        field = fields.Decimal(places=2)\n\n        with pytest.raises(ValidationError):\n            field.serialize('m1', user)\n        with pytest.raises(ValidationError):\n            field.serialize('m2', user)\n        with pytest.raises(ValidationError):\n            field.serialize('m3', user)\n        with pytest.raises(ValidationError):\n            field.serialize('m4', user)\n        with pytest.raises(ValidationError):\n            field.serialize('m5', user)\n        with pytest.raises(ValidationError):\n            field.serialize('m6', user)\n\n        m7s = field.serialize('m7', user)\n        assert isinstance(m7s, decimal.Decimal)\n        assert m7s.is_zero() and m7s.is_signed()\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_decimal_field_special_values_not_permitted", "self", "user", "user", "m1", "nan", "user", "m2", "nan", "user", "m3", "snan", "user", "m4", "snan", "user", "m5", "infinity", "user", "m6", "infinity", "user", "m7", "0", "field", "fields", "decimal", "places", "2", "with", "pytest", "raises", "validationerror", "field", "serialize", "m1", "user", "with", "pytest", "raises", "validationerror", "field", "serialize", "m2", "user", "with", "pytest", "raises", "validationerror", "field", "serialize", "m3", "user", "with", "pytest", "raises", "validationerror", "field", "serialize", "m4", "user", "with", "pytest", "raises", "validationerror", "field", "serialize", "m5", "user", "with", "pytest", "raises", "validationerror", "field", "serialize", "m6", "user", "m7s", "field", "serialize", "m7", "user", "assert", "isinstance", "m7s", "decimal", "decimal", "assert", "m7s", "is_zero", "and", "m7s", "is_signed"], "doc_len": 98}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_decimal_field_fixed_point_representation", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_decimal_field_fixed_point_representation", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_decimal_field_fixed_point_representation(self, user):\n        \"\"\"\n        Test we get fixed-point string representation for a Decimal number that would normally\n        output in engineering notation.\n        \"\"\"\n        user.m1 = '0.00000000100000000'\n\n        field = fields.Decimal()\n        s = field.serialize('m1', user)\n        assert isinstance(s, decimal.Decimal)\n        assert s == decimal.Decimal('1.00000000E-9')\n\n        field = fields.Decimal(as_string=True)\n        s = field.serialize('m1', user)\n        assert isinstance(s, basestring)\n        assert s == user.m1\n\n        field = fields.Decimal(as_string=True, places=2)\n        s = field.serialize('m1', user)\n        assert isinstance(s, basestring)\n        assert s == '0.00'\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_decimal_field_fixed_point_representation", "self", "user", "test", "we", "get", "fixed", "point", "string", "representation", "for", "a", "decimal", "number", "that", "would", "normally", "output", "in", "engineering", "notation", "user", "m1", "0", "00000000100000000", "field", "fields", "decimal", "s", "field", "serialize", "m1", "user", "assert", "isinstance", "s", "decimal", "decimal", "assert", "s", "decimal", "decimal", "1", "00000000e", "9", "field", "fields", "decimal", "as_string", "true", "s", "field", "serialize", "m1", "user", "assert", "isinstance", "s", "basestring", "assert", "s", "user", "m1", "field", "fields", "decimal", "as_string", "true", "places", "2", "s", "field", "serialize", "m1", "user", "assert", "isinstance", "s", "basestring", "assert", "s", "0", "00"], "doc_len": 88}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_boolean_field_serialization", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_boolean_field_serialization", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_boolean_field_serialization(self, user):\n        field = fields.Boolean()\n\n        user.truthy = 'non-falsy-ish'\n        user.falsy = 'false'\n        user.none = None\n\n        assert field.serialize('truthy', user) == True\n        assert field.serialize('falsy', user) == False\n        assert field.serialize('none', user) == None\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_boolean_field_serialization", "self", "user", "field", "fields", "boolean", "user", "truthy", "non", "falsy", "ish", "user", "falsy", "false", "user", "none", "none", "assert", "field", "serialize", "truthy", "user", "true", "assert", "field", "serialize", "falsy", "user", "false", "assert", "field", "serialize", "none", "user", "none"], "doc_len": 40}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_function_with_uncallable_param", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_function_with_uncallable_param", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_function_with_uncallable_param(self):\n        with pytest.raises(ValueError):\n            fields.Function(\"uncallable\")\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_function_with_uncallable_param", "self", "with", "pytest", "raises", "valueerror", "fields", "function", "uncallable"], "doc_len": 14}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_email_field_validates", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_email_field_validates", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_email_field_validates(self, user):\n        user.email = 'bademail'\n        field = fields.Email()\n        with pytest.raises(ValidationError):\n            field.serialize('email', user)\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_email_field_validates", "self", "user", "user", "email", "bademail", "field", "fields", "email", "with", "pytest", "raises", "validationerror", "field", "serialize", "email", "user"], "doc_len": 22}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_email_field_serialize_none", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_email_field_serialize_none", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_email_field_serialize_none(self, user):\n        user.email = None\n        field = fields.Email()\n        assert field.serialize('email', user) is None\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_email_field_serialize_none", "self", "user", "user", "email", "none", "field", "fields", "email", "assert", "field", "serialize", "email", "user", "is", "none"], "doc_len": 21}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_dict_field_serialize_none", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_dict_field_serialize_none", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_dict_field_serialize_none(self, user):\n        user.various_data = None\n        field = fields.Dict()\n        assert field.serialize('various_data', user) is None\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_dict_field_serialize_none", "self", "user", "user", "various_data", "none", "field", "fields", "dict", "assert", "field", "serialize", "various_data", "user", "is", "none"], "doc_len": 21}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_dict_field_invalid_dict_but_okay", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_dict_field_invalid_dict_but_okay", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_dict_field_invalid_dict_but_okay(self, user):\n        user.various_data = 'okaydict'\n        field = fields.Dict()\n        field.serialize('various_data', user)\n        assert field.serialize('various_data', user) == 'okaydict'\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_dict_field_invalid_dict_but_okay", "self", "user", "user", "various_data", "okaydict", "field", "fields", "dict", "field", "serialize", "various_data", "user", "assert", "field", "serialize", "various_data", "user", "okaydict"], "doc_len": 24}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_dict_field_serialize", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_dict_field_serialize", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_dict_field_serialize(self, user):\n        user.various_data = {\"foo\": \"bar\"}\n        field = fields.Dict()\n        assert field.serialize('various_data', user) == {\"foo\": \"bar\"}\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_dict_field_serialize", "self", "user", "user", "various_data", "foo", "bar", "field", "fields", "dict", "assert", "field", "serialize", "various_data", "user", "foo", "bar"], "doc_len": 22}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_dict_field_serialize_ordereddict", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_dict_field_serialize_ordereddict", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_dict_field_serialize_ordereddict(self, user):\n        user.various_data = OrderedDict([(\"foo\", \"bar\"), (\"bar\", \"baz\")])\n        field = fields.Dict()\n        assert field.serialize('various_data', user) == \\\n            OrderedDict([(\"foo\", \"bar\"), (\"bar\", \"baz\")])\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_dict_field_serialize_ordereddict", "self", "user", "user", "various_data", "ordereddict", "foo", "bar", "bar", "baz", "field", "fields", "dict", "assert", "field", "serialize", "various_data", "user", "ordereddict", "foo", "bar", "bar", "baz"], "doc_len": 28}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_url_field_serialize_none", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_url_field_serialize_none", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_url_field_serialize_none(self, user):\n        user.homepage = None\n        field = fields.Url()\n        assert field.serialize('homepage', user) is None\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_url_field_serialize_none", "self", "user", "user", "homepage", "none", "field", "fields", "url", "assert", "field", "serialize", "homepage", "user", "is", "none"], "doc_len": 21}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_url_field_validates", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_url_field_validates", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_url_field_validates(self, user):\n        user.homepage = 'badhomepage'\n        field = fields.URL()\n        with pytest.raises(ValidationError):\n            field.serialize('homepage', user)\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_url_field_validates", "self", "user", "user", "homepage", "badhomepage", "field", "fields", "url", "with", "pytest", "raises", "validationerror", "field", "serialize", "homepage", "user"], "doc_len": 22}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_method_field_with_method_missing", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_method_field_with_method_missing", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_method_field_with_method_missing(self):\n        class BadSerializer(Schema):\n            bad_field = fields.Method('invalid')\n        u = User('Foo')\n        with pytest.raises(ValueError):\n            BadSerializer().dump(u)\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_method_field_with_method_missing", "self", "class", "badserializer", "schema", "bad_field", "fields", "method", "invalid", "u", "user", "foo", "with", "pytest", "raises", "valueerror", "badserializer", "dump", "u"], "doc_len": 24}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_method_field_with_uncallable_attribute", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_method_field_with_uncallable_attribute", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_method_field_with_uncallable_attribute(self):\n        class BadSerializer(Schema):\n            foo = 'not callable'\n            bad_field = fields.Method('foo')\n        u = User('Foo')\n        with pytest.raises(ValueError):\n            BadSerializer().dump(u)\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_method_field_with_uncallable_attribute", "self", "class", "badserializer", "schema", "foo", "not", "callable", "bad_field", "fields", "method", "foo", "u", "user", "foo", "with", "pytest", "raises", "valueerror", "badserializer", "dump", "u"], "doc_len": 27}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_method_prefers_serialize_over_method_name", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_method_prefers_serialize_over_method_name", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_method_prefers_serialize_over_method_name(self):\n        m = fields.Method(serialize='serialize', method_name='method')\n        assert m.serialize_method_name == 'serialize'\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_method_prefers_serialize_over_method_name", "self", "m", "fields", "method", "serialize", "serialize", "method_name", "method", "assert", "m", "serialize_method_name", "serialize"], "doc_len": 18}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_method_with_no_serialize_is_missing", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_method_with_no_serialize_is_missing", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_method_with_no_serialize_is_missing(self):\n        m = fields.Method()\n        m.parent = Schema()\n\n        assert m.serialize('', '', '') is missing_\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_method_with_no_serialize_is_missing", "self", "m", "fields", "method", "m", "parent", "schema", "assert", "m", "serialize", "is", "missing_"], "doc_len": 18}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_serialize_with_dump_to_param", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_serialize_with_dump_to_param", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_serialize_with_dump_to_param(self):\n        class DumpToSchema(Schema):\n            name = fields.String(dump_to='NamE')\n            years = fields.Integer(dump_to='YearS')\n        data = {\n            'name': 'Richard',\n            'years': 11\n        }\n        result, errors = DumpToSchema().dump(data)\n        assert result == {\n            'NamE': 'Richard',\n            'YearS': 11\n        }\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_serialize_with_dump_to_param", "self", "class", "dumptoschema", "schema", "name", "fields", "string", "dump_to", "name", "years", "fields", "integer", "dump_to", "years", "data", "name", "richard", "years", "11", "result", "errors", "dumptoschema", "dump", "data", "assert", "result", "name", "richard", "years", "11"], "doc_len": 36}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_serialize_with_attribute_and_dump_to_uses_dump_to", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_serialize_with_attribute_and_dump_to_uses_dump_to", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_serialize_with_attribute_and_dump_to_uses_dump_to(self):\n        class ConfusedDumpToAndAttributeSerializer(Schema):\n            name = fields.String(dump_to=\"FullName\")\n            username = fields.String(attribute='uname', dump_to='UserName')\n            years = fields.Integer(attribute='le_wild_age', dump_to='Years')\n        data = {\n            'name': 'Mick',\n            'uname': 'mick_the_awesome',\n            'le_wild_age': 999\n        }\n        result, errors = ConfusedDumpToAndAttributeSerializer().dump(data)\n\n        assert result == {\n            'FullName': 'Mick',\n            'UserName': 'mick_the_awesome',\n            'Years': 999,\n        }\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_serialize_with_attribute_and_dump_to_uses_dump_to", "self", "class", "confuseddumptoandattributeserializer", "schema", "name", "fields", "string", "dump_to", "fullname", "username", "fields", "string", "attribute", "uname", "dump_to", "username", "years", "fields", "integer", "attribute", "le_wild_age", "dump_to", "years", "data", "name", "mick", "uname", "mick_the_awesome", "le_wild_age", "999", "result", "errors", "confuseddumptoandattributeserializer", "dump", "data", "assert", "result", "fullname", "mick", "username", "mick_the_awesome", "years", "999"], "doc_len": 49}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_datetime_serializes_to_iso_by_default", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_datetime_serializes_to_iso_by_default", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_datetime_serializes_to_iso_by_default(self, user):\n        field = fields.DateTime()  # No format specified\n        expected = utils.isoformat(user.created, localtime=False)\n        assert field.serialize('created', user) == expected\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_datetime_serializes_to_iso_by_default", "self", "user", "field", "fields", "datetime", "no", "format", "specified", "expected", "utils", "isoformat", "user", "created", "localtime", "false", "assert", "field", "serialize", "created", "user", "expected"], "doc_len": 27}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_datetime_invalid_serialization", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_datetime_invalid_serialization", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_datetime_invalid_serialization(self, value, user):\n        field = fields.DateTime()\n        user.created = value\n\n        with pytest.raises(ValidationError) as excinfo:\n            field.serialize('created', user)\n        assert excinfo.value.args[0] == '\"{0}\" cannot be formatted as a datetime.'.format(value)\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_datetime_invalid_serialization", "self", "value", "user", "field", "fields", "datetime", "user", "created", "value", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "serialize", "created", "user", "assert", "excinfo", "value", "args", "0", "0", "cannot", "be", "formatted", "as", "a", "datetime", "format", "value"], "doc_len": 39}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_datetime_field_rfc822", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_datetime_field_rfc822", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_datetime_field_rfc822(self, fmt, user):\n        field = fields.DateTime(format=fmt)\n        expected = utils.rfcformat(user.created, localtime=False)\n        assert field.serialize(\"created\", user) == expected\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_datetime_field_rfc822", "self", "fmt", "user", "field", "fields", "datetime", "format", "fmt", "expected", "utils", "rfcformat", "user", "created", "localtime", "false", "assert", "field", "serialize", "created", "user", "expected"], "doc_len": 27}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_localdatetime_rfc_field", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_localdatetime_rfc_field", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_localdatetime_rfc_field(self, user):\n        field = fields.LocalDateTime(format='rfc')\n        expected = utils.rfcformat(user.created, localtime=True)\n        assert field.serialize(\"created\", user) == expected\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_localdatetime_rfc_field", "self", "user", "field", "fields", "localdatetime", "format", "rfc", "expected", "utils", "rfcformat", "user", "created", "localtime", "true", "assert", "field", "serialize", "created", "user", "expected"], "doc_len": 26}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_datetime_iso8601", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_datetime_iso8601", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_datetime_iso8601(self, fmt, user):\n        field = fields.DateTime(format=fmt)\n        expected = utils.isoformat(user.created, localtime=False)\n        assert field.serialize(\"created\", user) == expected\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_datetime_iso8601", "self", "fmt", "user", "field", "fields", "datetime", "format", "fmt", "expected", "utils", "isoformat", "user", "created", "localtime", "false", "assert", "field", "serialize", "created", "user", "expected"], "doc_len": 27}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_localdatetime_iso", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_localdatetime_iso", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_localdatetime_iso(self, user):\n        field = fields.LocalDateTime(format=\"iso\")\n        expected = utils.isoformat(user.created, localtime=True)\n        assert field.serialize(\"created\", user) == expected\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_localdatetime_iso", "self", "user", "field", "fields", "localdatetime", "format", "iso", "expected", "utils", "isoformat", "user", "created", "localtime", "true", "assert", "field", "serialize", "created", "user", "expected"], "doc_len": 26}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_datetime_format", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_datetime_format", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_datetime_format(self, user):\n        format = \"%Y-%m-%d\"\n        field = fields.DateTime(format=format)\n        assert field.serialize(\"created\", user) == user.created.strftime(format)\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_datetime_format", "self", "user", "format", "y", "m", "d", "field", "fields", "datetime", "format", "format", "assert", "field", "serialize", "created", "user", "user", "created", "strftime", "format"], "doc_len": 26}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_string_field", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_string_field", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_string_field(self):\n        field = fields.String()\n        user = User(name=b'foo')\n        assert field.serialize('name', user) == 'foo'\n        field = fields.String(allow_none=True)\n        user.name = None\n        assert field.serialize('name', user) is None\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_string_field", "self", "field", "fields", "string", "user", "user", "name", "b", "foo", "assert", "field", "serialize", "name", "user", "foo", "field", "fields", "string", "allow_none", "true", "user", "name", "none", "assert", "field", "serialize", "name", "user", "is", "none"], "doc_len": 36}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_formattedstring_field", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_formattedstring_field", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_formattedstring_field(self):\n        field = fields.FormattedString('Hello {name}')\n        user = User(name='Monty')\n        assert field.serialize('name', user) == 'Hello Monty'\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_formattedstring_field", "self", "field", "fields", "formattedstring", "hello", "name", "user", "user", "name", "monty", "assert", "field", "serialize", "name", "user", "hello", "monty"], "doc_len": 23}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_formattedstring_field_on_schema", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_formattedstring_field_on_schema", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_formattedstring_field_on_schema(self):\n        class MySchema(Schema):\n            greeting = fields.FormattedString('Hello {name}')\n        user = User(name='Monty')\n        assert MySchema().dump(user).data['greeting'] == 'Hello Monty'\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_formattedstring_field_on_schema", "self", "class", "myschema", "schema", "greeting", "fields", "formattedstring", "hello", "name", "user", "user", "name", "monty", "assert", "myschema", "dump", "user", "data", "greeting", "hello", "monty"], "doc_len": 27}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_string_field_default_to_empty_string", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_string_field_default_to_empty_string", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_string_field_default_to_empty_string(self, user):\n        field = fields.String(default='')\n        assert field.serialize(\"notfound\", {}) == ''\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_string_field_default_to_empty_string", "self", "user", "field", "fields", "string", "default", "assert", "field", "serialize", "notfound"], "doc_len": 16}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_time_field", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_time_field", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_time_field(self, user):\n        field = fields.Time()\n        expected = user.time_registered.isoformat()[:15]\n        assert field.serialize('time_registered', user) == expected\n\n        user.time_registered = None\n        assert field.serialize('time_registered', user) is None\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_time_field", "self", "user", "field", "fields", "time", "expected", "user", "time_registered", "isoformat", "15", "assert", "field", "serialize", "time_registered", "user", "expected", "user", "time_registered", "none", "assert", "field", "serialize", "time_registered", "user", "is", "none"], "doc_len": 32}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_invalid_time_field_serialization", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_invalid_time_field_serialization", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_invalid_time_field_serialization(self, in_data, user):\n        field = fields.Time()\n        user.time_registered = in_data\n        with pytest.raises(ValidationError) as excinfo:\n            field.serialize('time_registered', user)\n        msg = '\"{0}\" cannot be formatted as a time.'.format(in_data)\n        assert excinfo.value.args[0] == msg\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_invalid_time_field_serialization", "self", "in_data", "user", "field", "fields", "time", "user", "time_registered", "in_data", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "serialize", "time_registered", "user", "msg", "0", "cannot", "be", "formatted", "as", "a", "time", "format", "in_data", "assert", "excinfo", "value", "args", "0", "msg"], "doc_len": 41}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_date_field", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_date_field", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_date_field(self, user):\n        field = fields.Date()\n        assert field.serialize('birthdate', user) == user.birthdate.isoformat()\n\n        user.birthdate = None\n        assert field.serialize('birthdate', user) is None\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_date_field", "self", "user", "field", "fields", "date", "assert", "field", "serialize", "birthdate", "user", "user", "birthdate", "isoformat", "user", "birthdate", "none", "assert", "field", "serialize", "birthdate", "user", "is", "none"], "doc_len": 29}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_invalid_date_field_serialization", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_invalid_date_field_serialization", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_invalid_date_field_serialization(self, in_data, user):\n        field = fields.Date()\n        user.birthdate = in_data\n        with pytest.raises(ValidationError) as excinfo:\n            field.serialize('birthdate', user)\n        msg = '\"{0}\" cannot be formatted as a date.'.format(in_data)\n        assert excinfo.value.args[0] == msg\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_invalid_date_field_serialization", "self", "in_data", "user", "field", "fields", "date", "user", "birthdate", "in_data", "with", "pytest", "raises", "validationerror", "as", "excinfo", "field", "serialize", "birthdate", "user", "msg", "0", "cannot", "be", "formatted", "as", "a", "date", "format", "in_data", "assert", "excinfo", "value", "args", "0", "msg"], "doc_len": 41}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_timedelta_field", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_timedelta_field", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_timedelta_field(self, user):\n        user.d1 = dt.timedelta(days=1, seconds=1, microseconds=1)\n        user.d2 = dt.timedelta(days=0, seconds=86401, microseconds=1)\n        user.d3 = dt.timedelta(days=0, seconds=0, microseconds=86401000001)\n        user.d4 = dt.timedelta(days=0, seconds=0, microseconds=0)\n        user.d5 = dt.timedelta(days=-1, seconds=0, microseconds=0)\n\n        field = fields.TimeDelta(fields.TimeDelta.DAYS)\n        assert field.serialize('d1', user) == 1\n        field = fields.TimeDelta(fields.TimeDelta.SECONDS)\n        assert field.serialize('d1', user) == 86401\n        field = fields.TimeDelta(fields.TimeDelta.MICROSECONDS)\n        assert field.serialize('d1', user) == 86401000001\n\n        field = fields.TimeDelta(fields.TimeDelta.DAYS)\n        assert field.serialize('d2', user) == 1\n        field = fields.TimeDelta(fields.TimeDelta.SECONDS)\n        assert field.serialize('d2', user) == 86401\n        field = fields.TimeDelta(fields.TimeDelta.MICROSECONDS)\n        assert field.serialize('d2', user) == 86401000001\n\n        field = fields.TimeDelta(fields.TimeDelta.DAYS)\n        assert field.serialize('d3', user) == 1\n        field = fields.TimeDelta(fields.TimeDelta.SECONDS)\n        assert field.serialize('d3', user) == 86401\n        field = fields.TimeDelta(fields.TimeDelta.MICROSECONDS)\n        assert field.serialize('d3', user) == 86401000001\n\n        field = fields.TimeDelta(fields.TimeDelta.DAYS)\n        assert field.serialize('d4', user) == 0\n        field = fields.TimeDelta(fields.TimeDelta.SECONDS)\n        assert field.serialize('d4', user) == 0\n        field = fields.TimeDelta(fields.TimeDelta.MICROSECONDS)\n        assert field.serialize('d4', user) == 0\n\n        field = fields.TimeDelta(fields.TimeDelta.DAYS)\n        assert field.serialize('d5', user) == -1\n        field = fields.TimeDelta(fields.TimeDelta.SECONDS)\n        assert field.serialize('d5', user) == -86400\n        field = fields.TimeDelta(fields.TimeDelta.MICROSECONDS)\n        assert field.serialize('d5', user) == -86400000000\n\n        user.d6 = None\n        assert field.serialize('d6', user) is None\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_timedelta_field", "self", "user", "user", "d1", "dt", "timedelta", "days", "1", "seconds", "1", "microseconds", "1", "user", "d2", "dt", "timedelta", "days", "0", "seconds", "86401", "microseconds", "1", "user", "d3", "dt", "timedelta", "days", "0", "seconds", "0", "microseconds", "86401000001", "user", "d4", "dt", "timedelta", "days", "0", "seconds", "0", "microseconds", "0", "user", "d5", "dt", "timedelta", "days", "1", "seconds", "0", "microseconds", "0", "field", "fields", "timedelta", "fields", "timedelta", "days", "assert", "field", "serialize", "d1", "user", "1", "field", "fields", "timedelta", "fields", "timedelta", "seconds", "assert", "field", "serialize", "d1", "user", "86401", "field", "fields", "timedelta", "fields", "timedelta", "microseconds", "assert", "field", "serialize", "d1", "user", "86401000001", "field", "fields", "timedelta", "fields", "timedelta", "days", "assert", "field", "serialize", "d2", "user", "1", "field", "fields", "timedelta", "fields", "timedelta", "seconds", "assert", "field", "serialize", "d2", "user", "86401", "field", "fields", "timedelta", "fields", "timedelta", "microseconds", "assert", "field", "serialize", "d2", "user", "86401000001", "field", "fields", "timedelta", "fields", "timedelta", "days", "assert", "field", "serialize", "d3", "user", "1", "field", "fields", "timedelta", "fields", "timedelta", "seconds", "assert", "field", "serialize", "d3", "user", "86401", "field", "fields", "timedelta", "fields", "timedelta", "microseconds", "assert", "field", "serialize", "d3", "user", "86401000001", "field", "fields", "timedelta", "fields", "timedelta", "days", "assert", "field", "serialize", "d4", "user", "0", "field", "fields", "timedelta", "fields", "timedelta", "seconds", "assert", "field", "serialize", "d4", "user", "0", "field", "fields", "timedelta", "fields", "timedelta", "microseconds", "assert", "field", "serialize", "d4", "user", "0", "field", "fields", "timedelta", "fields", "timedelta", "days", "assert", "field", "serialize", "d5", "user", "1", "field", "fields", "timedelta", "fields", "timedelta", "seconds", "assert", "field", "serialize", "d5", "user", "86400", "field", "fields", "timedelta", "fields", "timedelta", "microseconds", "assert", "field", "serialize", "d5", "user", "86400000000", "user", "d6", "none", "assert", "field", "serialize", "d6", "user", "is", "none"], "doc_len": 248}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_datetime_list_field", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_datetime_list_field", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_datetime_list_field(self):\n        obj = DateTimeList([dt.datetime.utcnow(), dt.datetime.now()])\n        field = fields.List(fields.DateTime)\n        result = field.serialize('dtimes', obj)\n        assert all([type(each) == str for each in result])\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_datetime_list_field", "self", "obj", "datetimelist", "dt", "datetime", "utcnow", "dt", "datetime", "now", "field", "fields", "list", "fields", "datetime", "result", "field", "serialize", "dtimes", "obj", "assert", "all", "type", "each", "str", "for", "each", "in", "result"], "doc_len": 34}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_list_field_with_error", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_list_field_with_error", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_list_field_with_error(self):\n        obj = DateTimeList(['invaliddate'])\n        field = fields.List(fields.DateTime)\n        with pytest.raises(ValidationError):\n            field.serialize('dtimes', obj)\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_list_field_with_error", "self", "obj", "datetimelist", "invaliddate", "field", "fields", "list", "fields", "datetime", "with", "pytest", "raises", "validationerror", "field", "serialize", "dtimes", "obj"], "doc_len": 23}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_datetime_list_serialize_single_value", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_datetime_list_serialize_single_value", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_datetime_list_serialize_single_value(self):\n        obj = DateTimeList(dt.datetime.utcnow())\n        field = fields.List(fields.DateTime)\n        result = field.serialize('dtimes', obj)\n        assert len(result) == 1\n        assert type(result[0]) == str\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_datetime_list_serialize_single_value", "self", "obj", "datetimelist", "dt", "datetime", "utcnow", "field", "fields", "list", "fields", "datetime", "result", "field", "serialize", "dtimes", "obj", "assert", "len", "result", "1", "assert", "type", "result", "0", "str"], "doc_len": 31}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_list_field_serialize_none_returns_none", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_list_field_serialize_none_returns_none", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_list_field_serialize_none_returns_none(self):\n        obj = DateTimeList(None)\n        field = fields.List(fields.DateTime)\n        assert field.serialize('dtimes', obj) is None\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_list_field_serialize_none_returns_none", "self", "obj", "datetimelist", "none", "field", "fields", "list", "fields", "datetime", "assert", "field", "serialize", "dtimes", "obj", "is", "none"], "doc_len": 22}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_list_field_respect_inner_attribute", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_list_field_respect_inner_attribute", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_list_field_respect_inner_attribute(self):\n        now = dt.datetime.now()\n        obj = DateTimeList([now])\n        field = fields.List(fields.Int(attribute='day'))\n        assert field.serialize('dtimes', obj) == [now.day]\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_list_field_respect_inner_attribute", "self", "now", "dt", "datetime", "now", "obj", "datetimelist", "now", "field", "fields", "list", "fields", "int", "attribute", "day", "assert", "field", "serialize", "dtimes", "obj", "now", "day"], "doc_len": 28}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_list_field_respect_inner_attribute_single_value", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_list_field_respect_inner_attribute_single_value", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_list_field_respect_inner_attribute_single_value(self):\n        now = dt.datetime.now()\n        obj = DateTimeList(now)\n        field = fields.List(fields.Int(attribute='day'))\n        assert field.serialize('dtimes', obj) == [now.day]\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_list_field_respect_inner_attribute_single_value", "self", "now", "dt", "datetime", "now", "obj", "datetimelist", "now", "field", "fields", "list", "fields", "int", "attribute", "day", "assert", "field", "serialize", "dtimes", "obj", "now", "day"], "doc_len": 28}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_list_field_work_with_generator_single_value", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_list_field_work_with_generator_single_value", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_list_field_work_with_generator_single_value(self):\n        def custom_generator():\n            yield dt.datetime.utcnow()\n        obj = DateTimeList(custom_generator())\n        field = fields.List(fields.DateTime)\n        result = field.serialize('dtimes', obj)\n        assert len(result) == 1\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_list_field_work_with_generator_single_value", "self", "def", "custom_generator", "yield", "dt", "datetime", "utcnow", "obj", "datetimelist", "custom_generator", "field", "fields", "list", "fields", "datetime", "result", "field", "serialize", "dtimes", "obj", "assert", "len", "result", "1"], "doc_len": 30}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_list_field_work_with_generators_multiple_values", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_list_field_work_with_generators_multiple_values", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_list_field_work_with_generators_multiple_values(self):\n        def custom_generator():\n            for dtime in [dt.datetime.utcnow(), dt.datetime.now()]:\n                yield dtime\n        obj = DateTimeList(custom_generator())\n        field = fields.List(fields.DateTime)\n        result = field.serialize('dtimes', obj)\n        assert len(result) == 2\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_list_field_work_with_generators_multiple_values", "self", "def", "custom_generator", "for", "dtime", "in", "dt", "datetime", "utcnow", "dt", "datetime", "now", "yield", "dtime", "obj", "datetimelist", "custom_generator", "field", "fields", "list", "fields", "datetime", "result", "field", "serialize", "dtimes", "obj", "assert", "len", "result", "2"], "doc_len": 37}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_list_field_work_with_generators_error", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_list_field_work_with_generators_error", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_list_field_work_with_generators_error(self):\n        def custom_generator():\n            for dtime in [dt.datetime.utcnow(), \"m\", dt.datetime.now()]:\n                yield dtime\n        obj = DateTimeList(custom_generator())\n        field = fields.List(fields.DateTime)\n        with pytest.raises(ValidationError):\n            field.serialize('dtimes', obj)\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_list_field_work_with_generators_error", "self", "def", "custom_generator", "for", "dtime", "in", "dt", "datetime", "utcnow", "m", "dt", "datetime", "now", "yield", "dtime", "obj", "datetimelist", "custom_generator", "field", "fields", "list", "fields", "datetime", "with", "pytest", "raises", "validationerror", "field", "serialize", "dtimes", "obj"], "doc_len": 37}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_list_field_work_with_generators_empty_generator_returns_none_for_every_non_returning_yield_statement", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_list_field_work_with_generators_empty_generator_returns_none_for_every_non_returning_yield_statement", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_list_field_work_with_generators_empty_generator_returns_none_for_every_non_returning_yield_statement(self):\n        def custom_generator():\n            a = yield\n            yield\n        obj = DateTimeList(custom_generator())\n        field = fields.List(fields.DateTime, allow_none=True)\n        result = field.serialize('dtimes', obj)\n        assert len(result) == 2\n        assert result[0] is None\n        assert result[1] is None\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_list_field_work_with_generators_empty_generator_returns_none_for_every_non_returning_yield_statement", "self", "def", "custom_generator", "a", "yield", "yield", "obj", "datetimelist", "custom_generator", "field", "fields", "list", "fields", "datetime", "allow_none", "true", "result", "field", "serialize", "dtimes", "obj", "assert", "len", "result", "2", "assert", "result", "0", "is", "none", "assert", "result", "1", "is", "none"], "doc_len": 41}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_list_field_work_with_set", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_list_field_work_with_set", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_list_field_work_with_set(self):\n        custom_set = set([1, 2, 3])\n        obj = IntegerList(custom_set)\n        field = fields.List(fields.Int)\n        result = field.serialize(\"ints\", obj)\n        assert len(result) == 3\n        assert 1 in result\n        assert 2 in result\n        assert 3 in result\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_list_field_work_with_set", "self", "custom_set", "set", "1", "2", "3", "obj", "integerlist", "custom_set", "field", "fields", "list", "fields", "int", "result", "field", "serialize", "ints", "obj", "assert", "len", "result", "3", "assert", "1", "in", "result", "assert", "2", "in", "result", "assert", "3", "in", "result"], "doc_len": 41}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_list_field_work_with_custom_class_with_iterator_protocol", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_list_field_work_with_custom_class_with_iterator_protocol", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_list_field_work_with_custom_class_with_iterator_protocol(self):\n        class IteratorSupportingClass:\n            def __init__(self, iterable):\n                self.iterable = iterable\n\n            def __iter__(self):\n                return iter(self.iterable)\n\n        ints = IteratorSupportingClass([1, 2, 3])\n        obj = IntegerList(ints)\n        field = fields.List(fields.Int)\n        result = field.serialize(\"ints\", obj)\n        assert len(result) == 3\n        assert result[0] == 1\n        assert result[1] == 2\n        assert result[2] == 3\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_list_field_work_with_custom_class_with_iterator_protocol", "self", "class", "iteratorsupportingclass", "def", "__init__", "self", "iterable", "self", "iterable", "iterable", "def", "__iter__", "self", "return", "iter", "self", "iterable", "ints", "iteratorsupportingclass", "1", "2", "3", "obj", "integerlist", "ints", "field", "fields", "list", "fields", "int", "result", "field", "serialize", "ints", "obj", "assert", "len", "result", "3", "assert", "result", "0", "1", "assert", "result", "1", "2", "assert", "result", "2", "3"], "doc_len": 57}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_bad_list_field", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_bad_list_field", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_bad_list_field(self):\n        class ASchema(Schema):\n            id = fields.Int()\n        with pytest.raises(ValueError):\n            fields.List(\"string\")\n        expected_msg = ('The type of the list elements must be a subclass '\n                'of marshmallow.base.FieldABC')\n        with pytest.raises(ValueError, match=expected_msg):\n            fields.List(ASchema)\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_bad_list_field", "self", "class", "aschema", "schema", "id", "fields", "int", "with", "pytest", "raises", "valueerror", "fields", "list", "string", "expected_msg", "the", "type", "of", "the", "list", "elements", "must", "be", "a", "subclass", "of", "marshmallow", "base", "fieldabc", "with", "pytest", "raises", "valueerror", "match", "expected_msg", "fields", "list", "aschema"], "doc_len": 44}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_serialize_does_not_apply_validators", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_serialize_does_not_apply_validators", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_serialize_does_not_apply_validators(self, user):\n        field = fields.Field(validate=lambda x: False)\n        # No validation error raised\n        assert field.serialize('age', user) == user.age\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_serialize_does_not_apply_validators", "self", "user", "field", "fields", "field", "validate", "lambda", "x", "false", "no", "validation", "error", "raised", "assert", "field", "serialize", "age", "user", "user", "age"], "doc_len": 26}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_constant_field_serialization", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_constant_field_serialization", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_constant_field_serialization(self, user):\n        field = fields.Constant('something')\n        assert field.serialize('whatever', user) == 'something'\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_constant_field_serialization", "self", "user", "field", "fields", "constant", "something", "assert", "field", "serialize", "whatever", "user", "something"], "doc_len": 18}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_constant_is_always_included_in_serialized_data", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_constant_is_always_included_in_serialized_data", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_constant_is_always_included_in_serialized_data(self):\n\n        class MySchema(Schema):\n            foo = fields.Constant(42)\n\n        sch = MySchema()\n        assert sch.dump({'bar': 24}).data['foo'] == 42\n        assert sch.dump({'foo': 24}).data['foo'] == 42\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_constant_is_always_included_in_serialized_data", "self", "class", "myschema", "schema", "foo", "fields", "constant", "42", "sch", "myschema", "assert", "sch", "dump", "bar", "24", "data", "foo", "42", "assert", "sch", "dump", "foo", "24", "data", "foo", "42"], "doc_len": 32}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_constant_field_serialize_when_omitted", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_constant_field_serialize_when_omitted", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_constant_field_serialize_when_omitted(self):\n        class MiniUserSchema(Schema):\n            name = fields.Constant('bill')\n\n        s = MiniUserSchema()\n        assert s.dump({}).data['name'] == 'bill'\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_constant_field_serialize_when_omitted", "self", "class", "miniuserschema", "schema", "name", "fields", "constant", "bill", "s", "miniuserschema", "assert", "s", "dump", "data", "name", "bill"], "doc_len": 22}
{"doc_id": "tests/test_serialization.py::TestFieldSerialization.test_all_fields_serialize_none_to_none", "file_path": "tests/test_serialization.py", "class_name": "TestFieldSerialization", "func_name": "test_all_fields_serialize_none_to_none", "text": "文件路径: tests/test_serialization.py, 类名: TestFieldSerialization\n    def test_all_fields_serialize_none_to_none(self, FieldClass):\n        if FieldClass == fields.FormattedString:\n            field = FieldClass('{foo}', allow_none=True)\n        else:\n            field = FieldClass(allow_none=True)\n\n        res = field.serialize('foo', {'foo': None})\n        if FieldClass == fields.FormattedString:\n            assert res == 'None'\n        else:\n            assert res is None\n", "tokens": ["tests", "test_serialization", "py", "testfieldserialization", "def", "test_all_fields_serialize_none_to_none", "self", "fieldclass", "if", "fieldclass", "fields", "formattedstring", "field", "fieldclass", "foo", "allow_none", "true", "else", "field", "fieldclass", "allow_none", "true", "res", "field", "serialize", "foo", "foo", "none", "if", "fieldclass", "fields", "formattedstring", "assert", "res", "none", "else", "assert", "res", "is", "none"], "doc_len": 40}
{"doc_id": "tests/test_serialization.py::test_serializing_named_tuple", "file_path": "tests/test_serialization.py", "class_name": null, "func_name": "test_serializing_named_tuple", "text": "文件路径: tests/test_serialization.py\ndef test_serializing_named_tuple():\n    Point = namedtuple('Point', ['x', 'y'])\n\n    field = fields.Field()\n\n    p = Point(x=4, y=2)\n\n    assert field.serialize('x', p) == 4\n", "tokens": ["tests", "test_serialization", "py", "def", "test_serializing_named_tuple", "point", "namedtuple", "point", "x", "y", "field", "fields", "field", "p", "point", "x", "4", "y", "2", "assert", "field", "serialize", "x", "p", "4"], "doc_len": 25}
{"doc_id": "tests/test_serialization.py::test_serializing_named_tuple_with_meta", "file_path": "tests/test_serialization.py", "class_name": null, "func_name": "test_serializing_named_tuple_with_meta", "text": "文件路径: tests/test_serialization.py\ndef test_serializing_named_tuple_with_meta():\n    Point = namedtuple('Point', ['x', 'y'])\n    p = Point(x=4, y=2)\n\n    class PointSerializer(Schema):\n        class Meta:\n            fields = ('x', 'y')\n\n    serialized = PointSerializer().dump(p)\n    assert serialized.data['x'] == 4\n    assert serialized.data['y'] == 2\n", "tokens": ["tests", "test_serialization", "py", "def", "test_serializing_named_tuple_with_meta", "point", "namedtuple", "point", "x", "y", "p", "point", "x", "4", "y", "2", "class", "pointserializer", "schema", "class", "meta", "fields", "x", "y", "serialized", "pointserializer", "dump", "p", "assert", "serialized", "data", "x", "4", "assert", "serialized", "data", "y", "2"], "doc_len": 38}
{"doc_id": "tests/test_serialization.py::test_serializing_slice", "file_path": "tests/test_serialization.py", "class_name": null, "func_name": "test_serializing_slice", "text": "文件路径: tests/test_serialization.py\ndef test_serializing_slice():\n    values = [{'value': value} for value in range(5)]\n    slice = itertools.islice(values, None)\n\n    class ValueSchema(Schema):\n        value = fields.Int()\n\n    serialized = ValueSchema(many=True).dump(slice).data\n    assert serialized == values\n", "tokens": ["tests", "test_serialization", "py", "def", "test_serializing_slice", "values", "value", "value", "for", "value", "in", "range", "5", "slice", "itertools", "islice", "values", "none", "class", "valueschema", "schema", "value", "fields", "int", "serialized", "valueschema", "many", "true", "dump", "slice", "data", "assert", "serialized", "values"], "doc_len": 34}
{"doc_id": "tests/test_serialization.py::test_nested_field_many_serializing_generator", "file_path": "tests/test_serialization.py", "class_name": null, "func_name": "test_nested_field_many_serializing_generator", "text": "文件路径: tests/test_serialization.py\ndef test_nested_field_many_serializing_generator():\n    class MySchema(Schema):\n        name = fields.Str()\n\n    class OtherSchema(Schema):\n        objects = fields.Nested(MySchema, many=True)\n\n    def gen():\n        yield {'name': 'foo'}\n        yield {'name': 'bar'}\n\n    obj = {'objects': gen()}\n    data, _ = OtherSchema().dump(obj)\n\n    assert data.get('objects') == [{'name': 'foo'}, {'name': 'bar'}]\n", "tokens": ["tests", "test_serialization", "py", "def", "test_nested_field_many_serializing_generator", "class", "myschema", "schema", "name", "fields", "str", "class", "otherschema", "schema", "objects", "fields", "nested", "myschema", "many", "true", "def", "gen", "yield", "name", "foo", "yield", "name", "bar", "obj", "objects", "gen", "data", "_", "otherschema", "dump", "obj", "assert", "data", "get", "objects", "name", "foo", "name", "bar"], "doc_len": 44}
{"doc_id": "tests/test_utils.py::test_missing_singleton_copy", "file_path": "tests/test_utils.py", "class_name": null, "func_name": "test_missing_singleton_copy", "text": "文件路径: tests/test_utils.py\ndef test_missing_singleton_copy():\n    assert copy(utils.missing) is utils.missing\n    assert deepcopy(utils.missing) is utils.missing\n", "tokens": ["tests", "test_utils", "py", "def", "test_missing_singleton_copy", "assert", "copy", "utils", "missing", "is", "utils", "missing", "assert", "deepcopy", "utils", "missing", "is", "utils", "missing"], "doc_len": 19}
{"doc_id": "tests/test_utils.py::test_to_marshallable_type", "file_path": "tests/test_utils.py", "class_name": null, "func_name": "test_to_marshallable_type", "text": "文件路径: tests/test_utils.py\ndef test_to_marshallable_type():\n    class Foo(object):\n        CLASS_VAR = 'bar'\n\n        def __init__(self):\n            self.attribute = 'baz'\n\n        @property\n        def prop(self):\n            return 42\n\n    obj = Foo()\n    u_dict = utils.to_marshallable_type(obj)\n    assert u_dict['CLASS_VAR'] == Foo.CLASS_VAR\n    assert u_dict['attribute'] == obj.attribute\n    assert u_dict['prop'] == obj.prop\n", "tokens": ["tests", "test_utils", "py", "def", "test_to_marshallable_type", "class", "foo", "object", "class_var", "bar", "def", "__init__", "self", "self", "attribute", "baz", "property", "def", "prop", "self", "return", "42", "obj", "foo", "u_dict", "utils", "to_marshallable_type", "obj", "assert", "u_dict", "class_var", "foo", "class_var", "assert", "u_dict", "attribute", "obj", "attribute", "assert", "u_dict", "prop", "obj", "prop"], "doc_len": 43}
{"doc_id": "tests/test_utils.py::test_to_marshallable_type_none", "file_path": "tests/test_utils.py", "class_name": null, "func_name": "test_to_marshallable_type_none", "text": "文件路径: tests/test_utils.py\ndef test_to_marshallable_type_none():\n    assert utils.to_marshallable_type(None) is None\n", "tokens": ["tests", "test_utils", "py", "def", "test_to_marshallable_type_none", "assert", "utils", "to_marshallable_type", "none", "is", "none"], "doc_len": 11}
{"doc_id": "tests/test_utils.py::test_to_marshallable_type_with_namedtuple", "file_path": "tests/test_utils.py", "class_name": null, "func_name": "test_to_marshallable_type_with_namedtuple", "text": "文件路径: tests/test_utils.py\ndef test_to_marshallable_type_with_namedtuple():\n    p = PointNT(24, 42)\n    result = utils.to_marshallable_type(p)\n    assert result['x'] == p.x\n    assert result['y'] == p.y\n", "tokens": ["tests", "test_utils", "py", "def", "test_to_marshallable_type_with_namedtuple", "p", "pointnt", "24", "42", "result", "utils", "to_marshallable_type", "p", "assert", "result", "x", "p", "x", "assert", "result", "y", "p", "y"], "doc_len": 23}
{"doc_id": "tests/test_utils.py::PointClass.__init__", "file_path": "tests/test_utils.py", "class_name": "PointClass", "func_name": "__init__", "text": "文件路径: tests/test_utils.py, 类名: PointClass\n    def __init__(self, x, y):\n        self.x = x\n        self.y = y\n", "tokens": ["tests", "test_utils", "py", "pointclass", "def", "__init__", "self", "x", "y", "self", "x", "x", "self", "y", "y"], "doc_len": 15}
{"doc_id": "tests/test_utils.py::test_get_value_from_object", "file_path": "tests/test_utils.py", "class_name": null, "func_name": "test_get_value_from_object", "text": "文件路径: tests/test_utils.py\ndef test_get_value_from_object(obj):\n    result = utils.get_value('x', obj)\n    assert result == 24\n    result2 = utils.get_value('y', obj)\n    assert result2 == 42\n", "tokens": ["tests", "test_utils", "py", "def", "test_get_value_from_object", "obj", "result", "utils", "get_value", "x", "obj", "assert", "result", "24", "result2", "utils", "get_value", "y", "obj", "assert", "result2", "42"], "doc_len": 22}
{"doc_id": "tests/test_utils.py::test_get_value_from_namedtuple_with_default", "file_path": "tests/test_utils.py", "class_name": null, "func_name": "test_get_value_from_namedtuple_with_default", "text": "文件路径: tests/test_utils.py\ndef test_get_value_from_namedtuple_with_default():\n    p = PointNT(x=42, y=None)\n    # Default is only returned if key is not found\n    assert utils.get_value('z', p, default=123) == 123\n    # since 'y' is an attribute, None is returned instead of the default\n    assert utils.get_value('y', p, default=123) is None\n", "tokens": ["tests", "test_utils", "py", "def", "test_get_value_from_namedtuple_with_default", "p", "pointnt", "x", "42", "y", "none", "default", "is", "only", "returned", "if", "key", "is", "not", "found", "assert", "utils", "get_value", "z", "p", "default", "123", "123", "since", "y", "is", "an", "attribute", "none", "is", "returned", "instead", "of", "the", "default", "assert", "utils", "get_value", "y", "p", "default", "123", "is", "none"], "doc_len": 49}
{"doc_id": "tests/test_utils.py::Triangle.__init__", "file_path": "tests/test_utils.py", "class_name": "Triangle", "func_name": "__init__", "text": "文件路径: tests/test_utils.py, 类名: Triangle\n    def __init__(self, p1, p2, p3):\n        self.p1 = p1\n        self.p2 = p2\n        self.p3 = p3\n        self.points = [p1, p2, p3]\n", "tokens": ["tests", "test_utils", "py", "triangle", "def", "__init__", "self", "p1", "p2", "p3", "self", "p1", "p1", "self", "p2", "p2", "self", "p3", "p3", "self", "points", "p1", "p2", "p3"], "doc_len": 24}
{"doc_id": "tests/test_utils.py::test_get_value_for_nested_object", "file_path": "tests/test_utils.py", "class_name": null, "func_name": "test_get_value_for_nested_object", "text": "文件路径: tests/test_utils.py\ndef test_get_value_for_nested_object():\n    tri = Triangle(p1=PointClass(1, 2), p2=PointNT(3, 4), p3={'x': 5, 'y': 6})\n    assert utils.get_value('p1.x', tri) == 1\n    assert utils.get_value('p2.x', tri) == 3\n    assert utils.get_value('p3.x', tri) == 5\n", "tokens": ["tests", "test_utils", "py", "def", "test_get_value_for_nested_object", "tri", "triangle", "p1", "pointclass", "1", "2", "p2", "pointnt", "3", "4", "p3", "x", "5", "y", "6", "assert", "utils", "get_value", "p1", "x", "tri", "1", "assert", "utils", "get_value", "p2", "x", "tri", "3", "assert", "utils", "get_value", "p3", "x", "tri", "5"], "doc_len": 41}
{"doc_id": "tests/test_utils.py::test_get_value_from_dict", "file_path": "tests/test_utils.py", "class_name": null, "func_name": "test_get_value_from_dict", "text": "文件路径: tests/test_utils.py\ndef test_get_value_from_dict():\n    d = dict(items=['foo', 'bar'], keys=['baz', 'quux'])\n    assert utils.get_value('items', d) == ['foo', 'bar']\n    assert utils.get_value('keys', d) == ['baz', 'quux']\n", "tokens": ["tests", "test_utils", "py", "def", "test_get_value_from_dict", "d", "dict", "items", "foo", "bar", "keys", "baz", "quux", "assert", "utils", "get_value", "items", "d", "foo", "bar", "assert", "utils", "get_value", "keys", "d", "baz", "quux"], "doc_len": 27}
{"doc_id": "tests/test_utils.py::test_get_value", "file_path": "tests/test_utils.py", "class_name": null, "func_name": "test_get_value", "text": "文件路径: tests/test_utils.py\ndef test_get_value():\n    l = [1, 2, 3]\n    assert utils.get_value(1, l) == 2\n\n    class MyInt(int):\n        pass\n\n    assert utils.get_value(MyInt(1), l) == 2\n", "tokens": ["tests", "test_utils", "py", "def", "test_get_value", "l", "1", "2", "3", "assert", "utils", "get_value", "1", "l", "2", "class", "myint", "int", "pass", "assert", "utils", "get_value", "myint", "1", "l", "2"], "doc_len": 26}
{"doc_id": "tests/test_utils.py::test_set_value", "file_path": "tests/test_utils.py", "class_name": null, "func_name": "test_set_value", "text": "文件路径: tests/test_utils.py\ndef test_set_value():\n    d = {}\n    utils.set_value(d, 'foo', 42)\n    assert d == {'foo': 42}\n\n    d = {}\n    utils.set_value(d, 'foo.bar', 42)\n    assert d == {'foo': {'bar': 42}}\n\n    d = {'foo': {}}\n    utils.set_value(d, 'foo.bar', 42)\n    assert d == {'foo': {'bar': 42}}\n\n    d = {'foo': 42}\n    with pytest.raises(ValueError):\n        utils.set_value(d, 'foo.bar', 42)\n", "tokens": ["tests", "test_utils", "py", "def", "test_set_value", "d", "utils", "set_value", "d", "foo", "42", "assert", "d", "foo", "42", "d", "utils", "set_value", "d", "foo", "bar", "42", "assert", "d", "foo", "bar", "42", "d", "foo", "utils", "set_value", "d", "foo", "bar", "42", "assert", "d", "foo", "bar", "42", "d", "foo", "42", "with", "pytest", "raises", "valueerror", "utils", "set_value", "d", "foo", "bar", "42"], "doc_len": 53}
{"doc_id": "tests/test_utils.py::test_is_keyed_tuple", "file_path": "tests/test_utils.py", "class_name": null, "func_name": "test_is_keyed_tuple", "text": "文件路径: tests/test_utils.py\ndef test_is_keyed_tuple():\n    Point = namedtuple('Point', ['x', 'y'])\n    p = Point(24, 42)\n    assert utils.is_keyed_tuple(p) is True\n    t = (24, 42)\n    assert utils.is_keyed_tuple(t) is False\n    d = {'x': 42, 'y': 24}\n    assert utils.is_keyed_tuple(d) is False\n    s = 'xy'\n    assert utils.is_keyed_tuple(s) is False\n    l = [24, 42]\n    assert utils.is_keyed_tuple(l) is False\n", "tokens": ["tests", "test_utils", "py", "def", "test_is_keyed_tuple", "point", "namedtuple", "point", "x", "y", "p", "point", "24", "42", "assert", "utils", "is_keyed_tuple", "p", "is", "true", "t", "24", "42", "assert", "utils", "is_keyed_tuple", "t", "is", "false", "d", "x", "42", "y", "24", "assert", "utils", "is_keyed_tuple", "d", "is", "false", "s", "xy", "assert", "utils", "is_keyed_tuple", "s", "is", "false", "l", "24", "42", "assert", "utils", "is_keyed_tuple", "l", "is", "false"], "doc_len": 57}
{"doc_id": "tests/test_utils.py::test_to_marshallable_type_list", "file_path": "tests/test_utils.py", "class_name": null, "func_name": "test_to_marshallable_type_list", "text": "文件路径: tests/test_utils.py\ndef test_to_marshallable_type_list():\n    assert utils.to_marshallable_type(['foo', 'bar']) == ['foo', 'bar']\n", "tokens": ["tests", "test_utils", "py", "def", "test_to_marshallable_type_list", "assert", "utils", "to_marshallable_type", "foo", "bar", "foo", "bar"], "doc_len": 12}
{"doc_id": "tests/test_utils.py::test_to_marshallable_type_generator", "file_path": "tests/test_utils.py", "class_name": null, "func_name": "test_to_marshallable_type_generator", "text": "文件路径: tests/test_utils.py\ndef test_to_marshallable_type_generator():\n    gen = (e for e in ['foo', 'bar'])\n    assert utils.to_marshallable_type(gen) == ['foo', 'bar']\n", "tokens": ["tests", "test_utils", "py", "def", "test_to_marshallable_type_generator", "gen", "e", "for", "e", "in", "foo", "bar", "assert", "utils", "to_marshallable_type", "gen", "foo", "bar"], "doc_len": 18}
{"doc_id": "tests/test_utils.py::test_marshallable", "file_path": "tests/test_utils.py", "class_name": null, "func_name": "test_marshallable", "text": "文件路径: tests/test_utils.py\ndef test_marshallable():\n    class ObjContainer(object):\n        contained = {\"foo\": 1}\n\n        def __marshallable__(self):\n            return self.contained\n\n    obj = ObjContainer()\n    assert utils.to_marshallable_type(obj) == {\"foo\": 1}\n", "tokens": ["tests", "test_utils", "py", "def", "test_marshallable", "class", "objcontainer", "object", "contained", "foo", "1", "def", "__marshallable__", "self", "return", "self", "contained", "obj", "objcontainer", "assert", "utils", "to_marshallable_type", "obj", "foo", "1"], "doc_len": 25}
{"doc_id": "tests/test_utils.py::test_is_collection", "file_path": "tests/test_utils.py", "class_name": null, "func_name": "test_is_collection", "text": "文件路径: tests/test_utils.py\ndef test_is_collection():\n    assert utils.is_collection([1, 'foo', {}]) is True\n    assert utils.is_collection(('foo', 2.3)) is True\n    assert utils.is_collection({'foo': 'bar'}) is False\n", "tokens": ["tests", "test_utils", "py", "def", "test_is_collection", "assert", "utils", "is_collection", "1", "foo", "is", "true", "assert", "utils", "is_collection", "foo", "2", "3", "is", "true", "assert", "utils", "is_collection", "foo", "bar", "is", "false"], "doc_len": 27}
{"doc_id": "tests/test_utils.py::test_rfcformat_gmt_naive", "file_path": "tests/test_utils.py", "class_name": null, "func_name": "test_rfcformat_gmt_naive", "text": "文件路径: tests/test_utils.py\ndef test_rfcformat_gmt_naive():\n    d = dt.datetime(2013, 11, 10, 1, 23, 45)\n    assert utils.rfcformat(d) == \"Sun, 10 Nov 2013 01:23:45 -0000\"\n", "tokens": ["tests", "test_utils", "py", "def", "test_rfcformat_gmt_naive", "d", "dt", "datetime", "2013", "11", "10", "1", "23", "45", "assert", "utils", "rfcformat", "d", "sun", "10", "nov", "2013", "01", "23", "45", "0000"], "doc_len": 26}
{"doc_id": "tests/test_utils.py::test_rfcformat_central", "file_path": "tests/test_utils.py", "class_name": null, "func_name": "test_rfcformat_central", "text": "文件路径: tests/test_utils.py\ndef test_rfcformat_central():\n    d = central.localize(dt.datetime(2013, 11, 10, 1, 23, 45), is_dst=False)\n    assert utils.rfcformat(d) == 'Sun, 10 Nov 2013 07:23:45 -0000'\n", "tokens": ["tests", "test_utils", "py", "def", "test_rfcformat_central", "d", "central", "localize", "dt", "datetime", "2013", "11", "10", "1", "23", "45", "is_dst", "false", "assert", "utils", "rfcformat", "d", "sun", "10", "nov", "2013", "07", "23", "45", "0000"], "doc_len": 30}
{"doc_id": "tests/test_utils.py::test_rfcformat_central_localized", "file_path": "tests/test_utils.py", "class_name": null, "func_name": "test_rfcformat_central_localized", "text": "文件路径: tests/test_utils.py\ndef test_rfcformat_central_localized():\n    d = central.localize(dt.datetime(2013, 11, 10, 8, 23, 45), is_dst=False)\n    assert utils.rfcformat(d, localtime=True) == \"Sun, 10 Nov 2013 08:23:45 -0600\"\n", "tokens": ["tests", "test_utils", "py", "def", "test_rfcformat_central_localized", "d", "central", "localize", "dt", "datetime", "2013", "11", "10", "8", "23", "45", "is_dst", "false", "assert", "utils", "rfcformat", "d", "localtime", "true", "sun", "10", "nov", "2013", "08", "23", "45", "0600"], "doc_len": 32}
{"doc_id": "tests/test_utils.py::test_isoformat", "file_path": "tests/test_utils.py", "class_name": null, "func_name": "test_isoformat", "text": "文件路径: tests/test_utils.py\ndef test_isoformat():\n    d = dt.datetime(2013, 11, 10, 1, 23, 45)\n    assert utils.isoformat(d) == '2013-11-10T01:23:45+00:00'\n", "tokens": ["tests", "test_utils", "py", "def", "test_isoformat", "d", "dt", "datetime", "2013", "11", "10", "1", "23", "45", "assert", "utils", "isoformat", "d", "2013", "11", "10t01", "23", "45", "00", "00"], "doc_len": 25}
{"doc_id": "tests/test_utils.py::test_isoformat_tzaware", "file_path": "tests/test_utils.py", "class_name": null, "func_name": "test_isoformat_tzaware", "text": "文件路径: tests/test_utils.py\ndef test_isoformat_tzaware():\n    d = central.localize(dt.datetime(2013, 11, 10, 1, 23, 45), is_dst=False)\n    assert utils.isoformat(d) == \"2013-11-10T07:23:45+00:00\"\n", "tokens": ["tests", "test_utils", "py", "def", "test_isoformat_tzaware", "d", "central", "localize", "dt", "datetime", "2013", "11", "10", "1", "23", "45", "is_dst", "false", "assert", "utils", "isoformat", "d", "2013", "11", "10t07", "23", "45", "00", "00"], "doc_len": 29}
{"doc_id": "tests/test_utils.py::test_isoformat_localtime", "file_path": "tests/test_utils.py", "class_name": null, "func_name": "test_isoformat_localtime", "text": "文件路径: tests/test_utils.py\ndef test_isoformat_localtime():\n    d = central.localize(dt.datetime(2013, 11, 10, 1, 23, 45), is_dst=False)\n    assert utils.isoformat(d, localtime=True) == \"2013-11-10T01:23:45-06:00\"\n", "tokens": ["tests", "test_utils", "py", "def", "test_isoformat_localtime", "d", "central", "localize", "dt", "datetime", "2013", "11", "10", "1", "23", "45", "is_dst", "false", "assert", "utils", "isoformat", "d", "localtime", "true", "2013", "11", "10t01", "23", "45", "06", "00"], "doc_len": 31}
{"doc_id": "tests/test_utils.py::test_from_datestring", "file_path": "tests/test_utils.py", "class_name": null, "func_name": "test_from_datestring", "text": "文件路径: tests/test_utils.py\ndef test_from_datestring():\n    d = dt.datetime.now()\n    rfc = utils.rfcformat(d)\n    iso = d.isoformat()\n    assert_date_equal(utils.from_datestring(rfc), d)\n    assert_date_equal(utils.from_datestring(iso), d)\n", "tokens": ["tests", "test_utils", "py", "def", "test_from_datestring", "d", "dt", "datetime", "now", "rfc", "utils", "rfcformat", "d", "iso", "d", "isoformat", "assert_date_equal", "utils", "from_datestring", "rfc", "d", "assert_date_equal", "utils", "from_datestring", "iso", "d"], "doc_len": 26}
{"doc_id": "tests/test_utils.py::test_from_rfc", "file_path": "tests/test_utils.py", "class_name": null, "func_name": "test_from_rfc", "text": "文件路径: tests/test_utils.py\ndef test_from_rfc(use_dateutil):\n    d = dt.datetime.now().replace(microsecond=0)\n    rfc = utils.rfcformat(d)\n    result = utils.from_rfc(rfc, use_dateutil=use_dateutil)\n    assert type(result) == dt.datetime\n    assert_datetime_equal(result, d)\n", "tokens": ["tests", "test_utils", "py", "def", "test_from_rfc", "use_dateutil", "d", "dt", "datetime", "now", "replace", "microsecond", "0", "rfc", "utils", "rfcformat", "d", "result", "utils", "from_rfc", "rfc", "use_dateutil", "use_dateutil", "assert", "type", "result", "dt", "datetime", "assert_datetime_equal", "result", "d"], "doc_len": 31}
{"doc_id": "tests/test_utils.py::test_from_iso_datetime", "file_path": "tests/test_utils.py", "class_name": null, "func_name": "test_from_iso_datetime", "text": "文件路径: tests/test_utils.py\ndef test_from_iso_datetime(use_dateutil, timezone):\n    d = dt.datetime.now(tz=timezone)\n    formatted = d.isoformat()\n    result = utils.from_iso(formatted, use_dateutil=use_dateutil)\n    assert type(result) == dt.datetime\n    assert_datetime_equal(result, d)\n\n    # Test with 3-digit only microseconds\n    # Regression test for https://github.com/marshmallow-code/marshmallow/issues/1251\n    d = dt.datetime.now(tz=timezone).replace(microsecond=123000)\n    formatted = d.isoformat()\n    formatted = formatted[:23] + formatted[26:]\n    result = utils.from_iso(formatted, use_dateutil=use_dateutil)\n    assert type(result) == dt.datetime\n    assert_datetime_equal(result, d)\n", "tokens": ["tests", "test_utils", "py", "def", "test_from_iso_datetime", "use_dateutil", "timezone", "d", "dt", "datetime", "now", "tz", "timezone", "formatted", "d", "isoformat", "result", "utils", "from_iso", "formatted", "use_dateutil", "use_dateutil", "assert", "type", "result", "dt", "datetime", "assert_datetime_equal", "result", "d", "test", "with", "3", "digit", "only", "microseconds", "regression", "test", "for", "https", "github", "com", "marshmallow", "code", "marshmallow", "issues", "1251", "d", "dt", "datetime", "now", "tz", "timezone", "replace", "microsecond", "123000", "formatted", "d", "isoformat", "formatted", "formatted", "23", "formatted", "26", "result", "utils", "from_iso", "formatted", "use_dateutil", "use_dateutil", "assert", "type", "result", "dt", "datetime", "assert_datetime_equal", "result", "d"], "doc_len": 78}
{"doc_id": "tests/test_utils.py::test_from_iso_with_tz", "file_path": "tests/test_utils.py", "class_name": null, "func_name": "test_from_iso_with_tz", "text": "文件路径: tests/test_utils.py\ndef test_from_iso_with_tz():\n    d = central.localize(dt.datetime.now())\n    formatted = d.isoformat()\n    result = utils.from_iso(formatted)\n    assert_datetime_equal(result, d)\n    if utils.dateutil_available:\n        # Note a naive datetime\n        assert result.tzinfo is not None\n", "tokens": ["tests", "test_utils", "py", "def", "test_from_iso_with_tz", "d", "central", "localize", "dt", "datetime", "now", "formatted", "d", "isoformat", "result", "utils", "from_iso", "formatted", "assert_datetime_equal", "result", "d", "if", "utils", "dateutil_available", "note", "a", "naive", "datetime", "assert", "result", "tzinfo", "is", "not", "none"], "doc_len": 34}
{"doc_id": "tests/test_utils.py::test_from_iso_time_with_microseconds", "file_path": "tests/test_utils.py", "class_name": null, "func_name": "test_from_iso_time_with_microseconds", "text": "文件路径: tests/test_utils.py\ndef test_from_iso_time_with_microseconds(use_dateutil):\n    t = dt.time(1, 23, 45, 6789)\n    formatted = t.isoformat()\n    result = utils.from_iso_time(formatted, use_dateutil=use_dateutil)\n    assert type(result) == dt.time\n    assert_time_equal(result, t)\n", "tokens": ["tests", "test_utils", "py", "def", "test_from_iso_time_with_microseconds", "use_dateutil", "t", "dt", "time", "1", "23", "45", "6789", "formatted", "t", "isoformat", "result", "utils", "from_iso_time", "formatted", "use_dateutil", "use_dateutil", "assert", "type", "result", "dt", "time", "assert_time_equal", "result", "t"], "doc_len": 30}
{"doc_id": "tests/test_utils.py::test_from_iso_time_without_microseconds", "file_path": "tests/test_utils.py", "class_name": null, "func_name": "test_from_iso_time_without_microseconds", "text": "文件路径: tests/test_utils.py\ndef test_from_iso_time_without_microseconds(use_dateutil):\n    t = dt.time(1, 23, 45)\n    formatted = t.isoformat()\n    result = utils.from_iso_time(formatted, use_dateutil=use_dateutil)\n    assert type(result) == dt.time\n    assert_time_equal(result, t)\n", "tokens": ["tests", "test_utils", "py", "def", "test_from_iso_time_without_microseconds", "use_dateutil", "t", "dt", "time", "1", "23", "45", "formatted", "t", "isoformat", "result", "utils", "from_iso_time", "formatted", "use_dateutil", "use_dateutil", "assert", "type", "result", "dt", "time", "assert_time_equal", "result", "t"], "doc_len": 29}
{"doc_id": "tests/test_utils.py::test_from_iso_date", "file_path": "tests/test_utils.py", "class_name": null, "func_name": "test_from_iso_date", "text": "文件路径: tests/test_utils.py\ndef test_from_iso_date(use_dateutil):\n    d = dt.date(2014, 8, 21)\n    iso_date = d.isoformat()\n    result = utils.from_iso_date(iso_date, use_dateutil=use_dateutil)\n    assert type(result) == dt.date\n    assert_date_equal(result, d)\n", "tokens": ["tests", "test_utils", "py", "def", "test_from_iso_date", "use_dateutil", "d", "dt", "date", "2014", "8", "21", "iso_date", "d", "isoformat", "result", "utils", "from_iso_date", "iso_date", "use_dateutil", "use_dateutil", "assert", "type", "result", "dt", "date", "assert_date_equal", "result", "d"], "doc_len": 29}
{"doc_id": "tests/test_utils.py::test_get_func_args", "file_path": "tests/test_utils.py", "class_name": null, "func_name": "test_get_func_args", "text": "文件路径: tests/test_utils.py\ndef test_get_func_args():\n    def f1(self, foo, bar):\n        pass\n\n    f2 = partial(f1, 'baz')\n\n    class F3(object):\n        def __call__(self, foo, bar):\n            pass\n    f3 = F3()\n\n    for func in [f1, f2, f3]:\n        assert utils.get_func_args(func) == ['self', 'foo', 'bar']\n", "tokens": ["tests", "test_utils", "py", "def", "test_get_func_args", "def", "f1", "self", "foo", "bar", "pass", "f2", "partial", "f1", "baz", "class", "f3", "object", "def", "__call__", "self", "foo", "bar", "pass", "f3", "f3", "for", "func", "in", "f1", "f2", "f3", "assert", "utils", "get_func_args", "func", "self", "foo", "bar"], "doc_len": 39}
{"doc_id": "tests/test_utils.py::test_deprecated_warning", "file_path": "tests/test_utils.py", "class_name": null, "func_name": "test_deprecated_warning", "text": "文件路径: tests/test_utils.py\ndef test_deprecated_warning():\n    with pytest.warns(warnings.RemovedInMarshmallow3Warning):\n        utils.float_to_decimal(0.1337)\n", "tokens": ["tests", "test_utils", "py", "def", "test_deprecated_warning", "with", "pytest", "warns", "warnings", "removedinmarshmallow3warning", "utils", "float_to_decimal", "0", "1337"], "doc_len": 14}
{"doc_id": "tests/test_validate.py::test_url_absolute_valid", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_url_absolute_valid", "text": "文件路径: tests/test_validate.py\ndef test_url_absolute_valid(valid_url):\n    validator = validate.URL(relative=False)\n    assert validator(valid_url) == valid_url\n", "tokens": ["tests", "test_validate", "py", "def", "test_url_absolute_valid", "valid_url", "validator", "validate", "url", "relative", "false", "assert", "validator", "valid_url", "valid_url"], "doc_len": 15}
{"doc_id": "tests/test_validate.py::test_url_absolute_invalid", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_url_absolute_invalid", "text": "文件路径: tests/test_validate.py\ndef test_url_absolute_invalid(invalid_url):\n    validator = validate.URL(relative=False)\n    with pytest.raises(ValidationError):\n        validator(invalid_url)\n", "tokens": ["tests", "test_validate", "py", "def", "test_url_absolute_invalid", "invalid_url", "validator", "validate", "url", "relative", "false", "with", "pytest", "raises", "validationerror", "validator", "invalid_url"], "doc_len": 17}
{"doc_id": "tests/test_validate.py::test_url_relative_valid", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_url_relative_valid", "text": "文件路径: tests/test_validate.py\ndef test_url_relative_valid(valid_url):\n    validator = validate.URL(relative=True)\n    assert validator(valid_url) == valid_url\n", "tokens": ["tests", "test_validate", "py", "def", "test_url_relative_valid", "valid_url", "validator", "validate", "url", "relative", "true", "assert", "validator", "valid_url", "valid_url"], "doc_len": 15}
{"doc_id": "tests/test_validate.py::test_url_relative_invalid", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_url_relative_invalid", "text": "文件路径: tests/test_validate.py\ndef test_url_relative_invalid(invalid_url):\n    validator = validate.URL(relative=True)\n    with pytest.raises(ValidationError):\n        validator(invalid_url)\n", "tokens": ["tests", "test_validate", "py", "def", "test_url_relative_invalid", "invalid_url", "validator", "validate", "url", "relative", "true", "with", "pytest", "raises", "validationerror", "validator", "invalid_url"], "doc_len": 17}
{"doc_id": "tests/test_validate.py::test_url_dont_require_tld_valid", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_url_dont_require_tld_valid", "text": "文件路径: tests/test_validate.py\ndef test_url_dont_require_tld_valid(valid_url):\n    validator = validate.URL(require_tld=False)\n    assert validator(valid_url) == valid_url\n", "tokens": ["tests", "test_validate", "py", "def", "test_url_dont_require_tld_valid", "valid_url", "validator", "validate", "url", "require_tld", "false", "assert", "validator", "valid_url", "valid_url"], "doc_len": 15}
{"doc_id": "tests/test_validate.py::test_url_dont_require_tld_invalid", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_url_dont_require_tld_invalid", "text": "文件路径: tests/test_validate.py\ndef test_url_dont_require_tld_invalid(invalid_url):\n    validator = validate.URL(require_tld=False)\n    with pytest.raises(ValidationError):\n        validator(invalid_url)\n", "tokens": ["tests", "test_validate", "py", "def", "test_url_dont_require_tld_invalid", "invalid_url", "validator", "validate", "url", "require_tld", "false", "with", "pytest", "raises", "validationerror", "validator", "invalid_url"], "doc_len": 17}
{"doc_id": "tests/test_validate.py::test_url_custom_scheme", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_url_custom_scheme", "text": "文件路径: tests/test_validate.py\ndef test_url_custom_scheme():\n    validator = validate.URL()\n    # By default, ws not allowed\n    url = 'ws://test.test'\n    with pytest.raises(ValidationError):\n        validator(url)\n\n    validator = validate.URL(schemes=set(['http', 'https', 'ws']))\n    assert validator(url) == url\n", "tokens": ["tests", "test_validate", "py", "def", "test_url_custom_scheme", "validator", "validate", "url", "by", "default", "ws", "not", "allowed", "url", "ws", "test", "test", "with", "pytest", "raises", "validationerror", "validator", "url", "validator", "validate", "url", "schemes", "set", "http", "https", "ws", "assert", "validator", "url", "url"], "doc_len": 35}
{"doc_id": "tests/test_validate.py::test_url_relative_and_custom_schemes", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_url_relative_and_custom_schemes", "text": "文件路径: tests/test_validate.py\ndef test_url_relative_and_custom_schemes():\n    validator = validate.URL(relative=True)\n    # By default, ws not allowed\n    url = 'ws://test.test'\n    with pytest.raises(ValidationError):\n        validator(url)\n\n    validator = validate.URL(relative=True, schemes=set(['http', 'https', 'ws']))\n    assert validator(url) == url\n", "tokens": ["tests", "test_validate", "py", "def", "test_url_relative_and_custom_schemes", "validator", "validate", "url", "relative", "true", "by", "default", "ws", "not", "allowed", "url", "ws", "test", "test", "with", "pytest", "raises", "validationerror", "validator", "url", "validator", "validate", "url", "relative", "true", "schemes", "set", "http", "https", "ws", "assert", "validator", "url", "url"], "doc_len": 39}
{"doc_id": "tests/test_validate.py::test_url_custom_message", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_url_custom_message", "text": "文件路径: tests/test_validate.py\ndef test_url_custom_message():\n    validator = validate.URL(error=\"{input} ain't an URL\")\n    with pytest.raises(ValidationError, match=\"invalid ain't an URL\"):\n        validator('invalid')\n", "tokens": ["tests", "test_validate", "py", "def", "test_url_custom_message", "validator", "validate", "url", "error", "input", "ain", "t", "an", "url", "with", "pytest", "raises", "validationerror", "match", "invalid", "ain", "t", "an", "url", "validator", "invalid"], "doc_len": 26}
{"doc_id": "tests/test_validate.py::test_url_repr", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_url_repr", "text": "文件路径: tests/test_validate.py\ndef test_url_repr():\n    assert (\n        repr(validate.URL(relative=False, error=None)) ==\n        '<URL(relative=False, error={0!r})>'\n        .format('Not a valid URL.')\n    )\n    assert (\n        repr(validate.URL(relative=True, error='foo')) ==\n        '<URL(relative=True, error={0!r})>'\n        .format('foo')\n    )\n", "tokens": ["tests", "test_validate", "py", "def", "test_url_repr", "assert", "repr", "validate", "url", "relative", "false", "error", "none", "url", "relative", "false", "error", "0", "r", "format", "not", "a", "valid", "url", "assert", "repr", "validate", "url", "relative", "true", "error", "foo", "url", "relative", "true", "error", "0", "r", "format", "foo"], "doc_len": 40}
{"doc_id": "tests/test_validate.py::test_email_valid", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_email_valid", "text": "文件路径: tests/test_validate.py\ndef test_email_valid(valid_email):\n    validator = validate.Email()\n    assert validator(valid_email) == valid_email\n", "tokens": ["tests", "test_validate", "py", "def", "test_email_valid", "valid_email", "validator", "validate", "email", "assert", "validator", "valid_email", "valid_email"], "doc_len": 13}
{"doc_id": "tests/test_validate.py::test_email_invalid", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_email_invalid", "text": "文件路径: tests/test_validate.py\ndef test_email_invalid(invalid_email):\n    validator = validate.Email()\n    with pytest.raises(ValidationError):\n        validator(invalid_email)\n", "tokens": ["tests", "test_validate", "py", "def", "test_email_invalid", "invalid_email", "validator", "validate", "email", "with", "pytest", "raises", "validationerror", "validator", "invalid_email"], "doc_len": 15}
{"doc_id": "tests/test_validate.py::test_email_custom_message", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_email_custom_message", "text": "文件路径: tests/test_validate.py\ndef test_email_custom_message():\n    validator = validate.Email(error='{input} is not an email addy.')\n    with pytest.raises(ValidationError, match='invalid is not an email addy.'):\n        validator('invalid')\n", "tokens": ["tests", "test_validate", "py", "def", "test_email_custom_message", "validator", "validate", "email", "error", "input", "is", "not", "an", "email", "addy", "with", "pytest", "raises", "validationerror", "match", "invalid", "is", "not", "an", "email", "addy", "validator", "invalid"], "doc_len": 28}
{"doc_id": "tests/test_validate.py::test_email_repr", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_email_repr", "text": "文件路径: tests/test_validate.py\ndef test_email_repr():\n    assert (\n        repr(validate.Email(error=None)) ==\n        '<Email(error={0!r})>'\n        .format('Not a valid email address.')\n    )\n    assert (\n        repr(validate.Email(error='foo')) ==\n        '<Email(error={0!r})>'\n        .format('foo')\n    )\n", "tokens": ["tests", "test_validate", "py", "def", "test_email_repr", "assert", "repr", "validate", "email", "error", "none", "email", "error", "0", "r", "format", "not", "a", "valid", "email", "address", "assert", "repr", "validate", "email", "error", "foo", "email", "error", "0", "r", "format", "foo"], "doc_len": 33}
{"doc_id": "tests/test_validate.py::test_range_min", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_range_min", "text": "文件路径: tests/test_validate.py\ndef test_range_min():\n    assert validate.Range(1, 2)(1) == 1\n    assert validate.Range(0)(1) == 1\n    assert validate.Range()(1) == 1\n    assert validate.Range(1, 1)(1) == 1\n\n    with pytest.raises(ValidationError):\n        validate.Range(2, 3)(1)\n    with pytest.raises(ValidationError):\n        validate.Range(2)(1)\n", "tokens": ["tests", "test_validate", "py", "def", "test_range_min", "assert", "validate", "range", "1", "2", "1", "1", "assert", "validate", "range", "0", "1", "1", "assert", "validate", "range", "1", "1", "assert", "validate", "range", "1", "1", "1", "1", "with", "pytest", "raises", "validationerror", "validate", "range", "2", "3", "1", "with", "pytest", "raises", "validationerror", "validate", "range", "2", "1"], "doc_len": 47}
{"doc_id": "tests/test_validate.py::test_range_max", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_range_max", "text": "文件路径: tests/test_validate.py\ndef test_range_max():\n    assert validate.Range(1, 2)(2) == 2\n    assert validate.Range(None, 2)(2) == 2\n    assert validate.Range()(2) == 2\n    assert validate.Range(2, 2)(2) == 2\n\n    with pytest.raises(ValidationError):\n        validate.Range(0, 1)(2)\n    with pytest.raises(ValidationError):\n        validate.Range(None, 1)(2)\n", "tokens": ["tests", "test_validate", "py", "def", "test_range_max", "assert", "validate", "range", "1", "2", "2", "2", "assert", "validate", "range", "none", "2", "2", "2", "assert", "validate", "range", "2", "2", "assert", "validate", "range", "2", "2", "2", "2", "with", "pytest", "raises", "validationerror", "validate", "range", "0", "1", "2", "with", "pytest", "raises", "validationerror", "validate", "range", "none", "1", "2"], "doc_len": 49}
{"doc_id": "tests/test_validate.py::test_range_custom_message", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_range_custom_message", "text": "文件路径: tests/test_validate.py\ndef test_range_custom_message():\n    v = validate.Range(2, 3, error='{input} is not between {min} and {max}')\n    with pytest.raises(ValidationError, match='1 is not between 2 and 3'):\n        v(1)\n\n    v = validate.Range(2, None, error='{input} is less than {min}')\n    with pytest.raises(ValidationError, match='1 is less than 2'):\n        v(1)\n\n    v = validate.Range(None, 3, error='{input} is greater than {max}')\n    with pytest.raises(ValidationError, match='4 is greater than 3'):\n        v(4)\n", "tokens": ["tests", "test_validate", "py", "def", "test_range_custom_message", "v", "validate", "range", "2", "3", "error", "input", "is", "not", "between", "min", "and", "max", "with", "pytest", "raises", "validationerror", "match", "1", "is", "not", "between", "2", "and", "3", "v", "1", "v", "validate", "range", "2", "none", "error", "input", "is", "less", "than", "min", "with", "pytest", "raises", "validationerror", "match", "1", "is", "less", "than", "2", "v", "1", "v", "validate", "range", "none", "3", "error", "input", "is", "greater", "than", "max", "with", "pytest", "raises", "validationerror", "match", "4", "is", "greater", "than", "3", "v", "4"], "doc_len": 78}
{"doc_id": "tests/test_validate.py::test_range_repr", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_range_repr", "text": "文件路径: tests/test_validate.py\ndef test_range_repr():\n    assert (\n        repr(validate.Range(min=None, max=None, error=None)) ==\n        '<Range(min=None, max=None, error=None)>'\n    )\n    assert (\n        repr(validate.Range(min=1, max=3, error='foo')) ==\n        '<Range(min=1, max=3, error={0!r})>'\n        .format('foo')\n    )\n", "tokens": ["tests", "test_validate", "py", "def", "test_range_repr", "assert", "repr", "validate", "range", "min", "none", "max", "none", "error", "none", "range", "min", "none", "max", "none", "error", "none", "assert", "repr", "validate", "range", "min", "1", "max", "3", "error", "foo", "range", "min", "1", "max", "3", "error", "0", "r", "format", "foo"], "doc_len": 42}
{"doc_id": "tests/test_validate.py::test_length_min", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_length_min", "text": "文件路径: tests/test_validate.py\ndef test_length_min():\n    assert validate.Length(3, 5)('foo') == 'foo'\n    assert validate.Length(3, 5)([1, 2, 3]) == [1, 2, 3]\n    assert validate.Length(0)('a') == 'a'\n    assert validate.Length(0)([1]) == [1]\n    assert validate.Length()('') == ''\n    assert validate.Length()([]) == []\n    assert validate.Length(1, 1)('a') == 'a'\n    assert validate.Length(1, 1)([1]) == [1]\n\n    with pytest.raises(ValidationError):\n        validate.Length(4, 5)('foo')\n    with pytest.raises(ValidationError):\n        validate.Length(4, 5)([1, 2, 3])\n    with pytest.raises(ValidationError):\n        validate.Length(5)('foo')\n    with pytest.raises(ValidationError):\n        validate.Length(5)([1, 2, 3])\n", "tokens": ["tests", "test_validate", "py", "def", "test_length_min", "assert", "validate", "length", "3", "5", "foo", "foo", "assert", "validate", "length", "3", "5", "1", "2", "3", "1", "2", "3", "assert", "validate", "length", "0", "a", "a", "assert", "validate", "length", "0", "1", "1", "assert", "validate", "length", "assert", "validate", "length", "assert", "validate", "length", "1", "1", "a", "a", "assert", "validate", "length", "1", "1", "1", "1", "with", "pytest", "raises", "validationerror", "validate", "length", "4", "5", "foo", "with", "pytest", "raises", "validationerror", "validate", "length", "4", "5", "1", "2", "3", "with", "pytest", "raises", "validationerror", "validate", "length", "5", "foo", "with", "pytest", "raises", "validationerror", "validate", "length", "5", "1", "2", "3"], "doc_len": 93}
{"doc_id": "tests/test_validate.py::test_length_max", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_length_max", "text": "文件路径: tests/test_validate.py\ndef test_length_max():\n    assert validate.Length(1, 3)('foo') == 'foo'\n    assert validate.Length(1, 3)([1, 2, 3]) == [1, 2, 3]\n    assert validate.Length(None, 1)('a') == 'a'\n    assert validate.Length(None, 1)([1]) == [1]\n    assert validate.Length()('') == ''\n    assert validate.Length()([]) == []\n    assert validate.Length(2, 2)('ab') == 'ab'\n    assert validate.Length(2, 2)([1, 2]) == [1, 2]\n\n    with pytest.raises(ValidationError):\n        validate.Length(1, 2)('foo')\n    with pytest.raises(ValidationError):\n        validate.Length(1, 2)([1, 2, 3])\n    with pytest.raises(ValidationError):\n        validate.Length(None, 2)('foo')\n    with pytest.raises(ValidationError):\n        validate.Length(None, 2)([1, 2, 3])\n", "tokens": ["tests", "test_validate", "py", "def", "test_length_max", "assert", "validate", "length", "1", "3", "foo", "foo", "assert", "validate", "length", "1", "3", "1", "2", "3", "1", "2", "3", "assert", "validate", "length", "none", "1", "a", "a", "assert", "validate", "length", "none", "1", "1", "1", "assert", "validate", "length", "assert", "validate", "length", "assert", "validate", "length", "2", "2", "ab", "ab", "assert", "validate", "length", "2", "2", "1", "2", "1", "2", "with", "pytest", "raises", "validationerror", "validate", "length", "1", "2", "foo", "with", "pytest", "raises", "validationerror", "validate", "length", "1", "2", "1", "2", "3", "with", "pytest", "raises", "validationerror", "validate", "length", "none", "2", "foo", "with", "pytest", "raises", "validationerror", "validate", "length", "none", "2", "1", "2", "3"], "doc_len": 99}
{"doc_id": "tests/test_validate.py::test_length_equal", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_length_equal", "text": "文件路径: tests/test_validate.py\ndef test_length_equal():\n    assert validate.Length(equal=3)('foo') == 'foo'\n    assert validate.Length(equal=3)([1, 2, 3]) == [1, 2, 3]\n    assert validate.Length(equal=None)('') == ''\n    assert validate.Length(equal=None)([]) == []\n\n    with pytest.raises(ValidationError):\n        validate.Length(equal=2)('foo')\n    with pytest.raises(ValidationError):\n        validate.Length(equal=2)([1, 2, 3])\n\n    with pytest.raises(ValueError):\n        validate.Length(1, None, equal=3)('foo')\n    with pytest.raises(ValueError):\n        validate.Length(None, 5, equal=3)('foo')\n    with pytest.raises(ValueError):\n        validate.Length(1, 5, equal=3)('foo')\n", "tokens": ["tests", "test_validate", "py", "def", "test_length_equal", "assert", "validate", "length", "equal", "3", "foo", "foo", "assert", "validate", "length", "equal", "3", "1", "2", "3", "1", "2", "3", "assert", "validate", "length", "equal", "none", "assert", "validate", "length", "equal", "none", "with", "pytest", "raises", "validationerror", "validate", "length", "equal", "2", "foo", "with", "pytest", "raises", "validationerror", "validate", "length", "equal", "2", "1", "2", "3", "with", "pytest", "raises", "valueerror", "validate", "length", "1", "none", "equal", "3", "foo", "with", "pytest", "raises", "valueerror", "validate", "length", "none", "5", "equal", "3", "foo", "with", "pytest", "raises", "valueerror", "validate", "length", "1", "5", "equal", "3", "foo"], "doc_len": 86}
{"doc_id": "tests/test_validate.py::test_length_custom_message", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_length_custom_message", "text": "文件路径: tests/test_validate.py\ndef test_length_custom_message():\n    v = validate.Length(5, 6, error='{input} is not between {min} and {max}')\n    with pytest.raises(ValidationError, match='foo is not between 5 and 6'):\n        v('foo')\n\n    v = validate.Length(5, None, error='{input} is shorter than {min}')\n    with pytest.raises(ValidationError, match='foo is shorter than 5'):\n        v('foo')\n\n    v = validate.Length(None, 2, error='{input} is longer than {max}')\n    with pytest.raises(ValidationError, match='foo is longer than 2'):\n        v('foo')\n\n    v = validate.Length(None, None, equal=4, error='{input} does not have {equal}')\n    with pytest.raises(ValidationError, match='foo does not have 4'):\n        v('foo')\n", "tokens": ["tests", "test_validate", "py", "def", "test_length_custom_message", "v", "validate", "length", "5", "6", "error", "input", "is", "not", "between", "min", "and", "max", "with", "pytest", "raises", "validationerror", "match", "foo", "is", "not", "between", "5", "and", "6", "v", "foo", "v", "validate", "length", "5", "none", "error", "input", "is", "shorter", "than", "min", "with", "pytest", "raises", "validationerror", "match", "foo", "is", "shorter", "than", "5", "v", "foo", "v", "validate", "length", "none", "2", "error", "input", "is", "longer", "than", "max", "with", "pytest", "raises", "validationerror", "match", "foo", "is", "longer", "than", "2", "v", "foo", "v", "validate", "length", "none", "none", "equal", "4", "error", "input", "does", "not", "have", "equal", "with", "pytest", "raises", "validationerror", "match", "foo", "does", "not", "have", "4", "v", "foo"], "doc_len": 103}
{"doc_id": "tests/test_validate.py::test_length_repr", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_length_repr", "text": "文件路径: tests/test_validate.py\ndef test_length_repr():\n    assert (\n        repr(validate.Length(min=None, max=None, error=None, equal=None)) ==\n        '<Length(min=None, max=None, equal=None, error=None)>'\n    )\n    assert (\n        repr(validate.Length(min=1, max=3, error='foo', equal=None)) ==\n        '<Length(min=1, max=3, equal=None, error={0!r})>'\n        .format('foo')\n    )\n    assert (\n        repr(validate.Length(min=None, max=None, error='foo', equal=5)) ==\n        '<Length(min=None, max=None, equal=5, error={0!r})>'\n        .format('foo')\n    )\n", "tokens": ["tests", "test_validate", "py", "def", "test_length_repr", "assert", "repr", "validate", "length", "min", "none", "max", "none", "error", "none", "equal", "none", "length", "min", "none", "max", "none", "equal", "none", "error", "none", "assert", "repr", "validate", "length", "min", "1", "max", "3", "error", "foo", "equal", "none", "length", "min", "1", "max", "3", "equal", "none", "error", "0", "r", "format", "foo", "assert", "repr", "validate", "length", "min", "none", "max", "none", "error", "foo", "equal", "5", "length", "min", "none", "max", "none", "equal", "5", "error", "0", "r", "format", "foo"], "doc_len": 74}
{"doc_id": "tests/test_validate.py::test_equal", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_equal", "text": "文件路径: tests/test_validate.py\ndef test_equal():\n    assert validate.Equal('a')('a') == 'a'\n    assert validate.Equal(1)(1) == 1\n    assert validate.Equal([1])([1]) == [1]\n\n    with pytest.raises(ValidationError):\n        validate.Equal('b')('a')\n    with pytest.raises(ValidationError):\n        validate.Equal(2)(1)\n    with pytest.raises(ValidationError):\n        validate.Equal([2])([1])\n", "tokens": ["tests", "test_validate", "py", "def", "test_equal", "assert", "validate", "equal", "a", "a", "a", "assert", "validate", "equal", "1", "1", "1", "assert", "validate", "equal", "1", "1", "1", "with", "pytest", "raises", "validationerror", "validate", "equal", "b", "a", "with", "pytest", "raises", "validationerror", "validate", "equal", "2", "1", "with", "pytest", "raises", "validationerror", "validate", "equal", "2", "1"], "doc_len": 47}
{"doc_id": "tests/test_validate.py::test_equal_custom_message", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_equal_custom_message", "text": "文件路径: tests/test_validate.py\ndef test_equal_custom_message():\n    v = validate.Equal('a', error='{input} is not equal to {other}.')\n    with pytest.raises(ValidationError, match='b is not equal to a.'):\n        v('b')\n", "tokens": ["tests", "test_validate", "py", "def", "test_equal_custom_message", "v", "validate", "equal", "a", "error", "input", "is", "not", "equal", "to", "other", "with", "pytest", "raises", "validationerror", "match", "b", "is", "not", "equal", "to", "a", "v", "b"], "doc_len": 29}
{"doc_id": "tests/test_validate.py::test_equal_repr", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_equal_repr", "text": "文件路径: tests/test_validate.py\ndef test_equal_repr():\n    assert (\n        repr(validate.Equal(comparable=123, error=None)) ==\n        '<Equal(comparable=123, error={0!r})>'\n        .format('Must be equal to {other}.')\n    )\n    assert (\n        repr(validate.Equal(comparable=123, error='foo')) ==\n        '<Equal(comparable=123, error={0!r})>'\n        .format('foo')\n    )\n", "tokens": ["tests", "test_validate", "py", "def", "test_equal_repr", "assert", "repr", "validate", "equal", "comparable", "123", "error", "none", "equal", "comparable", "123", "error", "0", "r", "format", "must", "be", "equal", "to", "other", "assert", "repr", "validate", "equal", "comparable", "123", "error", "foo", "equal", "comparable", "123", "error", "0", "r", "format", "foo"], "doc_len": 41}
{"doc_id": "tests/test_validate.py::test_regexp_str", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_regexp_str", "text": "文件路径: tests/test_validate.py\ndef test_regexp_str():\n    assert validate.Regexp(r'a')('a') == 'a'\n    assert validate.Regexp(r'\\w')('_') == '_'\n    assert validate.Regexp(r'\\s')(' ') == ' '\n    assert validate.Regexp(r'1')('1') == '1'\n    assert validate.Regexp(r'[0-9]+')('1') == '1'\n    assert validate.Regexp(r'a', re.IGNORECASE)('A') == 'A'\n\n    with pytest.raises(ValidationError):\n        validate.Regexp(r'[0-9]+')('a')\n    with pytest.raises(ValidationError):\n        validate.Regexp(r'[a-z]+')('1')\n    with pytest.raises(ValidationError):\n        validate.Regexp(r'a')('A')\n", "tokens": ["tests", "test_validate", "py", "def", "test_regexp_str", "assert", "validate", "regexp", "r", "a", "a", "a", "assert", "validate", "regexp", "r", "w", "_", "_", "assert", "validate", "regexp", "r", "s", "assert", "validate", "regexp", "r", "1", "1", "1", "assert", "validate", "regexp", "r", "0", "9", "1", "1", "assert", "validate", "regexp", "r", "a", "re", "ignorecase", "a", "a", "with", "pytest", "raises", "validationerror", "validate", "regexp", "r", "0", "9", "a", "with", "pytest", "raises", "validationerror", "validate", "regexp", "r", "a", "z", "1", "with", "pytest", "raises", "validationerror", "validate", "regexp", "r", "a", "a"], "doc_len": 77}
{"doc_id": "tests/test_validate.py::test_regexp_compile", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_regexp_compile", "text": "文件路径: tests/test_validate.py\ndef test_regexp_compile():\n    assert validate.Regexp(re.compile(r'a'))('a') == 'a'\n    assert validate.Regexp(re.compile(r'\\w'))('_') == '_'\n    assert validate.Regexp(re.compile(r'\\s'))(' ') == ' '\n    assert validate.Regexp(re.compile(r'1'))('1') == '1'\n    assert validate.Regexp(re.compile(r'[0-9]+'))('1') == '1'\n    assert validate.Regexp(re.compile(r'a', re.IGNORECASE))('A') == 'A'\n    assert validate.Regexp(re.compile(r'a', re.IGNORECASE), re.IGNORECASE)('A') == 'A'\n\n    with pytest.raises(ValidationError):\n        validate.Regexp(re.compile(r'[0-9]+'))('a')\n    with pytest.raises(ValidationError):\n        validate.Regexp(re.compile(r'[a-z]+'))('1')\n    with pytest.raises(ValidationError):\n        validate.Regexp(re.compile(r'a'))('A')\n    with pytest.raises(ValidationError):\n        validate.Regexp(re.compile(r'a'), re.IGNORECASE)('A')\n", "tokens": ["tests", "test_validate", "py", "def", "test_regexp_compile", "assert", "validate", "regexp", "re", "compile", "r", "a", "a", "a", "assert", "validate", "regexp", "re", "compile", "r", "w", "_", "_", "assert", "validate", "regexp", "re", "compile", "r", "s", "assert", "validate", "regexp", "re", "compile", "r", "1", "1", "1", "assert", "validate", "regexp", "re", "compile", "r", "0", "9", "1", "1", "assert", "validate", "regexp", "re", "compile", "r", "a", "re", "ignorecase", "a", "a", "assert", "validate", "regexp", "re", "compile", "r", "a", "re", "ignorecase", "re", "ignorecase", "a", "a", "with", "pytest", "raises", "validationerror", "validate", "regexp", "re", "compile", "r", "0", "9", "a", "with", "pytest", "raises", "validationerror", "validate", "regexp", "re", "compile", "r", "a", "z", "1", "with", "pytest", "raises", "validationerror", "validate", "regexp", "re", "compile", "r", "a", "a", "with", "pytest", "raises", "validationerror", "validate", "regexp", "re", "compile", "r", "a", "re", "ignorecase", "a"], "doc_len": 121}
{"doc_id": "tests/test_validate.py::test_regexp_custom_message", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_regexp_custom_message", "text": "文件路径: tests/test_validate.py\ndef test_regexp_custom_message():\n    rex = r'[0-9]+'\n    v = validate.Regexp(rex, error='{input} does not match {regex}')\n    with pytest.raises(ValidationError, match='a does not match'):\n        v('a')\n", "tokens": ["tests", "test_validate", "py", "def", "test_regexp_custom_message", "rex", "r", "0", "9", "v", "validate", "regexp", "rex", "error", "input", "does", "not", "match", "regex", "with", "pytest", "raises", "validationerror", "match", "a", "does", "not", "match", "v", "a"], "doc_len": 30}
{"doc_id": "tests/test_validate.py::test_regexp_repr", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_regexp_repr", "text": "文件路径: tests/test_validate.py\ndef test_regexp_repr():\n    assert (\n        repr(validate.Regexp(regex='abc', flags=0, error=None)) ==\n        '<Regexp(regex={0!r}, error={1!r})>'\n        .format(re.compile('abc'), 'String does not match expected pattern.')\n    )\n    assert (\n        repr(validate.Regexp(regex='abc', flags=re.IGNORECASE, error='foo')) ==\n        '<Regexp(regex={0!r}, error={1!r})>'\n        .format(re.compile('abc', re.IGNORECASE), 'foo')\n    )\n", "tokens": ["tests", "test_validate", "py", "def", "test_regexp_repr", "assert", "repr", "validate", "regexp", "regex", "abc", "flags", "0", "error", "none", "regexp", "regex", "0", "r", "error", "1", "r", "format", "re", "compile", "abc", "string", "does", "not", "match", "expected", "pattern", "assert", "repr", "validate", "regexp", "regex", "abc", "flags", "re", "ignorecase", "error", "foo", "regexp", "regex", "0", "r", "error", "1", "r", "format", "re", "compile", "abc", "re", "ignorecase", "foo"], "doc_len": 57}
{"doc_id": "tests/test_validate.py::test_predicate", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_predicate", "text": "文件路径: tests/test_validate.py\ndef test_predicate():\n    class Dummy(object):\n        def _true(self):\n            return True\n\n        def _false(self):\n            return False\n\n        def _list(self):\n            return [1, 2, 3]\n\n        def _empty(self):\n            return []\n\n        def _identity(self, arg):\n            return arg\n\n    d = Dummy()\n\n    assert validate.Predicate('_true')(d) == d\n    assert validate.Predicate('_list')(d) == d\n    assert validate.Predicate('_identity', arg=True)(d) == d\n    assert validate.Predicate('_identity', arg=1)(d) == d\n    assert validate.Predicate('_identity', arg='abc')(d) == d\n\n    with pytest.raises(ValidationError, match='Invalid input.'):\n        validate.Predicate('_false')(d)\n    with pytest.raises(ValidationError):\n        validate.Predicate('_empty')(d)\n    with pytest.raises(ValidationError):\n        validate.Predicate('_identity', arg=False)(d)\n    with pytest.raises(ValidationError):\n        validate.Predicate('_identity', arg=0)(d)\n    with pytest.raises(ValidationError):\n        validate.Predicate('_identity', arg='')(d)\n", "tokens": ["tests", "test_validate", "py", "def", "test_predicate", "class", "dummy", "object", "def", "_true", "self", "return", "true", "def", "_false", "self", "return", "false", "def", "_list", "self", "return", "1", "2", "3", "def", "_empty", "self", "return", "def", "_identity", "self", "arg", "return", "arg", "d", "dummy", "assert", "validate", "predicate", "_true", "d", "d", "assert", "validate", "predicate", "_list", "d", "d", "assert", "validate", "predicate", "_identity", "arg", "true", "d", "d", "assert", "validate", "predicate", "_identity", "arg", "1", "d", "d", "assert", "validate", "predicate", "_identity", "arg", "abc", "d", "d", "with", "pytest", "raises", "validationerror", "match", "invalid", "input", "validate", "predicate", "_false", "d", "with", "pytest", "raises", "validationerror", "validate", "predicate", "_empty", "d", "with", "pytest", "raises", "validationerror", "validate", "predicate", "_identity", "arg", "false", "d", "with", "pytest", "raises", "validationerror", "validate", "predicate", "_identity", "arg", "0", "d", "with", "pytest", "raises", "validationerror", "validate", "predicate", "_identity", "arg", "d"], "doc_len": 121}
{"doc_id": "tests/test_validate.py::test_predicate_custom_message", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_predicate_custom_message", "text": "文件路径: tests/test_validate.py\ndef test_predicate_custom_message():\n    class Dummy(object):\n        def _false(self):\n            return False\n\n        def __str__(self):\n            return 'Dummy'\n    d = Dummy()\n    with pytest.raises(ValidationError, match='Dummy._false is invalid!'):\n        validate.Predicate('_false', error='{input}.{method} is invalid!')(d)\n", "tokens": ["tests", "test_validate", "py", "def", "test_predicate_custom_message", "class", "dummy", "object", "def", "_false", "self", "return", "false", "def", "__str__", "self", "return", "dummy", "d", "dummy", "with", "pytest", "raises", "validationerror", "match", "dummy", "_false", "is", "invalid", "validate", "predicate", "_false", "error", "input", "method", "is", "invalid", "d"], "doc_len": 38}
{"doc_id": "tests/test_validate.py::test_predicate_repr", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_predicate_repr", "text": "文件路径: tests/test_validate.py\ndef test_predicate_repr():\n    assert (\n        repr(validate.Predicate(method='foo', error=None)) ==\n        '<Predicate(method={0!r}, kwargs={1!r}, error={2!r})>'\n        .format('foo', {}, 'Invalid input.')\n    )\n    assert (\n        repr(validate.Predicate(method='foo', error='bar', zoo=1)) ==\n        '<Predicate(method={0!r}, kwargs={1!r}, error={2!r})>'\n        .format('foo', {str('zoo') if PY2 else 'zoo': 1}, 'bar')\n    )\n", "tokens": ["tests", "test_validate", "py", "def", "test_predicate_repr", "assert", "repr", "validate", "predicate", "method", "foo", "error", "none", "predicate", "method", "0", "r", "kwargs", "1", "r", "error", "2", "r", "format", "foo", "invalid", "input", "assert", "repr", "validate", "predicate", "method", "foo", "error", "bar", "zoo", "1", "predicate", "method", "0", "r", "kwargs", "1", "r", "error", "2", "r", "format", "foo", "str", "zoo", "if", "py2", "else", "zoo", "1", "bar"], "doc_len": 57}
{"doc_id": "tests/test_validate.py::test_noneof", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_noneof", "text": "文件路径: tests/test_validate.py\ndef test_noneof():\n    assert validate.NoneOf([1, 2, 3])(4) == 4\n    assert validate.NoneOf('abc')('d') == 'd'\n    assert validate.NoneOf('')([]) == []\n    assert validate.NoneOf([])('') == ''\n    assert validate.NoneOf([])([]) == []\n    assert validate.NoneOf([1, 2, 3])(None) is None\n\n    with pytest.raises(ValidationError, match='Invalid input.'):\n        validate.NoneOf([1, 2, 3])(3)\n    with pytest.raises(ValidationError):\n        validate.NoneOf('abc')('c')\n    with pytest.raises(ValidationError):\n        validate.NoneOf([1, 2, None])(None)\n    with pytest.raises(ValidationError):\n        validate.NoneOf('')('')\n", "tokens": ["tests", "test_validate", "py", "def", "test_noneof", "assert", "validate", "noneof", "1", "2", "3", "4", "4", "assert", "validate", "noneof", "abc", "d", "d", "assert", "validate", "noneof", "assert", "validate", "noneof", "assert", "validate", "noneof", "assert", "validate", "noneof", "1", "2", "3", "none", "is", "none", "with", "pytest", "raises", "validationerror", "match", "invalid", "input", "validate", "noneof", "1", "2", "3", "3", "with", "pytest", "raises", "validationerror", "validate", "noneof", "abc", "c", "with", "pytest", "raises", "validationerror", "validate", "noneof", "1", "2", "none", "none", "with", "pytest", "raises", "validationerror", "validate", "noneof"], "doc_len": 74}
{"doc_id": "tests/test_validate.py::test_noneof_custom_message", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_noneof_custom_message", "text": "文件路径: tests/test_validate.py\ndef test_noneof_custom_message():\n    with pytest.raises(ValidationError, match='<not valid>'):\n        validate.NoneOf([1, 2], error='<not valid>')(1)\n\n    none_of = validate.NoneOf(\n        [1, 2],\n        error='{input} cannot be one of {values}'\n    )\n    with pytest.raises(ValidationError, match='1 cannot be one of 1, 2'):\n        none_of(1)\n", "tokens": ["tests", "test_validate", "py", "def", "test_noneof_custom_message", "with", "pytest", "raises", "validationerror", "match", "not", "valid", "validate", "noneof", "1", "2", "error", "not", "valid", "1", "none_of", "validate", "noneof", "1", "2", "error", "input", "cannot", "be", "one", "of", "values", "with", "pytest", "raises", "validationerror", "match", "1", "cannot", "be", "one", "of", "1", "2", "none_of", "1"], "doc_len": 46}
{"doc_id": "tests/test_validate.py::test_noneof_repr", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_noneof_repr", "text": "文件路径: tests/test_validate.py\ndef test_noneof_repr():\n    assert (\n        repr(validate.NoneOf(iterable=[1, 2, 3], error=None)) ==\n        '<NoneOf(iterable=[1, 2, 3], error={0!r})>'\n        .format('Invalid input.')\n    )\n    assert (\n        repr(validate.NoneOf(iterable=[1, 2, 3], error='foo')) ==\n        '<NoneOf(iterable=[1, 2, 3], error={0!r})>'\n        .format('foo')\n    )\n", "tokens": ["tests", "test_validate", "py", "def", "test_noneof_repr", "assert", "repr", "validate", "noneof", "iterable", "1", "2", "3", "error", "none", "noneof", "iterable", "1", "2", "3", "error", "0", "r", "format", "invalid", "input", "assert", "repr", "validate", "noneof", "iterable", "1", "2", "3", "error", "foo", "noneof", "iterable", "1", "2", "3", "error", "0", "r", "format", "foo"], "doc_len": 46}
{"doc_id": "tests/test_validate.py::test_oneof", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_oneof", "text": "文件路径: tests/test_validate.py\ndef test_oneof():\n    assert validate.OneOf([1, 2, 3])(2) == 2\n    assert validate.OneOf('abc')('b') == 'b'\n    assert validate.OneOf('')('') == ''\n    assert validate.OneOf(dict(a=0, b=1))('a') == 'a'\n    assert validate.OneOf((1, 2, None))(None) is None\n\n    with pytest.raises(ValidationError, match='Not a valid choice.'):\n        validate.OneOf([1, 2, 3])(4)\n    with pytest.raises(ValidationError):\n        validate.OneOf('abc')('d')\n    with pytest.raises(ValidationError):\n        validate.OneOf((1, 2, 3))(None)\n    with pytest.raises(ValidationError):\n        validate.OneOf([])([])\n    with pytest.raises(ValidationError):\n        validate.OneOf(())(())\n    with pytest.raises(ValidationError):\n        validate.OneOf(dict(a=0, b=1))(0)\n    with pytest.raises(ValidationError):\n        validate.OneOf('123')(1)\n", "tokens": ["tests", "test_validate", "py", "def", "test_oneof", "assert", "validate", "oneof", "1", "2", "3", "2", "2", "assert", "validate", "oneof", "abc", "b", "b", "assert", "validate", "oneof", "assert", "validate", "oneof", "dict", "a", "0", "b", "1", "a", "a", "assert", "validate", "oneof", "1", "2", "none", "none", "is", "none", "with", "pytest", "raises", "validationerror", "match", "not", "a", "valid", "choice", "validate", "oneof", "1", "2", "3", "4", "with", "pytest", "raises", "validationerror", "validate", "oneof", "abc", "d", "with", "pytest", "raises", "validationerror", "validate", "oneof", "1", "2", "3", "none", "with", "pytest", "raises", "validationerror", "validate", "oneof", "with", "pytest", "raises", "validationerror", "validate", "oneof", "with", "pytest", "raises", "validationerror", "validate", "oneof", "dict", "a", "0", "b", "1", "0", "with", "pytest", "raises", "validationerror", "validate", "oneof", "123", "1"], "doc_len": 106}
{"doc_id": "tests/test_validate.py::test_oneof_options", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_oneof_options", "text": "文件路径: tests/test_validate.py\ndef test_oneof_options():\n    oneof = validate.OneOf([1, 2, 3], ['one', 'two', 'three'])\n    expected = [('1', 'one'), ('2', 'two'), ('3', 'three')]\n    assert list(oneof.options()) == expected\n\n    oneof = validate.OneOf([1, 2, 3], ['one', 'two'])\n    expected = [('1', 'one'), ('2', 'two'), ('3', '')]\n    assert list(oneof.options()) == expected\n\n    oneof = validate.OneOf([1, 2], ['one', 'two', 'three'])\n    expected = [('1', 'one'), ('2', 'two'), ('', 'three')]\n    assert list(oneof.options()) == expected\n\n    oneof = validate.OneOf([1, 2])\n    expected = [('1', ''), ('2', '')]\n    assert list(oneof.options()) == expected\n", "tokens": ["tests", "test_validate", "py", "def", "test_oneof_options", "oneof", "validate", "oneof", "1", "2", "3", "one", "two", "three", "expected", "1", "one", "2", "two", "3", "three", "assert", "list", "oneof", "options", "expected", "oneof", "validate", "oneof", "1", "2", "3", "one", "two", "expected", "1", "one", "2", "two", "3", "assert", "list", "oneof", "options", "expected", "oneof", "validate", "oneof", "1", "2", "one", "two", "three", "expected", "1", "one", "2", "two", "three", "assert", "list", "oneof", "options", "expected", "oneof", "validate", "oneof", "1", "2", "expected", "1", "2", "assert", "list", "oneof", "options", "expected"], "doc_len": 77}
{"doc_id": "tests/test_validate.py::test_oneof_text", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_oneof_text", "text": "文件路径: tests/test_validate.py\ndef test_oneof_text():\n    oneof = validate.OneOf([1, 2, 3], ['one', 'two', 'three'])\n    assert oneof.choices_text == '1, 2, 3'\n    assert oneof.labels_text == 'one, two, three'\n\n    oneof = validate.OneOf([1], ['one'])\n    assert oneof.choices_text == '1'\n    assert oneof.labels_text == 'one'\n\n    oneof = validate.OneOf(dict(a=0, b=1))\n    assert ', '.join(sorted(oneof.choices_text.split(', '))) == 'a, b'\n    assert oneof.labels_text == ''\n", "tokens": ["tests", "test_validate", "py", "def", "test_oneof_text", "oneof", "validate", "oneof", "1", "2", "3", "one", "two", "three", "assert", "oneof", "choices_text", "1", "2", "3", "assert", "oneof", "labels_text", "one", "two", "three", "oneof", "validate", "oneof", "1", "one", "assert", "oneof", "choices_text", "1", "assert", "oneof", "labels_text", "one", "oneof", "validate", "oneof", "dict", "a", "0", "b", "1", "assert", "join", "sorted", "oneof", "choices_text", "split", "a", "b", "assert", "oneof", "labels_text"], "doc_len": 58}
{"doc_id": "tests/test_validate.py::test_oneof_custom_message", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_oneof_custom_message", "text": "文件路径: tests/test_validate.py\ndef test_oneof_custom_message():\n    oneof = validate.OneOf([1, 2, 3], error='{input} is not one of {choices}')\n    expected = '4 is not one of 1, 2, 3'\n    with pytest.raises(ValidationError):\n        oneof(4)\n    assert expected in str(expected)\n\n    oneof = validate.OneOf([1, 2, 3],\n        ['one', 'two', 'three'],\n        error='{input} is not one of {labels}'\n    )\n    expected = '4 is not one of one, two, three'\n    with pytest.raises(ValidationError):\n        oneof(4)\n    assert expected in str(expected)\n", "tokens": ["tests", "test_validate", "py", "def", "test_oneof_custom_message", "oneof", "validate", "oneof", "1", "2", "3", "error", "input", "is", "not", "one", "of", "choices", "expected", "4", "is", "not", "one", "of", "1", "2", "3", "with", "pytest", "raises", "validationerror", "oneof", "4", "assert", "expected", "in", "str", "expected", "oneof", "validate", "oneof", "1", "2", "3", "one", "two", "three", "error", "input", "is", "not", "one", "of", "labels", "expected", "4", "is", "not", "one", "of", "one", "two", "three", "with", "pytest", "raises", "validationerror", "oneof", "4", "assert", "expected", "in", "str", "expected"], "doc_len": 74}
{"doc_id": "tests/test_validate.py::test_oneof_repr", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_oneof_repr", "text": "文件路径: tests/test_validate.py\ndef test_oneof_repr():\n    assert (\n        repr(validate.OneOf(choices=[1, 2, 3], labels=None, error=None)) ==\n        '<OneOf(choices=[1, 2, 3], labels=[], error={0!r})>'\n        .format('Not a valid choice.')\n    )\n    assert (\n        repr(validate.OneOf(choices=[1, 2, 3], labels=['a', 'b', 'c'], error='foo')) ==\n        '<OneOf(choices=[1, 2, 3], labels={0!r}, error={1!r})>'\n        .format(['a', 'b', 'c'], 'foo')\n    )\n", "tokens": ["tests", "test_validate", "py", "def", "test_oneof_repr", "assert", "repr", "validate", "oneof", "choices", "1", "2", "3", "labels", "none", "error", "none", "oneof", "choices", "1", "2", "3", "labels", "error", "0", "r", "format", "not", "a", "valid", "choice", "assert", "repr", "validate", "oneof", "choices", "1", "2", "3", "labels", "a", "b", "c", "error", "foo", "oneof", "choices", "1", "2", "3", "labels", "0", "r", "error", "1", "r", "format", "a", "b", "c", "foo"], "doc_len": 61}
{"doc_id": "tests/test_validate.py::test_containsonly_in_list", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_containsonly_in_list", "text": "文件路径: tests/test_validate.py\ndef test_containsonly_in_list():\n    assert validate.ContainsOnly([])([]) == []\n    assert validate.ContainsOnly([1, 2, 3])([1]) == [1]\n    assert validate.ContainsOnly([1, 1, 2])([1, 1]) == [1, 1]\n    assert validate.ContainsOnly([1, 2, 3])([1, 2]) == [1, 2]\n    assert validate.ContainsOnly([1, 2, 3])([2, 1]) == [2, 1]\n    assert validate.ContainsOnly([1, 2, 3])([1, 2, 3]) == [1, 2, 3]\n    assert validate.ContainsOnly([1, 2, 3])([3, 1, 2]) == [3, 1, 2]\n    assert validate.ContainsOnly([1, 2, 3])([2, 3, 1]) == [2, 3, 1]\n\n    with pytest.raises(ValidationError):\n        validate.ContainsOnly([1, 2, 3])([4])\n    with pytest.raises(ValidationError):\n        validate.ContainsOnly([1, 2, 3])([])\n    with pytest.raises(ValidationError):\n        validate.ContainsOnly([])([1])\n", "tokens": ["tests", "test_validate", "py", "def", "test_containsonly_in_list", "assert", "validate", "containsonly", "assert", "validate", "containsonly", "1", "2", "3", "1", "1", "assert", "validate", "containsonly", "1", "1", "2", "1", "1", "1", "1", "assert", "validate", "containsonly", "1", "2", "3", "1", "2", "1", "2", "assert", "validate", "containsonly", "1", "2", "3", "2", "1", "2", "1", "assert", "validate", "containsonly", "1", "2", "3", "1", "2", "3", "1", "2", "3", "assert", "validate", "containsonly", "1", "2", "3", "3", "1", "2", "3", "1", "2", "assert", "validate", "containsonly", "1", "2", "3", "2", "3", "1", "2", "3", "1", "with", "pytest", "raises", "validationerror", "validate", "containsonly", "1", "2", "3", "4", "with", "pytest", "raises", "validationerror", "validate", "containsonly", "1", "2", "3", "with", "pytest", "raises", "validationerror", "validate", "containsonly", "1"], "doc_len": 108}
{"doc_id": "tests/test_validate.py::test_contains_only_unhashable_types", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_contains_only_unhashable_types", "text": "文件路径: tests/test_validate.py\ndef test_contains_only_unhashable_types():\n    assert validate.ContainsOnly([[1], [2], [3]])([[1]]) == [[1]]\n    assert validate.ContainsOnly([[1], [1], [2]])([[1], [1]]) == [[1], [1]]\n    assert validate.ContainsOnly([[1], [2], [3]])([[1], [2]]) == [[1], [2]]\n    assert validate.ContainsOnly([[1], [2], [3]])([[2], [1]]) == [[2], [1]]\n    assert validate.ContainsOnly([[1], [2], [3]])([[1], [2], [3]]) == [[1], [2], [3]]\n    assert validate.ContainsOnly([[1], [2], [3]])([[3], [1], [2]]) == [[3], [1], [2]]\n    assert validate.ContainsOnly([[1], [2], [3]])([[2], [3], [1]]) == [[2], [3], [1]]\n\n    with pytest.raises(ValidationError):\n        validate.ContainsOnly([[1], [2], [3]])([[4]])\n    with pytest.raises(ValidationError):\n        validate.ContainsOnly([[1], [2], [3]])([])\n    with pytest.raises(ValidationError):\n        validate.ContainsOnly([])([1])\n", "tokens": ["tests", "test_validate", "py", "def", "test_contains_only_unhashable_types", "assert", "validate", "containsonly", "1", "2", "3", "1", "1", "assert", "validate", "containsonly", "1", "1", "2", "1", "1", "1", "1", "assert", "validate", "containsonly", "1", "2", "3", "1", "2", "1", "2", "assert", "validate", "containsonly", "1", "2", "3", "2", "1", "2", "1", "assert", "validate", "containsonly", "1", "2", "3", "1", "2", "3", "1", "2", "3", "assert", "validate", "containsonly", "1", "2", "3", "3", "1", "2", "3", "1", "2", "assert", "validate", "containsonly", "1", "2", "3", "2", "3", "1", "2", "3", "1", "with", "pytest", "raises", "validationerror", "validate", "containsonly", "1", "2", "3", "4", "with", "pytest", "raises", "validationerror", "validate", "containsonly", "1", "2", "3", "with", "pytest", "raises", "validationerror", "validate", "containsonly", "1"], "doc_len": 105}
{"doc_id": "tests/test_validate.py::test_containsonly_in_tuple", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_containsonly_in_tuple", "text": "文件路径: tests/test_validate.py\ndef test_containsonly_in_tuple():\n    assert validate.ContainsOnly(())(()) == ()\n    assert validate.ContainsOnly((1, 2, 3))((1,)) == (1,)\n    assert validate.ContainsOnly((1, 1, 2))((1, 1)) == (1, 1)\n    assert validate.ContainsOnly((1, 2, 3))((1, 2)) == (1, 2)\n    assert validate.ContainsOnly((1, 2, 3))((2, 1)) == (2, 1)\n    assert validate.ContainsOnly((1, 2, 3))((1, 2, 3)) == (1, 2, 3)\n    assert validate.ContainsOnly((1, 2, 3))((3, 1, 2)) == (3, 1, 2)\n    assert validate.ContainsOnly((1, 2, 3))((2, 3, 1)) == (2, 3, 1)\n\n    with pytest.raises(ValidationError):\n        validate.ContainsOnly((1, 2, 3))((4,))\n    with pytest.raises(ValidationError):\n        validate.ContainsOnly((1, 2, 3))(())\n    with pytest.raises(ValidationError):\n        validate.ContainsOnly(())((1,))\n", "tokens": ["tests", "test_validate", "py", "def", "test_containsonly_in_tuple", "assert", "validate", "containsonly", "assert", "validate", "containsonly", "1", "2", "3", "1", "1", "assert", "validate", "containsonly", "1", "1", "2", "1", "1", "1", "1", "assert", "validate", "containsonly", "1", "2", "3", "1", "2", "1", "2", "assert", "validate", "containsonly", "1", "2", "3", "2", "1", "2", "1", "assert", "validate", "containsonly", "1", "2", "3", "1", "2", "3", "1", "2", "3", "assert", "validate", "containsonly", "1", "2", "3", "3", "1", "2", "3", "1", "2", "assert", "validate", "containsonly", "1", "2", "3", "2", "3", "1", "2", "3", "1", "with", "pytest", "raises", "validationerror", "validate", "containsonly", "1", "2", "3", "4", "with", "pytest", "raises", "validationerror", "validate", "containsonly", "1", "2", "3", "with", "pytest", "raises", "validationerror", "validate", "containsonly", "1"], "doc_len": 108}
{"doc_id": "tests/test_validate.py::test_contains_only_in_string", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_contains_only_in_string", "text": "文件路径: tests/test_validate.py\ndef test_contains_only_in_string():\n    assert validate.ContainsOnly('')('') == ''\n    assert validate.ContainsOnly('abc')('a') == 'a'\n    assert validate.ContainsOnly('aab')('aa') == 'aa'\n    assert validate.ContainsOnly('abc')('ab') == 'ab'\n    assert validate.ContainsOnly('abc')('ba') == 'ba'\n    assert validate.ContainsOnly('abc')('abc') == 'abc'\n    assert validate.ContainsOnly('abc')('cab') == 'cab'\n    assert validate.ContainsOnly('abc')('bca') == 'bca'\n\n    with pytest.raises(ValidationError):\n        validate.ContainsOnly('abc')('d')\n    with pytest.raises(ValidationError):\n        validate.ContainsOnly('abc')('')\n    with pytest.raises(ValidationError):\n        validate.ContainsOnly('')('a')\n", "tokens": ["tests", "test_validate", "py", "def", "test_contains_only_in_string", "assert", "validate", "containsonly", "assert", "validate", "containsonly", "abc", "a", "a", "assert", "validate", "containsonly", "aab", "aa", "aa", "assert", "validate", "containsonly", "abc", "ab", "ab", "assert", "validate", "containsonly", "abc", "ba", "ba", "assert", "validate", "containsonly", "abc", "abc", "abc", "assert", "validate", "containsonly", "abc", "cab", "cab", "assert", "validate", "containsonly", "abc", "bca", "bca", "with", "pytest", "raises", "validationerror", "validate", "containsonly", "abc", "d", "with", "pytest", "raises", "validationerror", "validate", "containsonly", "abc", "with", "pytest", "raises", "validationerror", "validate", "containsonly", "a"], "doc_len": 72}
{"doc_id": "tests/test_validate.py::test_contains_only_invalid", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_contains_only_invalid", "text": "文件路径: tests/test_validate.py\ndef test_contains_only_invalid():\n    with pytest.raises(ValidationError, match='One or more of the choices you made was not acceptable.'):\n        validate.ContainsOnly([1, 2, 3])([1, 1])\n    with pytest.raises(ValidationError):\n        validate.ContainsOnly([1, 1, 2])([2, 2])\n    with pytest.raises(ValidationError):\n        validate.ContainsOnly([1, 1, 2])([1, 1, 1])\n", "tokens": ["tests", "test_validate", "py", "def", "test_contains_only_invalid", "with", "pytest", "raises", "validationerror", "match", "one", "or", "more", "of", "the", "choices", "you", "made", "was", "not", "acceptable", "validate", "containsonly", "1", "2", "3", "1", "1", "with", "pytest", "raises", "validationerror", "validate", "containsonly", "1", "1", "2", "2", "2", "with", "pytest", "raises", "validationerror", "validate", "containsonly", "1", "1", "2", "1", "1", "1"], "doc_len": 51}
{"doc_id": "tests/test_validate.py::test_containsonly_custom_message", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_containsonly_custom_message", "text": "文件路径: tests/test_validate.py\ndef test_containsonly_custom_message():\n    containsonly = validate.ContainsOnly(\n        [1, 2, 3],\n        error='{input} is not one of {choices}'\n    )\n    expected = '4, 5 is not one of 1, 2, 3'\n    with pytest.raises(ValidationError) as excinfo:\n        containsonly([4, 5])\n    assert expected in str(expected)\n\n    containsonly = validate.ContainsOnly([1, 2, 3],\n        ['one', 'two', 'three'],\n        error='{input} is not one of {labels}'\n    )\n    expected = '4, 5 is not one of one, two, three'\n    with pytest.raises(ValidationError) as excinfo:\n        containsonly([4, 5])\n    assert expected in str(expected)\n", "tokens": ["tests", "test_validate", "py", "def", "test_containsonly_custom_message", "containsonly", "validate", "containsonly", "1", "2", "3", "error", "input", "is", "not", "one", "of", "choices", "expected", "4", "5", "is", "not", "one", "of", "1", "2", "3", "with", "pytest", "raises", "validationerror", "as", "excinfo", "containsonly", "4", "5", "assert", "expected", "in", "str", "expected", "containsonly", "validate", "containsonly", "1", "2", "3", "one", "two", "three", "error", "input", "is", "not", "one", "of", "labels", "expected", "4", "5", "is", "not", "one", "of", "one", "two", "three", "with", "pytest", "raises", "validationerror", "as", "excinfo", "containsonly", "4", "5", "assert", "expected", "in", "str", "expected"], "doc_len": 82}
{"doc_id": "tests/test_validate.py::test_containsonly_repr", "file_path": "tests/test_validate.py", "class_name": null, "func_name": "test_containsonly_repr", "text": "文件路径: tests/test_validate.py\ndef test_containsonly_repr():\n    assert (\n        repr(validate.ContainsOnly(choices=[1, 2, 3], labels=None, error=None)) ==\n        '<ContainsOnly(choices=[1, 2, 3], labels=[], error={0!r})>'\n        .format('One or more of the choices you made was not acceptable.')\n    )\n    assert (\n        repr(validate.ContainsOnly(choices=[1, 2, 3], labels=['a', 'b', 'c'], error='foo')) ==\n        '<ContainsOnly(choices=[1, 2, 3], labels={0!r}, error={1!r})>'\n        .format(['a', 'b', 'c'], 'foo')\n    )\n", "tokens": ["tests", "test_validate", "py", "def", "test_containsonly_repr", "assert", "repr", "validate", "containsonly", "choices", "1", "2", "3", "labels", "none", "error", "none", "containsonly", "choices", "1", "2", "3", "labels", "error", "0", "r", "format", "one", "or", "more", "of", "the", "choices", "you", "made", "was", "not", "acceptable", "assert", "repr", "validate", "containsonly", "choices", "1", "2", "3", "labels", "a", "b", "c", "error", "foo", "containsonly", "choices", "1", "2", "3", "labels", "0", "r", "error", "1", "r", "format", "a", "b", "c", "foo"], "doc_len": 68}
{"doc_id": "tests/test_py3/test_utils.py::test_function_field_using_type_annotation", "file_path": "tests/test_py3/test_utils.py", "class_name": null, "func_name": "test_function_field_using_type_annotation", "text": "文件路径: tests/test_py3/test_utils.py\ndef test_function_field_using_type_annotation():\n    def get_split_words(value: str):\n        return value.split(';')\n\n    class MySchema(Schema):\n        friends = fields.Function(deserialize=get_split_words)\n\n    data = {'name': 'Bruce Wayne', 'friends': 'Clark;Alfred;Robin'}\n    result = MySchema().load(data)\n    assert result.data == {'friends': ['Clark', 'Alfred', 'Robin']}\n", "tokens": ["tests", "test_py3", "test_utils", "py", "def", "test_function_field_using_type_annotation", "def", "get_split_words", "value", "str", "return", "value", "split", "class", "myschema", "schema", "friends", "fields", "function", "deserialize", "get_split_words", "data", "name", "bruce", "wayne", "friends", "clark", "alfred", "robin", "result", "myschema", "load", "data", "assert", "result", "data", "friends", "clark", "alfred", "robin"], "doc_len": 40}
