{
  "instance_id": "scikit-learn__scikit-learn-15535",
  "query": "regression in input validation of clustering metrics\n```python\r\nfrom sklearn.metrics.cluster import mutual_info_score\r\nimport numpy as np\r\n\r\nx = np.random.choice(['a', 'b'], size=20).astype(object)\r\nmutual_info_score(x, x)\r\n```\r\nValueError: could not convert string to float: 'b'\r\n\r\nwhile\r\n```python\r\nx = np.random.choice(['a', 'b'], size=20)\r\nmutual_info_score(x, x)\r\n```\r\nworks with a warning?\r\n\r\nthis worked in 0.21.1 without a warning (as I think it should)\r\n\r\n\r\nEdit by @ogrisel: I removed the `.astype(object)` in the second code snippet.\n",
  "ground_truth": {
    "files": [
      "sklearn/metrics/cluster/_supervised.py"
    ],
    "locations": [
      "sklearn/metrics/cluster/_supervised.py::check_clusterings"
    ]
  },
  "predictions": [
    "sklearn/metrics/cluster/tests/test_supervised.py::test_adjusted_mutual_info_score",
    "sklearn/metrics/cluster/tests/test_supervised.py::test_exactly_zero_info_score",
    "sklearn/feature_selection/_mutual_info.py::_compute_mi",
    "sklearn/feature_selection/tests/test_mutual_info.py::test_mutual_info_options",
    "sklearn/metrics/cluster/_supervised.py::mutual_info_score",
    "sklearn/metrics/cluster/tests/test_supervised.py::test_expected_mutual_info_overflow",
    "sklearn/metrics/cluster/tests/test_supervised.py::test_int_overflow_mutual_info_fowlkes_mallows_score",
    "sklearn/feature_selection/tests/test_mutual_info.py::test_mutual_info_classif_discrete",
    "sklearn/feature_selection/tests/test_mutual_info.py::test_mutual_info_regression",
    "examples/cluster/plot_adjusted_for_chance_measures.py::ami_score"
  ],
  "metadata": {
    "repo": "scikit-learn/scikit-learn",
    "commit": "70b0ddea992c01df1a41588fa9e2d130fb6b13f8",
    "total_functions_indexed": 7104,
    "retrieval_time_seconds": 0.0054204463958740234
  },
  "raw_output": "[{\"doc_id\": \"sklearn/metrics/cluster/tests/test_supervised.py::test_adjusted_mutual_info_score\", \"score\": 0.5667192339897156}, {\"doc_id\": \"sklearn/metrics/cluster/tests/test_supervised.py::test_exactly_zero_info_score\", \"score\": 0.5328755378723145}, {\"doc_id\": \"sklearn/feature_selection/_mutual_info.py::_compute_mi\", \"score\": 0.5299072265625}, {\"doc_id\": \"sklearn/feature_selection/tests/test_mutual_info.py::test_mutual_info_options\", \"score\": 0.5270819067955017}, {\"doc_id\": \"sklearn/metrics/cluster/_supervised.py::mutual_info_score\", \"score\": 0.4992983937263489}, {\"doc_id\": \"sklearn/metrics/cluster/tests/test_supervised.py::test_expected_mutual_info_overflow\", \"score\": 0.4937237501144409}, {\"doc_id\": \"sklearn/metrics/cluster/tests/test_supervised.py::test_int_overflow_mutual_info_fowlkes_mallows_score\", \"score\": 0.48866868019104004}, {\"doc_id\": \"sklearn/feature_selection/tests/test_mutual_info.py::test_mutual_info_classif_discrete\", \"score\": 0.4748042821884155}, {\"doc_id\": \"sklearn/feature_selection/tests/test_mutual_info.py::test_mutual_info_regression\", \"score\": 0.4645412862300873}, {\"doc_id\": \"examples/cluster/plot_adjusted_for_chance_measures.py::ami_score\", \"score\": 0.4566216468811035}]"
}