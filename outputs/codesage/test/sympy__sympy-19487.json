{
  "instance_id": "sympy__sympy-19487",
  "query": "Rewrite sign as abs\nIn sympy the `sign` function is defined as\r\n```\r\n    sign(z)  :=  z / Abs(z)\r\n```\r\nfor all complex non-zero `z`. There should be a way to rewrite the sign in terms of `Abs` e.g.:\r\n```\r\n>>> sign(x).rewrite(Abs)                                                                                                                   \r\n x \r\n───\r\n│x│\r\n```\r\nI'm not sure how the possibility of `x` being zero should be handled currently we have\r\n```\r\n>>> sign(0)                                                                                                                               \r\n0\r\n>>> 0 / Abs(0)                                                                                                                            \r\nnan\r\n```\r\nMaybe `sign(0)` should be `nan` as well. Otherwise maybe rewrite as Abs would have to be careful about the possibility of the arg being zero (that would make the rewrite fail in most cases).\n",
  "ground_truth": {
    "files": [
      "sympy/functions/elementary/complexes.py"
    ],
    "locations": [
      "sympy/functions/elementary/complexes.py::sign",
      "sympy/functions/elementary/complexes.py::sign._eval_rewrite_as_Heaviside",
      "sympy/functions/elementary/complexes.py::sign._eval_simplify"
    ]
  },
  "predictions": [
    "sympy/functions/elementary/complexes.py::Abs._eval_rewrite_as_sign",
    "sympy/functions/elementary/complexes.py::sign._eval_Abs",
    "sympy/functions/elementary/complexes.py::sign.doit",
    "sympy/functions/elementary/complexes.py::sign.eval",
    "sympy/functions/elementary/complexes.py::Abs._eval_derivative",
    "sympy/assumptions/refine.py::refine_sign",
    "sympy/functions/elementary/complexes.py::sign._eval_is_zero",
    "sympy/functions/elementary/complexes.py::sign._eval_rewrite_as_Heaviside",
    "sympy/functions/elementary/complexes.py::Abs.fdiff",
    "sympy/functions/special/delta_functions.py::Heaviside._eval_rewrite_as_sign"
  ],
  "metadata": {
    "repo": "sympy/sympy",
    "commit": "25fbcce5b1a4c7e3956e6062930f4a44ce95a632",
    "total_functions_indexed": 34589,
    "retrieval_time_seconds": 0.10014915466308594
  },
  "raw_output": "[{\"doc_id\": \"sympy/functions/elementary/complexes.py::Abs._eval_rewrite_as_sign\", \"score\": 0.5012181997299194}, {\"doc_id\": \"sympy/functions/elementary/complexes.py::sign._eval_Abs\", \"score\": 0.4740959405899048}, {\"doc_id\": \"sympy/functions/elementary/complexes.py::sign.doit\", \"score\": 0.47041642665863037}, {\"doc_id\": \"sympy/functions/elementary/complexes.py::sign.eval\", \"score\": 0.4667663872241974}, {\"doc_id\": \"sympy/functions/elementary/complexes.py::Abs._eval_derivative\", \"score\": 0.4354090094566345}, {\"doc_id\": \"sympy/assumptions/refine.py::refine_sign\", \"score\": 0.43077266216278076}, {\"doc_id\": \"sympy/functions/elementary/complexes.py::sign._eval_is_zero\", \"score\": 0.4306960105895996}, {\"doc_id\": \"sympy/functions/elementary/complexes.py::sign._eval_rewrite_as_Heaviside\", \"score\": 0.42915260791778564}, {\"doc_id\": \"sympy/functions/elementary/complexes.py::Abs.fdiff\", \"score\": 0.42912039160728455}, {\"doc_id\": \"sympy/functions/special/delta_functions.py::Heaviside._eval_rewrite_as_sign\", \"score\": 0.4260578155517578}]"
}