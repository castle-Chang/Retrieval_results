{
  "instance_id": "sphinx-doc__sphinx-8627",
  "query": "autodoc isn't able to resolve struct.Struct type annotations\n**Describe the bug**\r\nIf `struct.Struct` is declared in any type annotations, I get `class reference target not found: Struct`\r\n\r\n**To Reproduce**\r\nSimple `index.rst`\r\n```\r\nHello World\r\n===========\r\n\r\ncode docs\r\n=========\r\n\r\n.. automodule:: helloworld.helloworld\r\n```\r\n\r\nSimple `helloworld.py`\r\n```\r\nimport struct\r\nimport pathlib\r\n\r\ndef consume_struct(_: struct.Struct) -> None:\r\n    pass\r\n\r\ndef make_struct() -> struct.Struct:\r\n    mystruct = struct.Struct('HH')\r\n    return mystruct\r\n\r\ndef make_path() -> pathlib.Path:\r\n    return pathlib.Path()\r\n```\r\n\r\nCommand line:\r\n```\r\npython3 -m sphinx -b html docs/ doc-out -nvWT\r\n```\r\n\r\n**Expected behavior**\r\nIf you comment out the 2 functions that have `Struct` type annotations, you'll see that `pathlib.Path` resolves fine and shows up in the resulting documentation. I'd expect that `Struct` would also resolve correctly.\r\n\r\n**Your project**\r\nn/a\r\n\r\n**Screenshots**\r\nn/a\r\n\r\n**Environment info**\r\n- OS: Ubuntu 18.04, 20.04\r\n- Python version: 3.8.2\r\n- Sphinx version: 3.2.1\r\n- Sphinx extensions:  'sphinx.ext.autodoc',\r\n              'sphinx.ext.autosectionlabel',\r\n              'sphinx.ext.intersphinx',\r\n              'sphinx.ext.doctest',\r\n              'sphinx.ext.todo'\r\n- Extra tools: \r\n\r\n**Additional context**\r\n\r\n\r\n- [e.g. URL or Ticket]\r\n\r\n\n",
  "ground_truth": {
    "files": [
      "sphinx/util/typing.py"
    ],
    "locations": [
      "sphinx/util/typing.py::restify",
      "sphinx/util/typing.py::stringify"
    ]
  },
  "predictions": [
    "sphinx/testing/util.py::Struct.__init__",
    "tests/test_ext_autodoc_configs.py::test_autodoc_typehints_signature",
    "tests/test_ext_autodoc_configs.py::test_autodoc_typehints_none",
    "tests/test_ext_autodoc.py::test_autodoc_Annotated",
    "tests/test_ext_autodoc_configs.py::test_autodoc_type_aliases",
    "tests/test_ext_autodoc_autodata.py::test_autodata_NewType",
    "tests/test_ext_autodoc.py::test_autodoc_TYPE_CHECKING",
    "tests/test_ext_autodoc_configs.py::test_autodoc_typehints_none_for_overload",
    "tests/test_ext_autodoc_configs.py::test_autodoc_default_options",
    "tests/test_ext_autodoc_autodata.py::test_autodata_GenericAlias"
  ],
  "metadata": {
    "repo": "sphinx-doc/sphinx",
    "commit": "332d80ba8433aea41c3709fa52737ede4405072b",
    "total_functions_indexed": 5629,
    "retrieval_time_seconds": 0.3459618091583252
  },
  "raw_output": "[{\"doc_id\": \"sphinx/testing/util.py::Struct.__init__\", \"score\": 0.3592735826969147}, {\"doc_id\": \"tests/test_ext_autodoc_configs.py::test_autodoc_typehints_signature\", \"score\": 0.3418404757976532}, {\"doc_id\": \"tests/test_ext_autodoc_configs.py::test_autodoc_typehints_none\", \"score\": 0.3385390639305115}, {\"doc_id\": \"tests/test_ext_autodoc.py::test_autodoc_Annotated\", \"score\": 0.3355225622653961}, {\"doc_id\": \"tests/test_ext_autodoc_configs.py::test_autodoc_type_aliases\", \"score\": 0.33416640758514404}, {\"doc_id\": \"tests/test_ext_autodoc_autodata.py::test_autodata_NewType\", \"score\": 0.3315276503562927}, {\"doc_id\": \"tests/test_ext_autodoc.py::test_autodoc_TYPE_CHECKING\", \"score\": 0.32975858449935913}, {\"doc_id\": \"tests/test_ext_autodoc_configs.py::test_autodoc_typehints_none_for_overload\", \"score\": 0.32824423909187317}, {\"doc_id\": \"tests/test_ext_autodoc_configs.py::test_autodoc_default_options\", \"score\": 0.32739919424057007}, {\"doc_id\": \"tests/test_ext_autodoc_autodata.py::test_autodata_GenericAlias\", \"score\": 0.3260965347290039}]"
}