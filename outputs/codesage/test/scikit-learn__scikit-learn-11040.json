{
  "instance_id": "scikit-learn__scikit-learn-11040",
  "query": "Missing parameter validation in Neighbors estimator for float n_neighbors\n```python\r\nfrom sklearn.neighbors import NearestNeighbors\r\nfrom sklearn.datasets import make_blobs\r\nX, y = make_blobs()\r\nneighbors = NearestNeighbors(n_neighbors=3.)\r\nneighbors.fit(X)\r\nneighbors.kneighbors(X)\r\n```\r\n```\r\n~/checkout/scikit-learn/sklearn/neighbors/binary_tree.pxi in sklearn.neighbors.kd_tree.NeighborsHeap.__init__()\r\n\r\nTypeError: 'float' object cannot be interpreted as an integer\r\n```\r\nThis should be caught earlier and a more helpful error message should be raised (or we could be lenient and cast to integer, but I think a better error might be better).\r\n\r\nWe need to make sure that \r\n```python\r\nneighbors.kneighbors(X, n_neighbors=3.)\r\n```\r\nalso works.\n",
  "ground_truth": {
    "files": [
      "sklearn/neighbors/base.py"
    ],
    "locations": [
      "sklearn/neighbors/base.py::NeighborsBase",
      "sklearn/neighbors/base.py::NeighborsBase._fit",
      "sklearn/neighbors/base.py::KNeighborsMixin",
      "sklearn/neighbors/base.py::KNeighborsMixin.kneighbors"
    ]
  },
  "predictions": [
    "sklearn/neighbors/tests/test_neighbors.py::test_neighbors_badargs",
    "sklearn/neighbors/tests/test_neighbors.py::test_unsupervised_inputs",
    "sklearn/neighbors/tests/test_neighbors.py::test_kneighbors_classifier_float_labels",
    "sklearn/neighbors/tests/test_approximate.py::test_kneighbors",
    "sklearn/neighbors/tests/test_neighbors.py::test_non_euclidean_kneighbors",
    "sklearn/neighbors/tests/test_neighbors.py::test_dtype_convert",
    "sklearn/neighbors/tests/test_neighbors.py::test_kneighbors_classifier",
    "sklearn/neighbors/unsupervised.py::NearestNeighbors.__init__",
    "sklearn/neighbors/regression.py::KNeighborsRegressor.__init__",
    "sklearn/neighbors/tests/test_neighbors.py::test_kneighbors_regressor"
  ],
  "metadata": {
    "repo": "scikit-learn/scikit-learn",
    "commit": "96a02f3934952d486589dddd3f00b40d5a5ab5f2",
    "total_functions_indexed": 6244,
    "retrieval_time_seconds": 0.09188437461853027
  },
  "raw_output": "[{\"doc_id\": \"sklearn/neighbors/tests/test_neighbors.py::test_neighbors_badargs\", \"score\": 0.42574262619018555}, {\"doc_id\": \"sklearn/neighbors/tests/test_neighbors.py::test_unsupervised_inputs\", \"score\": 0.4182472229003906}, {\"doc_id\": \"sklearn/neighbors/tests/test_neighbors.py::test_kneighbors_classifier_float_labels\", \"score\": 0.4164212942123413}, {\"doc_id\": \"sklearn/neighbors/tests/test_approximate.py::test_kneighbors\", \"score\": 0.4054655432701111}, {\"doc_id\": \"sklearn/neighbors/tests/test_neighbors.py::test_non_euclidean_kneighbors\", \"score\": 0.3997015953063965}, {\"doc_id\": \"sklearn/neighbors/tests/test_neighbors.py::test_dtype_convert\", \"score\": 0.38728588819503784}, {\"doc_id\": \"sklearn/neighbors/tests/test_neighbors.py::test_kneighbors_classifier\", \"score\": 0.3737257719039917}, {\"doc_id\": \"sklearn/neighbors/unsupervised.py::NearestNeighbors.__init__\", \"score\": 0.3663535714149475}, {\"doc_id\": \"sklearn/neighbors/regression.py::KNeighborsRegressor.__init__\", \"score\": 0.3660327196121216}, {\"doc_id\": \"sklearn/neighbors/tests/test_neighbors.py::test_kneighbors_regressor\", \"score\": 0.3658044934272766}]"
}