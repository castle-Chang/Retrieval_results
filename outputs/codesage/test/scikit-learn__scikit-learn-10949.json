{
  "instance_id": "scikit-learn__scikit-learn-10949",
  "query": "warn_on_dtype with DataFrame\n#### Description\r\n\r\n``warn_on_dtype`` has no effect when input is a pandas ``DataFrame``\r\n\r\n#### Steps/Code to Reproduce\r\n```python\r\nfrom sklearn.utils.validation import check_array\r\nimport pandas as pd\r\ndf = pd.DataFrame([[1, 2, 3], [2, 3, 4]], dtype=object)\r\nchecked = check_array(df, warn_on_dtype=True)\r\n```\r\n\r\n#### Expected result: \r\n\r\n```python-traceback\r\nDataConversionWarning: Data with input dtype object was converted to float64.\r\n```\r\n\r\n#### Actual Results\r\nNo warning is thrown\r\n\r\n#### Versions\r\nLinux-4.4.0-116-generic-x86_64-with-debian-stretch-sid\r\nPython 3.6.3 |Anaconda, Inc.| (default, Nov  3 2017, 19:19:16) \r\n[GCC 7.2.0]\r\nNumPy 1.13.1\r\nSciPy 0.19.1\r\nScikit-Learn 0.20.dev0\r\nPandas 0.21.0\r\n\nwarn_on_dtype with DataFrame\n#### Description\r\n\r\n``warn_on_dtype`` has no effect when input is a pandas ``DataFrame``\r\n\r\n#### Steps/Code to Reproduce\r\n```python\r\nfrom sklearn.utils.validation import check_array\r\nimport pandas as pd\r\ndf = pd.DataFrame([[1, 2, 3], [2, 3, 4]], dtype=object)\r\nchecked = check_array(df, warn_on_dtype=True)\r\n```\r\n\r\n#### Expected result: \r\n\r\n```python-traceback\r\nDataConversionWarning: Data with input dtype object was converted to float64.\r\n```\r\n\r\n#### Actual Results\r\nNo warning is thrown\r\n\r\n#### Versions\r\nLinux-4.4.0-116-generic-x86_64-with-debian-stretch-sid\r\nPython 3.6.3 |Anaconda, Inc.| (default, Nov  3 2017, 19:19:16) \r\n[GCC 7.2.0]\r\nNumPy 1.13.1\r\nSciPy 0.19.1\r\nScikit-Learn 0.20.dev0\r\nPandas 0.21.0\r\n\n",
  "ground_truth": {
    "files": [
      "sklearn/utils/validation.py"
    ],
    "locations": [
      "sklearn/utils/validation.py::check_array"
    ]
  },
  "predictions": [
    "sklearn/utils/tests/test_validation.py::test_check_array_pandas_dtype_object_conversion",
    "sklearn/utils/tests/test_validation.py::test_check_array_dtype_warning",
    "sklearn/preprocessing/tests/test_data.py::test_warning_scaling_integers",
    "sklearn/utils/tests/test_validation.py::test_check_array_on_mock_dataframe",
    "sklearn/utils/tests/test_validation.py::test_check_array_dtype_stability",
    "sklearn/utils/estimator_checks.py::check_supervised_y_2d",
    "sklearn/ensemble/tests/test_gradient_boosting.py::test_shape_y",
    "sklearn/utils/tests/test_estimator_checks.py::NoSampleWeightPandasSeriesType.fit",
    "sklearn/feature_selection/tests/test_feature_select.py::test_f_oneway_ints",
    "sklearn/decomposition/tests/test_pca.py::test_pca_dtype_preservation"
  ],
  "metadata": {
    "repo": "scikit-learn/scikit-learn",
    "commit": "3b5abf76597ce6aff76192869f92647c1b5259e7",
    "total_functions_indexed": 6045,
    "retrieval_time_seconds": 0.16721868515014648
  },
  "raw_output": "[{\"doc_id\": \"sklearn/utils/tests/test_validation.py::test_check_array_pandas_dtype_object_conversion\", \"score\": 0.5786716938018799}, {\"doc_id\": \"sklearn/utils/tests/test_validation.py::test_check_array_dtype_warning\", \"score\": 0.5627422332763672}, {\"doc_id\": \"sklearn/preprocessing/tests/test_data.py::test_warning_scaling_integers\", \"score\": 0.5146323442459106}, {\"doc_id\": \"sklearn/utils/tests/test_validation.py::test_check_array_on_mock_dataframe\", \"score\": 0.472198486328125}, {\"doc_id\": \"sklearn/utils/tests/test_validation.py::test_check_array_dtype_stability\", \"score\": 0.42948055267333984}, {\"doc_id\": \"sklearn/utils/estimator_checks.py::check_supervised_y_2d\", \"score\": 0.39587074518203735}, {\"doc_id\": \"sklearn/ensemble/tests/test_gradient_boosting.py::test_shape_y\", \"score\": 0.3638457953929901}, {\"doc_id\": \"sklearn/utils/tests/test_estimator_checks.py::NoSampleWeightPandasSeriesType.fit\", \"score\": 0.36061084270477295}, {\"doc_id\": \"sklearn/feature_selection/tests/test_feature_select.py::test_f_oneway_ints\", \"score\": 0.35609930753707886}, {\"doc_id\": \"sklearn/decomposition/tests/test_pca.py::test_pca_dtype_preservation\", \"score\": 0.3336712121963501}]"
}