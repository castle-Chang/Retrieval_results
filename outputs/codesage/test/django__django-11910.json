{
  "instance_id": "django__django-11910",
  "query": "ForeignKey's to_field parameter gets the old field's name when renaming a PrimaryKey.\nDescription\n\t\nHaving these two models \nclass ModelA(models.Model):\n\tfield_wrong = models.CharField('field1', max_length=50, primary_key=True) # I'm a Primary key.\nclass ModelB(models.Model):\n\tfield_fk = models.ForeignKey(ModelA, blank=True, null=True, on_delete=models.CASCADE) \n... migrations applyed ...\nthe ModelA.field_wrong field has been renamed ... and Django recognizes the \"renaming\"\n# Primary key renamed\nclass ModelA(models.Model):\n\tfield_fixed = models.CharField('field1', max_length=50, primary_key=True) # I'm a Primary key.\nAttempts to to_field parameter. \nThe to_field points to the old_name (field_typo) and not to the new one (\"field_fixed\")\nclass Migration(migrations.Migration):\n\tdependencies = [\n\t\t('app1', '0001_initial'),\n\t]\n\toperations = [\n\t\tmigrations.RenameField(\n\t\t\tmodel_name='modela',\n\t\t\told_name='field_wrong',\n\t\t\tnew_name='field_fixed',\n\t\t),\n\t\tmigrations.AlterField(\n\t\t\tmodel_name='modelb',\n\t\t\tname='modela',\n\t\t\tfield=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='app1.ModelB', to_field='field_wrong'),\n\t\t),\n\t]\n",
  "ground_truth": {
    "files": [
      "django/db/migrations/autodetector.py"
    ],
    "locations": [
      "django/db/migrations/autodetector.py::MigrationAutodetector",
      "django/db/migrations/autodetector.py::MigrationAutodetector.generate_altered_fields"
    ]
  },
  "predictions": [
    "tests/schema/tests.py::SchemaTests.test_alter_smallint_pk_to_smallautofield_pk",
    "tests/schema/tests.py::SchemaTests.test_alter_int_pk_to_autofield_pk",
    "tests/schema/tests.py::SchemaTests.test_alter_pk_with_self_referential_field",
    "django/db/migrations/operations/fields.py::RenameField.references_field",
    "tests/schema/tests.py::SchemaTests.test_alter_int_pk_to_bigautofield_pk",
    "tests/schema/tests.py::SchemaTests.test_alter_int_pk_to_int_unique",
    "tests/migrations/test_autodetector.py::AutodetectorTests.test_rename_field_foreign_key_to_field",
    "tests/migrations/test_autodetector.py::AutodetectorTests.test_rename_related_field_preserved_db_column",
    "tests/migrations/test_autodetector.py::AutodetectorTests.test_rename_field_preserved_db_column",
    "tests/schema/tests.py::SchemaTests.test_char_field_pk_to_auto_field"
  ],
  "metadata": {
    "repo": "django/django",
    "commit": "d232fd76a85870daf345fd8f8d617fe7802ae194",
    "total_functions_indexed": 22878,
    "retrieval_time_seconds": 0.006886959075927734
  },
  "raw_output": "[{\"doc_id\": \"tests/schema/tests.py::SchemaTests.test_alter_smallint_pk_to_smallautofield_pk\", \"score\": 0.6453902721405029}, {\"doc_id\": \"tests/schema/tests.py::SchemaTests.test_alter_int_pk_to_autofield_pk\", \"score\": 0.6320816278457642}, {\"doc_id\": \"tests/schema/tests.py::SchemaTests.test_alter_pk_with_self_referential_field\", \"score\": 0.6308456659317017}, {\"doc_id\": \"django/db/migrations/operations/fields.py::RenameField.references_field\", \"score\": 0.6099602580070496}, {\"doc_id\": \"tests/schema/tests.py::SchemaTests.test_alter_int_pk_to_bigautofield_pk\", \"score\": 0.6009975075721741}, {\"doc_id\": \"tests/schema/tests.py::SchemaTests.test_alter_int_pk_to_int_unique\", \"score\": 0.5942635536193848}, {\"doc_id\": \"tests/migrations/test_autodetector.py::AutodetectorTests.test_rename_field_foreign_key_to_field\", \"score\": 0.5854620933532715}, {\"doc_id\": \"tests/migrations/test_autodetector.py::AutodetectorTests.test_rename_related_field_preserved_db_column\", \"score\": 0.5731363892555237}, {\"doc_id\": \"tests/migrations/test_autodetector.py::AutodetectorTests.test_rename_field_preserved_db_column\", \"score\": 0.5670075416564941}, {\"doc_id\": \"tests/schema/tests.py::SchemaTests.test_char_field_pk_to_auto_field\", \"score\": 0.5608047246932983}]"
}