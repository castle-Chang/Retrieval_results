{
  "instance_id": "django__django-12747",
  "query": "QuerySet.Delete - inconsistent result when zero objects deleted\nDescription\n\t\nThe result format of the QuerySet.Delete method is a tuple: (X, Y) \nX - is the total amount of deleted objects (including foreign key deleted objects)\nY - is a dictionary specifying counters of deleted objects for each specific model (the key is the _meta.label of the model and the value is counter of deleted objects of this model).\nExample: <class 'tuple'>: (2, {'my_app.FileAccess': 1, 'my_app.File': 1})\nWhen there are zero objects to delete in total - the result is inconsistent:\nFor models with foreign keys - the result will be: <class 'tuple'>: (0, {})\nFor \"simple\" models without foreign key - the result will be: <class 'tuple'>: (0, {'my_app.BlockLibrary': 0})\nI would expect there will be no difference between the two cases: Either both will have the empty dictionary OR both will have dictionary with model-label keys and zero value.\n",
  "ground_truth": {
    "files": [
      "django/db/models/deletion.py"
    ],
    "locations": [
      "django/db/models/deletion.py::Collector",
      "django/db/models/deletion.py::Collector.delete"
    ]
  },
  "predictions": [
    "django/db/models/query.py::QuerySet.delete",
    "django/db/models/deletion.py::Collector.delete",
    "django/db/models/query.py::QuerySet._raw_delete",
    "django/db/models/sql/subqueries.py::DeleteQuery.delete_batch",
    "tests/delete/tests.py::DeletionTests.test_queryset_delete_returns_num_rows",
    "tests/delete/tests.py::DeletionTests.test_model_delete_returns_num_rows",
    "django/db/models/deletion.py::Collector.collect",
    "django/db/models/sql/subqueries.py::DeleteQuery.do_query",
    "django/contrib/admin/utils.py::get_deleted_objects",
    "tests/delete/tests.py::DeletionTests.test_bulk"
  ],
  "metadata": {
    "repo": "django/django",
    "commit": "c86201b6ed4f8256b0a0520c08aa674f623d4127",
    "total_functions_indexed": 23411,
    "retrieval_time_seconds": 0.008174896240234375
  },
  "raw_output": "[{\"doc_id\": \"django/db/models/query.py::QuerySet.delete\", \"score\": 0.5017209053039551}, {\"doc_id\": \"django/db/models/deletion.py::Collector.delete\", \"score\": 0.4490496814250946}, {\"doc_id\": \"django/db/models/query.py::QuerySet._raw_delete\", \"score\": 0.43120020627975464}, {\"doc_id\": \"django/db/models/sql/subqueries.py::DeleteQuery.delete_batch\", \"score\": 0.43091195821762085}, {\"doc_id\": \"tests/delete/tests.py::DeletionTests.test_queryset_delete_returns_num_rows\", \"score\": 0.42435312271118164}, {\"doc_id\": \"tests/delete/tests.py::DeletionTests.test_model_delete_returns_num_rows\", \"score\": 0.32629334926605225}, {\"doc_id\": \"django/db/models/deletion.py::Collector.collect\", \"score\": 0.317638099193573}, {\"doc_id\": \"django/db/models/sql/subqueries.py::DeleteQuery.do_query\", \"score\": 0.29730916023254395}, {\"doc_id\": \"django/contrib/admin/utils.py::get_deleted_objects\", \"score\": 0.29614269733428955}, {\"doc_id\": \"tests/delete/tests.py::DeletionTests.test_bulk\", \"score\": 0.29068732261657715}]"
}