{
  "instance_id": "matplotlib__matplotlib-25433",
  "query": "[Bug]: using clf and pyplot.draw in range slider on_changed callback blocks input to widgets\n### Bug summary\n\nWhen using clear figure, adding new widgets and then redrawing the current figure in the on_changed callback of a range slider the inputs to all the widgets in the figure are blocked. When doing the same in the button callback on_clicked, everything works fine.\n\n### Code for reproduction\n\n```python\nimport matplotlib.pyplot as pyplot\r\nimport matplotlib.widgets as widgets\r\n\r\ndef onchanged(values):\r\n    print(\"on changed\")\r\n    print(values)\r\n    pyplot.clf()\r\n    addElements()\r\n    pyplot.draw()\r\n\r\ndef onclick(e):\r\n    print(\"on click\")\r\n    pyplot.clf()\r\n    addElements()\r\n    pyplot.draw()\r\n\r\ndef addElements():\r\n    ax = pyplot.axes([0.1, 0.45, 0.8, 0.1])\r\n    global slider\r\n    slider = widgets.RangeSlider(ax, \"Test\", valmin=1, valmax=10, valinit=(1, 10))\r\n    slider.on_changed(onchanged)\r\n    ax = pyplot.axes([0.1, 0.30, 0.8, 0.1])\r\n    global button\r\n    button = widgets.Button(ax, \"Test\")\r\n    button.on_clicked(onclick)\r\n\r\naddElements()\r\n\r\npyplot.show()\n```\n\n\n### Actual outcome\n\nThe widgets can't receive any input from a mouse click, when redrawing in the on_changed callback of a range Slider. \r\nWhen using a button, there is no problem.\n\n### Expected outcome\n\nThe range slider callback on_changed behaves the same as the button callback on_clicked.\n\n### Additional information\n\nThe problem also occurred on Manjaro with:\r\n- Python version: 3.10.9\r\n- Matplotlib version: 3.6.2\r\n- Matplotlib backend: QtAgg\r\n- Installation of matplotlib via Linux package manager\r\n\n\n### Operating system\n\nWindows 10\n\n### Matplotlib Version\n\n3.6.2\n\n### Matplotlib Backend\n\nTkAgg\n\n### Python version\n\n3.11.0\n\n### Jupyter version\n\n_No response_\n\n### Installation\n\npip\n",
  "ground_truth": {
    "files": [
      "lib/matplotlib/figure.py"
    ],
    "locations": [
      "lib/matplotlib/figure.py::FigureBase",
      "lib/matplotlib/figure.py::FigureBase.delaxes"
    ]
  },
  "predictions": [
    "lib/matplotlib/tests/test_widgets.py::test_range_slider",
    "lib/matplotlib/tests/test_widgets.py::test_range_slider_same_init_values",
    "lib/matplotlib/tests/test_widgets.py::test_slider_slidermin_slidermax",
    "lib/matplotlib/testing/widgets.py::noop",
    "lib/matplotlib/tests/test_widgets.py::test_slider_horizontal_vertical",
    "lib/matplotlib/widgets.py::RangeSlider.on_changed",
    "galleries/examples/widgets/slider_demo.py::reset",
    "lib/matplotlib/tests/test_widgets.py::test_slider_slidermin_slidermax_invalid",
    "lib/matplotlib/tests/tinypages/range6.py::range10",
    "lib/matplotlib/tests/test_widgets.py::ax"
  ],
  "metadata": {
    "repo": "matplotlib/matplotlib",
    "commit": "7eafdd8af3c523c1c77b027d378fb337dd489f18",
    "total_functions_indexed": 9112,
    "retrieval_time_seconds": 0.003815174102783203
  },
  "raw_output": "[{\"doc_id\": \"lib/matplotlib/tests/test_widgets.py::test_range_slider\", \"score\": 0.4871905446052551}, {\"doc_id\": \"lib/matplotlib/tests/test_widgets.py::test_range_slider_same_init_values\", \"score\": 0.4653874933719635}, {\"doc_id\": \"lib/matplotlib/tests/test_widgets.py::test_slider_slidermin_slidermax\", \"score\": 0.4395046830177307}, {\"doc_id\": \"lib/matplotlib/testing/widgets.py::noop\", \"score\": 0.42581701278686523}, {\"doc_id\": \"lib/matplotlib/tests/test_widgets.py::test_slider_horizontal_vertical\", \"score\": 0.4160614609718323}, {\"doc_id\": \"lib/matplotlib/widgets.py::RangeSlider.on_changed\", \"score\": 0.41493940353393555}, {\"doc_id\": \"galleries/examples/widgets/slider_demo.py::reset\", \"score\": 0.4127526581287384}, {\"doc_id\": \"lib/matplotlib/tests/test_widgets.py::test_slider_slidermin_slidermax_invalid\", \"score\": 0.4113841652870178}, {\"doc_id\": \"lib/matplotlib/tests/tinypages/range6.py::range10\", \"score\": 0.41009026765823364}, {\"doc_id\": \"lib/matplotlib/tests/test_widgets.py::ax\", \"score\": 0.40881651639938354}]"
}