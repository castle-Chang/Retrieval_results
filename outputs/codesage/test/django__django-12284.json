{
  "instance_id": "django__django-12284",
  "query": "Model.get_FOO_display() does not work correctly with inherited choices.\nDescription\n\t \n\t\t(last modified by Mariusz Felisiak)\n\t \nGiven a base model with choices A containing 3 tuples\nChild Model inherits the base model overrides the choices A and adds 2 more tuples\nget_foo_display does not work correctly for the new tuples added\nExample:\nclass A(models.Model):\n foo_choice = [(\"A\",\"output1\"),(\"B\",\"output2\")]\n field_foo = models.CharField(max_length=254,choices=foo_choice)\n class Meta:\n\t abstract = True\nclass B(A):\n foo_choice = [(\"A\",\"output1\"),(\"B\",\"output2\"),(\"C\",\"output3\")]\n field_foo = models.CharField(max_length=254,choices=foo_choice)\nUpon invoking get_field_foo_display() on instance of B , \nFor value \"A\" and \"B\" the output works correctly i.e. returns \"output1\" / \"output2\"\nbut for value \"C\" the method returns \"C\" and not \"output3\" which is the expected behaviour\n",
  "ground_truth": {
    "files": [
      "django/db/models/fields/__init__.py"
    ],
    "locations": [
      "django/db/models/fields/__init__.py::Field",
      "django/db/models/fields/__init__.py::Field.contribute_to_class"
    ]
  },
  "predictions": [
    "tests/model_fields/tests.py::GetFieldDisplayTests.test_overriding_FIELD_display",
    "tests/model_fields/tests.py::GetFieldDisplayTests.test_choices_and_field_display",
    "tests/model_fields/tests.py::GetChoicesOrderingTests.setUpTestData",
    "tests/postgres_tests/test_ranges.py::BasicTests.test_get_field_display",
    "tests/model_fields/tests.py::GetChoicesLimitChoicesToTests.setUpTestData",
    "tests/model_fields/tests.py::GetChoicesOrderingTests.test_get_choices_default_ordering",
    "tests/model_regress/tests.py::ModelTests.test_empty_choice",
    "django/db/models/base.py::Model._get_FIELD_display",
    "tests/model_fields/tests.py::GetFieldDisplayTests.test_get_FIELD_display_translated",
    "tests/model_forms/test_modelchoicefield.py::ModelChoiceFieldTests.test_queryset_manager"
  ],
  "metadata": {
    "repo": "django/django",
    "commit": "c5e373d48cbdd923575956fed477b63d66d9603f",
    "total_functions_indexed": 23160,
    "retrieval_time_seconds": 0.006985187530517578
  },
  "raw_output": "[{\"doc_id\": \"tests/model_fields/tests.py::GetFieldDisplayTests.test_overriding_FIELD_display\", \"score\": 0.6259033679962158}, {\"doc_id\": \"tests/model_fields/tests.py::GetFieldDisplayTests.test_choices_and_field_display\", \"score\": 0.5579791069030762}, {\"doc_id\": \"tests/model_fields/tests.py::GetChoicesOrderingTests.setUpTestData\", \"score\": 0.512089192867279}, {\"doc_id\": \"tests/postgres_tests/test_ranges.py::BasicTests.test_get_field_display\", \"score\": 0.4716234803199768}, {\"doc_id\": \"tests/model_fields/tests.py::GetChoicesLimitChoicesToTests.setUpTestData\", \"score\": 0.459454208612442}, {\"doc_id\": \"tests/model_fields/tests.py::GetChoicesOrderingTests.test_get_choices_default_ordering\", \"score\": 0.4586527943611145}, {\"doc_id\": \"tests/model_regress/tests.py::ModelTests.test_empty_choice\", \"score\": 0.454325795173645}, {\"doc_id\": \"django/db/models/base.py::Model._get_FIELD_display\", \"score\": 0.45312100648880005}, {\"doc_id\": \"tests/model_fields/tests.py::GetFieldDisplayTests.test_get_FIELD_display_translated\", \"score\": 0.45051634311676025}, {\"doc_id\": \"tests/model_forms/test_modelchoicefield.py::ModelChoiceFieldTests.test_queryset_manager\", \"score\": 0.444806307554245}]"
}