{
  "instance_id": "django__django-14382",
  "query": "django-admin startapp with trailing slash in directory name results in error\nDescription\n\t\nBash tab-completion appends trailing slashes to directory names. django-admin startapp name directory/ results in the error:\nCommandError: '' is not a valid app directory. Please make sure the directory is a valid identifier.\nThe error is caused by â€‹line 77 of django/core/management/templates.py by calling basename() on the path with no consideration for a trailing slash:\nself.validate_name(os.path.basename(target), 'directory')\nRemoving potential trailing slashes would solve the problem:\nself.validate_name(os.path.basename(target.rstrip(os.sep)), 'directory')\n",
  "ground_truth": {
    "files": [
      "django/core/management/templates.py"
    ],
    "locations": [
      "django/core/management/templates.py::TemplateCommand",
      "django/core/management/templates.py::TemplateCommand.handle"
    ]
  },
  "predictions": [
    "tests/admin_scripts/tests.py::StartApp.test_invalid_target_name",
    "tests/admin_scripts/tests.py::StartApp.test_invalid_name",
    "django/core/management/commands/startapp.py::Command.handle",
    "django/core/management/templates.py::TemplateCommand.validate_name",
    "django/core/checks/urls.py::E006",
    "django/contrib/sites/models.py::_simple_domain_name_validator",
    "django/middleware/common.py::CommonMiddleware.should_redirect_with_slash",
    "django/contrib/flatpages/forms.py::FlatpageForm.clean_url",
    "tests/admin_scripts/tests.py::StartApp.test_importable_target_name",
    "tests/admin_scripts/tests.py::DjangoAdminSettingsDirectory.test_startapp_unicode_name"
  ],
  "metadata": {
    "repo": "django/django",
    "commit": "29345aecf6e8d53ccb3577a3762bb0c263f7558d",
    "total_functions_indexed": 24573,
    "retrieval_time_seconds": 0.008087873458862305
  },
  "raw_output": "[{\"doc_id\": \"tests/admin_scripts/tests.py::StartApp.test_invalid_target_name\", \"score\": 0.5369167327880859}, {\"doc_id\": \"tests/admin_scripts/tests.py::StartApp.test_invalid_name\", \"score\": 0.41843095421791077}, {\"doc_id\": \"django/core/management/commands/startapp.py::Command.handle\", \"score\": 0.3966054320335388}, {\"doc_id\": \"django/core/management/templates.py::TemplateCommand.validate_name\", \"score\": 0.381491482257843}, {\"doc_id\": \"django/core/checks/urls.py::E006\", \"score\": 0.3469560146331787}, {\"doc_id\": \"django/contrib/sites/models.py::_simple_domain_name_validator\", \"score\": 0.34606343507766724}, {\"doc_id\": \"django/middleware/common.py::CommonMiddleware.should_redirect_with_slash\", \"score\": 0.3429986834526062}, {\"doc_id\": \"django/contrib/flatpages/forms.py::FlatpageForm.clean_url\", \"score\": 0.3341900706291199}, {\"doc_id\": \"tests/admin_scripts/tests.py::StartApp.test_importable_target_name\", \"score\": 0.33374786376953125}, {\"doc_id\": \"tests/admin_scripts/tests.py::DjangoAdminSettingsDirectory.test_startapp_unicode_name\", \"score\": 0.3306954801082611}]"
}