{
  "instance_id": "scikit-learn__scikit-learn-10508",
  "query": "LabelEncoder transform fails for empty lists (for certain inputs)\nPython 3.6.3, scikit_learn 0.19.1\r\n\r\nDepending on which datatypes were used to fit the LabelEncoder, transforming empty lists works or not. Expected behavior would be that empty arrays are returned in both cases.\r\n\r\n```python\r\n>>> from sklearn.preprocessing import LabelEncoder\r\n>>> le = LabelEncoder()\r\n>>> le.fit([1,2])\r\nLabelEncoder()\r\n>>> le.transform([])\r\narray([], dtype=int64)\r\n>>> le.fit([\"a\",\"b\"])\r\nLabelEncoder()\r\n>>> le.transform([])\r\nTraceback (most recent call last):\r\n  File \"[...]\\Python36\\lib\\site-packages\\numpy\\core\\fromnumeric.py\", line 57, in _wrapfunc\r\n    return getattr(obj, method)(*args, **kwds)\r\nTypeError: Cannot cast array data from dtype('float64') to dtype('<U32') according to the rule 'safe'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"[...]\\Python36\\lib\\site-packages\\sklearn\\preprocessing\\label.py\", line 134, in transform\r\n    return np.searchsorted(self.classes_, y)\r\n  File \"[...]\\Python36\\lib\\site-packages\\numpy\\core\\fromnumeric.py\", line 1075, in searchsorted\r\n    return _wrapfunc(a, 'searchsorted', v, side=side, sorter=sorter)\r\n  File \"[...]\\Python36\\lib\\site-packages\\numpy\\core\\fromnumeric.py\", line 67, in _wrapfunc\r\n    return _wrapit(obj, method, *args, **kwds)\r\n  File \"[...]\\Python36\\lib\\site-packages\\numpy\\core\\fromnumeric.py\", line 47, in _wrapit\r\n    result = getattr(asarray(obj), method)(*args, **kwds)\r\nTypeError: Cannot cast array data from dtype('float64') to dtype('<U32') according to the rule 'safe'\r\n```\n",
  "ground_truth": {
    "files": [
      "sklearn/preprocessing/label.py"
    ],
    "locations": [
      "sklearn/preprocessing/label.py::LabelEncoder",
      "sklearn/preprocessing/label.py::LabelEncoder.transform",
      "sklearn/preprocessing/label.py::LabelEncoder.inverse_transform"
    ]
  },
  "predictions": [
    "sklearn/preprocessing/label.py::LabelEncoder.transform",
    "sklearn/preprocessing/label.py::LabelEncoder.fit",
    "sklearn/preprocessing/tests/test_label.py::test_label_encoder_fit_transform",
    "sklearn/preprocessing/label.py::LabelEncoder.fit_transform",
    "sklearn/preprocessing/tests/test_label.py::test_label_encoder",
    "sklearn/preprocessing/tests/test_label.py::toarray",
    "sklearn/externals/six.py::itervalues",
    "sklearn/utils/estimator_checks.py::check_dtype_object",
    "sklearn/feature_extraction/dict_vectorizer.py::_tosequence",
    "sklearn/preprocessing/tests/test_data.py::test_categorical_encoder_specified_categories"
  ],
  "metadata": {
    "repo": "scikit-learn/scikit-learn",
    "commit": "c753b77ac49e72ebc0fe5e3c2369fe628f975017",
    "total_functions_indexed": 5839,
    "retrieval_time_seconds": 0.4819300174713135
  },
  "raw_output": "[{\"doc_id\": \"sklearn/preprocessing/label.py::LabelEncoder.transform\", \"score\": 0.307509183883667}, {\"doc_id\": \"sklearn/preprocessing/label.py::LabelEncoder.fit\", \"score\": 0.30509674549102783}, {\"doc_id\": \"sklearn/preprocessing/tests/test_label.py::test_label_encoder_fit_transform\", \"score\": 0.30476218461990356}, {\"doc_id\": \"sklearn/preprocessing/label.py::LabelEncoder.fit_transform\", \"score\": 0.28281447291374207}, {\"doc_id\": \"sklearn/preprocessing/tests/test_label.py::test_label_encoder\", \"score\": 0.2682400643825531}, {\"doc_id\": \"sklearn/preprocessing/tests/test_label.py::toarray\", \"score\": 0.26487451791763306}, {\"doc_id\": \"sklearn/externals/six.py::itervalues\", \"score\": 0.26158544421195984}, {\"doc_id\": \"sklearn/utils/estimator_checks.py::check_dtype_object\", \"score\": 0.25737446546554565}, {\"doc_id\": \"sklearn/feature_extraction/dict_vectorizer.py::_tosequence\", \"score\": 0.2573399543762207}, {\"doc_id\": \"sklearn/preprocessing/tests/test_data.py::test_categorical_encoder_specified_categories\", \"score\": 0.2533937096595764}]"
}