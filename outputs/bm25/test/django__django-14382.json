{
  "instance_id": "django__django-14382",
  "query": "django-admin startapp with trailing slash in directory name results in error\nDescription\n\t\nBash tab-completion appends trailing slashes to directory names. django-admin startapp name directory/ results in the error:\nCommandError: '' is not a valid app directory. Please make sure the directory is a valid identifier.\nThe error is caused by â€‹line 77 of django/core/management/templates.py by calling basename() on the path with no consideration for a trailing slash:\nself.validate_name(os.path.basename(target), 'directory')\nRemoving potential trailing slashes would solve the problem:\nself.validate_name(os.path.basename(target.rstrip(os.sep)), 'directory')\n",
  "ground_truth": {
    "files": [
      "django/core/management/templates.py"
    ],
    "locations": [
      "django/core/management/templates.py::TemplateCommand",
      "django/core/management/templates.py::TemplateCommand.handle"
    ]
  },
  "predictions": [
    "tests/admin_scripts/tests.py::StartApp.test_invalid_target_name",
    "tests/admin_scripts/tests.py::StartApp.test_importable_target_name",
    "tests/admin_scripts/tests.py::StartApp.test_invalid_name",
    "tests/admin_scripts/tests.py::DjangoAdminSettingsDirectory.test_setup_environ_custom_template",
    "django/core/management/templates.py::TemplateCommand.validate_name",
    "tests/admin_scripts/tests.py::DjangoAdminSettingsDirectory.test_setup_environ",
    "django/test/runner.py::find_top_level",
    "tests/test_runner/test_discover_runner.py::DiscoverRunnerTests.test_empty_label",
    "django/core/files/storage.py::FileSystemStorage._save",
    "django/contrib/staticfiles/finders.py::FileSystemFinder.check"
  ],
  "metadata": {
    "repo": "django/django",
    "commit": "29345aecf6e8d53ccb3577a3762bb0c263f7558d",
    "total_functions_indexed": 24573,
    "retrieval_time_seconds": 0.9252026081085205
  },
  "raw_output": "[{\"doc_id\": \"tests/admin_scripts/tests.py::StartApp.test_invalid_target_name\", \"score\": 157.5521133678717}, {\"doc_id\": \"tests/admin_scripts/tests.py::StartApp.test_importable_target_name\", \"score\": 136.53540705860595}, {\"doc_id\": \"tests/admin_scripts/tests.py::StartApp.test_invalid_name\", \"score\": 130.360893180069}, {\"doc_id\": \"tests/admin_scripts/tests.py::DjangoAdminSettingsDirectory.test_setup_environ_custom_template\", \"score\": 124.8606954896388}, {\"doc_id\": \"django/core/management/templates.py::TemplateCommand.validate_name\", \"score\": 120.21601803396118}, {\"doc_id\": \"tests/admin_scripts/tests.py::DjangoAdminSettingsDirectory.test_setup_environ\", \"score\": 117.79548033846751}, {\"doc_id\": \"django/test/runner.py::find_top_level\", \"score\": 117.37078167630722}, {\"doc_id\": \"tests/test_runner/test_discover_runner.py::DiscoverRunnerTests.test_empty_label\", \"score\": 117.29195322165788}, {\"doc_id\": \"django/core/files/storage.py::FileSystemStorage._save\", \"score\": 116.55660813899529}, {\"doc_id\": \"django/contrib/staticfiles/finders.py::FileSystemFinder.check\", \"score\": 116.55054460264745}]"
}