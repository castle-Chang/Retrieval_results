{
  "instance_id": "scikit-learn__scikit-learn-10949",
  "query": "warn_on_dtype with DataFrame\n#### Description\r\n\r\n``warn_on_dtype`` has no effect when input is a pandas ``DataFrame``\r\n\r\n#### Steps/Code to Reproduce\r\n```python\r\nfrom sklearn.utils.validation import check_array\r\nimport pandas as pd\r\ndf = pd.DataFrame([[1, 2, 3], [2, 3, 4]], dtype=object)\r\nchecked = check_array(df, warn_on_dtype=True)\r\n```\r\n\r\n#### Expected result: \r\n\r\n```python-traceback\r\nDataConversionWarning: Data with input dtype object was converted to float64.\r\n```\r\n\r\n#### Actual Results\r\nNo warning is thrown\r\n\r\n#### Versions\r\nLinux-4.4.0-116-generic-x86_64-with-debian-stretch-sid\r\nPython 3.6.3 |Anaconda, Inc.| (default, Nov  3 2017, 19:19:16) \r\n[GCC 7.2.0]\r\nNumPy 1.13.1\r\nSciPy 0.19.1\r\nScikit-Learn 0.20.dev0\r\nPandas 0.21.0\r\n\nwarn_on_dtype with DataFrame\n#### Description\r\n\r\n``warn_on_dtype`` has no effect when input is a pandas ``DataFrame``\r\n\r\n#### Steps/Code to Reproduce\r\n```python\r\nfrom sklearn.utils.validation import check_array\r\nimport pandas as pd\r\ndf = pd.DataFrame([[1, 2, 3], [2, 3, 4]], dtype=object)\r\nchecked = check_array(df, warn_on_dtype=True)\r\n```\r\n\r\n#### Expected result: \r\n\r\n```python-traceback\r\nDataConversionWarning: Data with input dtype object was converted to float64.\r\n```\r\n\r\n#### Actual Results\r\nNo warning is thrown\r\n\r\n#### Versions\r\nLinux-4.4.0-116-generic-x86_64-with-debian-stretch-sid\r\nPython 3.6.3 |Anaconda, Inc.| (default, Nov  3 2017, 19:19:16) \r\n[GCC 7.2.0]\r\nNumPy 1.13.1\r\nSciPy 0.19.1\r\nScikit-Learn 0.20.dev0\r\nPandas 0.21.0\r\n\n",
  "ground_truth": {
    "files": [
      "sklearn/utils/validation.py"
    ],
    "locations": [
      "sklearn/utils/validation.py::check_array"
    ]
  },
  "predictions": [
    "sklearn/utils/tests/test_validation.py::test_check_dataframe_fit_attribute",
    "sklearn/utils/estimator_checks.py::check_sample_weights_pandas_series",
    "sklearn/utils/tests/test_utils.py::test_safe_indexing_pandas",
    "sklearn/preprocessing/tests/test_encoders.py::test_encoder_dtypes_pandas",
    "sklearn/metrics/tests/test_classification.py::test_log_loss_pandas_input",
    "setup.py::setup_package",
    "sklearn/utils/validation.py::check_array",
    "sklearn/utils/tests/test_validation.py::test_check_array_dtype_warning",
    "sklearn/utils/validation.py::check_X_y",
    "sklearn/preprocessing/tests/test_encoders.py::test_one_hot_encoder_pandas"
  ],
  "metadata": {
    "repo": "scikit-learn/scikit-learn",
    "commit": "3b5abf76597ce6aff76192869f92647c1b5259e7",
    "total_functions_indexed": 6045,
    "retrieval_time_seconds": 0.49010586738586426
  },
  "raw_output": "[{\"doc_id\": \"sklearn/utils/tests/test_validation.py::test_check_dataframe_fit_attribute\", \"score\": 286.3233094745998}, {\"doc_id\": \"sklearn/utils/estimator_checks.py::check_sample_weights_pandas_series\", \"score\": 244.2916149065444}, {\"doc_id\": \"sklearn/utils/tests/test_utils.py::test_safe_indexing_pandas\", \"score\": 230.65698775391746}, {\"doc_id\": \"sklearn/preprocessing/tests/test_encoders.py::test_encoder_dtypes_pandas\", \"score\": 230.44368825944557}, {\"doc_id\": \"sklearn/metrics/tests/test_classification.py::test_log_loss_pandas_input\", \"score\": 216.09132764939963}, {\"doc_id\": \"setup.py::setup_package\", \"score\": 198.06201912790394}, {\"doc_id\": \"sklearn/utils/validation.py::check_array\", \"score\": 192.67893635150693}, {\"doc_id\": \"sklearn/utils/tests/test_validation.py::test_check_array_dtype_warning\", \"score\": 184.3365727277918}, {\"doc_id\": \"sklearn/utils/validation.py::check_X_y\", \"score\": 182.7675004234161}, {\"doc_id\": \"sklearn/preprocessing/tests/test_encoders.py::test_one_hot_encoder_pandas\", \"score\": 175.50267178736962}]"
}