{
  "instance_id": "psf__requests-1963",
  "query": "`Session.resolve_redirects` copies the original request for all subsequent requests, can cause incorrect method selection\nConsider the following redirection chain:\n\n```\nPOST /do_something HTTP/1.1\nHost: server.example.com\n...\n\nHTTP/1.1 303 See Other\nLocation: /new_thing_1513\n\nGET /new_thing_1513\nHost: server.example.com\n...\n\nHTTP/1.1 307 Temporary Redirect\nLocation: //failover.example.com/new_thing_1513\n```\n\nThe intermediate 303 See Other has caused the POST to be converted to\na GET.  The subsequent 307 should preserve the GET.  However, because\n`Session.resolve_redirects` starts each iteration by copying the _original_\nrequest object, Requests will issue a POST!\n\n",
  "ground_truth": {
    "files": [
      "requests/sessions.py"
    ],
    "locations": [
      "requests/sessions.py::SessionRedirectMixin",
      "requests/sessions.py::SessionRedirectMixin.resolve_redirects"
    ]
  },
  "predictions": [
    "test_requests.py::RequestsTestCase.test_params_are_added_before_fragment",
    "requests/api.py::request",
    "requests/packages/urllib3/connectionpool.py::HTTPConnectionPool.urlopen",
    "requests/sessions.py::SessionRedirectMixin.resolve_redirects",
    "requests/packages/urllib3/util.py::parse_url",
    "requests/packages/urllib3/connectionpool.py::connection_from_url",
    "requests/models.py::PreparedRequest.__init__",
    "requests/sessions.py::Session.__init__",
    "requests/sessions.py::Session.post",
    "requests/models.py::Response.__init__"
  ],
  "metadata": {
    "repo": "psf/requests",
    "commit": "110048f9837f8441ea536804115e80b69f400277",
    "total_functions_indexed": 587,
    "retrieval_time_seconds": 0.021043062210083008
  },
  "raw_output": "[{\"doc_id\": \"test_requests.py::RequestsTestCase.test_params_are_added_before_fragment\", \"score\": 73.06390692731941}, {\"doc_id\": \"requests/api.py::request\", \"score\": 63.610032213541785}, {\"doc_id\": \"requests/packages/urllib3/connectionpool.py::HTTPConnectionPool.urlopen\", \"score\": 60.27821803077732}, {\"doc_id\": \"requests/sessions.py::SessionRedirectMixin.resolve_redirects\", \"score\": 57.403250227990746}, {\"doc_id\": \"requests/packages/urllib3/util.py::parse_url\", \"score\": 57.29869824546051}, {\"doc_id\": \"requests/packages/urllib3/connectionpool.py::connection_from_url\", \"score\": 56.79573784816777}, {\"doc_id\": \"requests/models.py::PreparedRequest.__init__\", \"score\": 55.57889467100595}, {\"doc_id\": \"requests/sessions.py::Session.__init__\", \"score\": 54.63617447445395}, {\"doc_id\": \"requests/sessions.py::Session.post\", \"score\": 52.937156151595175}, {\"doc_id\": \"requests/models.py::Response.__init__\", \"score\": 52.6658677764985}]"
}