{
  "instance_id": "django__django-14016",
  "query": "\"TypeError: cannot pickle\" when applying | operator to a Q object\nDescription\n\t \n\t\t(last modified by Daniel Izquierdo)\n\t \nUsing a reference to a non-pickleable type of object such as dict_keys in a Q object makes the | operator fail:\n>>> from django.db.models import Q\n>>> Q(x__in={}.keys())\n<Q: (AND: ('x__in', dict_keys([])))>\n>>> Q() | Q(x__in={}.keys())\nTraceback (most recent call last):\n...\nTypeError: cannot pickle 'dict_keys' object\nEven though this particular example could be solved by doing Q() | Q(x__in={}) it still feels like using .keys() should work.\nI can work on a patch if there's agreement that this should not crash.\n",
  "ground_truth": {
    "files": [
      "django/db/models/query_utils.py"
    ],
    "locations": [
      "django/db/models/query_utils.py::Q",
      "django/db/models/query_utils.py::Q._combine"
    ]
  },
  "predictions": [
    "django/db/models/sql/query.py::Query.exists",
    "tests/httpwrappers/tests.py::QueryDictTests.test_pickle",
    "django/db/models/expressions.py::When.__init__",
    "tests/queries/test_q.py::QTests.test_combine_not_q_object",
    "django/db/models/query.py::QuerySet.complex_filter",
    "django/http/request.py::QueryDict.fromkeys",
    "tests/aggregation_regress/tests.py::AggregationTests.test_ticket_11293_q_immutable",
    "tests/queries/tests.py::Queries1Tests.test_ticket7235",
    "tests/queries/tests.py::NullJoinPromotionOrTest.test_ticket_17886",
    "tests/httpwrappers/tests.py::QueryDictTests.test_immutable_basic_operations"
  ],
  "metadata": {
    "repo": "django/django",
    "commit": "1710cdbe79c90665046034fe1700933d038d90ad",
    "total_functions_indexed": 24279,
    "retrieval_time_seconds": 0.8906984329223633
  },
  "raw_output": "[{\"doc_id\": \"django/db/models/sql/query.py::Query.exists\", \"score\": 115.48185470134676}, {\"doc_id\": \"tests/httpwrappers/tests.py::QueryDictTests.test_pickle\", \"score\": 111.35913206184611}, {\"doc_id\": \"django/db/models/expressions.py::When.__init__\", \"score\": 109.07669817207638}, {\"doc_id\": \"tests/queries/test_q.py::QTests.test_combine_not_q_object\", \"score\": 102.9884930722267}, {\"doc_id\": \"django/db/models/query.py::QuerySet.complex_filter\", \"score\": 102.75483651154649}, {\"doc_id\": \"django/http/request.py::QueryDict.fromkeys\", \"score\": 102.47513143347554}, {\"doc_id\": \"tests/aggregation_regress/tests.py::AggregationTests.test_ticket_11293_q_immutable\", \"score\": 100.30316611064224}, {\"doc_id\": \"tests/queries/tests.py::Queries1Tests.test_ticket7235\", \"score\": 96.78850628367236}, {\"doc_id\": \"tests/queries/tests.py::NullJoinPromotionOrTest.test_ticket_17886\", \"score\": 94.9671646486383}, {\"doc_id\": \"tests/httpwrappers/tests.py::QueryDictTests.test_immutable_basic_operations\", \"score\": 93.96063943174893}]"
}