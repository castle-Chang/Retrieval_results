{
  "instance_id": "scikit-learn__scikit-learn-15535",
  "query": "regression in input validation of clustering metrics\n```python\r\nfrom sklearn.metrics.cluster import mutual_info_score\r\nimport numpy as np\r\n\r\nx = np.random.choice(['a', 'b'], size=20).astype(object)\r\nmutual_info_score(x, x)\r\n```\r\nValueError: could not convert string to float: 'b'\r\n\r\nwhile\r\n```python\r\nx = np.random.choice(['a', 'b'], size=20)\r\nmutual_info_score(x, x)\r\n```\r\nworks with a warning?\r\n\r\nthis worked in 0.21.1 without a warning (as I think it should)\r\n\r\n\r\nEdit by @ogrisel: I removed the `.astype(object)` in the second code snippet.\n",
  "ground_truth": {
    "files": [
      "sklearn/metrics/cluster/_supervised.py"
    ],
    "locations": [
      "sklearn/metrics/cluster/_supervised.py::check_clusterings"
    ]
  },
  "predictions": [
    "sklearn/decomposition/tests/test_kernel_pca.py::test_leave_zero_eig",
    "sklearn/metrics/cluster/_unsupervised.py::silhouette_score",
    "sklearn/datasets/tests/test_lfw.py::setup_module",
    "sklearn/externals/_pilutil.py::imsave",
    "sklearn/metrics/cluster/_supervised.py::adjusted_mutual_info_score",
    "sklearn/metrics/pairwise.py::pairwise_kernels",
    "sklearn/utils/validation.py::check_X_y",
    "sklearn/metrics/tests/test_classification.py::test_matthews_corrcoef",
    "sklearn/feature_extraction/text.py::_VectorizerMixin._validate_custom_analyzer",
    "sklearn/metrics/pairwise.py::paired_distances"
  ],
  "metadata": {
    "repo": "scikit-learn/scikit-learn",
    "commit": "70b0ddea992c01df1a41588fa9e2d130fb6b13f8",
    "total_functions_indexed": 7104,
    "retrieval_time_seconds": 0.3161740303039551
  },
  "raw_output": "[{\"doc_id\": \"sklearn/decomposition/tests/test_kernel_pca.py::test_leave_zero_eig\", \"score\": 69.95671893222561}, {\"doc_id\": \"sklearn/metrics/cluster/_unsupervised.py::silhouette_score\", \"score\": 69.58394452570795}, {\"doc_id\": \"sklearn/datasets/tests/test_lfw.py::setup_module\", \"score\": 68.18592383731043}, {\"doc_id\": \"sklearn/externals/_pilutil.py::imsave\", \"score\": 67.5447899252044}, {\"doc_id\": \"sklearn/metrics/cluster/_supervised.py::adjusted_mutual_info_score\", \"score\": 66.20938497475666}, {\"doc_id\": \"sklearn/metrics/pairwise.py::pairwise_kernels\", \"score\": 65.57460329472703}, {\"doc_id\": \"sklearn/utils/validation.py::check_X_y\", \"score\": 65.5441558353692}, {\"doc_id\": \"sklearn/metrics/tests/test_classification.py::test_matthews_corrcoef\", \"score\": 64.91477287328223}, {\"doc_id\": \"sklearn/feature_extraction/text.py::_VectorizerMixin._validate_custom_analyzer\", \"score\": 64.45386893419915}, {\"doc_id\": \"sklearn/metrics/pairwise.py::paired_distances\", \"score\": 64.45060562417518}]"
}