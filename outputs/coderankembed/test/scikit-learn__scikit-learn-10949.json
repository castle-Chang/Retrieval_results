{
  "instance_id": "scikit-learn__scikit-learn-10949",
  "query": "warn_on_dtype with DataFrame\n#### Description\r\n\r\n``warn_on_dtype`` has no effect when input is a pandas ``DataFrame``\r\n\r\n#### Steps/Code to Reproduce\r\n```python\r\nfrom sklearn.utils.validation import check_array\r\nimport pandas as pd\r\ndf = pd.DataFrame([[1, 2, 3], [2, 3, 4]], dtype=object)\r\nchecked = check_array(df, warn_on_dtype=True)\r\n```\r\n\r\n#### Expected result: \r\n\r\n```python-traceback\r\nDataConversionWarning: Data with input dtype object was converted to float64.\r\n```\r\n\r\n#### Actual Results\r\nNo warning is thrown\r\n\r\n#### Versions\r\nLinux-4.4.0-116-generic-x86_64-with-debian-stretch-sid\r\nPython 3.6.3 |Anaconda, Inc.| (default, Nov  3 2017, 19:19:16) \r\n[GCC 7.2.0]\r\nNumPy 1.13.1\r\nSciPy 0.19.1\r\nScikit-Learn 0.20.dev0\r\nPandas 0.21.0\r\n\nwarn_on_dtype with DataFrame\n#### Description\r\n\r\n``warn_on_dtype`` has no effect when input is a pandas ``DataFrame``\r\n\r\n#### Steps/Code to Reproduce\r\n```python\r\nfrom sklearn.utils.validation import check_array\r\nimport pandas as pd\r\ndf = pd.DataFrame([[1, 2, 3], [2, 3, 4]], dtype=object)\r\nchecked = check_array(df, warn_on_dtype=True)\r\n```\r\n\r\n#### Expected result: \r\n\r\n```python-traceback\r\nDataConversionWarning: Data with input dtype object was converted to float64.\r\n```\r\n\r\n#### Actual Results\r\nNo warning is thrown\r\n\r\n#### Versions\r\nLinux-4.4.0-116-generic-x86_64-with-debian-stretch-sid\r\nPython 3.6.3 |Anaconda, Inc.| (default, Nov  3 2017, 19:19:16) \r\n[GCC 7.2.0]\r\nNumPy 1.13.1\r\nSciPy 0.19.1\r\nScikit-Learn 0.20.dev0\r\nPandas 0.21.0\r\n\n",
  "ground_truth": {
    "files": [
      "sklearn/utils/validation.py"
    ],
    "locations": [
      "sklearn/utils/validation.py::check_array"
    ]
  },
  "predictions": [
    "sklearn/utils/tests/test_validation.py::test_check_array_pandas_dtype_object_conversion",
    "sklearn/utils/tests/test_validation.py::test_check_array_dtype_warning",
    "sklearn/utils/tests/test_validation.py::test_check_array_on_mock_dataframe",
    "sklearn/preprocessing/tests/test_encoders.py::test_encoder_dtypes_pandas",
    "sklearn/utils/tests/test_validation.py::test_check_array_dtype_stability",
    "sklearn/utils/mocking.py::MockDataFrame.__array__",
    "sklearn/preprocessing/tests/test_encoders.py::test_one_hot_encoder_dtype_pandas",
    "sklearn/utils/validation.py::check_array",
    "sklearn/utils/estimator_checks.py::check_dtype_object",
    "sklearn/model_selection/tests/test_validation.py::test_cross_val_predict_pandas"
  ],
  "metadata": {
    "repo": "scikit-learn/scikit-learn",
    "commit": "3b5abf76597ce6aff76192869f92647c1b5259e7",
    "total_functions_indexed": 6045,
    "retrieval_time_seconds": 0.0014939308166503906
  },
  "raw_output": "[{\"doc_id\": \"sklearn/utils/tests/test_validation.py::test_check_array_pandas_dtype_object_conversion\", \"score\": 0.6857305765151978}, {\"doc_id\": \"sklearn/utils/tests/test_validation.py::test_check_array_dtype_warning\", \"score\": 0.6297003030776978}, {\"doc_id\": \"sklearn/utils/tests/test_validation.py::test_check_array_on_mock_dataframe\", \"score\": 0.6004741191864014}, {\"doc_id\": \"sklearn/preprocessing/tests/test_encoders.py::test_encoder_dtypes_pandas\", \"score\": 0.5216195583343506}, {\"doc_id\": \"sklearn/utils/tests/test_validation.py::test_check_array_dtype_stability\", \"score\": 0.5169587135314941}, {\"doc_id\": \"sklearn/utils/mocking.py::MockDataFrame.__array__\", \"score\": 0.4894739091396332}, {\"doc_id\": \"sklearn/preprocessing/tests/test_encoders.py::test_one_hot_encoder_dtype_pandas\", \"score\": 0.47647809982299805}, {\"doc_id\": \"sklearn/utils/validation.py::check_array\", \"score\": 0.4726029634475708}, {\"doc_id\": \"sklearn/utils/estimator_checks.py::check_dtype_object\", \"score\": 0.4696158468723297}, {\"doc_id\": \"sklearn/model_selection/tests/test_validation.py::test_cross_val_predict_pandas\", \"score\": 0.46894770860671997}]"
}