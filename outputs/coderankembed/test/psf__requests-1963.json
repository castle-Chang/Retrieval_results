{
  "instance_id": "psf__requests-1963",
  "query": "`Session.resolve_redirects` copies the original request for all subsequent requests, can cause incorrect method selection\nConsider the following redirection chain:\n\n```\nPOST /do_something HTTP/1.1\nHost: server.example.com\n...\n\nHTTP/1.1 303 See Other\nLocation: /new_thing_1513\n\nGET /new_thing_1513\nHost: server.example.com\n...\n\nHTTP/1.1 307 Temporary Redirect\nLocation: //failover.example.com/new_thing_1513\n```\n\nThe intermediate 303 See Other has caused the POST to be converted to\na GET.  The subsequent 307 should preserve the GET.  However, because\n`Session.resolve_redirects` starts each iteration by copying the _original_\nrequest object, Requests will issue a POST!\n\n",
  "ground_truth": {
    "files": [
      "requests/sessions.py"
    ],
    "locations": [
      "requests/sessions.py::SessionRedirectMixin",
      "requests/sessions.py::SessionRedirectMixin.resolve_redirects"
    ]
  },
  "predictions": [
    "requests/sessions.py::SessionRedirectMixin.resolve_redirects",
    "test_requests.py::RequestsTestCase.test_requests_in_history_are_not_overridden",
    "test_requests.py::RequestsTestCase.test_session_hooks_are_overriden_by_request_hooks",
    "requests/sessions.py::Session.send",
    "test_requests.py::RequestsTestCase.test_request_cookie_overrides_session_cookie",
    "requests/sessions.py::merge_hooks",
    "requests/sessions.py::Session.get",
    "requests/models.py::Response.is_redirect",
    "test_requests.py::RequestsTestCase.test_session_hooks_are_used_with_no_request_hooks",
    "requests/sessions.py::merge_setting"
  ],
  "metadata": {
    "repo": "psf/requests",
    "commit": "110048f9837f8441ea536804115e80b69f400277",
    "total_functions_indexed": 587,
    "retrieval_time_seconds": 0.0006136894226074219
  },
  "raw_output": "[{\"doc_id\": \"requests/sessions.py::SessionRedirectMixin.resolve_redirects\", \"score\": 0.5254177451133728}, {\"doc_id\": \"test_requests.py::RequestsTestCase.test_requests_in_history_are_not_overridden\", \"score\": 0.3819510042667389}, {\"doc_id\": \"test_requests.py::RequestsTestCase.test_session_hooks_are_overriden_by_request_hooks\", \"score\": 0.3555099666118622}, {\"doc_id\": \"requests/sessions.py::Session.send\", \"score\": 0.3462304472923279}, {\"doc_id\": \"test_requests.py::RequestsTestCase.test_request_cookie_overrides_session_cookie\", \"score\": 0.34403926134109497}, {\"doc_id\": \"requests/sessions.py::merge_hooks\", \"score\": 0.32261455059051514}, {\"doc_id\": \"requests/sessions.py::Session.get\", \"score\": 0.306726336479187}, {\"doc_id\": \"requests/models.py::Response.is_redirect\", \"score\": 0.2996860146522522}, {\"doc_id\": \"test_requests.py::RequestsTestCase.test_session_hooks_are_used_with_no_request_hooks\", \"score\": 0.2930324673652649}, {\"doc_id\": \"requests/sessions.py::merge_setting\", \"score\": 0.2926326394081116}]"
}