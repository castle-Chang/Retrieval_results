{
  "instance_id": "django__django-16816",
  "query": "Error E108 does not cover some cases\nDescription\n\t \n\t\t(last modified by Baha Sdtbekov)\n\t \nI have two models, Question and Choice. And if I write list_display = [\"choice\"] in QuestionAdmin, I get no errors.\nBut when I visit /admin/polls/question/, the following trace is returned:\nInternal Server Error: /admin/polls/question/\nTraceback (most recent call last):\n File \"/some/path/django/contrib/admin/utils.py\", line 334, in label_for_field\n\tfield = _get_non_gfk_field(model._meta, name)\n File \"/some/path/django/contrib/admin/utils.py\", line 310, in _get_non_gfk_field\n\traise FieldDoesNotExist()\ndjango.core.exceptions.FieldDoesNotExist\nDuring handling of the above exception, another exception occurred:\nTraceback (most recent call last):\n File \"/some/path/django/core/handlers/exception.py\", line 55, in inner\n\tresponse = get_response(request)\n File \"/some/path/django/core/handlers/base.py\", line 220, in _get_response\n\tresponse = response.render()\n File \"/some/path/django/template/response.py\", line 111, in render\n\tself.content = self.rendered_content\n File \"/some/path/django/template/response.py\", line 89, in rendered_content\n\treturn template.render(context, self._request)\n File \"/some/path/django/template/backends/django.py\", line 61, in render\n\treturn self.template.render(context)\n File \"/some/path/django/template/base.py\", line 175, in render\n\treturn self._render(context)\n File \"/some/path/django/template/base.py\", line 167, in _render\n\treturn self.nodelist.render(context)\n File \"/some/path/django/template/base.py\", line 1005, in render\n\treturn SafeString(\"\".join([node.render_annotated(context) for node in self]))\n File \"/some/path/django/template/base.py\", line 1005, in <listcomp>\n\treturn SafeString(\"\".join([node.render_annotated(context) for node in self]))\n File \"/some/path/django/template/base.py\", line 966, in render_annotated\n\treturn self.render(context)\n File \"/some/path/django/template/loader_tags.py\", line 157, in render\n\treturn compiled_parent._render(context)\n File \"/some/path/django/template/base.py\", line 167, in _render\n\treturn self.nodelist.render(context)\n File \"/some/path/django/template/base.py\", line 1005, in render\n\treturn SafeString(\"\".join([node.render_annotated(context) for node in self]))\n File \"/some/path/django/template/base.py\", line 1005, in <listcomp>\n\treturn SafeString(\"\".join([node.render_annotated(context) for node in self]))\n File \"/some/path/django/template/base.py\", line 966, in render_annotated\n\treturn self.render(context)\n File \"/some/path/django/template/loader_tags.py\", line 157, in render\n\treturn compiled_parent._render(context)\n File \"/some/path/django/template/base.py\", line 167, in _render\n\treturn self.nodelist.render(context)\n File \"/some/path/django/template/base.py\", line 1005, in render\n\treturn SafeString(\"\".join([node.render_annotated(context) for node in self]))\n File \"/some/path/django/template/base.py\", line 1005, in <listcomp>\n\treturn SafeString(\"\".join([node.render_annotated(context) for node in self]))\n File \"/some/path/django/template/base.py\", line 966, in render_annotated\n\treturn self.render(context)\n File \"/some/path/django/template/loader_tags.py\", line 63, in render\n\tresult = block.nodelist.render(context)\n File \"/some/path/django/template/base.py\", line 1005, in render\n\treturn SafeString(\"\".join([node.render_annotated(context) for node in self]))\n File \"/some/path/django/template/base.py\", line 1005, in <listcomp>\n\treturn SafeString(\"\".join([node.render_annotated(context) for node in self]))\n File \"/some/path/django/template/base.py\", line 966, in render_annotated\n\treturn self.render(context)\n File \"/some/path/django/template/loader_tags.py\", line 63, in render\n\tresult = block.nodelist.render(context)\n File \"/some/path/django/template/base.py\", line 1005, in render\n\treturn SafeString(\"\".join([node.render_annotated(context) for node in self]))\n File \"/some/path/django/template/base.py\", line 1005, in <listcomp>\n\treturn SafeString(\"\".join([node.render_annotated(context) for node in self]))\n File \"/some/path/django/template/base.py\", line 966, in render_annotated\n\treturn self.render(context)\n File \"/some/path/django/contrib/admin/templatetags/base.py\", line 45, in render\n\treturn super().render(context)\n File \"/some/path/django/template/library.py\", line 258, in render\n\t_dict = self.func(*resolved_args, **resolved_kwargs)\n File \"/some/path/django/contrib/admin/templatetags/admin_list.py\", line 326, in result_list\n\theaders = list(result_headers(cl))\n File \"/some/path/django/contrib/admin/templatetags/admin_list.py\", line 90, in result_headers\n\ttext, attr = label_for_field(\n File \"/some/path/django/contrib/admin/utils.py\", line 362, in label_for_field\n\traise AttributeError(message)\nAttributeError: Unable to lookup 'choice' on Question or QuestionAdmin\n[24/Apr/2023 15:43:32] \"GET /admin/polls/question/ HTTP/1.1\" 500 349913\nI suggest that error E108 be updated to cover this case as well\nFor reproduce see â€‹github\n",
  "ground_truth": {
    "files": [
      "django/contrib/admin/checks.py"
    ],
    "locations": [
      "django/contrib/admin/checks.py::ModelAdminChecks",
      "django/contrib/admin/checks.py::ModelAdminChecks._check_list_display_item"
    ]
  },
  "predictions": [
    "tests/admin_views/tests.py::AdminViewListEditable.test_non_field_errors",
    "tests/modeladmin/test_checks.py::ListDisplayTests.test_missing_field",
    "tests/model_forms/test_modelchoicefield.py::ModelChoiceFieldTests.test_choices_not_fetched_when_not_rendering",
    "tests/admin_views/tests.py::AdminViewListEditable.test_non_form_errors",
    "django/contrib/admin/checks.py::ModelAdminChecks._check_list_display",
    "tests/admin_filters/tests.py::ListFiltersTests.verify_booleanfieldlistfilter_choices",
    "tests/admin_docs/test_views.py::TestModelDetailView.test_descriptions_render_correctly",
    "tests/admin_views/tests.py::TestGenericRelations.test_generic_content_object_in_list_display",
    "tests/admin_changelist/admin.py::UnescapedTitleFilter.lookups",
    "tests/admin_views/tests.py::DateHierarchyTests.test_related_field"
  ],
  "metadata": {
    "repo": "django/django",
    "commit": "191f6a9a4586b5e5f79f4f42f190e7ad4bbacc84",
    "total_functions_indexed": 26572,
    "retrieval_time_seconds": 0.09613037109375
  },
  "raw_output": "[{\"doc_id\": \"tests/admin_views/tests.py::AdminViewListEditable.test_non_field_errors\", \"score\": 0.43951964378356934}, {\"doc_id\": \"tests/modeladmin/test_checks.py::ListDisplayTests.test_missing_field\", \"score\": 0.4176918864250183}, {\"doc_id\": \"tests/model_forms/test_modelchoicefield.py::ModelChoiceFieldTests.test_choices_not_fetched_when_not_rendering\", \"score\": 0.41224128007888794}, {\"doc_id\": \"tests/admin_views/tests.py::AdminViewListEditable.test_non_form_errors\", \"score\": 0.39243802428245544}, {\"doc_id\": \"django/contrib/admin/checks.py::ModelAdminChecks._check_list_display\", \"score\": 0.3873218595981598}, {\"doc_id\": \"tests/admin_filters/tests.py::ListFiltersTests.verify_booleanfieldlistfilter_choices\", \"score\": 0.3869536221027374}, {\"doc_id\": \"tests/admin_docs/test_views.py::TestModelDetailView.test_descriptions_render_correctly\", \"score\": 0.3806961178779602}, {\"doc_id\": \"tests/admin_views/tests.py::TestGenericRelations.test_generic_content_object_in_list_display\", \"score\": 0.3753702640533447}, {\"doc_id\": \"tests/admin_changelist/admin.py::UnescapedTitleFilter.lookups\", \"score\": 0.3716375231742859}, {\"doc_id\": \"tests/admin_views/tests.py::DateHierarchyTests.test_related_field\", \"score\": 0.37142905592918396}]"
}