{
  "instance_id": "scikit-learn__scikit-learn-15535",
  "query": "regression in input validation of clustering metrics\n```python\r\nfrom sklearn.metrics.cluster import mutual_info_score\r\nimport numpy as np\r\n\r\nx = np.random.choice(['a', 'b'], size=20).astype(object)\r\nmutual_info_score(x, x)\r\n```\r\nValueError: could not convert string to float: 'b'\r\n\r\nwhile\r\n```python\r\nx = np.random.choice(['a', 'b'], size=20)\r\nmutual_info_score(x, x)\r\n```\r\nworks with a warning?\r\n\r\nthis worked in 0.21.1 without a warning (as I think it should)\r\n\r\n\r\nEdit by @ogrisel: I removed the `.astype(object)` in the second code snippet.\n",
  "ground_truth": {
    "files": [
      "sklearn/metrics/cluster/_supervised.py"
    ],
    "locations": [
      "sklearn/metrics/cluster/_supervised.py::check_clusterings"
    ]
  },
  "predictions": [
    "sklearn/metrics/cluster/_supervised.py::mutual_info_score",
    "sklearn/metrics/cluster/_supervised.py::adjusted_mutual_info_score",
    "sklearn/metrics/cluster/tests/test_supervised.py::test_adjusted_mutual_info_score",
    "sklearn/metrics/cluster/_supervised.py::normalized_mutual_info_score",
    "sklearn/metrics/cluster/tests/test_supervised.py::test_exactly_zero_info_score",
    "sklearn/feature_selection/tests/test_mutual_info.py::test_mutual_info_regression",
    "sklearn/metrics/cluster/tests/test_supervised.py::test_v_measure_and_mutual_information",
    "sklearn/feature_selection/tests/test_mutual_info.py::test_mutual_info_options",
    "sklearn/metrics/cluster/tests/test_supervised.py::test_expected_mutual_info_overflow",
    "sklearn/metrics/cluster/_supervised.py::v_measure_score"
  ],
  "metadata": {
    "repo": "scikit-learn/scikit-learn",
    "commit": "70b0ddea992c01df1a41588fa9e2d130fb6b13f8",
    "total_functions_indexed": 7104,
    "retrieval_time_seconds": 0.0015544891357421875
  },
  "raw_output": "[{\"doc_id\": \"sklearn/metrics/cluster/_supervised.py::mutual_info_score\", \"score\": 0.535385251045227}, {\"doc_id\": \"sklearn/metrics/cluster/_supervised.py::adjusted_mutual_info_score\", \"score\": 0.5279532670974731}, {\"doc_id\": \"sklearn/metrics/cluster/tests/test_supervised.py::test_adjusted_mutual_info_score\", \"score\": 0.5118921995162964}, {\"doc_id\": \"sklearn/metrics/cluster/_supervised.py::normalized_mutual_info_score\", \"score\": 0.4983348548412323}, {\"doc_id\": \"sklearn/metrics/cluster/tests/test_supervised.py::test_exactly_zero_info_score\", \"score\": 0.48374640941619873}, {\"doc_id\": \"sklearn/feature_selection/tests/test_mutual_info.py::test_mutual_info_regression\", \"score\": 0.477104514837265}, {\"doc_id\": \"sklearn/metrics/cluster/tests/test_supervised.py::test_v_measure_and_mutual_information\", \"score\": 0.4644574820995331}, {\"doc_id\": \"sklearn/feature_selection/tests/test_mutual_info.py::test_mutual_info_options\", \"score\": 0.4621942341327667}, {\"doc_id\": \"sklearn/metrics/cluster/tests/test_supervised.py::test_expected_mutual_info_overflow\", \"score\": 0.4580557346343994}, {\"doc_id\": \"sklearn/metrics/cluster/_supervised.py::v_measure_score\", \"score\": 0.45182013511657715}]"
}