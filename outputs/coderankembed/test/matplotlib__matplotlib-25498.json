{
  "instance_id": "matplotlib__matplotlib-25498",
  "query": "Update colorbar after changing mappable.norm\nHow can I update a colorbar, after I changed the norm instance of the colorbar?\n\n`colorbar.update_normal(mappable)` has now effect and `colorbar.update_bruteforce(mappable)` throws a `ZeroDivsionError`-Exception.\n\nConsider this example:\n\n``` python\nimport matplotlib.pyplot as plt\nfrom matplotlib.colors import LogNorm\nimport numpy as np\n\nimg = 10**np.random.normal(1, 1, size=(50, 50))\n\nfig, ax = plt.subplots(1, 1)\nplot = ax.imshow(img, cmap='gray')\ncb = fig.colorbar(plot, ax=ax)\nplot.norm = LogNorm()\ncb.update_normal(plot)  # no effect\ncb.update_bruteforce(plot)  # throws ZeroDivisionError\nplt.show()\n```\n\nOutput for `cb.update_bruteforce(plot)`:\n\n```\nTraceback (most recent call last):\n  File \"test_norm.py\", line 12, in <module>\n    cb.update_bruteforce(plot)\n  File \"/home/maxnoe/.local/anaconda3/lib/python3.4/site-packages/matplotlib/colorbar.py\", line 967, in update_bruteforce\n    self.draw_all()\n  File \"/home/maxnoe/.local/anaconda3/lib/python3.4/site-packages/matplotlib/colorbar.py\", line 342, in draw_all\n    self._process_values()\n  File \"/home/maxnoe/.local/anaconda3/lib/python3.4/site-packages/matplotlib/colorbar.py\", line 664, in _process_values\n    b = self.norm.inverse(self._uniform_y(self.cmap.N + 1))\n  File \"/home/maxnoe/.local/anaconda3/lib/python3.4/site-packages/matplotlib/colors.py\", line 1011, in inverse\n    return vmin * ma.power((vmax / vmin), val)\nZeroDivisionError: division by zero\n```\n\n",
  "ground_truth": {
    "files": [
      "lib/matplotlib/colorbar.py"
    ],
    "locations": [
      "lib/matplotlib/colorbar.py::Colorbar",
      "lib/matplotlib/colorbar.py::Colorbar.__init__",
      "lib/matplotlib/colorbar.py::Colorbar._process_values"
    ]
  },
  "predictions": [
    "lib/matplotlib/colorbar.py::Colorbar.update_normal",
    "lib/matplotlib/tests/test_colors.py::test_scalarmappable_norm_update",
    "lib/matplotlib/tests/test_image.py::test_norm_change",
    "lib/matplotlib/tests/test_colorbar.py::test_colorbar_renorm",
    "lib/matplotlib/tests/test_colors.py::test_SymLogNorm_colorbar",
    "lib/matplotlib/tests/test_colorbar.py::test_colorbar_format",
    "lib/matplotlib/tests/test_colorbar.py::test_negative_boundarynorm",
    "lib/matplotlib/tests/test_colorbar.py::test_centerednorm",
    "lib/matplotlib/tests/test_colorbar.py::test_mappable_no_alpha",
    "lib/matplotlib/colors.py::Normalize._changed"
  ],
  "metadata": {
    "repo": "matplotlib/matplotlib",
    "commit": "78bf53caacbb5ce0dc7aa73f07a74c99f1ed919b",
    "total_functions_indexed": 9125,
    "retrieval_time_seconds": 0.004113912582397461
  },
  "raw_output": "[{\"doc_id\": \"lib/matplotlib/colorbar.py::Colorbar.update_normal\", \"score\": 0.7419205904006958}, {\"doc_id\": \"lib/matplotlib/tests/test_colors.py::test_scalarmappable_norm_update\", \"score\": 0.6105972528457642}, {\"doc_id\": \"lib/matplotlib/tests/test_image.py::test_norm_change\", \"score\": 0.5353500247001648}, {\"doc_id\": \"lib/matplotlib/tests/test_colorbar.py::test_colorbar_renorm\", \"score\": 0.5338366031646729}, {\"doc_id\": \"lib/matplotlib/tests/test_colors.py::test_SymLogNorm_colorbar\", \"score\": 0.5335213541984558}, {\"doc_id\": \"lib/matplotlib/tests/test_colorbar.py::test_colorbar_format\", \"score\": 0.5254561901092529}, {\"doc_id\": \"lib/matplotlib/tests/test_colorbar.py::test_negative_boundarynorm\", \"score\": 0.5195401906967163}, {\"doc_id\": \"lib/matplotlib/tests/test_colorbar.py::test_centerednorm\", \"score\": 0.5175808072090149}, {\"doc_id\": \"lib/matplotlib/tests/test_colorbar.py::test_mappable_no_alpha\", \"score\": 0.5137547254562378}, {\"doc_id\": \"lib/matplotlib/colors.py::Normalize._changed\", \"score\": 0.5120867490768433}]"
}