{
  "instance_id": "sympy__sympy-19487",
  "query": "Rewrite sign as abs\nIn sympy the `sign` function is defined as\r\n```\r\n    sign(z)  :=  z / Abs(z)\r\n```\r\nfor all complex non-zero `z`. There should be a way to rewrite the sign in terms of `Abs` e.g.:\r\n```\r\n>>> sign(x).rewrite(Abs)                                                                                                                   \r\n x \r\n───\r\n│x│\r\n```\r\nI'm not sure how the possibility of `x` being zero should be handled currently we have\r\n```\r\n>>> sign(0)                                                                                                                               \r\n0\r\n>>> 0 / Abs(0)                                                                                                                            \r\nnan\r\n```\r\nMaybe `sign(0)` should be `nan` as well. Otherwise maybe rewrite as Abs would have to be careful about the possibility of the arg being zero (that would make the rewrite fail in most cases).\n",
  "ground_truth": {
    "files": [
      "sympy/functions/elementary/complexes.py"
    ],
    "locations": [
      "sympy/functions/elementary/complexes.py::sign",
      "sympy/functions/elementary/complexes.py::sign._eval_rewrite_as_Heaviside",
      "sympy/functions/elementary/complexes.py::sign._eval_simplify"
    ]
  },
  "predictions": [
    "sympy/functions/elementary/complexes.py::Abs._eval_rewrite_as_sign",
    "sympy/functions/elementary/tests/test_complexes.py::test_Abs_rewrite",
    "sympy/functions/special/delta_functions.py::Heaviside._eval_rewrite_as_sign",
    "sympy/functions/elementary/complexes.py::sign._eval_Abs",
    "sympy/functions/elementary/complexes.py::sign._eval_rewrite_as_Heaviside",
    "sympy/functions/elementary/miscellaneous.py::MinMaxBase._eval_rewrite_as_Abs",
    "sympy/functions/elementary/complexes.py::sign._eval_rewrite_as_Piecewise",
    "sympy/functions/elementary/complexes.py::Abs._eval_rewrite_as_Piecewise",
    "sympy/assumptions/refine.py::refine_sign",
    "sympy/functions/elementary/complexes.py::Abs._eval_rewrite_as_conjugate"
  ],
  "metadata": {
    "repo": "sympy/sympy",
    "commit": "25fbcce5b1a4c7e3956e6062930f4a44ce95a632",
    "total_functions_indexed": 34589,
    "retrieval_time_seconds": 0.09497666358947754
  },
  "raw_output": "[{\"doc_id\": \"sympy/functions/elementary/complexes.py::Abs._eval_rewrite_as_sign\", \"score\": 0.7423204183578491}, {\"doc_id\": \"sympy/functions/elementary/tests/test_complexes.py::test_Abs_rewrite\", \"score\": 0.6068499684333801}, {\"doc_id\": \"sympy/functions/special/delta_functions.py::Heaviside._eval_rewrite_as_sign\", \"score\": 0.6030839681625366}, {\"doc_id\": \"sympy/functions/elementary/complexes.py::sign._eval_Abs\", \"score\": 0.5992077589035034}, {\"doc_id\": \"sympy/functions/elementary/complexes.py::sign._eval_rewrite_as_Heaviside\", \"score\": 0.5704013705253601}, {\"doc_id\": \"sympy/functions/elementary/miscellaneous.py::MinMaxBase._eval_rewrite_as_Abs\", \"score\": 0.5655869245529175}, {\"doc_id\": \"sympy/functions/elementary/complexes.py::sign._eval_rewrite_as_Piecewise\", \"score\": 0.5618939399719238}, {\"doc_id\": \"sympy/functions/elementary/complexes.py::Abs._eval_rewrite_as_Piecewise\", \"score\": 0.5521649122238159}, {\"doc_id\": \"sympy/assumptions/refine.py::refine_sign\", \"score\": 0.5456997156143188}, {\"doc_id\": \"sympy/functions/elementary/complexes.py::Abs._eval_rewrite_as_conjugate\", \"score\": 0.5452067852020264}]"
}