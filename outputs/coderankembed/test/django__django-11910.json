{
  "instance_id": "django__django-11910",
  "query": "ForeignKey's to_field parameter gets the old field's name when renaming a PrimaryKey.\nDescription\n\t\nHaving these two models \nclass ModelA(models.Model):\n\tfield_wrong = models.CharField('field1', max_length=50, primary_key=True) # I'm a Primary key.\nclass ModelB(models.Model):\n\tfield_fk = models.ForeignKey(ModelA, blank=True, null=True, on_delete=models.CASCADE) \n... migrations applyed ...\nthe ModelA.field_wrong field has been renamed ... and Django recognizes the \"renaming\"\n# Primary key renamed\nclass ModelA(models.Model):\n\tfield_fixed = models.CharField('field1', max_length=50, primary_key=True) # I'm a Primary key.\nAttempts to to_field parameter. \nThe to_field points to the old_name (field_typo) and not to the new one (\"field_fixed\")\nclass Migration(migrations.Migration):\n\tdependencies = [\n\t\t('app1', '0001_initial'),\n\t]\n\toperations = [\n\t\tmigrations.RenameField(\n\t\t\tmodel_name='modela',\n\t\t\told_name='field_wrong',\n\t\t\tnew_name='field_fixed',\n\t\t),\n\t\tmigrations.AlterField(\n\t\t\tmodel_name='modelb',\n\t\t\tname='modela',\n\t\t\tfield=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='app1.ModelB', to_field='field_wrong'),\n\t\t),\n\t]\n",
  "ground_truth": {
    "files": [
      "django/db/migrations/autodetector.py"
    ],
    "locations": [
      "django/db/migrations/autodetector.py::MigrationAutodetector",
      "django/db/migrations/autodetector.py::MigrationAutodetector.generate_altered_fields"
    ]
  },
  "predictions": [
    "tests/migrations/test_autodetector.py::AutodetectorTests.test_rename_field_foreign_key_to_field",
    "django/db/migrations/operations/fields.py::RenameField.__init__",
    "tests/schema/tests.py::SchemaTests.test_rename_referenced_field",
    "django/db/migrations/operations/fields.py::RenameField.database_backwards",
    "django/db/migrations/operations/fields.py::RenameField.state_forwards",
    "django/db/migrations/operations/fields.py::RenameField.old_name_lower",
    "django/db/migrations/operations/fields.py::RenameField.database_forwards",
    "django/db/migrations/operations/fields.py::RenameField.deconstruct",
    "tests/migrations/test_autodetector.py::AutodetectorTests.test_rename_foreign_object_fields",
    "django/db/migrations/operations/fields.py::RenameField.describe"
  ],
  "metadata": {
    "repo": "django/django",
    "commit": "d232fd76a85870daf345fd8f8d617fe7802ae194",
    "total_functions_indexed": 22878,
    "retrieval_time_seconds": 0.007720232009887695
  },
  "raw_output": "[{\"doc_id\": \"tests/migrations/test_autodetector.py::AutodetectorTests.test_rename_field_foreign_key_to_field\", \"score\": 0.6613035798072815}, {\"doc_id\": \"django/db/migrations/operations/fields.py::RenameField.__init__\", \"score\": 0.5715392231941223}, {\"doc_id\": \"tests/schema/tests.py::SchemaTests.test_rename_referenced_field\", \"score\": 0.5611572861671448}, {\"doc_id\": \"django/db/migrations/operations/fields.py::RenameField.database_backwards\", \"score\": 0.5571821928024292}, {\"doc_id\": \"django/db/migrations/operations/fields.py::RenameField.state_forwards\", \"score\": 0.5426371693611145}, {\"doc_id\": \"django/db/migrations/operations/fields.py::RenameField.old_name_lower\", \"score\": 0.5375878214836121}, {\"doc_id\": \"django/db/migrations/operations/fields.py::RenameField.database_forwards\", \"score\": 0.5360195636749268}, {\"doc_id\": \"django/db/migrations/operations/fields.py::RenameField.deconstruct\", \"score\": 0.528793454170227}, {\"doc_id\": \"tests/migrations/test_autodetector.py::AutodetectorTests.test_rename_foreign_object_fields\", \"score\": 0.5225167870521545}, {\"doc_id\": \"django/db/migrations/operations/fields.py::RenameField.describe\", \"score\": 0.5219475030899048}]"
}