{
  "instance_id": "django__django-16816",
  "query": "Error E108 does not cover some cases\nDescription\n\t \n\t\t(last modified by Baha Sdtbekov)\n\t \nI have two models, Question and Choice. And if I write list_display = [\"choice\"] in QuestionAdmin, I get no errors.\nBut when I visit /admin/polls/question/, the following trace is returned:\nInternal Server Error: /admin/polls/question/\nTraceback (most recent call last):\n File \"/some/path/django/contrib/admin/utils.py\", line 334, in label_for_field\n\tfield = _get_non_gfk_field(model._meta, name)\n File \"/some/path/django/contrib/admin/utils.py\", line 310, in _get_non_gfk_field\n\traise FieldDoesNotExist()\ndjango.core.exceptions.FieldDoesNotExist\nDuring handling of the above exception, another exception occurred:\nTraceback (most recent call last):\n File \"/some/path/django/core/handlers/exception.py\", line 55, in inner\n\tresponse = get_response(request)\n File \"/some/path/django/core/handlers/base.py\", line 220, in _get_response\n\tresponse = response.render()\n File \"/some/path/django/template/response.py\", line 111, in render\n\tself.content = self.rendered_content\n File \"/some/path/django/template/response.py\", line 89, in rendered_content\n\treturn template.render(context, self._request)\n File \"/some/path/django/template/backends/django.py\", line 61, in render\n\treturn self.template.render(context)\n File \"/some/path/django/template/base.py\", line 175, in render\n\treturn self._render(context)\n File \"/some/path/django/template/base.py\", line 167, in _render\n\treturn self.nodelist.render(context)\n File \"/some/path/django/template/base.py\", line 1005, in render\n\treturn SafeString(\"\".join([node.render_annotated(context) for node in self]))\n File \"/some/path/django/template/base.py\", line 1005, in <listcomp>\n\treturn SafeString(\"\".join([node.render_annotated(context) for node in self]))\n File \"/some/path/django/template/base.py\", line 966, in render_annotated\n\treturn self.render(context)\n File \"/some/path/django/template/loader_tags.py\", line 157, in render\n\treturn compiled_parent._render(context)\n File \"/some/path/django/template/base.py\", line 167, in _render\n\treturn self.nodelist.render(context)\n File \"/some/path/django/template/base.py\", line 1005, in render\n\treturn SafeString(\"\".join([node.render_annotated(context) for node in self]))\n File \"/some/path/django/template/base.py\", line 1005, in <listcomp>\n\treturn SafeString(\"\".join([node.render_annotated(context) for node in self]))\n File \"/some/path/django/template/base.py\", line 966, in render_annotated\n\treturn self.render(context)\n File \"/some/path/django/template/loader_tags.py\", line 157, in render\n\treturn compiled_parent._render(context)\n File \"/some/path/django/template/base.py\", line 167, in _render\n\treturn self.nodelist.render(context)\n File \"/some/path/django/template/base.py\", line 1005, in render\n\treturn SafeString(\"\".join([node.render_annotated(context) for node in self]))\n File \"/some/path/django/template/base.py\", line 1005, in <listcomp>\n\treturn SafeString(\"\".join([node.render_annotated(context) for node in self]))\n File \"/some/path/django/template/base.py\", line 966, in render_annotated\n\treturn self.render(context)\n File \"/some/path/django/template/loader_tags.py\", line 63, in render\n\tresult = block.nodelist.render(context)\n File \"/some/path/django/template/base.py\", line 1005, in render\n\treturn SafeString(\"\".join([node.render_annotated(context) for node in self]))\n File \"/some/path/django/template/base.py\", line 1005, in <listcomp>\n\treturn SafeString(\"\".join([node.render_annotated(context) for node in self]))\n File \"/some/path/django/template/base.py\", line 966, in render_annotated\n\treturn self.render(context)\n File \"/some/path/django/template/loader_tags.py\", line 63, in render\n\tresult = block.nodelist.render(context)\n File \"/some/path/django/template/base.py\", line 1005, in render\n\treturn SafeString(\"\".join([node.render_annotated(context) for node in self]))\n File \"/some/path/django/template/base.py\", line 1005, in <listcomp>\n\treturn SafeString(\"\".join([node.render_annotated(context) for node in self]))\n File \"/some/path/django/template/base.py\", line 966, in render_annotated\n\treturn self.render(context)\n File \"/some/path/django/contrib/admin/templatetags/base.py\", line 45, in render\n\treturn super().render(context)\n File \"/some/path/django/template/library.py\", line 258, in render\n\t_dict = self.func(*resolved_args, **resolved_kwargs)\n File \"/some/path/django/contrib/admin/templatetags/admin_list.py\", line 326, in result_list\n\theaders = list(result_headers(cl))\n File \"/some/path/django/contrib/admin/templatetags/admin_list.py\", line 90, in result_headers\n\ttext, attr = label_for_field(\n File \"/some/path/django/contrib/admin/utils.py\", line 362, in label_for_field\n\traise AttributeError(message)\nAttributeError: Unable to lookup 'choice' on Question or QuestionAdmin\n[24/Apr/2023 15:43:32] \"GET /admin/polls/question/ HTTP/1.1\" 500 349913\nI suggest that error E108 be updated to cover this case as well\nFor reproduce see â€‹github\n",
  "ground_truth": {
    "files": [
      "django/contrib/admin/checks.py"
    ],
    "locations": [
      "django/contrib/admin/checks.py::ModelAdminChecks",
      "django/contrib/admin/checks.py::ModelAdminChecks._check_list_display_item"
    ]
  },
  "predictions": [
    "django/contrib/admin/checks.py::ModelAdminChecks._check_list_display_item",
    "tests/modeladmin/test_checks.py::ListDisplayTests.test_missing_field",
    "django/db/models/fields/__init__.py::Field._check_choices",
    "tests/admin_views/tests.py::AdminViewListEditable.test_pk_hidden_fields",
    "django/contrib/admin/checks.py::ModelAdminChecks._check_list_editable_item",
    "tests/admin_views/tests.py::AdminViewListEditable.test_non_field_errors",
    "django/contrib/admin/checks.py::ModelAdminChecks._check_list_display",
    "tests/admin_views/tests.py::AdminViewListEditable.test_non_form_errors_is_errorlist",
    "tests/admin_views/tests.py::AdminViewListEditable.test_non_form_errors",
    "tests/select_for_update/tests.py::SelectForUpdateTests.test_model_proxy_of_argument_raises_error_proxy_field_in_choices"
  ],
  "metadata": {
    "repo": "django/django",
    "commit": "191f6a9a4586b5e5f79f4f42f190e7ad4bbacc84",
    "total_functions_indexed": 26572,
    "retrieval_time_seconds": 0.1206045150756836
  },
  "raw_output": "[{\"doc_id\": \"django/contrib/admin/checks.py::ModelAdminChecks._check_list_display_item\", \"score\": 0.7596719861030579}, {\"doc_id\": \"tests/modeladmin/test_checks.py::ListDisplayTests.test_missing_field\", \"score\": 0.7296841144561768}, {\"doc_id\": \"django/db/models/fields/__init__.py::Field._check_choices\", \"score\": 0.7267329692840576}, {\"doc_id\": \"tests/admin_views/tests.py::AdminViewListEditable.test_pk_hidden_fields\", \"score\": 0.7251613140106201}, {\"doc_id\": \"django/contrib/admin/checks.py::ModelAdminChecks._check_list_editable_item\", \"score\": 0.7245264053344727}, {\"doc_id\": \"tests/admin_views/tests.py::AdminViewListEditable.test_non_field_errors\", \"score\": 0.7241085171699524}, {\"doc_id\": \"django/contrib/admin/checks.py::ModelAdminChecks._check_list_display\", \"score\": 0.7233900427818298}, {\"doc_id\": \"tests/admin_views/tests.py::AdminViewListEditable.test_non_form_errors_is_errorlist\", \"score\": 0.7231945991516113}, {\"doc_id\": \"tests/admin_views/tests.py::AdminViewListEditable.test_non_form_errors\", \"score\": 0.7231329679489136}, {\"doc_id\": \"tests/select_for_update/tests.py::SelectForUpdateTests.test_model_proxy_of_argument_raises_error_proxy_field_in_choices\", \"score\": 0.7227028012275696}]"
}