{
  "instance_id": "django__django-16527",
  "query": "\"show_save_as_new\" in admin can add without this permission\nDescription\n\t \n\t\t(last modified by Mariusz Felisiak)\n\t \nAt \"django/contrib/admin/templatetags/admin_modify.py\" file, line 102, I think you must put one more verification for this tag: \"and has_add_permission\", because \"save_as_new\" is a add modification.\nI rewrite this for my project:\n\t\t\t\"show_save_as_new\": not is_popup\n\t\t\tand has_add_permission # This line that I put!!!\n\t\t\tand has_change_permission\n\t\t\tand change\n\t\t\tand save_as,\n",
  "ground_truth": {
    "files": [
      "django/contrib/admin/templatetags/admin_modify.py"
    ],
    "locations": [
      "django/contrib/admin/templatetags/admin_modify.py::submit_row"
    ]
  },
  "predictions": [
    "tests/admin_views/tests.py::AdminViewPermissionsTest.test_change_view_save_as_new",
    "django/contrib/admin/templatetags/admin_modify.py::submit_row",
    "tests/admin_views/tests.py::AdminViewPermissionsTest.test_post_save_message_no_forbidden_links_visible",
    "django/contrib/admin/options.py::ModelAdmin.response_add",
    "django/contrib/admin/options.py::InlineModelAdmin.has_view_permission",
    "django/contrib/admin/options.py::InlineModelAdmin.has_change_permission",
    "django/contrib/admin/decorators.py::action",
    "tests/admin_views/admin.py::no_perm",
    "tests/admin_views/tests.py::AdminViewPermissionsTest.test_add_view",
    "tests/admin_views/test_templatetags.py::AdminTemplateTagsTest.test_override_show_save_and_add_another"
  ],
  "metadata": {
    "repo": "django/django",
    "commit": "bd366ca2aeffa869b7dbc0b0aa01caea75e6dc31",
    "total_functions_indexed": 26352,
    "retrieval_time_seconds": 0.18419170379638672
  },
  "raw_output": "[{\"doc_id\": \"tests/admin_views/tests.py::AdminViewPermissionsTest.test_change_view_save_as_new\", \"score\": 0.77778160572052}, {\"doc_id\": \"django/contrib/admin/templatetags/admin_modify.py::submit_row\", \"score\": 0.7645623683929443}, {\"doc_id\": \"tests/admin_views/tests.py::AdminViewPermissionsTest.test_post_save_message_no_forbidden_links_visible\", \"score\": 0.7536722421646118}, {\"doc_id\": \"django/contrib/admin/options.py::ModelAdmin.response_add\", \"score\": 0.7503424286842346}, {\"doc_id\": \"django/contrib/admin/options.py::InlineModelAdmin.has_view_permission\", \"score\": 0.7400311827659607}, {\"doc_id\": \"django/contrib/admin/options.py::InlineModelAdmin.has_change_permission\", \"score\": 0.7395408749580383}, {\"doc_id\": \"django/contrib/admin/decorators.py::action\", \"score\": 0.7384442687034607}, {\"doc_id\": \"tests/admin_views/admin.py::no_perm\", \"score\": 0.7351350784301758}, {\"doc_id\": \"tests/admin_views/tests.py::AdminViewPermissionsTest.test_add_view\", \"score\": 0.7346832752227783}, {\"doc_id\": \"tests/admin_views/test_templatetags.py::AdminTemplateTagsTest.test_override_show_save_and_add_another\", \"score\": 0.7333747148513794}]"
}