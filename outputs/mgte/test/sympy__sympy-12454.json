{
  "instance_id": "sympy__sympy-12454",
  "query": "is_upper() raises IndexError for tall matrices\nThe function Matrix.is_upper raises an IndexError for a 4x2 matrix of zeros.\r\n```\r\n>>> sympy.zeros(4,2).is_upper\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"sympy/matrices/matrices.py\", line 1112, in is_upper\r\n    for i in range(1, self.rows)\r\n  File \"sympy/matrices/matrices.py\", line 1113, in <genexpr>\r\n    for j in range(i))\r\n  File \"sympy/matrices/dense.py\", line 119, in __getitem__\r\n    return self.extract(i, j)\r\n  File \"sympy/matrices/matrices.py\", line 352, in extract\r\n    colsList = [a2idx(k, self.cols) for k in colsList]\r\n  File \"sympy/matrices/matrices.py\", line 5261, in a2idx\r\n    raise IndexError(\"Index out of range: a[%s]\" % (j,))\r\nIndexError: Index out of range: a[2]\r\n```\r\nThe code for is_upper() is\r\n```\r\n        return all(self[i, j].is_zero\r\n                   for i in range(1, self.rows)\r\n                   for j in range(i))\r\n```\r\nFor a 4x2 matrix, is_upper iterates over the indices:\r\n```\r\n>>> A = sympy.zeros(4, 2)\r\n>>> print tuple([i, j] for i in range(1, A.rows) for j in range(i))\r\n([1, 0], [2, 0], [2, 1], [3, 0], [3, 1], [3, 2])\r\n```\r\nThe attempt to index the (3,2) entry appears to be the source of the error. \n",
  "ground_truth": {
    "files": [
      "sympy/matrices/matrices.py"
    ],
    "locations": [
      "sympy/matrices/matrices.py::MatrixProperties",
      "sympy/matrices/matrices.py::MatrixProperties._eval_is_upper_hessenberg",
      "sympy/matrices/matrices.py::MatrixProperties._eval_values",
      "sympy/matrices/matrices.py::MatrixProperties.is_upper",
      "sympy/matrices/matrices.py::MatrixProperties.is_zero"
    ]
  },
  "predictions": [
    "sympy/matrices/tests/test_matrices.py::test_is_upper",
    "sympy/matrices/tests/test_commonmatrix.py::test_is_upper",
    "sympy/matrices/matrices.py::MatrixProperties.is_upper",
    "sympy/matrices/matrices.py::MatrixProperties._eval_is_upper_hessenberg",
    "sympy/matrices/matrices.py::MatrixProperties.is_upper_hessenberg",
    "sympy/tensor/indexed.py::Idx.upper",
    "sympy/assumptions/ask.py::AssumptionKeys.upper_triangular",
    "sympy/matrices/expressions/tests/test_indexing.py::test_errors",
    "sympy/matrices/tests/test_matrices.py::test_upper_triangular_solve",
    "sympy/matrices/matrices.py::MatrixBase.upper_triangular_solve"
  ],
  "metadata": {
    "repo": "sympy/sympy",
    "commit": "d3fcdb72bfcbb560eb45264ac1c03f359436edef",
    "total_functions_indexed": 20516,
    "retrieval_time_seconds": 0.020426273345947266
  },
  "raw_output": "[{\"doc_id\": \"sympy/matrices/tests/test_matrices.py::test_is_upper\", \"score\": 0.8052870035171509}, {\"doc_id\": \"sympy/matrices/tests/test_commonmatrix.py::test_is_upper\", \"score\": 0.7903532385826111}, {\"doc_id\": \"sympy/matrices/matrices.py::MatrixProperties.is_upper\", \"score\": 0.7810478210449219}, {\"doc_id\": \"sympy/matrices/matrices.py::MatrixProperties._eval_is_upper_hessenberg\", \"score\": 0.7591699361801147}, {\"doc_id\": \"sympy/matrices/matrices.py::MatrixProperties.is_upper_hessenberg\", \"score\": 0.752796471118927}, {\"doc_id\": \"sympy/tensor/indexed.py::Idx.upper\", \"score\": 0.7430355548858643}, {\"doc_id\": \"sympy/assumptions/ask.py::AssumptionKeys.upper_triangular\", \"score\": 0.732537567615509}, {\"doc_id\": \"sympy/matrices/expressions/tests/test_indexing.py::test_errors\", \"score\": 0.7300902605056763}, {\"doc_id\": \"sympy/matrices/tests/test_matrices.py::test_upper_triangular_solve\", \"score\": 0.728701651096344}, {\"doc_id\": \"sympy/matrices/matrices.py::MatrixBase.upper_triangular_solve\", \"score\": 0.7269030809402466}]"
}