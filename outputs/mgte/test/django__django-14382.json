{
  "instance_id": "django__django-14382",
  "query": "django-admin startapp with trailing slash in directory name results in error\nDescription\n\t\nBash tab-completion appends trailing slashes to directory names. django-admin startapp name directory/ results in the error:\nCommandError: '' is not a valid app directory. Please make sure the directory is a valid identifier.\nThe error is caused by â€‹line 77 of django/core/management/templates.py by calling basename() on the path with no consideration for a trailing slash:\nself.validate_name(os.path.basename(target), 'directory')\nRemoving potential trailing slashes would solve the problem:\nself.validate_name(os.path.basename(target.rstrip(os.sep)), 'directory')\n",
  "ground_truth": {
    "files": [
      "django/core/management/templates.py"
    ],
    "locations": [
      "django/core/management/templates.py::TemplateCommand",
      "django/core/management/templates.py::TemplateCommand.handle"
    ]
  },
  "predictions": [
    "tests/admin_scripts/tests.py::StartApp.test_invalid_target_name",
    "django/core/management/templates.py::TemplateCommand.validate_name",
    "tests/admin_scripts/tests.py::StartApp.test_invalid_name",
    "tests/admin_scripts/tests.py::StartApp.test_importable_target_name",
    "tests/admin_scripts/tests.py::StartApp.test_importable_name",
    "django/core/management/commands/showmigrations.py::Command._validate_app_names",
    "tests/admin_scripts/tests.py::StartProject.test_invalid_project_name",
    "django/template/backends/base.py::BaseEngine.app_dirname",
    "django/core/management/commands/startapp.py::Command.handle",
    "tests/admin_scripts/tests.py::CommandTypes.test_app_command_invalid_app_label"
  ],
  "metadata": {
    "repo": "django/django",
    "commit": "29345aecf6e8d53ccb3577a3762bb0c263f7558d",
    "total_functions_indexed": 24573,
    "retrieval_time_seconds": 0.007862329483032227
  },
  "raw_output": "[{\"doc_id\": \"tests/admin_scripts/tests.py::StartApp.test_invalid_target_name\", \"score\": 0.8008675575256348}, {\"doc_id\": \"django/core/management/templates.py::TemplateCommand.validate_name\", \"score\": 0.7911626100540161}, {\"doc_id\": \"tests/admin_scripts/tests.py::StartApp.test_invalid_name\", \"score\": 0.7655615210533142}, {\"doc_id\": \"tests/admin_scripts/tests.py::StartApp.test_importable_target_name\", \"score\": 0.7520755529403687}, {\"doc_id\": \"tests/admin_scripts/tests.py::StartApp.test_importable_name\", \"score\": 0.7470283508300781}, {\"doc_id\": \"django/core/management/commands/showmigrations.py::Command._validate_app_names\", \"score\": 0.7362790107727051}, {\"doc_id\": \"tests/admin_scripts/tests.py::StartProject.test_invalid_project_name\", \"score\": 0.7327128052711487}, {\"doc_id\": \"django/template/backends/base.py::BaseEngine.app_dirname\", \"score\": 0.7297800779342651}, {\"doc_id\": \"django/core/management/commands/startapp.py::Command.handle\", \"score\": 0.7222830653190613}, {\"doc_id\": \"tests/admin_scripts/tests.py::CommandTypes.test_app_command_invalid_app_label\", \"score\": 0.7169040441513062}]"
}