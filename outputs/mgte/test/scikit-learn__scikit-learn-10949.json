{
  "instance_id": "scikit-learn__scikit-learn-10949",
  "query": "warn_on_dtype with DataFrame\n#### Description\r\n\r\n``warn_on_dtype`` has no effect when input is a pandas ``DataFrame``\r\n\r\n#### Steps/Code to Reproduce\r\n```python\r\nfrom sklearn.utils.validation import check_array\r\nimport pandas as pd\r\ndf = pd.DataFrame([[1, 2, 3], [2, 3, 4]], dtype=object)\r\nchecked = check_array(df, warn_on_dtype=True)\r\n```\r\n\r\n#### Expected result: \r\n\r\n```python-traceback\r\nDataConversionWarning: Data with input dtype object was converted to float64.\r\n```\r\n\r\n#### Actual Results\r\nNo warning is thrown\r\n\r\n#### Versions\r\nLinux-4.4.0-116-generic-x86_64-with-debian-stretch-sid\r\nPython 3.6.3 |Anaconda, Inc.| (default, Nov  3 2017, 19:19:16) \r\n[GCC 7.2.0]\r\nNumPy 1.13.1\r\nSciPy 0.19.1\r\nScikit-Learn 0.20.dev0\r\nPandas 0.21.0\r\n\nwarn_on_dtype with DataFrame\n#### Description\r\n\r\n``warn_on_dtype`` has no effect when input is a pandas ``DataFrame``\r\n\r\n#### Steps/Code to Reproduce\r\n```python\r\nfrom sklearn.utils.validation import check_array\r\nimport pandas as pd\r\ndf = pd.DataFrame([[1, 2, 3], [2, 3, 4]], dtype=object)\r\nchecked = check_array(df, warn_on_dtype=True)\r\n```\r\n\r\n#### Expected result: \r\n\r\n```python-traceback\r\nDataConversionWarning: Data with input dtype object was converted to float64.\r\n```\r\n\r\n#### Actual Results\r\nNo warning is thrown\r\n\r\n#### Versions\r\nLinux-4.4.0-116-generic-x86_64-with-debian-stretch-sid\r\nPython 3.6.3 |Anaconda, Inc.| (default, Nov  3 2017, 19:19:16) \r\n[GCC 7.2.0]\r\nNumPy 1.13.1\r\nSciPy 0.19.1\r\nScikit-Learn 0.20.dev0\r\nPandas 0.21.0\r\n\n",
  "ground_truth": {
    "files": [
      "sklearn/utils/validation.py"
    ],
    "locations": [
      "sklearn/utils/validation.py::check_array"
    ]
  },
  "predictions": [
    "sklearn/utils/tests/test_validation.py::test_check_array_dtype_warning",
    "sklearn/utils/validation.py::check_array",
    "sklearn/utils/tests/test_validation.py::test_check_array_pandas_dtype_object_conversion",
    "sklearn/utils/tests/test_validation.py::test_check_array_dtype_stability",
    "sklearn/utils/tests/test_validation.py::test_check_array",
    "sklearn/preprocessing/tests/test_data.py::test_warning_scaling_integers",
    "sklearn/feature_extraction/text.py::TfidfVectorizer._check_params",
    "sklearn/utils/mocking.py::MockDataFrame.__array__",
    "sklearn/utils/estimator_checks.py::check_dtype_object",
    "sklearn/metrics/tests/test_classification.py::test_confusion_matrix_dtype"
  ],
  "metadata": {
    "repo": "scikit-learn/scikit-learn",
    "commit": "3b5abf76597ce6aff76192869f92647c1b5259e7",
    "total_functions_indexed": 6045,
    "retrieval_time_seconds": 0.13970518112182617
  },
  "raw_output": "[{\"doc_id\": \"sklearn/utils/tests/test_validation.py::test_check_array_dtype_warning\", \"score\": 0.8337241411209106}, {\"doc_id\": \"sklearn/utils/validation.py::check_array\", \"score\": 0.7680341005325317}, {\"doc_id\": \"sklearn/utils/tests/test_validation.py::test_check_array_pandas_dtype_object_conversion\", \"score\": 0.7664628028869629}, {\"doc_id\": \"sklearn/utils/tests/test_validation.py::test_check_array_dtype_stability\", \"score\": 0.7400261163711548}, {\"doc_id\": \"sklearn/utils/tests/test_validation.py::test_check_array\", \"score\": 0.7374559640884399}, {\"doc_id\": \"sklearn/preprocessing/tests/test_data.py::test_warning_scaling_integers\", \"score\": 0.7300677299499512}, {\"doc_id\": \"sklearn/feature_extraction/text.py::TfidfVectorizer._check_params\", \"score\": 0.7171368598937988}, {\"doc_id\": \"sklearn/utils/mocking.py::MockDataFrame.__array__\", \"score\": 0.7168359756469727}, {\"doc_id\": \"sklearn/utils/estimator_checks.py::check_dtype_object\", \"score\": 0.7095311880111694}, {\"doc_id\": \"sklearn/metrics/tests/test_classification.py::test_confusion_matrix_dtype\", \"score\": 0.7094848155975342}]"
}