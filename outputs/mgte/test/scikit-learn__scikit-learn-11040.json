{
  "instance_id": "scikit-learn__scikit-learn-11040",
  "query": "Missing parameter validation in Neighbors estimator for float n_neighbors\n```python\r\nfrom sklearn.neighbors import NearestNeighbors\r\nfrom sklearn.datasets import make_blobs\r\nX, y = make_blobs()\r\nneighbors = NearestNeighbors(n_neighbors=3.)\r\nneighbors.fit(X)\r\nneighbors.kneighbors(X)\r\n```\r\n```\r\n~/checkout/scikit-learn/sklearn/neighbors/binary_tree.pxi in sklearn.neighbors.kd_tree.NeighborsHeap.__init__()\r\n\r\nTypeError: 'float' object cannot be interpreted as an integer\r\n```\r\nThis should be caught earlier and a more helpful error message should be raised (or we could be lenient and cast to integer, but I think a better error might be better).\r\n\r\nWe need to make sure that \r\n```python\r\nneighbors.kneighbors(X, n_neighbors=3.)\r\n```\r\nalso works.\n",
  "ground_truth": {
    "files": [
      "sklearn/neighbors/base.py"
    ],
    "locations": [
      "sklearn/neighbors/base.py::NeighborsBase",
      "sklearn/neighbors/base.py::NeighborsBase._fit",
      "sklearn/neighbors/base.py::KNeighborsMixin",
      "sklearn/neighbors/base.py::KNeighborsMixin.kneighbors"
    ]
  },
  "predictions": [
    "sklearn/neighbors/tests/test_neighbors.py::test_kneighbors_classifier_float_labels",
    "sklearn/neighbors/approximate.py::LSHForest.kneighbors",
    "sklearn/neighbors/tests/test_kd_tree.py::test_neighbors_heap",
    "sklearn/neighbors/tests/test_neighbors.py::test_non_euclidean_kneighbors",
    "sklearn/neighbors/tests/test_ball_tree.py::test_neighbors_heap",
    "sklearn/neighbors/unsupervised.py::NearestNeighbors.__init__",
    "sklearn/neighbors/graph.py::kneighbors_graph",
    "sklearn/neighbors/regression.py::KNeighborsRegressor.__init__",
    "sklearn/neighbors/base.py::NeighborsBase._fit",
    "sklearn/neighbors/base.py::NeighborsBase.__init__"
  ],
  "metadata": {
    "repo": "scikit-learn/scikit-learn",
    "commit": "96a02f3934952d486589dddd3f00b40d5a5ab5f2",
    "total_functions_indexed": 6244,
    "retrieval_time_seconds": 0.1029059886932373
  },
  "raw_output": "[{\"doc_id\": \"sklearn/neighbors/tests/test_neighbors.py::test_kneighbors_classifier_float_labels\", \"score\": 0.762086808681488}, {\"doc_id\": \"sklearn/neighbors/approximate.py::LSHForest.kneighbors\", \"score\": 0.758091151714325}, {\"doc_id\": \"sklearn/neighbors/tests/test_kd_tree.py::test_neighbors_heap\", \"score\": 0.7440281510353088}, {\"doc_id\": \"sklearn/neighbors/tests/test_neighbors.py::test_non_euclidean_kneighbors\", \"score\": 0.7423812747001648}, {\"doc_id\": \"sklearn/neighbors/tests/test_ball_tree.py::test_neighbors_heap\", \"score\": 0.7413251399993896}, {\"doc_id\": \"sklearn/neighbors/unsupervised.py::NearestNeighbors.__init__\", \"score\": 0.73421311378479}, {\"doc_id\": \"sklearn/neighbors/graph.py::kneighbors_graph\", \"score\": 0.7337096333503723}, {\"doc_id\": \"sklearn/neighbors/regression.py::KNeighborsRegressor.__init__\", \"score\": 0.7319432497024536}, {\"doc_id\": \"sklearn/neighbors/base.py::NeighborsBase._fit\", \"score\": 0.7314843535423279}, {\"doc_id\": \"sklearn/neighbors/base.py::NeighborsBase.__init__\", \"score\": 0.7309340238571167}]"
}