{
  "instance_id": "django__django-16527",
  "query": "\"show_save_as_new\" in admin can add without this permission\nDescription\n\t \n\t\t(last modified by Mariusz Felisiak)\n\t \nAt \"django/contrib/admin/templatetags/admin_modify.py\" file, line 102, I think you must put one more verification for this tag: \"and has_add_permission\", because \"save_as_new\" is a add modification.\nI rewrite this for my project:\n\t\t\t\"show_save_as_new\": not is_popup\n\t\t\tand has_add_permission # This line that I put!!!\n\t\t\tand has_change_permission\n\t\t\tand change\n\t\t\tand save_as,\n",
  "ground_truth": {
    "files": [
      "django/contrib/admin/templatetags/admin_modify.py"
    ],
    "locations": [
      "django/contrib/admin/templatetags/admin_modify.py::submit_row"
    ]
  },
  "predictions": [
    "tests/admin_views/test_templatetags.py::AdminTemplateTagsTest.test_override_show_save_and_add_another",
    "tests/admin_views/tests.py::SaveAsTests.test_save_as_new_with_validation_errors",
    "tests/admin_views/tests.py::AdminViewPermissionsTest.test_change_view_save_as_new",
    "django/contrib/admin/templatetags/admin_modify.py::submit_row",
    "tests/admin_views/tests.py::SaveAsTests.test_save_as_continue_false",
    "tests/admin_views/tests.py::SaveAsTests.test_save_as_duplication",
    "tests/admin_views/tests.py::SaveAsTests.test_save_as_new_with_validation_errors_with_inlines",
    "django/contrib/admin/options.py::InlineModelAdmin.has_change_permission",
    "tests/admin_views/tests.py::SaveAsTests.test_save_as_new_with_inlines_with_validation_errors",
    "django/contrib/admin/options.py::InlineModelAdmin.has_add_permission"
  ],
  "metadata": {
    "repo": "django/django",
    "commit": "bd366ca2aeffa869b7dbc0b0aa01caea75e6dc31",
    "total_functions_indexed": 26352,
    "retrieval_time_seconds": 0.009549140930175781
  },
  "raw_output": "[{\"doc_id\": \"tests/admin_views/test_templatetags.py::AdminTemplateTagsTest.test_override_show_save_and_add_another\", \"score\": 0.4871610999107361}, {\"doc_id\": \"tests/admin_views/tests.py::SaveAsTests.test_save_as_new_with_validation_errors\", \"score\": 0.4368128478527069}, {\"doc_id\": \"tests/admin_views/tests.py::AdminViewPermissionsTest.test_change_view_save_as_new\", \"score\": 0.4150911569595337}, {\"doc_id\": \"django/contrib/admin/templatetags/admin_modify.py::submit_row\", \"score\": 0.4133032560348511}, {\"doc_id\": \"tests/admin_views/tests.py::SaveAsTests.test_save_as_continue_false\", \"score\": 0.4081836938858032}, {\"doc_id\": \"tests/admin_views/tests.py::SaveAsTests.test_save_as_duplication\", \"score\": 0.40607696771621704}, {\"doc_id\": \"tests/admin_views/tests.py::SaveAsTests.test_save_as_new_with_validation_errors_with_inlines\", \"score\": 0.3964551091194153}, {\"doc_id\": \"django/contrib/admin/options.py::InlineModelAdmin.has_change_permission\", \"score\": 0.39519551396369934}, {\"doc_id\": \"tests/admin_views/tests.py::SaveAsTests.test_save_as_new_with_inlines_with_validation_errors\", \"score\": 0.3891141414642334}, {\"doc_id\": \"django/contrib/admin/options.py::InlineModelAdmin.has_add_permission\", \"score\": 0.37788182497024536}]"
}