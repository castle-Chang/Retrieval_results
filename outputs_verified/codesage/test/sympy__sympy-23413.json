{
  "instance_id": "sympy__sympy-23413",
  "query": "bug with HNF removing rows\nI expect\r\n`np.flip (hermite_normal_form (Matrix (np.flip (np.array ([[5, 8, 12], [0, 0, 1]]))).T).T))`\r\nto give\r\n`[[5,  8, 0], [0,  0, 1]]`\r\nbut instead I get\r\n`[[5,  8, 0]]`\r\nIt seems to be falsely identifying my matrix as rank-deficient and removing the row when I try to achieve a row-style HNF using flips and transposes.\n",
  "ground_truth": {
    "files": [
      "sympy/polys/matrices/normalforms.py"
    ],
    "locations": [
      "sympy/polys/matrices/normalforms.py::_hermite_normal_form"
    ]
  },
  "predictions": [
    "sympy/matrices/tests/test_normalforms.py::test_hermite_normal",
    "sympy/polys/matrices/tests/test_normalforms.py::test_hermite_normal",
    "sympy/polys/numberfields/modules.py::Submodule.is_sq_maxrank_HNF",
    "sympy/polys/matrices/normalforms.py::_hermite_normal_form",
    "sympy/polys/numberfields/tests/test_modules.py::test_is_HNF",
    "sympy/polys/matrices/normalforms.py::hermite_normal_form",
    "sympy/polys/numberfields/modules.py::is_sq_maxrank_HNF",
    "sympy/matrices/normalforms.py::hermite_normal_form",
    "sympy/polys/matrices/normalforms.py::_hermite_normal_form_modulo_D",
    "sympy/printing/tests/test_mathml.py::test_print_hermite"
  ],
  "metadata": {
    "repo": "sympy/sympy",
    "commit": "10de1a18a0efac0b19b611e40c928250dda688bf",
    "total_functions_indexed": 37775,
    "retrieval_time_seconds": 0.013782024383544922
  },
  "raw_output": "[{\"doc_id\": \"sympy/matrices/tests/test_normalforms.py::test_hermite_normal\", \"score\": 0.45970404148101807}, {\"doc_id\": \"sympy/polys/matrices/tests/test_normalforms.py::test_hermite_normal\", \"score\": 0.39832639694213867}, {\"doc_id\": \"sympy/polys/numberfields/modules.py::Submodule.is_sq_maxrank_HNF\", \"score\": 0.37152227759361267}, {\"doc_id\": \"sympy/polys/matrices/normalforms.py::_hermite_normal_form\", \"score\": 0.3668205738067627}, {\"doc_id\": \"sympy/polys/numberfields/tests/test_modules.py::test_is_HNF\", \"score\": 0.36635300517082214}, {\"doc_id\": \"sympy/polys/matrices/normalforms.py::hermite_normal_form\", \"score\": 0.3462733030319214}, {\"doc_id\": \"sympy/polys/numberfields/modules.py::is_sq_maxrank_HNF\", \"score\": 0.3434067368507385}, {\"doc_id\": \"sympy/matrices/normalforms.py::hermite_normal_form\", \"score\": 0.34059011936187744}, {\"doc_id\": \"sympy/polys/matrices/normalforms.py::_hermite_normal_form_modulo_D\", \"score\": 0.33791279792785645}, {\"doc_id\": \"sympy/printing/tests/test_mathml.py::test_print_hermite\", \"score\": 0.30879276990890503}]"
}