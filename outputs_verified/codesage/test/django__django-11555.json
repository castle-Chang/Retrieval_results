{
  "instance_id": "django__django-11555",
  "query": "order_by() a parent model crash when Meta.ordering contains expressions.\nDescription\n\t \n\t\t(last modified by Jonny Fuller)\n\t \nHi friends,\nDuring testing I discovered a strange bug when using a query expression for ordering during multi-table inheritance. You can find the full write up as well as reproducible test repository â€‹https://github.com/JonnyWaffles/djangoordermetabug. The bug occurs because the field is an OrderBy object, not a string, during get_order_dir. The linked stacktrace should make the issue obvious, but what I don't understand is why it only fails during test db setup, not during repl or script use. I wish I could help more and come up with a real solution. Hopefully, this is enough for someone wiser to find the culprit.\n",
  "ground_truth": {
    "files": [
      "django/db/models/sql/compiler.py"
    ],
    "locations": [
      "django/db/models/sql/compiler.py::SQLCompiler",
      "django/db/models/sql/compiler.py::SQLCompiler.find_ordering_name"
    ]
  },
  "predictions": [
    "tests/ordering/tests.py::OrderingTests.test_default_ordering_override",
    "tests/ordering/tests.py::OrderingTests.test_default_ordering_by_f_expression",
    "tests/ordering/tests.py::OrderingTests.test_order_by_pk",
    "tests/queries/tests.py::Queries1Tests.test_ticket17429",
    "tests/queries/tests.py::Queries4Tests.test_order_by_resetting",
    "tests/postgres_tests/test_json.py::TestModelMetaOrdering.test_ordering_by_json_field_value",
    "tests/ordering/tests.py::OrderingTests.test_order_by_fk_attname",
    "tests/ordering/tests.py::OrderingTests.test_order_by_override",
    "tests/expressions/tests.py::BasicExpressionsTests.test_order_by_multiline_sql",
    "tests/ordering/tests.py::OrderingTests.test_order_by_f_expression"
  ],
  "metadata": {
    "repo": "django/django",
    "commit": "8dd5877f58f84f2b11126afbd0813e24545919ed",
    "total_functions_indexed": 22642,
    "retrieval_time_seconds": 0.09508705139160156
  },
  "raw_output": "[{\"doc_id\": \"tests/ordering/tests.py::OrderingTests.test_default_ordering_override\", \"score\": 0.5209665298461914}, {\"doc_id\": \"tests/ordering/tests.py::OrderingTests.test_default_ordering_by_f_expression\", \"score\": 0.5177536010742188}, {\"doc_id\": \"tests/ordering/tests.py::OrderingTests.test_order_by_pk\", \"score\": 0.5055245161056519}, {\"doc_id\": \"tests/queries/tests.py::Queries1Tests.test_ticket17429\", \"score\": 0.4973812699317932}, {\"doc_id\": \"tests/queries/tests.py::Queries4Tests.test_order_by_resetting\", \"score\": 0.4949391484260559}, {\"doc_id\": \"tests/postgres_tests/test_json.py::TestModelMetaOrdering.test_ordering_by_json_field_value\", \"score\": 0.49001652002334595}, {\"doc_id\": \"tests/ordering/tests.py::OrderingTests.test_order_by_fk_attname\", \"score\": 0.48370712995529175}, {\"doc_id\": \"tests/ordering/tests.py::OrderingTests.test_order_by_override\", \"score\": 0.48298805952072144}, {\"doc_id\": \"tests/expressions/tests.py::BasicExpressionsTests.test_order_by_multiline_sql\", \"score\": 0.4788428843021393}, {\"doc_id\": \"tests/ordering/tests.py::OrderingTests.test_order_by_f_expression\", \"score\": 0.47474586963653564}]"
}