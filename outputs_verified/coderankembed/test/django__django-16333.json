{
  "instance_id": "django__django-16333",
  "query": "UserCreationForm should save data from ManyToMany form fields\nDescription\n\t\nWhen using contrib.auth.forms.UserCreationForm with a custom User model which has ManyToManyField fields, the data in all related form fields (e.g. a ModelMultipleChoiceField) is not saved. \nThis is because unlike its parent class django.forms.ModelForm, UserCreationForm.save(commit=True) omits to call self.save_m2m(). \nThis has been discussed on the #django-developers mailing list â€‹https://groups.google.com/u/1/g/django-developers/c/2jj-ecoBwE4 and I'm ready to work on a PR.\n",
  "ground_truth": {
    "files": [
      "django/contrib/auth/forms.py"
    ],
    "locations": [
      "django/contrib/auth/forms.py::UserCreationForm",
      "django/contrib/auth/forms.py::UserCreationForm.save"
    ]
  },
  "predictions": [
    "tests/auth_tests/test_forms.py::UserCreationFormTest.test_custom_form_with_different_username_field",
    "django/forms/models.py::BaseModelForm._save_m2m",
    "tests/auth_tests/test_forms.py::UserCreationFormTest.test_user_create_form_validates_password_with_all_data",
    "django/db/models/fields/related.py::ManyToManyField.save_form_data",
    "tests/auth_tests/test_forms.py::UserCreationFormTest.test_custom_form",
    "tests/model_forms/tests.py::ModelFormBasicTests.test_custom_form_fields",
    "tests/auth_tests/test_forms.py::UserCreationFormTest.test_custom_form_hidden_username_field",
    "tests/auth_tests/test_forms.py::UserCreationFormTest.test_user_already_exists",
    "tests/schema/tests.py::SchemaTests.test_m2m_create",
    "tests/schema/tests.py::SchemaTests.test_m2m_create_custom"
  ],
  "metadata": {
    "repo": "django/django",
    "commit": "60a7bd89860e504c0c33b02c78edcac87f6d1b5a",
    "total_functions_indexed": 26312,
    "retrieval_time_seconds": 0.00569605827331543
  },
  "raw_output": "[{\"doc_id\": \"tests/auth_tests/test_forms.py::UserCreationFormTest.test_custom_form_with_different_username_field\", \"score\": 0.5558622479438782}, {\"doc_id\": \"django/forms/models.py::BaseModelForm._save_m2m\", \"score\": 0.542967677116394}, {\"doc_id\": \"tests/auth_tests/test_forms.py::UserCreationFormTest.test_user_create_form_validates_password_with_all_data\", \"score\": 0.5074884295463562}, {\"doc_id\": \"django/db/models/fields/related.py::ManyToManyField.save_form_data\", \"score\": 0.5047961473464966}, {\"doc_id\": \"tests/auth_tests/test_forms.py::UserCreationFormTest.test_custom_form\", \"score\": 0.504324197769165}, {\"doc_id\": \"tests/model_forms/tests.py::ModelFormBasicTests.test_custom_form_fields\", \"score\": 0.47612497210502625}, {\"doc_id\": \"tests/auth_tests/test_forms.py::UserCreationFormTest.test_custom_form_hidden_username_field\", \"score\": 0.4758463501930237}, {\"doc_id\": \"tests/auth_tests/test_forms.py::UserCreationFormTest.test_user_already_exists\", \"score\": 0.4732615351676941}, {\"doc_id\": \"tests/schema/tests.py::SchemaTests.test_m2m_create\", \"score\": 0.46536779403686523}, {\"doc_id\": \"tests/schema/tests.py::SchemaTests.test_m2m_create_custom\", \"score\": 0.4641115963459015}]"
}