{
  "instance_id": "django__django-12155",
  "query": "docutils reports an error rendering view docstring when the first line is not empty\nDescription\n\t\nCurrently admindoc works correctly only with docstrings where the first line is empty, and all Django docstrings are formatted in this way.\nHowever usually the docstring text starts at the first line, e.g.:\ndef test():\n\t\"\"\"test tests something.\n\t\"\"\"\nand this cause an error:\nError in \"default-role\" directive:\nno content permitted.\n.. default-role:: cmsreference\nThe culprit is this code in trim_docstring:\nindent = min(len(line) - len(line.lstrip()) for line in lines if line.lstrip())\nThe problem is that the indentation of the first line is 0.\nThe solution is to skip the first line:\nindent = min(len(line) - len(line.lstrip()) for line in lines[1:] if line.lstrip())\nThanks.\n",
  "ground_truth": {
    "files": [
      "django/contrib/admindocs/utils.py",
      "django/contrib/admindocs/views.py"
    ],
    "locations": [
      "django/contrib/admindocs/utils.py::get_view_name",
      "django/contrib/admindocs/utils.py::trim_docstring",
      "django/contrib/admindocs/utils.py::parse_docstring",
      "django/contrib/admindocs/views.py::ModelDetailView",
      "django/contrib/admindocs/views.py::ModelDetailView.get_context_data"
    ]
  },
  "predictions": [
    "django/contrib/admindocs/utils.py::trim_docstring",
    "tests/admin_docs/test_utils.py::TestUtils.test_trim_docstring",
    "django/contrib/admindocs/views.py::BaseAdminDocsView.dispatch",
    "tests/admin_docs/test_utils.py::TestUtils.test_parse_docstring",
    "tests/admin_docs/test_views.py::AdminDocViewTests.test_index",
    "tests/admin_docs/test_views.py::AdminDocViewTests.test_missing_docutils",
    "django/contrib/admindocs/utils.py::parse_docstring",
    "tests/admin_docs/test_views.py::AdminDocViewTests.test_view_detail",
    "tests/admin_docs/test_views.py::AdminDocViewTests.test_templatefilter_index",
    "tests/admin_docs/test_utils.py::TestUtils.test_title_output"
  ],
  "metadata": {
    "repo": "django/django",
    "commit": "e8fcdaad5c428878d0a5d6ba820d957013f75595",
    "total_functions_indexed": 23049,
    "retrieval_time_seconds": 0.02617359161376953
  },
  "raw_output": "[{\"doc_id\": \"django/contrib/admindocs/utils.py::trim_docstring\", \"score\": 0.5376546382904053}, {\"doc_id\": \"tests/admin_docs/test_utils.py::TestUtils.test_trim_docstring\", \"score\": 0.5129658579826355}, {\"doc_id\": \"django/contrib/admindocs/views.py::BaseAdminDocsView.dispatch\", \"score\": 0.4645535945892334}, {\"doc_id\": \"tests/admin_docs/test_utils.py::TestUtils.test_parse_docstring\", \"score\": 0.4407504200935364}, {\"doc_id\": \"tests/admin_docs/test_views.py::AdminDocViewTests.test_index\", \"score\": 0.4344056248664856}, {\"doc_id\": \"tests/admin_docs/test_views.py::AdminDocViewTests.test_missing_docutils\", \"score\": 0.42937251925468445}, {\"doc_id\": \"django/contrib/admindocs/utils.py::parse_docstring\", \"score\": 0.4179198145866394}, {\"doc_id\": \"tests/admin_docs/test_views.py::AdminDocViewTests.test_view_detail\", \"score\": 0.4133269786834717}, {\"doc_id\": \"tests/admin_docs/test_views.py::AdminDocViewTests.test_templatefilter_index\", \"score\": 0.4056389331817627}, {\"doc_id\": \"tests/admin_docs/test_utils.py::TestUtils.test_title_output\", \"score\": 0.40055394172668457}]"
}