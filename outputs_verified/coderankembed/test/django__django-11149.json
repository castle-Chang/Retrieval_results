{
  "instance_id": "django__django-11149",
  "query": "Admin inlines for auto-created ManyToManyFields are editable if the user only has the view permission\nDescription\n\t\nFrom https://code.djangoproject.com/ticket/8060#comment:34\nReplying to Will Gordon:\nThis seems to have regressed in (at least) 2.1. I have 2 view only permissions. I have a ManyToManyField represented in my main model as a TabularInline. But, my user with view only permissions can now add or remove these items at will!\nI am having the same issue, so I assume this is a bug. I did not find Will had created a separate ticket.\nmodels.py:\nclass Photo(models.Model):\n\tpass\nclass Report(models.Model):\n\tphotos = models.ManyToManyField(Photo)\nadmin.py:\n\t\tclass ReportPhotoInlineModelAdmin(admin.TabularInline):\n\t\t\tmodel = Report.photos.through\n\t\t\tshow_change_link = True\n",
  "ground_truth": {
    "files": [
      "django/contrib/admin/options.py"
    ],
    "locations": [
      "django/contrib/admin/options.py::InlineModelAdmin",
      "django/contrib/admin/options.py::InlineModelAdmin.get_queryset",
      "django/contrib/admin/options.py::InlineModelAdmin.has_add_permission",
      "django/contrib/admin/options.py::InlineModelAdmin.has_change_permission",
      "django/contrib/admin/options.py::InlineModelAdmin.has_delete_permission",
      "django/contrib/admin/options.py::InlineModelAdmin.has_view_permission"
    ]
  },
  "predictions": [
    "django/contrib/admin/options.py::InlineModelAdmin.has_change_permission",
    "django/contrib/admin/options.py::InlineModelAdmin.has_view_permission",
    "tests/admin_inlines/tests.py::TestInline.test_many_to_many_inlines",
    "django/contrib/admin/options.py::InlineModelAdmin.has_add_permission",
    "tests/admin_inlines/tests.py::TestInlinePermissions.test_inline_change_m2m_change_perm",
    "django/contrib/admin/options.py::InlineModelAdmin.has_delete_permission",
    "tests/admin_views/tests.py::AdminViewPermissionsTest.test_change_view_with_view_only_inlines",
    "tests/admin_views/tests.py::AdminViewPermissionsTest.test_change_view_with_view_and_add_inlines",
    "tests/admin_inlines/tests.py::TestInline.test_tabular_model_form_meta_readonly_field",
    "tests/admin_views/tests.py::AdminViewPermissionsTest.test_change_view_with_view_and_delete_inlines"
  ],
  "metadata": {
    "repo": "django/django",
    "commit": "e245046bb6e8b32360aa48b8a41fb7050f0fc730",
    "total_functions_indexed": 22410,
    "retrieval_time_seconds": 0.015935420989990234
  },
  "raw_output": "[{\"doc_id\": \"django/contrib/admin/options.py::InlineModelAdmin.has_change_permission\", \"score\": 0.5856953263282776}, {\"doc_id\": \"django/contrib/admin/options.py::InlineModelAdmin.has_view_permission\", \"score\": 0.5813630819320679}, {\"doc_id\": \"tests/admin_inlines/tests.py::TestInline.test_many_to_many_inlines\", \"score\": 0.5211378931999207}, {\"doc_id\": \"django/contrib/admin/options.py::InlineModelAdmin.has_add_permission\", \"score\": 0.5191348791122437}, {\"doc_id\": \"tests/admin_inlines/tests.py::TestInlinePermissions.test_inline_change_m2m_change_perm\", \"score\": 0.5147058963775635}, {\"doc_id\": \"django/contrib/admin/options.py::InlineModelAdmin.has_delete_permission\", \"score\": 0.5068928003311157}, {\"doc_id\": \"tests/admin_views/tests.py::AdminViewPermissionsTest.test_change_view_with_view_only_inlines\", \"score\": 0.5027278661727905}, {\"doc_id\": \"tests/admin_views/tests.py::AdminViewPermissionsTest.test_change_view_with_view_and_add_inlines\", \"score\": 0.5017943978309631}, {\"doc_id\": \"tests/admin_inlines/tests.py::TestInline.test_tabular_model_form_meta_readonly_field\", \"score\": 0.49509167671203613}, {\"doc_id\": \"tests/admin_views/tests.py::AdminViewPermissionsTest.test_change_view_with_view_and_delete_inlines\", \"score\": 0.49087923765182495}]"
}