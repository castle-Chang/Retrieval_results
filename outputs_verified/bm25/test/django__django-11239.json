{
  "instance_id": "django__django-11239",
  "query": "Add support for postgresql client certificates and key to dbshell.\nDescription\n\t\nThis bug is very similar to the #28322\nA common security procedure for DB access is to require mutual TLS for the DB connection.\nThis involves specifying a server certificate, client certificate, and client key when connecting.\nDjango already supports this configuration, it looks like this:\nDATABASES = {\n\t'default': {\n\t\t'ENGINE': 'django.db.backends.postgresql',\n\t\t'NAME': os.environ.get('POSTGRES_DB_NAME'),\n\t\t'USER': os.environ.get('POSTGRES_DB_USER'),\n\t\t'HOST': 'postgres',\n\t\t'PORT': '5432',\n\t\t'SCHEMA': os.environ.get('POSTGRES_DB_SCHEMA'),\n\t\t'OPTIONS': {\n\t\t\t 'sslmode': 'verify-ca',\n\t\t\t 'sslrootcert': os.environ.get('POSTGRES_CLI_SSL_CA', 'ca.crt'),\n\t\t\t 'sslcert': os.environ.get('POSTGRES_CLI_SSL_CRT', 'client_cert_chain.crt'),\n\t\t\t 'sslkey': os.environ.get('POSTGRES_CLI_SSL_KEY', 'client_key.key')\n\t\t}\n\t}\n}\nHowever the dbshell command does not support the client cert params.\nShould be a trivial fix to add in support for the other 'ssl' parameters required here.\n",
  "ground_truth": {
    "files": [
      "django/db/backends/postgresql/client.py"
    ],
    "locations": [
      "django/db/backends/postgresql/client.py::DatabaseClient",
      "django/db/backends/postgresql/client.py::DatabaseClient.runshell_db"
    ]
  },
  "predictions": [
    "django/core/handlers/wsgi.py::get_bytes_from_wsgi",
    "django/db/backends/mysql/client.py::DatabaseClient.settings_to_cmd_args",
    "tests/dbshell/test_mysql.py::MySqlDbshellCommandTestCase.test_ssl_certificate_is_added",
    "django/core/handlers/wsgi.py::get_str_from_wsgi",
    "tests/bash_completion/tests.py::BashCompletionTests.setUp",
    "django/db/backends/postgresql/client.py::DatabaseClient.runshell_db",
    "tests/test_client/tests.py::ClientTest.test_response_attached_request",
    "django/core/management/utils.py::find_command",
    "django/db/backends/oracle/base.py::_setup_environment",
    "django/core/management/color.py::color_style"
  ],
  "metadata": {
    "repo": "django/django",
    "commit": "d87bd29c4f8dfcdf3f4a4eb8340e6770a2416fe3",
    "total_functions_indexed": 22429,
    "retrieval_time_seconds": 1.6383731365203857
  },
  "raw_output": "[{\"doc_id\": \"django/core/handlers/wsgi.py::get_bytes_from_wsgi\", \"score\": 147.4803170297112}, {\"doc_id\": \"django/db/backends/mysql/client.py::DatabaseClient.settings_to_cmd_args\", \"score\": 136.54804858485224}, {\"doc_id\": \"tests/dbshell/test_mysql.py::MySqlDbshellCommandTestCase.test_ssl_certificate_is_added\", \"score\": 136.03195239423226}, {\"doc_id\": \"django/core/handlers/wsgi.py::get_str_from_wsgi\", \"score\": 125.49823030251106}, {\"doc_id\": \"tests/bash_completion/tests.py::BashCompletionTests.setUp\", \"score\": 123.41555950927318}, {\"doc_id\": \"django/db/backends/postgresql/client.py::DatabaseClient.runshell_db\", \"score\": 123.01912606784558}, {\"doc_id\": \"tests/test_client/tests.py::ClientTest.test_response_attached_request\", \"score\": 120.09274805085128}, {\"doc_id\": \"django/core/management/utils.py::find_command\", \"score\": 116.82153746168287}, {\"doc_id\": \"django/db/backends/oracle/base.py::_setup_environment\", \"score\": 113.6027156784194}, {\"doc_id\": \"django/core/management/color.py::color_style\", \"score\": 110.35593273203179}]"
}