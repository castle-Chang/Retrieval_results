{
  "instance_id": "django__django-11555",
  "query": "order_by() a parent model crash when Meta.ordering contains expressions.\nDescription\n\t \n\t\t(last modified by Jonny Fuller)\n\t \nHi friends,\nDuring testing I discovered a strange bug when using a query expression for ordering during multi-table inheritance. You can find the full write up as well as reproducible test repository â€‹https://github.com/JonnyWaffles/djangoordermetabug. The bug occurs because the field is an OrderBy object, not a string, during get_order_dir. The linked stacktrace should make the issue obvious, but what I don't understand is why it only fails during test db setup, not during repl or script use. I wish I could help more and come up with a real solution. Hopefully, this is enough for someone wiser to find the culprit.\n",
  "ground_truth": {
    "files": [
      "django/db/models/sql/compiler.py"
    ],
    "locations": [
      "django/db/models/sql/compiler.py::SQLCompiler",
      "django/db/models/sql/compiler.py::SQLCompiler.find_ordering_name"
    ]
  },
  "predictions": [
    "django/forms/formsets.py::BaseFormSet.ordered_forms",
    "tests/file_uploads/tests.py::FileUploadTests.test_file_error_blocking",
    "tests/queries/tests.py::ConditionalTests.test_infinite_loop",
    "tests/delete/tests.py::DeletionTests.test_proxied_model_duplicate_queries",
    "django/db/models/sql/query.py::JoinPromoter.update_join_types",
    "tests/schema/tests.py::SchemaTests.test_alter_int_pk_to_int_unique",
    "django/db/models/sql/query.py::Query.combine",
    "django/db/models/sql/query.py::Query.add_ordering",
    "tests/model_inheritance_regress/tests.py::ModelInheritanceTest.test_inherited_fields",
    "django/db/models/query.py::QuerySet.bulk_create"
  ],
  "metadata": {
    "repo": "django/django",
    "commit": "8dd5877f58f84f2b11126afbd0813e24545919ed",
    "total_functions_indexed": 22642,
    "retrieval_time_seconds": 1.4941940307617188
  },
  "raw_output": "[{\"doc_id\": \"django/forms/formsets.py::BaseFormSet.ordered_forms\", \"score\": 84.22687232992178}, {\"doc_id\": \"tests/file_uploads/tests.py::FileUploadTests.test_file_error_blocking\", \"score\": 83.64567398783714}, {\"doc_id\": \"tests/queries/tests.py::ConditionalTests.test_infinite_loop\", \"score\": 82.97005305245399}, {\"doc_id\": \"tests/delete/tests.py::DeletionTests.test_proxied_model_duplicate_queries\", \"score\": 80.94223780457924}, {\"doc_id\": \"django/db/models/sql/query.py::JoinPromoter.update_join_types\", \"score\": 80.01613331486351}, {\"doc_id\": \"tests/schema/tests.py::SchemaTests.test_alter_int_pk_to_int_unique\", \"score\": 80.00875230815201}, {\"doc_id\": \"django/db/models/sql/query.py::Query.combine\", \"score\": 79.28527146917786}, {\"doc_id\": \"django/db/models/sql/query.py::Query.add_ordering\", \"score\": 79.10034567579375}, {\"doc_id\": \"tests/model_inheritance_regress/tests.py::ModelInheritanceTest.test_inherited_fields\", \"score\": 78.6910194276249}, {\"doc_id\": \"django/db/models/query.py::QuerySet.bulk_create\", \"score\": 77.9431592887525}]"
}