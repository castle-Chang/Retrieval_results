{
  "instance_id": "django__django-12273",
  "query": "Resetting primary key for a child model doesn't work.\nDescription\n\t\nIn the attached example code setting the primary key to None does not work (so that the existing object is overwritten on save()).\nThe most important code fragments of the bug example:\nfrom django.db import models\nclass Item(models.Model):\n\t# uid = models.UUIDField(primary_key=True, default=uuid.uuid4, editable=False)\n\tuid = models.AutoField(primary_key=True, editable=False)\n\tf = models.BooleanField(default=False)\n\tdef reset(self):\n\t\tself.uid = None\n\t\tself.f = False\nclass Derived(Item):\n\tpass\nclass SaveTestCase(TestCase):\n\tdef setUp(self):\n\t\tself.derived = Derived.objects.create(f=True) # create the first object\n\t\titem = Item.objects.get(pk=self.derived.pk)\n\t\tobj1 = item.derived\n\t\tobj1.reset()\n\t\tobj1.save() # the first object is overwritten\n\tdef test_f_true(self):\n\t\tobj = Item.objects.get(pk=self.derived.pk)\n\t\tself.assertTrue(obj.f)\nDjango 2.1.2\n",
  "ground_truth": {
    "files": [
      "django/db/models/base.py"
    ],
    "locations": [
      "django/db/models/base.py::Model",
      "django/db/models/base.py::Model._get_pk_val",
      "django/db/models/base.py::Model._set_pk_val"
    ]
  },
  "predictions": [
    "django/db/models/options.py::Options.get_fields",
    "tests/defer_regress/tests.py::DeferRegressionTest.test_ticket_23270",
    "django/forms/models.py::BaseModelFormSet.add_fields",
    "tests/queries/tests.py::Queries1Tests.test_tickets_2076_7256",
    "tests/admin_views/tests.py::AdminViewBasicTest.test_sort_indicators_admin_order",
    "django/db/models/base.py::Model._check_id_field",
    "tests/model_inheritance/test_abstract_inheritance.py::AbstractInheritanceTests.test_multiple_parents_mro",
    "django/contrib/admin/checks.py::ModelAdminChecks._check_list_filter_item",
    "tests/defer_regress/tests.py::DeferRegressionTest.test_reverse_one_to_one_relations",
    "tests/defer_regress/tests.py::DeferRegressionTest.test_basic"
  ],
  "metadata": {
    "repo": "django/django",
    "commit": "927c903f3cd25c817c21738328b53991c035b415",
    "total_functions_indexed": 23156,
    "retrieval_time_seconds": 2.5310983657836914
  },
  "raw_output": "[{\"doc_id\": \"django/db/models/options.py::Options.get_fields\", \"score\": 126.95195696157288}, {\"doc_id\": \"tests/defer_regress/tests.py::DeferRegressionTest.test_ticket_23270\", \"score\": 122.74903619989463}, {\"doc_id\": \"django/forms/models.py::BaseModelFormSet.add_fields\", \"score\": 120.00364635523185}, {\"doc_id\": \"tests/queries/tests.py::Queries1Tests.test_tickets_2076_7256\", \"score\": 115.88612982283735}, {\"doc_id\": \"tests/admin_views/tests.py::AdminViewBasicTest.test_sort_indicators_admin_order\", \"score\": 113.84387162060902}, {\"doc_id\": \"django/db/models/base.py::Model._check_id_field\", \"score\": 111.88700227674916}, {\"doc_id\": \"tests/model_inheritance/test_abstract_inheritance.py::AbstractInheritanceTests.test_multiple_parents_mro\", \"score\": 110.35151731986343}, {\"doc_id\": \"django/contrib/admin/checks.py::ModelAdminChecks._check_list_filter_item\", \"score\": 105.66630943093257}, {\"doc_id\": \"tests/defer_regress/tests.py::DeferRegressionTest.test_reverse_one_to_one_relations\", \"score\": 103.72669177769556}, {\"doc_id\": \"tests/defer_regress/tests.py::DeferRegressionTest.test_basic\", \"score\": 103.05596585960639}]"
}