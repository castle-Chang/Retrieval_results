{
  "instance_id": "django__django-12325",
  "query": "pk setup for MTI to parent get confused by multiple OneToOne references.\nDescription\n\t\nclass Document(models.Model):\n\tpass\nclass Picking(Document):\n\tdocument_ptr = models.OneToOneField(Document, on_delete=models.CASCADE, parent_link=True, related_name='+')\n\torigin = models.OneToOneField(Document, related_name='picking', on_delete=models.PROTECT)\nproduces django.core.exceptions.ImproperlyConfigured: Add parent_link=True to appname.Picking.origin.\nclass Picking(Document):\n\torigin = models.OneToOneField(Document, related_name='picking', on_delete=models.PROTECT)\n\tdocument_ptr = models.OneToOneField(Document, on_delete=models.CASCADE, parent_link=True, related_name='+')\nWorks\nFirst issue is that order seems to matter?\nEven if ordering is required \"by design\"(It shouldn't be we have explicit parent_link marker) shouldn't it look from top to bottom like it does with managers and other things?\n",
  "ground_truth": {
    "files": [
      "django/db/models/options.py",
      "django/db/models/base.py"
    ],
    "locations": [
      "django/db/models/base.py::ModelBase",
      "django/db/models/base.py::ModelBase.__new__",
      "django/db/models/options.py::Options",
      "django/db/models/options.py::Options._prepare"
    ]
  },
  "predictions": [
    "django/db/models/fields/reverse_related.py::ForeignObjectRel.__init__",
    "django/db/models/fields/reverse_related.py::OneToOneRel.__init__",
    "django/db/models/fields/reverse_related.py::ManyToOneRel.__init__",
    "tests/invalid_models_tests/test_models.py::OtherModelTests.test_missing_parent_link",
    "tests/field_deconstruction/tests.py::FieldDeconstructionTests.test_one_to_one",
    "tests/model_inheritance/tests.py::ModelInheritanceTests.test_abstract_parent_link",
    "django/db/models/fields/related.py::ForeignObject.__init__",
    "django/db/models/fields/related.py::ForeignKey.__init__",
    "tests/invalid_models_tests/test_models.py::IndexTogetherTests.test_pointing_to_fk",
    "tests/invalid_models_tests/test_models.py::UniqueTogetherTests.test_pointing_to_fk"
  ],
  "metadata": {
    "repo": "django/django",
    "commit": "29c126bb349526b5f1cd78facbe9f25906f18563",
    "total_functions_indexed": 23161,
    "retrieval_time_seconds": 1.7667572498321533
  },
  "raw_output": "[{\"doc_id\": \"django/db/models/fields/reverse_related.py::ForeignObjectRel.__init__\", \"score\": 168.21918095109783}, {\"doc_id\": \"django/db/models/fields/reverse_related.py::OneToOneRel.__init__\", \"score\": 166.02203228611634}, {\"doc_id\": \"django/db/models/fields/reverse_related.py::ManyToOneRel.__init__\", \"score\": 161.72884719186823}, {\"doc_id\": \"tests/invalid_models_tests/test_models.py::OtherModelTests.test_missing_parent_link\", \"score\": 157.8899757585836}, {\"doc_id\": \"tests/field_deconstruction/tests.py::FieldDeconstructionTests.test_one_to_one\", \"score\": 157.71467498489795}, {\"doc_id\": \"tests/model_inheritance/tests.py::ModelInheritanceTests.test_abstract_parent_link\", \"score\": 157.3555821077542}, {\"doc_id\": \"django/db/models/fields/related.py::ForeignObject.__init__\", \"score\": 156.13475346214923}, {\"doc_id\": \"django/db/models/fields/related.py::ForeignKey.__init__\", \"score\": 152.81594009738663}, {\"doc_id\": \"tests/invalid_models_tests/test_models.py::IndexTogetherTests.test_pointing_to_fk\", \"score\": 140.15051035135082}, {\"doc_id\": \"tests/invalid_models_tests/test_models.py::UniqueTogetherTests.test_pointing_to_fk\", \"score\": 140.15051035135082}]"
}