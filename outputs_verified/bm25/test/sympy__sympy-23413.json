{
  "instance_id": "sympy__sympy-23413",
  "query": "bug with HNF removing rows\nI expect\r\n`np.flip (hermite_normal_form (Matrix (np.flip (np.array ([[5, 8, 12], [0, 0, 1]]))).T).T))`\r\nto give\r\n`[[5,  8, 0], [0,  0, 1]]`\r\nbut instead I get\r\n`[[5,  8, 0]]`\r\nIt seems to be falsely identifying my matrix as rank-deficient and removing the row when I try to achieve a row-style HNF using flips and transposes.\n",
  "ground_truth": {
    "files": [
      "sympy/polys/matrices/normalforms.py"
    ],
    "locations": [
      "sympy/polys/matrices/normalforms.py::_hermite_normal_form"
    ]
  },
  "predictions": [
    "sympy/matrices/determinant.py::_minor_submatrix",
    "sympy/matrices/tests/test_normalforms.py::test_hermite_normal",
    "sympy/matrices/tests/test_reductions.py::test_echelon_form",
    "sympy/matrices/normalforms.py::hermite_normal_form",
    "sympy/matrices/common.py::MatrixShaping.extract",
    "sympy/printing/glsl.py::glsl_code",
    "sympy/polys/matrices/tests/test_normalforms.py::test_hermite_normal",
    "sympy/matrices/common.py::MatrixSpecial.diag",
    "sympy/polys/matrices/normalforms.py::hermite_normal_form",
    "sympy/polys/matrices/normalforms.py::_hermite_normal_form"
  ],
  "metadata": {
    "repo": "sympy/sympy",
    "commit": "10de1a18a0efac0b19b611e40c928250dda688bf",
    "total_functions_indexed": 37775,
    "retrieval_time_seconds": 1.6374919414520264
  },
  "raw_output": "[{\"doc_id\": \"sympy/matrices/determinant.py::_minor_submatrix\", \"score\": 109.83723239943197}, {\"doc_id\": \"sympy/matrices/tests/test_normalforms.py::test_hermite_normal\", \"score\": 109.79582887881709}, {\"doc_id\": \"sympy/matrices/tests/test_reductions.py::test_echelon_form\", \"score\": 104.79615215182025}, {\"doc_id\": \"sympy/matrices/normalforms.py::hermite_normal_form\", \"score\": 96.59042774289668}, {\"doc_id\": \"sympy/matrices/common.py::MatrixShaping.extract\", \"score\": 95.76906157644495}, {\"doc_id\": \"sympy/printing/glsl.py::glsl_code\", \"score\": 92.54842802136152}, {\"doc_id\": \"sympy/polys/matrices/tests/test_normalforms.py::test_hermite_normal\", \"score\": 92.49790755812958}, {\"doc_id\": \"sympy/matrices/common.py::MatrixSpecial.diag\", \"score\": 92.12243989461128}, {\"doc_id\": \"sympy/polys/matrices/normalforms.py::hermite_normal_form\", \"score\": 91.57719137726623}, {\"doc_id\": \"sympy/polys/matrices/normalforms.py::_hermite_normal_form\", \"score\": 90.17595416399743}]"
}