{
  "instance_id": "sympy__sympy-24443",
  "query": "`_check_homomorphism` is broken on PermutationGroups\n```python\r\nIn [1]: from sympy.combinatorics import *\r\n   ...: from sympy.combinatorics.homomorphisms import homomorphism\r\n   ...: D3 = DihedralGroup(3)\r\n   ...: T = homomorphism(D3, D3, D3.generators, D3.generators)\r\n\r\nValueError: The given images do not define a homomorphism\r\n```\r\n\r\nThe issue is in the internal `_image()` function, where it handles the case of a `PermutationGroup`:\r\n\r\nhttps://github.com/sympy/sympy/blob/809c53c077485ca48a206cee78340389cb83b7f1/sympy/combinatorics/homomorphisms.py#L336-L337\r\n\r\nWhen `r[i]` is an inverted generator, the `in gens` test fails.\r\n\r\nI think the whole thing can be greatly simplified.\n",
  "ground_truth": {
    "files": [
      "sympy/combinatorics/homomorphisms.py"
    ],
    "locations": [
      "sympy/combinatorics/homomorphisms.py::homomorphism",
      "sympy/combinatorics/homomorphisms.py::_check_homomorphism"
    ]
  },
  "predictions": [
    "sympy/combinatorics/homomorphisms.py::homomorphism",
    "sympy/combinatorics/fp_groups.py::FpGroup._to_perm_group",
    "sympy/combinatorics/homomorphisms.py::_check_homomorphism",
    "sympy/combinatorics/fp_groups.py::FpGroup.subgroup",
    "sympy/combinatorics/homomorphisms.py::group_isomorphism",
    "sympy/combinatorics/homomorphisms.py::GroupHomomorphism.restrict_to",
    "sympy/combinatorics/homomorphisms.py::GroupHomomorphism.invert_subgroup",
    "sympy/combinatorics/perm_groups.py::PermutationGroup.strong_presentation",
    "sympy/combinatorics/homomorphisms.py::orbit_homomorphism",
    "sympy/combinatorics/tensor_can.py::double_coset_can_rep"
  ],
  "metadata": {
    "repo": "sympy/sympy",
    "commit": "809c53c077485ca48a206cee78340389cb83b7f1",
    "total_functions_indexed": 29994,
    "retrieval_time_seconds": 1.6002776622772217
  },
  "raw_output": "[{\"doc_id\": \"sympy/combinatorics/homomorphisms.py::homomorphism\", \"score\": 164.10095640793932}, {\"doc_id\": \"sympy/combinatorics/fp_groups.py::FpGroup._to_perm_group\", \"score\": 142.43536371891872}, {\"doc_id\": \"sympy/combinatorics/homomorphisms.py::_check_homomorphism\", \"score\": 141.27079879074367}, {\"doc_id\": \"sympy/combinatorics/fp_groups.py::FpGroup.subgroup\", \"score\": 138.6018281348185}, {\"doc_id\": \"sympy/combinatorics/homomorphisms.py::group_isomorphism\", \"score\": 133.73282328778313}, {\"doc_id\": \"sympy/combinatorics/homomorphisms.py::GroupHomomorphism.restrict_to\", \"score\": 124.79319956268355}, {\"doc_id\": \"sympy/combinatorics/homomorphisms.py::GroupHomomorphism.invert_subgroup\", \"score\": 120.05165220295065}, {\"doc_id\": \"sympy/combinatorics/perm_groups.py::PermutationGroup.strong_presentation\", \"score\": 116.43137223335127}, {\"doc_id\": \"sympy/combinatorics/homomorphisms.py::orbit_homomorphism\", \"score\": 115.86794141549142}, {\"doc_id\": \"sympy/combinatorics/tensor_can.py::double_coset_can_rep\", \"score\": 112.99254893970283}]"
}