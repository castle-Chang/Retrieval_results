{
  "instance_id": "django__django-11239",
  "query": "Add support for postgresql client certificates and key to dbshell.\nDescription\n\t\nThis bug is very similar to the #28322\nA common security procedure for DB access is to require mutual TLS for the DB connection.\nThis involves specifying a server certificate, client certificate, and client key when connecting.\nDjango already supports this configuration, it looks like this:\nDATABASES = {\n\t'default': {\n\t\t'ENGINE': 'django.db.backends.postgresql',\n\t\t'NAME': os.environ.get('POSTGRES_DB_NAME'),\n\t\t'USER': os.environ.get('POSTGRES_DB_USER'),\n\t\t'HOST': 'postgres',\n\t\t'PORT': '5432',\n\t\t'SCHEMA': os.environ.get('POSTGRES_DB_SCHEMA'),\n\t\t'OPTIONS': {\n\t\t\t 'sslmode': 'verify-ca',\n\t\t\t 'sslrootcert': os.environ.get('POSTGRES_CLI_SSL_CA', 'ca.crt'),\n\t\t\t 'sslcert': os.environ.get('POSTGRES_CLI_SSL_CRT', 'client_cert_chain.crt'),\n\t\t\t 'sslkey': os.environ.get('POSTGRES_CLI_SSL_KEY', 'client_key.key')\n\t\t}\n\t}\n}\nHowever the dbshell command does not support the client cert params.\nShould be a trivial fix to add in support for the other 'ssl' parameters required here.\n",
  "ground_truth": {
    "files": [
      "django/db/backends/postgresql/client.py"
    ],
    "locations": [
      "django/db/backends/postgresql/client.py::DatabaseClient",
      "django/db/backends/postgresql/client.py::DatabaseClient.runshell_db"
    ]
  },
  "predictions": [
    "django/db/backends/postgresql/client.py::DatabaseClient.runshell",
    "django/db/backends/postgresql/client.py::DatabaseClient.runshell_db",
    "django/db/backends/sqlite3/client.py::DatabaseClient.runshell",
    "tests/dbshell/test_mysql.py::MySqlDbshellCommandTestCase.test_ssl_certificate_is_added",
    "django/core/management/commands/dbshell.py::Command.handle",
    "django/db/backends/base/client.py::BaseDatabaseClient.runshell",
    "tests/dbshell/test_postgresql.py::PostgreSqlDbshellCommandTestCase.test_nopass",
    "django/core/management/commands/dbshell.py::Command.add_arguments",
    "tests/backends/postgresql/tests.py::Tests.test_database_name_too_long",
    "tests/dbshell/test_postgresql.py::PostgreSqlDbshellCommandTestCase.test_basic"
  ],
  "metadata": {
    "repo": "django/django",
    "commit": "d87bd29c4f8dfcdf3f4a4eb8340e6770a2416fe3",
    "total_functions_indexed": 22429,
    "retrieval_time_seconds": 0.00792241096496582
  },
  "raw_output": "[{\"doc_id\": \"django/db/backends/postgresql/client.py::DatabaseClient.runshell\", \"score\": 0.7112761735916138}, {\"doc_id\": \"django/db/backends/postgresql/client.py::DatabaseClient.runshell_db\", \"score\": 0.7105650305747986}, {\"doc_id\": \"django/db/backends/sqlite3/client.py::DatabaseClient.runshell\", \"score\": 0.7079044580459595}, {\"doc_id\": \"tests/dbshell/test_mysql.py::MySqlDbshellCommandTestCase.test_ssl_certificate_is_added\", \"score\": 0.6928631067276001}, {\"doc_id\": \"django/core/management/commands/dbshell.py::Command.handle\", \"score\": 0.6915801763534546}, {\"doc_id\": \"django/db/backends/base/client.py::BaseDatabaseClient.runshell\", \"score\": 0.6913547515869141}, {\"doc_id\": \"tests/dbshell/test_postgresql.py::PostgreSqlDbshellCommandTestCase.test_nopass\", \"score\": 0.6884813904762268}, {\"doc_id\": \"django/core/management/commands/dbshell.py::Command.add_arguments\", \"score\": 0.6876085996627808}, {\"doc_id\": \"tests/backends/postgresql/tests.py::Tests.test_database_name_too_long\", \"score\": 0.6857730746269226}, {\"doc_id\": \"tests/dbshell/test_postgresql.py::PostgreSqlDbshellCommandTestCase.test_basic\", \"score\": 0.6848788857460022}]"
}