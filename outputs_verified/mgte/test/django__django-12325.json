{
  "instance_id": "django__django-12325",
  "query": "pk setup for MTI to parent get confused by multiple OneToOne references.\nDescription\n\t\nclass Document(models.Model):\n\tpass\nclass Picking(Document):\n\tdocument_ptr = models.OneToOneField(Document, on_delete=models.CASCADE, parent_link=True, related_name='+')\n\torigin = models.OneToOneField(Document, related_name='picking', on_delete=models.PROTECT)\nproduces django.core.exceptions.ImproperlyConfigured: Add parent_link=True to appname.Picking.origin.\nclass Picking(Document):\n\torigin = models.OneToOneField(Document, related_name='picking', on_delete=models.PROTECT)\n\tdocument_ptr = models.OneToOneField(Document, on_delete=models.CASCADE, parent_link=True, related_name='+')\nWorks\nFirst issue is that order seems to matter?\nEven if ordering is required \"by design\"(It shouldn't be we have explicit parent_link marker) shouldn't it look from top to bottom like it does with managers and other things?\n",
  "ground_truth": {
    "files": [
      "django/db/models/options.py",
      "django/db/models/base.py"
    ],
    "locations": [
      "django/db/models/base.py::ModelBase",
      "django/db/models/base.py::ModelBase.__new__",
      "django/db/models/options.py::Options",
      "django/db/models/options.py::Options._prepare"
    ]
  },
  "predictions": [
    "django/db/models/fields/reverse_related.py::OneToOneRel.__init__",
    "django/db/models/options.py::Options._prepare",
    "django/db/models/fields/related.py::OneToOneField.__init__",
    "django/db/models/fields/related.py::OneToOneField.formfield",
    "django/db/models/base.py::Model._set_pk_val",
    "django/db/models/fields/related_descriptors.py::ForwardOneToOneDescriptor.__set__",
    "tests/invalid_models_tests/test_models.py::OtherModelTests.test_missing_parent_link",
    "django/db/models/fields/related_descriptors.py::ReverseOneToOneDescriptor.__init__",
    "tests/model_inheritance/tests.py::ModelInheritanceDataTests.test_parent_child_one_to_one_link",
    "django/db/models/fields/reverse_related.py::ManyToOneRel.__init__"
  ],
  "metadata": {
    "repo": "django/django",
    "commit": "29c126bb349526b5f1cd78facbe9f25906f18563",
    "total_functions_indexed": 23161,
    "retrieval_time_seconds": 0.010312557220458984
  },
  "raw_output": "[{\"doc_id\": \"django/db/models/fields/reverse_related.py::OneToOneRel.__init__\", \"score\": 0.7340707778930664}, {\"doc_id\": \"django/db/models/options.py::Options._prepare\", \"score\": 0.721377968788147}, {\"doc_id\": \"django/db/models/fields/related.py::OneToOneField.__init__\", \"score\": 0.7188317775726318}, {\"doc_id\": \"django/db/models/fields/related.py::OneToOneField.formfield\", \"score\": 0.7148134112358093}, {\"doc_id\": \"django/db/models/base.py::Model._set_pk_val\", \"score\": 0.7136787176132202}, {\"doc_id\": \"django/db/models/fields/related_descriptors.py::ForwardOneToOneDescriptor.__set__\", \"score\": 0.7130066156387329}, {\"doc_id\": \"tests/invalid_models_tests/test_models.py::OtherModelTests.test_missing_parent_link\", \"score\": 0.7128835916519165}, {\"doc_id\": \"django/db/models/fields/related_descriptors.py::ReverseOneToOneDescriptor.__init__\", \"score\": 0.710364580154419}, {\"doc_id\": \"tests/model_inheritance/tests.py::ModelInheritanceDataTests.test_parent_child_one_to_one_link\", \"score\": 0.7084873914718628}, {\"doc_id\": \"django/db/models/fields/reverse_related.py::ManyToOneRel.__init__\", \"score\": 0.7051442861557007}]"
}