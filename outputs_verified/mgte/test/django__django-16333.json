{
  "instance_id": "django__django-16333",
  "query": "UserCreationForm should save data from ManyToMany form fields\nDescription\n\t\nWhen using contrib.auth.forms.UserCreationForm with a custom User model which has ManyToManyField fields, the data in all related form fields (e.g. a ModelMultipleChoiceField) is not saved. \nThis is because unlike its parent class django.forms.ModelForm, UserCreationForm.save(commit=True) omits to call self.save_m2m(). \nThis has been discussed on the #django-developers mailing list â€‹https://groups.google.com/u/1/g/django-developers/c/2jj-ecoBwE4 and I'm ready to work on a PR.\n",
  "ground_truth": {
    "files": [
      "django/contrib/auth/forms.py"
    ],
    "locations": [
      "django/contrib/auth/forms.py::UserCreationForm",
      "django/contrib/auth/forms.py::UserCreationForm.save"
    ]
  },
  "predictions": [
    "django/contrib/auth/forms.py::UserCreationForm.save",
    "django/db/models/fields/related.py::ManyToManyField.save_form_data",
    "django/forms/models.py::BaseModelForm._save_m2m",
    "django/db/models/fields/related.py::ManyToManyField.formfield",
    "django/contrib/admin/options.py::ModelAdmin.save_related",
    "django/forms/models.py::BaseModelForm.save",
    "tests/forms_tests/tests/tests.py::ManyToManyExclusionTestCase.test_m2m_field_exclusion",
    "django/contrib/admin/options.py::BaseModelAdmin.formfield_for_manytomany",
    "django/contrib/contenttypes/forms.py::BaseGenericInlineFormSet.save_new",
    "django/forms/models.py::BaseModelFormSet.save"
  ],
  "metadata": {
    "repo": "django/django",
    "commit": "60a7bd89860e504c0c33b02c78edcac87f6d1b5a",
    "total_functions_indexed": 26312,
    "retrieval_time_seconds": 0.01016378402709961
  },
  "raw_output": "[{\"doc_id\": \"django/contrib/auth/forms.py::UserCreationForm.save\", \"score\": 0.7765909433364868}, {\"doc_id\": \"django/db/models/fields/related.py::ManyToManyField.save_form_data\", \"score\": 0.7688593864440918}, {\"doc_id\": \"django/forms/models.py::BaseModelForm._save_m2m\", \"score\": 0.7675556540489197}, {\"doc_id\": \"django/db/models/fields/related.py::ManyToManyField.formfield\", \"score\": 0.7380387783050537}, {\"doc_id\": \"django/contrib/admin/options.py::ModelAdmin.save_related\", \"score\": 0.7363197803497314}, {\"doc_id\": \"django/forms/models.py::BaseModelForm.save\", \"score\": 0.7321081757545471}, {\"doc_id\": \"tests/forms_tests/tests/tests.py::ManyToManyExclusionTestCase.test_m2m_field_exclusion\", \"score\": 0.7251906394958496}, {\"doc_id\": \"django/contrib/admin/options.py::BaseModelAdmin.formfield_for_manytomany\", \"score\": 0.7231042385101318}, {\"doc_id\": \"django/contrib/contenttypes/forms.py::BaseGenericInlineFormSet.save_new\", \"score\": 0.7226652503013611}, {\"doc_id\": \"django/forms/models.py::BaseModelFormSet.save\", \"score\": 0.7216708660125732}]"
}